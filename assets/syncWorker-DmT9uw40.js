let languageDataProp,foldService,CompletionContext,LanguageDescription,EditorView,ParseContext,bracketMatchingHandle,DefaultBufferLength,IterMode,sublanguageProp,LRLanguage,NodeWeakMap,Parser$1,Tag,LanguageSupport,ifNotIn,continuedIndent,completeFromList,syntaxTree,foldNodeProp,flatIndent,delimitedIndent,indentNodeProp,foldInside,snippetCompletion,EditorSelection,NodeType,NodeProp,NodeSet,parseMixed,Tree,countColumn,styleTags,tags,Prec,keymap,EditorState,Language,indentUnit,defineLanguageFacet;let __tla=(async()=>{function withTimeout(o,e){return new Promise((n,a)=>{const s=setTimeout(()=>{a(new Error("Operation timed out"))},e);o.then(l=>{clearTimeout(s),n(l)},l=>{clearTimeout(s),a(l)})})}function timeout(o){return new Promise(e=>setTimeout(e,o))}var __vite__wasmUrl=""+new URL("loro_wasm_bg-DV_qIX0O.wasm",import.meta.url).href,__vite__initWasm=async(o={},e)=>{let n;if(e.startsWith("data:")){const a=e.replace(/^data:.*?base64,/,"");let s;if(typeof Buffer=="function"&&typeof Buffer.from=="function")s=Buffer.from(a,"base64");else if(typeof atob=="function"){const l=atob(a);s=new Uint8Array(l.length);for(let c=0;c<l.length;c++)s[c]=l.charCodeAt(c)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(s,o)}else{const a=await fetch(e),s=a.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&s.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(a,o);else{const l=await a.arrayBuffer();n=await WebAssembly.instantiate(l,o)}}return n.instance.exports};let wasm$1;function __wbg_set_wasm(o){wasm$1=o}const heap=new Array(128).fill(void 0);heap.push(void 0,null,!0,!1);function getObject(o){return heap[o]}let heap_next=heap.length;function dropObject(o){o<132||(heap[o]=heap_next,heap_next=o)}function takeObject(o){const e=getObject(o);return dropObject(o),e}const lTextDecoder=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let cachedTextDecoder=new lTextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});cachedTextDecoder.decode();let cachedUint8Memory0=null;function getUint8Memory0(){return(cachedUint8Memory0===null||cachedUint8Memory0.byteLength===0)&&(cachedUint8Memory0=new Uint8Array(wasm$1.memory.buffer)),cachedUint8Memory0}function getStringFromWasm0(o,e){return o=o>>>0,cachedTextDecoder.decode(getUint8Memory0().subarray(o,o+e))}function addHeapObject(o){heap_next===heap.length&&heap.push(heap.length+1);const e=heap_next;return heap_next=heap[e],heap[e]=o,e}let WASM_VECTOR_LEN=0;const lTextEncoder=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let cachedTextEncoder=new lTextEncoder("utf-8");const encodeString=typeof cachedTextEncoder.encodeInto=="function"?function(o,e){return cachedTextEncoder.encodeInto(o,e)}:function(o,e){const n=cachedTextEncoder.encode(o);return e.set(n),{read:o.length,written:n.length}};function passStringToWasm0(o,e,n){if(n===void 0){const d=cachedTextEncoder.encode(o),u=e(d.length,1)>>>0;return getUint8Memory0().subarray(u,u+d.length).set(d),WASM_VECTOR_LEN=d.length,u}let a=o.length,s=e(a,1)>>>0;const l=getUint8Memory0();let c=0;for(;c<a;c++){const d=o.charCodeAt(c);if(d>127)break;l[s+c]=d}if(c!==a){c!==0&&(o=o.slice(c)),s=n(s,a,a=c+o.length*3,1)>>>0;const d=getUint8Memory0().subarray(s+c,s+a),u=encodeString(o,d);c+=u.written,s=n(s,a,c,1)>>>0}return WASM_VECTOR_LEN=c,s}function isLikeNone(o){return o==null}let cachedInt32Memory0=null;function getInt32Memory0(){return(cachedInt32Memory0===null||cachedInt32Memory0.byteLength===0)&&(cachedInt32Memory0=new Int32Array(wasm$1.memory.buffer)),cachedInt32Memory0}let cachedFloat64Memory0=null;function getFloat64Memory0(){return(cachedFloat64Memory0===null||cachedFloat64Memory0.byteLength===0)&&(cachedFloat64Memory0=new Float64Array(wasm$1.memory.buffer)),cachedFloat64Memory0}let cachedBigInt64Memory0=null;function getBigInt64Memory0(){return(cachedBigInt64Memory0===null||cachedBigInt64Memory0.byteLength===0)&&(cachedBigInt64Memory0=new BigInt64Array(wasm$1.memory.buffer)),cachedBigInt64Memory0}function debugString(o){const e=typeof o;if(e=="number"||e=="boolean"||o==null)return`${o}`;if(e=="string")return`"${o}"`;if(e=="symbol"){const s=o.description;return s==null?"Symbol":`Symbol(${s})`}if(e=="function"){const s=o.name;return typeof s=="string"&&s.length>0?`Function(${s})`:"Function"}if(Array.isArray(o)){const s=o.length;let l="[";s>0&&(l+=debugString(o[0]));for(let c=1;c<s;c++)l+=", "+debugString(o[c]);return l+="]",l}const n=/\[object ([^\]]+)\]/.exec(toString.call(o));let a;if(n.length>1)a=n[1];else return toString.call(o);if(a=="Object")try{return"Object("+JSON.stringify(o)+")"}catch{return"Object"}return o instanceof Error?`${o.name}: ${o.message}
${o.stack}`:a}const CLOSURE_DTORS=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>{wasm$1.__wbindgen_export_2.get(o.dtor)(o.a,o.b)});function makeMutClosure(o,e,n,a){const s={a:o,b:e,cnt:1,dtor:n},l=(...c)=>{s.cnt++;const d=s.a;s.a=0;try{return a(d,s.b,...c)}finally{--s.cnt===0?(wasm$1.__wbindgen_export_2.get(s.dtor)(d,s.b),CLOSURE_DTORS.unregister(s)):s.a=d}};return l.original=s,CLOSURE_DTORS.register(l,s,s),l}function __wbg_adapter_58(o,e,n){wasm$1.__wbindgen_export_3(o,e,addHeapObject(n))}function __wbg_adapter_61(o,e){wasm$1.__wbindgen_export_4(o,e)}function getArrayU8FromWasm0(o,e){return o=o>>>0,getUint8Memory0().subarray(o/1,o/1+e)}function passArray8ToWasm0(o,e){const n=e(o.length*1,1)>>>0;return getUint8Memory0().set(o,n/1),WASM_VECTOR_LEN=o.length,n}let cachedUint32Memory0=null;function getUint32Memory0(){return(cachedUint32Memory0===null||cachedUint32Memory0.byteLength===0)&&(cachedUint32Memory0=new Uint32Array(wasm$1.memory.buffer)),cachedUint32Memory0}function getArrayJsValueFromWasm0(o,e){o=o>>>0;const a=getUint32Memory0().subarray(o/4,o/4+e),s=[];for(let l=0;l<a.length;l++)s.push(takeObject(a[l]));return s}function run$2(){wasm$1.run()}function passArrayJsValueToWasm0(o,e){const n=e(o.length*4,4)>>>0,a=getUint32Memory0();for(let s=0;s<o.length;s++)a[n/4+s]=addHeapObject(o[s]);return WASM_VECTOR_LEN=o.length,n}function encodeFrontiers$1(o){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16),d=passArrayJsValueToWasm0(o,wasm$1.__wbindgen_export_0),u=WASM_VECTOR_LEN;wasm$1.encodeFrontiers(c,d,u);var e=getInt32Memory0()[c/4+0],n=getInt32Memory0()[c/4+1],a=getInt32Memory0()[c/4+2],s=getInt32Memory0()[c/4+3];if(s)throw takeObject(a);var l=getArrayU8FromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*1,1),l}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}function decodeFrontiers$1(o){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16),l=passArray8ToWasm0(o,wasm$1.__wbindgen_export_0),c=WASM_VECTOR_LEN;wasm$1.decodeFrontiers(s,l,c);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return takeObject(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}function setDebug$1(){wasm$1.setDebug()}let stack_pointer=128;function addBorrowedObject(o){if(stack_pointer==1)throw new Error("out of js stack");return heap[--stack_pointer]=o,stack_pointer}function _assertClass(o,e){if(!(o instanceof e))throw new Error(`expected instance of ${e.name}`);return o.ptr}function decodeImportBlobMeta$1(o,e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passArray8ToWasm0(o,wasm$1.__wbindgen_export_0),d=WASM_VECTOR_LEN;wasm$1.decodeImportBlobMeta(l,c,d,e);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}function handleError$1(o,e){try{return o.apply(this,e)}catch(n){wasm$1.__wbindgen_export_6(addHeapObject(n))}}function notDefined(o){return()=>{throw new Error(`${o} is not defined`)}}const AwarenessWasmFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>wasm$1.__wbg_awarenesswasm_free(o>>>0));class AwarenessWasm{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,AwarenessWasmFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm$1.__wbg_awarenesswasm_free(e)}constructor(e,n){const a=wasm$1.awarenesswasm_new(addHeapObject(e),n);return this.__wbg_ptr=a>>>0,this}encode(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.awarenesswasm_encode(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getArrayU8FromWasm0(n,a).slice();return wasm$1.__wbindgen_export_5(n,a*1,1),s}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}encodeAll(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.awarenesswasm_encodeAll(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getArrayU8FromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*1,1),a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}apply(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passArray8ToWasm0(e,wasm$1.__wbindgen_export_0),d=WASM_VECTOR_LEN;wasm$1.awarenesswasm_apply(l,this.__wbg_ptr,c,d);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}setLocalState(e){wasm$1.awarenesswasm_setLocalState(this.__wbg_ptr,addHeapObject(e))}peer(){const e=wasm$1.awarenesswasm_peer(this.__wbg_ptr);return takeObject(e)}getAllStates(){const e=wasm$1.awarenesswasm_getAllStates(this.__wbg_ptr);return takeObject(e)}getState(e){const n=wasm$1.awarenesswasm_getState(this.__wbg_ptr,addHeapObject(e));return takeObject(n)}getTimestamp(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.awarenesswasm_getTimestamp(s,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[s/4+0],a=getFloat64Memory0()[s/8+1];return n===0?void 0:a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}removeOutdated(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.awarenesswasm_removeOutdated(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getArrayJsValueFromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*4,4),a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}length(){return wasm$1.awarenesswasm_length(this.__wbg_ptr)}isEmpty(){return wasm$1.awarenesswasm_isEmpty(this.__wbg_ptr)!==0}peers(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.awarenesswasm_peers(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getArrayJsValueFromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*4,4),a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}}const CursorFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>wasm$1.__wbg_cursor_free(o>>>0));class Cursor{static __wrap(e){e=e>>>0;const n=Object.create(Cursor.prototype);return n.__wbg_ptr=e,CursorFinalization.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,CursorFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm$1.__wbg_cursor_free(e)}containerId(){const e=wasm$1.cursor_containerId(this.__wbg_ptr);return takeObject(e)}pos(){const e=wasm$1.cursor_pos(this.__wbg_ptr);return takeObject(e)}side(){const e=wasm$1.cursor_side(this.__wbg_ptr);return takeObject(e)}encode(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.cursor_encode(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getArrayU8FromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*1,1),a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}static decode(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passArray8ToWasm0(e,wasm$1.__wbindgen_export_0),d=WASM_VECTOR_LEN;wasm$1.cursor_decode(l,c,d);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return Cursor.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}kind(){const e=wasm$1.cursor_kind(this.__wbg_ptr);return takeObject(e)}}const LoroCounterFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>wasm$1.__wbg_lorocounter_free(o>>>0));class LoroCounter{static __wrap(e){e=e>>>0;const n=Object.create(LoroCounter.prototype);return n.__wbg_ptr=e,LoroCounterFinalization.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,LoroCounterFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm$1.__wbg_lorocounter_free(e)}constructor(){const e=wasm$1.lorocounter_new();return this.__wbg_ptr=e>>>0,this}increment(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorocounter_increment(s,this.__wbg_ptr,e);var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}decrement(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorocounter_decrement(s,this.__wbg_ptr,e);var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}get value(){return wasm$1.lorocounter_value(this.__wbg_ptr)}subscribe(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorocounter_subscribe(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}parent(){const e=wasm$1.lorocounter_parent(this.__wbg_ptr);return takeObject(e)}isAttached(){return wasm$1.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=wasm$1.lorocounter_getAttached(this.__wbg_ptr);return takeObject(e)}getShallowValue(){return wasm$1.lorocounter_getShallowValue(this.__wbg_ptr)}}const LoroDocFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>wasm$1.__wbg_lorodoc_free(o>>>0));class LoroDoc{static __wrap(e){e=e>>>0;const n=Object.create(LoroDoc.prototype);return n.__wbg_ptr=e,LoroDocFinalization.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,LoroDocFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm$1.__wbg_lorodoc_free(e)}constructor(){const e=wasm$1.lorodoc_new();return this.__wbg_ptr=e>>>0,this}setDetachedEditing(e){wasm$1.lorodoc_setDetachedEditing(this.__wbg_ptr,e)}isDetachedEditingEnabled(){return wasm$1.lorodoc_isDetachedEditingEnabled(this.__wbg_ptr)!==0}setRecordTimestamp(e){wasm$1.lorodoc_setRecordTimestamp(this.__wbg_ptr,e)}setChangeMergeInterval(e){wasm$1.lorodoc_setChangeMergeInterval(this.__wbg_ptr,e)}configTextStyle(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_configTextStyle(s,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}static fromSnapshot(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passArray8ToWasm0(e,wasm$1.__wbindgen_export_0),d=WASM_VECTOR_LEN;wasm$1.lorodoc_fromSnapshot(l,c,d);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return LoroDoc.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}attach(){wasm$1.lorodoc_attach(this.__wbg_ptr)}isDetached(){return wasm$1.lorodoc_isDetached(this.__wbg_ptr)!==0}detach(){wasm$1.lorodoc_detach(this.__wbg_ptr)}fork(){const e=wasm$1.lorodoc_fork(this.__wbg_ptr);return LoroDoc.__wrap(e)}forkAt(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passArrayJsValueToWasm0(e,wasm$1.__wbindgen_export_0),d=WASM_VECTOR_LEN;wasm$1.lorodoc_forkAt(l,this.__wbg_ptr,c,d);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return LoroDoc.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}checkoutToLatest(){try{const a=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_checkoutToLatest(a,this.__wbg_ptr);var e=getInt32Memory0()[a/4+0],n=getInt32Memory0()[a/4+1];if(n)throw takeObject(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}travelChangeAncestors(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passArrayJsValueToWasm0(e,wasm$1.__wbindgen_export_0),d=WASM_VECTOR_LEN;wasm$1.lorodoc_travelChangeAncestors(l,this.__wbg_ptr,c,d,addHeapObject(n));var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}checkout(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16),l=passArrayJsValueToWasm0(e,wasm$1.__wbindgen_export_0),c=WASM_VECTOR_LEN;wasm$1.lorodoc_checkout(s,this.__wbg_ptr,l,c);var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}get peerId(){const e=wasm$1.lorodoc_peerId(this.__wbg_ptr);return BigInt.asUintN(64,e)}get peerIdStr(){const e=wasm$1.lorodoc_peerIdStr(this.__wbg_ptr);return takeObject(e)}setPeerId(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_setPeerId(s,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}commit(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_commit(s,this.__wbg_ptr,isLikeNone(e)?0:addHeapObject(e));var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}getPendingTxnLength(){return wasm$1.lorodoc_getPendingTxnLength(this.__wbg_ptr)>>>0}getText(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_getText(l,this.__wbg_ptr,addBorrowedObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return LoroText.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),heap[stack_pointer++]=void 0}}getMap(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_getMap(l,this.__wbg_ptr,addBorrowedObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return LoroMap.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),heap[stack_pointer++]=void 0}}getList(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_getList(l,this.__wbg_ptr,addBorrowedObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return LoroList.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),heap[stack_pointer++]=void 0}}getMovableList(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_getMovableList(l,this.__wbg_ptr,addBorrowedObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return LoroMovableList.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),heap[stack_pointer++]=void 0}}getCounter(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_getCounter(l,this.__wbg_ptr,addBorrowedObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return LoroCounter.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),heap[stack_pointer++]=void 0}}getTree(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_getTree(l,this.__wbg_ptr,addBorrowedObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return LoroTree.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),heap[stack_pointer++]=void 0}}getContainerById(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_getContainerById(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}setNextCommitMessage(e){const n=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),a=WASM_VECTOR_LEN;wasm$1.lorodoc_setNextCommitMessage(this.__wbg_ptr,n,a)}getDeepValueWithID(){const e=wasm$1.lorodoc_getDeepValueWithID(this.__wbg_ptr);return takeObject(e)}getPathToContainer(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_getPathToContainer(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}JSONPath(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),d=WASM_VECTOR_LEN;wasm$1.lorodoc_JSONPath(l,this.__wbg_ptr,c,d);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}version(){const e=wasm$1.lorodoc_version(this.__wbg_ptr);return VersionVector.__wrap(e)}shallowSinceVV(){const e=wasm$1.lorodoc_shallowSinceVV(this.__wbg_ptr);return VersionVector.__wrap(e)}isShallow(){return wasm$1.lorodoc_isShallow(this.__wbg_ptr)!==0}shallowSinceFrontiers(){const e=wasm$1.lorodoc_shallowSinceFrontiers(this.__wbg_ptr);return takeObject(e)}oplogVersion(){const e=wasm$1.lorodoc_oplogVersion(this.__wbg_ptr);return VersionVector.__wrap(e)}frontiers(){const e=wasm$1.lorodoc_frontiers(this.__wbg_ptr);return takeObject(e)}oplogFrontiers(){const e=wasm$1.lorodoc_oplogFrontiers(this.__wbg_ptr);return takeObject(e)}cmpWithFrontiers(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passArrayJsValueToWasm0(e,wasm$1.__wbindgen_export_0),d=WASM_VECTOR_LEN;wasm$1.lorodoc_cmpWithFrontiers(l,this.__wbg_ptr,c,d);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return n}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}cmpFrontiers(e,n){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16),d=passArrayJsValueToWasm0(e,wasm$1.__wbindgen_export_0),u=WASM_VECTOR_LEN,f=passArrayJsValueToWasm0(n,wasm$1.__wbindgen_export_0),p=WASM_VECTOR_LEN;wasm$1.lorodoc_cmpFrontiers(c,this.__wbg_ptr,d,u,f,p);var a=getInt32Memory0()[c/4+0],s=getInt32Memory0()[c/4+1],l=getInt32Memory0()[c/4+2];if(l)throw takeObject(s);return takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}exportSnapshot(){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_exportSnapshot(c,this.__wbg_ptr);var e=getInt32Memory0()[c/4+0],n=getInt32Memory0()[c/4+1],a=getInt32Memory0()[c/4+2],s=getInt32Memory0()[c/4+3];if(s)throw takeObject(a);var l=getArrayU8FromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*1,1),l}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}exportFrom(e){try{const d=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_exportFrom(d,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[d/4+0],a=getInt32Memory0()[d/4+1],s=getInt32Memory0()[d/4+2],l=getInt32Memory0()[d/4+3];if(l)throw takeObject(s);var c=getArrayU8FromWasm0(n,a).slice();return wasm$1.__wbindgen_export_5(n,a*1,1),c}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}export(e){try{const d=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_export(d,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[d/4+0],a=getInt32Memory0()[d/4+1],s=getInt32Memory0()[d/4+2],l=getInt32Memory0()[d/4+3];if(l)throw takeObject(s);var c=getArrayU8FromWasm0(n,a).slice();return wasm$1.__wbindgen_export_5(n,a*1,1),c}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}exportJsonUpdates(e,n){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_exportJsonUpdates(c,this.__wbg_ptr,addHeapObject(e),addHeapObject(n));var a=getInt32Memory0()[c/4+0],s=getInt32Memory0()[c/4+1],l=getInt32Memory0()[c/4+2];if(l)throw takeObject(s);return takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}importJsonUpdates(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_importJsonUpdates(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}import(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passArray8ToWasm0(e,wasm$1.__wbindgen_export_0),d=WASM_VECTOR_LEN;wasm$1.lorodoc_import(l,this.__wbg_ptr,c,d);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}importUpdateBatch(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_importUpdateBatch(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}importBatch(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_importBatch(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}getShallowValue(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_getShallowValue(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return takeObject(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}toJSON(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_toJSON(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return takeObject(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){const n=wasm$1.lorodoc_subscribe(this.__wbg_ptr,addHeapObject(e));return takeObject(n)}subscribeLocalUpdates(e){const n=wasm$1.lorodoc_subscribeLocalUpdates(this.__wbg_ptr,addHeapObject(e));return takeObject(n)}debugHistory(){wasm$1.lorodoc_debugHistory(this.__wbg_ptr)}changeCount(){return wasm$1.lorodoc_changeCount(this.__wbg_ptr)>>>0}opCount(){return wasm$1.lorodoc_opCount(this.__wbg_ptr)>>>0}getAllChanges(){const e=wasm$1.lorodoc_getAllChanges(this.__wbg_ptr);return takeObject(e)}getChangeAt(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_getChangeAt(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}getChangeAtLamport(e,n){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16),d=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),u=WASM_VECTOR_LEN;wasm$1.lorodoc_getChangeAtLamport(c,this.__wbg_ptr,d,u,n);var a=getInt32Memory0()[c/4+0],s=getInt32Memory0()[c/4+1],l=getInt32Memory0()[c/4+2];if(l)throw takeObject(s);return takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}getOpsInChange(e){try{const d=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_getOpsInChange(d,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[d/4+0],a=getInt32Memory0()[d/4+1],s=getInt32Memory0()[d/4+2],l=getInt32Memory0()[d/4+3];if(l)throw takeObject(s);var c=getArrayJsValueFromWasm0(n,a).slice();return wasm$1.__wbindgen_export_5(n,a*4,4),c}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}frontiersToVV(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passArrayJsValueToWasm0(e,wasm$1.__wbindgen_export_0),d=WASM_VECTOR_LEN;wasm$1.lorodoc_frontiersToVV(l,this.__wbg_ptr,c,d);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return VersionVector.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}vvToFrontiers(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);_assertClass(e,VersionVector),wasm$1.lorodoc_vvToFrontiers(l,this.__wbg_ptr,e.__wbg_ptr);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}getByPath(e){const n=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),a=WASM_VECTOR_LEN,s=wasm$1.lorodoc_getByPath(this.__wbg_ptr,n,a);return takeObject(s)}getCursorPos(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);_assertClass(e,Cursor),wasm$1.lorodoc_getCursorPos(l,this.__wbg_ptr,e.__wbg_ptr);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}getChangedContainersIn(e,n){try{const u=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorodoc_getChangedContainersIn(u,this.__wbg_ptr,addHeapObject(e),n);var a=getInt32Memory0()[u/4+0],s=getInt32Memory0()[u/4+1],l=getInt32Memory0()[u/4+2],c=getInt32Memory0()[u/4+3];if(c)throw takeObject(l);var d=getArrayJsValueFromWasm0(a,s).slice();return wasm$1.__wbindgen_export_5(a,s*4,4),d}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}}const LoroListFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>wasm$1.__wbg_lorolist_free(o>>>0));class LoroList{static __wrap(e){e=e>>>0;const n=Object.create(LoroList.prototype);return n.__wbg_ptr=e,LoroListFinalization.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,LoroListFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm$1.__wbg_lorolist_free(e)}constructor(){const e=wasm$1.lorolist_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=wasm$1.lorolist_kind(this.__wbg_ptr);return takeObject(e)}insert(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorolist_insert(l,this.__wbg_ptr,e,addHeapObject(n));var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}delete(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorolist_delete(l,this.__wbg_ptr,e,n);var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}get(e){const n=wasm$1.lorolist_get(this.__wbg_ptr,e);return takeObject(n)}get id(){const e=wasm$1.lorolist_id(this.__wbg_ptr);return takeObject(e)}toArray(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorolist_toArray(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getArrayJsValueFromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*4,4),a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=wasm$1.lorolist_toJSON(this.__wbg_ptr);return takeObject(e)}insertContainer(e,n){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorolist_insertContainer(c,this.__wbg_ptr,e,addHeapObject(n));var a=getInt32Memory0()[c/4+0],s=getInt32Memory0()[c/4+1],l=getInt32Memory0()[c/4+2];if(l)throw takeObject(s);return takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}pushContainer(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorolist_pushContainer(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorolist_subscribe(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}get length(){return wasm$1.lorolist_length(this.__wbg_ptr)>>>0}parent(){const e=wasm$1.lorolist_parent(this.__wbg_ptr);return takeObject(e)}isAttached(){return wasm$1.lorolist_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=wasm$1.lorolist_getAttached(this.__wbg_ptr);return takeObject(e)}getCursor(e,n){const a=wasm$1.lorolist_getCursor(this.__wbg_ptr,e,addHeapObject(n));return a===0?void 0:Cursor.__wrap(a)}push(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorolist_push(s,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}pop(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorolist_pop(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return takeObject(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}clear(){try{const a=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorolist_clear(a,this.__wbg_ptr);var e=getInt32Memory0()[a/4+0],n=getInt32Memory0()[a/4+1];if(n)throw takeObject(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}getIdAt(e){const n=wasm$1.lorolist_getIdAt(this.__wbg_ptr,e);return takeObject(n)}isDeleted(){return wasm$1.lorolist_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=wasm$1.lorolist_getShallowValue(this.__wbg_ptr);return takeObject(e)}}const LoroMapFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>wasm$1.__wbg_loromap_free(o>>>0));class LoroMap{static __wrap(e){e=e>>>0;const n=Object.create(LoroMap.prototype);return n.__wbg_ptr=e,LoroMapFinalization.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,LoroMapFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm$1.__wbg_loromap_free(e)}constructor(){const e=wasm$1.loromap_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=wasm$1.loromap_kind(this.__wbg_ptr);return takeObject(e)}set(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),d=WASM_VECTOR_LEN;wasm$1.loromap_set(l,this.__wbg_ptr,c,d,addHeapObject(n));var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}delete(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16),l=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),c=WASM_VECTOR_LEN;wasm$1.loromap_delete(s,this.__wbg_ptr,l,c);var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}get(e){const n=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),a=WASM_VECTOR_LEN,s=wasm$1.loromap_get(this.__wbg_ptr,n,a);return takeObject(s)}getOrCreateContainer(e,n){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16),d=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),u=WASM_VECTOR_LEN;wasm$1.loromap_getOrCreateContainer(c,this.__wbg_ptr,d,u,addHeapObject(n));var a=getInt32Memory0()[c/4+0],s=getInt32Memory0()[c/4+1],l=getInt32Memory0()[c/4+2];if(l)throw takeObject(s);return takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}keys(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromap_keys(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getArrayJsValueFromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*4,4),a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}values(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromap_values(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getArrayJsValueFromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*4,4),a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}entries(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromap_entries(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getArrayJsValueFromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*4,4),a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}get id(){const e=wasm$1.loromap_id(this.__wbg_ptr);return takeObject(e)}toJSON(){const e=wasm$1.loromap_toJSON(this.__wbg_ptr);return takeObject(e)}setContainer(e,n){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16),d=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),u=WASM_VECTOR_LEN;wasm$1.loromap_setContainer(c,this.__wbg_ptr,d,u,addHeapObject(n));var a=getInt32Memory0()[c/4+0],s=getInt32Memory0()[c/4+1],l=getInt32Memory0()[c/4+2];if(l)throw takeObject(s);return takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromap_subscribe(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}get size(){return wasm$1.loromap_size(this.__wbg_ptr)>>>0}parent(){const e=wasm$1.loromap_parent(this.__wbg_ptr);return takeObject(e)}isAttached(){return wasm$1.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=wasm$1.loromap_getAttached(this.__wbg_ptr);return takeObject(e)}clear(){try{const a=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromap_clear(a,this.__wbg_ptr);var e=getInt32Memory0()[a/4+0],n=getInt32Memory0()[a/4+1];if(n)throw takeObject(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}getLastEditor(e){const n=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),a=WASM_VECTOR_LEN,s=wasm$1.loromap_getLastEditor(this.__wbg_ptr,n,a);return takeObject(s)}isDeleted(){return wasm$1.loromap_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=wasm$1.loromap_getShallowValue(this.__wbg_ptr);return takeObject(e)}}const LoroMovableListFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>wasm$1.__wbg_loromovablelist_free(o>>>0));class LoroMovableList{static __wrap(e){e=e>>>0;const n=Object.create(LoroMovableList.prototype);return n.__wbg_ptr=e,LoroMovableListFinalization.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,LoroMovableListFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm$1.__wbg_loromovablelist_free(e)}constructor(){const e=wasm$1.loromovablelist_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=wasm$1.loromovablelist_kind(this.__wbg_ptr);return takeObject(e)}insert(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromovablelist_insert(l,this.__wbg_ptr,e,addHeapObject(n));var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}delete(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromovablelist_delete(l,this.__wbg_ptr,e,n);var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}get(e){const n=wasm$1.loromovablelist_get(this.__wbg_ptr,e);return takeObject(n)}get id(){const e=wasm$1.loromovablelist_id(this.__wbg_ptr);return takeObject(e)}toArray(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromovablelist_toArray(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getArrayJsValueFromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*4,4),a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=wasm$1.loromovablelist_toJSON(this.__wbg_ptr);return takeObject(e)}insertContainer(e,n){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromovablelist_insertContainer(c,this.__wbg_ptr,e,addHeapObject(n));var a=getInt32Memory0()[c/4+0],s=getInt32Memory0()[c/4+1],l=getInt32Memory0()[c/4+2];if(l)throw takeObject(s);return takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}pushContainer(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromovablelist_pushContainer(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromovablelist_subscribe(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}get length(){return wasm$1.loromovablelist_length(this.__wbg_ptr)>>>0}parent(){const e=wasm$1.loromap_parent(this.__wbg_ptr);return takeObject(e)}isAttached(){return wasm$1.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=wasm$1.loromovablelist_getAttached(this.__wbg_ptr);return takeObject(e)}getCursor(e,n){const a=wasm$1.loromovablelist_getCursor(this.__wbg_ptr,e,addHeapObject(n));return a===0?void 0:Cursor.__wrap(a)}move(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromovablelist_move(l,this.__wbg_ptr,e,n);var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}set(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromovablelist_set(l,this.__wbg_ptr,e,addHeapObject(n));var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}setContainer(e,n){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromovablelist_setContainer(c,this.__wbg_ptr,e,addHeapObject(n));var a=getInt32Memory0()[c/4+0],s=getInt32Memory0()[c/4+1],l=getInt32Memory0()[c/4+2];if(l)throw takeObject(s);return takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}push(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromovablelist_push(s,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}pop(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromovablelist_pop(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return takeObject(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}clear(){try{const a=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.loromovablelist_clear(a,this.__wbg_ptr);var e=getInt32Memory0()[a/4+0],n=getInt32Memory0()[a/4+1];if(n)throw takeObject(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}getCreatorAt(e){const n=wasm$1.loromovablelist_getCreatorAt(this.__wbg_ptr,e);return takeObject(n)}getLastMoverAt(e){const n=wasm$1.loromovablelist_getLastMoverAt(this.__wbg_ptr,e);return takeObject(n)}getLastEditorAt(e){const n=wasm$1.loromovablelist_getLastEditorAt(this.__wbg_ptr,e);return takeObject(n)}isDeleted(){return wasm$1.loromovablelist_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=wasm$1.loromovablelist_getShallowValue(this.__wbg_ptr);return takeObject(e)}}const LoroTextFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>wasm$1.__wbg_lorotext_free(o>>>0));class LoroText{static __wrap(e){e=e>>>0;const n=Object.create(LoroText.prototype);return n.__wbg_ptr=e,LoroTextFinalization.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,LoroTextFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm$1.__wbg_lorotext_free(e)}constructor(){const e=wasm$1.lorotext_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=wasm$1.lorotext_kind(this.__wbg_ptr);return takeObject(e)}iter(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotext_iter(s,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}update(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),d=WASM_VECTOR_LEN;wasm$1.lorotext_update(l,this.__wbg_ptr,c,d,addHeapObject(n));var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}updateByLine(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),d=WASM_VECTOR_LEN;wasm$1.lorotext_updateByLine(l,this.__wbg_ptr,c,d,addHeapObject(n));var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}insert(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passStringToWasm0(n,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),d=WASM_VECTOR_LEN;wasm$1.lorotext_insert(l,this.__wbg_ptr,e,c,d);var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}slice(e,n){let a,s;try{const _=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotext_slice(_,this.__wbg_ptr,e,n);var l=getInt32Memory0()[_/4+0],c=getInt32Memory0()[_/4+1],d=getInt32Memory0()[_/4+2],u=getInt32Memory0()[_/4+3],f=l,p=c;if(u)throw f=0,p=0,takeObject(d);return a=f,s=p,getStringFromWasm0(f,p)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),wasm$1.__wbindgen_export_5(a,s,1)}}charAt(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotext_charAt(l,this.__wbg_ptr,e);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return String.fromCodePoint(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}splice(e,n,a){let s,l;try{const b=wasm$1.__wbindgen_add_to_stack_pointer(-16),v=passStringToWasm0(a,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),k=WASM_VECTOR_LEN;wasm$1.lorotext_splice(b,this.__wbg_ptr,e,n,v,k);var c=getInt32Memory0()[b/4+0],d=getInt32Memory0()[b/4+1],u=getInt32Memory0()[b/4+2],f=getInt32Memory0()[b/4+3],p=c,_=d;if(f)throw p=0,_=0,takeObject(u);return s=p,l=_,getStringFromWasm0(p,_)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),wasm$1.__wbindgen_export_5(s,l,1)}}insertUtf8(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passStringToWasm0(n,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),d=WASM_VECTOR_LEN;wasm$1.lorotext_insertUtf8(l,this.__wbg_ptr,e,c,d);var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}delete(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotext_delete(l,this.__wbg_ptr,e,n);var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}deleteUtf8(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotext_deleteUtf8(l,this.__wbg_ptr,e,n);var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}mark(e,n,a){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16),d=passStringToWasm0(n,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),u=WASM_VECTOR_LEN;wasm$1.lorotext_mark(c,this.__wbg_ptr,addHeapObject(e),d,u,addHeapObject(a));var s=getInt32Memory0()[c/4+0],l=getInt32Memory0()[c/4+1];if(l)throw takeObject(s)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}unmark(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passStringToWasm0(n,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),d=WASM_VECTOR_LEN;wasm$1.lorotext_unmark(l,this.__wbg_ptr,addHeapObject(e),c,d);var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}toString(){let e,n;try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotext_toString(l,this.__wbg_ptr);var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];return e=a,n=s,getStringFromWasm0(a,s)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),wasm$1.__wbindgen_export_5(e,n,1)}}toDelta(){const e=wasm$1.lorotext_toDelta(this.__wbg_ptr);return takeObject(e)}get id(){const e=wasm$1.lorotext_id(this.__wbg_ptr);return takeObject(e)}get length(){return wasm$1.lorotext_length(this.__wbg_ptr)>>>0}subscribe(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotext_subscribe(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}applyDelta(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotext_applyDelta(s,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}parent(){const e=wasm$1.lorotext_parent(this.__wbg_ptr);return takeObject(e)}isAttached(){return wasm$1.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=wasm$1.lorotext_getAttached(this.__wbg_ptr);return takeObject(e)}getCursor(e,n){const a=wasm$1.lorotext_getCursor(this.__wbg_ptr,e,addHeapObject(n));return a===0?void 0:Cursor.__wrap(a)}push(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16),l=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),c=WASM_VECTOR_LEN;wasm$1.lorotext_push(s,this.__wbg_ptr,l,c);var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}getEditorOf(e){const n=wasm$1.lorotext_getEditorOf(this.__wbg_ptr,e);return takeObject(n)}isDeleted(){return wasm$1.lorotext_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){let e,n;try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotext_getShallowValue(l,this.__wbg_ptr);var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];return e=a,n=s,getStringFromWasm0(a,s)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),wasm$1.__wbindgen_export_5(e,n,1)}}}const LoroTreeFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>wasm$1.__wbg_lorotree_free(o>>>0));class LoroTree{static __wrap(e){e=e>>>0;const n=Object.create(LoroTree.prototype);return n.__wbg_ptr=e,LoroTreeFinalization.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,LoroTreeFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm$1.__wbg_lorotree_free(e)}constructor(){const e=wasm$1.lorotree_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=wasm$1.lorotree_kind(this.__wbg_ptr);return takeObject(e)}createNode(e,n){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotree_createNode(c,this.__wbg_ptr,addBorrowedObject(e),!isLikeNone(n),isLikeNone(n)?0:n);var a=getInt32Memory0()[c/4+0],s=getInt32Memory0()[c/4+1],l=getInt32Memory0()[c/4+2];if(l)throw takeObject(s);return LoroTreeNode.__wrap(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),heap[stack_pointer++]=void 0}}move(e,n,a){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotree_move(c,this.__wbg_ptr,addBorrowedObject(e),addBorrowedObject(n),!isLikeNone(a),isLikeNone(a)?0:a);var s=getInt32Memory0()[c/4+0],l=getInt32Memory0()[c/4+1];if(l)throw takeObject(s)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),heap[stack_pointer++]=void 0,heap[stack_pointer++]=void 0}}delete(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotree_delete(s,this.__wbg_ptr,addBorrowedObject(e));var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),heap[stack_pointer++]=void 0}}getNodeByID(e){try{const n=wasm$1.lorotree_getNodeByID(this.__wbg_ptr,addBorrowedObject(e));return n===0?void 0:LoroTreeNode.__wrap(n)}finally{heap[stack_pointer++]=void 0}}get id(){const e=wasm$1.lorotree_id(this.__wbg_ptr);return takeObject(e)}has(e){try{return wasm$1.lorotree_has(this.__wbg_ptr,addBorrowedObject(e))!==0}finally{heap[stack_pointer++]=void 0}}isNodeDeleted(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotree_isNodeDeleted(l,this.__wbg_ptr,addBorrowedObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return n!==0}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),heap[stack_pointer++]=void 0}}toArray(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotree_toArray(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return takeObject(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}getNodes(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotree_getNodes(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=wasm$1.lorotree_toJSON(this.__wbg_ptr);return takeObject(e)}nodes(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotree_nodes(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getArrayJsValueFromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*4,4),a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}roots(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotree_roots(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getArrayJsValueFromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*4,4),a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotree_subscribe(l,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}parent(){const e=wasm$1.lorotree_parent(this.__wbg_ptr);return takeObject(e)}isAttached(){return wasm$1.lorotree_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=wasm$1.lorotree_getAttached(this.__wbg_ptr);return takeObject(e)}enableFractionalIndex(e){wasm$1.lorotree_enableFractionalIndex(this.__wbg_ptr,e)}disableFractionalIndex(){wasm$1.lorotree_disableFractionalIndex(this.__wbg_ptr)}isFractionalIndexEnabled(){return wasm$1.lorotree_isFractionalIndexEnabled(this.__wbg_ptr)!==0}isDeleted(){return wasm$1.lorotree_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=wasm$1.lorotree_getShallowValue(this.__wbg_ptr);return takeObject(e)}}const LoroTreeNodeFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>wasm$1.__wbg_lorotreenode_free(o>>>0));class LoroTreeNode{static __wrap(e){e=e>>>0;const n=Object.create(LoroTreeNode.prototype);return n.__wbg_ptr=e,LoroTreeNodeFinalization.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,LoroTreeNodeFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm$1.__wbg_lorotreenode_free(e)}__getClassname(){let e,n;try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotreenode___getClassname(l,this.__wbg_ptr);var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];return e=a,n=s,getStringFromWasm0(a,s)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),wasm$1.__wbindgen_export_5(e,n,1)}}get id(){const e=wasm$1.lorotreenode_id(this.__wbg_ptr);return takeObject(e)}createNode(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotreenode_createNode(l,this.__wbg_ptr,!isLikeNone(e),isLikeNone(e)?0:e);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return LoroTreeNode.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}move(e,n){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotreenode_move(l,this.__wbg_ptr,addBorrowedObject(e),!isLikeNone(n),isLikeNone(n)?0:n);var a=getInt32Memory0()[l/4+0],s=getInt32Memory0()[l/4+1];if(s)throw takeObject(a)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16),heap[stack_pointer++]=void 0}}moveAfter(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);_assertClass(e,LoroTreeNode),wasm$1.lorotreenode_moveAfter(s,this.__wbg_ptr,e.__wbg_ptr);var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}moveBefore(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);_assertClass(e,LoroTreeNode),wasm$1.lorotreenode_moveBefore(s,this.__wbg_ptr,e.__wbg_ptr);var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}index(){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotreenode_index(l,this.__wbg_ptr);var e=getInt32Memory0()[l/4+0],n=getInt32Memory0()[l/4+1],a=getInt32Memory0()[l/4+2],s=getInt32Memory0()[l/4+3];if(s)throw takeObject(a);return e===0?void 0:n>>>0}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}fractionalIndex(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotreenode_fractionalIndex(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return takeObject(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}get data(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotreenode_data(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return LoroMap.__wrap(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}toJSON(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotreenode_toJSON(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return takeObject(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}parent(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotreenode_parent(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return e===0?void 0:LoroTreeNode.__wrap(e)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}children(){const e=wasm$1.lorotreenode_children(this.__wbg_ptr);return takeObject(e)}isDeleted(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.lorotreenode_isDeleted(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return e!==0}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}getLastMoveId(){const e=wasm$1.lorotreenode_getLastMoveId(this.__wbg_ptr);return takeObject(e)}creationId(){const e=wasm$1.lorotreenode_creationId(this.__wbg_ptr);return takeObject(e)}creator(){const e=wasm$1.lorotreenode_creator(this.__wbg_ptr);return takeObject(e)}}const UndoManagerFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>wasm$1.__wbg_undomanager_free(o>>>0));class UndoManager{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,UndoManagerFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm$1.__wbg_undomanager_free(e)}constructor(e,n){_assertClass(e,LoroDoc);const a=wasm$1.undomanager_new(e.__wbg_ptr,addHeapObject(n));return this.__wbg_ptr=a>>>0,this}undo(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.undomanager_undo(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return e!==0}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}redo(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.undomanager_redo(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getInt32Memory0()[s/4+2];if(a)throw takeObject(n);return e!==0}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}canUndo(){return wasm$1.undomanager_canUndo(this.__wbg_ptr)!==0}canRedo(){return wasm$1.undomanager_canRedo(this.__wbg_ptr)!==0}setMaxUndoSteps(e){wasm$1.undomanager_setMaxUndoSteps(this.__wbg_ptr,e)}setMergeInterval(e){wasm$1.undomanager_setMergeInterval(this.__wbg_ptr,e)}addExcludeOriginPrefix(e){const n=passStringToWasm0(e,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),a=WASM_VECTOR_LEN;wasm$1.undomanager_addExcludeOriginPrefix(this.__wbg_ptr,n,a)}checkBinding(e){return _assertClass(e,LoroDoc),wasm$1.undomanager_checkBinding(this.__wbg_ptr,e.__wbg_ptr)!==0}setOnPush(e){wasm$1.undomanager_setOnPush(this.__wbg_ptr,addHeapObject(e))}setOnPop(e){wasm$1.undomanager_setOnPop(this.__wbg_ptr,addHeapObject(e))}clear(){wasm$1.undomanager_clear(this.__wbg_ptr)}}const VersionVectorFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>wasm$1.__wbg_versionvector_free(o>>>0));class VersionVector{static __wrap(e){e=e>>>0;const n=Object.create(VersionVector.prototype);return n.__wbg_ptr=e,VersionVectorFinalization.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,VersionVectorFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm$1.__wbg_versionvector_free(e)}constructor(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.versionvector_new(l,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return this.__wbg_ptr=n>>>0,this}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}static parseJSON(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.versionvector_parseJSON(l,addHeapObject(e));var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return VersionVector.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=wasm$1.versionvector_toJSON(this.__wbg_ptr);return takeObject(e)}encode(){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.versionvector_encode(s,this.__wbg_ptr);var e=getInt32Memory0()[s/4+0],n=getInt32Memory0()[s/4+1],a=getArrayU8FromWasm0(e,n).slice();return wasm$1.__wbindgen_export_5(e,n*1,1),a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}static decode(e){try{const l=wasm$1.__wbindgen_add_to_stack_pointer(-16),c=passArray8ToWasm0(e,wasm$1.__wbindgen_export_0),d=WASM_VECTOR_LEN;wasm$1.versionvector_decode(l,c,d);var n=getInt32Memory0()[l/4+0],a=getInt32Memory0()[l/4+1],s=getInt32Memory0()[l/4+2];if(s)throw takeObject(a);return VersionVector.__wrap(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}get(e){try{const c=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.versionvector_get(c,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[c/4+0],a=getInt32Memory0()[c/4+1],s=getInt32Memory0()[c/4+2],l=getInt32Memory0()[c/4+3];if(l)throw takeObject(s);return n===0?void 0:a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}compare(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);_assertClass(e,VersionVector),wasm$1.versionvector_compare(s,this.__wbg_ptr,e.__wbg_ptr);var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];return n===0?void 0:a}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}setEnd(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.versionvector_setEnd(s,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}setLast(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.versionvector_setLast(s,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}remove(e){try{const s=wasm$1.__wbindgen_add_to_stack_pointer(-16);wasm$1.versionvector_remove(s,this.__wbg_ptr,addHeapObject(e));var n=getInt32Memory0()[s/4+0],a=getInt32Memory0()[s/4+1];if(a)throw takeObject(n)}finally{wasm$1.__wbindgen_add_to_stack_pointer(16)}}length(){return wasm$1.versionvector_length(this.__wbg_ptr)>>>0}}function __wbindgen_object_drop_ref(o){takeObject(o)}function __wbg_loromap_new(o){const e=LoroMap.__wrap(o);return addHeapObject(e)}function __wbg_lorotext_new(o){const e=LoroText.__wrap(o);return addHeapObject(e)}function __wbg_lorolist_new(o){const e=LoroList.__wrap(o);return addHeapObject(e)}function __wbg_lorotree_new(o){const e=LoroTree.__wrap(o);return addHeapObject(e)}function __wbg_cursor_new(o){const e=Cursor.__wrap(o);return addHeapObject(e)}function __wbg_loromovablelist_new(o){const e=LoroMovableList.__wrap(o);return addHeapObject(e)}function __wbg_lorocounter_new(o){const e=LoroCounter.__wrap(o);return addHeapObject(e)}function __wbg_lorotreenode_new(o){const e=LoroTreeNode.__wrap(o);return addHeapObject(e)}function __wbg_versionvector_new(o){const e=VersionVector.__wrap(o);return addHeapObject(e)}function __wbindgen_is_function(o){return typeof getObject(o)=="function"}function __wbindgen_string_new(o,e){const n=getStringFromWasm0(o,e);return addHeapObject(n)}function __wbindgen_boolean_get(o){const e=getObject(o);return typeof e=="boolean"?e?1:0:2}function __wbindgen_error_new(o,e){const n=new Error(getStringFromWasm0(o,e));return addHeapObject(n)}function __wbindgen_object_clone_ref(o){const e=getObject(o);return addHeapObject(e)}function __wbindgen_string_get(o,e){const n=getObject(e),a=typeof n=="string"?n:void 0;var s=isLikeNone(a)?0:passStringToWasm0(a,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),l=WASM_VECTOR_LEN;getInt32Memory0()[o/4+1]=l,getInt32Memory0()[o/4+0]=s}function __wbindgen_is_undefined(o){return getObject(o)===void 0}function __wbindgen_in(o,e){return getObject(o)in getObject(e)}function __wbindgen_is_bigint(o){return typeof getObject(o)=="bigint"}function __wbindgen_number_get(o,e){const n=getObject(e),a=typeof n=="number"?n:void 0;getFloat64Memory0()[o/8+1]=isLikeNone(a)?0:a,getInt32Memory0()[o/4+0]=!isLikeNone(a)}function __wbindgen_bigint_from_i64(o){return addHeapObject(o)}function __wbindgen_jsval_eq(o,e){return getObject(o)===getObject(e)}function __wbindgen_is_object(o){const e=getObject(o);return typeof e=="object"&&e!==null}function __wbindgen_bigint_from_u64(o){const e=BigInt.asUintN(64,o);return addHeapObject(e)}function __wbindgen_cb_drop(o){const e=takeObject(o).original;return e.cnt--==1?(e.a=0,!0):!1}function __wbindgen_as_number(o){return+getObject(o)}function __wbindgen_is_string(o){return typeof getObject(o)=="string"}function __wbindgen_is_null(o){return getObject(o)===null}function __wbindgen_number_new(o){return addHeapObject(o)}function __wbindgen_typeof(o){const e=typeof getObject(o);return addHeapObject(e)}function __wbg_error_c8c2cca30a630316(o,e){console.error(getStringFromWasm0(o,e))}function __wbg_log_d8fdbde28117925d(o,e){console.log(getStringFromWasm0(o,e))}function __wbindgen_is_falsy(o){return!getObject(o)}function __wbindgen_jsval_loose_eq(o,e){return getObject(o)==getObject(e)}function __wbg_String_b9412f8799faab3e(o,e){const n=String(getObject(e)),a=passStringToWasm0(n,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),s=WASM_VECTOR_LEN;getInt32Memory0()[o/4+1]=s,getInt32Memory0()[o/4+0]=a}function __wbg_getwithrefkey_edc2c8960f0f1191(o,e){const n=getObject(o)[getObject(e)];return addHeapObject(n)}function __wbg_set_f975102236d3c502(o,e,n){getObject(o)[takeObject(e)]=takeObject(n)}function __wbg_log_c9486ca5d8e2cbe8(o,e){let n,a;try{n=o,a=e,console.log(getStringFromWasm0(o,e))}finally{wasm$1.__wbindgen_export_5(n,a,1)}}function __wbg_log_aba5996d9bde071f(o,e,n,a,s,l,c,d){let u,f;try{u=o,f=e,console.log(getStringFromWasm0(o,e),getStringFromWasm0(n,a),getStringFromWasm0(s,l),getStringFromWasm0(c,d))}finally{wasm$1.__wbindgen_export_5(u,f,1)}}function __wbg_mark_40e050a77cc39fea(o,e){performance.mark(getStringFromWasm0(o,e))}function __wbg_measure_aa7a73f17813f708(){return handleError$1(function(o,e,n,a){let s,l,c,d;try{s=o,l=e,c=n,d=a,performance.measure(getStringFromWasm0(o,e),getStringFromWasm0(n,a))}finally{wasm$1.__wbindgen_export_5(s,l,1),wasm$1.__wbindgen_export_5(c,d,1)}},arguments)}function __wbg_new_abda76e883ba8a5f(){const o=new Error;return addHeapObject(o)}function __wbg_stack_658279fe44541cf6(o,e){const n=getObject(e).stack,a=passStringToWasm0(n,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),s=WASM_VECTOR_LEN;getInt32Memory0()[o/4+1]=s,getInt32Memory0()[o/4+0]=a}function __wbg_error_f851667af71bcfc6(o,e){let n,a;try{n=o,a=e,console.error(getStringFromWasm0(o,e))}finally{wasm$1.__wbindgen_export_5(n,a,1)}}const __wbg_now_11683c634f92ae89=typeof Date.now=="function"?Date.now:notDefined("Date.now");function __wbg_crypto_1d1f22824a6a080c(o){const e=getObject(o).crypto;return addHeapObject(e)}function __wbg_process_4a72847cc503995b(o){const e=getObject(o).process;return addHeapObject(e)}function __wbg_versions_f686565e586dd935(o){const e=getObject(o).versions;return addHeapObject(e)}function __wbg_node_104a2ff8d6ea03a2(o){const e=getObject(o).node;return addHeapObject(e)}function __wbg_require_cca90b1a94a0255b(){return handleError$1(function(){const o=module.require;return addHeapObject(o)},arguments)}function __wbg_msCrypto_eb05e62b530a1508(o){const e=getObject(o).msCrypto;return addHeapObject(e)}function __wbg_getRandomValues_3aa56aa6edec874c(){return handleError$1(function(o,e){getObject(o).getRandomValues(getObject(e))},arguments)}function __wbg_randomFillSync_5c9c955aa56b6049(){return handleError$1(function(o,e){getObject(o).randomFillSync(takeObject(e))},arguments)}function __wbg_self_ce0dbfc45cf2f5be(){return handleError$1(function(){const o=self.self;return addHeapObject(o)},arguments)}function __wbg_window_c6fb939a7f436783(){return handleError$1(function(){const o=window.window;return addHeapObject(o)},arguments)}function __wbg_globalThis_d1e6af4856ba331b(){return handleError$1(function(){const o=globalThis.globalThis;return addHeapObject(o)},arguments)}function __wbg_global_207b558942527489(){return handleError$1(function(){const o=global.global;return addHeapObject(o)},arguments)}function __wbg_newnoargs_e258087cd0daa0ea(o,e){const n=new Function(getStringFromWasm0(o,e));return addHeapObject(n)}function __wbg_call_27c0f87801dedf93(){return handleError$1(function(o,e){const n=getObject(o).call(getObject(e));return addHeapObject(n)},arguments)}function __wbg_get_bd8e338fbd5f5cc8(o,e){const n=getObject(o)[e>>>0];return addHeapObject(n)}function __wbg_length_cd7af8117672b8b8(o){return getObject(o).length}function __wbg_new_16b304a2cfa7ff4a(){const o=new Array;return addHeapObject(o)}function __wbg_new_d9bc3a0147634640(){return addHeapObject(new Map)}function __wbg_next_40fc327bfc8770e6(o){const e=getObject(o).next;return addHeapObject(e)}function __wbg_next_196c84450b364254(){return handleError$1(function(o){const e=getObject(o).next();return addHeapObject(e)},arguments)}function __wbg_done_298b57d23c0fc80c(o){return getObject(o).done}function __wbg_value_d93c65011f51a456(o){const e=getObject(o).value;return addHeapObject(e)}function __wbg_iterator_2cee6dadfd956dfa(){return addHeapObject(Symbol.iterator)}function __wbg_get_e3c254076557e348(){return handleError$1(function(o,e){const n=Reflect.get(getObject(o),getObject(e));return addHeapObject(n)},arguments)}function __wbg_new_72fb9a18b5ae2624(){const o=new Object;return addHeapObject(o)}function __wbg_newwithlength_66ae46612e7f0234(o){const e=new Array(o>>>0);return addHeapObject(e)}function __wbg_set_d4638f722068f043(o,e,n){getObject(o)[e>>>0]=takeObject(n)}function __wbg_isArray_2ab64d95e09ea0ae(o){return Array.isArray(getObject(o))}function __wbg_push_a5b05aedc7234f9f(o,e){return getObject(o).push(getObject(e))}function __wbg_instanceof_ArrayBuffer_836825be07d4c9d2(o){let e;try{e=getObject(o)instanceof ArrayBuffer}catch{e=!1}return e}function __wbg_call_b3ca7c6051f9bec1(){return handleError$1(function(o,e,n){const a=getObject(o).call(getObject(e),getObject(n));return addHeapObject(a)},arguments)}function __wbg_call_8e7cb608789c2528(){return handleError$1(function(o,e,n,a){const s=getObject(o).call(getObject(e),getObject(n),getObject(a));return addHeapObject(s)},arguments)}function __wbg_call_938992c832f74314(){return handleError$1(function(o,e,n,a,s){const l=getObject(o).call(getObject(e),getObject(n),getObject(a),getObject(s));return addHeapObject(l)},arguments)}function __wbg_instanceof_Map_87917e0a7aaf4012(o){let e;try{e=getObject(o)instanceof Map}catch{e=!1}return e}function __wbg_set_8417257aaedc936b(o,e,n){const a=getObject(o).set(getObject(e),getObject(n));return addHeapObject(a)}function __wbg_entries_ce844941d0c51880(o){const e=getObject(o).entries();return addHeapObject(e)}function __wbg_isSafeInteger_f7b04ef02296c4d2(o){return Number.isSafeInteger(getObject(o))}function __wbg_instanceof_Object_71ca3c0a59266746(o){let e;try{e=getObject(o)instanceof Object}catch{e=!1}return e}function __wbg_entries_95cc2c823b285a09(o){const e=Object.entries(getObject(o));return addHeapObject(e)}function __wbg_apply_0a5aa603881e6d79(){return handleError$1(function(o,e,n){const a=Reflect.apply(getObject(o),getObject(e),getObject(n));return addHeapObject(a)},arguments)}function __wbg_ownKeys_658942b7f28d1fe9(){return handleError$1(function(o){const e=Reflect.ownKeys(getObject(o));return addHeapObject(e)},arguments)}function __wbg_set_1f9b04f170055d33(){return handleError$1(function(o,e,n){return Reflect.set(getObject(o),getObject(e),getObject(n))},arguments)}function __wbg_buffer_12d079cc21e14bdb(o){const e=getObject(o).buffer;return addHeapObject(e)}function __wbg_resolve_b0083a7967828ec8(o){const e=Promise.resolve(getObject(o));return addHeapObject(e)}function __wbg_then_0c86a60e8fcfe9f6(o,e){const n=getObject(o).then(getObject(e));return addHeapObject(n)}function __wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb(o,e,n){const a=new Uint8Array(getObject(o),e>>>0,n>>>0);return addHeapObject(a)}function __wbg_new_63b92bc8671ed464(o){const e=new Uint8Array(getObject(o));return addHeapObject(e)}function __wbg_set_a47bac70306a19a7(o,e,n){getObject(o).set(getObject(e),n>>>0)}function __wbg_length_c20a40f15020d68a(o){return getObject(o).length}function __wbg_instanceof_Uint8Array_2b3bbecd033d19f6(o){let e;try{e=getObject(o)instanceof Uint8Array}catch{e=!1}return e}function __wbg_newwithlength_e9b4878cebadb3d3(o){const e=new Uint8Array(o>>>0);return addHeapObject(e)}function __wbg_subarray_a1f73cd4b5b42fe1(o,e,n){const a=getObject(o).subarray(e>>>0,n>>>0);return addHeapObject(a)}function __wbg_getindex_03d06b4e7ea3475e(o,e){return getObject(o)[e>>>0]}function __wbg_setindex_0b7ede192dc5eca8(o,e,n){getObject(o)[e>>>0]=n}function __wbindgen_bigint_get_as_i64(o,e){const n=getObject(e),a=typeof n=="bigint"?n:void 0;getBigInt64Memory0()[o/8+1]=isLikeNone(a)?BigInt(0):a,getInt32Memory0()[o/4+0]=!isLikeNone(a)}function __wbindgen_debug_string(o,e){const n=debugString(getObject(e)),a=passStringToWasm0(n,wasm$1.__wbindgen_export_0,wasm$1.__wbindgen_export_1),s=WASM_VECTOR_LEN;getInt32Memory0()[o/4+1]=s,getInt32Memory0()[o/4+0]=a}function __wbindgen_throw(o,e){throw new Error(getStringFromWasm0(o,e))}function __wbindgen_rethrow(o){throw takeObject(o)}function __wbindgen_memory(){const o=wasm$1.memory;return addHeapObject(o)}function __wbindgen_closure_wrapper487(o,e,n){const a=makeMutClosure(o,e,9,__wbg_adapter_58);return addHeapObject(a)}function __wbindgen_closure_wrapper489(o,e,n){const a=makeMutClosure(o,e,11,__wbg_adapter_61);return addHeapObject(a)}var imports=Object.freeze({__proto__:null,AwarenessWasm,Cursor,LoroCounter,LoroDoc,LoroList,LoroMap,LoroMovableList,LoroText,LoroTree,LoroTreeNode,UndoManager,VersionVector,__wbg_String_b9412f8799faab3e,__wbg_apply_0a5aa603881e6d79,__wbg_buffer_12d079cc21e14bdb,__wbg_call_27c0f87801dedf93,__wbg_call_8e7cb608789c2528,__wbg_call_938992c832f74314,__wbg_call_b3ca7c6051f9bec1,__wbg_crypto_1d1f22824a6a080c,__wbg_cursor_new,__wbg_done_298b57d23c0fc80c,__wbg_entries_95cc2c823b285a09,__wbg_entries_ce844941d0c51880,__wbg_error_c8c2cca30a630316,__wbg_error_f851667af71bcfc6,__wbg_getRandomValues_3aa56aa6edec874c,__wbg_get_bd8e338fbd5f5cc8,__wbg_get_e3c254076557e348,__wbg_getindex_03d06b4e7ea3475e,__wbg_getwithrefkey_edc2c8960f0f1191,__wbg_globalThis_d1e6af4856ba331b,__wbg_global_207b558942527489,__wbg_instanceof_ArrayBuffer_836825be07d4c9d2,__wbg_instanceof_Map_87917e0a7aaf4012,__wbg_instanceof_Object_71ca3c0a59266746,__wbg_instanceof_Uint8Array_2b3bbecd033d19f6,__wbg_isArray_2ab64d95e09ea0ae,__wbg_isSafeInteger_f7b04ef02296c4d2,__wbg_iterator_2cee6dadfd956dfa,__wbg_length_c20a40f15020d68a,__wbg_length_cd7af8117672b8b8,__wbg_log_aba5996d9bde071f,__wbg_log_c9486ca5d8e2cbe8,__wbg_log_d8fdbde28117925d,__wbg_lorocounter_new,__wbg_lorolist_new,__wbg_loromap_new,__wbg_loromovablelist_new,__wbg_lorotext_new,__wbg_lorotree_new,__wbg_lorotreenode_new,__wbg_mark_40e050a77cc39fea,__wbg_measure_aa7a73f17813f708,__wbg_msCrypto_eb05e62b530a1508,__wbg_new_16b304a2cfa7ff4a,__wbg_new_63b92bc8671ed464,__wbg_new_72fb9a18b5ae2624,__wbg_new_abda76e883ba8a5f,__wbg_new_d9bc3a0147634640,__wbg_newnoargs_e258087cd0daa0ea,__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb,__wbg_newwithlength_66ae46612e7f0234,__wbg_newwithlength_e9b4878cebadb3d3,__wbg_next_196c84450b364254,__wbg_next_40fc327bfc8770e6,__wbg_node_104a2ff8d6ea03a2,__wbg_now_11683c634f92ae89,__wbg_ownKeys_658942b7f28d1fe9,__wbg_process_4a72847cc503995b,__wbg_push_a5b05aedc7234f9f,__wbg_randomFillSync_5c9c955aa56b6049,__wbg_require_cca90b1a94a0255b,__wbg_resolve_b0083a7967828ec8,__wbg_self_ce0dbfc45cf2f5be,__wbg_set_1f9b04f170055d33,__wbg_set_8417257aaedc936b,__wbg_set_a47bac70306a19a7,__wbg_set_d4638f722068f043,__wbg_set_f975102236d3c502,__wbg_set_wasm,__wbg_setindex_0b7ede192dc5eca8,__wbg_stack_658279fe44541cf6,__wbg_subarray_a1f73cd4b5b42fe1,__wbg_then_0c86a60e8fcfe9f6,__wbg_value_d93c65011f51a456,__wbg_versions_f686565e586dd935,__wbg_versionvector_new,__wbg_window_c6fb939a7f436783,__wbindgen_as_number,__wbindgen_bigint_from_i64,__wbindgen_bigint_from_u64,__wbindgen_bigint_get_as_i64,__wbindgen_boolean_get,__wbindgen_cb_drop,__wbindgen_closure_wrapper487,__wbindgen_closure_wrapper489,__wbindgen_debug_string,__wbindgen_error_new,__wbindgen_in,__wbindgen_is_bigint,__wbindgen_is_falsy,__wbindgen_is_function,__wbindgen_is_null,__wbindgen_is_object,__wbindgen_is_string,__wbindgen_is_undefined,__wbindgen_jsval_eq,__wbindgen_jsval_loose_eq,__wbindgen_memory,__wbindgen_number_get,__wbindgen_number_new,__wbindgen_object_clone_ref,__wbindgen_object_drop_ref,__wbindgen_rethrow,__wbindgen_string_get,__wbindgen_string_new,__wbindgen_throw,__wbindgen_typeof,decodeFrontiers:decodeFrontiers$1,decodeImportBlobMeta:decodeImportBlobMeta$1,encodeFrontiers:encodeFrontiers$1,run:run$2,setDebug:setDebug$1});URL=globalThis.URL;const __vite__wasmModule=await __vite__initWasm({"./loro_wasm_bg.js":{__wbindgen_object_drop_ref,__wbg_loromap_new,__wbg_lorotext_new,__wbg_lorolist_new,__wbg_lorotree_new,__wbg_cursor_new,__wbg_loromovablelist_new,__wbg_lorocounter_new,__wbg_lorotreenode_new,__wbg_versionvector_new,__wbindgen_is_function,__wbindgen_string_new,__wbindgen_boolean_get,__wbindgen_error_new,__wbindgen_object_clone_ref,__wbindgen_string_get,__wbindgen_is_undefined,__wbindgen_in,__wbindgen_is_bigint,__wbindgen_number_get,__wbindgen_bigint_from_i64,__wbindgen_jsval_eq,__wbindgen_is_object,__wbindgen_bigint_from_u64,__wbindgen_cb_drop,__wbindgen_as_number,__wbindgen_is_string,__wbindgen_is_null,__wbindgen_number_new,__wbindgen_typeof,__wbg_error_c8c2cca30a630316,__wbg_log_d8fdbde28117925d,__wbindgen_is_falsy,__wbindgen_jsval_loose_eq,__wbg_String_b9412f8799faab3e,__wbg_getwithrefkey_edc2c8960f0f1191,__wbg_set_f975102236d3c502,__wbg_log_c9486ca5d8e2cbe8,__wbg_log_aba5996d9bde071f,__wbg_mark_40e050a77cc39fea,__wbg_measure_aa7a73f17813f708,__wbg_new_abda76e883ba8a5f,__wbg_stack_658279fe44541cf6,__wbg_error_f851667af71bcfc6,__wbg_now_11683c634f92ae89,__wbg_crypto_1d1f22824a6a080c,__wbg_process_4a72847cc503995b,__wbg_versions_f686565e586dd935,__wbg_node_104a2ff8d6ea03a2,__wbg_require_cca90b1a94a0255b,__wbg_msCrypto_eb05e62b530a1508,__wbg_getRandomValues_3aa56aa6edec874c,__wbg_randomFillSync_5c9c955aa56b6049,__wbg_self_ce0dbfc45cf2f5be,__wbg_window_c6fb939a7f436783,__wbg_globalThis_d1e6af4856ba331b,__wbg_global_207b558942527489,__wbg_newnoargs_e258087cd0daa0ea,__wbg_call_27c0f87801dedf93,__wbg_get_bd8e338fbd5f5cc8,__wbg_length_cd7af8117672b8b8,__wbg_new_16b304a2cfa7ff4a,__wbg_new_d9bc3a0147634640,__wbg_next_40fc327bfc8770e6,__wbg_next_196c84450b364254,__wbg_done_298b57d23c0fc80c,__wbg_value_d93c65011f51a456,__wbg_iterator_2cee6dadfd956dfa,__wbg_get_e3c254076557e348,__wbg_new_72fb9a18b5ae2624,__wbg_newwithlength_66ae46612e7f0234,__wbg_set_d4638f722068f043,__wbg_isArray_2ab64d95e09ea0ae,__wbg_push_a5b05aedc7234f9f,__wbg_instanceof_ArrayBuffer_836825be07d4c9d2,__wbg_call_b3ca7c6051f9bec1,__wbg_call_8e7cb608789c2528,__wbg_call_938992c832f74314,__wbg_instanceof_Map_87917e0a7aaf4012,__wbg_set_8417257aaedc936b,__wbg_entries_ce844941d0c51880,__wbg_isSafeInteger_f7b04ef02296c4d2,__wbg_instanceof_Object_71ca3c0a59266746,__wbg_entries_95cc2c823b285a09,__wbg_apply_0a5aa603881e6d79,__wbg_ownKeys_658942b7f28d1fe9,__wbg_set_1f9b04f170055d33,__wbg_buffer_12d079cc21e14bdb,__wbg_resolve_b0083a7967828ec8,__wbg_then_0c86a60e8fcfe9f6,__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb,__wbg_new_63b92bc8671ed464,__wbg_set_a47bac70306a19a7,__wbg_length_c20a40f15020d68a,__wbg_instanceof_Uint8Array_2b3bbecd033d19f6,__wbg_newwithlength_e9b4878cebadb3d3,__wbg_subarray_a1f73cd4b5b42fe1,__wbg_getindex_03d06b4e7ea3475e,__wbg_setindex_0b7ede192dc5eca8,__wbindgen_bigint_get_as_i64,__wbindgen_debug_string,__wbindgen_throw,__wbindgen_rethrow,__wbindgen_memory,__wbindgen_closure_wrapper487,__wbindgen_closure_wrapper489}},__vite__wasmUrl),memory=__vite__wasmModule.memory,__wbg_lorocounter_free=__vite__wasmModule.__wbg_lorocounter_free,lorocounter_new=__vite__wasmModule.lorocounter_new,lorocounter_increment=__vite__wasmModule.lorocounter_increment,lorocounter_decrement=__vite__wasmModule.lorocounter_decrement,lorocounter_value=__vite__wasmModule.lorocounter_value,lorocounter_subscribe=__vite__wasmModule.lorocounter_subscribe,lorocounter_parent=__vite__wasmModule.lorocounter_parent,lorocounter_isAttached=__vite__wasmModule.lorocounter_isAttached,lorocounter_getAttached=__vite__wasmModule.lorocounter_getAttached,lorocounter_getShallowValue=__vite__wasmModule.lorocounter_getShallowValue,__wbg_awarenesswasm_free=__vite__wasmModule.__wbg_awarenesswasm_free,awarenesswasm_new=__vite__wasmModule.awarenesswasm_new,awarenesswasm_encode=__vite__wasmModule.awarenesswasm_encode,awarenesswasm_encodeAll=__vite__wasmModule.awarenesswasm_encodeAll,awarenesswasm_apply=__vite__wasmModule.awarenesswasm_apply,awarenesswasm_setLocalState=__vite__wasmModule.awarenesswasm_setLocalState,awarenesswasm_peer=__vite__wasmModule.awarenesswasm_peer,awarenesswasm_getAllStates=__vite__wasmModule.awarenesswasm_getAllStates,awarenesswasm_getState=__vite__wasmModule.awarenesswasm_getState,awarenesswasm_getTimestamp=__vite__wasmModule.awarenesswasm_getTimestamp,awarenesswasm_removeOutdated=__vite__wasmModule.awarenesswasm_removeOutdated,awarenesswasm_length=__vite__wasmModule.awarenesswasm_length,awarenesswasm_isEmpty=__vite__wasmModule.awarenesswasm_isEmpty,awarenesswasm_peers=__vite__wasmModule.awarenesswasm_peers,run$1=__vite__wasmModule.run,encodeFrontiers=__vite__wasmModule.encodeFrontiers,decodeFrontiers=__vite__wasmModule.decodeFrontiers,setDebug=__vite__wasmModule.setDebug,__wbg_lorodoc_free=__vite__wasmModule.__wbg_lorodoc_free,lorodoc_new=__vite__wasmModule.lorodoc_new,lorodoc_setDetachedEditing=__vite__wasmModule.lorodoc_setDetachedEditing,lorodoc_isDetachedEditingEnabled=__vite__wasmModule.lorodoc_isDetachedEditingEnabled,lorodoc_setRecordTimestamp=__vite__wasmModule.lorodoc_setRecordTimestamp,lorodoc_setChangeMergeInterval=__vite__wasmModule.lorodoc_setChangeMergeInterval,lorodoc_configTextStyle=__vite__wasmModule.lorodoc_configTextStyle,lorodoc_fromSnapshot=__vite__wasmModule.lorodoc_fromSnapshot,lorodoc_attach=__vite__wasmModule.lorodoc_attach,lorodoc_isDetached=__vite__wasmModule.lorodoc_isDetached,lorodoc_detach=__vite__wasmModule.lorodoc_detach,lorodoc_fork=__vite__wasmModule.lorodoc_fork,lorodoc_forkAt=__vite__wasmModule.lorodoc_forkAt,lorodoc_checkoutToLatest=__vite__wasmModule.lorodoc_checkoutToLatest,lorodoc_travelChangeAncestors=__vite__wasmModule.lorodoc_travelChangeAncestors,lorodoc_checkout=__vite__wasmModule.lorodoc_checkout,lorodoc_peerId=__vite__wasmModule.lorodoc_peerId,lorodoc_peerIdStr=__vite__wasmModule.lorodoc_peerIdStr,lorodoc_setPeerId=__vite__wasmModule.lorodoc_setPeerId,lorodoc_commit=__vite__wasmModule.lorodoc_commit,lorodoc_getPendingTxnLength=__vite__wasmModule.lorodoc_getPendingTxnLength,lorodoc_getText=__vite__wasmModule.lorodoc_getText,lorodoc_getMap=__vite__wasmModule.lorodoc_getMap,lorodoc_getList=__vite__wasmModule.lorodoc_getList,lorodoc_getMovableList=__vite__wasmModule.lorodoc_getMovableList,lorodoc_getCounter=__vite__wasmModule.lorodoc_getCounter,lorodoc_getTree=__vite__wasmModule.lorodoc_getTree,lorodoc_getContainerById=__vite__wasmModule.lorodoc_getContainerById,lorodoc_setNextCommitMessage=__vite__wasmModule.lorodoc_setNextCommitMessage,lorodoc_getDeepValueWithID=__vite__wasmModule.lorodoc_getDeepValueWithID,lorodoc_getPathToContainer=__vite__wasmModule.lorodoc_getPathToContainer,lorodoc_JSONPath=__vite__wasmModule.lorodoc_JSONPath,lorodoc_version=__vite__wasmModule.lorodoc_version,lorodoc_shallowSinceVV=__vite__wasmModule.lorodoc_shallowSinceVV,lorodoc_isShallow=__vite__wasmModule.lorodoc_isShallow,lorodoc_shallowSinceFrontiers=__vite__wasmModule.lorodoc_shallowSinceFrontiers,lorodoc_oplogVersion=__vite__wasmModule.lorodoc_oplogVersion,lorodoc_frontiers=__vite__wasmModule.lorodoc_frontiers,lorodoc_oplogFrontiers=__vite__wasmModule.lorodoc_oplogFrontiers,lorodoc_cmpWithFrontiers=__vite__wasmModule.lorodoc_cmpWithFrontiers,lorodoc_cmpFrontiers=__vite__wasmModule.lorodoc_cmpFrontiers,lorodoc_exportSnapshot=__vite__wasmModule.lorodoc_exportSnapshot,lorodoc_exportFrom=__vite__wasmModule.lorodoc_exportFrom,lorodoc_export=__vite__wasmModule.lorodoc_export,lorodoc_exportJsonUpdates=__vite__wasmModule.lorodoc_exportJsonUpdates,lorodoc_importJsonUpdates=__vite__wasmModule.lorodoc_importJsonUpdates,lorodoc_import=__vite__wasmModule.lorodoc_import,lorodoc_importUpdateBatch=__vite__wasmModule.lorodoc_importUpdateBatch,lorodoc_importBatch=__vite__wasmModule.lorodoc_importBatch,lorodoc_getShallowValue=__vite__wasmModule.lorodoc_getShallowValue,lorodoc_toJSON=__vite__wasmModule.lorodoc_toJSON,lorodoc_subscribe=__vite__wasmModule.lorodoc_subscribe,lorodoc_subscribeLocalUpdates=__vite__wasmModule.lorodoc_subscribeLocalUpdates,lorodoc_debugHistory=__vite__wasmModule.lorodoc_debugHistory,lorodoc_changeCount=__vite__wasmModule.lorodoc_changeCount,lorodoc_opCount=__vite__wasmModule.lorodoc_opCount,lorodoc_getAllChanges=__vite__wasmModule.lorodoc_getAllChanges,lorodoc_getChangeAt=__vite__wasmModule.lorodoc_getChangeAt,lorodoc_getChangeAtLamport=__vite__wasmModule.lorodoc_getChangeAtLamport,lorodoc_getOpsInChange=__vite__wasmModule.lorodoc_getOpsInChange,lorodoc_frontiersToVV=__vite__wasmModule.lorodoc_frontiersToVV,lorodoc_vvToFrontiers=__vite__wasmModule.lorodoc_vvToFrontiers,lorodoc_getByPath=__vite__wasmModule.lorodoc_getByPath,lorodoc_getCursorPos=__vite__wasmModule.lorodoc_getCursorPos,lorodoc_getChangedContainersIn=__vite__wasmModule.lorodoc_getChangedContainersIn,__wbg_lorotext_free=__vite__wasmModule.__wbg_lorotext_free,lorotext_new=__vite__wasmModule.lorotext_new,lorotext_kind=__vite__wasmModule.lorotext_kind,lorotext_iter=__vite__wasmModule.lorotext_iter,lorotext_update=__vite__wasmModule.lorotext_update,lorotext_updateByLine=__vite__wasmModule.lorotext_updateByLine,lorotext_insert=__vite__wasmModule.lorotext_insert,lorotext_slice=__vite__wasmModule.lorotext_slice,lorotext_charAt=__vite__wasmModule.lorotext_charAt,lorotext_splice=__vite__wasmModule.lorotext_splice,lorotext_insertUtf8=__vite__wasmModule.lorotext_insertUtf8,lorotext_delete=__vite__wasmModule.lorotext_delete,lorotext_deleteUtf8=__vite__wasmModule.lorotext_deleteUtf8,lorotext_mark=__vite__wasmModule.lorotext_mark,lorotext_unmark=__vite__wasmModule.lorotext_unmark,lorotext_toString=__vite__wasmModule.lorotext_toString,lorotext_toDelta=__vite__wasmModule.lorotext_toDelta,lorotext_id=__vite__wasmModule.lorotext_id,lorotext_length=__vite__wasmModule.lorotext_length,lorotext_subscribe=__vite__wasmModule.lorotext_subscribe,lorotext_applyDelta=__vite__wasmModule.lorotext_applyDelta,lorotext_parent=__vite__wasmModule.lorotext_parent,lorotext_getAttached=__vite__wasmModule.lorotext_getAttached,lorotext_getCursor=__vite__wasmModule.lorotext_getCursor,lorotext_push=__vite__wasmModule.lorotext_push,lorotext_getEditorOf=__vite__wasmModule.lorotext_getEditorOf,lorotext_isDeleted=__vite__wasmModule.lorotext_isDeleted,lorotext_getShallowValue=__vite__wasmModule.lorotext_getShallowValue,__wbg_loromap_free=__vite__wasmModule.__wbg_loromap_free,loromap_new=__vite__wasmModule.loromap_new,loromap_kind=__vite__wasmModule.loromap_kind,loromap_set=__vite__wasmModule.loromap_set,loromap_delete=__vite__wasmModule.loromap_delete,loromap_get=__vite__wasmModule.loromap_get,loromap_getOrCreateContainer=__vite__wasmModule.loromap_getOrCreateContainer,loromap_keys=__vite__wasmModule.loromap_keys,loromap_values=__vite__wasmModule.loromap_values,loromap_entries=__vite__wasmModule.loromap_entries,loromap_id=__vite__wasmModule.loromap_id,loromap_toJSON=__vite__wasmModule.loromap_toJSON,loromap_setContainer=__vite__wasmModule.loromap_setContainer,loromap_subscribe=__vite__wasmModule.loromap_subscribe,loromap_size=__vite__wasmModule.loromap_size,loromap_parent=__vite__wasmModule.loromap_parent,loromap_getAttached=__vite__wasmModule.loromap_getAttached,loromap_clear=__vite__wasmModule.loromap_clear,loromap_getLastEditor=__vite__wasmModule.loromap_getLastEditor,loromap_isDeleted=__vite__wasmModule.loromap_isDeleted,loromap_getShallowValue=__vite__wasmModule.loromap_getShallowValue,__wbg_lorolist_free=__vite__wasmModule.__wbg_lorolist_free,lorolist_new=__vite__wasmModule.lorolist_new,lorolist_kind=__vite__wasmModule.lorolist_kind,lorolist_insert=__vite__wasmModule.lorolist_insert,lorolist_delete=__vite__wasmModule.lorolist_delete,lorolist_get=__vite__wasmModule.lorolist_get,lorolist_id=__vite__wasmModule.lorolist_id,lorolist_toArray=__vite__wasmModule.lorolist_toArray,lorolist_toJSON=__vite__wasmModule.lorolist_toJSON,lorolist_insertContainer=__vite__wasmModule.lorolist_insertContainer,lorolist_pushContainer=__vite__wasmModule.lorolist_pushContainer,lorolist_subscribe=__vite__wasmModule.lorolist_subscribe,lorolist_length=__vite__wasmModule.lorolist_length,lorolist_parent=__vite__wasmModule.lorolist_parent,lorolist_isAttached=__vite__wasmModule.lorolist_isAttached,lorolist_getAttached=__vite__wasmModule.lorolist_getAttached,lorolist_getCursor=__vite__wasmModule.lorolist_getCursor,lorolist_push=__vite__wasmModule.lorolist_push,lorolist_pop=__vite__wasmModule.lorolist_pop,lorolist_clear=__vite__wasmModule.lorolist_clear,lorolist_getIdAt=__vite__wasmModule.lorolist_getIdAt,lorolist_isDeleted=__vite__wasmModule.lorolist_isDeleted,lorolist_getShallowValue=__vite__wasmModule.lorolist_getShallowValue,loromovablelist_new=__vite__wasmModule.loromovablelist_new,loromovablelist_kind=__vite__wasmModule.loromovablelist_kind,loromovablelist_insert=__vite__wasmModule.loromovablelist_insert,loromovablelist_delete=__vite__wasmModule.loromovablelist_delete,loromovablelist_get=__vite__wasmModule.loromovablelist_get,loromovablelist_id=__vite__wasmModule.loromovablelist_id,loromovablelist_toArray=__vite__wasmModule.loromovablelist_toArray,loromovablelist_toJSON=__vite__wasmModule.loromovablelist_toJSON,loromovablelist_insertContainer=__vite__wasmModule.loromovablelist_insertContainer,loromovablelist_pushContainer=__vite__wasmModule.loromovablelist_pushContainer,loromovablelist_subscribe=__vite__wasmModule.loromovablelist_subscribe,loromovablelist_length=__vite__wasmModule.loromovablelist_length,loromovablelist_getAttached=__vite__wasmModule.loromovablelist_getAttached,loromovablelist_getCursor=__vite__wasmModule.loromovablelist_getCursor,loromovablelist_move=__vite__wasmModule.loromovablelist_move,loromovablelist_set=__vite__wasmModule.loromovablelist_set,loromovablelist_setContainer=__vite__wasmModule.loromovablelist_setContainer,loromovablelist_push=__vite__wasmModule.loromovablelist_push,loromovablelist_pop=__vite__wasmModule.loromovablelist_pop,loromovablelist_clear=__vite__wasmModule.loromovablelist_clear,loromovablelist_getCreatorAt=__vite__wasmModule.loromovablelist_getCreatorAt,loromovablelist_getLastMoverAt=__vite__wasmModule.loromovablelist_getLastMoverAt,loromovablelist_getLastEditorAt=__vite__wasmModule.loromovablelist_getLastEditorAt,loromovablelist_isDeleted=__vite__wasmModule.loromovablelist_isDeleted,loromovablelist_getShallowValue=__vite__wasmModule.loromovablelist_getShallowValue,__wbg_lorotree_free=__vite__wasmModule.__wbg_lorotree_free,lorotreenode___getClassname=__vite__wasmModule.lorotreenode___getClassname,__wbg_lorotreenode_free=__vite__wasmModule.__wbg_lorotreenode_free,lorotreenode_id=__vite__wasmModule.lorotreenode_id,lorotreenode_createNode=__vite__wasmModule.lorotreenode_createNode,lorotreenode_move=__vite__wasmModule.lorotreenode_move,lorotreenode_moveAfter=__vite__wasmModule.lorotreenode_moveAfter,lorotreenode_moveBefore=__vite__wasmModule.lorotreenode_moveBefore,lorotreenode_index=__vite__wasmModule.lorotreenode_index,lorotreenode_fractionalIndex=__vite__wasmModule.lorotreenode_fractionalIndex,lorotreenode_data=__vite__wasmModule.lorotreenode_data,lorotreenode_toJSON=__vite__wasmModule.lorotreenode_toJSON,lorotreenode_parent=__vite__wasmModule.lorotreenode_parent,lorotreenode_children=__vite__wasmModule.lorotreenode_children,lorotreenode_isDeleted=__vite__wasmModule.lorotreenode_isDeleted,lorotreenode_getLastMoveId=__vite__wasmModule.lorotreenode_getLastMoveId,lorotreenode_creationId=__vite__wasmModule.lorotreenode_creationId,lorotreenode_creator=__vite__wasmModule.lorotreenode_creator,lorotree_new=__vite__wasmModule.lorotree_new,lorotree_kind=__vite__wasmModule.lorotree_kind,lorotree_createNode=__vite__wasmModule.lorotree_createNode,lorotree_move=__vite__wasmModule.lorotree_move,lorotree_delete=__vite__wasmModule.lorotree_delete,lorotree_getNodeByID=__vite__wasmModule.lorotree_getNodeByID,lorotree_id=__vite__wasmModule.lorotree_id,lorotree_has=__vite__wasmModule.lorotree_has,lorotree_isNodeDeleted=__vite__wasmModule.lorotree_isNodeDeleted,lorotree_toArray=__vite__wasmModule.lorotree_toArray,lorotree_getNodes=__vite__wasmModule.lorotree_getNodes,lorotree_toJSON=__vite__wasmModule.lorotree_toJSON,lorotree_nodes=__vite__wasmModule.lorotree_nodes,lorotree_roots=__vite__wasmModule.lorotree_roots,lorotree_subscribe=__vite__wasmModule.lorotree_subscribe,lorotree_parent=__vite__wasmModule.lorotree_parent,lorotree_isAttached=__vite__wasmModule.lorotree_isAttached,lorotree_getAttached=__vite__wasmModule.lorotree_getAttached,lorotree_enableFractionalIndex=__vite__wasmModule.lorotree_enableFractionalIndex,lorotree_disableFractionalIndex=__vite__wasmModule.lorotree_disableFractionalIndex,lorotree_isFractionalIndexEnabled=__vite__wasmModule.lorotree_isFractionalIndexEnabled,lorotree_isDeleted=__vite__wasmModule.lorotree_isDeleted,lorotree_getShallowValue=__vite__wasmModule.lorotree_getShallowValue,__wbg_cursor_free=__vite__wasmModule.__wbg_cursor_free,cursor_containerId=__vite__wasmModule.cursor_containerId,cursor_pos=__vite__wasmModule.cursor_pos,cursor_side=__vite__wasmModule.cursor_side,cursor_encode=__vite__wasmModule.cursor_encode,cursor_decode=__vite__wasmModule.cursor_decode,cursor_kind=__vite__wasmModule.cursor_kind,__wbg_undomanager_free=__vite__wasmModule.__wbg_undomanager_free,undomanager_new=__vite__wasmModule.undomanager_new,undomanager_undo=__vite__wasmModule.undomanager_undo,undomanager_redo=__vite__wasmModule.undomanager_redo,undomanager_canUndo=__vite__wasmModule.undomanager_canUndo,undomanager_canRedo=__vite__wasmModule.undomanager_canRedo,undomanager_setMaxUndoSteps=__vite__wasmModule.undomanager_setMaxUndoSteps,undomanager_setMergeInterval=__vite__wasmModule.undomanager_setMergeInterval,undomanager_addExcludeOriginPrefix=__vite__wasmModule.undomanager_addExcludeOriginPrefix,undomanager_checkBinding=__vite__wasmModule.undomanager_checkBinding,undomanager_setOnPush=__vite__wasmModule.undomanager_setOnPush,undomanager_setOnPop=__vite__wasmModule.undomanager_setOnPop,undomanager_clear=__vite__wasmModule.undomanager_clear,__wbg_versionvector_free=__vite__wasmModule.__wbg_versionvector_free,versionvector_new=__vite__wasmModule.versionvector_new,versionvector_parseJSON=__vite__wasmModule.versionvector_parseJSON,versionvector_toJSON=__vite__wasmModule.versionvector_toJSON,versionvector_encode=__vite__wasmModule.versionvector_encode,versionvector_decode=__vite__wasmModule.versionvector_decode,versionvector_get=__vite__wasmModule.versionvector_get,versionvector_compare=__vite__wasmModule.versionvector_compare,versionvector_setEnd=__vite__wasmModule.versionvector_setEnd,versionvector_setLast=__vite__wasmModule.versionvector_setLast,versionvector_remove=__vite__wasmModule.versionvector_remove,versionvector_length=__vite__wasmModule.versionvector_length,decodeImportBlobMeta=__vite__wasmModule.decodeImportBlobMeta,__wbg_loromovablelist_free=__vite__wasmModule.__wbg_loromovablelist_free,loromovablelist_parent=__vite__wasmModule.loromovablelist_parent,lorotext_isAttached=__vite__wasmModule.lorotext_isAttached,loromap_isAttached=__vite__wasmModule.loromap_isAttached,loromovablelist_isAttached=__vite__wasmModule.loromovablelist_isAttached,__wbindgen_export_0=__vite__wasmModule.__wbindgen_export_0,__wbindgen_export_1=__vite__wasmModule.__wbindgen_export_1,__wbindgen_export_2=__vite__wasmModule.__wbindgen_export_2,__wbindgen_export_3=__vite__wasmModule.__wbindgen_export_3,__wbindgen_export_4=__vite__wasmModule.__wbindgen_export_4,__wbindgen_add_to_stack_pointer=__vite__wasmModule.__wbindgen_add_to_stack_pointer,__wbindgen_export_5=__vite__wasmModule.__wbindgen_export_5,__wbindgen_export_6=__vite__wasmModule.__wbindgen_export_6,__wbindgen_start=__vite__wasmModule.__wbindgen_start;var wasm=Object.freeze({__proto__:null,__wbg_awarenesswasm_free,__wbg_cursor_free,__wbg_lorocounter_free,__wbg_lorodoc_free,__wbg_lorolist_free,__wbg_loromap_free,__wbg_loromovablelist_free,__wbg_lorotext_free,__wbg_lorotree_free,__wbg_lorotreenode_free,__wbg_undomanager_free,__wbg_versionvector_free,__wbindgen_add_to_stack_pointer,__wbindgen_export_0,__wbindgen_export_1,__wbindgen_export_2,__wbindgen_export_3,__wbindgen_export_4,__wbindgen_export_5,__wbindgen_export_6,__wbindgen_start,awarenesswasm_apply,awarenesswasm_encode,awarenesswasm_encodeAll,awarenesswasm_getAllStates,awarenesswasm_getState,awarenesswasm_getTimestamp,awarenesswasm_isEmpty,awarenesswasm_length,awarenesswasm_new,awarenesswasm_peer,awarenesswasm_peers,awarenesswasm_removeOutdated,awarenesswasm_setLocalState,cursor_containerId,cursor_decode,cursor_encode,cursor_kind,cursor_pos,cursor_side,decodeFrontiers,decodeImportBlobMeta,encodeFrontiers,lorocounter_decrement,lorocounter_getAttached,lorocounter_getShallowValue,lorocounter_increment,lorocounter_isAttached,lorocounter_new,lorocounter_parent,lorocounter_subscribe,lorocounter_value,lorodoc_JSONPath,lorodoc_attach,lorodoc_changeCount,lorodoc_checkout,lorodoc_checkoutToLatest,lorodoc_cmpFrontiers,lorodoc_cmpWithFrontiers,lorodoc_commit,lorodoc_configTextStyle,lorodoc_debugHistory,lorodoc_detach,lorodoc_export,lorodoc_exportFrom,lorodoc_exportJsonUpdates,lorodoc_exportSnapshot,lorodoc_fork,lorodoc_forkAt,lorodoc_fromSnapshot,lorodoc_frontiers,lorodoc_frontiersToVV,lorodoc_getAllChanges,lorodoc_getByPath,lorodoc_getChangeAt,lorodoc_getChangeAtLamport,lorodoc_getChangedContainersIn,lorodoc_getContainerById,lorodoc_getCounter,lorodoc_getCursorPos,lorodoc_getDeepValueWithID,lorodoc_getList,lorodoc_getMap,lorodoc_getMovableList,lorodoc_getOpsInChange,lorodoc_getPathToContainer,lorodoc_getPendingTxnLength,lorodoc_getShallowValue,lorodoc_getText,lorodoc_getTree,lorodoc_import,lorodoc_importBatch,lorodoc_importJsonUpdates,lorodoc_importUpdateBatch,lorodoc_isDetached,lorodoc_isDetachedEditingEnabled,lorodoc_isShallow,lorodoc_new,lorodoc_opCount,lorodoc_oplogFrontiers,lorodoc_oplogVersion,lorodoc_peerId,lorodoc_peerIdStr,lorodoc_setChangeMergeInterval,lorodoc_setDetachedEditing,lorodoc_setNextCommitMessage,lorodoc_setPeerId,lorodoc_setRecordTimestamp,lorodoc_shallowSinceFrontiers,lorodoc_shallowSinceVV,lorodoc_subscribe,lorodoc_subscribeLocalUpdates,lorodoc_toJSON,lorodoc_travelChangeAncestors,lorodoc_version,lorodoc_vvToFrontiers,lorolist_clear,lorolist_delete,lorolist_get,lorolist_getAttached,lorolist_getCursor,lorolist_getIdAt,lorolist_getShallowValue,lorolist_id,lorolist_insert,lorolist_insertContainer,lorolist_isAttached,lorolist_isDeleted,lorolist_kind,lorolist_length,lorolist_new,lorolist_parent,lorolist_pop,lorolist_push,lorolist_pushContainer,lorolist_subscribe,lorolist_toArray,lorolist_toJSON,loromap_clear,loromap_delete,loromap_entries,loromap_get,loromap_getAttached,loromap_getLastEditor,loromap_getOrCreateContainer,loromap_getShallowValue,loromap_id,loromap_isAttached,loromap_isDeleted,loromap_keys,loromap_kind,loromap_new,loromap_parent,loromap_set,loromap_setContainer,loromap_size,loromap_subscribe,loromap_toJSON,loromap_values,loromovablelist_clear,loromovablelist_delete,loromovablelist_get,loromovablelist_getAttached,loromovablelist_getCreatorAt,loromovablelist_getCursor,loromovablelist_getLastEditorAt,loromovablelist_getLastMoverAt,loromovablelist_getShallowValue,loromovablelist_id,loromovablelist_insert,loromovablelist_insertContainer,loromovablelist_isAttached,loromovablelist_isDeleted,loromovablelist_kind,loromovablelist_length,loromovablelist_move,loromovablelist_new,loromovablelist_parent,loromovablelist_pop,loromovablelist_push,loromovablelist_pushContainer,loromovablelist_set,loromovablelist_setContainer,loromovablelist_subscribe,loromovablelist_toArray,loromovablelist_toJSON,lorotext_applyDelta,lorotext_charAt,lorotext_delete,lorotext_deleteUtf8,lorotext_getAttached,lorotext_getCursor,lorotext_getEditorOf,lorotext_getShallowValue,lorotext_id,lorotext_insert,lorotext_insertUtf8,lorotext_isAttached,lorotext_isDeleted,lorotext_iter,lorotext_kind,lorotext_length,lorotext_mark,lorotext_new,lorotext_parent,lorotext_push,lorotext_slice,lorotext_splice,lorotext_subscribe,lorotext_toDelta,lorotext_toString,lorotext_unmark,lorotext_update,lorotext_updateByLine,lorotree_createNode,lorotree_delete,lorotree_disableFractionalIndex,lorotree_enableFractionalIndex,lorotree_getAttached,lorotree_getNodeByID,lorotree_getNodes,lorotree_getShallowValue,lorotree_has,lorotree_id,lorotree_isAttached,lorotree_isDeleted,lorotree_isFractionalIndexEnabled,lorotree_isNodeDeleted,lorotree_kind,lorotree_move,lorotree_new,lorotree_nodes,lorotree_parent,lorotree_roots,lorotree_subscribe,lorotree_toArray,lorotree_toJSON,lorotreenode___getClassname,lorotreenode_children,lorotreenode_createNode,lorotreenode_creationId,lorotreenode_creator,lorotreenode_data,lorotreenode_fractionalIndex,lorotreenode_getLastMoveId,lorotreenode_id,lorotreenode_index,lorotreenode_isDeleted,lorotreenode_move,lorotreenode_moveAfter,lorotreenode_moveBefore,lorotreenode_parent,lorotreenode_toJSON,memory,run:run$1,setDebug,undomanager_addExcludeOriginPrefix,undomanager_canRedo,undomanager_canUndo,undomanager_checkBinding,undomanager_clear,undomanager_new,undomanager_redo,undomanager_setMaxUndoSteps,undomanager_setMergeInterval,undomanager_setOnPop,undomanager_setOnPush,undomanager_undo,versionvector_compare,versionvector_decode,versionvector_encode,versionvector_get,versionvector_length,versionvector_new,versionvector_parseJSON,versionvector_remove,versionvector_setEnd,versionvector_setLast,versionvector_toJSON});if(__wbindgen_start)__wbg_set_wasm(wasm),__wbindgen_start();else{const o=await Promise.resolve().then(function(){return wasm}),e=new WebAssembly.Instance(o.default,{"./loro_wasm_bg.js":imports});__wbg_set_wasm(e.exports)}const CONTAINER_TYPES=["Map","Text","List","Tree","MovableList","Counter"];function isContainerId(o){return o.startsWith("cid:")}function isContainer(o){if(typeof o!="object"||o==null)return!1;const e=Object.getPrototypeOf(o);return e==null||typeof e!="object"||typeof e.kind!="function"?!1:CONTAINER_TYPES.includes(o.kind())}LoroDoc.prototype.toJsonWithReplacer=function(o){const e=this,n=(l,c)=>{if(typeof c=="string"&&isContainerId(c)){const u=e.getContainerById(c);if(u==null)throw new Error(`ContainerID not found: ${c}`);const f=o(l,u);if(f===u){const p=u.getShallowValue();return typeof p=="object"?a(p):p}if(isContainer(f))throw new Error("Using new container is not allowed in toJsonWithReplacer");return f}const d=o(l,c);if(isContainer(d))throw new Error("Using new container is not allowed in toJsonWithReplacer");return d},a=l=>{if(Array.isArray(l))return l.map((d,u)=>n(u,d)).filter(d=>d!==void 0);const c={};for(const[d,u]of Object.entries(l)){const f=n(d,u);f!==void 0&&(c[d]=f)}return c},s=this.getShallowValue();return a(s)};var util;(function(o){o.assertEqual=s=>s;function e(s){}o.assertIs=e;function n(s){throw new Error}o.assertNever=n,o.arrayToEnum=s=>{const l={};for(const c of s)l[c]=c;return l},o.getValidEnumValues=s=>{const l=o.objectKeys(s).filter(d=>typeof s[s[d]]!="number"),c={};for(const d of l)c[d]=s[d];return o.objectValues(c)},o.objectValues=s=>o.objectKeys(s).map(function(l){return s[l]}),o.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const l=[];for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&l.push(c);return l},o.find=(s,l)=>{for(const c of s)if(l(c))return c},o.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function a(s,l=" | "){return s.map(c=>typeof c=="string"?`'${c}'`:c).join(l)}o.joinValues=a,o.jsonStringifyReplacer=(s,l)=>typeof l=="bigint"?l.toString():l})(util||(util={}));var objectUtil;(function(o){o.mergeShapes=(e,n)=>({...e,...n})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=o=>{switch(typeof o){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(o)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(o)?ZodParsedType.array:o===null?ZodParsedType.null:o.then&&typeof o.then=="function"&&o.catch&&typeof o.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&o instanceof Map?ZodParsedType.map:typeof Set<"u"&&o instanceof Set?ZodParsedType.set:typeof Date<"u"&&o instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=o=>JSON.stringify(o,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(l){return l.message},a={_errors:[]},s=l=>{for(const c of l.issues)if(c.code==="invalid_union")c.unionErrors.map(s);else if(c.code==="invalid_return_type")s(c.returnTypeError);else if(c.code==="invalid_arguments")s(c.argumentsError);else if(c.path.length===0)a._errors.push(n(c));else{let d=a,u=0;for(;u<c.path.length;){const f=c.path[u];u===c.path.length-1?(d[f]=d[f]||{_errors:[]},d[f]._errors.push(n(c))):d[f]=d[f]||{_errors:[]},d=d[f],u++}}};return s(this),a}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},a=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):a.push(e(s));return{formErrors:a,fieldErrors:n}}get formErrors(){return this.flatten()}}ZodError.create=o=>new ZodError(o);const errorMap=(o,e)=>{let n;switch(o.code){case ZodIssueCode.invalid_type:o.received===ZodParsedType.undefined?n="Required":n=`Expected ${o.expected}, received ${o.received}`;break;case ZodIssueCode.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(o.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:n=`Unrecognized key(s) in object: ${util.joinValues(o.keys,", ")}`;break;case ZodIssueCode.invalid_union:n="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${util.joinValues(o.options)}`;break;case ZodIssueCode.invalid_enum_value:n=`Invalid enum value. Expected ${util.joinValues(o.options)}, received '${o.received}'`;break;case ZodIssueCode.invalid_arguments:n="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:n="Invalid function return type";break;case ZodIssueCode.invalid_date:n="Invalid date";break;case ZodIssueCode.invalid_string:typeof o.validation=="object"?"includes"in o.validation?(n=`Invalid input: must include "${o.validation.includes}"`,typeof o.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${o.validation.position}`)):"startsWith"in o.validation?n=`Invalid input: must start with "${o.validation.startsWith}"`:"endsWith"in o.validation?n=`Invalid input: must end with "${o.validation.endsWith}"`:util.assertNever(o.validation):o.validation!=="regex"?n=`Invalid ${o.validation}`:n="Invalid";break;case ZodIssueCode.too_small:o.type==="array"?n=`Array must contain ${o.exact?"exactly":o.inclusive?"at least":"more than"} ${o.minimum} element(s)`:o.type==="string"?n=`String must contain ${o.exact?"exactly":o.inclusive?"at least":"over"} ${o.minimum} character(s)`:o.type==="number"?n=`Number must be ${o.exact?"exactly equal to ":o.inclusive?"greater than or equal to ":"greater than "}${o.minimum}`:o.type==="date"?n=`Date must be ${o.exact?"exactly equal to ":o.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(o.minimum))}`:n="Invalid input";break;case ZodIssueCode.too_big:o.type==="array"?n=`Array must contain ${o.exact?"exactly":o.inclusive?"at most":"less than"} ${o.maximum} element(s)`:o.type==="string"?n=`String must contain ${o.exact?"exactly":o.inclusive?"at most":"under"} ${o.maximum} character(s)`:o.type==="number"?n=`Number must be ${o.exact?"exactly":o.inclusive?"less than or equal to":"less than"} ${o.maximum}`:o.type==="bigint"?n=`BigInt must be ${o.exact?"exactly":o.inclusive?"less than or equal to":"less than"} ${o.maximum}`:o.type==="date"?n=`Date must be ${o.exact?"exactly":o.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(o.maximum))}`:n="Invalid input";break;case ZodIssueCode.custom:n="Invalid input";break;case ZodIssueCode.invalid_intersection_types:n="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:n=`Number must be a multiple of ${o.multipleOf}`;break;case ZodIssueCode.not_finite:n="Number must be finite";break;default:n=e.defaultError,util.assertNever(o)}return{message:n}};let overrideErrorMap=errorMap;function setErrorMap(o){overrideErrorMap=o}function getErrorMap(){return overrideErrorMap}const makeIssue=o=>{const{data:e,path:n,errorMaps:a,issueData:s}=o,l=[...n,...s.path||[]],c={...s,path:l};if(s.message!==void 0)return{...s,path:l,message:s.message};let d="";const u=a.filter(f=>!!f).slice().reverse();for(const f of u)d=f(c,{data:e,defaultError:d}).message;return{...s,path:l,message:d}},EMPTY_PATH=[];function addIssueToContext(o,e){const n=getErrorMap(),a=makeIssue({issueData:e,data:o.data,path:o.path,errorMaps:[o.common.contextualErrorMap,o.schemaErrorMap,n,n===errorMap?void 0:errorMap].filter(s=>!!s)});o.common.issues.push(a)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const a=[];for(const s of n){if(s.status==="aborted")return INVALID;s.status==="dirty"&&e.dirty(),a.push(s.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,n){const a=[];for(const s of n){const l=await s.key,c=await s.value;a.push({key:l,value:c})}return ParseStatus.mergeObjectSync(e,a)}static mergeObjectSync(e,n){const a={};for(const s of n){const{key:l,value:c}=s;if(l.status==="aborted"||c.status==="aborted")return INVALID;l.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof c.value<"u"||s.alwaysSet)&&(a[l.value]=c.value)}return{status:e.value,value:a}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=o=>({status:"dirty",value:o}),OK=o=>({status:"valid",value:o}),isAborted=o=>o.status==="aborted",isDirty$1=o=>o.status==="dirty",isValid=o=>o.status==="valid",isAsync=o=>typeof Promise<"u"&&o instanceof Promise;function __classPrivateFieldGet(o,e,n,a){if(typeof e=="function"?o!==e||!0:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(o)}function __classPrivateFieldSet(o,e,n,a,s){if(typeof e=="function"?o!==e||!0:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(o,n),n}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(o){o.errToObj=e=>typeof e=="string"?{message:e}:e||{},o.toString=e=>typeof e=="string"?e:e?.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(e,n,a,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=a,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(o,e)=>{if(isValid(e))return{success:!0,data:e.value};if(!o.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ZodError(o.common.issues);return this._error=n,this._error}}};function processCreateParams(o){if(!o)return{};const{errorMap:e,invalid_type_error:n,required_error:a,description:s}=o;if(e&&(n||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(c,d)=>{var u,f;const{message:p}=o;return c.code==="invalid_enum_value"?{message:p??d.defaultError}:typeof d.data>"u"?{message:(u=p??a)!==null&&u!==void 0?u:d.defaultError}:c.code!=="invalid_type"?{message:d.defaultError}:{message:(f=p??n)!==null&&f!==void 0?f:d.defaultError}},description:s}}class ZodType{get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(isAsync(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const a=this.safeParse(e,n);if(a.success)return a.data;throw a.error}safeParse(e,n){var a;const s={common:{issues:[],async:(a=n?.async)!==null&&a!==void 0?a:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},l=this._parseSync({data:e,path:s.path,parent:s});return handleResult(s,l)}"~validate"(e){var n,a;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:s});return isValid(l)?{value:l.value}:{issues:s.common.issues}}catch(l){!((a=(n=l?.message)===null||n===void 0?void 0:n.toLowerCase())===null||a===void 0)&&a.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(l=>isValid(l)?{value:l.value}:{issues:s.common.issues})}async parseAsync(e,n){const a=await this.safeParseAsync(e,n);if(a.success)return a.data;throw a.error}async safeParseAsync(e,n){const a={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},s=this._parse({data:e,path:a.path,parent:a}),l=await (isAsync(s)?s:Promise.resolve(s));return handleResult(a,l)}refine(e,n){const a=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,l)=>{const c=e(s),d=()=>l.addIssue({code:ZodIssueCode.custom,...a(s)});return typeof Promise<"u"&&c instanceof Promise?c.then(u=>u?!0:(d(),!1)):c?!0:(d(),!1)})}refinement(e,n){return this._refinement((a,s)=>e(a)?!0:(s.addIssue(typeof n=="function"?n(a,s):n),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:n,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:n,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(o){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return o.precision?e=`${e}\\.\\d{${o.precision}}`:o.precision==null&&(e=`${e}(\\.\\d+)?`),e}function timeRegex(o){return new RegExp(`^${timeRegexSource(o)}$`)}function datetimeRegex(o){let e=`${dateRegexSource}T${timeRegexSource(o)}`;const n=[];return n.push(o.local?"Z?":"Z"),o.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function isValidIP(o,e){return!!((e==="v4"||!e)&&ipv4Regex.test(o)||(e==="v6"||!e)&&ipv6Regex.test(o))}function isValidJWT(o,e){if(!jwtRegex.test(o))return!1;try{const[n]=o.split("."),a=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(a));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function isValidCidr(o,e){return!!((e==="v4"||!e)&&ipv4CidrRegex.test(o)||(e==="v6"||!e)&&ipv6CidrRegex.test(o))}class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZodParsedType.string){const l=this._getOrReturnCtx(e);return addIssueToContext(l,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:l.parsedType}),INVALID}const a=new ParseStatus;let s;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),a.dirty());else if(l.kind==="max")e.data.length>l.value&&(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),a.dirty());else if(l.kind==="length"){const c=e.data.length>l.value,d=e.data.length<l.value;(c||d)&&(s=this._getOrReturnCtx(e,s),c?addIssueToContext(s,{code:ZodIssueCode.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):d&&addIssueToContext(s,{code:ZodIssueCode.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),a.dirty())}else if(l.kind==="email")emailRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"email",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty());else if(l.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"emoji",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty());else if(l.kind==="uuid")uuidRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"uuid",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty());else if(l.kind==="nanoid")nanoidRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty());else if(l.kind==="cuid")cuidRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"cuid",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty());else if(l.kind==="cuid2")cuid2Regex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty());else if(l.kind==="ulid")ulidRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"ulid",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"url",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"regex",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),a.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.invalid_string,validation:{startsWith:l.value},message:l.message}),a.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.invalid_string,validation:{endsWith:l.value},message:l.message}),a.dirty()):l.kind==="datetime"?datetimeRegex(l).test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.invalid_string,validation:"datetime",message:l.message}),a.dirty()):l.kind==="date"?dateRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.invalid_string,validation:"date",message:l.message}),a.dirty()):l.kind==="time"?timeRegex(l).test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.invalid_string,validation:"time",message:l.message}),a.dirty()):l.kind==="duration"?durationRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"duration",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty()):l.kind==="ip"?isValidIP(e.data,l.version)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"ip",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty()):l.kind==="jwt"?isValidJWT(e.data,l.alg)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"jwt",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty()):l.kind==="cidr"?isValidCidr(e.data,l.version)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"cidr",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty()):l.kind==="base64"?base64Regex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"base64",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty()):l.kind==="base64url"?base64urlRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"base64url",code:ZodIssueCode.invalid_string,message:l.message}),a.dirty()):util.assertNever(l);return{status:a.value,value:e.data}}_regex(e,n,a){return this.refinement(s=>e.test(s),{validation:n,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(a)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...errorUtil.errToObj(e)})}datetime(e){var n,a;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(a=e?.local)!==null&&a!==void 0?a:!1,...errorUtil.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...errorUtil.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...errorUtil.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...errorUtil.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(n)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ZodString.create=o=>{var e;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(e=o?.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(o)})};function floatSafeRemainder(o,e){const n=(o.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,s=n>a?n:a,l=parseInt(o.toFixed(s).replace(".","")),c=parseInt(e.toFixed(s).replace(".",""));return l%c/Math.pow(10,s)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZodParsedType.number){const l=this._getOrReturnCtx(e);return addIssueToContext(l,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:l.parsedType}),INVALID}let a;const s=new ParseStatus;for(const l of this._def.checks)l.kind==="int"?util.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:l.message}),s.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),s.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),s.dirty()):l.kind==="multipleOf"?floatSafeRemainder(e.data,l.value)!==0&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.not_multiple_of,multipleOf:l.value,message:l.message}),s.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.not_finite,message:l.message}),s.dirty()):util.assertNever(l);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,errorUtil.toString(n))}gt(e,n){return this.setLimit("min",e,!1,errorUtil.toString(n))}lte(e,n){return this.setLimit("max",e,!0,errorUtil.toString(n))}lt(e,n){return this.setLimit("max",e,!1,errorUtil.toString(n))}setLimit(e,n,a,s){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:a,message:errorUtil.toString(s)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&util.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(n===null||a.value>n)&&(n=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ZodNumber.create=o=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:o?.coerce||!1,...processCreateParams(o)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ZodParsedType.bigint)return this._getInvalidInput(e);let a;const s=new ParseStatus;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),s.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),s.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.not_multiple_of,multipleOf:l.value,message:l.message}),s.dirty()):util.assertNever(l);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:n.parsedType}),INVALID}gte(e,n){return this.setLimit("min",e,!0,errorUtil.toString(n))}gt(e,n){return this.setLimit("min",e,!1,errorUtil.toString(n))}lte(e,n){return this.setLimit("max",e,!0,errorUtil.toString(n))}lt(e,n){return this.setLimit("max",e,!1,errorUtil.toString(n))}setLimit(e,n,a,s){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:a,message:errorUtil.toString(s)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ZodBigInt.create=o=>{var e;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(e=o?.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(o)})};class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ZodParsedType.boolean){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:a.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=o=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:o?.coerce||!1,...processCreateParams(o)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZodParsedType.date){const l=this._getOrReturnCtx(e);return addIssueToContext(l,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:l.parsedType}),INVALID}if(isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return addIssueToContext(l,{code:ZodIssueCode.invalid_date}),INVALID}const a=new ParseStatus;let s;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),a.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),a.dirty()):util.assertNever(l);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ZodDate.create=o=>new ZodDate({checks:[],coerce:o?.coerce||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(o)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:a.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=o=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(o)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:a.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=o=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(o)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:a.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=o=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(o)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=o=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(o)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=o=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(o)});class ZodNever extends ZodType{_parse(e){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:n.parsedType}),INVALID}}ZodNever.create=o=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(o)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:a.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=o=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(o)});class ZodArray extends ZodType{_parse(e){const{ctx:n,status:a}=this._processInputParams(e),s=this._def;if(n.parsedType!==ZodParsedType.array)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:n.parsedType}),INVALID;if(s.exactLength!==null){const c=n.data.length>s.exactLength.value,d=n.data.length<s.exactLength.value;(c||d)&&(addIssueToContext(n,{code:c?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:d?s.exactLength.value:void 0,maximum:c?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),a.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),a.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),a.dirty()),n.common.async)return Promise.all([...n.data].map((c,d)=>s.type._parseAsync(new ParseInputLazyPath(n,c,n.path,d)))).then(c=>ParseStatus.mergeArray(a,c));const l=[...n.data].map((c,d)=>s.type._parseSync(new ParseInputLazyPath(n,c,n.path,d)));return ParseStatus.mergeArray(a,l)}get element(){return this._def.type}min(e,n){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(n)}})}max(e,n){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(n)}})}length(e,n){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(n)}})}nonempty(e){return this.min(1,e)}}ZodArray.create=(o,e)=>new ZodArray({type:o,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(e)});function deepPartialify(o){if(o instanceof ZodObject){const e={};for(const n in o.shape){const a=o.shape[n];e[n]=ZodOptional.create(deepPartialify(a))}return new ZodObject({...o._def,shape:()=>e})}else return o instanceof ZodArray?new ZodArray({...o._def,type:deepPartialify(o.element)}):o instanceof ZodOptional?ZodOptional.create(deepPartialify(o.unwrap())):o instanceof ZodNullable?ZodNullable.create(deepPartialify(o.unwrap())):o instanceof ZodTuple?ZodTuple.create(o.items.map(e=>deepPartialify(e))):o}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=util.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ZodParsedType.object){const f=this._getOrReturnCtx(e);return addIssueToContext(f,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:f.parsedType}),INVALID}const{status:a,ctx:s}=this._processInputParams(e),{shape:l,keys:c}=this._getCached(),d=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const f in s.data)c.includes(f)||d.push(f);const u=[];for(const f of c){const p=l[f],_=s.data[f];u.push({key:{status:"valid",value:f},value:p._parse(new ParseInputLazyPath(s,_,s.path,f)),alwaysSet:f in s.data})}if(this._def.catchall instanceof ZodNever){const f=this._def.unknownKeys;if(f==="passthrough")for(const p of d)u.push({key:{status:"valid",value:p},value:{status:"valid",value:s.data[p]}});else if(f==="strict")d.length>0&&(addIssueToContext(s,{code:ZodIssueCode.unrecognized_keys,keys:d}),a.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const p of d){const _=s.data[p];u.push({key:{status:"valid",value:p},value:f._parse(new ParseInputLazyPath(s,_,s.path,p)),alwaysSet:p in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const f=[];for(const p of u){const _=await p.key,b=await p.value;f.push({key:_,value:b,alwaysSet:p.alwaysSet})}return f}).then(f=>ParseStatus.mergeObjectSync(a,f)):ParseStatus.mergeObjectSync(a,u)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,a)=>{var s,l,c,d;const u=(c=(l=(s=this._def).errorMap)===null||l===void 0?void 0:l.call(s,n,a).message)!==null&&c!==void 0?c:a.defaultError;return n.code==="unrecognized_keys"?{message:(d=errorUtil.errToObj(e).message)!==null&&d!==void 0?d:u}:{message:u}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const n={};return util.objectKeys(e).forEach(a=>{e[a]&&this.shape[a]&&(n[a]=this.shape[a])}),new ZodObject({...this._def,shape:()=>n})}omit(e){const n={};return util.objectKeys(this.shape).forEach(a=>{e[a]||(n[a]=this.shape[a])}),new ZodObject({...this._def,shape:()=>n})}deepPartial(){return deepPartialify(this)}partial(e){const n={};return util.objectKeys(this.shape).forEach(a=>{const s=this.shape[a];e&&!e[a]?n[a]=s:n[a]=s.optional()}),new ZodObject({...this._def,shape:()=>n})}required(e){const n={};return util.objectKeys(this.shape).forEach(a=>{if(e&&!e[a])n[a]=this.shape[a];else{let l=this.shape[a];for(;l instanceof ZodOptional;)l=l._def.innerType;n[a]=l}}),new ZodObject({...this._def,shape:()=>n})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(o,e)=>new ZodObject({shape:()=>o,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.strictCreate=(o,e)=>new ZodObject({shape:()=>o,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.lazycreate=(o,e)=>new ZodObject({shape:o,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});class ZodUnion extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e),a=this._def.options;function s(l){for(const d of l)if(d.result.status==="valid")return d.result;for(const d of l)if(d.result.status==="dirty")return n.common.issues.push(...d.ctx.common.issues),d.result;const c=l.map(d=>new ZodError(d.ctx.common.issues));return addIssueToContext(n,{code:ZodIssueCode.invalid_union,unionErrors:c}),INVALID}if(n.common.async)return Promise.all(a.map(async l=>{const c={...n,common:{...n.common,issues:[]},parent:null};return{result:await l._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(s);{let l;const c=[];for(const u of a){const f={...n,common:{...n.common,issues:[]},parent:null},p=u._parseSync({data:n.data,path:n.path,parent:f});if(p.status==="valid")return p;p.status==="dirty"&&!l&&(l={result:p,ctx:f}),f.common.issues.length&&c.push(f.common.issues)}if(l)return n.common.issues.push(...l.ctx.common.issues),l.result;const d=c.map(u=>new ZodError(u));return addIssueToContext(n,{code:ZodIssueCode.invalid_union,unionErrors:d}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(o,e)=>new ZodUnion({options:o,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(e)});const getDiscriminator=o=>o instanceof ZodLazy?getDiscriminator(o.schema):o instanceof ZodEffects?getDiscriminator(o.innerType()):o instanceof ZodLiteral?[o.value]:o instanceof ZodEnum?o.options:o instanceof ZodNativeEnum?util.objectValues(o.enum):o instanceof ZodDefault?getDiscriminator(o._def.innerType):o instanceof ZodUndefined?[void 0]:o instanceof ZodNull?[null]:o instanceof ZodOptional?[void 0,...getDiscriminator(o.unwrap())]:o instanceof ZodNullable?[null,...getDiscriminator(o.unwrap())]:o instanceof ZodBranded||o instanceof ZodReadonly?getDiscriminator(o.unwrap()):o instanceof ZodCatch?getDiscriminator(o._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.object)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:n.parsedType}),INVALID;const a=this.discriminator,s=n.data[a],l=this.optionsMap.get(s);return l?n.common.async?l._parseAsync({data:n.data,path:n.path,parent:n}):l._parseSync({data:n.data,path:n.path,parent:n}):(addIssueToContext(n,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,a){const s=new Map;for(const l of n){const c=getDiscriminator(l.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const d of c){if(s.has(d))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(d)}`);s.set(d,l)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...processCreateParams(a)})}}function mergeValues(o,e){const n=getParsedType(o),a=getParsedType(e);if(o===e)return{valid:!0,data:o};if(n===ZodParsedType.object&&a===ZodParsedType.object){const s=util.objectKeys(e),l=util.objectKeys(o).filter(d=>s.indexOf(d)!==-1),c={...o,...e};for(const d of l){const u=mergeValues(o[d],e[d]);if(!u.valid)return{valid:!1};c[d]=u.data}return{valid:!0,data:c}}else if(n===ZodParsedType.array&&a===ZodParsedType.array){if(o.length!==e.length)return{valid:!1};const s=[];for(let l=0;l<o.length;l++){const c=o[l],d=e[l],u=mergeValues(c,d);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return n===ZodParsedType.date&&a===ZodParsedType.date&&+o==+e?{valid:!0,data:o}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:n,ctx:a}=this._processInputParams(e),s=(l,c)=>{if(isAborted(l)||isAborted(c))return INVALID;const d=mergeValues(l.value,c.value);return d.valid?((isDirty$1(l)||isDirty$1(c))&&n.dirty(),{status:n.value,value:d.data}):(addIssueToContext(a,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([l,c])=>s(l,c)):s(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}ZodIntersection.create=(o,e,n)=>new ZodIntersection({left:o,right:e,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(n)});class ZodTuple extends ZodType{_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.array)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:a.parsedType}),INVALID;if(a.data.length<this._def.items.length)return addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&a.data.length>this._def.items.length&&(addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const l=[...a.data].map((c,d)=>{const u=this._def.items[d]||this._def.rest;return u?u._parse(new ParseInputLazyPath(a,c,a.path,d)):null}).filter(c=>!!c);return a.common.async?Promise.all(l).then(c=>ParseStatus.mergeArray(n,c)):ParseStatus.mergeArray(n,l)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(o,e)=>{if(!Array.isArray(o))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:o,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(e)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.object)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:a.parsedType}),INVALID;const s=[],l=this._def.keyType,c=this._def.valueType;for(const d in a.data)s.push({key:l._parse(new ParseInputLazyPath(a,d,a.path,d)),value:c._parse(new ParseInputLazyPath(a,a.data[d],a.path,d)),alwaysSet:d in a.data});return a.common.async?ParseStatus.mergeObjectAsync(n,s):ParseStatus.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,a){return n instanceof ZodType?new ZodRecord({keyType:e,valueType:n,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(a)}):new ZodRecord({keyType:ZodString.create(),valueType:e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(n)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.map)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:a.parsedType}),INVALID;const s=this._def.keyType,l=this._def.valueType,c=[...a.data.entries()].map(([d,u],f)=>({key:s._parse(new ParseInputLazyPath(a,d,a.path,[f,"key"])),value:l._parse(new ParseInputLazyPath(a,u,a.path,[f,"value"]))}));if(a.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const u of c){const f=await u.key,p=await u.value;if(f.status==="aborted"||p.status==="aborted")return INVALID;(f.status==="dirty"||p.status==="dirty")&&n.dirty(),d.set(f.value,p.value)}return{status:n.value,value:d}})}else{const d=new Map;for(const u of c){const f=u.key,p=u.value;if(f.status==="aborted"||p.status==="aborted")return INVALID;(f.status==="dirty"||p.status==="dirty")&&n.dirty(),d.set(f.value,p.value)}return{status:n.value,value:d}}}}ZodMap.create=(o,e,n)=>new ZodMap({valueType:e,keyType:o,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(n)});class ZodSet extends ZodType{_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.set)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:a.parsedType}),INVALID;const s=this._def;s.minSize!==null&&a.data.size<s.minSize.value&&(addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&a.data.size>s.maxSize.value&&(addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const l=this._def.valueType;function c(u){const f=new Set;for(const p of u){if(p.status==="aborted")return INVALID;p.status==="dirty"&&n.dirty(),f.add(p.value)}return{status:n.value,value:f}}const d=[...a.data.values()].map((u,f)=>l._parse(new ParseInputLazyPath(a,u,a.path,f)));return a.common.async?Promise.all(d).then(u=>c(u)):c(d)}min(e,n){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(n)}})}max(e,n){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ZodSet.create=(o,e)=>new ZodSet({valueType:o,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(e)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.function)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:n.parsedType}),INVALID;function a(d,u){return makeIssue({data:d,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,getErrorMap(),errorMap].filter(f=>!!f),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:u}})}function s(d,u){return makeIssue({data:d,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,getErrorMap(),errorMap].filter(f=>!!f),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:u}})}const l={errorMap:n.common.contextualErrorMap},c=n.data;if(this._def.returns instanceof ZodPromise){const d=this;return OK(async function(...u){const f=new ZodError([]),p=await d._def.args.parseAsync(u,l).catch(v=>{throw f.addIssue(a(u,v)),f}),_=await Reflect.apply(c,this,p);return await d._def.returns._def.type.parseAsync(_,l).catch(v=>{throw f.addIssue(s(_,v)),f})})}else{const d=this;return OK(function(...u){const f=d._def.args.safeParse(u,l);if(!f.success)throw new ZodError([a(u,f.error)]);const p=Reflect.apply(c,this,f.data),_=d._def.returns.safeParse(p,l);if(!_.success)throw new ZodError([s(p,_.error)]);return _.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,a){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:n||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(a)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ZodLazy.create=(o,e)=>new ZodLazy({getter:o,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(e)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}ZodLiteral.create=(o,e)=>new ZodLiteral({value:o,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(e)});function createZodEnum(o,e){return new ZodEnum({values:o,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(e)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),a=this._def.values;return addIssueToContext(n,{expected:util.joinValues(a),received:n.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(e.data)){const n=this._getOrReturnCtx(e),a=this._def.values;return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_enum_value,options:a}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ZodEnum.create(e,{...this._def,...n})}exclude(e,n=this._def){return ZodEnum.create(this.options.filter(a=>!e.includes(a)),{...this._def,...n})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(e){const n=util.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==ZodParsedType.string&&a.parsedType!==ZodParsedType.number){const s=util.objectValues(n);return addIssueToContext(a,{expected:util.joinValues(s),received:a.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(e.data)){const s=util.objectValues(n);return addIssueToContext(a,{received:a.data,code:ZodIssueCode.invalid_enum_value,options:s}),INVALID}return OK(e.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(o,e)=>new ZodNativeEnum({values:o,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.promise&&n.common.async===!1)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:n.parsedType}),INVALID;const a=n.parsedType===ZodParsedType.promise?n.data:Promise.resolve(n.data);return OK(a.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ZodPromise.create=(o,e)=>new ZodPromise({type:o,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:a}=this._processInputParams(e),s=this._def.effect||null,l={addIssue:c=>{addIssueToContext(a,c),c.fatal?n.abort():n.dirty()},get path(){return a.path}};if(l.addIssue=l.addIssue.bind(l),s.type==="preprocess"){const c=s.transform(a.data,l);if(a.common.async)return Promise.resolve(c).then(async d=>{if(n.value==="aborted")return INVALID;const u=await this._def.schema._parseAsync({data:d,path:a.path,parent:a});return u.status==="aborted"?INVALID:u.status==="dirty"||n.value==="dirty"?DIRTY(u.value):u});{if(n.value==="aborted")return INVALID;const d=this._def.schema._parseSync({data:c,path:a.path,parent:a});return d.status==="aborted"?INVALID:d.status==="dirty"||n.value==="dirty"?DIRTY(d.value):d}}if(s.type==="refinement"){const c=d=>{const u=s.refinement(d,l);if(a.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(a.common.async===!1){const d=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return d.status==="aborted"?INVALID:(d.status==="dirty"&&n.dirty(),c(d.value),{status:n.value,value:d.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(d=>d.status==="aborted"?INVALID:(d.status==="dirty"&&n.dirty(),c(d.value).then(()=>({status:n.value,value:d.value}))))}if(s.type==="transform")if(a.common.async===!1){const c=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!isValid(c))return c;const d=s.transform(c.value,l);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:d}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(c=>isValid(c)?Promise.resolve(s.transform(c.value,l)).then(d=>({status:n.value,value:d})):c);util.assertNever(s)}}ZodEffects.create=(o,e,n)=>new ZodEffects({schema:o,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:e,...processCreateParams(n)});ZodEffects.createWithPreprocess=(o,e,n)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:o},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(n)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(o,e)=>new ZodOptional({innerType:o,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(e)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(o,e)=>new ZodNullable({innerType:o,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(e)});class ZodDefault extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e);let a=n.data;return n.parsedType===ZodParsedType.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ZodDefault.create=(o,e)=>new ZodDefault({innerType:o,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...processCreateParams(e)});class ZodCatch extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e),a={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return isAsync(s)?s.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new ZodError(a.common.issues)},input:a.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ZodError(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(o,e)=>new ZodCatch({innerType:o,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...processCreateParams(e)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:a.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=o=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(o)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e),a=n.data;return this._def.type._parse({data:a,path:n.path,parent:n})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return l.status==="aborted"?INVALID:l.status==="dirty"?(n.dirty(),DIRTY(l.value)):this._def.out._parseAsync({data:l.value,path:a.path,parent:a})})();{const s=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?INVALID:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:a.path,parent:a})}}static create(e,n){return new ZodPipeline({in:e,out:n,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const n=this._def.innerType._parse(e),a=s=>(isValid(s)&&(s.value=Object.freeze(s.value)),s);return isAsync(n)?n.then(s=>a(s)):a(n)}unwrap(){return this._def.innerType}}ZodReadonly.create=(o,e)=>new ZodReadonly({innerType:o,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(e)});function custom(o,e={},n){return o?ZodAny.create().superRefine((a,s)=>{var l,c;if(!o(a)){const d=typeof e=="function"?e(a):typeof e=="string"?{message:e}:e,u=(c=(l=d.fatal)!==null&&l!==void 0?l:n)!==null&&c!==void 0?c:!0,f=typeof d=="string"?{message:d}:d;s.addIssue({code:"custom",...f,fatal:u})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(o){o.ZodString="ZodString",o.ZodNumber="ZodNumber",o.ZodNaN="ZodNaN",o.ZodBigInt="ZodBigInt",o.ZodBoolean="ZodBoolean",o.ZodDate="ZodDate",o.ZodSymbol="ZodSymbol",o.ZodUndefined="ZodUndefined",o.ZodNull="ZodNull",o.ZodAny="ZodAny",o.ZodUnknown="ZodUnknown",o.ZodNever="ZodNever",o.ZodVoid="ZodVoid",o.ZodArray="ZodArray",o.ZodObject="ZodObject",o.ZodUnion="ZodUnion",o.ZodDiscriminatedUnion="ZodDiscriminatedUnion",o.ZodIntersection="ZodIntersection",o.ZodTuple="ZodTuple",o.ZodRecord="ZodRecord",o.ZodMap="ZodMap",o.ZodSet="ZodSet",o.ZodFunction="ZodFunction",o.ZodLazy="ZodLazy",o.ZodLiteral="ZodLiteral",o.ZodEnum="ZodEnum",o.ZodEffects="ZodEffects",o.ZodNativeEnum="ZodNativeEnum",o.ZodOptional="ZodOptional",o.ZodNullable="ZodNullable",o.ZodDefault="ZodDefault",o.ZodCatch="ZodCatch",o.ZodPromise="ZodPromise",o.ZodBranded="ZodBranded",o.ZodPipeline="ZodPipeline",o.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(o,e={message:`Input not instance of ${o.name}`})=>custom(n=>n instanceof o,e),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:o=>ZodString.create({...o,coerce:!0}),number:o=>ZodNumber.create({...o,coerce:!0}),boolean:o=>ZodBoolean.create({...o,coerce:!0}),bigint:o=>ZodBigInt.create({...o,coerce:!0}),date:o=>ZodDate.create({...o,coerce:!0})},NEVER=INVALID;var z$1=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty:isDirty$1,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});const BLOCK_CONTENT_TYPES={TEXT:0,IMAGE:1,CODE:2,MATH:3,QUERY:4,CAROUSEL:5},BLOCK_TYPE_ZH_NAMES=["文本","图片","代码","公式","查询","多图"],_RESP_CODES={SUCCESS:0,INVALID_REQUEST:1,PASSWORD_INCORRECT:2,EXCEED_MAX_ATTEMPTS:3,NO_AUTHORIZATION:4,UNKNOWN_ERROR:5,TARGET_NOT_FOUND:6,INVALID_RESPONSE:7,NO_AXIOS:8,FILE_EXISTS:9,DIR_NOT_FOUND:10,TOKEN_EXPIRED:11,PATH_NOT_FOUND:12,PATH_EXISTS_AND_NOT_EMPTY:13,PATH_CANNOT_ACCESS:14},RESP_CODES_NAMES=Object.fromEntries(Object.entries(_RESP_CODES).map(([o,e])=>[e,o])),RESP_CODES={..._RESP_CODES,...RESP_CODES_NAMES},BLOCK_INFO_DOC_NAME="blockInfo",BLOCK_DATA_DOC_NAME_PREFIX="blockData_",DATA_MAP_NAME="data",extractBlockStatus=o=>{const e=o&3,n=o&4;return{type:e==0?"normalBlock":e==1?"mirrorBlock":"virtualBlock",fold:n!=0}},calcBlockStatus=(o,e)=>(o=="normalBlock"?0:o=="mirrorBlock"?1:2)|(e?4:0),TextContentSchema=z$1.tuple([z$1.literal(BLOCK_CONTENT_TYPES.TEXT),z$1.any()]),ImageFilterSchema=z$1.enum(["blend","circle","invert","invertW","outline","blendLuminosity"]),ImageContentSchema=z$1.tuple([z$1.literal(BLOCK_CONTENT_TYPES.IMAGE),z$1.string(),z$1.enum(["left","center"]),z$1.string().nullable(),z$1.number().nullable(),z$1.array(ImageFilterSchema).nullable()]);z$1.tuple([z$1.literal(BLOCK_CONTENT_TYPES.CAROUSEL),z$1.array(z$1.string()),z$1.string().nullable(),z$1.number().nullable(),z$1.array(ImageFilterSchema).nullable()]);const CodeContentSchema=z$1.tuple([z$1.literal(BLOCK_CONTENT_TYPES.CODE),z$1.string(),z$1.string()]),MathDisplayContentSchema=z$1.tuple([z$1.literal(BLOCK_CONTENT_TYPES.MATH),z$1.string()]),QueryContentSchema=z$1.tuple([z$1.literal(BLOCK_CONTENT_TYPES.QUERY),z$1.any(),z$1.string(),z$1.boolean(),z$1.boolean()]),BlockContentSchema=z$1.union([TextContentSchema,ImageContentSchema,CodeContentSchema,MathDisplayContentSchema,QueryContentSchema]);z$1.tuple([BlockContentSchema.nullable(),z$1.record(z$1.any())]);const BlockIdSchema=z$1.string(),BlockStatusSchema=z$1.number().min(0).max(5);z$1.tuple([BlockStatusSchema,BlockIdSchema,z$1.array(BlockIdSchema),z$1.number().nullable(),BlockIdSchema.nullable()]);const getPlatform=()=>{const o=globalThis.process;if(typeof o<"u"&&o.platform)switch(o.platform){case"win32":return"win32";case"darwin":return"macos";case"linux":return"linux";default:throw new Error("Unsupported platform")}if(typeof navigator<"u"){const e=navigator.platform.toLowerCase();if(e.includes("win"))return"win32";if(e.includes("mac"))return"macos";if(e.includes("linux"))return"linux";throw new Error("Unsupported platform")}throw new Error("Platform detection failed")},getSeperator=()=>getPlatform()==="win32"?"\\":"/",getPathSegments=o=>o.split(getSeperator()),joinPathSegments=o=>{const e=getSeperator(),n=[];for(const a of o){let s=a;s.startsWith(e)&&(s=s.slice(1)),s.endsWith(e)&&(s=s.slice(0,-1)),s.length!==0&&n.push(s)}return n.join(e)},getBasename=o=>{const e=getPathSegments(o);return e[e.length-1]};function OrderedMap(o){this.content=o}OrderedMap.prototype={constructor:OrderedMap,find:function(o){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===o)return e;return-1},get:function(o){var e=this.find(o);return e==-1?void 0:this.content[e+1]},update:function(o,e,n){var a=n&&n!=o?this.remove(n):this,s=a.find(o),l=a.content.slice();return s==-1?l.push(n||o,e):(l[s+1]=e,n&&(l[s]=n)),new OrderedMap(l)},remove:function(o){var e=this.find(o);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new OrderedMap(n)},addToStart:function(o,e){return new OrderedMap([o,e].concat(this.remove(o).content))},addToEnd:function(o,e){var n=this.remove(o).content.slice();return n.push(o,e),new OrderedMap(n)},addBefore:function(o,e,n){var a=this.remove(e),s=a.content.slice(),l=a.find(o);return s.splice(l==-1?s.length:l,0,e,n),new OrderedMap(s)},forEach:function(o){for(var e=0;e<this.content.length;e+=2)o(this.content[e],this.content[e+1])},prepend:function(o){return o=OrderedMap.from(o),o.size?new OrderedMap(o.content.concat(this.subtract(o).content)):this},append:function(o){return o=OrderedMap.from(o),o.size?new OrderedMap(this.subtract(o).content.concat(o.content)):this},subtract:function(o){var e=this;o=OrderedMap.from(o);for(var n=0;n<o.content.length;n+=2)e=e.remove(o.content[n]);return e},toObject:function(){var o={};return this.forEach(function(e,n){o[e]=n}),o},get size(){return this.content.length>>1}};OrderedMap.from=function(o){if(o instanceof OrderedMap)return o;var e=[];if(o)for(var n in o)e.push(n,o[n]);return new OrderedMap(e)};function findDiffStart(o,e,n){for(let a=0;;a++){if(a==o.childCount||a==e.childCount)return o.childCount==e.childCount?null:n;let s=o.child(a),l=e.child(a);if(s==l){n+=s.nodeSize;continue}if(!s.sameMarkup(l))return n;if(s.isText&&s.text!=l.text){for(let c=0;s.text[c]==l.text[c];c++)n++;return n}if(s.content.size||l.content.size){let c=findDiffStart(s.content,l.content,n+1);if(c!=null)return c}n+=s.nodeSize}}function findDiffEnd(o,e,n,a){for(let s=o.childCount,l=e.childCount;;){if(s==0||l==0)return s==l?null:{a:n,b:a};let c=o.child(--s),d=e.child(--l),u=c.nodeSize;if(c==d){n-=u,a-=u;continue}if(!c.sameMarkup(d))return{a:n,b:a};if(c.isText&&c.text!=d.text){let f=0,p=Math.min(c.text.length,d.text.length);for(;f<p&&c.text[c.text.length-f-1]==d.text[d.text.length-f-1];)f++,n--,a--;return{a:n,b:a}}if(c.content.size||d.content.size){let f=findDiffEnd(c.content,d.content,n-1,a-1);if(f)return f}n-=u,a-=u}}let Fragment$1=class xt{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let a=0;a<e.length;a++)this.size+=e[a].nodeSize}nodesBetween(e,n,a,s=0,l){for(let c=0,d=0;d<n;c++){let u=this.content[c],f=d+u.nodeSize;if(f>e&&a(u,s+d,l||null,c)!==!1&&u.content.size){let p=d+1;u.nodesBetween(Math.max(0,e-p),Math.min(u.content.size,n-p),a,s+p)}d=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,a,s){let l="",c=!0;return this.nodesBetween(e,n,(d,u)=>{let f=d.isText?d.text.slice(Math.max(e,u)-u,n-u):d.isLeaf?s?typeof s=="function"?s(d):s:d.type.spec.leafText?d.type.spec.leafText(d):"":"";d.isBlock&&(d.isLeaf&&f||d.isTextblock)&&a&&(c?c=!1:l+=a),l+=f},0),l}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,a=e.firstChild,s=this.content.slice(),l=0;for(n.isText&&n.sameMarkup(a)&&(s[s.length-1]=n.withText(n.text+a.text),l=1);l<e.content.length;l++)s.push(e.content[l]);return new xt(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let a=[],s=0;if(n>e)for(let l=0,c=0;c<n;l++){let d=this.content[l],u=c+d.nodeSize;u>e&&((c<e||u>n)&&(d.isText?d=d.cut(Math.max(0,e-c),Math.min(d.text.length,n-c)):d=d.cut(Math.max(0,e-c-1),Math.min(d.content.size,n-c-1))),a.push(d),s+=d.nodeSize),c=u}return new xt(a,s)}cutByIndex(e,n){return e==n?xt.empty:e==0&&n==this.content.length?this:new xt(this.content.slice(e,n))}replaceChild(e,n){let a=this.content[e];if(a==n)return this;let s=this.content.slice(),l=this.size+n.nodeSize-a.nodeSize;return s[e]=n,new xt(s,l)}addToStart(e){return new xt([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new xt(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,a=0;n<this.content.length;n++){let s=this.content[n];e(s,a,n),a+=s.nodeSize}}findDiffStart(e,n=0){return findDiffStart(this,e,n)}findDiffEnd(e,n=this.size,a=e.size){return findDiffEnd(this,e,n,a)}findIndex(e,n=-1){if(e==0)return retIndex(0,e);if(e==this.size)return retIndex(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let a=0,s=0;;a++){let l=this.child(a),c=s+l.nodeSize;if(c>=e)return c==e||n>0?retIndex(a+1,c):retIndex(a,s);s=c}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return xt.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new xt(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return xt.empty;let n,a=0;for(let s=0;s<e.length;s++){let l=e[s];a+=l.nodeSize,s&&l.isText&&e[s-1].sameMarkup(l)?(n||(n=e.slice(0,s)),n[n.length-1]=l.withText(n[n.length-1].text+l.text)):n&&n.push(l)}return new xt(n||e,a)}static from(e){if(!e)return xt.empty;if(e instanceof xt)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new xt([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Fragment$1.empty=new Fragment$1([],0);const found={index:0,offset:0};function retIndex(o,e){return found.index=o,found.offset=e,found}function compareDeep(o,e){if(o===e)return!0;if(!(o&&typeof o=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(o);if(Array.isArray(e)!=n)return!1;if(n){if(o.length!=e.length)return!1;for(let a=0;a<o.length;a++)if(!compareDeep(o[a],e[a]))return!1}else{for(let a in o)if(!(a in e)||!compareDeep(o[a],e[a]))return!1;for(let a in e)if(!(a in o))return!1}return!0}class Mark{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,a=!1;for(let s=0;s<e.length;s++){let l=e[s];if(this.eq(l))return e;if(this.type.excludes(l.type))n||(n=e.slice(0,s));else{if(l.type.excludes(this.type))return e;!a&&l.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),a=!0),n&&n.push(l)}}return n||(n=e.slice()),a||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&compareDeep(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let a=e.marks[n.type];if(!a)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=a.create(n.attrs);return a.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let a=0;a<e.length;a++)if(!e[a].eq(n[a]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Mark.none;if(e instanceof Mark)return[e];let n=e.slice();return n.sort((a,s)=>a.type.rank-s.type.rank),n}}Mark.none=[];class ReplaceError extends Error{}class Slice{constructor(e,n,a){this.content=e,this.openStart=n,this.openEnd=a}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let a=insertInto(this.content,e+this.openStart,n);return a&&new Slice(a,this.openStart,this.openEnd)}removeBetween(e,n){return new Slice(removeRange(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Slice.empty;let a=n.openStart||0,s=n.openEnd||0;if(typeof a!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment$1.fromJSON(e,n.content),a,s)}static maxOpen(e,n=!0){let a=0,s=0;for(let l=e.firstChild;l&&!l.isLeaf&&(n||!l.type.spec.isolating);l=l.firstChild)a++;for(let l=e.lastChild;l&&!l.isLeaf&&(n||!l.type.spec.isolating);l=l.lastChild)s++;return new Slice(e,a,s)}}Slice.empty=new Slice(Fragment$1.empty,0,0);function removeRange(o,e,n){let{index:a,offset:s}=o.findIndex(e),l=o.maybeChild(a),{index:c,offset:d}=o.findIndex(n);if(s==e||l.isText){if(d!=n&&!o.child(c).isText)throw new RangeError("Removing non-flat range");return o.cut(0,e).append(o.cut(n))}if(a!=c)throw new RangeError("Removing non-flat range");return o.replaceChild(a,l.copy(removeRange(l.content,e-s-1,n-s-1)))}function insertInto(o,e,n,a){let{index:s,offset:l}=o.findIndex(e),c=o.maybeChild(s);if(l==e||c.isText)return o.cut(0,e).append(n).append(o.cut(e));let d=insertInto(c.content,e-l-1,n);return d&&o.replaceChild(s,c.copy(d))}function replace$2(o,e,n){if(n.openStart>o.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(o.depth-n.openStart!=e.depth-n.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(o,e,n,0)}function replaceOuter(o,e,n,a){let s=o.index(a),l=o.node(a);if(s==e.index(a)&&a<o.depth-n.openStart){let c=replaceOuter(o,e,n,a+1);return l.copy(l.content.replaceChild(s,c))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&o.depth==a&&e.depth==a){let c=o.parent,d=c.content;return close$1(c,d.cut(0,o.parentOffset).append(n.content).append(d.cut(e.parentOffset)))}else{let{start:c,end:d}=prepareSliceForReplace(n,o);return close$1(l,replaceThreeWay(o,c,d,e,a))}else return close$1(l,replaceTwoWay(o,e,a))}function checkJoin(o,e){if(!e.type.compatibleContent(o.type))throw new ReplaceError("Cannot join "+e.type.name+" onto "+o.type.name)}function joinable(o,e,n){let a=o.node(n);return checkJoin(a,e.node(n)),a}function addNode(o,e){let n=e.length-1;n>=0&&o.isText&&o.sameMarkup(e[n])?e[n]=o.withText(e[n].text+o.text):e.push(o)}function addRange$1(o,e,n,a){let s=(e||o).node(n),l=0,c=e?e.index(n):s.childCount;o&&(l=o.index(n),o.depth>n?l++:o.textOffset&&(addNode(o.nodeAfter,a),l++));for(let d=l;d<c;d++)addNode(s.child(d),a);e&&e.depth==n&&e.textOffset&&addNode(e.nodeBefore,a)}function close$1(o,e){return o.type.checkContent(e),o.copy(e)}function replaceThreeWay(o,e,n,a,s){let l=o.depth>s&&joinable(o,e,s+1),c=a.depth>s&&joinable(n,a,s+1),d=[];return addRange$1(null,o,s,d),l&&c&&e.index(s)==n.index(s)?(checkJoin(l,c),addNode(close$1(l,replaceThreeWay(o,e,n,a,s+1)),d)):(l&&addNode(close$1(l,replaceTwoWay(o,e,s+1)),d),addRange$1(e,n,s,d),c&&addNode(close$1(c,replaceTwoWay(n,a,s+1)),d)),addRange$1(a,null,s,d),new Fragment$1(d)}function replaceTwoWay(o,e,n){let a=[];if(addRange$1(null,o,n,a),o.depth>n){let s=joinable(o,e,n+1);addNode(close$1(s,replaceTwoWay(o,e,n+1)),a)}return addRange$1(e,null,n,a),new Fragment$1(a)}function prepareSliceForReplace(o,e){let n=e.depth-o.openStart,s=e.node(n).copy(o.content);for(let l=n-1;l>=0;l--)s=e.node(l).copy(Fragment$1.from(s));return{start:s.resolveNoCache(o.openStart+n),end:s.resolveNoCache(s.content.size-o.openEnd-n)}}class ResolvedPos{constructor(e,n,a){this.pos=e,this.path=n,this.parentOffset=a,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let a=this.pos-this.path[this.path.length-1],s=e.child(n);return a?e.child(n).cut(a):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let a=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let l=0;l<e;l++)s+=a.child(l).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Mark.none;if(this.textOffset)return e.child(n).marks;let a=e.maybeChild(n-1),s=e.maybeChild(n);if(!a){let d=a;a=s,s=d}let l=a.marks;for(var c=0;c<l.length;c++)l[c].type.spec.inclusive===!1&&(!s||!l[c].isInSet(s.marks))&&(l=l[c--].removeFromSet(l));return l}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let a=n.marks,s=e.parent.maybeChild(e.index());for(var l=0;l<a.length;l++)a[l].type.spec.inclusive===!1&&(!s||!a[l].isInSet(s.marks))&&(a=a[l--].removeFromSet(a));return a}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let a=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);a>=0;a--)if(e.pos<=this.end(a)&&(!n||n(this.node(a))))return new NodeRange(this,e,a);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let a=[],s=0,l=n;for(let c=e;;){let{index:d,offset:u}=c.content.findIndex(l),f=l-u;if(a.push(c,d,s+u),!f||(c=c.child(d),c.isText))break;l=f-1,s+=u+1}return new ResolvedPos(n,a,l)}static resolveCached(e,n){let a=resolveCache.get(e);if(a)for(let l=0;l<a.elts.length;l++){let c=a.elts[l];if(c.pos==n)return c}else resolveCache.set(e,a=new ResolveCache);let s=a.elts[a.i]=ResolvedPos.resolve(e,n);return a.i=(a.i+1)%resolveCacheSize,s}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(e,n,a){this.$from=e,this.$to=n,this.depth=a}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$1=class Gt{constructor(e,n,a,s=Mark.none){this.type=e,this.attrs=n,this.marks=s,this.content=a||Fragment$1.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,a,s=0){this.content.nodesBetween(e,n,a,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,a,s){return this.content.textBetween(e,n,a,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,a){return this.type==e&&compareDeep(this.attrs,n||e.defaultAttrs||emptyAttrs)&&Mark.sameSet(this.marks,a||Mark.none)}copy(e=null){return e==this.content?this:new Gt(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Gt(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,a=!1){if(e==n)return Slice.empty;let s=this.resolve(e),l=this.resolve(n),c=a?0:s.sharedDepth(n),d=s.start(c),f=s.node(c).content.cut(s.pos-d,l.pos-d);return new Slice(f,s.depth-c,l.depth-c)}replace(e,n,a){return replace$2(this.resolve(e),this.resolve(n),a)}nodeAt(e){for(let n=this;;){let{index:a,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(a),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:a}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:a}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:a}=this.content.findIndex(e);if(a<e)return{node:this.content.child(n),index:n,offset:a};let s=this.content.child(n-1);return{node:s,index:n-1,offset:a-s.nodeSize}}resolve(e){return ResolvedPos.resolveCached(this,e)}resolveNoCache(e){return ResolvedPos.resolve(this,e)}rangeHasMark(e,n,a){let s=!1;return n>e&&this.nodesBetween(e,n,l=>(a.isInSet(l.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wrapMarks$1(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,a=Fragment$1.empty,s=0,l=a.childCount){let c=this.contentMatchAt(e).matchFragment(a,s,l),d=c&&c.matchFragment(this.content,n);if(!d||!d.validEnd)return!1;for(let u=s;u<l;u++)if(!this.type.allowsMarks(a.child(u).marks))return!1;return!0}canReplaceWith(e,n,a,s){if(s&&!this.type.allowsMarks(s))return!1;let l=this.contentMatchAt(e).matchType(a),c=l&&l.matchFragment(this.content,n);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mark.none;for(let n=0;n<this.marks.length;n++){let a=this.marks[n];a.type.checkAttrs(a.attrs),e=a.addToSet(e)}if(!Mark.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let a;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");a=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,a)}let s=Fragment$1.fromJSON(e,n.content),l=e.nodeType(n.type).create(n.attrs,s,a);return l.type.checkAttrs(l.attrs),l}};Node$1.prototype.text=void 0;let TextNode$2=class Xt extends Node$1{constructor(e,n,a,s){if(super(e,n,null,s),!a)throw new RangeError("Empty text nodes are not allowed");this.text=a}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks$1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Xt(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Xt(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function wrapMarks$1(o,e){for(let n=o.length-1;n>=0;n--)e=o[n].type.name+"("+e+")";return e}class ContentMatch{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let a=new TokenStream(e,n);if(a.next==null)return ContentMatch.empty;let s=parseExpr(a);a.next&&a.err("Unexpected trailing text");let l=dfa(nfa(s));return checkForDeadEnds(l,a),l}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,a=e.childCount){let s=this;for(let l=n;s&&l<a;l++)s=s.matchType(e.child(l).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let a=0;a<e.next.length;a++)if(this.next[n].type==e.next[a].type)return!0;return!1}fillBefore(e,n=!1,a=0){let s=[this];function l(c,d){let u=c.matchFragment(e,a);if(u&&(!n||u.validEnd))return Fragment$1.from(d.map(f=>f.createAndFill()));for(let f=0;f<c.next.length;f++){let{type:p,next:_}=c.next[f];if(!(p.isText||p.hasRequiredAttrs())&&s.indexOf(_)==-1){s.push(_);let b=l(_,d.concat(p));if(b)return b}}return null}return l(this,[])}findWrapping(e){for(let a=0;a<this.wrapCache.length;a+=2)if(this.wrapCache[a]==e)return this.wrapCache[a+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),a=[{match:this,type:null,via:null}];for(;a.length;){let s=a.shift(),l=s.match;if(l.matchType(e)){let c=[];for(let d=s;d.type;d=d.via)c.push(d.type);return c.reverse()}for(let c=0;c<l.next.length;c++){let{type:d,next:u}=l.next[c];!d.isLeaf&&!d.hasRequiredAttrs()&&!(d.name in n)&&(!s.type||u.validEnd)&&(a.push({match:d.contentMatch,type:d,via:s}),n[d.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(a){e.push(a);for(let s=0;s<a.next.length;s++)e.indexOf(a.next[s].next)==-1&&n(a.next[s].next)}return n(this),e.map((a,s)=>{let l=s+(a.validEnd?"*":" ")+" ";for(let c=0;c<a.next.length;c++)l+=(c?", ":"")+a.next[c].type.name+"->"+e.indexOf(a.next[c].next);return l}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function parseExpr(o){let e=[];do e.push(parseExprSeq(o));while(o.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function parseExprSeq(o){let e=[];do e.push(parseExprSubscript(o));while(o.next&&o.next!=")"&&o.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function parseExprSubscript(o){let e=parseExprAtom(o);for(;;)if(o.eat("+"))e={type:"plus",expr:e};else if(o.eat("*"))e={type:"star",expr:e};else if(o.eat("?"))e={type:"opt",expr:e};else if(o.eat("{"))e=parseExprRange(o,e);else break;return e}function parseNum(o){/\D/.test(o.next)&&o.err("Expected number, got '"+o.next+"'");let e=Number(o.next);return o.pos++,e}function parseExprRange(o,e){let n=parseNum(o),a=n;return o.eat(",")&&(o.next!="}"?a=parseNum(o):a=-1),o.eat("}")||o.err("Unclosed braced range"),{type:"range",min:n,max:a,expr:e}}function resolveName(o,e){let n=o.nodeTypes,a=n[e];if(a)return[a];let s=[];for(let l in n){let c=n[l];c.isInGroup(e)&&s.push(c)}return s.length==0&&o.err("No node type or group '"+e+"' found"),s}function parseExprAtom(o){if(o.eat("(")){let e=parseExpr(o);return o.eat(")")||o.err("Missing closing paren"),e}else if(/\W/.test(o.next))o.err("Unexpected token '"+o.next+"'");else{let e=resolveName(o,o.next).map(n=>(o.inline==null?o.inline=n.isInline:o.inline!=n.isInline&&o.err("Mixing inline and block content"),{type:"name",value:n}));return o.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function nfa(o){let e=[[]];return s(l(o,0),n()),e;function n(){return e.push([])-1}function a(c,d,u){let f={term:u,to:d};return e[c].push(f),f}function s(c,d){c.forEach(u=>u.to=d)}function l(c,d){if(c.type=="choice")return c.exprs.reduce((u,f)=>u.concat(l(f,d)),[]);if(c.type=="seq")for(let u=0;;u++){let f=l(c.exprs[u],d);if(u==c.exprs.length-1)return f;s(f,d=n())}else if(c.type=="star"){let u=n();return a(d,u),s(l(c.expr,u),u),[a(u)]}else if(c.type=="plus"){let u=n();return s(l(c.expr,d),u),s(l(c.expr,u),u),[a(u)]}else{if(c.type=="opt")return[a(d)].concat(l(c.expr,d));if(c.type=="range"){let u=d;for(let f=0;f<c.min;f++){let p=n();s(l(c.expr,u),p),u=p}if(c.max==-1)s(l(c.expr,u),u);else for(let f=c.min;f<c.max;f++){let p=n();a(u,p),s(l(c.expr,u),p),u=p}return[a(u)]}else{if(c.type=="name")return[a(d,void 0,c.value)];throw new Error("Unknown expr type")}}}}function cmp(o,e){return e-o}function nullFrom(o,e){let n=[];return a(e),n.sort(cmp);function a(s){let l=o[s];if(l.length==1&&!l[0].term)return a(l[0].to);n.push(s);for(let c=0;c<l.length;c++){let{term:d,to:u}=l[c];!d&&n.indexOf(u)==-1&&a(u)}}}function dfa(o){let e=Object.create(null);return n(nullFrom(o,0));function n(a){let s=[];a.forEach(c=>{o[c].forEach(({term:d,to:u})=>{if(!d)return;let f;for(let p=0;p<s.length;p++)s[p][0]==d&&(f=s[p][1]);nullFrom(o,u).forEach(p=>{f||s.push([d,f=[]]),f.indexOf(p)==-1&&f.push(p)})})});let l=e[a.join(",")]=new ContentMatch(a.indexOf(o.length-1)>-1);for(let c=0;c<s.length;c++){let d=s[c][1].sort(cmp);l.next.push({type:s[c][0],next:e[d.join(",")]||n(d)})}return l}}function checkForDeadEnds(o,e){for(let n=0,a=[o];n<a.length;n++){let s=a[n],l=!s.validEnd,c=[];for(let d=0;d<s.next.length;d++){let{type:u,next:f}=s.next[d];c.push(u.name),l&&!(u.isText||u.hasRequiredAttrs())&&(l=!1),a.indexOf(f)==-1&&a.push(f)}l&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(o){let e=Object.create(null);for(let n in o){let a=o[n];if(!a.hasDefault)return null;e[n]=a.default}return e}function computeAttrs(o,e){let n=Object.create(null);for(let a in o){let s=e&&e[a];if(s===void 0){let l=o[a];if(l.hasDefault)s=l.default;else throw new RangeError("No value supplied for attribute "+a)}n[a]=s}return n}function checkAttrs(o,e,n,a){for(let s in e)if(!(s in o))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in o){let l=o[s];l.validate&&l.validate(e[s])}}function initAttrs(o,e){let n=Object.create(null);if(e)for(let a in e)n[a]=new Attribute(o,a,e[a]);return n}let NodeType$2=class rn{constructor(e,n,a){this.name=e,this.schema=n,this.spec=a,this.markSet=null,this.groups=a.group?a.group.split(" "):[],this.attrs=initAttrs(e,a.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(a.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,e)}create(e=null,n,a){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$1(this,this.computeAttrs(e),Fragment$1.from(n),Mark.setFrom(a))}createChecked(e=null,n,a){return n=Fragment$1.from(n),this.checkContent(n),new Node$1(this,this.computeAttrs(e),n,Mark.setFrom(a))}createAndFill(e=null,n,a){if(e=this.computeAttrs(e),n=Fragment$1.from(n),n.size){let c=this.contentMatch.fillBefore(n);if(!c)return null;n=c.append(n)}let s=this.contentMatch.matchFragment(n),l=s&&s.fillBefore(Fragment$1.empty,!0);return l?new Node$1(this,e,n.append(l),Mark.setFrom(a)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let a=0;a<e.childCount;a++)if(!this.allowsMarks(e.child(a).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){checkAttrs(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let a=0;a<e.length;a++)this.allowsMarkType(e[a].type)?n&&n.push(e[a]):n||(n=e.slice(0,a));return n?n.length?n:Mark.none:e}static compile(e,n){let a=Object.create(null);e.forEach((l,c)=>a[l]=new rn(l,n,c));let s=n.spec.topNode||"doc";if(!a[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!a.text)throw new RangeError("Every schema needs a 'text' type");for(let l in a.text.attrs)throw new RangeError("The text node type should not have attributes");return a}};function validateType(o,e,n){let a=n.split("|");return s=>{let l=s===null?"null":typeof s;if(a.indexOf(l)<0)throw new RangeError(`Expected value of type ${a} for attribute ${e} on type ${o}, got ${l}`)}}class Attribute{constructor(e,n,a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default,this.validate=typeof a.validate=="string"?validateType(e,n,a.validate):a.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(e,n,a,s){this.name=e,this.rank=n,this.schema=a,this.spec=s,this.attrs=initAttrs(e,s.attrs),this.excluded=null;let l=defaultAttrs(this.attrs);this.instance=l?new Mark(this,l):null}create(e=null){return!e&&this.instance?this.instance:new Mark(this,computeAttrs(this.attrs,e))}static compile(e,n){let a=Object.create(null),s=0;return e.forEach((l,c)=>a[l]=new MarkType(l,s++,n,c)),a}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){checkAttrs(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Schema{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=OrderedMap.from(e.nodes),n.marks=OrderedMap.from(e.marks||{}),this.nodes=NodeType$2.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let a=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let l=this.nodes[s],c=l.spec.content||"",d=l.spec.marks;if(l.contentMatch=a[c]||(a[c]=ContentMatch.parse(c,this.nodes)),l.inlineContent=l.contentMatch.inlineContent,l.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!l.isInline||!l.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=l}l.markSet=d=="_"?null:d?gatherMarks(this,d.split(" ")):d==""||!l.inlineContent?[]:null}for(let s in this.marks){let l=this.marks[s],c=l.spec.excludes;l.excluded=c==null?[l]:c==""?[]:gatherMarks(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,a,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof NodeType$2){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,a,s)}text(e,n){let a=this.nodes.text;return new TextNode$2(a,a.defaultAttrs,e,Mark.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Node$1.fromJSON(this,e)}markFromJSON(e){return Mark.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function gatherMarks(o,e){let n=[];for(let a=0;a<e.length;a++){let s=e[a],l=o.marks[s],c=l;if(l)n.push(l);else for(let d in o.marks){let u=o.marks[d];(s=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(s)>-1)&&n.push(c=u)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[a]+"'")}return n}function isTagRule(o){return o.tag!=null}function isStyleRule(o){return o.style!=null}let DOMParser$1=class en{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let a=this.matchedStyles=[];n.forEach(s=>{if(isTagRule(s))this.tags.push(s);else if(isStyleRule(s)){let l=/[^=]*/.exec(s.style)[0];a.indexOf(l)<0&&a.push(l),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let l=e.nodes[s.node];return l.contentMatch.matchType(l)})}parse(e,n={}){let a=new ParseContext$1(this,n,!1);return a.addAll(e,Mark.none,n.from,n.to),a.finish()}parseSlice(e,n={}){let a=new ParseContext$1(this,n,!0);return a.addAll(e,Mark.none,n.from,n.to),Slice.maxOpen(a.finish())}matchTag(e,n,a){for(let s=a?this.tags.indexOf(a)+1:0;s<this.tags.length;s++){let l=this.tags[s];if(matches(e,l.tag)&&(l.namespace===void 0||e.namespaceURI==l.namespace)&&(!l.context||n.matchesContext(l.context))){if(l.getAttrs){let c=l.getAttrs(e);if(c===!1)continue;l.attrs=c||void 0}return l}}}matchStyle(e,n,a,s){for(let l=s?this.styles.indexOf(s)+1:0;l<this.styles.length;l++){let c=this.styles[l],d=c.style;if(!(d.indexOf(e)!=0||c.context&&!a.matchesContext(c.context)||d.length>e.length&&(d.charCodeAt(e.length)!=61||d.slice(e.length+1)!=n))){if(c.getAttrs){let u=c.getAttrs(n);if(u===!1)continue;c.attrs=u||void 0}return c}}}static schemaRules(e){let n=[];function a(s){let l=s.priority==null?50:s.priority,c=0;for(;c<n.length;c++){let d=n[c];if((d.priority==null?50:d.priority)<l)break}n.splice(c,0,s)}for(let s in e.marks){let l=e.marks[s].spec.parseDOM;l&&l.forEach(c=>{a(c=copy(c)),c.mark||c.ignore||c.clearMark||(c.mark=s)})}for(let s in e.nodes){let l=e.nodes[s].spec.parseDOM;l&&l.forEach(c=>{a(c=copy(c)),c.node||c.ignore||c.mark||(c.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new en(e,en.schemaRules(e)))}};const blockTags$1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags$1={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(o,e,n){return e!=null?(e?OPT_PRESERVE_WS:0)|(e==="full"?OPT_PRESERVE_WS_FULL:0):o&&o.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:n&-5}class NodeContext{constructor(e,n,a,s,l,c){this.type=e,this.attrs=n,this.marks=a,this.solid=s,this.options=c,this.content=[],this.activeMarks=Mark.none,this.match=l||(c&OPT_OPEN_LEFT?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Fragment$1.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let a=this.type.contentMatch,s;return(s=a.findWrapping(e.type))?(this.match=a,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&OPT_PRESERVE_WS)){let a=this.content[this.content.length-1],s;if(a&&a.isText&&(s=/[ \t\r\n\u000c]+$/.exec(a.text))){let l=a;a.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=l.withText(l.text.slice(0,l.text.length-s[0].length))}}let n=Fragment$1.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Fragment$1.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!blockTags$1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}let ParseContext$1=class{constructor(e,n,a){this.parser=e,this.options=n,this.isOpen=a,this.open=0,this.localPreserveWS=!1;let s=n.topNode,l,c=wsOptionsFor(null,n.preserveWhitespace,0)|(a?OPT_OPEN_LEFT:0);s?l=new NodeContext(s.type,s.attrs,Mark.none,!0,n.topMatch||s.type.contentMatch,c):a?l=new NodeContext(null,null,Mark.none,!0,null,c):l=new NodeContext(e.schema.topNodeType,null,Mark.none,!0,null,c),this.nodes=[l],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let a=e.nodeValue,s=this.top,l=s.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(s.options&OPT_PRESERVE_WS)>0;if(l==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(a)){if(l)l!=="full"?a=a.replace(/\r?\n|\r/g," "):a=a.replace(/\r\n?/g,`
`);else if(a=a.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(a)&&this.open==this.nodes.length-1){let c=s.content[s.content.length-1],d=e.previousSibling;(!c||d&&d.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(a=a.slice(1))}a&&this.insertNode(this.parser.schema.text(a),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,a){let s=this.localPreserveWS,l=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),d;listTags.hasOwnProperty(c)&&this.parser.normalizeLists&&normalizeList(e);let u=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(d=this.parser.matchTag(e,this,a));e:if(u?u.ignore:ignoreTags$1.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(e=u.skip);let f,p=this.needsBlock;if(blockTags$1.hasOwnProperty(c))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),f=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let _=u&&u.skip?n:this.readStyles(e,n);_&&this.addAll(e,_),f&&this.sync(l),this.needsBlock=p}else{let f=this.readStyles(e,n);f&&this.addElementByRule(e,u,f,u.consuming===!1?d:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let a=e.style;if(a&&a.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let l=this.parser.matchedStyles[s],c=a.getPropertyValue(l);if(c)for(let d=void 0;;){let u=this.parser.matchStyle(l,c,this,d);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(f=>!u.clearMark(f)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)d=u;else break}}return n}addElementByRule(e,n,a,s){let l,c;if(n.node)if(c=this.parser.schema.nodes[n.node],c.isLeaf)this.insertNode(c.create(n.attrs),a)||this.leafFallback(e,a);else{let u=this.enter(c,n.attrs||null,a,n.preserveWhitespace);u&&(l=!0,a=u)}else{let u=this.parser.schema.marks[n.mark];a=a.concat(u.create(n.attrs))}let d=this.top;if(c&&c.isLeaf)this.findInside(e);else if(s)this.addElement(e,a,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(u=>this.insertNode(u,a));else{let u=e;typeof n.contentElement=="string"?u=e.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(e):n.contentElement&&(u=n.contentElement),this.findAround(e,u,!0),this.addAll(u,a),this.findAround(e,u,!1)}l&&this.sync(d)&&this.open--}addAll(e,n,a,s){let l=a||0;for(let c=a?e.childNodes[a]:e.firstChild,d=s==null?null:e.childNodes[s];c!=d;c=c.nextSibling,++l)this.findAtPoint(e,l),this.addDOM(c,n);this.findAtPoint(e,l)}findPlace(e,n){let a,s;for(let l=this.open;l>=0;l--){let c=this.nodes[l],d=c.findWrapping(e);if(d&&(!a||a.length>d.length)&&(a=d,s=c,!d.length)||c.solid)break}if(!a)return null;this.sync(s);for(let l=0;l<a.length;l++)n=this.enterInner(a[l],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let a=this.findPlace(e,n);if(a){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let l=Mark.none;for(let c of a.concat(e.marks))(s.type?s.type.allowsMarkType(c.type):markMayApply(c.type,e.type))&&(l=c.addToSet(l));return s.content.push(e.mark(l)),!0}return!1}enter(e,n,a,s){let l=this.findPlace(e.create(n),a);return l&&(l=this.enterInner(e,n,a,!0,s)),l}enterInner(e,n,a,s=!1,l){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let d=wsOptionsFor(e,l,c.options);c.options&OPT_OPEN_LEFT&&c.content.length==0&&(d|=OPT_OPEN_LEFT);let u=Mark.none;return a=a.filter(f=>(c.type?c.type.allowsMarkType(f.type):markMayApply(f.type,e))?(u=f.addToSet(u),!1):!0),this.nodes.push(new NodeContext(e,n,u,s,null,d)),this.open++,a}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let a=this.nodes[n].content;for(let s=a.length-1;s>=0;s--)e+=a[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let a=0;a<this.find.length;a++)this.find[a].node==e&&this.find[a].offset==n&&(this.find[a].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,a){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(a?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),a=this.options.context,s=!this.isOpen&&(!a||a.parent.type==this.nodes[0].type),l=-(a?a.depth+1:0)+(s?0:1),c=(d,u)=>{for(;d>=0;d--){let f=n[d];if(f==""){if(d==n.length-1||d==0)continue;for(;u>=l;u--)if(c(d-1,u))return!0;return!1}else{let p=u>0||u==0&&s?this.nodes[u].type:a&&u>=l?a.node(u-l).type:null;if(!p||p.name!=f&&!p.isInGroup(f))return!1;u--}}return!0};return c(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let a=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(a&&a.isTextblock&&a.defaultAttrs)return a}for(let n in this.parser.schema.nodes){let a=this.parser.schema.nodes[n];if(a.isTextblock&&a.defaultAttrs)return a}}};function normalizeList(o){for(let e=o.firstChild,n=null;e;e=e.nextSibling){let a=e.nodeType==1?e.nodeName.toLowerCase():null;a&&listTags.hasOwnProperty(a)&&n?(n.appendChild(e),e=n):a=="li"?n=e:a&&(n=null)}}function matches(o,e){return(o.matches||o.msMatchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector).call(o,e)}function copy(o){let e={};for(let n in o)e[n]=o[n];return e}function markMayApply(o,e){let n=e.schema.nodes;for(let a in n){let s=n[a];if(!s.allowsMarkType(o))continue;let l=[],c=d=>{l.push(d);for(let u=0;u<d.edgeCount;u++){let{type:f,next:p}=d.edge(u);if(f==e||l.indexOf(p)<0&&c(p))return!0}};if(c(s.contentMatch))return!0}}class DOMSerializer{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},a){a||(a=doc$2(n).createDocumentFragment());let s=a,l=[];return e.forEach(c=>{if(l.length||c.marks.length){let d=0,u=0;for(;d<l.length&&u<c.marks.length;){let f=c.marks[u];if(!this.marks[f.type.name]){u++;continue}if(!f.eq(l[d][0])||f.type.spec.spanning===!1)break;d++,u++}for(;d<l.length;)s=l.pop()[1];for(;u<c.marks.length;){let f=c.marks[u++],p=this.serializeMark(f,c.isInline,n);p&&(l.push([f,s]),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(this.serializeNodeInner(c,n))}),a}serializeNodeInner(e,n){let{dom:a,contentDOM:s}=renderSpec(doc$2(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return a}serializeNode(e,n={}){let a=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let l=this.serializeMark(e.marks[s],e.isInline,n);l&&((l.contentDOM||l.dom).appendChild(a),a=l.dom)}return a}serializeMark(e,n,a={}){let s=this.marks[e.type.name];return s&&renderSpec(doc$2(a),s(e,n),null,e.attrs)}static renderSpec(e,n,a=null,s){return renderSpec(e,n,a,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=gatherToDOM(e.nodes);return n.text||(n.text=a=>a.text),n}static marksFromSchema(e){return gatherToDOM(e.marks)}}function gatherToDOM(o){let e={};for(let n in o){let a=o[n].spec.toDOM;a&&(e[n]=a)}return e}function doc$2(o){return o.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(o){let e=suspiciousAttributeCache.get(o);return e===void 0&&suspiciousAttributeCache.set(o,e=suspiciousAttributesInner(o)),e}function suspiciousAttributesInner(o){let e=null;function n(a){if(a&&typeof a=="object")if(Array.isArray(a))if(typeof a[0]=="string")e||(e=[]),e.push(a);else for(let s=0;s<a.length;s++)n(a[s]);else for(let s in a)n(a[s])}return n(o),e}function renderSpec(o,e,n,a){if(typeof e=="string")return{dom:o.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],l;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(a&&(l=suspiciousAttributes(a))&&l.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=s.indexOf(" ");c>0&&(n=s.slice(0,c),s=s.slice(c+1));let d,u=n?o.createElementNS(n,s):o.createElement(s),f=e[1],p=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){p=2;for(let _ in f)if(f[_]!=null){let b=_.indexOf(" ");b>0?u.setAttributeNS(_.slice(0,b),_.slice(b+1),f[_]):u.setAttribute(_,f[_])}}for(let _=p;_<e.length;_++){let b=e[_];if(b===0){if(_<e.length-1||_>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:v,contentDOM:k}=renderSpec(o,b,n,a);if(u.appendChild(v),k){if(d)throw new RangeError("Multiple content holes");d=k}}}return{dom:u,contentDOM:d}}function makeMap(o){const e=Object.create(null);for(const n of o.split(","))e[n]=1;return n=>n in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},isOn=o=>o.charCodeAt(0)===111&&o.charCodeAt(1)===110&&(o.charCodeAt(2)>122||o.charCodeAt(2)<97),extend$1=Object.assign,remove$1=(o,e)=>{const n=o.indexOf(e);n>-1&&o.splice(n,1)},hasOwnProperty$3=Object.prototype.hasOwnProperty,hasOwn$1=(o,e)=>hasOwnProperty$3.call(o,e),isArray$3=Array.isArray,isMap=o=>toTypeString$1(o)==="[object Map]",isSet=o=>toTypeString$1(o)==="[object Set]",isDate$2=o=>toTypeString$1(o)==="[object Date]",isFunction$2=o=>typeof o=="function",isString$2=o=>typeof o=="string",isSymbol=o=>typeof o=="symbol",isObject$3=o=>o!==null&&typeof o=="object",isPromise$1=o=>(isObject$3(o)||isFunction$2(o))&&isFunction$2(o.then)&&isFunction$2(o.catch),objectToString$1=Object.prototype.toString,toTypeString$1=o=>objectToString$1.call(o),toRawType=o=>toTypeString$1(o).slice(8,-1),isPlainObject$2=o=>toTypeString$1(o)==="[object Object]",isIntegerKey=o=>isString$2(o)&&o!=="NaN"&&o[0]!=="-"&&""+parseInt(o,10)===o,cacheStringFunction=o=>{const e=Object.create(null);return n=>e[n]||(e[n]=o(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(o=>o.replace(camelizeRE,(e,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate$1=cacheStringFunction(o=>o.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(o=>o.charAt(0).toUpperCase()+o.slice(1)),toHandlerKey=cacheStringFunction(o=>o?`on${capitalize$1(o)}`:""),hasChanged=(o,e)=>!Object.is(o,e),invokeArrayFns=(o,...e)=>{for(let n=0;n<o.length;n++)o[n](...e)},def=(o,e,n,a=!1)=>{Object.defineProperty(o,e,{configurable:!0,enumerable:!1,writable:a,value:n})},looseToNumber=o=>{const e=parseFloat(o);return isNaN(e)?o:e},toNumber=o=>{const e=isString$2(o)?Number(o):NaN;return isNaN(e)?o:e};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(o){if(isArray$3(o)){const e={};for(let n=0;n<o.length;n++){const a=o[n],s=isString$2(a)?parseStringStyle(a):normalizeStyle(a);if(s)for(const l in s)e[l]=s[l]}return e}else if(isString$2(o)||isObject$3(o))return o}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(o){const e={};return o.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const a=n.split(propertyDelimiterRE);a.length>1&&(e[a[0].trim()]=a[1].trim())}}),e}function normalizeClass(o){let e="";if(isString$2(o))e=o;else if(isArray$3(o))for(let n=0;n<o.length;n++){const a=normalizeClass(o[n]);a&&(e+=a+" ")}else if(isObject$3(o))for(const n in o)o[n]&&(e+=n+" ");return e.trim()}function normalizeProps(o){if(!o)return null;let{class:e,style:n}=o;return e&&!isString$2(e)&&(o.class=normalizeClass(e)),n&&(o.style=normalizeStyle(n)),o}function looseCompareArrays(o,e){if(o.length!==e.length)return!1;let n=!0;for(let a=0;n&&a<o.length;a++)n=looseEqual(o[a],e[a]);return n}function looseEqual(o,e){if(o===e)return!0;let n=isDate$2(o),a=isDate$2(e);if(n||a)return n&&a?o.getTime()===e.getTime():!1;if(n=isSymbol(o),a=isSymbol(e),n||a)return o===e;if(n=isArray$3(o),a=isArray$3(e),n||a)return n&&a?looseCompareArrays(o,e):!1;if(n=isObject$3(o),a=isObject$3(e),n||a){if(!n||!a)return!1;const s=Object.keys(o).length,l=Object.keys(e).length;if(s!==l)return!1;for(const c in o){const d=o.hasOwnProperty(c),u=e.hasOwnProperty(c);if(d&&!u||!d&&u||!looseEqual(o[c],e[c]))return!1}}return String(o)===String(e)}function looseIndexOf(o,e){return o.findIndex(n=>looseEqual(n,e))}const isRef$1=o=>!!(o&&o.__v_isRef===!0),toDisplayString$1=o=>isString$2(o)?o:o==null?"":isArray$3(o)||isObject$3(o)&&(o.toString===objectToString$1||!isFunction$2(o.toString))?isRef$1(o)?toDisplayString$1(o.value):JSON.stringify(o,replacer,2):String(o),replacer=(o,e)=>isRef$1(e)?replacer(o,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[a,s],l)=>(n[stringifySymbol(a,l)+" =>"]=s,n),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>stringifySymbol(n))}:isSymbol(e)?stringifySymbol(e):isObject$3(e)&&!isArray$3(e)&&!isPlainObject$2(e)?String(e):e,stringifySymbol=(o,e="")=>{var n;return isSymbol(o)?`Symbol(${(n=o.description)!=null?n:e})`:o};let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){this._active=!1;let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(this.effects.length=0,n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function effectScope(o){return new EffectScope(o)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(o,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(o)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,n=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(o,e=!1){if(o.flags|=8,e){o.next=batchedComputed,batchedComputed=o;return}o.next=batchedSub,batchedSub=o}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let o;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(a){o||(o=a)}e=n}}if(o)throw o}function prepareDeps(o){for(let e=o.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(o){let e,n=o.depsTail,a=n;for(;a;){const s=a.prevDep;a.version===-1?(a===n&&(n=s),removeSub(a),removeDep(a)):e=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=s}o.deps=e,o.depsTail=n}function isDirty(o){for(let e=o.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!o._dirty}function refreshComputed(o){if(o.flags&4&&!(o.flags&16)||(o.flags&=-17,o.globalVersion===globalVersion))return;o.globalVersion=globalVersion;const e=o.dep;if(o.flags|=2,e.version>0&&!o.isSSR&&o.deps&&!isDirty(o)){o.flags&=-3;return}const n=activeSub,a=shouldTrack;activeSub=o,shouldTrack=!0;try{prepareDeps(o);const s=o.fn(o._value);(e.version===0||hasChanged(s,o._value))&&(o._value=s,e.version++)}catch(s){throw e.version++,s}finally{activeSub=n,shouldTrack=a,cleanupDeps(o),o.flags&=-3}}function removeSub(o,e=!1){const{dep:n,prevSub:a,nextSub:s}=o;if(a&&(a.nextSub=s,o.prevSub=void 0),s&&(s.prevSub=a,o.nextSub=void 0),n.subs===o&&(n.subs=a,!a&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)removeSub(l,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function removeDep(o){const{prevDep:e,nextDep:n}=o;e&&(e.nextDep=n,o.prevDep=void 0),n&&(n.prevDep=e,o.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const o=trackStack.pop();shouldTrack=o===void 0?!0:o}function cleanupEffect(o){const{cleanup:e}=o;if(o.cleanup=void 0,e){const n=activeSub;activeSub=void 0;try{e()}finally{activeSub=n}}}let globalVersion=0,Link$1=class{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==activeSub)n=this.activeLink=new Link$1(activeSub,this),activeSub.deps?(n.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=n,activeSub.depsTail=n):activeSub.deps=activeSub.depsTail=n,addSub(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const a=n.nextDep;a.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=a),n.prevDep=activeSub.depsTail,n.nextDep=void 0,activeSub.depsTail.nextDep=n,activeSub.depsTail=n,activeSub.deps===n&&(activeSub.deps=a)}return n}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{endBatch()}}}function addSub(o){if(o.dep.sc++,o.sub.flags&4){const e=o.dep.computed;if(e&&!o.dep.subs){e.flags|=20;for(let a=e.deps;a;a=a.nextDep)addSub(a)}const n=o.dep.subs;n!==o&&(o.prevSub=n,n&&(n.nextSub=o)),o.dep.subs=o}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(o,e,n){if(shouldTrack&&activeSub){let a=targetMap.get(o);a||targetMap.set(o,a=new Map);let s=a.get(n);s||(a.set(n,s=new Dep),s.map=a,s.key=n),s.track()}}function trigger(o,e,n,a,s,l){const c=targetMap.get(o);if(!c){globalVersion++;return}const d=u=>{u&&u.trigger()};if(startBatch(),e==="clear")c.forEach(d);else{const u=isArray$3(o),f=u&&isIntegerKey(n);if(u&&n==="length"){const p=Number(a);c.forEach((_,b)=>{(b==="length"||b===ARRAY_ITERATE_KEY||!isSymbol(b)&&b>=p)&&d(_)})}else switch((n!==void 0||c.has(void 0))&&d(c.get(n)),f&&d(c.get(ARRAY_ITERATE_KEY)),e){case"add":u?f&&d(c.get("length")):(d(c.get(ITERATE_KEY)),isMap(o)&&d(c.get(MAP_KEY_ITERATE_KEY)));break;case"delete":u||(d(c.get(ITERATE_KEY)),isMap(o)&&d(c.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(o)&&d(c.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(o,e){const n=targetMap.get(o);return n&&n.get(e)}function reactiveReadArray(o){const e=toRaw(o);return e===o?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(o)?e:e.map(toReactive))}function shallowReadArray(o){return track(o=toRaw(o),"iterate",ARRAY_ITERATE_KEY),o}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...o){return reactiveReadArray(this).concat(...o.map(e=>isArray$3(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",o=>(o[1]=toReactive(o[1]),o))},every(o,e){return apply$1(this,"every",o,e,void 0,arguments)},filter(o,e){return apply$1(this,"filter",o,e,n=>n.map(toReactive),arguments)},find(o,e){return apply$1(this,"find",o,e,toReactive,arguments)},findIndex(o,e){return apply$1(this,"findIndex",o,e,void 0,arguments)},findLast(o,e){return apply$1(this,"findLast",o,e,toReactive,arguments)},findLastIndex(o,e){return apply$1(this,"findLastIndex",o,e,void 0,arguments)},forEach(o,e){return apply$1(this,"forEach",o,e,void 0,arguments)},includes(...o){return searchProxy(this,"includes",o)},indexOf(...o){return searchProxy(this,"indexOf",o)},join(o){return reactiveReadArray(this).join(o)},lastIndexOf(...o){return searchProxy(this,"lastIndexOf",o)},map(o,e){return apply$1(this,"map",o,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...o){return noTracking(this,"push",o)},reduce(o,...e){return reduce(this,"reduce",o,e)},reduceRight(o,...e){return reduce(this,"reduceRight",o,e)},shift(){return noTracking(this,"shift")},some(o,e){return apply$1(this,"some",o,e,void 0,arguments)},splice(...o){return noTracking(this,"splice",o)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(o){return reactiveReadArray(this).toSorted(o)},toSpliced(...o){return reactiveReadArray(this).toSpliced(...o)},unshift(...o){return noTracking(this,"unshift",o)},values(){return iterator(this,"values",toReactive)}};function iterator(o,e,n){const a=shallowReadArray(o),s=a[e]();return a!==o&&!isShallow(o)&&(s._next=s.next,s.next=()=>{const l=s._next();return l.value&&(l.value=n(l.value)),l}),s}const arrayProto=Array.prototype;function apply$1(o,e,n,a,s,l){const c=shallowReadArray(o),d=c!==o&&!isShallow(o),u=c[e];if(u!==arrayProto[e]){const _=u.apply(o,l);return d?toReactive(_):_}let f=n;c!==o&&(d?f=function(_,b){return n.call(this,toReactive(_),b,o)}:n.length>2&&(f=function(_,b){return n.call(this,_,b,o)}));const p=u.call(c,f,a);return d&&s?s(p):p}function reduce(o,e,n,a){const s=shallowReadArray(o);let l=n;return s!==o&&(isShallow(o)?n.length>3&&(l=function(c,d,u){return n.call(this,c,d,u,o)}):l=function(c,d,u){return n.call(this,c,toReactive(d),u,o)}),s[e](l,...a)}function searchProxy(o,e,n){const a=toRaw(o);track(a,"iterate",ARRAY_ITERATE_KEY);const s=a[e](...n);return(s===-1||s===!1)&&isProxy(n[0])?(n[0]=toRaw(n[0]),a[e](...n)):s}function noTracking(o,e,n=[]){pauseTracking(),startBatch();const a=toRaw(o)[e].apply(o,n);return endBatch(),resetTracking(),a}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(o=>o!=="arguments"&&o!=="caller").map(o=>Symbol[o]).filter(isSymbol));function hasOwnProperty$2(o){isSymbol(o)||(o=String(o));const e=toRaw(this);return track(e,"has",o),e.hasOwnProperty(o)}class BaseReactiveHandler{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,a){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return l;if(n==="__v_raw")return a===(s?l?shallowReadonlyMap:readonlyMap:l?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(a)?e:void 0;const c=isArray$3(e);if(!s){let u;if(c&&(u=arrayInstrumentations[n]))return u;if(n==="hasOwnProperty")return hasOwnProperty$2}const d=Reflect.get(e,n,isRef(e)?e:a);return(isSymbol(n)?builtInSymbols.has(n):isNonTrackableKeys(n))||(s||track(e,"get",n),l)?d:isRef(d)?c&&isIntegerKey(n)?d:d.value:isObject$3(d)?s?readonly(d):reactive(d):d}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,n,a,s){let l=e[n];if(!this._isShallow){const u=isReadonly(l);if(!isShallow(a)&&!isReadonly(a)&&(l=toRaw(l),a=toRaw(a)),!isArray$3(e)&&isRef(l)&&!isRef(a))return u?!1:(l.value=a,!0)}const c=isArray$3(e)&&isIntegerKey(n)?Number(n)<e.length:hasOwn$1(e,n),d=Reflect.set(e,n,a,isRef(e)?e:s);return e===toRaw(s)&&(c?hasChanged(a,l)&&trigger(e,"set",n,a):trigger(e,"add",n,a)),d}deleteProperty(e,n){const a=hasOwn$1(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&a&&trigger(e,"delete",n,void 0),s}has(e,n){const a=Reflect.has(e,n);return(!isSymbol(n)||!builtInSymbols.has(n))&&track(e,"has",n),a}ownKeys(e){return track(e,"iterate",isArray$3(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=o=>o,getProto=o=>Reflect.getPrototypeOf(o);function createIterableMethod(o,e,n){return function(...a){const s=this.__v_raw,l=toRaw(s),c=isMap(l),d=o==="entries"||o===Symbol.iterator&&c,u=o==="keys"&&c,f=s[o](...a),p=n?toShallow:e?toReadonly:toReactive;return!e&&track(l,"iterate",u?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:_,done:b}=f.next();return b?{value:_,done:b}:{value:d?[p(_[0]),p(_[1])]:p(_),done:b}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(o){return function(...e){return o==="delete"?!1:o==="clear"?void 0:this}}function createInstrumentations(o,e){const n={get(s){const l=this.__v_raw,c=toRaw(l),d=toRaw(s);o||(hasChanged(s,d)&&track(c,"get",s),track(c,"get",d));const{has:u}=getProto(c),f=e?toShallow:o?toReadonly:toReactive;if(u.call(c,s))return f(l.get(s));if(u.call(c,d))return f(l.get(d));l!==c&&l.get(s)},get size(){const s=this.__v_raw;return!o&&track(toRaw(s),"iterate",ITERATE_KEY),Reflect.get(s,"size",s)},has(s){const l=this.__v_raw,c=toRaw(l),d=toRaw(s);return o||(hasChanged(s,d)&&track(c,"has",s),track(c,"has",d)),s===d?l.has(s):l.has(s)||l.has(d)},forEach(s,l){const c=this,d=c.__v_raw,u=toRaw(d),f=e?toShallow:o?toReadonly:toReactive;return!o&&track(u,"iterate",ITERATE_KEY),d.forEach((p,_)=>s.call(l,f(p),f(_),c))}};return extend$1(n,o?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(s){!e&&!isShallow(s)&&!isReadonly(s)&&(s=toRaw(s));const l=toRaw(this);return getProto(l).has.call(l,s)||(l.add(s),trigger(l,"add",s,s)),this},set(s,l){!e&&!isShallow(l)&&!isReadonly(l)&&(l=toRaw(l));const c=toRaw(this),{has:d,get:u}=getProto(c);let f=d.call(c,s);f||(s=toRaw(s),f=d.call(c,s));const p=u.call(c,s);return c.set(s,l),f?hasChanged(l,p)&&trigger(c,"set",s,l):trigger(c,"add",s,l),this},delete(s){const l=toRaw(this),{has:c,get:d}=getProto(l);let u=c.call(l,s);u||(s=toRaw(s),u=c.call(l,s)),d&&d.call(l,s);const f=l.delete(s);return u&&trigger(l,"delete",s,void 0),f},clear(){const s=toRaw(this),l=s.size!==0,c=s.clear();return l&&trigger(s,"clear",void 0,void 0),c}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=createIterableMethod(s,o,e)}),n}function createInstrumentationGetter(o,e){const n=createInstrumentations(o,e);return(a,s,l)=>s==="__v_isReactive"?!o:s==="__v_isReadonly"?o:s==="__v_raw"?a:Reflect.get(hasOwn$1(n,s)&&s in a?n:a,s,l)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(o){switch(o){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(o){return o.__v_skip||!Object.isExtensible(o)?0:targetTypeMap(toRawType(o))}function reactive(o){return isReadonly(o)?o:createReactiveObject(o,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(o){return createReactiveObject(o,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(o){return createReactiveObject(o,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(o){return createReactiveObject(o,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(o,e,n,a,s){if(!isObject$3(o)||o.__v_raw&&!(e&&o.__v_isReactive))return o;const l=s.get(o);if(l)return l;const c=getTargetType(o);if(c===0)return o;const d=new Proxy(o,c===2?a:n);return s.set(o,d),d}function isReactive(o){return isReadonly(o)?isReactive(o.__v_raw):!!(o&&o.__v_isReactive)}function isReadonly(o){return!!(o&&o.__v_isReadonly)}function isShallow(o){return!!(o&&o.__v_isShallow)}function isProxy(o){return o?!!o.__v_raw:!1}function toRaw(o){const e=o&&o.__v_raw;return e?toRaw(e):o}function markRaw(o){return!hasOwn$1(o,"__v_skip")&&Object.isExtensible(o)&&def(o,"__v_skip",!0),o}const toReactive=o=>isObject$3(o)?reactive(o):o,toReadonly=o=>isObject$3(o)?readonly(o):o;function isRef(o){return o?o.__v_isRef===!0:!1}function ref(o){return createRef(o,!1)}function shallowRef(o){return createRef(o,!0)}function createRef(o,e){return isRef(o)?o:new RefImpl(o,e)}class RefImpl{constructor(e,n){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,a=this.__v_isShallow||isShallow(e)||isReadonly(e);e=a?e:toRaw(e),hasChanged(e,n)&&(this._rawValue=e,this._value=a?e:toReactive(e),this.dep.trigger())}}function unref(o){return isRef(o)?o.value:o}function toValue$2(o){return isFunction$2(o)?o():unref(o)}const shallowUnwrapHandlers={get:(o,e,n)=>e==="__v_raw"?o:unref(Reflect.get(o,e,n)),set:(o,e,n,a)=>{const s=o[e];return isRef(s)&&!isRef(n)?(s.value=n,!0):Reflect.set(o,e,n,a)}};function proxyRefs(o){return isReactive(o)?o:new Proxy(o,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Dep,{get:a,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=a,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function customRef(o){return new CustomRefImpl(o)}function toRefs(o){const e=isArray$3(o)?new Array(o.length):{};for(const n in o)e[n]=propertyToRef(o,n);return e}class ObjectRefImpl{constructor(e,n,a){this._object=e,this._key=n,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef$1(o,e,n){return isRef(o)?o:isFunction$2(o)?new GetterRefImpl(o):isObject$3(o)&&arguments.length>1?propertyToRef(o,e,n):ref(o)}function propertyToRef(o,e,n){const a=o[e];return isRef(a)?a:new ObjectRefImpl(o,e,n)}class ComputedRefImpl{constructor(e,n,a){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(o,e,n=!1){let a,s;return isFunction$2(o)?a=o:(a=o.get,s=o.set),new ComputedRefImpl(a,s,n)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(o,e=!1,n=activeWatcher){if(n){let a=cleanupMap.get(n);a||cleanupMap.set(n,a=[]),a.push(o)}}function watch$1(o,e,n=EMPTY_OBJ){const{immediate:a,deep:s,once:l,scheduler:c,augmentJob:d,call:u}=n,f=B=>s?B:isShallow(B)||s===!1||s===0?traverse(B,1):traverse(B);let p,_,b,v,k=!1,x=!1;if(isRef(o)?(_=()=>o.value,k=isShallow(o)):isReactive(o)?(_=()=>f(o),k=!0):isArray$3(o)?(x=!0,k=o.some(B=>isReactive(B)||isShallow(B)),_=()=>o.map(B=>{if(isRef(B))return B.value;if(isReactive(B))return f(B);if(isFunction$2(B))return u?u(B,2):B()})):isFunction$2(o)?e?_=u?()=>u(o,2):o:_=()=>{if(b){pauseTracking();try{b()}finally{resetTracking()}}const B=activeWatcher;activeWatcher=p;try{return u?u(o,3,[v]):o(v)}finally{activeWatcher=B}}:_=NOOP,e&&s){const B=_,F=s===!0?1/0:s;_=()=>traverse(B(),F)}const M=getCurrentScope(),E=()=>{p.stop(),M&&M.active&&remove$1(M.effects,p)};if(l&&e){const B=e;e=(...F)=>{B(...F),E()}}let L=x?new Array(o.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const V=B=>{if(!(!(p.flags&1)||!p.dirty&&!B))if(e){const F=p.run();if(s||k||(x?F.some((j,I)=>hasChanged(j,L[I])):hasChanged(F,L))){b&&b();const j=activeWatcher;activeWatcher=p;try{const I=[F,L===INITIAL_WATCHER_VALUE?void 0:x&&L[0]===INITIAL_WATCHER_VALUE?[]:L,v];u?u(e,3,I):e(...I),L=F}finally{activeWatcher=j}}}else p.run()};return d&&d(V),p=new ReactiveEffect(_),p.scheduler=c?()=>c(V,!1):V,v=B=>onWatcherCleanup(B,!1,p),b=p.onStop=()=>{const B=cleanupMap.get(p);if(B){if(u)u(B,4);else for(const F of B)F();cleanupMap.delete(p)}},e?a?V(!0):L=p.run():c?c(V.bind(null,!0),!0):p.run(),E.pause=p.pause.bind(p),E.resume=p.resume.bind(p),E.stop=E,E}function traverse(o,e=1/0,n){if(e<=0||!isObject$3(o)||o.__v_skip||(n=n||new Set,n.has(o)))return o;if(n.add(o),e--,isRef(o))traverse(o.value,e,n);else if(isArray$3(o))for(let a=0;a<o.length;a++)traverse(o[a],e,n);else if(isSet(o)||isMap(o))o.forEach(a=>{traverse(a,e,n)});else if(isPlainObject$2(o)){for(const a in o)traverse(o[a],e,n);for(const a of Object.getOwnPropertySymbols(o))Object.prototype.propertyIsEnumerable.call(o,a)&&traverse(o[a],e,n)}return o}function callWithErrorHandling(o,e,n,a){try{return a?o(...a):o()}catch(s){handleError(s,e,n)}}function callWithAsyncErrorHandling(o,e,n,a){if(isFunction$2(o)){const s=callWithErrorHandling(o,e,n,a);return s&&isPromise$1(s)&&s.catch(l=>{handleError(l,e,n)}),s}if(isArray$3(o)){const s=[];for(let l=0;l<o.length;l++)s.push(callWithAsyncErrorHandling(o[l],e,n,a));return s}}function handleError(o,e,n,a=!0){const s=e?e.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:c}=e&&e.appContext.config||EMPTY_OBJ;if(e){let d=e.parent;const u=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;d;){const p=d.ec;if(p){for(let _=0;_<p.length;_++)if(p[_](o,u,f)===!1)return}d=d.parent}if(l){pauseTracking(),callWithErrorHandling(l,null,10,[o,u,f]),resetTracking();return}}logError(o,n,s,a,c)}function logError(o,e,n,a=!0,s=!1){if(s)throw o;console.error(o)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(o){const e=currentFlushPromise||resolvedPromise;return o?e.then(this?o.bind(this):o):e}function findInsertionIndex$1(o){let e=flushIndex+1,n=queue.length;for(;e<n;){const a=e+n>>>1,s=queue[a],l=getId(s);l<o||l===o&&s.flags&2?e=a+1:n=a}return e}function queueJob(o){if(!(o.flags&1)){const e=getId(o),n=queue[queue.length-1];!n||!(o.flags&2)&&e>=getId(n)?queue.push(o):queue.splice(findInsertionIndex$1(e),0,o),o.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(o){isArray$3(o)?pendingPostFlushCbs.push(...o):activePostFlushCbs&&o.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,o):o.flags&1||(pendingPostFlushCbs.push(o),o.flags|=1),queueFlush()}function flushPostFlushCbs(o){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((n,a)=>getId(n)-getId(a));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const n=activePostFlushCbs[postFlushIndex];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=o=>o.id==null?o.flags&2?-1:1/0:o.id;function flushJobs(o){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(o){const e=currentRenderingInstance;return currentRenderingInstance=o,currentScopeId=o&&o.type.__scopeId||null,e}function withCtx(o,e=currentRenderingInstance,n){if(!e||o._n)return o;const a=(...s)=>{a._d&&setBlockTracking(-1);const l=setCurrentRenderingInstance(e);let c;try{c=o(...s)}finally{setCurrentRenderingInstance(l),a._d&&setBlockTracking(1)}return c};return a._n=!0,a._c=!0,a._d=!0,a}function withDirectives(o,e){if(currentRenderingInstance===null)return o;const n=getComponentPublicInstance(currentRenderingInstance),a=o.dirs||(o.dirs=[]);for(let s=0;s<e.length;s++){let[l,c,d,u=EMPTY_OBJ]=e[s];l&&(isFunction$2(l)&&(l={mounted:l,updated:l}),l.deep&&traverse(c),a.push({dir:l,instance:n,value:c,oldValue:void 0,arg:d,modifiers:u}))}return o}const TeleportEndKey=Symbol("_vte"),isTeleport=o=>o.__isTeleport,isTeleportDisabled=o=>o&&(o.disabled||o.disabled===""),isTeleportDeferred=o=>o&&(o.defer||o.defer===""),isTargetSVG=o=>typeof SVGElement<"u"&&o instanceof SVGElement,isTargetMathML=o=>typeof MathMLElement=="function"&&o instanceof MathMLElement,resolveTarget=(o,e)=>{const n=o&&o.to;return isString$2(n)?e?e(n):null:n},TeleportImpl={name:"Teleport",__isTeleport:!0,process(o,e,n,a,s,l,c,d,u,f){const{mc:p,pc:_,pbc:b,o:{insert:v,querySelector:k,createText:x,createComment:M}}=f,E=isTeleportDisabled(e.props);let{shapeFlag:L,children:V,dynamicChildren:B}=e;if(o==null){const F=e.el=x(""),j=e.anchor=x("");v(F,n,a),v(j,n,a);const I=(W,K)=>{L&16&&(s&&s.isCE&&(s.ce._teleportTarget=W),p(V,W,K,s,l,c,d,u))},U=()=>{const W=e.target=resolveTarget(e.props,k),K=prepareAnchor(W,e,x,v);W&&(c!=="svg"&&isTargetSVG(W)?c="svg":c!=="mathml"&&isTargetMathML(W)&&(c="mathml"),E||(I(W,K),updateCssVars(e,!1)))};E&&(I(n,j),updateCssVars(e,!0)),isTeleportDeferred(e.props)?queuePostRenderEffect(()=>{U(),e.el.__isMounted=!0},l):U()}else{if(isTeleportDeferred(e.props)&&!o.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(o,e,n,a,s,l,c,d,u,f),delete o.el.__isMounted},l);return}e.el=o.el,e.targetStart=o.targetStart;const F=e.anchor=o.anchor,j=e.target=o.target,I=e.targetAnchor=o.targetAnchor,U=isTeleportDisabled(o.props),W=U?n:j,K=U?F:I;if(c==="svg"||isTargetSVG(j)?c="svg":(c==="mathml"||isTargetMathML(j))&&(c="mathml"),B?(b(o.dynamicChildren,B,W,s,l,c,d),traverseStaticChildren(o,e,!0)):u||_(o,e,W,K,s,l,c,d,!1),E)U?e.props&&o.props&&e.props.to!==o.props.to&&(e.props.to=o.props.to):moveTeleport(e,n,F,f,1);else if((e.props&&e.props.to)!==(o.props&&o.props.to)){const G=e.target=resolveTarget(e.props,k);G&&moveTeleport(e,G,null,f,0)}else U&&moveTeleport(e,j,I,f,1);updateCssVars(e,E)}},remove(o,e,n,{um:a,o:{remove:s}},l){const{shapeFlag:c,children:d,anchor:u,targetStart:f,targetAnchor:p,target:_,props:b}=o;if(_&&(s(f),s(p)),l&&s(u),c&16){const v=l||!isTeleportDisabled(b);for(let k=0;k<d.length;k++){const x=d[k];a(x,e,n,v,!!x.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(o,e,n,{o:{insert:a},m:s},l=2){l===0&&a(o.targetAnchor,e,n);const{el:c,anchor:d,shapeFlag:u,children:f,props:p}=o,_=l===2;if(_&&a(c,e,n),(!_||isTeleportDisabled(p))&&u&16)for(let b=0;b<f.length;b++)s(f[b],e,n,2);_&&a(d,e,n)}function hydrateTeleport(o,e,n,a,s,l,{o:{nextSibling:c,parentNode:d,querySelector:u,insert:f,createText:p}},_){const b=e.target=resolveTarget(e.props,u);if(b){const v=isTeleportDisabled(e.props),k=b._lpa||b.firstChild;if(e.shapeFlag&16)if(v)e.anchor=_(c(o),e,d(o),n,a,s,l),e.targetStart=k,e.targetAnchor=k&&c(k);else{e.anchor=c(o);let x=k;for(;x;){if(x&&x.nodeType===8){if(x.data==="teleport start anchor")e.targetStart=x;else if(x.data==="teleport anchor"){e.targetAnchor=x,b._lpa=e.targetAnchor&&c(e.targetAnchor);break}}x=c(x)}e.targetAnchor||prepareAnchor(b,e,p,f),_(k&&c(k),e,b,n,a,s,l)}updateCssVars(e,v)}return e.anchor&&c(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(o,e){const n=o.ctx;if(n&&n.ut){let a,s;for(e?(a=o.el,s=o.anchor):(a=o.targetStart,s=o.targetAnchor);a&&a!==s;)a.nodeType===1&&a.setAttribute("data-v-owner",n.uid),a=a.nextSibling;n.ut()}}function prepareAnchor(o,e,n,a){const s=e.targetStart=n(""),l=e.targetAnchor=n("");return s[TeleportEndKey]=l,o&&(a(s,o),a(l,o)),l}const leaveCbKey=Symbol("_leaveCb"),enterCbKey=Symbol("_enterCb");function useTransitionState(){const o={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{o.isMounted=!0}),onBeforeUnmount(()=>{o.isUnmounting=!0}),o}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=o=>{const e=o.subTree;return e.component?recursiveGetSubtree(e.component):e},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(o,{slots:e}){const n=getCurrentInstance(),a=useTransitionState();return()=>{const s=e.default&&getTransitionRawChildren(e.default(),!0);if(!s||!s.length)return;const l=findNonCommentChild(s),c=toRaw(o),{mode:d}=c;if(a.isLeaving)return emptyPlaceholder(l);const u=getInnerChild$1(l);if(!u)return emptyPlaceholder(l);let f=resolveTransitionHooks(u,c,a,n,_=>f=_);u.type!==Comment&&setTransitionHooks(u,f);let p=n.subTree&&getInnerChild$1(n.subTree);if(p&&p.type!==Comment&&!isSameVNodeType(u,p)&&recursiveGetSubtree(n).type!==Comment){let _=resolveTransitionHooks(p,c,a,n);if(setTransitionHooks(p,_),d==="out-in"&&u.type!==Comment)return a.isLeaving=!0,_.afterLeave=()=>{a.isLeaving=!1,n.job.flags&8||n.update(),delete _.afterLeave,p=void 0},emptyPlaceholder(l);d==="in-out"&&u.type!==Comment?_.delayLeave=(b,v,k)=>{const x=getLeavingNodesForType(a,p);x[String(p.key)]=p,b[leaveCbKey]=()=>{v(),b[leaveCbKey]=void 0,delete f.delayedLeave,p=void 0},f.delayedLeave=()=>{k(),delete f.delayedLeave,p=void 0}}:p=void 0}else p&&(p=void 0);return l}}};function findNonCommentChild(o){let e=o[0];if(o.length>1){for(const n of o)if(n.type!==Comment){e=n;break}}return e}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(o,e){const{leavingVNodes:n}=o;let a=n.get(e.type);return a||(a=Object.create(null),n.set(e.type,a)),a}function resolveTransitionHooks(o,e,n,a,s){const{appear:l,mode:c,persisted:d=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:p,onEnterCancelled:_,onBeforeLeave:b,onLeave:v,onAfterLeave:k,onLeaveCancelled:x,onBeforeAppear:M,onAppear:E,onAfterAppear:L,onAppearCancelled:V}=e,B=String(o.key),F=getLeavingNodesForType(n,o),j=(W,K)=>{W&&callWithAsyncErrorHandling(W,a,9,K)},I=(W,K)=>{const G=K[1];j(W,K),isArray$3(W)?W.every(Z=>Z.length<=1)&&G():W.length<=1&&G()},U={mode:c,persisted:d,beforeEnter(W){let K=u;if(!n.isMounted)if(l)K=M||u;else return;W[leaveCbKey]&&W[leaveCbKey](!0);const G=F[B];G&&isSameVNodeType(o,G)&&G.el[leaveCbKey]&&G.el[leaveCbKey](),j(K,[W])},enter(W){let K=f,G=p,Z=_;if(!n.isMounted)if(l)K=E||f,G=L||p,Z=V||_;else return;let oe=!1;const Y=W[enterCbKey]=se=>{oe||(oe=!0,se?j(Z,[W]):j(G,[W]),U.delayedLeave&&U.delayedLeave(),W[enterCbKey]=void 0)};K?I(K,[W,Y]):Y()},leave(W,K){const G=String(o.key);if(W[enterCbKey]&&W[enterCbKey](!0),n.isUnmounting)return K();j(b,[W]);let Z=!1;const oe=W[leaveCbKey]=Y=>{Z||(Z=!0,K(),Y?j(x,[W]):j(k,[W]),W[leaveCbKey]=void 0,F[G]===o&&delete F[G])};F[G]=o,v?I(v,[W,oe]):oe()},clone(W){const K=resolveTransitionHooks(W,e,n,a,s);return s&&s(K),K}};return U}function emptyPlaceholder(o){if(isKeepAlive(o))return o=cloneVNode(o),o.children=null,o}function getInnerChild$1(o){if(!isKeepAlive(o))return isTeleport(o.type)&&o.children?findNonCommentChild(o.children):o;const{shapeFlag:e,children:n}=o;if(n){if(e&16)return n[0];if(e&32&&isFunction$2(n.default))return n.default()}}function setTransitionHooks(o,e){o.shapeFlag&6&&o.component?(o.transition=e,setTransitionHooks(o.component.subTree,e)):o.shapeFlag&128?(o.ssContent.transition=e.clone(o.ssContent),o.ssFallback.transition=e.clone(o.ssFallback)):o.transition=e}function getTransitionRawChildren(o,e=!1,n){let a=[],s=0;for(let l=0;l<o.length;l++){let c=o[l];const d=n==null?c.key:String(n)+String(c.key!=null?c.key:l);c.type===Fragment?(c.patchFlag&128&&s++,a=a.concat(getTransitionRawChildren(c.children,e,d))):(e||c.type!==Comment)&&a.push(d!=null?cloneVNode(c,{key:d}):c)}if(s>1)for(let l=0;l<a.length;l++)a[l].patchFlag=-2;return a}function defineComponent(o,e){return isFunction$2(o)?extend$1({name:o.name},e,{setup:o}):o}function useId(){const o=getCurrentInstance();return o?(o.appContext.config.idPrefix||"v")+"-"+o.ids[0]+o.ids[1]++:""}getGlobalThis$1().requestIdleCallback;getGlobalThis$1().cancelIdleCallback;const isAsyncWrapper=o=>!!o.type.__asyncLoader,isKeepAlive=o=>o.type.__isKeepAlive;function injectHook(o,e,n=currentInstance,a=!1){if(n){const s=n[o]||(n[o]=[]),l=e.__weh||(e.__weh=(...c)=>{pauseTracking();const d=setCurrentInstance(n),u=callWithAsyncErrorHandling(e,n,o,c);return d(),resetTracking(),u});return a?s.unshift(l):s.push(l),l}}const createHook=o=>(e,n=currentInstance)=>{(!isInSSRComponentSetup||o==="sp")&&injectHook(o,(...a)=>e(...a),n)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),COMPONENTS="components";function resolveComponent(o,e){return resolveAsset(COMPONENTS,o,!0,e)||o}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(o){return isString$2(o)?resolveAsset(COMPONENTS,o,!1)||o:o||NULL_DYNAMIC_COMPONENT}function resolveAsset(o,e,n=!0,a=!1){const s=currentRenderingInstance||currentInstance;if(s){const l=s.type;{const d=getComponentName(l,!1);if(d&&(d===e||d===camelize(e)||d===capitalize$1(camelize(e))))return l}const c=resolve(s[o]||l[o],e)||resolve(s.appContext[o],e);return!c&&a?l:c}}function resolve(o,e){return o&&(o[e]||o[camelize(e)]||o[capitalize$1(camelize(e))])}function renderList(o,e,n,a){let s;const l=n,c=isArray$3(o);if(c||isString$2(o)){const d=c&&isReactive(o);let u=!1;d&&(u=!isShallow(o),o=shallowReadArray(o)),s=new Array(o.length);for(let f=0,p=o.length;f<p;f++)s[f]=e(u?toReactive(o[f]):o[f],f,void 0,l)}else if(typeof o=="number"){s=new Array(o);for(let d=0;d<o;d++)s[d]=e(d+1,d,void 0,l)}else if(isObject$3(o))if(o[Symbol.iterator])s=Array.from(o,(d,u)=>e(d,u,void 0,l));else{const d=Object.keys(o);s=new Array(d.length);for(let u=0,f=d.length;u<f;u++){const p=d[u];s[u]=e(o[p],p,u,l)}}else s=[];return s}function renderSlot(o,e,n={},a,s){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return e!=="default"&&(n.name=e),openBlock(),createBlock(Fragment,null,[createVNode("slot",n,a&&a())],64);let l=o[e];l&&l._c&&(l._d=!1),openBlock();const c=l&&ensureValidVNode(l(n)),d=n.key||c&&c.key,u=createBlock(Fragment,{key:(d&&!isSymbol(d)?d:`_${e}`)+(!c&&a?"_fb":"")},c||(a?a():[]),c&&o._===1?64:-2);return u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),l&&l._c&&(l._d=!0),u}function ensureValidVNode(o){return o.some(e=>isVNode$1(e)?!(e.type===Comment||e.type===Fragment&&!ensureValidVNode(e.children)):!0)?o:null}function toHandlers(o,e){const n={};for(const a in o)n[toHandlerKey(a)]=o[a];return n}const getPublicInstance=o=>o?isStatefulComponent(o)?getComponentPublicInstance(o):getPublicInstance(o.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:o=>o,$el:o=>o.vnode.el,$data:o=>o.data,$props:o=>o.props,$attrs:o=>o.attrs,$slots:o=>o.slots,$refs:o=>o.refs,$parent:o=>getPublicInstance(o.parent),$root:o=>getPublicInstance(o.root),$host:o=>o.ce,$emit:o=>o.emit,$options:o=>resolveMergedOptions(o),$forceUpdate:o=>o.f||(o.f=()=>{queueJob(o.update)}),$nextTick:o=>o.n||(o.n=nextTick.bind(o.proxy)),$watch:o=>instanceWatch.bind(o)});function useSlots(){return getContext().slots}function getContext(){const o=getCurrentInstance();return o.setupContext||(o.setupContext=createSetupContext(o))}function normalizePropsOrEmits(o){return isArray$3(o)?o.reduce((e,n)=>(e[n]=null,e),{}):o}function mergeDefaults(o,e){const n=normalizePropsOrEmits(o);for(const a in e){if(a.startsWith("__skip"))continue;let s=n[a];s?isArray$3(s)||isFunction$2(s)?s=n[a]={type:s,default:e[a]}:s.default=e[a]:s===null&&(s=n[a]={default:e[a]}),s&&e[`__skip_${a}`]&&(s.skipFactory=!0)}return n}function mergeModels(o,e){return!o||!e?o||e:isArray$3(o)&&isArray$3(e)?o.concat(e):extend$1({},normalizePropsOrEmits(o),normalizePropsOrEmits(e))}function resolveMergedOptions(o){const e=o.type,{mixins:n,extends:a}=e,{mixins:s,optionsCache:l,config:{optionMergeStrategies:c}}=o.appContext,d=l.get(e);let u;return d?u=d:!s.length&&!n&&!a?u=e:(u={},s.length&&s.forEach(f=>mergeOptions$1(u,f,c,!0)),mergeOptions$1(u,e,c)),isObject$3(e)&&l.set(e,u),u}function mergeOptions$1(o,e,n,a=!1){const{mixins:s,extends:l}=e;l&&mergeOptions$1(o,l,n,!0),s&&s.forEach(c=>mergeOptions$1(o,c,n,!0));for(const c in e)if(!(a&&c==="expose")){const d=internalOptionMergeStrats[c]||n&&n[c];o[c]=d?d(o[c],e[c]):e[c]}return o}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(o,e){return e?o?function(){return extend$1(isFunction$2(o)?o.call(this,this):o,isFunction$2(e)?e.call(this,this):e)}:e:o}function mergeInject(o,e){return mergeObjectOptions(normalizeInject(o),normalizeInject(e))}function normalizeInject(o){if(isArray$3(o)){const e={};for(let n=0;n<o.length;n++)e[o[n]]=o[n];return e}return o}function mergeAsArray(o,e){return o?[...new Set([].concat(o,e))]:e}function mergeObjectOptions(o,e){return o?extend$1(Object.create(null),o,e):e}function mergeEmitsOrPropsOptions(o,e){return o?isArray$3(o)&&isArray$3(e)?[...new Set([...o,...e])]:extend$1(Object.create(null),normalizePropsOrEmits(o),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(o,e){if(!o)return e;if(!e)return o;const n=extend$1(Object.create(null),o);for(const a in e)n[a]=mergeAsArray(o[a],e[a]);return n}let currentApp=null;function provide(o,e){if(currentInstance){let n=currentInstance.provides;const a=currentInstance.parent&&currentInstance.parent.provides;a===n&&(n=currentInstance.provides=Object.create(a)),n[o]=e}}function inject(o,e,n=!1){const a=currentInstance||currentRenderingInstance;if(a||currentApp){const s=a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(s&&o in s)return s[o];if(arguments.length>1)return n&&isFunction$2(e)?e.call(a&&a.proxy):e}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},isInternalObject=o=>Object.getPrototypeOf(o)===internalObjectProto,queuePostRenderEffect=queueEffectWithSuspense;function traverseStaticChildren(o,e,n=!1){const a=o.children,s=e.children;if(isArray$3(a)&&isArray$3(s))for(let l=0;l<a.length;l++){const c=a[l];let d=s[l];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=s[l]=cloneIfMounted(s[l]),d.el=c.el),!n&&d.patchFlag!==-2&&traverseStaticChildren(c,d)),d.type===Text$1&&(d.el=c.el)}}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(o,e){return doWatch(o,null,e)}function watchPostEffect(o,e){return doWatch(o,null,{flush:"post"})}function watchSyncEffect(o,e){return doWatch(o,null,{flush:"sync"})}function watch(o,e,n){return doWatch(o,e,n)}function doWatch(o,e,n=EMPTY_OBJ){const{immediate:a,deep:s,flush:l,once:c}=n,d=extend$1({},n),u=e&&a||!e&&l!=="post";let f;if(isInSSRComponentSetup){if(l==="sync"){const v=useSSRContext();f=v.__watcherHandles||(v.__watcherHandles=[])}else if(!u){const v=()=>{};return v.stop=NOOP,v.resume=NOOP,v.pause=NOOP,v}}const p=currentInstance;d.call=(v,k,x)=>callWithAsyncErrorHandling(v,p,k,x);let _=!1;l==="post"?d.scheduler=v=>{queuePostRenderEffect(v,p&&p.suspense)}:l!=="sync"&&(_=!0,d.scheduler=(v,k)=>{k?v():queueJob(v)}),d.augmentJob=v=>{e&&(v.flags|=4),_&&(v.flags|=2,p&&(v.id=p.uid,v.i=p))};const b=watch$1(o,e,d);return isInSSRComponentSetup&&(f?f.push(b):u&&b()),b}function instanceWatch(o,e,n){const a=this.proxy,s=isString$2(o)?o.includes(".")?createPathGetter(a,o):()=>a[o]:o.bind(a,a);let l;isFunction$2(e)?l=e:(l=e.handler,n=e);const c=setCurrentInstance(this),d=doWatch(s,l.bind(a),n);return c(),d}function createPathGetter(o,e){const n=e.split(".");return()=>{let a=o;for(let s=0;s<n.length&&a;s++)a=a[n[s]];return a}}function useModel(o,e,n=EMPTY_OBJ){const a=getCurrentInstance(),s=camelize(e),l=hyphenate$1(e),c=getModelModifiers(o,s),d=customRef((u,f)=>{let p,_=EMPTY_OBJ,b;return watchSyncEffect(()=>{const v=o[s];hasChanged(p,v)&&(p=v,f())}),{get(){return u(),n.get?n.get(p):p},set(v){const k=n.set?n.set(v):v;if(!hasChanged(k,p)&&!(_!==EMPTY_OBJ&&hasChanged(v,_)))return;const x=a.vnode.props;x&&(e in x||s in x||l in x)&&(`onUpdate:${e}`in x||`onUpdate:${s}`in x||`onUpdate:${l}`in x)||(p=v,f()),a.emit(`update:${e}`,k),hasChanged(v,k)&&hasChanged(v,_)&&!hasChanged(k,b)&&f(),_=v,b=k}}});return d[Symbol.iterator]=()=>{let u=0;return{next(){return u<2?{value:u++?c||EMPTY_OBJ:d,done:!1}:{done:!0}}}},d}const getModelModifiers=(o,e)=>e==="modelValue"||e==="model-value"?o.modelModifiers:o[`${e}Modifiers`]||o[`${camelize(e)}Modifiers`]||o[`${hyphenate$1(e)}Modifiers`],isSuspense=o=>o.__isSuspense;function queueEffectWithSuspense(o,e){e&&e.pendingBranch?isArray$3(o)?e.effects.push(...o):e.effects.push(o):queuePostFlushCb(o)}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),blockStack=[];let currentBlock=null;function openBlock(o=!1){blockStack.push(currentBlock=o?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(o,e=!1){isBlockTreeEnabled+=o,o<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(o){return o.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(o),o}function createElementBlock(o,e,n,a,s,l){return setupBlock(createBaseVNode(o,e,n,a,s,l,!0))}function createBlock(o,e,n,a,s){return setupBlock(createVNode(o,e,n,a,s,!0))}function isVNode$1(o){return o?o.__v_isVNode===!0:!1}function isSameVNodeType(o,e){return o.type===e.type&&o.key===e.key}const normalizeKey=({key:o})=>o??null,normalizeRef=({ref:o,ref_key:e,ref_for:n})=>(typeof o=="number"&&(o=""+o),o!=null?isString$2(o)||isRef(o)||isFunction$2(o)?{i:currentRenderingInstance,r:o,k:e,f:!!n}:o:null);function createBaseVNode(o,e=null,n=null,a=0,s=null,l=o===Fragment?0:1,c=!1,d=!1){const u={__v_isVNode:!0,__v_skip:!0,type:o,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:a,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return d?(normalizeChildren(u,n),l&128&&o.normalize(u)):n&&(u.shapeFlag|=isString$2(n)?8:16),isBlockTreeEnabled>0&&!c&&currentBlock&&(u.patchFlag>0||l&6)&&u.patchFlag!==32&&currentBlock.push(u),u}const createVNode=_createVNode;function _createVNode(o,e=null,n=null,a=0,s=null,l=!1){if((!o||o===NULL_DYNAMIC_COMPONENT)&&(o=Comment),isVNode$1(o)){const d=cloneVNode(o,e,!0);return n&&normalizeChildren(d,n),isBlockTreeEnabled>0&&!l&&currentBlock&&(d.shapeFlag&6?currentBlock[currentBlock.indexOf(o)]=d:currentBlock.push(d)),d.patchFlag=-2,d}if(isClassComponent(o)&&(o=o.__vccOpts),e){e=guardReactiveProps(e);let{class:d,style:u}=e;d&&!isString$2(d)&&(e.class=normalizeClass(d)),isObject$3(u)&&(isProxy(u)&&!isArray$3(u)&&(u=extend$1({},u)),e.style=normalizeStyle(u))}const c=isString$2(o)?1:isSuspense(o)?128:isTeleport(o)?64:isObject$3(o)?4:isFunction$2(o)?2:0;return createBaseVNode(o,e,n,a,s,c,l,!0)}function guardReactiveProps(o){return o?isProxy(o)||isInternalObject(o)?extend$1({},o):o:null}function cloneVNode(o,e,n=!1,a=!1){const{props:s,ref:l,patchFlag:c,children:d,transition:u}=o,f=e?mergeProps(s||{},e):s,p={__v_isVNode:!0,__v_skip:!0,type:o.type,props:f,key:f&&normalizeKey(f),ref:e&&e.ref?n&&l?isArray$3(l)?l.concat(normalizeRef(e)):[l,normalizeRef(e)]:normalizeRef(e):l,scopeId:o.scopeId,slotScopeIds:o.slotScopeIds,children:d,target:o.target,targetStart:o.targetStart,targetAnchor:o.targetAnchor,staticCount:o.staticCount,shapeFlag:o.shapeFlag,patchFlag:e&&o.type!==Fragment?c===-1?16:c|16:c,dynamicProps:o.dynamicProps,dynamicChildren:o.dynamicChildren,appContext:o.appContext,dirs:o.dirs,transition:u,component:o.component,suspense:o.suspense,ssContent:o.ssContent&&cloneVNode(o.ssContent),ssFallback:o.ssFallback&&cloneVNode(o.ssFallback),el:o.el,anchor:o.anchor,ctx:o.ctx,ce:o.ce};return u&&a&&setTransitionHooks(p,u.clone(p)),p}function createTextVNode(o=" ",e=0){return createVNode(Text$1,null,o,e)}function createCommentVNode(o="",e=!1){return e?(openBlock(),createBlock(Comment,null,o)):createVNode(Comment,null,o)}function cloneIfMounted(o){return o.el===null&&o.patchFlag!==-1||o.memo?o:cloneVNode(o)}function normalizeChildren(o,e){let n=0;const{shapeFlag:a}=o;if(e==null)e=null;else if(isArray$3(e))n=16;else if(typeof e=="object")if(a&65){const s=e.default;s&&(s._c&&(s._d=!1),normalizeChildren(o,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!isInternalObject(e)?e._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,o.patchFlag|=1024))}else isFunction$2(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),a&64?(n=16,e=[createTextVNode(e)]):n=8);o.children=e,o.shapeFlag|=n}function mergeProps(...o){const e={};for(let n=0;n<o.length;n++){const a=o[n];for(const s in a)if(s==="class")e.class!==a.class&&(e.class=normalizeClass([e.class,a.class]));else if(s==="style")e.style=normalizeStyle([e.style,a.style]);else if(isOn(s)){const l=e[s],c=a[s];c&&l!==c&&!(isArray$3(l)&&l.includes(c))&&(e[s]=l?[].concat(l,c):c)}else s!==""&&(e[s]=a[s])}return e}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance;{const o=getGlobalThis$1(),e=(n,a)=>{let s;return(s=o[n])||(s=o[n]=[]),s.push(a),l=>{s.length>1?s.forEach(c=>c(l)):s[0](l)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",n=>currentInstance=n),e("__VUE_SSR_SETTERS__",n=>isInSSRComponentSetup=n)}const setCurrentInstance=o=>{const e=currentInstance;return internalSetCurrentInstance(o),o.scope.on(),()=>{o.scope.off(),internalSetCurrentInstance(e)}};function isStatefulComponent(o){return o.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;const attrsProxyHandlers={get(o,e){return track(o,"get",""),o[e]}};function createSetupContext(o){const e=n=>{o.exposed=n||{}};return{attrs:new Proxy(o.attrs,attrsProxyHandlers),slots:o.slots,emit:o.emit,expose:e}}function getComponentPublicInstance(o){return o.exposed?o.exposeProxy||(o.exposeProxy=new Proxy(proxyRefs(markRaw(o.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](o)},has(e,n){return n in e||n in publicPropertiesMap}})):o.proxy}function getComponentName(o,e=!0){return isFunction$2(o)?o.displayName||o.name:o.name||e&&o.__name}function isClassComponent(o){return isFunction$2(o)&&"__vccOpts"in o}const computed=(o,e)=>computed$1(o,e,isInSSRComponentSetup);function h(o,e,n){const a=arguments.length;return a===2?isObject$3(e)&&!isArray$3(e)?isVNode$1(e)?createVNode(o,null,[e]):createVNode(o,e):createVNode(o,null,e):(a>3?n=Array.prototype.slice.call(arguments,2):a===3&&isVNode$1(n)&&(n=[n]),createVNode(o,e,n))}let policy;const tt$2=typeof window<"u"&&window.trustedTypes;if(tt$2)try{policy=tt$2.createPolicy("vue",{createHTML:o=>o})}catch{}const TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=o=>(o.displayName="Transition",o.props=TransitionPropsValidators,o),Transition=decorate$1((o,{slots:e})=>h(BaseTransition,resolveTransitionProps(o),e)),callHook=(o,e=[])=>{isArray$3(o)?o.forEach(n=>n(...e)):o&&o(...e)},hasExplicitCallback=o=>o?isArray$3(o)?o.some(e=>e.length>1):o.length>1:!1;function resolveTransitionProps(o){const e={};for(const Z in o)Z in DOMTransitionPropsValidators||(e[Z]=o[Z]);if(o.css===!1)return e;const{name:n="v",type:a,duration:s,enterFromClass:l=`${n}-enter-from`,enterActiveClass:c=`${n}-enter-active`,enterToClass:d=`${n}-enter-to`,appearFromClass:u=l,appearActiveClass:f=c,appearToClass:p=d,leaveFromClass:_=`${n}-leave-from`,leaveActiveClass:b=`${n}-leave-active`,leaveToClass:v=`${n}-leave-to`}=o,k=normalizeDuration(s),x=k&&k[0],M=k&&k[1],{onBeforeEnter:E,onEnter:L,onEnterCancelled:V,onLeave:B,onLeaveCancelled:F,onBeforeAppear:j=E,onAppear:I=L,onAppearCancelled:U=V}=e,W=(Z,oe,Y,se)=>{Z._enterCancelled=se,removeTransitionClass(Z,oe?p:d),removeTransitionClass(Z,oe?f:c),Y&&Y()},K=(Z,oe)=>{Z._isLeaving=!1,removeTransitionClass(Z,_),removeTransitionClass(Z,v),removeTransitionClass(Z,b),oe&&oe()},G=Z=>(oe,Y)=>{const se=Z?I:L,le=()=>W(oe,Z,Y);callHook(se,[oe,le]),nextFrame(()=>{removeTransitionClass(oe,Z?u:l),addTransitionClass(oe,Z?p:d),hasExplicitCallback(se)||whenTransitionEnds(oe,a,x,le)})};return extend$1(e,{onBeforeEnter(Z){callHook(E,[Z]),addTransitionClass(Z,l),addTransitionClass(Z,c)},onBeforeAppear(Z){callHook(j,[Z]),addTransitionClass(Z,u),addTransitionClass(Z,f)},onEnter:G(!1),onAppear:G(!0),onLeave(Z,oe){Z._isLeaving=!0;const Y=()=>K(Z,oe);addTransitionClass(Z,_),Z._enterCancelled?(addTransitionClass(Z,b),forceReflow()):(forceReflow(),addTransitionClass(Z,b)),nextFrame(()=>{Z._isLeaving&&(removeTransitionClass(Z,_),addTransitionClass(Z,v),hasExplicitCallback(B)||whenTransitionEnds(Z,a,M,Y))}),callHook(B,[Z,Y])},onEnterCancelled(Z){W(Z,!1,void 0,!0),callHook(V,[Z])},onAppearCancelled(Z){W(Z,!0,void 0,!0),callHook(U,[Z])},onLeaveCancelled(Z){K(Z),callHook(F,[Z])}})}function normalizeDuration(o){if(o==null)return null;if(isObject$3(o))return[NumberOf(o.enter),NumberOf(o.leave)];{const e=NumberOf(o);return[e,e]}}function NumberOf(o){return toNumber(o)}function addTransitionClass(o,e){e.split(/\s+/).forEach(n=>n&&o.classList.add(n)),(o[vtcKey]||(o[vtcKey]=new Set)).add(e)}function removeTransitionClass(o,e){e.split(/\s+/).forEach(a=>a&&o.classList.remove(a));const n=o[vtcKey];n&&(n.delete(e),n.size||(o[vtcKey]=void 0))}function nextFrame(o){requestAnimationFrame(()=>{requestAnimationFrame(o)})}let endId=0;function whenTransitionEnds(o,e,n,a){const s=o._endId=++endId,l=()=>{s===o._endId&&a()};if(n!=null)return setTimeout(l,n);const{type:c,timeout:d,propCount:u}=getTransitionInfo(o,e);if(!c)return a();const f=c+"end";let p=0;const _=()=>{o.removeEventListener(f,b),l()},b=v=>{v.target===o&&++p>=u&&_()};setTimeout(()=>{p<u&&_()},d+1),o.addEventListener(f,b)}function getTransitionInfo(o,e){const n=window.getComputedStyle(o),a=k=>(n[k]||"").split(", "),s=a(`${TRANSITION}Delay`),l=a(`${TRANSITION}Duration`),c=getTimeout(s,l),d=a(`${ANIMATION}Delay`),u=a(`${ANIMATION}Duration`),f=getTimeout(d,u);let p=null,_=0,b=0;e===TRANSITION?c>0&&(p=TRANSITION,_=c,b=l.length):e===ANIMATION?f>0&&(p=ANIMATION,_=f,b=u.length):(_=Math.max(c,f),p=_>0?c>f?TRANSITION:ANIMATION:null,b=p?p===TRANSITION?l.length:u.length:0);const v=p===TRANSITION&&/\b(transform|all)(,|$)/.test(a(`${TRANSITION}Property`).toString());return{type:p,timeout:_,propCount:b,hasTransform:v}}function getTimeout(o,e){for(;o.length<e.length;)o=o.concat(o);return Math.max(...e.map((n,a)=>toMs(n)+toMs(o[a])))}function toMs(o){return o==="auto"?0:Number(o.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function addEventListener$1(o,e,n,a){o.addEventListener(e,n,a)}const getModelAssigner=o=>{const e=o.props["onUpdate:modelValue"]||!1;return isArray$3(e)?n=>invokeArrayFns(e,n):e};function onCompositionStart(o){o.target.composing=!0}function onCompositionEnd(o){const e=o.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(o,{modifiers:{lazy:e,trim:n,number:a}},s){o[assignKey]=getModelAssigner(s);const l=a||s.props&&s.props.type==="number";addEventListener$1(o,e?"change":"input",c=>{if(c.target.composing)return;let d=o.value;n&&(d=d.trim()),l&&(d=looseToNumber(d)),o[assignKey](d)}),n&&addEventListener$1(o,"change",()=>{o.value=o.value.trim()}),e||(addEventListener$1(o,"compositionstart",onCompositionStart),addEventListener$1(o,"compositionend",onCompositionEnd),addEventListener$1(o,"change",onCompositionEnd))},mounted(o,{value:e}){o.value=e??""},beforeUpdate(o,{value:e,oldValue:n,modifiers:{lazy:a,trim:s,number:l}},c){if(o[assignKey]=getModelAssigner(c),o.composing)return;const d=(l||o.type==="number")&&!/^0\d/.test(o.value)?looseToNumber(o.value):o.value,u=e??"";d!==u&&(document.activeElement===o&&o.type!=="range"&&(a&&e===n||s&&o.value.trim()===u)||(o.value=u))}},vModelSelect={deep:!0,created(o,{value:e,modifiers:{number:n}},a){const s=isSet(e);addEventListener$1(o,"change",()=>{const l=Array.prototype.filter.call(o.options,c=>c.selected).map(c=>n?looseToNumber(getValue(c)):getValue(c));o[assignKey](o.multiple?s?new Set(l):l:l[0]),o._assigning=!0,nextTick(()=>{o._assigning=!1})}),o[assignKey]=getModelAssigner(a)},mounted(o,{value:e}){setSelected(o,e)},beforeUpdate(o,e,n){o[assignKey]=getModelAssigner(n)},updated(o,{value:e}){o._assigning||setSelected(o,e)}};function setSelected(o,e){const n=o.multiple,a=isArray$3(e);if(!(n&&!a&&!isSet(e))){for(let s=0,l=o.options.length;s<l;s++){const c=o.options[s],d=getValue(c);if(n)if(a){const u=typeof d;u==="string"||u==="number"?c.selected=e.some(f=>String(f)===String(d)):c.selected=looseIndexOf(e,d)>-1}else c.selected=e.has(d);else if(looseEqual(getValue(c),e)){o.selectedIndex!==s&&(o.selectedIndex=s);return}}!n&&o.selectedIndex!==-1&&(o.selectedIndex=-1)}}function getValue(o){return"_value"in o?o._value:o.value}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:o=>o.stopPropagation(),prevent:o=>o.preventDefault(),self:o=>o.target!==o.currentTarget,ctrl:o=>!o.ctrlKey,shift:o=>!o.shiftKey,alt:o=>!o.altKey,meta:o=>!o.metaKey,left:o=>"button"in o&&o.button!==0,middle:o=>"button"in o&&o.button!==1,right:o=>"button"in o&&o.button!==2,exact:(o,e)=>systemModifiers.some(n=>o[`${n}Key`]&&!e.includes(n))},withModifiers=(o,e)=>{const n=o._withMods||(o._withMods={}),a=e.join(".");return n[a]||(n[a]=(s,...l)=>{for(let c=0;c<e.length;c++){const d=modifierGuards[e[c]];if(d&&d(s,e))return}return o(s,...l)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(o,e)=>{const n=o._withKeys||(o._withKeys={}),a=e.join(".");return n[a]||(n[a]=s=>{if(!("key"in s))return;const l=hyphenate$1(s.key);if(e.some(c=>c===l||keyNames[c]===l))return o(s)})},getPmSchema=o=>new Schema({nodes:{doc:{content:"inline*"},text:{group:"inline"},pathRef:{inline:!0,atom:!0,attrs:{path:{}},group:"inline",selectable:!0,toDOM:e=>{const n=document.createElement("span");n.classList.add("path-ref"),n.dataset.path=e.attrs.path;const a=getBasename(e.attrs.path);return n.innerHTML=a,n},parseDOM:[{tag:"span.path-ref",getAttrs:e=>({path:e.getAttribute("path")})}],leafText:e=>e.attrs.path},blockRef_v2:{inline:!0,atom:!0,attrs:{toBlockId:{},tag:{default:!1}},group:"inline",selectable:!0,toDOM:e=>{const{toBlockId:n}=e.attrs,a=document.createElement("span");a.classList.add("block-ref-v2"),e.attrs.tag&&a.classList.add("tag"),a.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),o.pushHistoryItem?.();const c=o.getMainTree?.();c&&c.focusBlock(n,{highlight:!0,expandIfFold:!0})});const s=o.getBlockRef(n);return watch(s,l=>{if(l){const c=l.ctext??"";a.innerHTML=c.trim(),a.dataset.blockId=l.id,a.dataset.ctext=c,l.metadata?.blockRefColor?a.dataset.blockRefColor=l.metadata?.blockRefColor:delete a.dataset.blockRefColor,a.classList.remove("invalid")}else a.innerHTML="Invalid Ref",a.classList.add("invalid")},{immediate:!0}),a},parseDOM:[{tag:"span.block-ref-v2",getAttrs(e){return e instanceof HTMLElement?{toBlockId:e.dataset.blockId,tag:e.classList.contains("tag")}:{}}}],leafText:e=>{const{toBlockId:n}=e.attrs;return n?o.getBlockRef(n).value?.ctext??"":""}},mathInline:{inline:!0,atom:!0,attrs:{src:{}},leafText:e=>e.attrs.src,group:"inline",selectable:!0,toDOM:e=>["span",{class:"math-inline",src:e.attrs.src,contenteditable:!0}],parseDOM:[{tag:"span.math-inline",getAttrs:e=>({src:e.getAttribute("src")})}]},hardBreak:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{link:{attrs:{href:{}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href")})}],toDOM(e){const{href:n}=e.attrs,a=document.createElement("a");return a.href=n,a.spellcheck=!1,a.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),window.open(n,"_blank")}),a}},code:{parseDOM:[{tag:"code"}],toDOM(){return["code",{spellcheck:!1},0]}},italic:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:e=>e.type.name=="em"}],toDOM(){return["em",0]}},bold:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong",0]},strikethrough:{parseDOM:[{tag:"s"},{tag:"del"},{style:"text-decoration: line-through"}],toDOM:()=>["s",0]},underline:{parseDOM:[{tag:"u"},{style:"text-decoration: underline"}],toDOM:()=>["u",0]},cloze:{attrs:{clozeId:{}},inclusive:!1,toDOM(e){const n=document.createElement("span");return n.classList.add("cloze"),n.setAttribute("clozeid",e.attrs.clozeId),{dom:n,contentDom:n}},parseDOM:[{tag:"span.cloze",getAttrs:e=>({clozeId:e.getAttribute("clozeId")})}]},highlight:{attrs:{bg:{default:"bg4"},fg:{default:null}},inclusive:!1,toDOM(e){const{bg:n,fg:a}=e.attrs;return["span",{class:"highlight",bg:n,fg:a},0]},parseDOM:[{tag:"span.highlight",getAttrs:e=>({bg:e.getAttribute("bg"),fg:e.getAttribute("fg")})}]}}});function mitt$1(o){return{all:o=o||new Map,on:function(e,n){var a=o.get(e);a?a.push(n):o.set(e,[n])},off:function(e,n){var a=o.get(e);a&&(n?a.splice(a.indexOf(n)>>>0,1):o.set(e,[]))},emit:function(e,n){var a=o.get(e);a&&a.slice().map(function(s){s(n)}),(a=o.get("*"))&&a.slice().map(function(s){s(e,n)})}}}const useEventBus=()=>{const o=inject("eventBus");return{emit:o.emit,on:o.on,off:o.off,all:o.all,eventRefs:inject("eventRefs")}},HTTP_LINK_REGEX=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/g,linkify=function(o,e){const n=[];return o.forEach(a=>{if(a.isText){const s=a.text;let l=0,c;for(;c=HTTP_LINK_REGEX.exec(s);){const d=c.index,u=d+c[0].length,f=a.type.schema.marks.link;d>0&&n.push(a.cut(l,d));const p=s.slice(d,u),_=f.create({href:p});n.push(a.cut(d,u).mark(_.addToSet(a.marks))),e.push(p),l=u}l<s.length&&n.push(a.cut(l))}else n.push(a.copy(linkify(a.content,e)))}),Fragment$1.fromArray(n)},contentNodesToPmNode=o=>[BLOCK_CONTENT_TYPES.TEXT,{type:"doc",content:o.map(e=>e.toJSON())}],plainTextToPmNode=(o,e)=>{let n;if(o.length===0)n=Fragment$1.empty;else{const a=e.text(o);n=linkify(Fragment$1.from(a),[])}return e.nodes.doc.create({},n)},plainTextToTextContent=(o,e)=>{let n;if(o.length===0)n=Fragment$1.empty;else{const s=e.text(o);n=linkify(Fragment$1.from(s),[])}const a=e.nodes.doc.create({},n);return[BLOCK_CONTENT_TYPES.TEXT,a.toJSON()]},blockRefToTextContent=o=>[BLOCK_CONTENT_TYPES.TEXT,{type:"doc",content:[{type:"blockRef_v2",attrs:{toBlockId:o,tag:!1}}]}];var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var dayjs_min={exports:{}};(function(o,e){(function(n,a){o.exports=a()})(commonjsGlobal,function(){var n=1e3,a=6e4,s=36e5,l="millisecond",c="second",d="minute",u="hour",f="day",p="week",_="month",b="quarter",v="year",k="date",x="Invalid Date",M=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,L={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var se=["th","st","nd","rd"],le=Y%100;return"["+Y+(se[(le-20)%10]||se[le]||se[0])+"]"}},V=function(Y,se,le){var ce=String(Y);return!ce||ce.length>=se?Y:""+Array(se+1-ce.length).join(le)+Y},B={s:V,z:function(Y){var se=-Y.utcOffset(),le=Math.abs(se),ce=Math.floor(le/60),de=le%60;return(se<=0?"+":"-")+V(ce,2,"0")+":"+V(de,2,"0")},m:function Y(se,le){if(se.date()<le.date())return-Y(le,se);var ce=12*(le.year()-se.year())+(le.month()-se.month()),de=se.clone().add(ce,_),ge=le-de<0,qe=se.clone().add(ce+(ge?-1:1),_);return+(-(ce+(le-de)/(ge?de-qe:qe-de))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:_,y:v,w:p,d:f,D:k,h:u,m:d,s:c,ms:l,Q:b}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},F="en",j={};j[F]=L;var I="$isDayjsObject",U=function(Y){return Y instanceof Z||!(!Y||!Y[I])},W=function Y(se,le,ce){var de;if(!se)return F;if(typeof se=="string"){var ge=se.toLowerCase();j[ge]&&(de=ge),le&&(j[ge]=le,de=ge);var qe=se.split("-");if(!de&&qe.length>1)return Y(qe[0])}else{var ke=se.name;j[ke]=se,de=ke}return!ce&&de&&(F=de),de||!ce&&F},K=function(Y,se){if(U(Y))return Y.clone();var le=typeof se=="object"?se:{};return le.date=Y,le.args=arguments,new Z(le)},G=B;G.l=W,G.i=U,G.w=function(Y,se){return K(Y,{locale:se.$L,utc:se.$u,x:se.$x,$offset:se.$offset})};var Z=function(){function Y(le){this.$L=W(le.locale,null,!0),this.parse(le),this.$x=this.$x||le.x||{},this[I]=!0}var se=Y.prototype;return se.parse=function(le){this.$d=function(ce){var de=ce.date,ge=ce.utc;if(de===null)return new Date(NaN);if(G.u(de))return new Date;if(de instanceof Date)return new Date(de);if(typeof de=="string"&&!/Z$/i.test(de)){var qe=de.match(M);if(qe){var ke=qe[2]-1||0,Ee=(qe[7]||"0").substring(0,3);return ge?new Date(Date.UTC(qe[1],ke,qe[3]||1,qe[4]||0,qe[5]||0,qe[6]||0,Ee)):new Date(qe[1],ke,qe[3]||1,qe[4]||0,qe[5]||0,qe[6]||0,Ee)}}return new Date(de)}(le),this.init()},se.init=function(){var le=this.$d;this.$y=le.getFullYear(),this.$M=le.getMonth(),this.$D=le.getDate(),this.$W=le.getDay(),this.$H=le.getHours(),this.$m=le.getMinutes(),this.$s=le.getSeconds(),this.$ms=le.getMilliseconds()},se.$utils=function(){return G},se.isValid=function(){return this.$d.toString()!==x},se.isSame=function(le,ce){var de=K(le);return this.startOf(ce)<=de&&de<=this.endOf(ce)},se.isAfter=function(le,ce){return K(le)<this.startOf(ce)},se.isBefore=function(le,ce){return this.endOf(ce)<K(le)},se.$g=function(le,ce,de){return G.u(le)?this[ce]:this.set(de,le)},se.unix=function(){return Math.floor(this.valueOf()/1e3)},se.valueOf=function(){return this.$d.getTime()},se.startOf=function(le,ce){var de=this,ge=!!G.u(ce)||ce,qe=G.p(le),ke=function(me,te){var ue=G.w(de.$u?Date.UTC(de.$y,te,me):new Date(de.$y,te,me),de);return ge?ue:ue.endOf(f)},Ee=function(me,te){return G.w(de.toDate()[me].apply(de.toDate("s"),(ge?[0,0,0,0]:[23,59,59,999]).slice(te)),de)},Oe=this.$W,Ve=this.$M,Ne=this.$D,dt="set"+(this.$u?"UTC":"");switch(qe){case v:return ge?ke(1,0):ke(31,11);case _:return ge?ke(1,Ve):ke(0,Ve+1);case p:var pe=this.$locale().weekStart||0,fe=(Oe<pe?Oe+7:Oe)-pe;return ke(ge?Ne-fe:Ne+(6-fe),Ve);case f:case k:return Ee(dt+"Hours",0);case u:return Ee(dt+"Minutes",1);case d:return Ee(dt+"Seconds",2);case c:return Ee(dt+"Milliseconds",3);default:return this.clone()}},se.endOf=function(le){return this.startOf(le,!1)},se.$set=function(le,ce){var de,ge=G.p(le),qe="set"+(this.$u?"UTC":""),ke=(de={},de[f]=qe+"Date",de[k]=qe+"Date",de[_]=qe+"Month",de[v]=qe+"FullYear",de[u]=qe+"Hours",de[d]=qe+"Minutes",de[c]=qe+"Seconds",de[l]=qe+"Milliseconds",de)[ge],Ee=ge===f?this.$D+(ce-this.$W):ce;if(ge===_||ge===v){var Oe=this.clone().set(k,1);Oe.$d[ke](Ee),Oe.init(),this.$d=Oe.set(k,Math.min(this.$D,Oe.daysInMonth())).$d}else ke&&this.$d[ke](Ee);return this.init(),this},se.set=function(le,ce){return this.clone().$set(le,ce)},se.get=function(le){return this[G.p(le)]()},se.add=function(le,ce){var de,ge=this;le=Number(le);var qe=G.p(ce),ke=function(Ve){var Ne=K(ge);return G.w(Ne.date(Ne.date()+Math.round(Ve*le)),ge)};if(qe===_)return this.set(_,this.$M+le);if(qe===v)return this.set(v,this.$y+le);if(qe===f)return ke(1);if(qe===p)return ke(7);var Ee=(de={},de[d]=a,de[u]=s,de[c]=n,de)[qe]||1,Oe=this.$d.getTime()+le*Ee;return G.w(Oe,this)},se.subtract=function(le,ce){return this.add(-1*le,ce)},se.format=function(le){var ce=this,de=this.$locale();if(!this.isValid())return de.invalidDate||x;var ge=le||"YYYY-MM-DDTHH:mm:ssZ",qe=G.z(this),ke=this.$H,Ee=this.$m,Oe=this.$M,Ve=de.weekdays,Ne=de.months,dt=de.meridiem,pe=function(te,ue,we,_e){return te&&(te[ue]||te(ce,ge))||we[ue].slice(0,_e)},fe=function(te){return G.s(ke%12||12,te,"0")},me=dt||function(te,ue,we){var _e=te<12?"AM":"PM";return we?_e.toLowerCase():_e};return ge.replace(E,function(te,ue){return ue||function(we){switch(we){case"YY":return String(ce.$y).slice(-2);case"YYYY":return G.s(ce.$y,4,"0");case"M":return Oe+1;case"MM":return G.s(Oe+1,2,"0");case"MMM":return pe(de.monthsShort,Oe,Ne,3);case"MMMM":return pe(Ne,Oe);case"D":return ce.$D;case"DD":return G.s(ce.$D,2,"0");case"d":return String(ce.$W);case"dd":return pe(de.weekdaysMin,ce.$W,Ve,2);case"ddd":return pe(de.weekdaysShort,ce.$W,Ve,3);case"dddd":return Ve[ce.$W];case"H":return String(ke);case"HH":return G.s(ke,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return me(ke,Ee,!0);case"A":return me(ke,Ee,!1);case"m":return String(Ee);case"mm":return G.s(Ee,2,"0");case"s":return String(ce.$s);case"ss":return G.s(ce.$s,2,"0");case"SSS":return G.s(ce.$ms,3,"0");case"Z":return qe}return null}(te)||qe.replace(":","")})},se.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},se.diff=function(le,ce,de){var ge,qe=this,ke=G.p(ce),Ee=K(le),Oe=(Ee.utcOffset()-this.utcOffset())*a,Ve=this-Ee,Ne=function(){return G.m(qe,Ee)};switch(ke){case v:ge=Ne()/12;break;case _:ge=Ne();break;case b:ge=Ne()/3;break;case p:ge=(Ve-Oe)/6048e5;break;case f:ge=(Ve-Oe)/864e5;break;case u:ge=Ve/s;break;case d:ge=Ve/a;break;case c:ge=Ve/n;break;default:ge=Ve}return de?ge:G.a(ge)},se.daysInMonth=function(){return this.endOf(_).$D},se.$locale=function(){return j[this.$L]},se.locale=function(le,ce){if(!le)return this.$L;var de=this.clone(),ge=W(le,ce,!0);return ge&&(de.$L=ge),de},se.clone=function(){return G.w(this.$d,this)},se.toDate=function(){return new Date(this.valueOf())},se.toJSON=function(){return this.isValid()?this.toISOString():null},se.toISOString=function(){return this.$d.toISOString()},se.toString=function(){return this.$d.toUTCString()},Y}(),oe=Z.prototype;return K.prototype=oe,[["$ms",l],["$s",c],["$m",d],["$H",u],["$W",f],["$M",_],["$y",v],["$D",k]].forEach(function(Y){oe[Y[1]]=function(se){return this.$g(se,Y[0],Y[1])}}),K.extend=function(Y,se){return Y.$i||(Y(se,Z,K),Y.$i=!0),K},K.locale=W,K.isDayjs=U,K.unix=function(Y){return K(1e3*Y)},K.en=j[F],K.Ls=j,K.p={},K})})(dayjs_min);var dayjs_minExports=dayjs_min.exports,dayjs=getDefaultExportFromCjs(dayjs_minExports);const urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let nanoid=(o=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(o|=0));for(;o--;)e+=urlAlphabet[n[o]&63];return e};function useBlockTransaction(o){const{mainRootBlockId:e,lastFocusedBlockTree:n,lastFocusedDiId:a,blocks:s,latestBlockInfos:l,latestBlockDatas:c,yjsLayer:d,getBlockRef:u,getCtext:f,getMtext:p,getOlinks:_}=o,b=useEventBus(),v=I=>{const U={origin:I,patches:[],reversePatches:[],meta:{isUndoRedo:!1,autoAddUndoPoint:!0,canUndo:!0,envUndoStrategy:"beforeCommit"},envInfo:{onCreate:k(),beforeCommit:null,afterCommit:null},addBlock:W=>(U.patches.push({op:"add",block:W}),U.reversePatches.push({op:"delete",blockId:W.id}),U),updateBlock:W=>{const K=s.get(W.id)?.value;if(!K)throw new Error(`Cannot find old block ${W.id}, maybe you should add it first?`);return U.patches.push({op:"update",block:W}),U.reversePatches.push({op:"update",block:M(K)}),U},deleteBlock:W=>{const K=s.get(W)?.value;if(!K)throw new Error(`Cannot find old block ${W}, maybe you should add it first?`);return U.patches.push({op:"delete",blockId:W}),U.reversePatches.push({op:"add",block:M(K)}),U},commit:()=>{U.envInfo.beforeCommit=k(),x(U),U.envInfo.afterCommit=k()},setMeta:(W,K)=>(U.meta[W]=K,U),addTransaction:W=>(U.patches.push(...W.patches),U.reversePatches.push(...W.reversePatches),U),addReverseTransaction:W=>(U.patches.push(...W.reversePatches),U.reversePatches.push(...W.patches),U)};return U},k=()=>{const I=n.value?.getId()??null,U=a.value??null,K=(U?n.value?.getEditorView(U):null)?.state.selection.toJSON()??null;return{rootBlockId:e.value,focusedTreeId:I,focusedItemId:U,selection:K}},x=I=>{const{origin:U,patches:W}=I;console.debug("Committing transaction with origin:",U,"and patches:",W);const K=U.type==="ui"?d.createSyncLayerTransaction(U):void 0;for(const G of W){const{op:Z}=G;if(Z=="add"||Z=="update"){const oe=G.block,Y=Object.assign({origin:U},E(oe));Y&&L(Y.id,Y,K)}else if(Z=="delete"){const{blockId:oe}=G;V(oe,K)}}K?.commit(),b.emit("afterBlocksTrCommit",[I])},M=I=>{if(I.type=="normalBlock")return{type:"normalBlock",id:I.id,fold:I.fold,parentId:I.parentId,childrenIds:I.childrenIds,content:I.content,metadata:I.metadata};if(I.type=="mirrorBlock")return{type:I.type,id:I.id,fold:I.fold,parentId:I.parentId,childrenIds:I.childrenIds,src:I.src};if(I.type=="virtualBlock")return{type:I.type,id:I.id,fold:I.fold,parentId:I.parentId,childrenIds:I.childrenIds,src:I.src,childrenCreated:I.childrenCreated};throw new Error("Invalid block type")},E=I=>{if(I.type=="normalBlock")return{type:"normalBlock",id:I.id,parentId:I.parentId,parentRef:u(I.parentId),childrenIds:I.childrenIds,childrenRefs:I.childrenIds.map(W=>u(W)),fold:I.fold,deleted:!1,content:I.content,ctext:f(I.content),metadata:I.metadata,mtext:p(I.metadata),olinks:I.content[0]===BLOCK_CONTENT_TYPES.TEXT?_(I.content[1]):[],boosting:0,acturalSrc:I.id,docId:0};if(I.type=="mirrorBlock"){const U=u(I.src).value;return U?{type:"mirrorBlock",id:I.id,parentId:I.parentId,parentRef:u(I.parentId),childrenIds:I.childrenIds,childrenRefs:I.childrenIds.map(K=>u(K)),fold:I.fold,deleted:!1,content:I.content??U.content,ctext:f(I.content),metadata:I.metadata??U.metadata,mtext:p(I.metadata),olinks:I.content[0]===BLOCK_CONTENT_TYPES.TEXT?_(I.content[1]):[],boosting:I.boosting??U.boosting,acturalSrc:I.acturalSrc??U.acturalSrc,src:I.src}:(console.error(`mirror block ${I.id} 的源块 ${I.src} 不存在`),null)}else if(I.type=="virtualBlock"){const U=u(I.src).value;return U?{type:"virtualBlock",id:I.id,parentId:I.parentId,parentRef:u(I.parentId),childrenIds:I.childrenIds,childrenRefs:I.childrenIds.map(K=>u(K)),fold:I.fold,deleted:!1,content:I.content??U.content,ctext:f(I.content),metadata:I.metadata??U.metadata,mtext:p(I.metadata),olinks:I.content[0]===BLOCK_CONTENT_TYPES.TEXT?_(I.content[1]):[],boosting:I.boosting??U.boosting,acturalSrc:I.acturalSrc??U.acturalSrc,src:I.src,childrenCreated:I.childrenCreated}:(console.error(`virtual block ${I.id} 的源块 ${I.src} 不存在`),null)}throw new Error("Invalid block type")},L=(I,U,W)=>{const K=s.get(I)?.value;if(s.has(I))s.get(I).value=U;else{const G=shallowRef(U);s.set(I,G)}if(U&&W){l.get(I);const G=[calcBlockStatus(U.type,U.fold),U.parentId,U.childrenIds,"docId"in U?U.docId:null,"src"in U?U.src:null];if(W.upsertBlockInfo(I,G),U.type=="normalBlock"){c.get(I);const Z=[U.content,U.metadata];W.upsertBlockData(U.docId,I,Z)}K?.type=="normalBlock"&&U.type!="normalBlock"&&W.deleteBlockData(K.docId,I)}},V=(I,U)=>{const W=s.get(I)?.value;W&&U&&(W.deleted=!0,s.delete(I),U.deleteBlockInfo(I),W.type=="normalBlock"&&U.deleteBlockData(W.docId,I))};return{createBlockTransaction:v,addBlock:(I,U)=>v(U).addBlock(I).commit(),updateBlock:(I,U)=>v(U).updateBlock(I).commit(),deleteBlock:(I,U)=>v(U).deleteBlock(I).commit()}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(o,e){return o+e*factor16}function recoverIndex(o){return o&lower16}function recoverOffset(o){return(o-(o&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(e,n,a){this.pos=e,this.delInfo=n,this.recover=a}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&StepMap.empty)return StepMap.empty}recover(e){let n=0,a=recoverIndex(e);if(!this.inverted)for(let s=0;s<a;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[a*3]+n+recoverOffset(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,a){let s=0,l=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let u=this.ranges[d]-(this.inverted?s:0);if(u>e)break;let f=this.ranges[d+l],p=this.ranges[d+c],_=u+f;if(e<=_){let b=f?e==u?-1:e==_?1:n:n,v=u+s+(b<0?0:p);if(a)return v;let k=e==(n<0?u:_)?null:makeRecover(d/3,e-u),x=e==u?DEL_AFTER:e==_?DEL_BEFORE:DEL_ACROSS;return(n<0?e!=u:e!=_)&&(x|=DEL_SIDE),new MapResult(v,x,k)}s+=p-f}return a?e+s:new MapResult(e+s,0,null)}touches(e,n){let a=0,s=recoverIndex(n),l=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let u=this.ranges[d]-(this.inverted?a:0);if(u>e)break;let f=this.ranges[d+l],p=u+f;if(e<=p&&d==s*3)return!0;a+=this.ranges[d+c]-f}return!1}forEach(e){let n=this.inverted?2:1,a=this.inverted?1:2;for(let s=0,l=0;s<this.ranges.length;s+=3){let c=this.ranges[s],d=c-(this.inverted?l:0),u=c+(this.inverted?0:l),f=this.ranges[s+n],p=this.ranges[s+a];e(d,d+f,u,u+p),l+=p-f}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?StepMap.empty:new StepMap(e<0?[0,-e,0]:[0,0,e])}}StepMap.empty=new StepMap([]);class Mapping{constructor(e=[],n,a=0,s=e.length){this.maps=e,this.mirror=n,this.from=a,this.to=s}slice(e=0,n=this.maps.length){return new Mapping(this.maps,this.mirror,e,n)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,a=this.maps.length;n<e.maps.length;n++){let s=e.getMirror(n);this.appendMap(e.maps[n],s!=null&&s<n?a+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,a=this.maps.length+e.maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e.maps[n].invert(),s!=null&&s>n?a-s-1:void 0)}}invert(){let e=new Mapping;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let a=this.from;a<this.to;a++)e=this.maps[a].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,a){let s=0;for(let l=this.from;l<this.to;l++){let c=this.maps[l],d=c.mapResult(e,n);if(d.recover!=null){let u=this.getMirror(l);if(u!=null&&u>l&&u<this.to){l=u,e=this.maps[u].recover(d.recover);continue}}s|=d.delInfo,e=d.pos}return a?e:new MapResult(e,s,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let a=stepsByID[n.stepType];if(!a)throw new RangeError(`No step type ${n.stepType} defined`);return a.fromJSON(e,n)}static jsonID(e,n){if(e in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+e);return stepsByID[e]=n,n.prototype.jsonID=e,n}}class StepResult{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new StepResult(e,null)}static fail(e){return new StepResult(null,e)}static fromReplace(e,n,a,s){try{return StepResult.ok(e.replace(n,a,s))}catch(l){if(l instanceof ReplaceError)return StepResult.fail(l.message);throw l}}}function mapFragment(o,e,n){let a=[];for(let s=0;s<o.childCount;s++){let l=o.child(s);l.content.size&&(l=l.copy(mapFragment(l.content,e,l))),l.isInline&&(l=e(l,n,s)),a.push(l)}return Fragment$1.fromArray(a)}class AddMarkStep extends Step{constructor(e,n,a){super(),this.from=e,this.to=n,this.mark=a}apply(e){let n=e.slice(this.from,this.to),a=e.resolve(this.from),s=a.node(a.sharedDepth(this.to)),l=new Slice(mapFragment(n.content,(c,d)=>!c.isAtom||!d.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),s),n.openStart,n.openEnd);return StepResult.fromReplace(e,this.from,this.to,l)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return n.deleted&&a.deleted||n.pos>=a.pos?null:new AddMarkStep(n.pos,a.pos,this.mark)}merge(e){return e instanceof AddMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new AddMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(n.from,n.to,e.markFromJSON(n.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(e,n,a){super(),this.from=e,this.to=n,this.mark=a}apply(e){let n=e.slice(this.from,this.to),a=new Slice(mapFragment(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return StepResult.fromReplace(e,this.from,this.to,a)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return n.deleted&&a.deleted||n.pos>=a.pos?null:new RemoveMarkStep(n.pos,a.pos,this.mark)}merge(e){return e instanceof RemoveMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new RemoveMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(n.from,n.to,e.markFromJSON(n.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return StepResult.fail("No node at mark step's position");let a=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment$1.from(a),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let a=this.mark.addToSet(n.marks);if(a.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(a))return new AddNodeMarkStep(this.pos,n.marks[s]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new AddNodeMarkStep(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(n.pos,e.markFromJSON(n.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return StepResult.fail("No node at mark step's position");let a=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment$1.from(a),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new RemoveNodeMarkStep(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(n.pos,e.markFromJSON(n.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(e,n,a,s=!1){super(),this.from=e,this.to=n,this.slice=a,this.structure=s}apply(e){return this.structure&&contentBetween(e,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(e){return new ReplaceStep(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return n.deletedAcross&&a.deletedAcross?null:new ReplaceStep(n.pos,Math.max(n.pos,a.pos),this.slice)}merge(e){if(!(e instanceof ReplaceStep)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Slice.empty:new Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ReplaceStep(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Slice.empty:new Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ReplaceStep(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(n.from,n.to,Slice.fromJSON(e,n.slice),!!n.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(e,n,a,s,l,c,d=!1){super(),this.from=e,this.to=n,this.gapFrom=a,this.gapTo=s,this.slice=l,this.insert=c,this.structure=d}apply(e){if(this.structure&&(contentBetween(e,this.from,this.gapFrom)||contentBetween(e,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return StepResult.fail("Gap is not a flat range");let a=this.slice.insertAt(this.insert,n.content);return a?StepResult.fromReplace(e,this.from,this.to,a):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),a=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),l=this.to==this.gapTo?a.pos:e.map(this.gapTo,1);return n.deletedAcross&&a.deletedAcross||s<n.pos||l>a.pos?null:new ReplaceAroundStep(n.pos,a.pos,s,l,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(n.from,n.to,n.gapFrom,n.gapTo,Slice.fromJSON(e,n.slice),n.insert,!!n.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(o,e,n){let a=o.resolve(e),s=n-e,l=a.depth;for(;s>0&&l>0&&a.indexAfter(l)==a.node(l).childCount;)l--,s--;if(s>0){let c=a.node(l).maybeChild(a.indexAfter(l));for(;s>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,s--}}return!1}function addMark(o,e,n,a){let s=[],l=[],c,d;o.doc.nodesBetween(e,n,(u,f,p)=>{if(!u.isInline)return;let _=u.marks;if(!a.isInSet(_)&&p.type.allowsMarkType(a.type)){let b=Math.max(f,e),v=Math.min(f+u.nodeSize,n),k=a.addToSet(_);for(let x=0;x<_.length;x++)_[x].isInSet(k)||(c&&c.to==b&&c.mark.eq(_[x])?c.to=v:s.push(c=new RemoveMarkStep(b,v,_[x])));d&&d.to==b?d.to=v:l.push(d=new AddMarkStep(b,v,a))}}),s.forEach(u=>o.step(u)),l.forEach(u=>o.step(u))}function removeMark(o,e,n,a){let s=[],l=0;o.doc.nodesBetween(e,n,(c,d)=>{if(!c.isInline)return;l++;let u=null;if(a instanceof MarkType){let f=c.marks,p;for(;p=a.isInSet(f);)(u||(u=[])).push(p),f=p.removeFromSet(f)}else a?a.isInSet(c.marks)&&(u=[a]):u=c.marks;if(u&&u.length){let f=Math.min(d+c.nodeSize,n);for(let p=0;p<u.length;p++){let _=u[p],b;for(let v=0;v<s.length;v++){let k=s[v];k.step==l-1&&_.eq(s[v].style)&&(b=k)}b?(b.to=f,b.step=l):s.push({style:_,from:Math.max(d,e),to:f,step:l})}}}),s.forEach(c=>o.step(new RemoveMarkStep(c.from,c.to,c.style)))}function clearIncompatible(o,e,n,a=n.contentMatch,s=!0){let l=o.doc.nodeAt(e),c=[],d=e+1;for(let u=0;u<l.childCount;u++){let f=l.child(u),p=d+f.nodeSize,_=a.matchType(f.type);if(!_)c.push(new ReplaceStep(d,p,Slice.empty));else{a=_;for(let b=0;b<f.marks.length;b++)n.allowsMarkType(f.marks[b].type)||o.step(new RemoveMarkStep(d,p,f.marks[b]));if(s&&f.isText&&n.whitespace!="pre"){let b,v=/\r?\n|\r/g,k;for(;b=v.exec(f.text);)k||(k=new Slice(Fragment$1.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),c.push(new ReplaceStep(d+b.index,d+b.index+b[0].length,k))}}d=p}if(!a.validEnd){let u=a.fillBefore(Fragment$1.empty,!0);o.replace(d,d,new Slice(u,0,0))}for(let u=c.length-1;u>=0;u--)o.step(c[u])}function lift(o,e,n){let{$from:a,$to:s,depth:l}=e,c=a.before(l+1),d=s.after(l+1),u=c,f=d,p=Fragment$1.empty,_=0;for(let k=l,x=!1;k>n;k--)x||a.index(k)>0?(x=!0,p=Fragment$1.from(a.node(k).copy(p)),_++):u--;let b=Fragment$1.empty,v=0;for(let k=l,x=!1;k>n;k--)x||s.after(k+1)<s.end(k)?(x=!0,b=Fragment$1.from(s.node(k).copy(b)),v++):f++;o.step(new ReplaceAroundStep(u,f,c,d,new Slice(p.append(b),_,v),p.size-_,!0))}function wrap(o,e,n){let a=Fragment$1.empty;for(let c=n.length-1;c>=0;c--){if(a.size){let d=n[c].type.contentMatch.matchFragment(a);if(!d||!d.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}a=Fragment$1.from(n[c].type.create(n[c].attrs,a))}let s=e.start,l=e.end;o.step(new ReplaceAroundStep(s,l,s,l,new Slice(a,0,0),n.length,!0))}function setBlockType(o,e,n,a,s){if(!a.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let l=o.steps.length;o.doc.nodesBetween(e,n,(c,d)=>{let u=typeof s=="function"?s(c):s;if(c.isTextblock&&!c.hasMarkup(a,u)&&canChangeType(o.doc,o.mapping.slice(l).map(d),a)){let f=null;if(a.schema.linebreakReplacement){let v=a.whitespace=="pre",k=!!a.contentMatch.matchType(a.schema.linebreakReplacement);v&&!k?f=!1:!v&&k&&(f=!0)}f===!1&&replaceLinebreaks(o,c,d,l),clearIncompatible(o,o.mapping.slice(l).map(d,1),a,void 0,f===null);let p=o.mapping.slice(l),_=p.map(d,1),b=p.map(d+c.nodeSize,1);return o.step(new ReplaceAroundStep(_,b,_+1,b-1,new Slice(Fragment$1.from(a.create(u,null,c.marks)),0,0),1,!0)),f===!0&&replaceNewlines(o,c,d,l),!1}})}function replaceNewlines(o,e,n,a){e.forEach((s,l)=>{if(s.isText){let c,d=/\r?\n|\r/g;for(;c=d.exec(s.text);){let u=o.mapping.slice(a).map(n+1+l+c.index);o.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(o,e,n,a){e.forEach((s,l)=>{if(s.type==s.type.schema.linebreakReplacement){let c=o.mapping.slice(a).map(n+1+l);o.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function canChangeType(o,e,n){let a=o.resolve(e),s=a.index();return a.parent.canReplaceWith(s,s+1,n)}function setNodeMarkup(o,e,n,a,s){let l=o.doc.nodeAt(e);if(!l)throw new RangeError("No node at given position");n||(n=l.type);let c=n.create(a,null,s||l.marks);if(l.isLeaf)return o.replaceWith(e,e+l.nodeSize,c);if(!n.validContent(l.content))throw new RangeError("Invalid content for node type "+n.name);o.step(new ReplaceAroundStep(e,e+l.nodeSize,e+1,e+l.nodeSize-1,new Slice(Fragment$1.from(c),0,0),1,!0))}function split(o,e,n=1,a){let s=o.doc.resolve(e),l=Fragment$1.empty,c=Fragment$1.empty;for(let d=s.depth,u=s.depth-n,f=n-1;d>u;d--,f--){l=Fragment$1.from(s.node(d).copy(l));let p=a&&a[f];c=Fragment$1.from(p?p.type.create(p.attrs,c):s.node(d).copy(c))}o.step(new ReplaceStep(e,e,new Slice(l.append(c),n,n),!0))}function join$1(o,e,n){let a=null,{linebreakReplacement:s}=o.doc.type.schema,l=o.doc.resolve(e-n),c=l.node().type;if(s&&c.inlineContent){let p=c.whitespace=="pre",_=!!c.contentMatch.matchType(s);p&&!_?a=!1:!p&&_&&(a=!0)}let d=o.steps.length;if(a===!1){let p=o.doc.resolve(e+n);replaceLinebreaks(o,p.node(),p.before(),d)}c.inlineContent&&clearIncompatible(o,e+n-1,c,l.node().contentMatchAt(l.index()),a==null);let u=o.mapping.slice(d),f=u.map(e-n);if(o.step(new ReplaceStep(f,u.map(e+n,-1),Slice.empty,!0)),a===!0){let p=o.doc.resolve(f);replaceNewlines(o,p.node(),p.before(),o.steps.length)}return o}function insertPoint(o,e,n){let a=o.resolve(e);if(a.parent.canReplaceWith(a.index(),a.index(),n))return e;if(a.parentOffset==0)for(let s=a.depth-1;s>=0;s--){let l=a.index(s);if(a.node(s).canReplaceWith(l,l,n))return a.before(s+1);if(l>0)return null}if(a.parentOffset==a.parent.content.size)for(let s=a.depth-1;s>=0;s--){let l=a.indexAfter(s);if(a.node(s).canReplaceWith(l,l,n))return a.after(s+1);if(l<a.node(s).childCount)return null}return null}function dropPoint(o,e,n){let a=o.resolve(e);if(!n.content.size)return e;let s=n.content;for(let l=0;l<n.openStart;l++)s=s.firstChild.content;for(let l=1;l<=(n.openStart==0&&n.size?2:1);l++)for(let c=a.depth;c>=0;c--){let d=c==a.depth?0:a.pos<=(a.start(c+1)+a.end(c+1))/2?-1:1,u=a.index(c)+(d>0?1:0),f=a.node(c),p=!1;if(l==1)p=f.canReplace(u,u,s);else{let _=f.contentMatchAt(u).findWrapping(s.firstChild.type);p=_&&f.canReplaceWith(u,u,_[0])}if(p)return d==0?a.pos:d<0?a.before(c+1):a.after(c+1)}return null}function replaceStep(o,e,n=e,a=Slice.empty){if(e==n&&!a.size)return null;let s=o.resolve(e),l=o.resolve(n);return fitsTrivially(s,l,a)?new ReplaceStep(e,n,a):new Fitter(s,l,a).fit()}function fitsTrivially(o,e,n){return!n.openStart&&!n.openEnd&&o.start()==e.start()&&o.parent.canReplace(o.index(),e.index(),n.content)}class Fitter{constructor(e,n,a){this.$from=e,this.$to=n,this.unplaced=a,this.frontier=[],this.placed=Fragment$1.empty;for(let s=0;s<=e.depth;s++){let l=e.node(s);this.frontier.push({type:l.type,match:l.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Fragment$1.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,a=this.$from,s=this.close(e<0?this.$to:a.doc.resolve(e));if(!s)return null;let l=this.placed,c=a.depth,d=s.depth;for(;c&&d&&l.childCount==1;)l=l.firstChild.content,c--,d--;let u=new Slice(l,c,d);return e>-1?new ReplaceAroundStep(a.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||a.pos!=this.$to.pos?new ReplaceStep(a.pos,s.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,a=0,s=this.unplaced.openEnd;a<e;a++){let l=n.firstChild;if(n.childCount>1&&(s=0),l.type.spec.isolating&&s<=a){e=a;break}n=l.content}for(let n=1;n<=2;n++)for(let a=n==1?e:this.unplaced.openStart;a>=0;a--){let s,l=null;a?(l=contentAt(this.unplaced.content,a-1).firstChild,s=l.content):s=this.unplaced.content;let c=s.firstChild;for(let d=this.depth;d>=0;d--){let{type:u,match:f}=this.frontier[d],p,_=null;if(n==1&&(c?f.matchType(c.type)||(_=f.fillBefore(Fragment$1.from(c),!1)):l&&u.compatibleContent(l.type)))return{sliceDepth:a,frontierDepth:d,parent:l,inject:_};if(n==2&&c&&(p=f.findWrapping(c.type)))return{sliceDepth:a,frontierDepth:d,parent:l,wrap:p};if(l&&f.matchType(l.type))break}}}openMore(){let{content:e,openStart:n,openEnd:a}=this.unplaced,s=contentAt(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Slice(e,n+1,Math.max(a,s.size+n>=e.size-a?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:a}=this.unplaced,s=contentAt(e,n);if(s.childCount<=1&&n>0){let l=e.size-n<=n+s.size;this.unplaced=new Slice(dropFromFragment(e,n-1,1),n-1,l?n-1:a)}else this.unplaced=new Slice(dropFromFragment(e,n,1),n,a)}placeNodes({sliceDepth:e,frontierDepth:n,parent:a,inject:s,wrap:l}){for(;this.depth>n;)this.closeFrontierNode();if(l)for(let x=0;x<l.length;x++)this.openFrontierNode(l[x]);let c=this.unplaced,d=a?a.content:c.content,u=c.openStart-e,f=0,p=[],{match:_,type:b}=this.frontier[n];if(s){for(let x=0;x<s.childCount;x++)p.push(s.child(x));_=_.matchFragment(s)}let v=d.size+e-(c.content.size-c.openEnd);for(;f<d.childCount;){let x=d.child(f),M=_.matchType(x.type);if(!M)break;f++,(f>1||u==0||x.content.size)&&(_=M,p.push(closeNodeStart(x.mark(b.allowedMarks(x.marks)),f==1?u:0,f==d.childCount?v:-1)))}let k=f==d.childCount;k||(v=-1),this.placed=addToFragment(this.placed,n,Fragment$1.from(p)),this.frontier[n].match=_,k&&v<0&&a&&a.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,M=d;x<v;x++){let E=M.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),M=E.content}this.unplaced=k?e==0?Slice.empty:new Slice(dropFromFragment(c.content,e-1,1),e-1,v<0?c.openEnd:e-1):new Slice(dropFromFragment(c.content,e,f),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:a}=this.$to,s=this.$to.after(a);for(;a>1&&s==this.$to.end(--a);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:a,type:s}=this.frontier[n],l=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),c=contentAfterFits(e,n,s,a,l);if(c){for(let d=n-1;d>=0;d--){let{match:u,type:f}=this.frontier[d],p=contentAfterFits(e,d,f,u,!0);if(!p||p.childCount)continue e}return{depth:n,fit:c,move:l?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=addToFragment(this.placed,n.depth,n.fit)),e=n.move;for(let a=n.depth+1;a<=e.depth;a++){let s=e.node(a),l=s.type.contentMatch.fillBefore(s.content,!0,e.index(a));this.openFrontierNode(s.type,s.attrs,l)}return e}openFrontierNode(e,n=null,a){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=addToFragment(this.placed,this.depth,Fragment$1.from(e.create(n,a))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Fragment$1.empty,!0);n.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,n))}}function dropFromFragment(o,e,n){return e==0?o.cutByIndex(n,o.childCount):o.replaceChild(0,o.firstChild.copy(dropFromFragment(o.firstChild.content,e-1,n)))}function addToFragment(o,e,n){return e==0?o.append(n):o.replaceChild(o.childCount-1,o.lastChild.copy(addToFragment(o.lastChild.content,e-1,n)))}function contentAt(o,e){for(let n=0;n<e;n++)o=o.firstChild.content;return o}function closeNodeStart(o,e,n){if(e<=0)return o;let a=o.content;return e>1&&(a=a.replaceChild(0,closeNodeStart(a.firstChild,e-1,a.childCount==1?n-1:0))),e>0&&(a=o.type.contentMatch.fillBefore(a).append(a),n<=0&&(a=a.append(o.type.contentMatch.matchFragment(a).fillBefore(Fragment$1.empty,!0)))),o.copy(a)}function contentAfterFits(o,e,n,a,s){let l=o.node(e),c=s?o.indexAfter(e):o.index(e);if(c==l.childCount&&!n.compatibleContent(l.type))return null;let d=a.fillBefore(l.content,!0,c);return d&&!invalidMarks(n,l.content,c)?d:null}function invalidMarks(o,e,n){for(let a=n;a<e.childCount;a++)if(!o.allowsMarks(e.child(a).marks))return!0;return!1}function definesContent(o){return o.spec.defining||o.spec.definingForContent}function replaceRange$1(o,e,n,a){if(!a.size)return o.deleteRange(e,n);let s=o.doc.resolve(e),l=o.doc.resolve(n);if(fitsTrivially(s,l,a))return o.step(new ReplaceStep(e,n,a));let c=coveredDepths(s,o.doc.resolve(n));c[c.length-1]==0&&c.pop();let d=-(s.depth+1);c.unshift(d);for(let b=s.depth,v=s.pos-1;b>0;b--,v--){let k=s.node(b).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;c.indexOf(b)>-1?d=b:s.before(b)==v&&c.splice(1,0,-b)}let u=c.indexOf(d),f=[],p=a.openStart;for(let b=a.content,v=0;;v++){let k=b.firstChild;if(f.push(k),v==a.openStart)break;b=k.content}for(let b=p-1;b>=0;b--){let v=f[b],k=definesContent(v.type);if(k&&!v.sameMarkup(s.node(Math.abs(d)-1)))p=b;else if(k||!v.type.isTextblock)break}for(let b=a.openStart;b>=0;b--){let v=(b+p+1)%(a.openStart+1),k=f[v];if(k)for(let x=0;x<c.length;x++){let M=c[(x+u)%c.length],E=!0;M<0&&(E=!1,M=-M);let L=s.node(M-1),V=s.index(M-1);if(L.canReplaceWith(V,V,k.type,k.marks))return o.replace(s.before(M),E?l.after(M):n,new Slice(closeFragment(a.content,0,a.openStart,v),v,a.openEnd))}}let _=o.steps.length;for(let b=c.length-1;b>=0&&(o.replace(e,n,a),!(o.steps.length>_));b--){let v=c[b];v<0||(e=s.before(v),n=l.after(v))}}function closeFragment(o,e,n,a,s){if(e<n){let l=o.firstChild;o=o.replaceChild(0,l.copy(closeFragment(l.content,e+1,n,a,l)))}if(e>a){let l=s.contentMatchAt(0),c=l.fillBefore(o).append(o);o=c.append(l.matchFragment(c).fillBefore(Fragment$1.empty,!0))}return o}function replaceRangeWith(o,e,n,a){if(!a.isInline&&e==n&&o.doc.resolve(e).parent.content.size){let s=insertPoint(o.doc,e,a.type);s!=null&&(e=n=s)}o.replaceRange(e,n,new Slice(Fragment$1.from(a),0,0))}function deleteRange(o,e,n){let a=o.doc.resolve(e),s=o.doc.resolve(n),l=coveredDepths(a,s);for(let c=0;c<l.length;c++){let d=l[c],u=c==l.length-1;if(u&&d==0||a.node(d).type.contentMatch.validEnd)return o.delete(a.start(d),s.end(d));if(d>0&&(u||a.node(d-1).canReplace(a.index(d-1),s.indexAfter(d-1))))return o.delete(a.before(d),s.after(d))}for(let c=1;c<=a.depth&&c<=s.depth;c++)if(e-a.start(c)==a.depth-c&&n>a.end(c)&&s.end(c)-n!=s.depth-c&&a.start(c-1)==s.start(c-1)&&a.node(c-1).canReplace(a.index(c-1),s.index(c-1)))return o.delete(a.before(c),n);o.delete(e,n)}function coveredDepths(o,e){let n=[],a=Math.min(o.depth,e.depth);for(let s=a;s>=0;s--){let l=o.start(s);if(l<o.pos-(o.depth-s)||e.end(s)>e.pos+(e.depth-s)||o.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(l==e.start(s)||s==o.depth&&s==e.depth&&o.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==l-1)&&n.push(s)}return n}class AttrStep extends Step{constructor(e,n,a){super(),this.pos=e,this.attr=n,this.value=a}apply(e){let n=e.nodeAt(this.pos);if(!n)return StepResult.fail("No node at attribute step's position");let a=Object.create(null);for(let l in n.attrs)a[l]=n.attrs[l];a[this.attr]=this.value;let s=n.type.create(a,null,n.marks);return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment$1.from(s),0,n.isLeaf?0:1))}getMap(){return StepMap.empty}invert(e){return new AttrStep(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new AttrStep(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(n.pos,n.attr,n.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let a=e.type.create(n,e.content,e.marks);return StepResult.ok(a)}getMap(){return StepMap.empty}invert(e){return new DocAttrStep(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(n.attr,n.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function o(e){let n=Error.call(this,e);return n.__proto__=o.prototype,n};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new TransformError(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,a=Slice.empty){let s=replaceStep(this.doc,e,n,a);return s&&this.step(s),this}replaceWith(e,n,a){return this.replace(e,n,new Slice(Fragment$1.from(a),0,0))}delete(e,n){return this.replace(e,n,Slice.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,a){return replaceRange$1(this,e,n,a),this}replaceRangeWith(e,n,a){return replaceRangeWith(this,e,n,a),this}deleteRange(e,n){return deleteRange(this,e,n),this}lift(e,n){return lift(this,e,n),this}join(e,n=1){return join$1(this,e,n),this}wrap(e,n){return wrap(this,e,n),this}setBlockType(e,n=e,a,s=null){return setBlockType(this,e,n,a,s),this}setNodeMarkup(e,n,a=null,s){return setNodeMarkup(this,e,n,a,s),this}setNodeAttribute(e,n,a){return this.step(new AttrStep(e,n,a)),this}setDocAttribute(e,n){return this.step(new DocAttrStep(e,n)),this}addNodeMark(e,n){return this.step(new AddNodeMarkStep(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Mark)){let a=this.doc.nodeAt(e);if(!a)throw new RangeError("No node at position "+e);if(n=n.isInSet(a.marks),!n)return this}return this.step(new RemoveNodeMarkStep(e,n)),this}split(e,n=1,a){return split(this,e,n,a),this}addMark(e,n,a){return addMark(this,e,n,a),this}removeMark(e,n,a){return removeMark(this,e,n,a),this}clearIncompatible(e,n,a){return clearIncompatible(this,e,n,a),this}}const classesById=Object.create(null);class Selection{constructor(e,n,a){this.$anchor=e,this.$head=n,this.ranges=a||[new SelectionRange$1(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Slice.empty){let a=n.content.lastChild,s=null;for(let d=0;d<n.openEnd;d++)s=a,a=a.lastChild;let l=e.steps.length,c=this.ranges;for(let d=0;d<c.length;d++){let{$from:u,$to:f}=c[d],p=e.mapping.slice(l);e.replaceRange(p.map(u.pos),p.map(f.pos),d?Slice.empty:n),d==0&&selectionToInsertionEnd(e,l,(a?a.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let a=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:c,$to:d}=s[l],u=e.mapping.slice(a),f=u.map(c.pos),p=u.map(d.pos);l?e.deleteRange(f,p):(e.replaceRangeWith(f,p,n),selectionToInsertionEnd(e,a,n.isInline?-1:1))}}static findFrom(e,n,a=!1){let s=e.parent.inlineContent?new TextSelection(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),n,a);if(s)return s;for(let l=e.depth-1;l>=0;l--){let c=n<0?findSelectionIn(e.node(0),e.node(l),e.before(l+1),e.index(l),n,a):findSelectionIn(e.node(0),e.node(l),e.after(l+1),e.index(l)+1,n,a);if(c)return c}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new AllSelection(e.node(0))}static atStart(e){return findSelectionIn(e,e,0,0,1)||new AllSelection(e)}static atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new AllSelection(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let a=classesById[n.type];if(!a)throw new RangeError(`No selection type ${n.type} defined`);return a.fromJSON(e,n)}static jsonID(e,n){if(e in classesById)throw new RangeError("Duplicate use of selection JSON ID "+e);return classesById[e]=n,n.prototype.jsonID=e,n}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;let SelectionRange$1=class{constructor(e,n){this.$from=e,this.$to=n}},warnedAboutTextSelection=!1;function checkTextSelection(o){!warnedAboutTextSelection&&!o.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+o.parent.type.name+")"))}class TextSelection extends Selection{constructor(e,n=e){checkTextSelection(e),checkTextSelection(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let a=e.resolve(n.map(this.head));if(!a.parent.inlineContent)return Selection.near(a);let s=e.resolve(n.map(this.anchor));return new TextSelection(s.parent.inlineContent?s:a,a)}replace(e,n=Slice.empty){if(super.replace(e,n),n==Slice.empty){let a=this.$from.marksAcross(this.$to);a&&e.ensureMarks(a)}}eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,a=n){let s=e.resolve(n);return new this(s,a==n?s:e.resolve(a))}static between(e,n,a){let s=e.pos-n.pos;if((!a||s)&&(a=s>=0?1:-1),!n.parent.inlineContent){let l=Selection.findFrom(n,a,!0)||Selection.findFrom(n,-a,!0);if(l)n=l.$head;else return Selection.near(n,a)}return e.parent.inlineContent||(s==0?e=n:(e=(Selection.findFrom(e,-a,!0)||Selection.findFrom(e,a,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new TextSelection(e,n)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(e,n){this.anchor=e,this.head=n}map(e){return new TextBookmark(e.map(this.anchor),e.map(this.head))}resolve(e){return TextSelection.between(e.resolve(this.anchor),e.resolve(this.head))}}class NodeSelection extends Selection{constructor(e){let n=e.nodeAfter,a=e.node(0).resolve(e.pos+n.nodeSize);super(e,a),this.node=n}map(e,n){let{deleted:a,pos:s}=n.mapResult(this.anchor),l=e.resolve(s);return a?Selection.near(l):new NodeSelection(l)}content(){return new Slice(Fragment$1.from(this.node),0,0)}eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(n.anchor))}static create(e,n){return new NodeSelection(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:a}=e.mapResult(this.anchor);return n?new TextBookmark(a,a):new NodeBookmark(a)}resolve(e){let n=e.resolve(this.anchor),a=n.nodeAfter;return a&&NodeSelection.isSelectable(a)?new NodeSelection(n):Selection.near(n)}}class AllSelection extends Selection{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Slice.empty){if(n==Slice.empty){e.delete(0,e.doc.content.size);let a=Selection.atStart(e.doc);a.eq(e.selection)||e.setSelection(a)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new AllSelection(e)}map(e){return new AllSelection(e)}eq(e){return e instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(o){return new AllSelection(o)}};function findSelectionIn(o,e,n,a,s,l=!1){if(e.inlineContent)return TextSelection.create(o,n);for(let c=a-(s>0?0:1);s>0?c<e.childCount:c>=0;c+=s){let d=e.child(c);if(d.isAtom){if(!l&&NodeSelection.isSelectable(d))return NodeSelection.create(o,n-(s<0?d.nodeSize:0))}else{let u=findSelectionIn(o,d,n+s,s<0?d.childCount:0,s,l);if(u)return u}n+=d.nodeSize*s}return null}function selectionToInsertionEnd(o,e,n){let a=o.steps.length-1;if(a<e)return;let s=o.steps[a];if(!(s instanceof ReplaceStep||s instanceof ReplaceAroundStep))return;let l=o.mapping.maps[a],c;l.forEach((d,u,f,p)=>{c==null&&(c=p)}),o.setSelection(Selection.near(o.doc.resolve(c),n))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;let Transaction$1=class extends Transform{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=UPDATED_MARKS,this}ensureMarks(e){return Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let a=this.selection;return n&&(e=e.mark(this.storedMarks||(a.empty?a.$from.marks():a.$from.marksAcross(a.$to)||Mark.none))),a.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,a){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(a==null&&(a=n),a=a??n,!e)return this.deleteRange(n,a);let l=this.storedMarks;if(!l){let c=this.doc.resolve(n);l=a==n?c.marks():c.marksAcross(this.doc.resolve(a))}return this.replaceRangeWith(n,a,s.text(e,l)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}};function bind$1(o,e){return!e||!o?o:o.bind(e)}class FieldDesc{constructor(e,n,a){this.name=e,this.init=bind$1(n.init,a),this.apply=bind$1(n.apply,a)}}const baseFields=[new FieldDesc("doc",{init(o){return o.doc||o.schema.topNodeType.createAndFill()},apply(o){return o.doc}}),new FieldDesc("selection",{init(o,e){return o.selection||Selection.atStart(e.doc)},apply(o){return o.selection}}),new FieldDesc("storedMarks",{init(o){return o.storedMarks||null},apply(o,e,n,a){return a.selection.$cursor?o.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(o,e){return o.scrolledIntoView?e+1:e}})];let Configuration$1=class{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),n&&n.forEach(a=>{if(this.pluginsByKey[a.key])throw new RangeError("Adding different instances of a keyed plugin ("+a.key+")");this.plugins.push(a),this.pluginsByKey[a.key]=a,a.spec.state&&this.fields.push(new FieldDesc(a.key,a.spec.state,a))})}},EditorState$1=class Pt{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let a=0;a<this.config.plugins.length;a++)if(a!=n){let s=this.config.plugins[a];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],a=this.applyInner(e),s=null;for(;;){let l=!1;for(let c=0;c<this.config.plugins.length;c++){let d=this.config.plugins[c];if(d.spec.appendTransaction){let u=s?s[c].n:0,f=s?s[c].state:this,p=u<n.length&&d.spec.appendTransaction.call(d,u?n.slice(u):n,f,a);if(p&&a.filterTransaction(p,c)){if(p.setMeta("appendedTransaction",e),!s){s=[];for(let _=0;_<this.config.plugins.length;_++)s.push(_<c?{state:a,n:n.length}:{state:this,n:0})}n.push(p),a=a.applyInner(p),l=!0}s&&(s[c]={state:a,n:n.length})}}if(!l)return{state:a,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Pt(this.config),a=this.config.fields;for(let s=0;s<a.length;s++){let l=a[s];n[l.name]=l.apply(e,this[l.name],this,n)}return n}get tr(){return new Transaction$1(this)}static create(e){let n=new Configuration$1(e.doc?e.doc.type.schema:e.schema,e.plugins),a=new Pt(n);for(let s=0;s<n.fields.length;s++)a[n.fields[s].name]=n.fields[s].init(e,a);return a}reconfigure(e){let n=new Configuration$1(this.schema,e.plugins),a=n.fields,s=new Pt(n);for(let l=0;l<a.length;l++){let c=a[l].name;s[c]=this.hasOwnProperty(c)?this[c]:a[l].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(a=>a.toJSON())),e&&typeof e=="object")for(let a in e){if(a=="doc"||a=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[a],l=s.spec.state;l&&l.toJSON&&(n[a]=l.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,a){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Configuration$1(e.schema,e.plugins),l=new Pt(s);return s.fields.forEach(c=>{if(c.name=="doc")l.doc=Node$1.fromJSON(e.schema,n.doc);else if(c.name=="selection")l.selection=Selection.fromJSON(l.doc,n.selection);else if(c.name=="storedMarks")n.storedMarks&&(l.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(a)for(let d in a){let u=a[d],f=u.spec.state;if(u.key==c.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,d)){l[c.name]=f.fromJSON.call(u,e,n[d],l);return}}l[c.name]=c.init(e,l)}}),l}};function bindProps(o,e,n){for(let a in o){let s=o[a];s instanceof Function?s=s.bind(e):a=="handleDOMEvents"&&(s=bindProps(s,e,{})),n[a]=s}return n}class Plugin{constructor(e){this.spec=e,this.props={},e.props&&bindProps(e.props,this,this.props),this.key=e.key?e.key.key:createKey("plugin")}getState(e){return e[this.key]}}const keys=Object.create(null);function createKey(o){return o in keys?o+"$"+ ++keys[o]:(keys[o]=0,o+"$")}const domIndex$1=function(o){for(var e=0;;e++)if(o=o.previousSibling,!o)return e},parentNode=function(o){let e=o.assignedSlot||o.parentNode;return e&&e.nodeType==11?e.host:e};let reusedRange=null;const textRange$1=function(o,e,n){let a=reusedRange||(reusedRange=document.createRange());return a.setEnd(o,n??o.nodeValue.length),a.setStart(o,e||0),a},clearReusedRange=function(){reusedRange=null},isEquivalentPosition$1=function(o,e,n,a){return n&&(scanFor$1(o,e,n,a,-1)||scanFor$1(o,e,n,a,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor$1(o,e,n,a,s){for(;;){if(o==n&&e==a)return!0;if(e==(s<0?0:nodeSize$1(o))){let l=o.parentNode;if(!l||l.nodeType!=1||hasBlockDesc(o)||atomElements.test(o.nodeName)||o.contentEditable=="false")return!1;e=domIndex$1(o)+(s<0?0:1),o=l}else if(o.nodeType==1){if(o=o.childNodes[e+(s<0?-1:0)],o.contentEditable=="false")return!1;e=s<0?nodeSize$1(o):0}else return!1}}function nodeSize$1(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function textNodeBefore$1(o,e){for(;;){if(o.nodeType==3&&e)return o;if(o.nodeType==1&&e>0){if(o.contentEditable=="false")return null;o=o.childNodes[e-1],e=nodeSize$1(o)}else if(o.parentNode&&!hasBlockDesc(o))e=domIndex$1(o),o=o.parentNode;else return null}}function textNodeAfter$1(o,e){for(;;){if(o.nodeType==3&&e<o.nodeValue.length)return o;if(o.nodeType==1&&e<o.childNodes.length){if(o.contentEditable=="false")return null;o=o.childNodes[e],e=0}else if(o.parentNode&&!hasBlockDesc(o))e=domIndex$1(o)+1,o=o.parentNode;else return null}}function isOnEdge(o,e,n){for(let a=e==0,s=e==nodeSize$1(o);a||s;){if(o==n)return!0;let l=domIndex$1(o);if(o=o.parentNode,!o)return!1;a=a&&l==0,s=s&&l==nodeSize$1(o)}}function hasBlockDesc(o){let e;for(let n=o;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==o||e.contentDOM==o)}const selectionCollapsed=function(o){return o.focusNode&&isEquivalentPosition$1(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)};function keyEvent(o,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=o,n.key=n.code=e,n}function deepActiveElement(o){let e=o.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function caretFromPoint(o,e,n){if(o.caretPositionFromPoint)try{let a=o.caretPositionFromPoint(e,n);if(a)return{node:a.offsetNode,offset:Math.min(nodeSize$1(a.offsetNode),a.offset)}}catch{}if(o.caretRangeFromPoint){let a=o.caretRangeFromPoint(e,n);if(a)return{node:a.startContainer,offset:Math.min(nodeSize$1(a.startContainer),a.startOffset)}}}const nav$1=typeof navigator<"u"?navigator:null,doc$1=typeof document<"u"?document:null,agent=nav$1&&nav$1.userAgent||"",ie_edge$1=/Edge\/(\d+)/.exec(agent),ie_upto10$1=/MSIE \d/.exec(agent),ie_11up$1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$2=!!(ie_upto10$1||ie_11up$1||ie_edge$1),ie_version=ie_upto10$1?document.documentMode:ie_11up$1?+ie_11up$1[1]:ie_edge$1?+ie_edge$1[1]:0,gecko$1=!ie$2&&/gecko\/(\d+)/i.test(agent);gecko$1&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$2&&/Chrome\/(\d+)/.exec(agent),chrome$1=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari$1=!ie$2&&!!nav$1&&/Apple Computer/.test(nav$1.vendor),ios$1=safari$1&&(/Mobile\/\w+/.test(agent)||!!nav$1&&nav$1.maxTouchPoints>2),mac$2=ios$1||(nav$1?/Mac/.test(nav$1.platform):!1),windows=nav$1?/Win/.test(nav$1.platform):!1,android$1=/Android \d/.test(agent),webkit$1=!!doc$1&&"webkitFontSmoothing"in doc$1.documentElement.style,webkit_version=webkit$1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect$1(o){let e=o.defaultView&&o.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:o.documentElement.clientWidth,top:0,bottom:o.documentElement.clientHeight}}function getSide$1(o,e){return typeof o=="number"?o:o[e]}function clientRect(o){let e=o.getBoundingClientRect(),n=e.width/o.offsetWidth||1,a=e.height/o.offsetHeight||1;return{left:e.left,right:e.left+o.clientWidth*n,top:e.top,bottom:e.top+o.clientHeight*a}}function scrollRectIntoView$1(o,e,n){let a=o.someProp("scrollThreshold")||0,s=o.someProp("scrollMargin")||5,l=o.dom.ownerDocument;for(let c=n||o.dom;c;c=parentNode(c)){if(c.nodeType!=1)continue;let d=c,u=d==l.body,f=u?windowRect$1(l):clientRect(d),p=0,_=0;if(e.top<f.top+getSide$1(a,"top")?_=-(f.top-e.top+getSide$1(s,"top")):e.bottom>f.bottom-getSide$1(a,"bottom")&&(_=e.bottom-e.top>f.bottom-f.top?e.top+getSide$1(s,"top")-f.top:e.bottom-f.bottom+getSide$1(s,"bottom")),e.left<f.left+getSide$1(a,"left")?p=-(f.left-e.left+getSide$1(s,"left")):e.right>f.right-getSide$1(a,"right")&&(p=e.right-f.right+getSide$1(s,"right")),p||_)if(u)l.defaultView.scrollBy(p,_);else{let b=d.scrollLeft,v=d.scrollTop;_&&(d.scrollTop+=_),p&&(d.scrollLeft+=p);let k=d.scrollLeft-b,x=d.scrollTop-v;e={left:e.left-k,top:e.top-x,right:e.right-k,bottom:e.bottom-x}}if(u||/^(fixed|sticky)$/.test(getComputedStyle(c).position))break}}function storeScrollPos(o){let e=o.dom.getBoundingClientRect(),n=Math.max(0,e.top),a,s;for(let l=(e.left+e.right)/2,c=n+1;c<Math.min(innerHeight,e.bottom);c+=5){let d=o.root.elementFromPoint(l,c);if(!d||d==o.dom||!o.dom.contains(d))continue;let u=d.getBoundingClientRect();if(u.top>=n-20){a=d,s=u.top;break}}return{refDOM:a,refTop:s,stack:scrollStack(o.dom)}}function scrollStack(o){let e=[],n=o.ownerDocument;for(let a=o;a&&(e.push({dom:a,top:a.scrollTop,left:a.scrollLeft}),o!=n);a=parentNode(a));return e}function resetScrollPos({refDOM:o,refTop:e,stack:n}){let a=o?o.getBoundingClientRect().top:0;restoreScrollStack(n,a==0?0:a-e)}function restoreScrollStack(o,e){for(let n=0;n<o.length;n++){let{dom:a,top:s,left:l}=o[n];a.scrollTop!=s+e&&(a.scrollTop=s+e),a.scrollLeft!=l&&(a.scrollLeft=l)}}let preventScrollSupported$1=null;function focusPreventScroll$1(o){if(o.setActive)return o.setActive();if(preventScrollSupported$1)return o.focus(preventScrollSupported$1);let e=scrollStack(o);o.focus(preventScrollSupported$1==null?{get preventScroll(){return preventScrollSupported$1={preventScroll:!0},!0}}:void 0),preventScrollSupported$1||(preventScrollSupported$1=!1,restoreScrollStack(e,0))}function findOffsetInNode(o,e){let n,a=2e8,s,l=0,c=e.top,d=e.top,u,f;for(let p=o.firstChild,_=0;p;p=p.nextSibling,_++){let b;if(p.nodeType==1)b=p.getClientRects();else if(p.nodeType==3)b=textRange$1(p).getClientRects();else continue;for(let v=0;v<b.length;v++){let k=b[v];if(k.top<=c&&k.bottom>=d){c=Math.max(k.bottom,c),d=Math.min(k.top,d);let x=k.left>e.left?k.left-e.left:k.right<e.left?e.left-k.right:0;if(x<a){n=p,a=x,s=x&&n.nodeType==3?{left:k.right<e.left?k.right:k.left,top:e.top}:e,p.nodeType==1&&x&&(l=_+(e.left>=(k.left+k.right)/2?1:0));continue}}else k.top>e.top&&!u&&k.left<=e.left&&k.right>=e.left&&(u=p,f={left:Math.max(k.left,Math.min(k.right,e.left)),top:k.top});!n&&(e.left>=k.right&&e.top>=k.top||e.left>=k.left&&e.top>=k.bottom)&&(l=_+1)}}return!n&&u&&(n=u,s=f,a=0),n&&n.nodeType==3?findOffsetInText(n,s):!n||a&&n.nodeType==1?{node:o,offset:l}:findOffsetInNode(n,s)}function findOffsetInText(o,e){let n=o.nodeValue.length,a=document.createRange();for(let s=0;s<n;s++){a.setEnd(o,s+1),a.setStart(o,s);let l=singleRect(a,1);if(l.top!=l.bottom&&inRect(e,l))return{node:o,offset:s+(e.left>=(l.left+l.right)/2?1:0)}}return{node:o,offset:0}}function inRect(o,e){return o.left>=e.left-1&&o.left<=e.right+1&&o.top>=e.top-1&&o.top<=e.bottom+1}function targetKludge(o,e){let n=o.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<o.getBoundingClientRect().left?n:o}function posFromElement(o,e,n){let{node:a,offset:s}=findOffsetInNode(e,n),l=-1;if(a.nodeType==1&&!a.firstChild){let c=a.getBoundingClientRect();l=c.left!=c.right&&n.left>(c.left+c.right)/2?1:-1}return o.docView.posFromDOM(a,s,l)}function posFromCaret(o,e,n,a){let s=-1;for(let l=e,c=!1;l!=o.dom;){let d=o.docView.nearestDesc(l,!0),u;if(!d)return null;if(d.dom.nodeType==1&&(d.node.isBlock&&d.parent||!d.contentDOM)&&((u=d.dom.getBoundingClientRect()).width||u.height)&&(d.node.isBlock&&d.parent&&(!c&&u.left>a.left||u.top>a.top?s=d.posBefore:(!c&&u.right<a.left||u.bottom<a.top)&&(s=d.posAfter),c=!0),!d.contentDOM&&s<0&&!d.node.isText))return(d.node.isBlock?a.top<(u.top+u.bottom)/2:a.left<(u.left+u.right)/2)?d.posBefore:d.posAfter;l=d.dom.parentNode}return s>-1?s:o.docView.posFromDOM(e,n,-1)}function elementFromPoint(o,e,n){let a=o.childNodes.length;if(a&&n.top<n.bottom)for(let s=Math.max(0,Math.min(a-1,Math.floor(a*(e.top-n.top)/(n.bottom-n.top))-2)),l=s;;){let c=o.childNodes[l];if(c.nodeType==1){let d=c.getClientRects();for(let u=0;u<d.length;u++){let f=d[u];if(inRect(e,f))return elementFromPoint(c,e,f)}}if((l=(l+1)%a)==s)break}return o}function posAtCoords$1(o,e){let n=o.dom.ownerDocument,a,s=0,l=caretFromPoint(n,e.left,e.top);l&&({node:a,offset:s}=l);let c=(o.root.elementFromPoint?o.root:n).elementFromPoint(e.left,e.top),d;if(!c||!o.dom.contains(c.nodeType!=1?c.parentNode:c)){let f=o.dom.getBoundingClientRect();if(!inRect(e,f)||(c=elementFromPoint(o.dom,e,f),!c))return null}if(safari$1)for(let f=c;a&&f;f=parentNode(f))f.draggable&&(a=void 0);if(c=targetKludge(c,e),a){if(gecko$1&&a.nodeType==1&&(s=Math.min(s,a.childNodes.length),s<a.childNodes.length)){let p=a.childNodes[s],_;p.nodeName=="IMG"&&(_=p.getBoundingClientRect()).right<=e.left&&_.bottom>e.top&&s++}let f;webkit$1&&s&&a.nodeType==1&&(f=a.childNodes[s-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&s--,a==o.dom&&s==a.childNodes.length-1&&a.lastChild.nodeType==1&&e.top>a.lastChild.getBoundingClientRect().bottom?d=o.state.doc.content.size:(s==0||a.nodeType!=1||a.childNodes[s-1].nodeName!="BR")&&(d=posFromCaret(o,a,s,e))}d==null&&(d=posFromElement(o,c,e));let u=o.docView.nearestDesc(c,!0);return{pos:d,inside:u?u.posAtStart-u.border:-1}}function nonZero(o){return o.top<o.bottom||o.left<o.right}function singleRect(o,e){let n=o.getClientRects();if(n.length){let a=n[e<0?0:n.length-1];if(nonZero(a))return a}return Array.prototype.find.call(n,nonZero)||o.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(o,e,n){let{node:a,offset:s,atom:l}=o.docView.domFromPos(e,n<0?-1:1),c=webkit$1||gecko$1;if(a.nodeType==3)if(c&&(BIDI.test(a.nodeValue)||(n<0?!s:s==a.nodeValue.length))){let u=singleRect(textRange$1(a,s,s),n);if(gecko$1&&s&&/\s/.test(a.nodeValue[s-1])&&s<a.nodeValue.length){let f=singleRect(textRange$1(a,s-1,s-1),-1);if(f.top==u.top){let p=singleRect(textRange$1(a,s,s+1),-1);if(p.top!=u.top)return flattenV(p,p.left<f.left)}}return u}else{let u=s,f=s,p=n<0?1:-1;return n<0&&!s?(f++,p=-1):n>=0&&s==a.nodeValue.length?(u--,p=1):n<0?u--:f++,flattenV(singleRect(textRange$1(a,u,f),p),p<0)}if(!o.state.doc.resolve(e-(l||0)).parent.inlineContent){if(l==null&&s&&(n<0||s==nodeSize$1(a))){let u=a.childNodes[s-1];if(u.nodeType==1)return flattenH(u.getBoundingClientRect(),!1)}if(l==null&&s<nodeSize$1(a)){let u=a.childNodes[s];if(u.nodeType==1)return flattenH(u.getBoundingClientRect(),!0)}return flattenH(a.getBoundingClientRect(),n>=0)}if(l==null&&s&&(n<0||s==nodeSize$1(a))){let u=a.childNodes[s-1],f=u.nodeType==3?textRange$1(u,nodeSize$1(u)-(c?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(f)return flattenV(singleRect(f,1),!1)}if(l==null&&s<nodeSize$1(a)){let u=a.childNodes[s];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let f=u?u.nodeType==3?textRange$1(u,0,c?0:1):u.nodeType==1?u:null:null;if(f)return flattenV(singleRect(f,-1),!0)}return flattenV(singleRect(a.nodeType==3?textRange$1(a):a,-n),n>=0)}function flattenV(o,e){if(o.width==0)return o;let n=e?o.left:o.right;return{top:o.top,bottom:o.bottom,left:n,right:n}}function flattenH(o,e){if(o.height==0)return o;let n=e?o.top:o.bottom;return{top:n,bottom:n,left:o.left,right:o.right}}function withFlushedState(o,e,n){let a=o.state,s=o.root.activeElement;a!=e&&o.updateState(e),s!=o.dom&&o.focus();try{return n()}finally{a!=e&&o.updateState(a),s!=o.dom&&s&&s.focus()}}function endOfTextblockVertical(o,e,n){let a=e.selection,s=n=="up"?a.$from:a.$to;return withFlushedState(o,e,()=>{let{node:l}=o.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let d=o.docView.nearestDesc(l,!0);if(!d)break;if(d.node.isBlock){l=d.contentDOM||d.dom;break}l=d.dom.parentNode}let c=coordsAtPos(o,s.pos,1);for(let d=l.firstChild;d;d=d.nextSibling){let u;if(d.nodeType==1)u=d.getClientRects();else if(d.nodeType==3)u=textRange$1(d,0,d.nodeValue.length).getClientRects();else continue;for(let f=0;f<u.length;f++){let p=u[f];if(p.bottom>p.top+1&&(n=="up"?c.top-p.top>(p.bottom-c.top)*2:p.bottom-c.bottom>(c.bottom-p.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(o,e,n){let{$head:a}=e.selection;if(!a.parent.isTextblock)return!1;let s=a.parentOffset,l=!s,c=s==a.parent.content.size,d=o.domSelection();return d?!maybeRTL.test(a.parent.textContent)||!d.modify?n=="left"||n=="backward"?l:c:withFlushedState(o,e,()=>{let{focusNode:u,focusOffset:f,anchorNode:p,anchorOffset:_}=o.domSelectionRange(),b=d.caretBidiLevel;d.modify("move",n,"character");let v=a.depth?o.docView.domAfterPos(a.before()):o.dom,{focusNode:k,focusOffset:x}=o.domSelectionRange(),M=k&&!v.contains(k.nodeType==1?k:k.parentNode)||u==k&&f==x;try{d.collapse(p,_),u&&(u!=p||f!=_)&&d.extend&&d.extend(u,f)}catch{}return b!=null&&(d.caretBidiLevel=b),M}):a.pos==a.start()||a.pos==a.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(o,e,n){return cachedState==e&&cachedDir==n?cachedResult:(cachedState=e,cachedDir=n,cachedResult=n=="up"||n=="down"?endOfTextblockVertical(o,e,n):endOfTextblockHorizontal(o,e,n))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(e,n,a,s){this.parent=e,this.children=n,this.dom=a,this.contentDOM=s,this.dirty=NOT_DIRTY,a.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,a){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,a=this.posAtStart;;n++){let s=this.children[n];if(s==e)return a;a+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,a){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(a<0){let l,c;if(e==this.contentDOM)l=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.previousSibling}for(;l&&!((c=l.pmViewDesc)&&c.parent==this);)l=l.previousSibling;return l?this.posBeforeChild(c)+c.size:this.posAtStart}else{let l,c;if(e==this.contentDOM)l=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.nextSibling}for(;l&&!((c=l.pmViewDesc)&&c.parent==this);)l=l.nextSibling;return l?this.posBeforeChild(c):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>domIndex$1(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let l=e;;l=l.parentNode){if(l==this.dom){s=!1;break}if(l.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.nextSibling)break}}return s??a>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let a=!0,s=e;s;s=s.parentNode){let l=this.getDesc(s),c;if(l&&(!n||l.node))if(a&&(c=l.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))a=!1;else return l}}getDesc(e){let n=e.pmViewDesc;for(let a=n;a;a=a.parent)if(a==this)return n}posFromDOM(e,n,a){for(let s=e;s;s=s.parentNode){let l=this.getDesc(s);if(l)return l.localPosFromDOM(e,n,a)}return-1}descAt(e){for(let n=0,a=0;n<this.children.length;n++){let s=this.children[n],l=a+s.size;if(a==e&&l!=a){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(e<l)return s.descAt(e-a-s.border);a=l}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let a=0,s=0;for(let l=0;a<this.children.length;a++){let c=this.children[a],d=l+c.size;if(d>e||c instanceof TrailingHackViewDesc){s=e-l;break}l=d}if(s)return this.children[a].domFromPos(s-this.children[a].border,n);for(let l;a&&!(l=this.children[a-1]).size&&l instanceof WidgetViewDesc&&l.side>=0;a--);if(n<=0){let l,c=!0;for(;l=a?this.children[a-1]:null,!(!l||l.dom.parentNode==this.contentDOM);a--,c=!1);return l&&n&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,n):{node:this.contentDOM,offset:l?domIndex$1(l.dom)+1:0}}else{let l,c=!0;for(;l=a<this.children.length?this.children[a]:null,!(!l||l.dom.parentNode==this.contentDOM);a++,c=!1);return l&&c&&!l.border&&!l.domAtom?l.domFromPos(0,n):{node:this.contentDOM,offset:l?domIndex$1(l.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,a=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,l=-1;for(let c=a,d=0;;d++){let u=this.children[d],f=c+u.size;if(s==-1&&e<=f){let p=c+u.border;if(e>=p&&n<=f-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,n,p);e=c;for(let _=d;_>0;_--){let b=this.children[_-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){s=domIndex$1(b.dom)+1;break}e-=b.size}s==-1&&(s=0)}if(s>-1&&(f>n||d==this.children.length-1)){n=f;for(let p=d+1;p<this.children.length;p++){let _=this.children[p];if(_.size&&_.dom.parentNode==this.contentDOM&&!_.emptyChildAt(-1)){l=domIndex$1(_.dom);break}n+=_.size}l==-1&&(l=this.contentDOM.childNodes.length);break}c=f}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:l}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:a}=this.domFromPos(e,0);if(n.nodeType!=1||a==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[a]}setSelection(e,n,a,s=!1){let l=Math.min(e,n),c=Math.max(e,n);for(let v=0,k=0;v<this.children.length;v++){let x=this.children[v],M=k+x.size;if(l>k&&c<M)return x.setSelection(e-k-x.border,n-k-x.border,a,s);k=M}let d=this.domFromPos(e,e?-1:1),u=n==e?d:this.domFromPos(n,n?-1:1),f=a.root.getSelection(),p=a.domSelectionRange(),_=!1;if((gecko$1||safari$1)&&e==n){let{node:v,offset:k}=d;if(v.nodeType==3){if(_=!!(k&&v.nodeValue[k-1]==`
`),_&&k==v.nodeValue.length)for(let x=v,M;x;x=x.parentNode){if(M=x.nextSibling){M.nodeName=="BR"&&(d=u={node:M.parentNode,offset:domIndex$1(M)+1});break}let E=x.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let x=v.childNodes[k-1];_=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(gecko$1&&p.focusNode&&p.focusNode!=u.node&&p.focusNode.nodeType==1){let v=p.focusNode.childNodes[p.focusOffset];v&&v.contentEditable=="false"&&(s=!0)}if(!(s||_&&safari$1)&&isEquivalentPosition$1(d.node,d.offset,p.anchorNode,p.anchorOffset)&&isEquivalentPosition$1(u.node,u.offset,p.focusNode,p.focusOffset))return;let b=!1;if((f.extend||e==n)&&!_){f.collapse(d.node,d.offset);try{e!=n&&f.extend(u.node,u.offset),b=!0}catch{}}if(!b){if(e>n){let k=d;d=u,u=k}let v=document.createRange();v.setEnd(u.node,u.offset),v.setStart(d.node,d.offset),f.removeAllRanges(),f.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let a=0,s=0;s<this.children.length;s++){let l=this.children[s],c=a+l.size;if(a==c?e<=c&&n>=a:e<c&&n>a){let d=a+l.border,u=c-l.border;if(e>=d&&n<=u){this.dirty=e==a||n==c?CONTENT_DIRTY:CHILD_DIRTY,e==d&&n==u&&(l.contentLost||l.dom.parentNode!=this.contentDOM)?l.dirty=NODE_DIRTY:l.markDirty(e-d,n-d);return}else l.dirty=l.dom==l.contentDOM&&l.dom.parentNode==this.contentDOM&&!l.children.length?CONTENT_DIRTY:NODE_DIRTY}a=c}this.dirty=CONTENT_DIRTY}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let a=e==1?CONTENT_DIRTY:CHILD_DIRTY;n.dirty<a&&(n.dirty=a)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class WidgetViewDesc extends ViewDesc{constructor(e,n,a,s){let l,c=n.type.toDOM;if(typeof c=="function"&&(c=c(a,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)})),!n.type.spec.raw){if(c.nodeType!=1){let d=document.createElement("span");d.appendChild(c),c=d}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=n,this.widget=n,l=this}matchesWidget(e){return this.dirty==NOT_DIRTY&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(e,n,a,s){super(e,[],n,null),this.textDOM=a,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class MarkViewDesc extends ViewDesc{constructor(e,n,a,s,l){super(e,[],a,s),this.mark=n,this.spec=l}static create(e,n,a,s){let l=s.nodeViews[n.type.name],c=l&&l(n,s,a);return(!c||!c.dom)&&(c=DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,a),null,n.attrs)),new MarkViewDesc(e,n,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=NODE_DIRTY&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=NOT_DIRTY){let a=this.parent;for(;!a.node;)a=a.parent;a.dirty<this.dirty&&(a.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(e,n,a){let s=MarkViewDesc.create(this.parent,this.mark,!0,a),l=this.children,c=this.size;n<c&&(l=replaceNodes(l,n,c,a)),e>0&&(l=replaceNodes(l,0,e,a));for(let d=0;d<l.length;d++)l[d].parent=s;return s.children=l,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(e,n,a,s,l,c,d,u,f){super(e,[],l,c),this.node=n,this.outerDeco=a,this.innerDeco=s,this.nodeDOM=d}static create(e,n,a,s,l,c){let d=l.nodeViews[n.type.name],u,f=d&&d(n,l,()=>{if(!u)return c;if(u.parent)return u.parent.posBeforeChild(u)},a,s),p=f&&f.dom,_=f&&f.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:_}=DOMSerializer.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!_&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let b=p;return p=applyOuterDeco(p,a,n),f?u=new CustomNodeViewDesc(e,n,a,s,p,_||null,b,f,l,c+1):n.isText?new TextViewDesc(e,n,a,s,p,b,l):new NodeViewDesc(e,n,a,s,p,_||null,b,l,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let a=this.children[n];if(this.dom.contains(a.dom.parentNode)){e.contentElement=a.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Fragment$1.empty)}return e}matchesNode(e,n,a){return this.dirty==NOT_DIRTY&&e.eq(this.node)&&sameOuterDeco(n,this.outerDeco)&&a.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let a=this.node.inlineContent,s=n,l=e.composing?this.localCompositionInfo(e,n):null,c=l&&l.pos>-1?l:null,d=l&&l.pos<0,u=new ViewTreeUpdater(this,c&&c.node,e);iterDeco(this.node,this.innerDeco,(f,p,_)=>{f.spec.marks?u.syncToMarks(f.spec.marks,a,e):f.type.side>=0&&!_&&u.syncToMarks(p==this.node.childCount?Mark.none:this.node.child(p).marks,a,e),u.placeWidget(f,e,s)},(f,p,_,b)=>{u.syncToMarks(f.marks,a,e);let v;u.findNodeMatch(f,p,_,b)||d&&e.state.selection.from>s&&e.state.selection.to<s+f.nodeSize&&(v=u.findIndexWithChild(l.node))>-1&&u.updateNodeAt(f,p,_,v,e)||u.updateNextNode(f,p,_,e,b,s)||u.addNode(f,p,_,e,s),s+=f.nodeSize}),u.syncToMarks([],a,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==CONTENT_DIRTY)&&(c&&this.protectLocalComposition(e,c),renderDescs(this.contentDOM,this.children,e),ios$1&&iosHacks(this.dom))}localCompositionInfo(e,n){let{from:a,to:s}=e.state.selection;if(!(e.state.selection instanceof TextSelection)||a<n||s>n+this.node.content.size)return null;let l=e.input.compositionNode;if(!l||!this.dom.contains(l.parentNode))return null;if(this.node.inlineContent){let c=l.nodeValue,d=findTextInFragment(this.node.content,c,a-n,s-n);return d<0?null:{node:l,pos:d,text:c}}else return{node:l,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:a,text:s}){if(this.getDesc(n))return;let l=n;for(;l.parentNode!=this.contentDOM;l=l.parentNode){for(;l.previousSibling;)l.parentNode.removeChild(l.previousSibling);for(;l.nextSibling;)l.parentNode.removeChild(l.nextSibling);l.pmViewDesc&&(l.pmViewDesc=void 0)}let c=new CompositionViewDesc(this,l,n,s);e.input.compositionNodes.push(c),this.children=replaceNodes(this.children,a,a+s.length,e,c)}update(e,n,a,s){return this.dirty==NODE_DIRTY||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,a,s),!0)}updateInner(e,n,a,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=a,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(e){if(sameOuterDeco(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,a=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,n),computeOuterDeco(e,this.node,n)),this.dom!=a&&(a.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(o,e,n,a,s){applyOuterDeco(a,e,o);let l=new NodeViewDesc(void 0,o,e,n,a,a,a,s,0);return l.contentDOM&&l.updateChildren(s,0),l}class TextViewDesc extends NodeViewDesc{constructor(e,n,a,s,l,c,d){super(e,n,a,s,l,null,c,d,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,a,s){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=NOT_DIRTY||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=NOT_DIRTY,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,a){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,a)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,a){let s=this.node.cut(e,n),l=document.createTextNode(s.text);return new TextViewDesc(this.parent,s,this.outerDeco,this.innerDeco,l,l,a)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(e){return this.node.text==e}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==NOT_DIRTY&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(e,n,a,s,l,c,d,u,f,p){super(e,n,a,s,l,c,d,f,p),this.spec=u}update(e,n,a,s){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let l=this.spec.update(e,n,a);return l&&this.updateInner(e,n,a,s),l}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,a,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,a,s){this.spec.setSelection?this.spec.setSelection(e,n,a.root):super.setSelection(e,n,a,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function renderDescs(o,e,n){let a=o.firstChild,s=!1;for(let l=0;l<e.length;l++){let c=e[l],d=c.dom;if(d.parentNode==o){for(;d!=a;)a=rm$2(a),s=!0;a=a.nextSibling}else s=!0,o.insertBefore(d,a);if(c instanceof MarkViewDesc){let u=a?a.previousSibling:o.lastChild;renderDescs(c.contentDOM,c.children,n),a=u?u.nextSibling:o.firstChild}}for(;a;)a=rm$2(a),s=!0;s&&n.trackWrites==o&&(n.trackWrites=null)}const OuterDecoLevel=function(o){o&&(this.nodeName=o)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(o,e,n){if(o.length==0)return noDeco;let a=n?noDeco[0]:new OuterDecoLevel,s=[a];for(let l=0;l<o.length;l++){let c=o[l].type.attrs;if(c){c.nodeName&&s.push(a=new OuterDecoLevel(c.nodeName));for(let d in c){let u=c[d];u!=null&&(n&&s.length==1&&s.push(a=new OuterDecoLevel(e.isInline?"span":"div")),d=="class"?a.class=(a.class?a.class+" ":"")+u:d=="style"?a.style=(a.style?a.style+";":"")+u:d!="nodeName"&&(a[d]=u))}}}return s}function patchOuterDeco(o,e,n,a){if(n==noDeco&&a==noDeco)return e;let s=e;for(let l=0;l<a.length;l++){let c=a[l],d=n[l];if(l){let u;d&&d.nodeName==c.nodeName&&s!=o&&(u=s.parentNode)&&u.nodeName.toLowerCase()==c.nodeName||(u=document.createElement(c.nodeName),u.pmIsDeco=!0,u.appendChild(s),d=noDeco[0]),s=u}patchAttributes(s,d||noDeco[0],c)}return s}function patchAttributes(o,e,n){for(let a in e)a!="class"&&a!="style"&&a!="nodeName"&&!(a in n)&&o.removeAttribute(a);for(let a in n)a!="class"&&a!="style"&&a!="nodeName"&&n[a]!=e[a]&&o.setAttribute(a,n[a]);if(e.class!=n.class){let a=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let l=0;l<a.length;l++)s.indexOf(a[l])==-1&&o.classList.remove(a[l]);for(let l=0;l<s.length;l++)a.indexOf(s[l])==-1&&o.classList.add(s[l]);o.classList.length==0&&o.removeAttribute("class")}if(e.style!=n.style){if(e.style){let a=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=a.exec(e.style);)o.style.removeProperty(s[1])}n.style&&(o.style.cssText+=n.style)}}function applyOuterDeco(o,e,n){return patchOuterDeco(o,o,noDeco,computeOuterDeco(e,n,o.nodeType!=1))}function sameOuterDeco(o,e){if(o.length!=e.length)return!1;for(let n=0;n<o.length;n++)if(!o[n].type.eq(e[n].type))return!1;return!0}function rm$2(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class ViewTreeUpdater{constructor(e,n,a){this.lock=n,this.view=a,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=preMatch(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let a=e;a<n;a++)this.top.children[a].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,a){let s=0,l=this.stack.length>>1,c=Math.min(l,e.length);for(;s<c&&(s==l-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<l;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let d=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let f=this.top.children[u];if(f.matchesMark(e[l])&&!this.isLocked(f.dom)){d=u;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let u=MarkViewDesc.create(this.top,e[l],n,a);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,l++}}findNodeMatch(e,n,a,s){let l=-1,c;if(s>=this.preMatch.index&&(c=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&c.matchesNode(e,n,a))l=this.top.children.indexOf(c,this.index);else for(let d=this.index,u=Math.min(this.top.children.length,d+5);d<u;d++){let f=this.top.children[d];if(f.matchesNode(e,n,a)&&!this.preMatch.matched.has(f)){l=d;break}}return l<0?!1:(this.destroyBetween(this.index,l),this.index++,!0)}updateNodeAt(e,n,a,s,l){let c=this.top.children[s];return c.dirty==NODE_DIRTY&&c.dom==c.contentDOM&&(c.dirty=CONTENT_DIRTY),c.update(e,n,a,l)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let a=e.pmViewDesc;if(a){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==a)return s}return-1}e=n}}updateNextNode(e,n,a,s,l,c){for(let d=this.index;d<this.top.children.length;d++){let u=this.top.children[d];if(u instanceof NodeViewDesc){let f=this.preMatch.matched.get(u);if(f!=null&&f!=l)return!1;let p=u.dom,_,b=this.isLocked(p)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=NODE_DIRTY&&sameOuterDeco(n,u.outerDeco));if(!b&&u.update(e,n,a,s))return this.destroyBetween(this.index,d),u.dom!=p&&(this.changed=!0),this.index++,!0;if(!b&&(_=this.recreateWrapper(u,e,n,a,s,c)))return this.destroyBetween(this.index,d),this.top.children[this.index]=_,_.contentDOM&&(_.dirty=CONTENT_DIRTY,_.updateChildren(s,c+1),_.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,a,s,l,c){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!sameOuterDeco(a,e.outerDeco)||!s.eq(e.innerDeco))return null;let d=NodeViewDesc.create(this.top,n,a,s,l,c);if(d.contentDOM){d.children=e.children,e.children=[];for(let u of d.children)u.parent=d}return e.destroy(),d}addNode(e,n,a,s,l){let c=NodeViewDesc.create(this.top,e,n,a,s,l);c.contentDOM&&c.updateChildren(s,l+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,n,a){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let l=new WidgetViewDesc(this.top,e,n,a);this.top.children.splice(this.index++,0,l),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof MarkViewDesc;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof TextViewDesc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((safari$1||chrome$1)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let a=document.createElement(e);e=="IMG"&&(a.className="ProseMirror-separator",a.alt=""),e=="BR"&&(a.className="ProseMirror-trailingBreak");let s=new TrailingHackViewDesc(this.top,[],a,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function preMatch(o,e){let n=e,a=n.children.length,s=o.childCount,l=new Map,c=[];e:for(;s>0;){let d;for(;;)if(a){let f=n.children[a-1];if(f instanceof MarkViewDesc)n=f,a=f.children.length;else{d=f,a--;break}}else{if(n==e)break e;a=n.parent.children.indexOf(n),n=n.parent}let u=d.node;if(u){if(u!=o.child(s-1))break;--s,l.set(d,s),c.push(d)}}return{index:s,matched:l,matches:c.reverse()}}function compareSide(o,e){return o.type.side-e.type.side}function iterDeco(o,e,n,a){let s=e.locals(o),l=0;if(s.length==0){for(let f=0;f<o.childCount;f++){let p=o.child(f);a(p,s,e.forChild(l,p),f),l+=p.nodeSize}return}let c=0,d=[],u=null;for(let f=0;;){let p,_;for(;c<s.length&&s[c].to==l;){let M=s[c++];M.widget&&(p?(_||(_=[p])).push(M):p=M)}if(p)if(_){_.sort(compareSide);for(let M=0;M<_.length;M++)n(_[M],f,!!u)}else n(p,f,!!u);let b,v;if(u)v=-1,b=u,u=null;else if(f<o.childCount)v=f,b=o.child(f++);else break;for(let M=0;M<d.length;M++)d[M].to<=l&&d.splice(M--,1);for(;c<s.length&&s[c].from<=l&&s[c].to>l;)d.push(s[c++]);let k=l+b.nodeSize;if(b.isText){let M=k;c<s.length&&s[c].from<M&&(M=s[c].from);for(let E=0;E<d.length;E++)d[E].to<M&&(M=d[E].to);M<k&&(u=b.cut(M-l),b=b.cut(0,M-l),k=M,v=-1)}else for(;c<s.length&&s[c].to<k;)c++;let x=b.isInline&&!b.isLeaf?d.filter(M=>!M.inline):d.slice();a(b,x,e.forChild(l,b),v),l=k}}function iosHacks(o){if(o.nodeName=="UL"||o.nodeName=="OL"){let e=o.style.cssText;o.style.cssText=e+"; list-style: square !important",window.getComputedStyle(o).listStyle,o.style.cssText=e}}function findTextInFragment(o,e,n,a){for(let s=0,l=0;s<o.childCount&&l<=a;){let c=o.child(s++),d=l;if(l+=c.nodeSize,!c.isText)continue;let u=c.text;for(;s<o.childCount;){let f=o.child(s++);if(l+=f.nodeSize,!f.isText)break;u+=f.text}if(l>=n){if(l>=a&&u.slice(a-e.length-d,a-d)==e)return a-e.length;let f=d<a?u.lastIndexOf(e,a-d-1):-1;if(f>=0&&f+e.length+d>=n)return d+f;if(n==a&&u.length>=a+e.length-d&&u.slice(a-d,a-d+e.length)==e)return a}}return-1}function replaceNodes(o,e,n,a,s){let l=[];for(let c=0,d=0;c<o.length;c++){let u=o[c],f=d,p=d+=u.size;f>=n||p<=e?l.push(u):(f<e&&l.push(u.slice(0,e-f,a)),s&&(l.push(s),s=void 0),p>n&&l.push(u.slice(n-f,u.size,a)))}return l}function selectionFromDOM(o,e=null){let n=o.domSelectionRange(),a=o.state.doc;if(!n.focusNode)return null;let s=o.docView.nearestDesc(n.focusNode),l=s&&s.size==0,c=o.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(c<0)return null;let d=a.resolve(c),u,f;if(selectionCollapsed(n)){for(u=c;s&&!s.node;)s=s.parent;let _=s.node;if(s&&_.isAtom&&NodeSelection.isSelectable(_)&&s.parent&&!(_.isInline&&isOnEdge(n.focusNode,n.focusOffset,s.dom))){let b=s.posBefore;f=new NodeSelection(c==b?d:a.resolve(b))}}else{if(n instanceof o.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let _=c,b=c;for(let v=0;v<n.rangeCount;v++){let k=n.getRangeAt(v);_=Math.min(_,o.docView.posFromDOM(k.startContainer,k.startOffset,1)),b=Math.max(b,o.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(_<0)return null;[u,c]=b==o.state.selection.anchor?[b,_]:[_,b],d=a.resolve(c)}else u=o.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let p=a.resolve(u);if(!f){let _=e=="pointer"||o.state.selection.head<d.pos&&!l?1:-1;f=selectionBetween(o,p,d,_)}return f}function editorOwnsSelection(o){return o.editable?o.hasFocus():hasSelection$1(o)&&document.activeElement&&document.activeElement.contains(o.dom)}function selectionToDOM(o,e=!1){let n=o.state.selection;if(syncNodeSelection(o,n),!!editorOwnsSelection(o)){if(!e&&o.input.mouseDown&&o.input.mouseDown.allowDefault&&chrome$1){let a=o.domSelectionRange(),s=o.domObserver.currentSelection;if(a.anchorNode&&s.anchorNode&&isEquivalentPosition$1(a.anchorNode,a.anchorOffset,s.anchorNode,s.anchorOffset)){o.input.mouseDown.delayedSelectionSync=!0,o.domObserver.setCurSelection();return}}if(o.domObserver.disconnectSelection(),o.cursorWrapper)selectCursorWrapper(o);else{let{anchor:a,head:s}=n,l,c;brokenSelectBetweenUneditable&&!(n instanceof TextSelection)&&(n.$from.parent.inlineContent||(l=temporarilyEditableNear(o,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(c=temporarilyEditableNear(o,n.to))),o.docView.setSelection(a,s,o,e),brokenSelectBetweenUneditable&&(l&&resetEditable(l),c&&resetEditable(c)),n.visible?o.dom.classList.remove("ProseMirror-hideselection"):(o.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(o))}o.domObserver.setCurSelection(),o.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari$1||chrome$1&&chrome_version<63;function temporarilyEditableNear(o,e){let{node:n,offset:a}=o.docView.domFromPos(e,0),s=a<n.childNodes.length?n.childNodes[a]:null,l=a?n.childNodes[a-1]:null;if(safari$1&&s&&s.contentEditable=="false")return setEditable(s);if((!s||s.contentEditable=="false")&&(!l||l.contentEditable=="false")){if(s)return setEditable(s);if(l)return setEditable(l)}}function setEditable(o){return o.contentEditable="true",safari$1&&o.draggable&&(o.draggable=!1,o.wasDraggable=!0),o}function resetEditable(o){o.contentEditable="false",o.wasDraggable&&(o.draggable=!0,o.wasDraggable=null)}function removeClassOnSelectionChange(o){let e=o.dom.ownerDocument;e.removeEventListener("selectionchange",o.input.hideSelectionGuard);let n=o.domSelectionRange(),a=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",o.input.hideSelectionGuard=()=>{(n.anchorNode!=a||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",o.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(o)||o.state.selection.visible)&&o.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(o){let e=o.domSelection(),n=document.createRange();if(!e)return;let a=o.cursorWrapper.dom,s=a.nodeName=="IMG";s?n.setStart(a.parentNode,domIndex$1(a)+1):n.setStart(a,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!s&&!o.state.selection.visible&&ie$2&&ie_version<=11&&(a.disabled=!0,a.disabled=!1)}function syncNodeSelection(o,e){if(e instanceof NodeSelection){let n=o.docView.descAt(e.from);n!=o.lastSelectedViewDesc&&(clearNodeSelection(o),n&&n.selectNode(),o.lastSelectedViewDesc=n)}else clearNodeSelection(o)}function clearNodeSelection(o){o.lastSelectedViewDesc&&(o.lastSelectedViewDesc.parent&&o.lastSelectedViewDesc.deselectNode(),o.lastSelectedViewDesc=void 0)}function selectionBetween(o,e,n,a){return o.someProp("createSelectionBetween",s=>s(o,e,n))||TextSelection.between(e,n,a)}function hasFocusAndSelection(o){return o.editable&&!o.hasFocus()?!1:hasSelection$1(o)}function hasSelection$1(o){let e=o.domSelectionRange();if(!e.anchorNode)return!1;try{return o.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(o.editable||o.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function anchorInRightPlace(o){let e=o.docView.domFromPos(o.state.selection.anchor,0),n=o.domSelectionRange();return isEquivalentPosition$1(e.node,e.offset,n.anchorNode,n.anchorOffset)}function moveSelectionBlock(o,e){let{$anchor:n,$head:a}=o.selection,s=e>0?n.max(a):n.min(a),l=s.parent.inlineContent?s.depth?o.doc.resolve(e>0?s.after():s.before()):null:s;return l&&Selection.findFrom(l,e)}function apply(o,e){return o.dispatch(o.state.tr.setSelection(e).scrollIntoView()),!0}function selectHorizontally(o,e,n){let a=o.state.selection;if(a instanceof TextSelection)if(n.indexOf("s")>-1){let{$head:s}=a,l=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let c=o.state.doc.resolve(s.pos+l.nodeSize*(e<0?-1:1));return apply(o,new TextSelection(a.$anchor,c))}else if(a.empty){if(o.endOfTextblock(e>0?"forward":"backward")){let s=moveSelectionBlock(o.state,e);return s&&s instanceof NodeSelection?apply(o,s):!1}else if(!(mac$2&&n.indexOf("m")>-1)){let s=a.$head,l=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,c;if(!l||l.isText)return!1;let d=e<0?s.pos-l.nodeSize:s.pos;return l.isAtom||(c=o.docView.descAt(d))&&!c.contentDOM?NodeSelection.isSelectable(l)?apply(o,new NodeSelection(e<0?o.state.doc.resolve(s.pos-l.nodeSize):s)):webkit$1?apply(o,new TextSelection(o.state.doc.resolve(e<0?d:d+l.nodeSize))):!1:!1}}else return!1;else{if(a instanceof NodeSelection&&a.node.isInline)return apply(o,new TextSelection(e>0?a.$to:a.$from));{let s=moveSelectionBlock(o.state,e);return s?apply(o,s):!1}}}function nodeLen(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function isIgnorable(o,e){let n=o.pmViewDesc;return n&&n.size==0&&(e<0||o.nextSibling||o.nodeName!="BR")}function skipIgnoredNodes(o,e){return e<0?skipIgnoredNodesBefore(o):skipIgnoredNodesAfter(o)}function skipIgnoredNodesBefore(o){let e=o.domSelectionRange(),n=e.focusNode,a=e.focusOffset;if(!n)return;let s,l,c=!1;for(gecko$1&&n.nodeType==1&&a<nodeLen(n)&&isIgnorable(n.childNodes[a],-1)&&(c=!0);;)if(a>0){if(n.nodeType!=1)break;{let d=n.childNodes[a-1];if(isIgnorable(d,-1))s=n,l=--a;else if(d.nodeType==3)n=d,a=n.nodeValue.length;else break}}else{if(isBlockNode(n))break;{let d=n.previousSibling;for(;d&&isIgnorable(d,-1);)s=n.parentNode,l=domIndex$1(d),d=d.previousSibling;if(d)n=d,a=nodeLen(n);else{if(n=n.parentNode,n==o.dom)break;a=0}}}c?setSelFocus(o,n,a):s&&setSelFocus(o,s,l)}function skipIgnoredNodesAfter(o){let e=o.domSelectionRange(),n=e.focusNode,a=e.focusOffset;if(!n)return;let s=nodeLen(n),l,c;for(;;)if(a<s){if(n.nodeType!=1)break;let d=n.childNodes[a];if(isIgnorable(d,1))l=n,c=++a;else break}else{if(isBlockNode(n))break;{let d=n.nextSibling;for(;d&&isIgnorable(d,1);)l=d.parentNode,c=domIndex$1(d)+1,d=d.nextSibling;if(d)n=d,a=0,s=nodeLen(n);else{if(n=n.parentNode,n==o.dom)break;a=s=0}}}l&&setSelFocus(o,l,c)}function isBlockNode(o){let e=o.pmViewDesc;return e&&e.node&&e.node.isBlock}function textNodeAfter$2(o,e){for(;o&&e==o.childNodes.length&&!hasBlockDesc(o);)e=domIndex$1(o)+1,o=o.parentNode;for(;o&&e<o.childNodes.length;){let n=o.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;o=n,e=0}}function textNodeBefore$2(o,e){for(;o&&!e&&!hasBlockDesc(o);)e=domIndex$1(o),o=o.parentNode;for(;o&&e;){let n=o.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;o=n,e=o.childNodes.length}}function setSelFocus(o,e,n){if(e.nodeType!=3){let l,c;(c=textNodeAfter$2(e,n))?(e=c,n=0):(l=textNodeBefore$2(e,n))&&(e=l,n=l.nodeValue.length)}let a=o.domSelection();if(!a)return;if(selectionCollapsed(a)){let l=document.createRange();l.setEnd(e,n),l.setStart(e,n),a.removeAllRanges(),a.addRange(l)}else a.extend&&a.extend(e,n);o.domObserver.setCurSelection();let{state:s}=o;setTimeout(()=>{o.state==s&&selectionToDOM(o)},50)}function findDirection(o,e){let n=o.state.doc.resolve(e);if(!(chrome$1||windows)&&n.parent.inlineContent){let s=o.coordsAtPos(e);if(e>n.start()){let l=o.coordsAtPos(e-1),c=(l.top+l.bottom)/2;if(c>s.top&&c<s.bottom&&Math.abs(l.left-s.left)>1)return l.left<s.left?"ltr":"rtl"}if(e<n.end()){let l=o.coordsAtPos(e+1),c=(l.top+l.bottom)/2;if(c>s.top&&c<s.bottom&&Math.abs(l.left-s.left)>1)return l.left>s.left?"ltr":"rtl"}}return getComputedStyle(o.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(o,e,n){let a=o.state.selection;if(a instanceof TextSelection&&!a.empty||n.indexOf("s")>-1||mac$2&&n.indexOf("m")>-1)return!1;let{$from:s,$to:l}=a;if(!s.parent.inlineContent||o.endOfTextblock(e<0?"up":"down")){let c=moveSelectionBlock(o.state,e);if(c&&c instanceof NodeSelection)return apply(o,c)}if(!s.parent.inlineContent){let c=e<0?s:l,d=a instanceof AllSelection?Selection.near(c,e):Selection.findFrom(c,e);return d?apply(o,d):!1}return!1}function stopNativeHorizontalDelete(o,e){if(!(o.state.selection instanceof TextSelection))return!0;let{$head:n,$anchor:a,empty:s}=o.state.selection;if(!n.sameParent(a))return!0;if(!s)return!1;if(o.endOfTextblock(e>0?"forward":"backward"))return!0;let l=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(l&&!l.isText){let c=o.state.tr;return e<0?c.delete(n.pos-l.nodeSize,n.pos):c.delete(n.pos,n.pos+l.nodeSize),o.dispatch(c),!0}return!1}function switchEditable(o,e,n){o.domObserver.stop(),e.contentEditable=n,o.domObserver.start()}function safariDownArrowBug(o){if(!safari$1||o.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=o.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let a=e.firstChild;switchEditable(o,a,"true"),setTimeout(()=>switchEditable(o,a,"false"),20)}return!1}function getMods(o){let e="";return o.ctrlKey&&(e+="c"),o.metaKey&&(e+="m"),o.altKey&&(e+="a"),o.shiftKey&&(e+="s"),e}function captureKeyDown(o,e){let n=e.keyCode,a=getMods(e);if(n==8||mac$2&&n==72&&a=="c")return stopNativeHorizontalDelete(o,-1)||skipIgnoredNodes(o,-1);if(n==46&&!e.shiftKey||mac$2&&n==68&&a=="c")return stopNativeHorizontalDelete(o,1)||skipIgnoredNodes(o,1);if(n==13||n==27)return!0;if(n==37||mac$2&&n==66&&a=="c"){let s=n==37?findDirection(o,o.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(o,s,a)||skipIgnoredNodes(o,s)}else if(n==39||mac$2&&n==70&&a=="c"){let s=n==39?findDirection(o,o.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(o,s,a)||skipIgnoredNodes(o,s)}else{if(n==38||mac$2&&n==80&&a=="c")return selectVertically(o,-1,a)||skipIgnoredNodes(o,-1);if(n==40||mac$2&&n==78&&a=="c")return safariDownArrowBug(o)||selectVertically(o,1,a)||skipIgnoredNodes(o,1);if(a==(mac$2?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function serializeForClipboard(o,e){o.someProp("transformCopied",v=>{e=v(e,o)});let n=[],{content:a,openStart:s,openEnd:l}=e;for(;s>1&&l>1&&a.childCount==1&&a.firstChild.childCount==1;){s--,l--;let v=a.firstChild;n.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),a=v.content}let c=o.someProp("clipboardSerializer")||DOMSerializer.fromSchema(o.state.schema),d=detachedDoc(),u=d.createElement("div");u.appendChild(c.serializeFragment(a,{document:d}));let f=u.firstChild,p,_=0;for(;f&&f.nodeType==1&&(p=wrapMap[f.nodeName.toLowerCase()]);){for(let v=p.length-1;v>=0;v--){let k=d.createElement(p[v]);for(;u.firstChild;)k.appendChild(u.firstChild);u.appendChild(k),_++}f=u.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${s} ${l}${_?` -${_}`:""} ${JSON.stringify(n)}`);let b=o.someProp("clipboardTextSerializer",v=>v(e,o))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:b,slice:e}}function parseFromClipboard(o,e,n,a,s){let l=s.parent.type.spec.code,c,d;if(!n&&!e)return null;let u=e&&(a||l||!n);if(u){if(o.someProp("transformPastedText",b=>{e=b(e,l||a,o)}),l)return e?new Slice(Fragment$1.from(o.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Slice.empty;let _=o.someProp("clipboardTextParser",b=>b(e,s,a,o));if(_)d=_;else{let b=s.marks(),{schema:v}=o.state,k=DOMSerializer.fromSchema(v);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(x=>{let M=c.appendChild(document.createElement("p"));x&&M.appendChild(k.serializeNode(v.text(x,b)))})}}else o.someProp("transformPastedHTML",_=>{n=_(n,o)}),c=readHTML(n),webkit$1&&restoreReplacedSpaces(c);let f=c&&c.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let _=+p[3];_>0;_--){let b=c.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;c=b}if(d||(d=(o.someProp("clipboardParser")||o.someProp("domParser")||DOMParser$1.fromSchema(o.state.schema)).parseSlice(c,{preserveWhitespace:!!(u||p),context:s,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!inlineParents.test(b.parentNode.nodeName)?{ignore:!0}:null}})),p)d=addContext(closeSlice(d,+p[1],+p[2]),p[4]);else if(d=Slice.maxOpen(normalizeSiblings(d.content,s),!0),d.openStart||d.openEnd){let _=0,b=0;for(let v=d.content.firstChild;_<d.openStart&&!v.type.spec.isolating;_++,v=v.firstChild);for(let v=d.content.lastChild;b<d.openEnd&&!v.type.spec.isolating;b++,v=v.lastChild);d=closeSlice(d,_,b)}return o.someProp("transformPasted",_=>{d=_(d,o)}),d}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(o,e){if(o.childCount<2)return o;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),l,c=[];if(o.forEach(d=>{if(!c)return;let u=s.findWrapping(d.type),f;if(!u)return c=null;if(f=c.length&&l.length&&addToSibling(u,l,d,c[c.length-1],0))c[c.length-1]=f;else{c.length&&(c[c.length-1]=closeRight(c[c.length-1],l.length));let p=withWrappers(d,u);c.push(p),s=s.matchType(p.type),l=u}}),c)return Fragment$1.from(c)}return o}function withWrappers(o,e,n=0){for(let a=e.length-1;a>=n;a--)o=e[a].create(null,Fragment$1.from(o));return o}function addToSibling(o,e,n,a,s){if(s<o.length&&s<e.length&&o[s]==e[s]){let l=addToSibling(o,e,n,a.lastChild,s+1);if(l)return a.copy(a.content.replaceChild(a.childCount-1,l));if(a.contentMatchAt(a.childCount).matchType(s==o.length-1?n.type:o[s+1]))return a.copy(a.content.append(Fragment$1.from(withWrappers(n,o,s+1))))}}function closeRight(o,e){if(e==0)return o;let n=o.content.replaceChild(o.childCount-1,closeRight(o.lastChild,e-1)),a=o.contentMatchAt(o.childCount).fillBefore(Fragment$1.empty,!0);return o.copy(n.append(a))}function closeRange(o,e,n,a,s,l){let c=e<0?o.firstChild:o.lastChild,d=c.content;return o.childCount>1&&(l=0),s<a-1&&(d=closeRange(d,e,n,a,s+1,l)),s>=n&&(d=e<0?c.contentMatchAt(0).fillBefore(d,l<=s).append(d):d.append(c.contentMatchAt(c.childCount).fillBefore(Fragment$1.empty,!0))),o.replaceChild(e<0?0:o.childCount-1,c.copy(d))}function closeSlice(o,e,n){return e<o.openStart&&(o=new Slice(closeRange(o.content,-1,e,o.openStart,0,o.openEnd),e,o.openEnd)),n<o.openEnd&&(o=new Slice(closeRange(o.content,1,n,o.openEnd,0,0),o.openStart,n)),o}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(o){let e=window.trustedTypes;return e?(_policy||(_policy=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),_policy.createHTML(o)):o}function readHTML(o){let e=/^(\s*<meta [^>]*>)*/.exec(o);e&&(o=o.slice(e[0].length));let n=detachedDoc().createElement("div"),a=/<([a-z][^>\s]+)/i.exec(o),s;if((s=a&&wrapMap[a[1].toLowerCase()])&&(o=s.map(l=>"<"+l+">").join("")+o+s.map(l=>"</"+l+">").reverse().join("")),n.innerHTML=maybeWrapTrusted(o),s)for(let l=0;l<s.length;l++)n=n.querySelector(s[l])||n;return n}function restoreReplacedSpaces(o){let e=o.querySelectorAll(chrome$1?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let a=e[n];a.childNodes.length==1&&a.textContent=="\xa0"&&a.parentNode&&a.parentNode.replaceChild(o.ownerDocument.createTextNode(" "),a)}}function addContext(o,e){if(!o.size)return o;let n=o.content.firstChild.type.schema,a;try{a=JSON.parse(e)}catch{return o}let{content:s,openStart:l,openEnd:c}=o;for(let d=a.length-2;d>=0;d-=2){let u=n.nodes[a[d]];if(!u||u.hasRequiredAttrs())break;s=Fragment$1.from(u.create(a[d+1],s)),l++,c++}return new Slice(s,l,c)}const handlers$2={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};let InputState$1=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function initInput(o){for(let e in handlers$2){let n=handlers$2[e];o.dom.addEventListener(e,o.input.eventHandlers[e]=a=>{eventBelongsToView(o,a)&&!runCustomHandler(o,a)&&(o.editable||!(a.type in editHandlers))&&n(o,a)},passiveHandlers[e]?{passive:!0}:void 0)}safari$1&&o.dom.addEventListener("input",()=>null),ensureListeners(o)}function setSelectionOrigin(o,e){o.input.lastSelectionOrigin=e,o.input.lastSelectionTime=Date.now()}function destroyInput(o){o.domObserver.stop();for(let e in o.input.eventHandlers)o.dom.removeEventListener(e,o.input.eventHandlers[e]);clearTimeout(o.input.composingTimeout),clearTimeout(o.input.lastIOSEnterFallbackTimeout)}function ensureListeners(o){o.someProp("handleDOMEvents",e=>{for(let n in e)o.input.eventHandlers[n]||o.dom.addEventListener(n,o.input.eventHandlers[n]=a=>runCustomHandler(o,a))})}function runCustomHandler(o,e){return o.someProp("handleDOMEvents",n=>{let a=n[e.type];return a?a(o,e)||e.defaultPrevented:!1})}function eventBelongsToView(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=o.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function dispatchEvent(o,e){!runCustomHandler(o,e)&&handlers$2[e.type]&&(o.editable||!(e.type in editHandlers))&&handlers$2[e.type](o,e)}editHandlers.keydown=(o,e)=>{let n=e;if(o.input.shiftKey=n.keyCode==16||n.shiftKey,!inOrNearComposition(o,n)&&(o.input.lastKeyCode=n.keyCode,o.input.lastKeyCodeTime=Date.now(),!(android$1&&chrome$1&&n.keyCode==13)))if(n.keyCode!=229&&o.domObserver.forceFlush(),ios$1&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let a=Date.now();o.input.lastIOSEnter=a,o.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{o.input.lastIOSEnter==a&&(o.someProp("handleKeyDown",s=>s(o,keyEvent(13,"Enter"))),o.input.lastIOSEnter=0)},200)}else o.someProp("handleKeyDown",a=>a(o,n))||captureKeyDown(o,n)?n.preventDefault():setSelectionOrigin(o,"key")};editHandlers.keyup=(o,e)=>{e.keyCode==16&&(o.input.shiftKey=!1)};editHandlers.keypress=(o,e)=>{let n=e;if(inOrNearComposition(o,n)||!n.charCode||n.ctrlKey&&!n.altKey||mac$2&&n.metaKey)return;if(o.someProp("handleKeyPress",s=>s(o,n))){n.preventDefault();return}let a=o.state.selection;if(!(a instanceof TextSelection)||!a.$from.sameParent(a.$to)){let s=String.fromCharCode(n.charCode);!/[\r\n]/.test(s)&&!o.someProp("handleTextInput",l=>l(o,a.$from.pos,a.$to.pos,s))&&o.dispatch(o.state.tr.insertText(s).scrollIntoView()),n.preventDefault()}};function eventCoords(o){return{left:o.clientX,top:o.clientY}}function isNear(o,e){let n=e.x-o.clientX,a=e.y-o.clientY;return n*n+a*a<100}function runHandlerOnContext(o,e,n,a,s){if(a==-1)return!1;let l=o.state.doc.resolve(a);for(let c=l.depth+1;c>0;c--)if(o.someProp(e,d=>c>l.depth?d(o,n,l.nodeAfter,l.before(c),s,!0):d(o,n,l.node(c),l.before(c),s,!1)))return!0;return!1}function updateSelection(o,e,n){if(o.focused||o.focus(),o.state.selection.eq(e))return;let a=o.state.tr.setSelection(e);a.setMeta("pointer",!0),o.dispatch(a)}function selectClickedLeaf(o,e){if(e==-1)return!1;let n=o.state.doc.resolve(e),a=n.nodeAfter;return a&&a.isAtom&&NodeSelection.isSelectable(a)?(updateSelection(o,new NodeSelection(n)),!0):!1}function selectClickedNode(o,e){if(e==-1)return!1;let n=o.state.selection,a,s;n instanceof NodeSelection&&(a=n.node);let l=o.state.doc.resolve(e);for(let c=l.depth+1;c>0;c--){let d=c>l.depth?l.nodeAfter:l.node(c);if(NodeSelection.isSelectable(d)){a&&n.$from.depth>0&&c>=n.$from.depth&&l.before(n.$from.depth+1)==n.$from.pos?s=l.before(n.$from.depth):s=l.before(c);break}}return s!=null?(updateSelection(o,NodeSelection.create(o.state.doc,s)),!0):!1}function handleSingleClick(o,e,n,a,s){return runHandlerOnContext(o,"handleClickOn",e,n,a)||o.someProp("handleClick",l=>l(o,e,a))||(s?selectClickedNode(o,n):selectClickedLeaf(o,n))}function handleDoubleClick(o,e,n,a){return runHandlerOnContext(o,"handleDoubleClickOn",e,n,a)||o.someProp("handleDoubleClick",s=>s(o,e,a))}function handleTripleClick(o,e,n,a){return runHandlerOnContext(o,"handleTripleClickOn",e,n,a)||o.someProp("handleTripleClick",s=>s(o,e,a))||defaultTripleClick(o,n,a)}function defaultTripleClick(o,e,n){if(n.button!=0)return!1;let a=o.state.doc;if(e==-1)return a.inlineContent?(updateSelection(o,TextSelection.create(a,0,a.content.size)),!0):!1;let s=a.resolve(e);for(let l=s.depth+1;l>0;l--){let c=l>s.depth?s.nodeAfter:s.node(l),d=s.before(l);if(c.inlineContent)updateSelection(o,TextSelection.create(a,d+1,d+1+c.content.size));else if(NodeSelection.isSelectable(c))updateSelection(o,NodeSelection.create(a,d));else continue;return!0}}function forceDOMFlush(o){return endComposition(o)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers$2.mousedown=(o,e)=>{let n=e;o.input.shiftKey=n.shiftKey;let a=forceDOMFlush(o),s=Date.now(),l="singleClick";s-o.input.lastClick.time<500&&isNear(n,o.input.lastClick)&&!n[selectNodeModifier]&&(o.input.lastClick.type=="singleClick"?l="doubleClick":o.input.lastClick.type=="doubleClick"&&(l="tripleClick")),o.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:l};let c=o.posAtCoords(eventCoords(n));c&&(l=="singleClick"?(o.input.mouseDown&&o.input.mouseDown.done(),o.input.mouseDown=new MouseDown(o,c,n,!!a)):(l=="doubleClick"?handleDoubleClick:handleTripleClick)(o,c.pos,c.inside,n)?n.preventDefault():setSelectionOrigin(o,"pointer"))};class MouseDown{constructor(e,n,a,s){this.view=e,this.pos=n,this.event=a,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!a[selectNodeModifier],this.allowDefault=a.shiftKey;let l,c;if(n.inside>-1)l=e.state.doc.nodeAt(n.inside),c=n.inside;else{let p=e.state.doc.resolve(n.pos);l=p.parent,c=p.depth?p.before():0}const d=s?null:a.target,u=d?e.docView.nearestDesc(d,!0):null;this.target=u&&u.dom.nodeType==1?u.dom:null;let{selection:f}=e.state;(a.button==0&&l.type.spec.draggable&&l.type.spec.selectable!==!1||f instanceof NodeSelection&&f.from<=c&&f.to>c)&&(this.mightDrag={node:l,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko$1&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(eventCoords(e))),this.updateAllowDefault(e),this.allowDefault||!n?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||safari$1&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome$1&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(e){this.updateAllowDefault(e),setSelectionOrigin(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}handlers$2.touchstart=o=>{o.input.lastTouch=Date.now(),forceDOMFlush(o),setSelectionOrigin(o,"pointer")};handlers$2.touchmove=o=>{o.input.lastTouch=Date.now(),setSelectionOrigin(o,"pointer")};handlers$2.contextmenu=o=>forceDOMFlush(o);function inOrNearComposition(o,e){return o.composing?!0:safari$1&&Math.abs(e.timeStamp-o.input.compositionEndedAt)<500?(o.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android$1?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=o=>{if(!o.composing){o.domObserver.flush();let{state:e}=o,n=e.selection.$to;if(e.selection instanceof TextSelection&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(a=>a.type.spec.inclusive===!1)))o.markCursor=o.state.storedMarks||n.marks(),endComposition(o,!0),o.markCursor=null;else if(endComposition(o,!e.selection.empty),gecko$1&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let a=o.domSelectionRange();for(let s=a.focusNode,l=a.focusOffset;s&&s.nodeType==1&&l!=0;){let c=l<0?s.lastChild:s.childNodes[l-1];if(!c)break;if(c.nodeType==3){let d=o.domSelection();d&&d.collapse(c,c.nodeValue.length);break}else s=c,l=-1}}o.input.composing=!0}scheduleComposeEnd(o,timeoutComposition)};editHandlers.compositionend=(o,e)=>{o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=e.timeStamp,o.input.compositionPendingChanges=o.domObserver.pendingRecords().length?o.input.compositionID:0,o.input.compositionNode=null,o.input.compositionPendingChanges&&Promise.resolve().then(()=>o.domObserver.flush()),o.input.compositionID++,scheduleComposeEnd(o,20))};function scheduleComposeEnd(o,e){clearTimeout(o.input.composingTimeout),e>-1&&(o.input.composingTimeout=setTimeout(()=>endComposition(o),e))}function clearComposition(o){for(o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=timestampFromCustomEvent());o.input.compositionNodes.length>0;)o.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode$1(o){let e=o.domSelectionRange();if(!e.focusNode)return null;let n=textNodeBefore$1(e.focusNode,e.focusOffset),a=textNodeAfter$1(e.focusNode,e.focusOffset);if(n&&a&&n!=a){let s=a.pmViewDesc,l=o.domObserver.lastChangedTextNode;if(n==l||a==l)return l;if(!s||!s.isText(a.nodeValue))return a;if(o.input.compositionNode==a){let c=n.pmViewDesc;if(!(!c||!c.isText(n.nodeValue)))return a}}return n||a}function timestampFromCustomEvent(){let o=document.createEvent("Event");return o.initEvent("event",!0,!0),o.timeStamp}function endComposition(o,e=!1){if(!(android$1&&o.domObserver.flushingSoon>=0)){if(o.domObserver.forceFlush(),clearComposition(o),e||o.docView&&o.docView.dirty){let n=selectionFromDOM(o);return n&&!n.eq(o.state.selection)?o.dispatch(o.state.tr.setSelection(n)):(o.markCursor||e)&&!o.state.selection.empty?o.dispatch(o.state.tr.deleteSelection()):o.updateState(o.state),!0}return!1}}function captureCopy$1(o,e){if(!o.dom.parentNode)return;let n=o.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let a=getSelection(),s=document.createRange();s.selectNodeContents(e),o.dom.blur(),a.removeAllRanges(),a.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),o.focus()},50)}const brokenClipboardAPI$1=ie$2&&ie_version<15||ios$1&&webkit_version<604;handlers$2.copy=editHandlers.cut=(o,e)=>{let n=e,a=o.state.selection,s=n.type=="cut";if(a.empty)return;let l=brokenClipboardAPI$1?null:n.clipboardData,c=a.content(),{dom:d,text:u}=serializeForClipboard(o,c);l?(n.preventDefault(),l.clearData(),l.setData("text/html",d.innerHTML),l.setData("text/plain",u)):captureCopy$1(o,d),s&&o.dispatch(o.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(o){return o.openStart==0&&o.openEnd==0&&o.content.childCount==1?o.content.firstChild:null}function capturePaste$1(o,e){if(!o.dom.parentNode)return;let n=o.input.shiftKey||o.state.selection.$from.parent.type.spec.code,a=o.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(a.contentEditable="true"),a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus();let s=o.input.shiftKey&&o.input.lastKeyCode!=45;setTimeout(()=>{o.focus(),a.parentNode&&a.parentNode.removeChild(a),n?doPaste$1(o,a.value,null,s,e):doPaste$1(o,a.textContent,a.innerHTML,s,e)},50)}function doPaste$1(o,e,n,a,s){let l=parseFromClipboard(o,e,n,a,o.state.selection.$from);if(o.someProp("handlePaste",u=>u(o,s,l||Slice.empty)))return!0;if(!l)return!1;let c=sliceSingleNode(l),d=c?o.state.tr.replaceSelectionWith(c,a):o.state.tr.replaceSelection(l);return o.dispatch(d.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText(o){let e=o.getData("text/plain")||o.getData("Text");if(e)return e;let n=o.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}editHandlers.paste=(o,e)=>{let n=e;if(o.composing&&!android$1)return;let a=brokenClipboardAPI$1?null:n.clipboardData,s=o.input.shiftKey&&o.input.lastKeyCode!=45;a&&doPaste$1(o,getText(a),a.getData("text/html"),s,n)?n.preventDefault():capturePaste$1(o,n)};class Dragging{constructor(e,n,a){this.slice=e,this.move=n,this.node=a}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";handlers$2.dragstart=(o,e)=>{let n=e,a=o.input.mouseDown;if(a&&a.done(),!n.dataTransfer)return;let s=o.state.selection,l=s.empty?null:o.posAtCoords(eventCoords(n)),c;if(!(l&&l.pos>=s.from&&l.pos<=(s instanceof NodeSelection?s.to-1:s.to))){if(a&&a.mightDrag)c=NodeSelection.create(o.state.doc,a.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let _=o.docView.nearestDesc(n.target,!0);_&&_.node.type.spec.draggable&&_!=o.docView&&(c=NodeSelection.create(o.state.doc,_.posBefore))}}let d=(c||o.state.selection).content(),{dom:u,text:f,slice:p}=serializeForClipboard(o,d);(!n.dataTransfer.files.length||!chrome$1||chrome_version>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(brokenClipboardAPI$1?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI$1||n.dataTransfer.setData("text/plain",f),o.dragging=new Dragging(p,!n[dragCopyModifier],c)};handlers$2.dragend=o=>{let e=o.dragging;window.setTimeout(()=>{o.dragging==e&&(o.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(o,e)=>e.preventDefault();editHandlers.drop=(o,e)=>{let n=e,a=o.dragging;if(o.dragging=null,!n.dataTransfer)return;let s=o.posAtCoords(eventCoords(n));if(!s)return;let l=o.state.doc.resolve(s.pos),c=a&&a.slice;c?o.someProp("transformPasted",k=>{c=k(c,o)}):c=parseFromClipboard(o,getText(n.dataTransfer),brokenClipboardAPI$1?null:n.dataTransfer.getData("text/html"),!1,l);let d=!!(a&&!n[dragCopyModifier]);if(o.someProp("handleDrop",k=>k(o,n,c||Slice.empty,d))){n.preventDefault();return}if(!c)return;n.preventDefault();let u=c?dropPoint(o.state.doc,l.pos,c):l.pos;u==null&&(u=l.pos);let f=o.state.tr;if(d){let{node:k}=a;k?k.replace(f):f.deleteSelection()}let p=f.mapping.map(u),_=c.openStart==0&&c.openEnd==0&&c.content.childCount==1,b=f.doc;if(_?f.replaceRangeWith(p,p,c.content.firstChild):f.replaceRange(p,p,c),f.doc.eq(b))return;let v=f.doc.resolve(p);if(_&&NodeSelection.isSelectable(c.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(c.content.firstChild))f.setSelection(new NodeSelection(v));else{let k=f.mapping.map(u);f.mapping.maps[f.mapping.maps.length-1].forEach((x,M,E,L)=>k=L),f.setSelection(selectionBetween(o,v,f.doc.resolve(k)))}o.focus(),o.dispatch(f.setMeta("uiEvent","drop"))};handlers$2.focus=o=>{o.input.lastFocus=Date.now(),o.focused||(o.domObserver.stop(),o.dom.classList.add("ProseMirror-focused"),o.domObserver.start(),o.focused=!0,setTimeout(()=>{o.docView&&o.hasFocus()&&!o.domObserver.currentSelection.eq(o.domSelectionRange())&&selectionToDOM(o)},20))};handlers$2.blur=(o,e)=>{let n=e;o.focused&&(o.domObserver.stop(),o.dom.classList.remove("ProseMirror-focused"),o.domObserver.start(),n.relatedTarget&&o.dom.contains(n.relatedTarget)&&o.domObserver.currentSelection.clear(),o.focused=!1)};handlers$2.beforeinput=(o,e)=>{if(chrome$1&&android$1&&e.inputType=="deleteContentBackward"){o.domObserver.flushSoon();let{domChangeCount:a}=o.input;setTimeout(()=>{if(o.input.domChangeCount!=a||(o.dom.blur(),o.focus(),o.someProp("handleKeyDown",l=>l(o,keyEvent(8,"Backspace")))))return;let{$cursor:s}=o.state.selection;s&&s.pos>0&&o.dispatch(o.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let o in editHandlers)handlers$2[o]=editHandlers[o];function compareObjs(o,e){if(o==e)return!0;for(let n in o)if(o[n]!==e[n])return!1;for(let n in e)if(!(n in o))return!1;return!0}let WidgetType$1=class an{constructor(e,n){this.toDOM=e,this.spec=n||noSpec,this.side=this.spec.side||0}map(e,n,a,s){let{pos:l,deleted:c}=e.mapResult(n.from+s,this.side<0?-1:1);return c?null:new Decoration$1(l-a,l-a,this)}valid(){return!0}eq(e){return this==e||e instanceof an&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&compareObjs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}};class InlineType{constructor(e,n){this.attrs=e,this.spec=n||noSpec}map(e,n,a,s){let l=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-a,c=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-a;return l>=c?null:new Decoration$1(l,c,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof InlineType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}static is(e){return e.type instanceof InlineType}destroy(){}}let NodeType$1=class sn{constructor(e,n){this.attrs=e,this.spec=n||noSpec}map(e,n,a,s){let l=e.mapResult(n.from+s,1);if(l.deleted)return null;let c=e.mapResult(n.to+s,-1);return c.deleted||c.pos<=l.pos?null:new Decoration$1(l.pos-a,c.pos-a,this)}valid(e,n){let{index:a,offset:s}=e.content.findIndex(n.from),l;return s==n.from&&!(l=e.child(a)).isText&&s+l.nodeSize==n.to}eq(e){return this==e||e instanceof sn&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}destroy(){}},Decoration$1=class Ht{constructor(e,n,a){this.from=e,this.to=n,this.type=a}copy(e,n){return new Ht(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,a){return this.type.map(e,this,n,a)}static widget(e,n,a){return new Ht(e,e,new WidgetType$1(n,a))}static inline(e,n,a,s){return new Ht(e,n,new InlineType(a,s))}static node(e,n,a,s){return new Ht(e,n,new NodeType$1(a,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType$1}};const none$2=[],noSpec={};class DecorationSet{constructor(e,n){this.local=e.length?e:none$2,this.children=n.length?n:none$2}static create(e,n){return n.length?buildTree$2(n,e,0,noSpec):empty}find(e,n,a){let s=[];return this.findInner(e??0,n??1e9,s,0,a),s}findInner(e,n,a,s,l){for(let c=0;c<this.local.length;c++){let d=this.local[c];d.from<=n&&d.to>=e&&(!l||l(d.spec))&&a.push(d.copy(d.from+s,d.to+s))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<n&&this.children[c+1]>e){let d=this.children[c]+1;this.children[c+2].findInner(e-d,n-d,a,s+d,l)}}map(e,n,a){return this==empty||e.maps.length==0?this:this.mapInner(e,n,0,0,a||noSpec)}mapInner(e,n,a,s,l){let c;for(let d=0;d<this.local.length;d++){let u=this.local[d].map(e,a,s);u&&u.type.valid(n,u)?(c||(c=[])).push(u):l.onRemove&&l.onRemove(this.local[d].spec)}return this.children.length?mapChildren(this.children,c||[],e,n,a,s,l):c?new DecorationSet(c.sort(byPos),none$2):empty}add(e,n){return n.length?this==empty?DecorationSet.create(e,n):this.addInner(e,n,0):this}addInner(e,n,a){let s,l=0;e.forEach((d,u)=>{let f=u+a,p;if(p=takeSpansForNode(n,d,f)){for(s||(s=this.children.slice());l<s.length&&s[l]<u;)l+=3;s[l]==u?s[l+2]=s[l+2].addInner(d,p,f+1):s.splice(l,0,u,u+d.nodeSize,buildTree$2(p,d,f+1,noSpec)),l+=3}});let c=moveSpans(l?withoutNulls(n):n,-a);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||c.splice(d--,1);return new DecorationSet(c.length?this.local.concat(c).sort(byPos):this.local,s||this.children)}remove(e){return e.length==0||this==empty?this:this.removeInner(e,0)}removeInner(e,n){let a=this.children,s=this.local;for(let l=0;l<a.length;l+=3){let c,d=a[l]+n,u=a[l+1]+n;for(let p=0,_;p<e.length;p++)(_=e[p])&&_.from>d&&_.to<u&&(e[p]=null,(c||(c=[])).push(_));if(!c)continue;a==this.children&&(a=this.children.slice());let f=a[l+2].removeInner(c,d+1);f!=empty?a[l+2]=f:(a.splice(l,3),l-=3)}if(s.length){for(let l=0,c;l<e.length;l++)if(c=e[l])for(let d=0;d<s.length;d++)s[d].eq(c,n)&&(s==this.local&&(s=this.local.slice()),s.splice(d--,1))}return a==this.children&&s==this.local?this:s.length||a.length?new DecorationSet(s,a):empty}forChild(e,n){if(this==empty)return this;if(n.isLeaf)return DecorationSet.empty;let a,s;for(let d=0;d<this.children.length;d+=3)if(this.children[d]>=e){this.children[d]==e&&(a=this.children[d+2]);break}let l=e+1,c=l+n.content.size;for(let d=0;d<this.local.length;d++){let u=this.local[d];if(u.from<c&&u.to>l&&u.type instanceof InlineType){let f=Math.max(l,u.from)-l,p=Math.min(c,u.to)-l;f<p&&(s||(s=[])).push(u.copy(f,p))}}if(s){let d=new DecorationSet(s.sort(byPos),none$2);return a?new DecorationGroup([d,a]):d}return a||empty}eq(e){if(this==e)return!0;if(!(e instanceof DecorationSet)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return removeOverlap(this.localsInner(e))}localsInner(e){if(this==empty)return none$2;if(e.inlineContent||!this.local.some(InlineType.is))return this.local;let n=[];for(let a=0;a<this.local.length;a++)this.local[a].type instanceof InlineType||n.push(this.local[a]);return n}forEachSet(e){e(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(e){this.members=e}map(e,n){const a=this.members.map(s=>s.map(e,n,noSpec));return DecorationGroup.from(a)}forChild(e,n){if(n.isLeaf)return DecorationSet.empty;let a=[];for(let s=0;s<this.members.length;s++){let l=this.members[s].forChild(e,n);l!=empty&&(l instanceof DecorationGroup?a=a.concat(l.members):a.push(l))}return DecorationGroup.from(a)}eq(e){if(!(e instanceof DecorationGroup)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,a=!0;for(let s=0;s<this.members.length;s++){let l=this.members[s].localsInner(e);if(l.length)if(!n)n=l;else{a&&(n=n.slice(),a=!1);for(let c=0;c<l.length;c++)n.push(l[c])}}return n?removeOverlap(a?n:n.sort(byPos)):none$2}static from(e){switch(e.length){case 0:return empty;case 1:return e[0];default:return new DecorationGroup(e.every(n=>n instanceof DecorationSet)?e:e.reduce((n,a)=>n.concat(a instanceof DecorationSet?a:a.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function mapChildren(o,e,n,a,s,l,c){let d=o.slice();for(let f=0,p=l;f<n.maps.length;f++){let _=0;n.maps[f].forEach((b,v,k,x)=>{let M=x-k-(v-b);for(let E=0;E<d.length;E+=3){let L=d[E+1];if(L<0||b>L+p-_)continue;let V=d[E]+p-_;v>=V?d[E+1]=b<=V?-2:-1:b>=p&&M&&(d[E]+=M,d[E+1]+=M)}_+=M}),p=n.maps[f].map(p,-1)}let u=!1;for(let f=0;f<d.length;f+=3)if(d[f+1]<0){if(d[f+1]==-2){u=!0,d[f+1]=-1;continue}let p=n.map(o[f]+l),_=p-s;if(_<0||_>=a.content.size){u=!0;continue}let b=n.map(o[f+1]+l,-1),v=b-s,{index:k,offset:x}=a.content.findIndex(_),M=a.maybeChild(k);if(M&&x==_&&x+M.nodeSize==v){let E=d[f+2].mapInner(n,M,p+1,o[f]+l+1,c);E!=empty?(d[f]=_,d[f+1]=v,d[f+2]=E):(d[f+1]=-2,u=!0)}else u=!0}if(u){let f=mapAndGatherRemainingDecorations(d,o,e,n,s,l,c),p=buildTree$2(f,a,0,c);e=p.local;for(let _=0;_<d.length;_+=3)d[_+1]<0&&(d.splice(_,3),_-=3);for(let _=0,b=0;_<p.children.length;_+=3){let v=p.children[_];for(;b<d.length&&d[b]<v;)b+=3;d.splice(b,0,p.children[_],p.children[_+1],p.children[_+2])}}return new DecorationSet(e.sort(byPos),d)}function moveSpans(o,e){if(!e||!o.length)return o;let n=[];for(let a=0;a<o.length;a++){let s=o[a];n.push(new Decoration$1(s.from+e,s.to+e,s.type))}return n}function mapAndGatherRemainingDecorations(o,e,n,a,s,l,c){function d(u,f){for(let p=0;p<u.local.length;p++){let _=u.local[p].map(a,s,f);_?n.push(_):c.onRemove&&c.onRemove(u.local[p].spec)}for(let p=0;p<u.children.length;p+=3)d(u.children[p+2],u.children[p]+f+1)}for(let u=0;u<o.length;u+=3)o[u+1]==-1&&d(o[u+2],e[u]+l+1);return n}function takeSpansForNode(o,e,n){if(e.isLeaf)return null;let a=n+e.nodeSize,s=null;for(let l=0,c;l<o.length;l++)(c=o[l])&&c.from>n&&c.to<a&&((s||(s=[])).push(c),o[l]=null);return s}function withoutNulls(o){let e=[];for(let n=0;n<o.length;n++)o[n]!=null&&e.push(o[n]);return e}function buildTree$2(o,e,n,a){let s=[],l=!1;e.forEach((d,u)=>{let f=takeSpansForNode(o,d,u+n);if(f){l=!0;let p=buildTree$2(f,d,n+u+1,a);p!=empty&&s.push(u,u+d.nodeSize,p)}});let c=moveSpans(l?withoutNulls(o):o,-n).sort(byPos);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||(a.onRemove&&a.onRemove(c[d].spec),c.splice(d--,1));return c.length||s.length?new DecorationSet(c,s):empty}function byPos(o,e){return o.from-e.from||o.to-e.to}function removeOverlap(o){let e=o;for(let n=0;n<e.length-1;n++){let a=e[n];if(a.from!=a.to)for(let s=n+1;s<e.length;s++){let l=e[s];if(l.from==a.from){l.to!=a.to&&(e==o&&(e=o.slice()),e[s]=l.copy(l.from,a.to),insertAhead(e,s+1,l.copy(a.to,l.to)));continue}else{l.from<a.to&&(e==o&&(e=o.slice()),e[n]=a.copy(a.from,l.from),insertAhead(e,s,a.copy(l.from,a.to)));break}}}return e}function insertAhead(o,e,n){for(;e<o.length&&byPos(n,o[e])>0;)e++;o.splice(e,0,n)}function viewDecorations(o){let e=[];return o.someProp("decorations",n=>{let a=n(o.state);a&&a!=empty&&e.push(a)}),o.cursorWrapper&&e.push(DecorationSet.create(o.state.doc,[o.cursorWrapper.deco])),DecorationGroup.from(e)}const observeOptions$1={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData$1=ie$2&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}let DOMObserver$1=class{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(a=>{for(let s=0;s<a.length;s++)this.queue.push(a[s]);ie$2&&ie_version<=11&&a.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData$1&&(this.onCharData=a=>{this.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions$1)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$2&&ie_version<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&isEquivalentPosition$1(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,a;for(let l=e.focusNode;l;l=parentNode(l))n.add(l);for(let l=e.anchorNode;l;l=parentNode(l))if(n.has(l)){a=l;break}let s=a&&this.view.docView.nearestDesc(a);if(s&&s.ignoreMutation({type:"selection",target:a.nodeType==3?a.parentNode:a}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let a=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(a)&&hasFocusAndSelection(e)&&!this.ignoreSelectionChange(a),l=-1,c=-1,d=!1,u=[];if(e.editable)for(let p=0;p<n.length;p++){let _=this.registerMutation(n[p],u);_&&(l=l<0?_.from:Math.min(_.from,l),c=c<0?_.to:Math.max(_.to,c),_.typeOver&&(d=!0))}if(gecko$1&&u.length){let p=u.filter(_=>_.nodeName=="BR");if(p.length==2){let[_,b]=p;_.parentNode&&_.parentNode.parentNode==b.parentNode?b.remove():_.remove()}else{let{focusNode:_}=this.currentSelection;for(let b of p){let v=b.parentNode;v&&v.nodeName=="LI"&&(!_||blockParent(e,_)!=v)&&b.remove()}}}let f=null;l<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&selectionCollapsed(a)&&(f=selectionFromDOM(e))&&f.eq(Selection.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,selectionToDOM(e),this.currentSelection.set(a),e.scrollToSelection()):(l>-1||s)&&(l>-1&&(e.docView.markDirty(l,c),checkCSS(e)),this.handleDOMChange(l,c,d,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(a)||selectionToDOM(e),this.currentSelection.set(a))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let a=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(a==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!a||a.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let _=e.addedNodes[p];n.push(_),_.nodeType==3&&(this.lastChangedTextNode=_)}if(a.contentDOM&&a.contentDOM!=a.dom&&!a.contentDOM.contains(e.target))return{from:a.posBefore,to:a.posAfter};let s=e.previousSibling,l=e.nextSibling;if(ie$2&&ie_version<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:_,nextSibling:b}=e.addedNodes[p];(!_||Array.prototype.indexOf.call(e.addedNodes,_)<0)&&(s=_),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(l=b)}let c=s&&s.parentNode==e.target?domIndex$1(s)+1:0,d=a.localPosFromDOM(e.target,c,-1),u=l&&l.parentNode==e.target?domIndex$1(l):e.target.childNodes.length,f=a.localPosFromDOM(e.target,u,1);return{from:d,to:f}}else return e.type=="attributes"?{from:a.posAtStart-a.border,to:a.posAtEnd+a.border}:(this.lastChangedTextNode=e.target,{from:a.posAtStart,to:a.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}},cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(o){if(!cssChecked.has(o)&&(cssChecked.set(o,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(o.dom).whiteSpace)!==-1)){if(o.requiresGeckoHackNode=gecko$1,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(o,e){let n=e.startContainer,a=e.startOffset,s=e.endContainer,l=e.endOffset,c=o.domAtPos(o.state.selection.anchor);return isEquivalentPosition$1(c.node,c.offset,s,l)&&([n,a,s,l]=[s,l,n,a]),{anchorNode:n,anchorOffset:a,focusNode:s,focusOffset:l}}function safariShadowSelectionRange(o,e){if(e.getComposedRanges){let s=e.getComposedRanges(o.root)[0];if(s)return rangeToSelectionRange(o,s)}let n;function a(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return o.dom.addEventListener("beforeinput",a,!0),document.execCommand("indent"),o.dom.removeEventListener("beforeinput",a,!0),n?rangeToSelectionRange(o,n):null}function blockParent(o,e){for(let n=e.parentNode;n&&n!=o.dom;n=n.parentNode){let a=o.docView.nearestDesc(n,!0);if(a&&a.node.isBlock)return n}return null}function parseBetween(o,e,n){let{node:a,fromOffset:s,toOffset:l,from:c,to:d}=o.docView.parseRange(e,n),u=o.domSelectionRange(),f,p=u.anchorNode;if(p&&o.dom.contains(p.nodeType==1?p:p.parentNode)&&(f=[{node:p,offset:u.anchorOffset}],selectionCollapsed(u)||f.push({node:u.focusNode,offset:u.focusOffset})),chrome$1&&o.input.lastKeyCode===8)for(let M=l;M>s;M--){let E=a.childNodes[M-1],L=E.pmViewDesc;if(E.nodeName=="BR"&&!L){l=M;break}if(!L||L.size)break}let _=o.state.doc,b=o.someProp("domParser")||DOMParser$1.fromSchema(o.state.schema),v=_.resolve(c),k=null,x=b.parse(a,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:s,to:l,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode,context:v});if(f&&f[0].pos!=null){let M=f[0].pos,E=f[1]&&f[1].pos;E==null&&(E=M),k={anchor:M+c,head:E+c}}return{doc:x,sel:k,from:c,to:d}}function ruleFromNode(o){let e=o.pmViewDesc;if(e)return e.parseRule();if(o.nodeName=="BR"&&o.parentNode){if(safari$1&&/^(ul|ol)$/i.test(o.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(o.parentNode.lastChild==o||safari$1&&/^(tr|table)$/i.test(o.parentNode.nodeName))return{ignore:!0}}else if(o.nodeName=="IMG"&&o.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(o,e,n,a,s){let l=o.input.compositionPendingChanges||(o.composing?o.input.compositionID:0);if(o.input.compositionPendingChanges=0,e<0){let W=o.input.lastSelectionTime>Date.now()-50?o.input.lastSelectionOrigin:null,K=selectionFromDOM(o,W);if(K&&!o.state.selection.eq(K)){if(chrome$1&&android$1&&o.input.lastKeyCode===13&&Date.now()-100<o.input.lastKeyCodeTime&&o.someProp("handleKeyDown",Z=>Z(o,keyEvent(13,"Enter"))))return;let G=o.state.tr.setSelection(K);W=="pointer"?G.setMeta("pointer",!0):W=="key"&&G.scrollIntoView(),l&&G.setMeta("composition",l),o.dispatch(G)}return}let c=o.state.doc.resolve(e),d=c.sharedDepth(n);e=c.before(d+1),n=o.state.doc.resolve(n).after(d+1);let u=o.state.selection,f=parseBetween(o,e,n),p=o.state.doc,_=p.slice(f.from,f.to),b,v;o.input.lastKeyCode===8&&Date.now()-100<o.input.lastKeyCodeTime?(b=o.state.selection.to,v="end"):(b=o.state.selection.from,v="start"),o.input.lastKeyCode=null;let k=findDiff$1(_.content,f.doc.content,f.from,b,v);if(k&&o.input.domChangeCount++,(ios$1&&o.input.lastIOSEnter>Date.now()-225||android$1)&&s.some(W=>W.nodeType==1&&!isInline.test(W.nodeName))&&(!k||k.endA>=k.endB)&&o.someProp("handleKeyDown",W=>W(o,keyEvent(13,"Enter")))){o.input.lastIOSEnter=0;return}if(!k)if(a&&u instanceof TextSelection&&!u.empty&&u.$head.sameParent(u.$anchor)&&!o.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))k={start:u.from,endA:u.to,endB:u.to};else{if(f.sel){let W=resolveSelection(o,o.state.doc,f.sel);if(W&&!W.eq(o.state.selection)){let K=o.state.tr.setSelection(W);l&&K.setMeta("composition",l),o.dispatch(K)}}return}o.state.selection.from<o.state.selection.to&&k.start==k.endB&&o.state.selection instanceof TextSelection&&(k.start>o.state.selection.from&&k.start<=o.state.selection.from+2&&o.state.selection.from>=f.from?k.start=o.state.selection.from:k.endA<o.state.selection.to&&k.endA>=o.state.selection.to-2&&o.state.selection.to<=f.to&&(k.endB+=o.state.selection.to-k.endA,k.endA=o.state.selection.to)),ie$2&&ie_version<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>f.from&&f.doc.textBetween(k.start-f.from-1,k.start-f.from+1)==" \xa0"&&(k.start--,k.endA--,k.endB--);let x=f.doc.resolveNoCache(k.start-f.from),M=f.doc.resolveNoCache(k.endB-f.from),E=p.resolve(k.start),L=x.sameParent(M)&&x.parent.inlineContent&&E.end()>=k.endA,V;if((ios$1&&o.input.lastIOSEnter>Date.now()-225&&(!L||s.some(W=>W.nodeName=="DIV"||W.nodeName=="P"))||!L&&x.pos<f.doc.content.size&&!x.sameParent(M)&&(V=Selection.findFrom(f.doc.resolve(x.pos+1),1,!0))&&V.head==M.pos)&&o.someProp("handleKeyDown",W=>W(o,keyEvent(13,"Enter")))){o.input.lastIOSEnter=0;return}if(o.state.selection.anchor>k.start&&looksLikeBackspace(p,k.start,k.endA,x,M)&&o.someProp("handleKeyDown",W=>W(o,keyEvent(8,"Backspace")))){android$1&&chrome$1&&o.domObserver.suppressSelectionUpdates();return}chrome$1&&k.endB==k.start&&(o.input.lastChromeDelete=Date.now()),android$1&&!L&&x.start()!=M.start()&&M.parentOffset==0&&x.depth==M.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==k.endA&&(k.endB-=2,M=f.doc.resolveNoCache(k.endB-f.from),setTimeout(()=>{o.someProp("handleKeyDown",function(W){return W(o,keyEvent(13,"Enter"))})},20));let B=k.start,F=k.endA,j,I,U;if(L){if(x.pos==M.pos)ie$2&&ie_version<=11&&x.parentOffset==0&&(o.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(o),20)),j=o.state.tr.delete(B,F),I=p.resolve(k.start).marksAcross(p.resolve(k.endA));else if(k.endA==k.endB&&(U=isMarkChange(x.parent.content.cut(x.parentOffset,M.parentOffset),E.parent.content.cut(E.parentOffset,k.endA-E.start()))))j=o.state.tr,U.type=="add"?j.addMark(B,F,U.mark):j.removeMark(B,F,U.mark);else if(x.parent.child(x.index()).isText&&x.index()==M.index()-(M.textOffset?0:1)){let W=x.parent.textBetween(x.parentOffset,M.parentOffset);if(o.someProp("handleTextInput",K=>K(o,B,F,W)))return;j=o.state.tr.insertText(W,B,F)}}if(j||(j=o.state.tr.replace(B,F,f.doc.slice(k.start-f.from,k.endB-f.from))),f.sel){let W=resolveSelection(o,j.doc,f.sel);W&&!(chrome$1&&o.composing&&W.empty&&(k.start!=k.endB||o.input.lastChromeDelete<Date.now()-100)&&(W.head==B||W.head==j.mapping.map(F)-1)||ie$2&&W.empty&&W.head==B)&&j.setSelection(W)}I&&j.ensureMarks(I),l&&j.setMeta("composition",l),o.dispatch(j.scrollIntoView())}function resolveSelection(o,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:selectionBetween(o,e.resolve(n.anchor),e.resolve(n.head))}function isMarkChange(o,e){let n=o.firstChild.marks,a=e.firstChild.marks,s=n,l=a,c,d,u;for(let p=0;p<a.length;p++)s=a[p].removeFromSet(s);for(let p=0;p<n.length;p++)l=n[p].removeFromSet(l);if(s.length==1&&l.length==0)d=s[0],c="add",u=p=>p.mark(d.addToSet(p.marks));else if(s.length==0&&l.length==1)d=l[0],c="remove",u=p=>p.mark(d.removeFromSet(p.marks));else return null;let f=[];for(let p=0;p<e.childCount;p++)f.push(u(e.child(p)));if(Fragment$1.from(f).eq(o))return{mark:d,type:c}}function looksLikeBackspace(o,e,n,a,s){if(n-e<=s.pos-a.pos||skipClosingAndOpening(a,!0,!1)<s.pos)return!1;let l=o.resolve(e);if(!a.parent.isTextblock){let d=l.nodeAfter;return d!=null&&n==e+d.nodeSize}if(l.parentOffset<l.parent.content.size||!l.parent.isTextblock)return!1;let c=o.resolve(skipClosingAndOpening(l,!0,!0));return!c.parent.isTextblock||c.pos>n||skipClosingAndOpening(c,!0,!1)<n?!1:a.parent.content.cut(a.parentOffset).eq(c.parent.content)}function skipClosingAndOpening(o,e,n){let a=o.depth,s=e?o.end():o.pos;for(;a>0&&(e||o.indexAfter(a)==o.node(a).childCount);)a--,s++,e=!1;if(n){let l=o.node(a).maybeChild(o.indexAfter(a));for(;l&&!l.isLeaf;)l=l.firstChild,s++}return s}function findDiff$1(o,e,n,a,s){let l=o.findDiffStart(e,n);if(l==null)return null;let{a:c,b:d}=o.findDiffEnd(e,n+o.size,n+e.size);if(s=="end"){let u=Math.max(0,l-Math.min(c,d));a-=c+u-l}if(c<l&&o.size<e.size){let u=a<=l&&a>=c?l-a:0;l-=u,l&&l<e.size&&isSurrogatePair(e.textBetween(l-1,l+1))&&(l+=u?1:-1),d=l+(d-c),c=l}else if(d<l){let u=a<=l&&a>=d?l-a:0;l-=u,l&&l<o.size&&isSurrogatePair(o.textBetween(l-1,l+1))&&(l+=u?1:-1),c=l+(c-d),d=l}return{start:l,endA:c,endB:d}}function isSurrogatePair(o){if(o.length!=2)return!1;let e=o.charCodeAt(0),n=o.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}let EditorView$1=class{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState$1,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver$1(this,(a,s,l,c)=>readDOMChange(this,a,s,l,c)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(checkStateComponent),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let a in this._props)n[a]=this._props[a];n.state=this.state;for(let a in e)n[a]=e[a];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var a;let s=this.state,l=!1,c=!1;e.storedMarks&&this.composing&&(clearComposition(this),c=!0),this.state=e;let d=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(d||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let v=buildNodeViews(this);changedNodeViews(v,this.nodeViews)&&(this.nodeViews=v,l=!0)}(d||n.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let u=viewDecorations(this),f=computeDocDeco(this),p=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",_=l||!this.docView.matchesNode(e.doc,f,u);(_||!e.selection.eq(s.selection))&&(c=!0);let b=p=="preserve"&&c&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(c){this.domObserver.stop();let v=_&&(ie$2||chrome$1)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&selectionContextChanged(s.selection,e.selection);if(_){let k=chrome$1?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode$1(this)),(l||!this.docView.update(e.doc,f,u,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=docViewDesc(e.doc,f,u,this.dom,this)),k&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,v):(syncNodeSelection(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((a=this.dragging)===null||a===void 0)&&a.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():b&&resetScrollPos(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof NodeSelection){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&scrollRectIntoView$1(this,n.getBoundingClientRect(),e)}else scrollRectIntoView$1(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let a=this.directPlugins[n];a.spec.view&&this.pluginViews.push(a.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let a=this.state.plugins[n];a.spec.view&&this.pluginViews.push(a.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let a=this.pluginViews[n];a.update&&a.update(this,e)}}updateDraggedNode(e,n){let a=e.node,s=-1;if(this.state.doc.nodeAt(a.from)==a.node)s=a.from;else{let l=a.from+(this.state.doc.content.size-n.doc.content.size);(l>0&&this.state.doc.nodeAt(l))==a.node&&(s=l)}this.dragging=new Dragging(e.slice,e.move,s<0?void 0:NodeSelection.create(this.state.doc,s))}someProp(e,n){let a=this._props&&this._props[e],s;if(a!=null&&(s=n?n(a):a))return s;for(let c=0;c<this.directPlugins.length;c++){let d=this.directPlugins[c].props[e];if(d!=null&&(s=n?n(d):d))return s}let l=this.state.plugins;if(l)for(let c=0;c<l.length;c++){let d=l[c].props[e];if(d!=null&&(s=n?n(d):d))return s}}hasFocus(){if(ie$2){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll$1(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return posAtCoords$1(this,e)}coordsAtPos(e,n=1){return coordsAtPos(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,a=-1){let s=this.docView.posFromDOM(e,n,a);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return endOfTextblock(this,n||this.state,e)}pasteHTML(e,n){return doPaste$1(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return doPaste$1(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return dispatchEvent(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?safari$1&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};function computeDocDeco(o){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(o.editable),o.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(o.state)),n)for(let a in n)a=="class"?e.class+=" "+n[a]:a=="style"?e.style=(e.style?e.style+";":"")+n[a]:!e[a]&&a!="contenteditable"&&a!="nodeName"&&(e[a]=String(n[a]))}),e.translate||(e.translate="no"),[Decoration$1.node(0,o.state.doc.content.size,e)]}function updateCursorWrapper(o){if(o.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),o.cursorWrapper={dom:e,deco:Decoration$1.widget(o.state.selection.from,e,{raw:!0,marks:o.markCursor})}}else o.cursorWrapper=null}function getEditable(o){return!o.someProp("editable",e=>e(o.state)===!1)}function selectionContextChanged(o,e){let n=Math.min(o.$anchor.sharedDepth(o.head),e.$anchor.sharedDepth(e.head));return o.$anchor.start(n)!=e.$anchor.start(n)}function buildNodeViews(o){let e=Object.create(null);function n(a){for(let s in a)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=a[s])}return o.someProp("nodeViews",n),o.someProp("markViews",n),e}function changedNodeViews(o,e){let n=0,a=0;for(let s in o){if(o[s]!=e[s])return!0;n++}for(let s in e)a++;return n!=a}function checkStateComponent(o){if(o.spec.state||o.spec.filterTransaction||o.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}let rangeFrom=[],rangeTo=[];(()=>{let o="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<o.length;e++)(e%2?rangeTo:rangeFrom).push(n=n+o[e])})();function isExtendingChar(o){if(o<768)return!1;for(let e=0,n=rangeFrom.length;;){let a=e+n>>1;if(o<rangeFrom[a])n=a;else if(o>=rangeTo[a])e=a+1;else return!0;if(e==n)return!1}}function isRegionalIndicator(o){return o>=127462&&o<=127487}const ZWJ=8205;function findClusterBreak$1(o,e,n=!0,a=!0){return(n?nextClusterBreak:prevClusterBreak)(o,e,a)}function nextClusterBreak(o,e,n){if(e==o.length)return e;e&&surrogateLow$1(o.charCodeAt(e))&&surrogateHigh$1(o.charCodeAt(e-1))&&e--;let a=codePointAt$1(o,e);for(e+=codePointSize$1(a);e<o.length;){let s=codePointAt$1(o,e);if(a==ZWJ||s==ZWJ||n&&isExtendingChar(s))e+=codePointSize$1(s),a=s;else if(isRegionalIndicator(s)){let l=0,c=e-2;for(;c>=0&&isRegionalIndicator(codePointAt$1(o,c));)l++,c-=2;if(l%2==0)break;e+=2}else break}return e}function prevClusterBreak(o,e,n){for(;e>0;){let a=nextClusterBreak(o,e-2,n);if(a<e)return a;e--}return 0}function codePointAt$1(o,e){let n=o.charCodeAt(e);if(!surrogateHigh$1(n)||e+1==o.length)return n;let a=o.charCodeAt(e+1);return surrogateLow$1(a)?(n-55296<<10)+(a-56320)+65536:n}function surrogateLow$1(o){return o>=56320&&o<57344}function surrogateHigh$1(o){return o>=55296&&o<56320}function codePointSize$1(o){return o<65536?1:2}class Text{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,a){[e,n]=clip$1(this,e,n);let s=[];return this.decompose(0,e,s,2),a.length&&a.decompose(0,a.length,s,3),this.decompose(n,this.length,s,1),TextNode$1.from(s,this.length-(n-e)+a.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=clip$1(this,e,n);let a=[];return this.decompose(e,n,a,0),TextNode$1.from(a,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),a=this.length-this.scanIdentical(e,-1),s=new RawTextCursor(this),l=new RawTextCursor(e);for(let c=n,d=n;;){if(s.next(c),l.next(c),c=0,s.lineBreak!=l.lineBreak||s.done!=l.done||s.value!=l.value)return!1;if(d+=s.value.length,s.done||d>=a)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,n=this.length){return new PartialTextCursor(this,e,n)}iterLines(e,n){let a;if(e==null)a=this.iter();else{n==null&&(n=this.lines+1);let s=this.line(e).from;a=this.iterRange(s,Math.max(s,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new LineCursor(a)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Text.empty:e.length<=32?new TextLeaf(e):TextNode$1.from(TextLeaf.split(e,[]))}}class TextLeaf extends Text{constructor(e,n=textLength(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,a,s){for(let l=0;;l++){let c=this.text[l],d=s+c.length;if((n?a:d)>=e)return new Line(s,d,a,c);s=d+1,a++}}decompose(e,n,a,s){let l=e<=0&&n>=this.length?this:new TextLeaf(sliceText(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(s&1){let c=a.pop(),d=appendText(l.text,c.text.slice(),0,l.length);if(d.length<=32)a.push(new TextLeaf(d,c.length+l.length));else{let u=d.length>>1;a.push(new TextLeaf(d.slice(0,u)),new TextLeaf(d.slice(u)))}}else a.push(l)}replace(e,n,a){if(!(a instanceof TextLeaf))return super.replace(e,n,a);[e,n]=clip$1(this,e,n);let s=appendText(this.text,appendText(a.text,sliceText(this.text,0,e)),n),l=this.length+a.length-(n-e);return s.length<=32?new TextLeaf(s,l):TextNode$1.from(TextLeaf.split(s,[]),l)}sliceString(e,n=this.length,a=`
`){[e,n]=clip$1(this,e,n);let s="";for(let l=0,c=0;l<=n&&c<this.text.length;c++){let d=this.text[c],u=l+d.length;l>e&&c&&(s+=a),e<u&&n>l&&(s+=d.slice(Math.max(0,e-l),n-l)),l=u+1}return s}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let a=[],s=-1;for(let l of e)a.push(l),s+=l.length+1,a.length==32&&(n.push(new TextLeaf(a,s)),a=[],s=-1);return s>-1&&n.push(new TextLeaf(a,s)),n}}let TextNode$1=class Dt extends Text{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let a of e)this.lines+=a.lines}lineInner(e,n,a,s){for(let l=0;;l++){let c=this.children[l],d=s+c.length,u=a+c.lines-1;if((n?u:d)>=e)return c.lineInner(e,n,a,s);s=d+1,a=u+1}}decompose(e,n,a,s){for(let l=0,c=0;c<=n&&l<this.children.length;l++){let d=this.children[l],u=c+d.length;if(e<=u&&n>=c){let f=s&((c<=e?1:0)|(u>=n?2:0));c>=e&&u<=n&&!f?a.push(d):d.decompose(e-c,n-c,a,f)}c=u+1}}replace(e,n,a){if([e,n]=clip$1(this,e,n),a.lines<this.lines)for(let s=0,l=0;s<this.children.length;s++){let c=this.children[s],d=l+c.length;if(e>=l&&n<=d){let u=c.replace(e-l,n-l,a),f=this.lines-c.lines+u.lines;if(u.lines<f>>4&&u.lines>f>>6){let p=this.children.slice();return p[s]=u,new Dt(p,this.length-(n-e)+a.length)}return super.replace(l,d,u)}l=d+1}return super.replace(e,n,a)}sliceString(e,n=this.length,a=`
`){[e,n]=clip$1(this,e,n);let s="";for(let l=0,c=0;l<this.children.length&&c<=n;l++){let d=this.children[l],u=c+d.length;c>e&&l&&(s+=a),e<u&&n>c&&(s+=d.sliceString(e-c,n-c,a)),c=u+1}return s}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Dt))return 0;let a=0,[s,l,c,d]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=n,l+=n){if(s==c||l==d)return a;let u=this.children[s],f=e.children[l];if(u!=f)return a+u.scanIdentical(f,n);a+=u.length+1}}static from(e,n=e.reduce((a,s)=>a+s.length+1,-1)){let a=0;for(let v of e)a+=v.lines;if(a<32){let v=[];for(let k of e)k.flatten(v);return new TextLeaf(v,n)}let s=Math.max(32,a>>5),l=s<<1,c=s>>1,d=[],u=0,f=-1,p=[];function _(v){let k;if(v.lines>l&&v instanceof Dt)for(let x of v.children)_(x);else v.lines>c&&(u>c||!u)?(b(),d.push(v)):v instanceof TextLeaf&&u&&(k=p[p.length-1])instanceof TextLeaf&&v.lines+k.lines<=32?(u+=v.lines,f+=v.length+1,p[p.length-1]=new TextLeaf(k.text.concat(v.text),k.length+1+v.length)):(u+v.lines>s&&b(),u+=v.lines,f+=v.length+1,p.push(v))}function b(){u!=0&&(d.push(p.length==1?p[0]:Dt.from(p,f)),f=-1,u=p.length=0)}for(let v of e)_(v);return b(),d.length==1?d[0]:new Dt(d,n)}};Text.empty=new TextLeaf([""],0);function textLength(o){let e=-1;for(let n of o)e+=n.length+1;return e}function appendText(o,e,n=0,a=1e9){for(let s=0,l=0,c=!0;l<o.length&&s<=a;l++){let d=o[l],u=s+d.length;u>=n&&(u>a&&(d=d.slice(0,a-s)),s<n&&(d=d.slice(n-s)),c?(e[e.length-1]+=d,c=!1):e.push(d)),s=u+1}return e}function sliceText(o,e,n){return appendText(o,[""],e,n)}class RawTextCursor{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let a=this.nodes.length-1,s=this.nodes[a],l=this.offsets[a],c=l>>1,d=s instanceof TextLeaf?s.text.length:s.children.length;if(c==(n>0?d:0)){if(a==0)return this.done=!0,this.value="",this;n>0&&this.offsets[a-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(n>0?0:1)){if(this.offsets[a]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof TextLeaf){let u=s.text[c+(n<0?-1:0)];if(this.offsets[a]+=n,u.length>Math.max(0,e))return this.value=e==0?u:n>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=s.children[c+(n<0?-1:0)];e>u.length?(e-=u.length,this.offsets[a]+=n):(n<0&&this.offsets[a]--,this.nodes.push(u),this.offsets.push(n>0?1:(u instanceof TextLeaf?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,n,a){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,n>a?-1:1),this.pos=n>a?e.length:0,this.from=Math.min(n,a),this.to=Math.max(n,a)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let a=n<0?this.pos-this.from:this.to-this.pos;e>a&&(e=a),a-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*n,this.value=s.length<=a?s:n<0?s.slice(s.length-a):s.slice(0,a),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:a,value:s}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):a?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(e,n,a,s){this.from=e,this.to=n,this.number=a,this.text=s}get length(){return this.to-this.from}}function clip$1(o,e,n){return e=Math.max(0,Math.min(o.length,e)),[e,Math.max(e,Math.min(o.length,n))]}function findClusterBreak(o,e,n=!0,a=!0){return findClusterBreak$1(o,e,n,a)}function surrogateLow(o){return o>=56320&&o<57344}function surrogateHigh(o){return o>=55296&&o<56320}function codePointAt(o,e){let n=o.charCodeAt(e);if(!surrogateHigh(n)||e+1==o.length)return n;let a=o.charCodeAt(e+1);return surrogateLow(a)?(n-55296<<10)+(a-56320)+65536:n}function fromCodePoint(o){return o<=65535?String.fromCharCode(o):(o-=65536,String.fromCharCode((o>>10)+55296,(o&1023)+56320))}function codePointSize(o){return o<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(o){return o[o.Simple=0]="Simple",o[o.TrackDel=1]="TrackDel",o[o.TrackBefore=2]="TrackBefore",o[o.TrackAfter=3]="TrackAfter",o}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let a=this.sections[n+1];e+=a<0?this.sections[n]:a}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,a=0,s=0;n<this.sections.length;){let l=this.sections[n++],c=this.sections[n++];c<0?(e(a,s,l),s+=l):s+=c,a+=l}}iterChangedRanges(e,n=!1){iterChanges(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let a=this.sections[n++],s=this.sections[n++];s<0?e.push(a,s):e.push(s,a)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,n=!1){return e.empty?this:mapSet(this,e,n)}mapPos(e,n=-1,a=MapMode.Simple){let s=0,l=0;for(let c=0;c<this.sections.length;){let d=this.sections[c++],u=this.sections[c++],f=s+d;if(u<0){if(f>e)return l+(e-s);l+=d}else{if(a!=MapMode.Simple&&f>=e&&(a==MapMode.TrackDel&&s<e&&f>e||a==MapMode.TrackBefore&&s<e||a==MapMode.TrackAfter&&f>e))return null;if(f>e||f==e&&n<0&&!d)return e==s||n<0?l:l+u;l+=u}s=f}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return l}touchesRange(e,n=e){for(let a=0,s=0;a<this.sections.length&&s<=n;){let l=this.sections[a++],c=this.sections[a++],d=s+l;if(c>=0&&s<=n&&d>=e)return s<e&&d>n?"cover":!0;s=d}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let a=this.sections[n++],s=this.sections[n++];e+=(e?" ":"")+a+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(n,a,s,l,c)=>e=e.replace(s,s+(a-n),c),!1),e}mapDesc(e,n=!1){return mapSet(this,e,n,!0)}invert(e){let n=this.sections.slice(),a=[];for(let s=0,l=0;s<n.length;s+=2){let c=n[s],d=n[s+1];if(d>=0){n[s]=d,n[s+1]=c;let u=s>>1;for(;a.length<u;)a.push(Text.empty);a.push(c?e.slice(l,l+c):Text.empty)}l+=c}return new ChangeSet(n,a)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,n=!1){return e.empty?this:mapSet(this,e,n,!0)}iterChanges(e,n=!1){iterChanges(this,e,n)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let n=[],a=[],s=[],l=new SectionIter(this);e:for(let c=0,d=0;;){let u=c==e.length?1e9:e[c++];for(;d<u||d==u&&l.len==0;){if(l.done)break e;let p=Math.min(l.len,u-d);addSection(s,p,-1);let _=l.ins==-1?-1:l.off==0?l.ins:0;addSection(n,p,_),_>0&&addInsert(a,n,l.text),l.forward(p),d+=p}let f=e[c++];for(;d<f;){if(l.done)break e;let p=Math.min(l.len,f-d);addSection(n,p,-1),addSection(s,p,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(p),d+=p}}return{changes:new ChangeSet(n,a),filtered:ChangeDesc.create(s)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let a=this.sections[n],s=this.sections[n+1];s<0?e.push(a):s==0?e.push([a]):e.push([a].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,a){let s=[],l=[],c=0,d=null;function u(p=!1){if(!p&&!s.length)return;c<n&&addSection(s,n-c,-1);let _=new ChangeSet(s,l);d=d?d.compose(_.map(d)):_,s=[],l=[],c=0}function f(p){if(Array.isArray(p))for(let _ of p)f(_);else if(p instanceof ChangeSet){if(p.length!=n)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${n})`);u(),d=d?d.compose(p.map(d)):p}else{let{from:_,to:b=_,insert:v}=p;if(_>b||_<0||b>n)throw new RangeError(`Invalid change range ${_} to ${b} (in doc of length ${n})`);let k=v?typeof v=="string"?Text.of(v.split(a||DefaultSplit)):v:Text.empty,x=k.length;if(_==b&&x==0)return;_<c&&u(),_>c&&addSection(s,_-c,-1),addSection(s,b-_,x),addInsert(l,s,k),c=b}}return f(e),u(!d),d}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],a=[];for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")n.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((c,d)=>d&&typeof c!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)n.push(l[0],0);else{for(;a.length<s;)a.push(Text.empty);a[s]=Text.of(l.slice(1)),n.push(l[0],a[s].length)}}}return new ChangeSet(n,a)}static createSet(e,n){return new ChangeSet(e,n)}}function addSection(o,e,n,a=!1){if(e==0&&n<=0)return;let s=o.length-2;s>=0&&n<=0&&n==o[s+1]?o[s]+=e:s>=0&&e==0&&o[s]==0?o[s+1]+=n:a?(o[s]+=e,o[s+1]+=n):o.push(e,n)}function addInsert(o,e,n){if(n.length==0)return;let a=e.length-2>>1;if(a<o.length)o[o.length-1]=o[o.length-1].append(n);else{for(;o.length<a;)o.push(Text.empty);o.push(n)}}function iterChanges(o,e,n){let a=o.inserted;for(let s=0,l=0,c=0;c<o.sections.length;){let d=o.sections[c++],u=o.sections[c++];if(u<0)s+=d,l+=d;else{let f=s,p=l,_=Text.empty;for(;f+=d,p+=u,u&&a&&(_=_.append(a[c-2>>1])),!(n||c==o.sections.length||o.sections[c+1]<0);)d=o.sections[c++],u=o.sections[c++];e(s,f,l,p,_),s=f,l=p}}}function mapSet(o,e,n,a=!1){let s=[],l=a?[]:null,c=new SectionIter(o),d=new SectionIter(e);for(let u=-1;;){if(c.done&&d.len||d.done&&c.len)throw new Error("Mismatched change set lengths");if(c.ins==-1&&d.ins==-1){let f=Math.min(c.len,d.len);addSection(s,f,-1),c.forward(f),d.forward(f)}else if(d.ins>=0&&(c.ins<0||u==c.i||c.off==0&&(d.len<c.len||d.len==c.len&&!n))){let f=d.len;for(addSection(s,d.ins,-1);f;){let p=Math.min(c.len,f);c.ins>=0&&u<c.i&&c.len<=p&&(addSection(s,0,c.ins),l&&addInsert(l,s,c.text),u=c.i),c.forward(p),f-=p}d.next()}else if(c.ins>=0){let f=0,p=c.len;for(;p;)if(d.ins==-1){let _=Math.min(p,d.len);f+=_,p-=_,d.forward(_)}else if(d.ins==0&&d.len<p)p-=d.len,d.next();else break;addSection(s,f,u<c.i?c.ins:0),l&&u<c.i&&addInsert(l,s,c.text),u=c.i,c.forward(c.len-p)}else{if(c.done&&d.done)return l?ChangeSet.createSet(s,l):ChangeDesc.create(s);throw new Error("Mismatched change set lengths")}}}function composeSets(o,e,n=!1){let a=[],s=n?[]:null,l=new SectionIter(o),c=new SectionIter(e);for(let d=!1;;){if(l.done&&c.done)return s?ChangeSet.createSet(a,s):ChangeDesc.create(a);if(l.ins==0)addSection(a,l.len,0,d),l.next();else if(c.len==0&&!c.done)addSection(a,0,c.ins,d),s&&addInsert(s,a,c.text),c.next();else{if(l.done||c.done)throw new Error("Mismatched change set lengths");{let u=Math.min(l.len2,c.len),f=a.length;if(l.ins==-1){let p=c.ins==-1?-1:c.off?0:c.ins;addSection(a,u,p,d),s&&p&&addInsert(s,a,c.text)}else c.ins==-1?(addSection(a,l.off?0:l.len,u,d),s&&addInsert(s,a,l.textBit(u))):(addSection(a,l.off?0:l.len,c.off?0:c.ins,d),s&&!c.off&&addInsert(s,a,c.text));d=(l.ins>u||c.ins>=0&&c.len>u)&&(d||a.length>f),l.forward2(u),c.forward(u)}}}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Text.empty:e[n]}textBit(e){let{inserted:n}=this.set,a=this.i-2>>1;return a>=n.length&&!e?Text.empty:n[a].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,n,a){this.from=e,this.to=n,this.flags=a}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==0xffffff?void 0:e}map(e,n=-1){let a,s;return this.empty?a=s=e.mapPos(this.from,n):(a=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),a==this.from&&s==this.to?this:new SelectionRange(a,s,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return EditorSelection.range(e,n);let a=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return EditorSelection.range(this.anchor,a)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,n,a){return new SelectionRange(e,n,a)}}EditorSelection=class{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:EditorSelection.create(this.ranges.map(a=>a.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let a=0;a<this.ranges.length;a++)if(!this.ranges[a].eq(e.ranges[a],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(e,n=!0){return EditorSelection.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let a=this.ranges.slice();return a[n]=e,EditorSelection.create(a,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(e.ranges.map(n=>SelectionRange.fromJSON(n)),e.main)}static single(e,n=e){return new EditorSelection([EditorSelection.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let a=0,s=0;s<e.length;s++){let l=e[s];if(l.empty?l.from<=a:l.from<a)return EditorSelection.normalized(e.slice(),n);a=l.to}return new EditorSelection(e,n)}static cursor(e,n=0,a,s){return SelectionRange.create(e,e,(n==0?0:n<0?8:16)|(a==null?7:Math.min(6,a))|(s??0xffffff)<<6)}static range(e,n,a,s){let l=(a??0xffffff)<<6|(s==null?7:Math.min(6,s));return n<e?SelectionRange.create(n,e,48|l):SelectionRange.create(e,n,(n>e?8:0)|l)}static normalized(e,n=0){let a=e[n];e.sort((s,l)=>s.from-l.from),n=e.indexOf(a);for(let s=1;s<e.length;s++){let l=e[s],c=e[s-1];if(l.empty?l.from<=c.to:l.from<c.to){let d=c.from,u=Math.max(l.to,c.to);s<=n&&n--,e.splice(--s,2,l.anchor>l.head?EditorSelection.range(u,d):EditorSelection.range(d,u))}}return new EditorSelection(e,n)}};function checkSelection(o,e){for(let n of o.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,n,a,s,l){this.combine=e,this.compareInput=n,this.compare=a,this.isStatic=s,this.id=nextID++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new Facet(e.combine||(n=>n),e.compareInput||((n,a)=>n===a),e.compare||(e.combine?(n,a)=>n===a:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,n)}from(e,n){return n||(n=a=>a),this.compute([e],a=>n(a.field(e)))}}function sameArray$1(o,e){return o==e||o.length==e.length&&o.every((n,a)=>n===e[a])}class FacetProvider{constructor(e,n,a,s){this.dependencies=e,this.facet=n,this.type=a,this.value=s,this.id=nextID++}dynamicSlot(e){var n;let a=this.value,s=this.facet.compareInput,l=this.id,c=e[l]>>1,d=this.type==2,u=!1,f=!1,p=[];for(let _ of this.dependencies)_=="doc"?u=!0:_=="selection"?f=!0:((n=e[_.id])!==null&&n!==void 0?n:1)&1||p.push(e[_.id]);return{create(_){return _.values[c]=a(_),1},update(_,b){if(u&&b.docChanged||f&&(b.docChanged||b.selection)||ensureAll(_,p)){let v=a(_);if(d?!compareArray(v,_.values[c],s):!s(v,_.values[c]))return _.values[c]=v,1}return 0},reconfigure:(_,b)=>{let v,k=b.config.address[l];if(k!=null){let x=getAddr(b,k);if(this.dependencies.every(M=>M instanceof Facet?b.facet(M)===_.facet(M):M instanceof StateField?b.field(M,!1)==_.field(M,!1):!0)||(d?compareArray(v=a(_),x,s):s(v=a(_),x)))return _.values[c]=x,0}else v=a(_);return _.values[c]=v,1}}}}function compareArray(o,e,n){if(o.length!=e.length)return!1;for(let a=0;a<o.length;a++)if(!n(o[a],e[a]))return!1;return!0}function ensureAll(o,e){let n=!1;for(let a of e)ensureAddr(o,a)&1&&(n=!0);return n}function dynamicFacetSlot(o,e,n){let a=n.map(u=>o[u.id]),s=n.map(u=>u.type),l=a.filter(u=>!(u&1)),c=o[e.id]>>1;function d(u){let f=[];for(let p=0;p<a.length;p++){let _=getAddr(u,a[p]);if(s[p]==2)for(let b of _)f.push(b);else f.push(_)}return e.combine(f)}return{create(u){for(let f of a)ensureAddr(u,f);return u.values[c]=d(u),1},update(u,f){if(!ensureAll(u,l))return 0;let p=d(u);return e.compare(p,u.values[c])?0:(u.values[c]=p,1)},reconfigure(u,f){let p=ensureAll(u,a),_=f.config.facets[e.id],b=f.facet(e);if(_&&!p&&sameArray$1(n,_))return u.values[c]=b,0;let v=d(u);return e.compare(v,b)?(u.values[c]=b,0):(u.values[c]=v,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,n,a,s,l){this.id=e,this.createF=n,this.updateF=a,this.compareF=s,this.spec=l,this.provides=void 0}static define(e){let n=new StateField(nextID++,e.create,e.update,e.compare||((a,s)=>a===s),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(initField).find(a=>a.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:a=>(a.values[n]=this.create(a),1),update:(a,s)=>{let l=a.values[n],c=this.updateF(l,s);return this.compareF(l,c)?0:(a.values[n]=c,1)},reconfigure:(a,s)=>s.config.address[this.id]!=null?(a.values[n]=s.field(this),0):(a.values[n]=this.create(a),1)}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(o){return e=>new PrecExtension(e,o)}Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,n){this.inner=e,this.prec=n}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,n){this.compartment=e,this.inner=n}}class Configuration{constructor(e,n,a,s,l,c){for(this.base=e,this.compartments=n,this.dynamicSlots=a,this.address=s,this.staticValues=l,this.facets=c,this.statusTemplate=[];this.statusTemplate.length<a.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,a){let s=[],l=Object.create(null),c=new Map;for(let b of flatten(e,n,c))b instanceof StateField?s.push(b):(l[b.facet.id]||(l[b.facet.id]=[])).push(b);let d=Object.create(null),u=[],f=[];for(let b of s)d[b.id]=f.length<<1,f.push(v=>b.slot(v));let p=a?.config.facets;for(let b in l){let v=l[b],k=v[0].facet,x=p&&p[b]||[];if(v.every(M=>M.type==0))if(d[k.id]=u.length<<1|1,sameArray$1(x,v))u.push(a.facet(k));else{let M=k.combine(v.map(E=>E.value));u.push(a&&k.compare(M,a.facet(k))?a.facet(k):M)}else{for(let M of v)M.type==0?(d[M.id]=u.length<<1|1,u.push(M.value)):(d[M.id]=f.length<<1,f.push(E=>M.dynamicSlot(E)));d[k.id]=f.length<<1,f.push(M=>dynamicFacetSlot(M,k,v))}}let _=f.map(b=>b(d));return new Configuration(e,c,_,d,u,l)}}function flatten(o,e,n){let a=[[],[],[],[],[]],s=new Map;function l(c,d){let u=s.get(c);if(u!=null){if(u<=d)return;let f=a[u].indexOf(c);f>-1&&a[u].splice(f,1),c instanceof CompartmentInstance&&n.delete(c.compartment)}if(s.set(c,d),Array.isArray(c))for(let f of c)l(f,d);else if(c instanceof CompartmentInstance){if(n.has(c.compartment))throw new RangeError("Duplicate use of compartment in extensions");let f=e.get(c.compartment)||c.inner;n.set(c.compartment,f),l(f,d)}else if(c instanceof PrecExtension)l(c.inner,c.prec);else if(c instanceof StateField)a[d].push(c),c.provides&&l(c.provides,d);else if(c instanceof FacetProvider)a[d].push(c),c.facet.extensions&&l(c.facet.extensions,Prec_.default);else{let f=c.extension;if(!f)throw new Error(`Unrecognized extension value in extension set (${c}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(f,d)}}return l(o,Prec_.default),a.reduce((c,d)=>c.concat(d))}function ensureAddr(o,e){if(e&1)return 2;let n=e>>1,a=o.status[n];if(a==4)throw new Error("Cyclic dependency between fields and/or facets");if(a&2)return a;o.status[n]=4;let s=o.computeSlot(o,o.config.dynamicSlots[n]);return o.status[n]=2|s}function getAddr(o,e){return e&1?o.config.staticValues[e>>1]:o.values[e>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:o=>o.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:o=>o.length?o[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:o=>o.length?o[0]:!1});class Annotation{constructor(e,n){this.type=e,this.value=n}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new StateEffect(this.type,n)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let a=[];for(let s of e){let l=s.map(n);l&&a.push(l)}return a}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,n,a,s,l,c){this.startState=e,this.changes=n,this.selection=a,this.effects=s,this.annotations=l,this.scrollIntoView=c,this._doc=null,this._state=null,a&&checkSelection(a,n.newLength),l.some(d=>d.type==Transaction.time)||(this.annotations=l.concat(Transaction.time.of(Date.now())))}static create(e,n,a,s,l,c){return new Transaction(e,n,a,s,l,c)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Transaction.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(o,e){let n=[];for(let a=0,s=0;;){let l,c;if(a<o.length&&(s==e.length||e[s]>=o[a]))l=o[a++],c=o[a++];else if(s<e.length)l=e[s++],c=e[s++];else return n;!n.length||n[n.length-1]<l?n.push(l,c):n[n.length-1]<c&&(n[n.length-1]=c)}}function mergeTransaction(o,e,n){var a;let s,l,c;return n?(s=e.changes,l=ChangeSet.empty(e.changes.length),c=o.changes.compose(e.changes)):(s=e.changes.map(o.changes),l=o.changes.mapDesc(e.changes,!0),c=o.changes.compose(s)),{changes:c,selection:e.selection?e.selection.map(l):(a=o.selection)===null||a===void 0?void 0:a.map(s),effects:StateEffect.mapEffects(o.effects,s).concat(StateEffect.mapEffects(e.effects,l)),annotations:o.annotations.length?o.annotations.concat(e.annotations):e.annotations,scrollIntoView:o.scrollIntoView||e.scrollIntoView}}function resolveTransactionInner(o,e,n){let a=e.selection,s=asArray(e.annotations);return e.userEvent&&(s=s.concat(Transaction.userEvent.of(e.userEvent))),{changes:e.changes instanceof ChangeSet?e.changes:ChangeSet.of(e.changes||[],n,o.facet(lineSeparator)),selection:a&&(a instanceof EditorSelection?a:EditorSelection.single(a.anchor,a.head)),effects:asArray(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function resolveTransaction(o,e,n){let a=resolveTransactionInner(o,e.length?e[0]:{},o.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(n=!1);let c=!!e[l].sequential;a=mergeTransaction(a,resolveTransactionInner(o,e[l],c?a.changes.newLength:o.doc.length),c)}let s=Transaction.create(o,a.changes,a.selection,a.effects,a.annotations,a.scrollIntoView);return extendTransaction(n?filterTransaction(s):s)}function filterTransaction(o){let e=o.startState,n=!0;for(let s of e.facet(changeFilter)){let l=s(o);if(l===!1){n=!1;break}Array.isArray(l)&&(n=n===!0?l:joinRanges(n,l))}if(n!==!0){let s,l;if(n===!1)l=o.changes.invertedDesc,s=ChangeSet.empty(e.doc.length);else{let c=o.changes.filter(n);s=c.changes,l=c.filtered.mapDesc(c.changes).invertedDesc}o=Transaction.create(e,s,o.selection&&o.selection.map(l),StateEffect.mapEffects(o.effects,l),o.annotations,o.scrollIntoView)}let a=e.facet(transactionFilter);for(let s=a.length-1;s>=0;s--){let l=a[s](o);l instanceof Transaction?o=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Transaction?o=l[0]:o=resolveTransaction(e,asArray(l),!1)}return o}function extendTransaction(o){let e=o.startState,n=e.facet(transactionExtender),a=o;for(let s=n.length-1;s>=0;s--){let l=n[s](o);l&&Object.keys(l).length&&(a=mergeTransaction(a,resolveTransactionInner(e,l,o.changes.newLength),!0))}return a==o?o:Transaction.create(e,o.changes,o.selection,a.effects,a.annotations,a.scrollIntoView)}const none$1=[];function asArray(o){return o==null?none$1:Array.isArray(o)?o:[o]}var CharCategory=function(o){return o[o.Word=0]="Word",o[o.Space=1]="Space",o[o.Other=2]="Other",o}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(o){if(wordChar)return wordChar.test(o);for(let e=0;e<o.length;e++){let n=o[e];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||nonASCIISingleCaseWordChar.test(n)))return!0}return!1}function makeCategorizer(o){return e=>{if(!/\S/.test(e))return CharCategory.Space;if(hasWordChar(e))return CharCategory.Word;for(let n=0;n<o.length;n++)if(e.indexOf(o[n])>-1)return CharCategory.Word;return CharCategory.Other}}EditorState=class{constructor(e,n,a,s,l,c){this.config=e,this.doc=n,this.selection=a,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=l,c&&(c._state=this);for(let d=0;d<this.config.dynamicSlots.length;d++)ensureAddr(this,d<<1);this.computeSlot=null}field(e,n=!0){let a=this.config.address[e.id];if(a==null){if(n)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,a),getAddr(this,a)}update(...e){return resolveTransaction(this,e,!0)}applyTransaction(e){let n=this.config,{base:a,compartments:s}=n;for(let d of e.effects)d.is(Compartment.reconfigure)?(n&&(s=new Map,n.compartments.forEach((u,f)=>s.set(f,u)),n=null),s.set(d.value.compartment,d.value.extension)):d.is(StateEffect.reconfigure)?(n=null,a=d.value):d.is(StateEffect.appendConfig)&&(n=null,a=asArray(a).concat(d.value));let l;n?l=e.startState.values.slice():(n=Configuration.resolve(a,s,this),l=new EditorState(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(u,f)=>f.reconfigure(u,this),null).values);let c=e.startState.facet(allowMultipleSelections)?e.newSelection:e.newSelection.asSingle();new EditorState(n,e.newDoc,c,l,(d,u)=>u.update(d,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:EditorSelection.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,a=e(n.ranges[0]),s=this.changes(a.changes),l=[a.range],c=asArray(a.effects);for(let d=1;d<n.ranges.length;d++){let u=e(n.ranges[d]),f=this.changes(u.changes),p=f.map(s);for(let b=0;b<d;b++)l[b]=l[b].map(p);let _=s.mapDesc(f,!0);l.push(u.range.map(_)),s=s.compose(p),c=StateEffect.mapEffects(c,p).concat(StateEffect.mapEffects(asArray(u.effects),_))}return{changes:s,selection:EditorSelection.create(l,n.mainIndex),effects:c}}changes(e=[]){return e instanceof ChangeSet?e:ChangeSet.of(e,this.doc.length,this.facet(EditorState.lineSeparator))}toText(e){return Text.of(e.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ensureAddr(this,n),getAddr(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let a in e){let s=e[a];s instanceof StateField&&this.config.address[s.id]!=null&&(n[a]=s.spec.toJSON(this.field(e[a]),this))}return n}static fromJSON(e,n={},a){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(a){for(let l in a)if(Object.prototype.hasOwnProperty.call(e,l)){let c=a[l],d=e[l];s.push(c.init(u=>c.spec.fromJSON(d,u)))}}return EditorState.create({doc:e.doc,selection:EditorSelection.fromJSON(e.selection),extensions:n.extensions?s.concat([n.extensions]):s})}static create(e={}){let n=Configuration.resolve(e.extensions||[],new Map),a=e.doc instanceof Text?e.doc:Text.of((e.doc||"").split(n.staticFacet(EditorState.lineSeparator)||DefaultSplit)),s=e.selection?e.selection instanceof EditorSelection?e.selection:EditorSelection.single(e.selection.anchor,e.selection.head):EditorSelection.single(0);return checkSelection(s,a.length),n.staticFacet(allowMultipleSelections)||(s=s.asSingle()),new EditorState(n,a,s,n.dynamicSlots.map(()=>null),(l,c)=>c.create(l),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(e,...n){for(let a of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(a,e)){e=a[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(a,s)=>{if(s=="$")return"$";let l=+(s||1);return!l||l>n.length?a:n[l-1]})),e}languageDataAt(e,n,a=-1){let s=[];for(let l of this.facet(languageData))for(let c of l(this,n,a))Object.prototype.hasOwnProperty.call(c,e)&&s.push(c[e]);return s}charCategorizer(e){return makeCategorizer(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:a,length:s}=this.doc.lineAt(e),l=this.charCategorizer(e),c=e-a,d=e-a;for(;c>0;){let u=findClusterBreak(n,c,!1);if(l(n.slice(u,c))!=CharCategory.Word)break;c=u}for(;d<s;){let u=findClusterBreak(n,d);if(l(n.slice(d,u))!=CharCategory.Word)break;d=u}return c==d?null:EditorSelection.range(c+a,d+a)}};EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:o=>o.length?o[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(o,e){let n=Object.keys(o),a=Object.keys(e);return n.length==a.length&&n.every(s=>o[s]==e[s])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(o,e,n={}){let a={};for(let s of o)for(let l of Object.keys(s)){let c=s[l],d=a[l];if(d===void 0)a[l]=c;else if(!(d===c||c===void 0))if(Object.hasOwnProperty.call(n,l))a[l]=n[l](d,c);else throw new Error("Config merge conflict for field "+l)}for(let s in e)a[s]===void 0&&(a[s]=e[s]);return a}class RangeValue{eq(e){return this==e}range(e,n=e){return Range$1.create(e,n,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class dn{constructor(e,n,a){this.from=e,this.to=n,this.value=a}static create(e,n,a){return new dn(e,n,a)}};function cmpRange(o,e){return o.from-e.from||o.value.startSide-e.value.startSide}class Chunk{constructor(e,n,a,s){this.from=e,this.to=n,this.value=a,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,n,a,s=0){let l=a?this.to:this.from;for(let c=s,d=l.length;;){if(c==d)return c;let u=c+d>>1,f=l[u]-e||(a?this.value[u].endSide:this.value[u].startSide)-n;if(u==c)return f>=0?c:d;f>=0?d=u:c=u+1}}between(e,n,a,s){for(let l=this.findIndex(n,-1e9,!0),c=this.findIndex(a,1e9,!1,l);l<c;l++)if(s(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,n){let a=[],s=[],l=[],c=-1,d=-1;for(let u=0;u<this.value.length;u++){let f=this.value[u],p=this.from[u]+e,_=this.to[u]+e,b,v;if(p==_){let k=n.mapPos(p,f.startSide,f.mapMode);if(k==null||(b=v=k,f.startSide!=f.endSide&&(v=n.mapPos(p,f.endSide),v<b)))continue}else if(b=n.mapPos(p,f.startSide),v=n.mapPos(_,f.endSide),b>v||b==v&&f.startSide>0&&f.endSide<=0)continue;(v-b||f.endSide-f.startSide)<0||(c<0&&(c=b),f.point&&(d=Math.max(d,v-b)),a.push(f),s.push(b-c),l.push(v-c))}return{mapped:a.length?new Chunk(s,l,a,d):null,pos:c}}}class RangeSet{constructor(e,n,a,s){this.chunkPos=e,this.chunk=n,this.nextLayer=a,this.maxPoint=s}static create(e,n,a,s){return new RangeSet(e,n,a,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:a=!1,filterFrom:s=0,filterTo:l=this.length}=e,c=e.filter;if(n.length==0&&!c)return this;if(a&&(n=n.slice().sort(cmpRange)),this.isEmpty)return n.length?RangeSet.of(n):this;let d=new LayerCursor(this,null,-1).goto(0),u=0,f=[],p=new RangeSetBuilder;for(;d.value||u<n.length;)if(u<n.length&&(d.from-n[u].from||d.startSide-n[u].value.startSide)>=0){let _=n[u++];p.addInner(_.from,_.to,_.value)||f.push(_)}else d.rangeIndex==1&&d.chunkIndex<this.chunk.length&&(u==n.length||this.chunkEnd(d.chunkIndex)<n[u].from)&&(!c||s>this.chunkEnd(d.chunkIndex)||l<this.chunkPos[d.chunkIndex])&&p.addChunk(this.chunkPos[d.chunkIndex],this.chunk[d.chunkIndex])?d.nextChunk():((!c||s>d.to||l<d.from||c(d.from,d.to,d.value))&&(p.addInner(d.from,d.to,d.value)||f.push(Range$1.create(d.from,d.to,d.value))),d.next());return p.finishInner(this.nextLayer.isEmpty&&!f.length?RangeSet.empty:this.nextLayer.update({add:f,filter:c,filterFrom:s,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],a=[],s=-1;for(let c=0;c<this.chunk.length;c++){let d=this.chunkPos[c],u=this.chunk[c],f=e.touchesRange(d,d+u.length);if(f===!1)s=Math.max(s,u.maxPoint),n.push(u),a.push(e.mapPos(d));else if(f===!0){let{mapped:p,pos:_}=u.map(d,e);p&&(s=Math.max(s,p.maxPoint),n.push(p),a.push(_))}}let l=this.nextLayer.map(e);return n.length==0?l:new RangeSet(a,n,l||RangeSet.empty,s)}between(e,n,a){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],c=this.chunk[s];if(n>=l&&e<=l+c.length&&c.between(l,e-l,n-l,a)===!1)return}this.nextLayer.between(e,n,a)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return HeapCursor.from(e).goto(n)}static compare(e,n,a,s,l=-1){let c=e.filter(_=>_.maxPoint>0||!_.isEmpty&&_.maxPoint>=l),d=n.filter(_=>_.maxPoint>0||!_.isEmpty&&_.maxPoint>=l),u=findSharedChunks(c,d,a),f=new SpanCursor(c,u,l),p=new SpanCursor(d,u,l);a.iterGaps((_,b,v)=>compare(f,_,p,b,v,s)),a.empty&&a.length==0&&compare(f,0,p,0,0,s)}static eq(e,n,a=0,s){s==null&&(s=0x3b9ac9ff);let l=e.filter(p=>!p.isEmpty&&n.indexOf(p)<0),c=n.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(l.length!=c.length)return!1;if(!l.length)return!0;let d=findSharedChunks(l,c),u=new SpanCursor(l,d,0).goto(a),f=new SpanCursor(c,d,0).goto(a);for(;;){if(u.to!=f.to||!sameValues(u.active,f.active)||u.point&&(!f.point||!u.point.eq(f.point)))return!1;if(u.to>s)return!0;u.next(),f.next()}}static spans(e,n,a,s,l=-1){let c=new SpanCursor(e,null,l).goto(n),d=n,u=c.openStart;for(;;){let f=Math.min(c.to,a);if(c.point){let p=c.activeForPoint(c.to),_=c.pointFrom<n?p.length+1:c.point.startSide<0?p.length:Math.min(p.length,u);s.point(d,f,c.point,p,_,c.pointRank),u=Math.min(c.openEnd(f),p.length)}else f>d&&(s.span(d,f,c.active,u),u=c.openEnd(f));if(c.to>a)return u+(c.point&&c.to>a?1:0);d=c.to,c.next()}}static of(e,n=!1){let a=new RangeSetBuilder;for(let s of e instanceof Range$1?[e]:n?lazySort(e):e)a.add(s.from,s.to,s.value);return a.finish()}static join(e){if(!e.length)return RangeSet.empty;let n=e[e.length-1];for(let a=e.length-2;a>=0;a--)for(let s=e[a];s!=RangeSet.empty;s=s.nextLayer)n=new RangeSet(s.chunkPos,s.chunk,n,Math.max(s.maxPoint,n.maxPoint));return n}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(o){if(o.length>1)for(let e=o[0],n=1;n<o.length;n++){let a=o[n];if(cmpRange(e,a)>0)return o.slice().sort(cmpRange);e=a}return o}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,a){this.addInner(e,n,a)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,n,a)}addInner(e,n,a){let s=e-this.lastTo||a.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||a.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=a,this.lastFrom=e,this.lastTo=n,this.value.push(a),a.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let a=n.value.length-1;return this.last=n.value[a],this.lastFrom=n.from[a]+e,this.lastTo=n.to[a]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function findSharedChunks(o,e,n){let a=new Map;for(let l of o)for(let c=0;c<l.chunk.length;c++)l.chunk[c].maxPoint<=0&&a.set(l.chunk[c],l.chunkPos[c]);let s=new Set;for(let l of e)for(let c=0;c<l.chunk.length;c++){let d=a.get(l.chunk[c]);d!=null&&(n?n.mapPos(d):d)==l.chunkPos[c]&&!n?.touchesRange(d,d+l.chunk[c].length)&&s.add(l.chunk[c])}return s}class LayerCursor{constructor(e,n,a,s=0){this.layer=e,this.skip=n,this.minPoint=a,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,a){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,a=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!a||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],a=e+n.from[this.rangeIndex];if(this.from=a,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,n=null,a=-1){let s=[];for(let l=0;l<e.length;l++)for(let c=e[l];!c.isEmpty;c=c.nextLayer)c.maxPoint>=a&&s.push(new LayerCursor(c,n,a,l));return s.length==1?s[0]:new HeapCursor(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let a of this.heap)a.goto(e,n);for(let a=this.heap.length>>1;a>=0;a--)heapBubble(this.heap,a);return this.next(),this}forward(e,n){for(let a of this.heap)a.forward(e,n);for(let a=this.heap.length>>1;a>=0;a--)heapBubble(this.heap,a);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(o,e){for(let n=o[e];;){let a=(e<<1)+1;if(a>=o.length)break;let s=o[a];if(a+1<o.length&&s.compare(o[a+1])>=0&&(s=o[a+1],a++),n.compare(s)<0)break;o[a]=n,o[e]=s,e=a}}class SpanCursor{constructor(e,n,a){this.minPoint=a,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,n,a)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let n=0,{value:a,to:s,rank:l}=this.cursor;for(;n<this.activeRank.length&&(l-this.activeRank[n]||s-this.activeTo[n])>0;)n++;insert(this.active,n,a),insert(this.activeTo,n,s),insert(this.activeRank,n,l),e&&insert(e,n,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let a=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),a&&remove(a,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(a),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(a){this.openStart=0;for(let s=a.length-1;s>=0&&a[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let a=this.active.length-1;a>=0&&!(this.activeRank[a]<this.pointRank);a--)(this.activeTo[a]>e||this.activeTo[a]==e&&this.active[a].endSide>=this.point.endSide)&&n.push(this.active[a]);return n.reverse()}openEnd(e){let n=0;for(let a=this.activeTo.length-1;a>=0&&this.activeTo[a]>e;a--)n++;return n}}function compare(o,e,n,a,s,l){o.goto(e),n.goto(a);let c=a+s,d=a,u=a-e;for(;;){let f=o.to+u-n.to,p=f||o.endSide-n.endSide,_=p<0?o.to+u:n.to,b=Math.min(_,c);if(o.point||n.point?o.point&&n.point&&(o.point==n.point||o.point.eq(n.point))&&sameValues(o.activeForPoint(o.to),n.activeForPoint(n.to))||l.comparePoint(d,b,o.point,n.point):b>d&&!sameValues(o.active,n.active)&&l.compareRange(d,b,o.active,n.active),_>c)break;(f||o.openEnd!=n.openEnd)&&l.boundChange&&l.boundChange(_),d=_,p<=0&&o.next(),p>=0&&n.next()}}function sameValues(o,e){if(o.length!=e.length)return!1;for(let n=0;n<o.length;n++)if(o[n]!=e[n]&&!o[n].eq(e[n]))return!1;return!0}function remove(o,e){for(let n=e,a=o.length-1;n<a;n++)o[n]=o[n+1];o.pop()}function insert(o,e,n){for(let a=o.length-1;a>=e;a--)o[a+1]=o[a];o[e]=n}function findMinIndex(o,e){let n=-1,a=1e9;for(let s=0;s<e.length;s++)(e[s]-a||o[s].endSide-o[n].endSide)<0&&(n=s,a=e[s]);return n}countColumn=function(o,e,n=o.length){let a=0;for(let s=0;s<n;)o.charCodeAt(s)==9?(a+=e-a%e,s++):(a++,s=findClusterBreak(o,s));return a};function findColumn(o,e,n,a){for(let s=0,l=0;;){if(l>=e)return s;if(s==o.length)break;l+=o.charCodeAt(s)==9?n-l%n:1,s=findClusterBreak(o,s)}return a===!0?-1:o.length}const C="ͼ",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(e,n){this.rules=[];let{finish:a}=n||{};function s(c){return/^@/.test(c)?[c]:c.split(/,\s*/)}function l(c,d,u,f){let p=[],_=/^@(\w+)\b/.exec(c[0]),b=_&&_[1]=="keyframes";if(_&&d==null)return u.push(c[0]+";");for(let v in d){let k=d[v];if(/&/.test(v))l(v.split(/,\s*/).map(x=>c.map(M=>x.replace(/&/,M))).reduce((x,M)=>x.concat(M)),k,u);else if(k&&typeof k=="object"){if(!_)throw new RangeError("The value of a property ("+v+") should be a primitive value.");l(s(v),k,p,b)}else k!=null&&p.push(v.replace(/_.*/,"").replace(/[A-Z]/g,x=>"-"+x.toLowerCase())+": "+k+";")}(p.length||b)&&u.push((a&&!_&&!f?c.map(a):c).join(", ")+" {"+p.join(" ")+"}")}for(let c in e)l(s(c),e[c],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C+e.toString(36)}static mount(e,n,a){let s=e[SET],l=a&&a.nonce;s?l&&s.setNonce(l):s=new StyleSet(e,l),s.mount(Array.isArray(n)?n:[n],e)}}let adoptedSet=new Map;class StyleSet{constructor(e,n){let a=e.ownerDocument||e,s=a.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let l=adoptedSet.get(a);if(l)return e[SET]=l;this.sheet=new s.CSSStyleSheet,adoptedSet.set(a,this)}else this.styleTag=a.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[SET]=this}mount(e,n){let a=this.sheet,s=0,l=0;for(let c=0;c<e.length;c++){let d=e[c],u=this.modules.indexOf(d);if(u<l&&u>-1&&(this.modules.splice(u,1),l--,u=-1),u==-1){if(this.modules.splice(l++,0,d),a)for(let f=0;f<d.rules.length;f++)a.insertRule(d.rules[f],s++)}else{for(;l<u;)s+=this.modules[l++].rules.length;s+=d.rules.length,l++}}if(a)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let c="";for(let u=0;u<this.modules.length;u++)c+=this.modules[u].getRules()+`
`;this.styleTag.textContent=c;let d=n.head||n;this.styleTag.parentNode!=d&&d.insertBefore(this.styleTag,d.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift$2={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i$1=0;i$1<10;i$1++)base[48+i$1]=base[96+i$1]=String(i$1);for(var i$1=1;i$1<=24;i$1++)base[i$1+111]="F"+i$1;for(var i$1=65;i$1<=90;i$1++)base[i$1]=String.fromCharCode(i$1+32),shift$2[i$1]=String.fromCharCode(i$1);for(var code in base)shift$2.hasOwnProperty(code)||(shift$2[code]=base[code]);function keyName(o){var e=mac$1&&o.metaKey&&o.shiftKey&&!o.ctrlKey&&!o.altKey||ie$1&&o.shiftKey&&o.key&&o.key.length==1||o.key=="Unidentified",n=!e&&o.key||(o.shiftKey?shift$2:base)[o.keyCode]||o.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function getSelection$1(o){let e;return o.nodeType==11?e=o.getSelection?o:o.ownerDocument:e=o,e.getSelection()}function contains$1(o,e){return e?o==e||o.contains(e.nodeType!=1?e.parentNode:e):!1}function hasSelection(o,e){if(!e.anchorNode)return!1;try{return contains$1(o,e.anchorNode)}catch{return!1}}function clientRectsFor(o){return o.nodeType==3?textRange(o,0,o.nodeValue.length).getClientRects():o.nodeType==1?o.getClientRects():[]}function isEquivalentPosition(o,e,n,a){return n?scanFor(o,e,n,a,-1)||scanFor(o,e,n,a,1):!1}function domIndex(o){for(var e=0;;e++)if(o=o.previousSibling,!o)return e}function isBlockElement(o){return o.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(o.nodeName)}function scanFor(o,e,n,a,s){for(;;){if(o==n&&e==a)return!0;if(e==(s<0?0:maxOffset(o))){if(o.nodeName=="DIV")return!1;let l=o.parentNode;if(!l||l.nodeType!=1)return!1;e=domIndex(o)+(s<0?0:1),o=l}else if(o.nodeType==1){if(o=o.childNodes[e+(s<0?-1:0)],o.nodeType==1&&o.contentEditable=="false")return!1;e=s<0?maxOffset(o):0}else return!1}}function maxOffset(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function flattenRect(o,e){let n=e?o.left:o.right;return{left:n,right:n,top:o.top,bottom:o.bottom}}function windowRect(o){let e=o.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:o.innerWidth,top:0,bottom:o.innerHeight}}function getScale$1(o,e){let n=e.width/o.offsetWidth,a=e.height/o.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-o.offsetWidth)<1)&&(n=1),(a>.995&&a<1.005||!isFinite(a)||Math.abs(e.height-o.offsetHeight)<1)&&(a=1),{scaleX:n,scaleY:a}}function scrollRectIntoView(o,e,n,a,s,l,c,d){let u=o.ownerDocument,f=u.defaultView||window;for(let p=o,_=!1;p&&!_;)if(p.nodeType==1){let b,v=p==u.body,k=1,x=1;if(v)b=windowRect(f);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(_=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let L=p.getBoundingClientRect();({scaleX:k,scaleY:x}=getScale$1(p,L)),b={left:L.left,right:L.left+p.clientWidth*k,top:L.top,bottom:L.top+p.clientHeight*x}}let M=0,E=0;if(s=="nearest")e.top<b.top?(E=-(b.top-e.top+c),n>0&&e.bottom>b.bottom+E&&(E=e.bottom-b.bottom+E+c)):e.bottom>b.bottom&&(E=e.bottom-b.bottom+c,n<0&&e.top-E<b.top&&(E=-(b.top+E-e.top+c)));else{let L=e.bottom-e.top,V=b.bottom-b.top;E=(s=="center"&&L<=V?e.top+L/2-V/2:s=="start"||s=="center"&&n<0?e.top-c:e.bottom-V+c)-b.top}if(a=="nearest"?e.left<b.left?(M=-(b.left-e.left+l),n>0&&e.right>b.right+M&&(M=e.right-b.right+M+l)):e.right>b.right&&(M=e.right-b.right+l,n<0&&e.left<b.left+M&&(M=-(b.left+M-e.left+l))):M=(a=="center"?e.left+(e.right-e.left)/2-(b.right-b.left)/2:a=="start"==d?e.left-l:e.right-(b.right-b.left)+l)-b.left,M||E)if(v)f.scrollBy(M,E);else{let L=0,V=0;if(E){let B=p.scrollTop;p.scrollTop+=E/x,V=(p.scrollTop-B)*x}if(M){let B=p.scrollLeft;p.scrollLeft+=M/k,L=(p.scrollLeft-B)*k}e={left:e.left-L,top:e.top-V,right:e.right-L,bottom:e.bottom-V},L&&Math.abs(L-M)<1&&(a="nearest"),V&&Math.abs(V-E)<1&&(s="nearest")}if(v)break;p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function scrollableParents(o){let e=o.ownerDocument,n,a;for(let s=o.parentNode;s&&!(s==e.body||n&&a);)if(s.nodeType==1)!a&&s.scrollHeight>s.clientHeight&&(a=s),!n&&s.scrollWidth>s.clientWidth&&(n=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:n,y:a}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:a}=e;this.set(n,Math.min(e.anchorOffset,n?maxOffset(n):0),a,Math.min(e.focusOffset,a?maxOffset(a):0))}set(e,n,a,s){this.anchorNode=e,this.anchorOffset=n,this.focusNode=a,this.focusOffset=s}}let preventScrollSupported=null;function focusPreventScroll(o){if(o.setActive)return o.setActive();if(preventScrollSupported)return o.focus(preventScrollSupported);let e=[];for(let n=o;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(o.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let n=0;n<e.length;){let a=e[n++],s=e[n++],l=e[n++];a.scrollTop!=s&&(a.scrollTop=s),a.scrollLeft!=l&&(a.scrollLeft=l)}}}let scratchRange;function textRange(o,e,n=e){let a=scratchRange||(scratchRange=document.createRange());return a.setEnd(o,n),a.setStart(o,e),a}function dispatchKey(o,e,n,a){let s={key:e,code:e,keyCode:n,which:n,cancelable:!0};a&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=a);let l=new KeyboardEvent("keydown",s);l.synthetic=!0,o.dispatchEvent(l);let c=new KeyboardEvent("keyup",s);return c.synthetic=!0,o.dispatchEvent(c),l.defaultPrevented||c.defaultPrevented}function getRoot(o){for(;o;){if(o&&(o.nodeType==9||o.nodeType==11&&o.host))return o;o=o.assignedSlot||o.parentNode}return null}function clearAttributes(o){for(;o.attributes.length;)o.removeAttributeNode(o.attributes[0])}function atElementStart(o,e){let n=e.focusNode,a=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=a)return!1;for(a=Math.min(a,maxOffset(n));;)if(a){if(n.nodeType!=1)return!1;let s=n.childNodes[a-1];s.contentEditable=="false"?a--:(n=s,a=maxOffset(n))}else{if(n==o)return!0;a=domIndex(n),n=n.parentNode}}function isScrolledToBottom(o){return o.scrollTop>Math.max(1,o.scrollHeight-o.clientHeight-4)}function textNodeBefore(o,e){for(let n=o,a=e;;){if(n.nodeType==3&&a>0)return{node:n,offset:a};if(n.nodeType==1&&a>0){if(n.contentEditable=="false")return null;n=n.childNodes[a-1],a=maxOffset(n)}else if(n.parentNode&&!isBlockElement(n))a=domIndex(n),n=n.parentNode;else return null}}function textNodeAfter(o,e){for(let n=o,a=e;;){if(n.nodeType==3&&a<n.nodeValue.length)return{node:n,offset:a};if(n.nodeType==1&&a<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[a],a=0}else if(n.parentNode&&!isBlockElement(n))a=domIndex(n)+1,n=n.parentNode;else return null}}class DOMPos{constructor(e,n,a=!0){this.node=e,this.offset=n,this.precise=a}static before(e,n){return new DOMPos(e.parentNode,domIndex(e),n)}static after(e,n){return new DOMPos(e.parentNode,domIndex(e)+1,n)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let a of this.children){if(a==e)return n;n+=a.length+a.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let a=this.dom,s=null,l;for(let c of this.children){if(c.flags&7){if(!c.dom&&(l=s?s.nextSibling:a.firstChild)){let d=ContentView.get(l);(!d||!d.parent&&d.canReuseDOM(c))&&c.reuseDOM(l)}c.sync(e,n),c.flags&=-8}if(l=s?s.nextSibling:a.firstChild,n&&!n.written&&n.node==a&&l!=c.dom&&(n.written=!0),c.dom.parentNode==a)for(;l&&l!=c.dom;)l=rm$1(l);else a.insertBefore(c.dom,l);s=c.dom}for(l=s?s.nextSibling:a.firstChild,l&&n&&n.node==a&&(n.written=!0);l;)l=rm$1(l)}else if(this.flags&1)for(let a of this.children)a.flags&7&&(a.sync(e,n),a.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let a;if(e==this.dom)a=this.dom.childNodes[n];else{let s=maxOffset(e)==0?0:n==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;s==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?s=-1:s=1),e=l}s<0?a=e:a=e.nextSibling}if(a==this.dom.firstChild)return 0;for(;a&&!ContentView.get(a);)a=a.nextSibling;if(!a)return this.length;for(let s=0,l=0;;s++){let c=this.children[s];if(c.dom==a)return l;l+=c.length+c.breakAfter}}domBoundsAround(e,n,a=0){let s=-1,l=-1,c=-1,d=-1;for(let u=0,f=a,p=a;u<this.children.length;u++){let _=this.children[u],b=f+_.length;if(f<e&&b>n)return _.domBoundsAround(e,n,f);if(b>=e&&s==-1&&(s=u,l=f),f>n&&_.dom.parentNode==this.dom){c=u,d=p;break}p=b,f=b+_.breakAfter}return{from:l,to:d<0?a+this.length:d,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:c<this.children.length&&c>=0?this.children[c].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,a=noChildren){this.markDirty();for(let s=e;s<n;s++){let l=this.children[s];l.parent==this&&a.indexOf(l)<0&&l.destroy()}a.length<250?this.children.splice(e,n-e,...a):this.children=[].concat(this.children.slice(0,e),a,this.children.slice(n));for(let s=0;s<a.length;s++)a[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ChildCursor(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,a,s,l,c){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class ChildCursor{constructor(e,n,a){this.children=e,this.pos=n,this.i=a,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let a=this.children[--this.i];this.pos-=a.length+a.breakAfter}}}function replaceRange(o,e,n,a,s,l,c,d,u){let{children:f}=o,p=f.length?f[e]:null,_=l.length?l[l.length-1]:null,b=_?_.breakAfter:c;if(!(e==a&&p&&!c&&!b&&l.length<2&&p.merge(n,s,l.length?_:null,n==0,d,u))){if(a<f.length){let v=f[a];v&&(s<v.length||v.breakAfter&&_?.breakAfter)?(e==a&&(v=v.split(s),s=0),!b&&_&&v.merge(0,s,_,!0,0,u)?l[l.length-1]=v:((s||v.children.length&&!v.children[0].length)&&v.merge(0,s,null,!1,0,u),l.push(v))):v?.breakAfter&&(_?_.breakAfter=1:c=1),a++}for(p&&(p.breakAfter=c,n>0&&(!c&&l.length&&p.merge(n,p.length,l[0],!1,d,0)?p.breakAfter=l.shift().breakAfter:(n<p.length||p.children.length&&p.children[p.children.length-1].length==0)&&p.merge(n,p.length,null,!1,d,0),e++));e<a&&l.length;)if(f[a-1].become(l[l.length-1]))a--,l.pop(),u=l.length?0:d;else if(f[e].become(l[0]))e++,l.shift(),d=l.length?0:u;else break;!l.length&&e&&a<f.length&&!f[e-1].breakAfter&&f[a].merge(0,0,f[e-1],!1,d,u)&&e--,(e<a||l.length)&&o.replaceChildren(e,a,l)}}function mergeChildrenInto(o,e,n,a,s,l){let c=o.childCursor(),{i:d,off:u}=c.findPos(n,1),{i:f,off:p}=c.findPos(e,-1),_=e-n;for(let b of a)_+=b.length;o.length+=_,replaceRange(o,f,p,d,u,a,0,s,l)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,a){return this.flags&8||a&&(!(a instanceof TextView)||this.length-(n-e)+a.length>MaxJoinLen||a.flags&8)?!1:(this.text=this.text.slice(0,e)+(a?a.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new TextView(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new DOMPos(this.dom,e)}domBoundsAround(e,n,a){return{from:a,to:a+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return textCoords(this.dom,e,n)}}class MarkView extends ContentView{constructor(e,n=[],a=0){super(),this.mark=e,this.children=n,this.length=a;for(let s of n)s.setParent(this)}setAttrs(e){if(clearAttributes(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,a,s,l,c){return a&&(!(a instanceof MarkView&&a.mark.eq(this.mark))||e&&l<=0||n<this.length&&c<=0)?!1:(mergeChildrenInto(this,e,n,a?a.children.slice():[],l-1,c-1),this.markDirty(),!0)}split(e){let n=[],a=0,s=-1,l=0;for(let d of this.children){let u=a+d.length;u>e&&n.push(a<e?d.split(e-a):d),s<0&&a>=e&&(s=l),a=u,l++}let c=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new MarkView(this.mark,n,c)}domAtPos(e){return inlineDOMAtPos(this,e)}coordsAt(e,n){return coordsInChildren(this,e,n)}}function textCoords(o,e,n){let a=o.nodeValue.length;e>a&&(e=a);let s=e,l=e,c=0;e==0&&n<0||e==a&&n>=0?browser.chrome||browser.gecko||(e?(s--,c=1):l<a&&(l++,c=-1)):n<0?s--:l<a&&l++;let d=textRange(o,s,l).getClientRects();if(!d.length)return null;let u=d[(c?c<0:n>=0)?0:d.length-1];return browser.safari&&!c&&u.width==0&&(u=Array.prototype.find.call(d,f=>f.width)||u),c?flattenRect(u,c<0):u||null}class WidgetView extends ContentView{static create(e,n,a){return new WidgetView(e,n,a)}constructor(e,n,a){super(),this.widget=e,this.length=n,this.side=a,this.prevWidget=null}split(e){let n=WidgetView.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,a,s,l,c){return a&&(!(a instanceof WidgetView)||!this.widget.compare(a.widget)||e>0&&l<=0||n<this.length&&c<=0)?!1:(this.length=e+(a?a.length:0)+(this.length-n),!0)}become(e){return e instanceof WidgetView&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Text.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,a=n&&n.state.doc,s=this.posAtStart;return a?a.slice(s,s+this.length):Text.empty}domAtPos(e){return(this.length?e==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let a=this.widget.coordsAt(this.dom,e,n);if(a)return a;let s=this.dom.getClientRects(),l=null;if(!s.length)return null;let c=this.side?this.side<0:e>0;for(let d=c?s.length-1:0;l=s[d],!(e>0?d==0:d==s.length-1||l.top<l.bottom);d+=c?-1:1);return flattenRect(l,!c)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof WidgetBufferView&&e.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(o,e){let n=o.dom,{children:a}=o,s=0;for(let l=0;s<a.length;s++){let c=a[s],d=l+c.length;if(!(d==l&&c.getSide()<=0)){if(e>l&&e<d&&c.dom.parentNode==n)return c.domAtPos(e-l);if(e<=l)break;l=d}}for(let l=s;l>0;l--){let c=a[l-1];if(c.dom.parentNode==n)return c.domAtPos(c.length)}for(let l=s;l<a.length;l++){let c=a[l];if(c.dom.parentNode==n)return c.domAtPos(0)}return new DOMPos(n,0)}function joinInlineInto(o,e,n){let a,{children:s}=o;n>0&&e instanceof MarkView&&s.length&&(a=s[s.length-1])instanceof MarkView&&a.mark.eq(e.mark)?joinInlineInto(a,e.children[0],n-1):(s.push(e),e.setParent(o)),o.length+=e.length}function coordsInChildren(o,e,n){let a=null,s=-1,l=null,c=-1;function d(f,p){for(let _=0,b=0;_<f.children.length&&b<=p;_++){let v=f.children[_],k=b+v.length;k>=p&&(v.children.length?d(v,p-b):(!l||l.isHidden&&n>0)&&(k>p||b==k&&v.getSide()>0)?(l=v,c=p-b):(b<p||b==k&&v.getSide()<0&&!v.isHidden)&&(a=v,s=p-b)),b=k}}d(o,e);let u=(n<0?a:l)||a||l;return u?u.coordsAt(Math.max(0,u==a?s:c),n):fallbackRect(o)}function fallbackRect(o){let e=o.dom.lastChild;if(!e)return o.dom.getBoundingClientRect();let n=clientRectsFor(e);return n[n.length-1]||null}function combineAttrs(o,e){for(let n in o)n=="class"&&e.class?e.class+=" "+o.class:n=="style"&&e.style?e.style+=";"+o.style:e[n]=o[n];return e}const noAttrs=Object.create(null);function attrsEq(o,e,n){if(o==e)return!0;o||(o=noAttrs),e||(e=noAttrs);let a=Object.keys(o),s=Object.keys(e);if(a.length-(n&&a.indexOf(n)>-1?1:0)!=s.length-(n&&s.indexOf(n)>-1?1:0))return!1;for(let l of a)if(l!=n&&(s.indexOf(l)==-1||o[l]!==e[l]))return!1;return!0}function updateAttrs(o,e,n){let a=!1;if(e)for(let s in e)n&&s in n||(a=!0,s=="style"?o.style.cssText="":o.removeAttribute(s));if(n)for(let s in n)e&&e[s]==n[s]||(a=!0,s=="style"?o.style.cssText=n[s]:o.setAttribute(s,n[s]));return a}function getAttrs(o){let e=Object.create(null);for(let n=0;n<o.attributes.length;n++){let a=o.attributes[n];e[a.name]=a.value}return e}class WidgetType{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,a){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var BlockType=function(o){return o[o.Text=0]="Text",o[o.WidgetBefore=1]="WidgetBefore",o[o.WidgetAfter=2]="WidgetAfter",o[o.WidgetRange=3]="WidgetRange",o}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,n,a,s){super(),this.startSide=e,this.endSide=n,this.widget=a,this.spec=s}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),a=!!e.block;return n+=a&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new PointDecoration(e,n,n,a,e.widget||null,!1)}static replace(e){let n=!!e.block,a,s;if(e.isBlockGap)a=-5e8,s=4e8;else{let{start:l,end:c}=getInclusive(e,n);a=(l?n?-3e8:-1:5e8)-1,s=(c?n?2e8:1:-6e8)+1}return new PointDecoration(e,a,s,n,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,n=!1){return RangeSet.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:n,end:a}=getInclusive(e);super(n?-1:5e8,a?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,a;return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((a=e.attrs)===null||a===void 0?void 0:a.class))&&attrsEq(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,n,a,s,l,c){super(n,a,l,e),this.block=s,this.isReplace=c,this.mapMode=s?n<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}PointDecoration.prototype.point=!0;function getInclusive(o,e=!1){let{inclusiveStart:n,inclusiveEnd:a}=o;return n==null&&(n=o.inclusive),a==null&&(a=o.inclusive),{start:n??e,end:a??e}}function widgetsEq(o,e){return o==e||!!(o&&e&&o.compare(e))}function addRange(o,e,n,a=0){let s=n.length-1;s>=0&&n[s]+a>=o?n[s]=Math.max(n[s],e):n.push(o,e)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,a,s,l,c){if(a){if(!(a instanceof LineView))return!1;this.dom||a.transferDOM(this)}return s&&this.setDeco(a?a.attrs:null),mergeChildrenInto(this,e,n,a?a.children.slice():[],l,c),!0}split(e){let n=new LineView;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:a,off:s}=this.childPos(e);s&&(n.append(this.children[a].split(s),0),this.children[a].merge(s,this.children[a].length,null,!1,0,0),a++);for(let l=a;l<this.children.length;l++)n.append(this.children[l],0);for(;a>0&&this.children[a-1].length==0;)this.children[--a].destroy();return this.children.length=a,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){attrsEq(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){joinInlineInto(this,e,n)}addLineDeco(e){let n=e.spec.attributes,a=e.spec.class;n&&(this.attrs=combineAttrs(n,this.attrs||{})),a&&(this.attrs=combineAttrs({class:a},this.attrs||{}))}domAtPos(e){return inlineDOMAtPos(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var a;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let s=this.dom.lastChild;for(;s&&ContentView.get(s)instanceof MarkView;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((a=ContentView.get(s))===null||a===void 0?void 0:a.isEditable)==!1&&(!browser.ios||!this.children.some(l=>l instanceof TextView))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let a of this.children){if(!(a instanceof TextView)||/[^ -~]/.test(a.text))return null;let s=clientRectsFor(a.dom);if(s.length!=1)return null;e+=s[0].width,n=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let a=coordsInChildren(this,e,n);if(!this.children.length&&a&&this.parent){let{heightOracle:s}=this.parent.view.viewState,l=a.bottom-a.top;if(Math.abs(l-s.lineHeight)<2&&s.textHeight<l){let c=(l-s.textHeight)/2;return{top:a.top+c,bottom:a.bottom-c,left:a.left,right:a.left}}}return a}become(e){return e instanceof LineView&&this.children.length==0&&e.children.length==0&&attrsEq(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let a=0,s=0;a<e.children.length;a++){let l=e.children[a],c=s+l.length;if(c>=n){if(l instanceof LineView)return l;if(c>n)break}s=c+l.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(e,n,a){super(),this.widget=e,this.length=n,this.deco=a,this.breakAfter=0,this.prevWidget=null}merge(e,n,a,s,l,c){return a&&(!(a instanceof BlockWidgetView)||!this.widget.compare(a.widget)||e>0&&l<=0||n<this.length&&c<=0)?!1:(this.length=e+(a?a.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let a=new BlockWidgetView(this.widget,n,this.deco);return a.breakAfter=this.breakAfter,a}get children(){return noChildren}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(e){return e instanceof BlockWidgetView&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let a=this.widget.coordsAt(this.dom,e,n);return a||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:a}=this.deco;return n==a?!1:e<0?n<0:a>0}}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(e,n,a,s){this.doc=e,this.pos=n,this.end=a,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof BlockWidgetView&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(e,n,a){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:c,done:d}=this.cursor.next(this.skip);if(this.skip=0,d)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-a)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+s)),n),a),this.atCursorPos=!0,this.textOff+=s,e-=s,a=0}}span(e,n,a,s){this.buildText(n-e,a,s),this.pos=n,this.openStart<0&&(this.openStart=s)}point(e,n,a,s,l,c){if(this.disallowBlockEffectsFor[c]&&a instanceof PointDecoration){if(a.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let d=n-e;if(a instanceof PointDecoration)if(a.block)a.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(a.widget||NullWidget.block,d,a));else{let u=WidgetView.create(a.widget||NullWidget.inline,d,d?0:a.startSide),f=this.atCursorPos&&!u.isEditable&&l<=s.length&&(e<n||a.startSide>0),p=!u.isEditable&&(e<n||l>s.length||a.startSide<=0),_=this.getLine();this.pendingBuffer==2&&!f&&!u.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),f&&(_.append(wrapMarks(new WidgetBufferView(1),s),l),l=s.length+Math.max(0,l-s.length)),_.append(wrapMarks(u,s),l),this.atCursorPos=p,this.pendingBuffer=p?e<n||l>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(a);d&&(this.textOff+d<=this.text.length?this.textOff+=d:(this.skip+=d-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=l)}static build(e,n,a,s,l){let c=new ContentBuilder(e,n,a,l);return c.openEnd=RangeSet.spans(s,n,a,c),c.openStart<0&&(c.openStart=c.openEnd),c.finish(c.openEnd),c}}function wrapMarks(o,e){for(let n of e)o=new MarkView(n,[o],o.length);return o}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span");NullWidget.block=new NullWidget("div");var Direction=function(o){return o[o.LTR=0]="LTR",o[o.RTL=1]="RTL",o}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(o){let e=[];for(let n=0;n<o.length;n++)e.push(1<<+o[n]);return e}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let o of["()","[]","{}"]){let e=o.charCodeAt(0),n=o.charCodeAt(1);Brackets[e]=n,Brackets[n]=-e}function charType(o){return o<=247?LowTypes[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?ArabicTypes[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8204?256:64336<=o&&o<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(e,n,a){this.from=e,this.to=n,this.level=a}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,a,s){let l=-1;for(let c=0;c<e.length;c++){let d=e[c];if(d.from<=n&&d.to>=n){if(d.level==a)return c;(l<0||(s!=0?s<0?d.from<n:d.to>n:e[l].level>d.level))&&(l=c)}}if(l<0)throw new RangeError("Index out of range");return l}}function isolatesEq(o,e){if(o.length!=e.length)return!1;for(let n=0;n<o.length;n++){let a=o[n],s=e[n];if(a.from!=s.from||a.to!=s.to||a.direction!=s.direction||!isolatesEq(a.inner,s.inner))return!1}return!0}const types=[];function computeCharTypes(o,e,n,a,s){for(let l=0;l<=a.length;l++){let c=l?a[l-1].to:e,d=l<a.length?a[l].from:n,u=l?256:s;for(let f=c,p=u,_=u;f<d;f++){let b=charType(o.charCodeAt(f));b==512?b=p:b==8&&_==4&&(b=16),types[f]=b==4?2:b,b&7&&(_=b),p=b}for(let f=c,p=u,_=u;f<d;f++){let b=types[f];if(b==128)f<d-1&&p==types[f+1]&&p&24?b=types[f]=p:types[f]=256;else if(b==64){let v=f+1;for(;v<d&&types[v]==64;)v++;let k=f&&p==8||v<n&&types[v]==8?_==1?1:8:256;for(let x=f;x<v;x++)types[x]=k;f=v-1}else b==8&&_==1&&(types[f]=1);p=b,b&7&&(_=b)}}}function processBracketPairs(o,e,n,a,s){let l=s==1?2:1;for(let c=0,d=0,u=0;c<=a.length;c++){let f=c?a[c-1].to:e,p=c<a.length?a[c].from:n;for(let _=f,b,v,k;_<p;_++)if(v=Brackets[b=o.charCodeAt(_)])if(v<0){for(let x=d-3;x>=0;x-=3)if(BracketStack[x+1]==-v){let M=BracketStack[x+2],E=M&2?s:M&4?M&1?l:s:0;E&&(types[_]=types[BracketStack[x]]=E),d=x;break}}else{if(BracketStack.length==189)break;BracketStack[d++]=_,BracketStack[d++]=b,BracketStack[d++]=u}else if((k=types[_])==2||k==1){let x=k==s;u=x?0:1;for(let M=d-3;M>=0;M-=3){let E=BracketStack[M+2];if(E&2)break;if(x)BracketStack[M+2]|=2;else{if(E&4)break;BracketStack[M+2]|=4}}}}}function processNeutrals(o,e,n,a){for(let s=0,l=a;s<=n.length;s++){let c=s?n[s-1].to:o,d=s<n.length?n[s].from:e;for(let u=c;u<d;){let f=types[u];if(f==256){let p=u+1;for(;;)if(p==d){if(s==n.length)break;p=n[s++].to,d=s<n.length?n[s].from:e}else if(types[p]==256)p++;else break;let _=l==1,b=(p<e?types[p]:a)==1,v=_==b?_?1:2:a;for(let k=p,x=s,M=x?n[x-1].to:o;k>u;)k==M&&(k=n[--x].from,M=x?n[x-1].to:o),types[--k]=v;u=p}else l=f,u++}}}function emitSpans(o,e,n,a,s,l,c){let d=a%2?2:1;if(a%2==s%2)for(let u=e,f=0;u<n;){let p=!0,_=!1;if(f==l.length||u<l[f].from){let x=types[u];x!=d&&(p=!1,_=x==16)}let b=!p&&d==1?[]:null,v=p?a:a+1,k=u;e:for(;;)if(f<l.length&&k==l[f].from){if(_)break e;let x=l[f];if(!p)for(let M=x.to,E=f+1;;){if(M==n)break e;if(E<l.length&&l[E].from==M)M=l[E++].to;else{if(types[M]==d)break e;break}}if(f++,b)b.push(x);else{x.from>u&&c.push(new BidiSpan(u,x.from,v));let M=x.direction==LTR!=!(v%2);computeSectionOrder(o,M?a+1:a,s,x.inner,x.from,x.to,c),u=x.to}k=x.to}else{if(k==n||(p?types[k]!=d:types[k]==d))break;k++}b?emitSpans(o,u,k,a+1,s,b,c):u<k&&c.push(new BidiSpan(u,k,v)),u=k}else for(let u=n,f=l.length;u>e;){let p=!0,_=!1;if(!f||u>l[f-1].to){let x=types[u-1];x!=d&&(p=!1,_=x==16)}let b=!p&&d==1?[]:null,v=p?a:a+1,k=u;e:for(;;)if(f&&k==l[f-1].to){if(_)break e;let x=l[--f];if(!p)for(let M=x.from,E=f;;){if(M==e)break e;if(E&&l[E-1].to==M)M=l[--E].from;else{if(types[M-1]==d)break e;break}}if(b)b.push(x);else{x.to<u&&c.push(new BidiSpan(x.to,u,v));let M=x.direction==LTR!=!(v%2);computeSectionOrder(o,M?a+1:a,s,x.inner,x.from,x.to,c),u=x.from}k=x.from}else{if(k==e||(p?types[k-1]!=d:types[k-1]==d))break;k--}b?emitSpans(o,k,u,a+1,s,b,c):k<u&&c.push(new BidiSpan(k,u,v)),u=k}}function computeSectionOrder(o,e,n,a,s,l,c){let d=e%2?2:1;computeCharTypes(o,s,l,a,d),processBracketPairs(o,s,l,a,d),processNeutrals(s,l,a,d),emitSpans(o,s,l,e,n,a,c)}function computeOrder(o,e,n){if(!o)return[new BidiSpan(0,0,e==RTL?1:0)];if(e==LTR&&!n.length&&!BidiRE.test(o))return trivialOrder(o.length);if(n.length)for(;o.length>types.length;)types[types.length]=256;let a=[],s=e==LTR?0:1;return computeSectionOrder(o,s,s,n,0,o.length,a),a}function trivialOrder(o){return[new BidiSpan(0,o,0)]}let movedOver="";function moveVisually(o,e,n,a,s){var l;let c=a.head-o.from,d=BidiSpan.find(e,c,(l=a.bidiLevel)!==null&&l!==void 0?l:-1,a.assoc),u=e[d],f=u.side(s,n);if(c==f){let b=d+=s?1:-1;if(b<0||b>=e.length)return null;u=e[d=b],c=u.side(!s,n),f=u.side(s,n)}let p=findClusterBreak(o.text,c,u.forward(s,n));(p<u.from||p>u.to)&&(p=f),movedOver=o.text.slice(Math.min(c,p),Math.max(c,p));let _=d==(s?e.length-1:0)?null:e[d+(s?1:-1)];return _&&p==f&&_.level+(s?0:1)<u.level?EditorSelection.cursor(_.side(!s,n)+o.from,_.forward(s,n)?1:-1,_.level):EditorSelection.cursor(p+o.from,u.forward(s,n)?-1:1,u.level)}function autoDirection(o,e,n){for(let a=e;a<n;a++){let s=charType(o.charCodeAt(a));if(s==1)return LTR;if(s==2||s==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:o=>o.some(e=>e)}),nativeSelectionHidden=Facet.define({combine:o=>o.some(e=>e)}),scrollHandler=Facet.define();class ScrollTarget{constructor(e,n="nearest",a="nearest",s=5,l=5,c=!1){this.range=e,this.y=n,this.x=a,this.yMargin=s,this.xMargin=l,this.isSnapshot=c}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ScrollTarget(EditorSelection.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView=StateEffect.define({map:(o,e)=>o.map(e)}),setEditContextFormatting=StateEffect.define();function logException(o,e,n){let a=o.facet(exceptionSink);a.length?a[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const editable=Facet.define({combine:o=>o.length?o[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(e,n,a,s,l){this.id=e,this.create=n,this.domEventHandlers=a,this.domEventObservers=s,this.extension=l(this)}static define(e,n){const{eventHandlers:a,eventObservers:s,provide:l,decorations:c}=n||{};return new ViewPlugin(nextPluginID++,e,a,s,d=>{let u=[viewPlugin.of(d)];return c&&u.push(decorations.of(f=>{let p=f.plugin(d);return p?c(p):Decoration.none})),l&&u.push(l(d)),u})}static fromClass(e,n){return ViewPlugin.define(a=>new e(a),n)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(a){if(logException(n.state,a,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){logException(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(a){logException(e.state,a,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(o,e){let n=o.state.facet(bidiIsolatedRanges);if(!n.length)return n;let a=n.map(l=>l instanceof Function?l(o):l),s=[];return RangeSet.spans(a,e.from,e.to,{point(){},span(l,c,d,u){let f=l-e.from,p=c-e.from,_=s;for(let b=d.length-1;b>=0;b--,u--){let v=d[b].spec.bidiIsolate,k;if(v==null&&(v=autoDirection(e.text,f,p)),u>0&&_.length&&(k=_[_.length-1]).to==f&&k.direction==v)k.to=p,_=k.inner;else{let x={from:f,to:p,direction:v,inner:[]};_.push(x),_=x.inner}}}}),s}const scrollMargins=Facet.define();function getScrollMargins(o){let e=0,n=0,a=0,s=0;for(let l of o.state.facet(scrollMargins)){let c=l(o);c&&(c.left!=null&&(e=Math.max(e,c.left)),c.right!=null&&(n=Math.max(n,c.right)),c.top!=null&&(a=Math.max(a,c.top)),c.bottom!=null&&(s=Math.max(s,c.bottom)))}return{left:e,right:n,top:a,bottom:s}}const styleModule=Facet.define();class ChangedRange{constructor(e,n,a,s){this.fromA=e,this.toA=n,this.fromB=a,this.toB=s}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,a=this;for(;n>0;n--){let s=e[n-1];if(!(s.fromA>a.toA)){if(s.toA<a.fromA)break;a=a.join(s),e.splice(n-1,1)}}return e.splice(n,0,a),e}static extendWithRanges(e,n){if(n.length==0)return e;let a=[];for(let s=0,l=0,c=0,d=0;;s++){let u=s==e.length?null:e[s],f=c-d,p=u?u.fromB:1e9;for(;l<n.length&&n[l]<p;){let _=n[l],b=n[l+1],v=Math.max(d,_),k=Math.min(p,b);if(v<=k&&new ChangedRange(v+f,k+f,v,k).addToSet(a),b>p)break;l+=2}if(!u)return a;new ChangedRange(u.fromA,u.toA,u.fromB,u.toB).addToSet(a),c=u.toA,d=u.toB}}}class ViewUpdate{constructor(e,n,a){this.view=e,this.state=n,this.transactions=a,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let l of a)this.changes=this.changes.compose(l.changes);let s=[];this.changes.iterChangedRanges((l,c,d,u)=>s.push(new ChangedRange(l,c,d,u))),this.changedRanges=s}static create(e,n,a){return new ViewUpdate(e,n,a)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let a=e.changedRanges;this.minWidth>0&&a.length&&(a.every(({fromA:f,toA:p})=>p<this.minWidthFrom||f>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?s=this.domChanged.newSel.head:!touchesComposition(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let l=s>-1?findCompositionRange(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:f,to:p}=this.hasComposition;a=new ChangedRange(f,p,e.changes.mapPos(f,-1),e.changes.mapPos(p,1)).addToSet(a.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(browser.ie||browser.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let c=this.decorations,d=this.updateDeco(),u=findChangedDeco(c,d,e.changes);return a=ChangedRange.extendWithRanges(a,u),!(this.flags&7)&&a.length==0?!1:(this.updateInner(a,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,a){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,a);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let c=browser.chrome||browser.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,c),this.flags&=-8,c&&(c.written||s.selectionRange.focusNode!=c.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(c=>c.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let c of this.children)c instanceof BlockWidgetView&&c.widget instanceof BlockGapWidget&&l.push(c.dom);s.updateGaps(l)}updateChildren(e,n,a){let s=a?a.range.addToSet(e.slice()):e,l=this.childCursor(n);for(let c=s.length-1;;c--){let d=c>=0?s[c]:null;if(!d)break;let{fromA:u,toA:f,fromB:p,toB:_}=d,b,v,k,x;if(a&&a.range.fromB<_&&a.range.toB>p){let B=ContentBuilder.build(this.view.state.doc,p,a.range.fromB,this.decorations,this.dynamicDecorationMap),F=ContentBuilder.build(this.view.state.doc,a.range.toB,_,this.decorations,this.dynamicDecorationMap);v=B.breakAtStart,k=B.openStart,x=F.openEnd;let j=this.compositionView(a);F.breakAtStart?j.breakAfter=1:F.content.length&&j.merge(j.length,j.length,F.content[0],!1,F.openStart,0)&&(j.breakAfter=F.content[0].breakAfter,F.content.shift()),B.content.length&&j.merge(0,0,B.content[B.content.length-1],!0,0,B.openEnd)&&B.content.pop(),b=B.content.concat(j).concat(F.content)}else({content:b,breakAtStart:v,openStart:k,openEnd:x}=ContentBuilder.build(this.view.state.doc,p,_,this.decorations,this.dynamicDecorationMap));let{i:M,off:E}=l.findPos(f,1),{i:L,off:V}=l.findPos(u,-1);replaceRange(this,L,V,M,E,b,v,k,x)}a&&this.fixCompositionDOM(a)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let a of n.effects)a.is(setEditContextFormatting)&&(this.editContextFormatting=a.value)}compositionView(e){let n=new TextView(e.text.nodeValue);n.flags|=8;for(let{deco:s}of e.marks)n=new MarkView(s,[n],n.length);let a=new LineView;return a.append(n,0),a}fixCompositionDOM(e){let n=(l,c)=>{c.flags|=8|(c.children.some(u=>u.flags&7)?1:0),this.markedForComposition.add(c);let d=ContentView.get(l);d&&d!=c&&(d.dom=null),c.setDOM(l)},a=this.childPos(e.range.fromB,1),s=this.children[a.i];n(e.line,s);for(let l=e.marks.length-1;l>=-1;l--)a=s.childPos(a.off,1),s=s.children[a.i],n(l>=0?e.marks[l].node:e.text,s)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let a=this.view.root.activeElement,s=a==this.dom,l=!s&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(a&&this.dom.contains(a));if(!(s||n||l))return;let c=this.forceSelection;this.forceSelection=!1;let d=this.view.state.selection.main,u=this.moveToLine(this.domAtPos(d.anchor)),f=d.empty?u:this.moveToLine(this.domAtPos(d.head));if(browser.gecko&&d.empty&&!this.hasComposition&&betweenUneditable(u)){let _=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(_,u.node.childNodes[u.offset]||null)),u=f=new DOMPos(_,0),c=!0}let p=this.view.observer.selectionRange;(c||!p.focusNode||(!isEquivalentPosition(u.node,u.offset,p.anchorNode,p.anchorOffset)||!isEquivalentPosition(f.node,f.offset,p.focusNode,p.focusOffset))&&!this.suppressWidgetCursorChange(p,d))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(p.focusNode)&&inUneditable(p.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let _=getSelection$1(this.view.root);if(_)if(d.empty){if(browser.gecko){let b=nextToUneditable(u.node,u.offset);if(b&&b!=3){let v=(b==1?textNodeBefore:textNodeAfter)(u.node,u.offset);v&&(u=new DOMPos(v.node,v.offset))}}_.collapse(u.node,u.offset),d.bidiLevel!=null&&_.caretBidiLevel!==void 0&&(_.caretBidiLevel=d.bidiLevel)}else if(_.extend){_.collapse(u.node,u.offset);try{_.extend(f.node,f.offset)}catch{}}else{let b=document.createRange();d.anchor>d.head&&([u,f]=[f,u]),b.setEnd(f.node,f.offset),b.setStart(u.node,u.offset),_.removeAllRanges(),_.addRange(b)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),a&&a.focus())}),this.view.observer.setSelectionRange(u,f)),this.impreciseAnchor=u.precise?null:new DOMPos(p.anchorNode,p.anchorOffset),this.impreciseHead=f.precise?null:new DOMPos(p.focusNode,p.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,a=getSelection$1(e.root),{anchorNode:s,anchorOffset:l}=e.observer.selectionRange;if(!a||!n.empty||!n.assoc||!a.modify)return;let c=LineView.find(this,n.head);if(!c)return;let d=c.posAtStart;if(n.head==d||n.head==d+c.length)return;let u=this.coordsAt(n.head,-1),f=this.coordsAt(n.head,1);if(!u||!f||u.bottom>f.top)return;let p=this.domAtPos(n.head+n.assoc);a.collapse(p.node,p.offset),a.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let _=e.observer.selectionRange;e.docView.posFromDOM(_.anchorNode,_.anchorOffset)!=n.from&&a.collapse(s,l)}moveToLine(e){let n=this.dom,a;if(e.node!=n)return e;for(let s=e.offset;!a&&s<n.childNodes.length;s++){let l=ContentView.get(n.childNodes[s]);l instanceof LineView&&(a=l.domAtPos(0))}for(let s=e.offset-1;!a&&s>=0;s--){let l=ContentView.get(n.childNodes[s]);l instanceof LineView&&(a=l.domAtPos(l.length))}return a?new DOMPos(a.node,a.offset,!0):e}nearest(e){for(let n=e;n;){let a=ContentView.get(n);if(a&&a.rootView==this)return a;n=n.parentNode}return null}posFromDOM(e,n){let a=this.nearest(e);if(!a)throw new RangeError("Trying to find position for a DOM position outside of the document");return a.localPosFromDOM(e,n)+a.posAtStart}domAtPos(e){let{i:n,off:a}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let s=this.children[n];if(a<s.length||s instanceof LineView)break;n++,a=0}return this.children[n].domAtPos(a)}coordsAt(e,n){let a=null,s=0;for(let l=this.length,c=this.children.length-1;c>=0;c--){let d=this.children[c],u=l-d.breakAfter,f=u-d.length;if(u<e)break;if(f<=e&&(f<e||d.covers(-1))&&(u>e||d.covers(1))&&(!a||d instanceof LineView&&!(a instanceof LineView&&n>=0)))a=d,s=f;else if(a&&f==e&&u==e&&d instanceof BlockWidgetView&&Math.abs(n)<2){if(d.deco.startSide<0)break;c&&(a=null)}l=f}return a?a.coordsAt(e-s,n):null}coordsForChar(e){let{i:n,off:a}=this.childPos(e,1),s=this.children[n];if(!(s instanceof LineView))return null;for(;s.children.length;){let{i:d,off:u}=s.childPos(a,1);for(;;d++){if(d==s.children.length)return null;if((s=s.children[d]).length)break}a=u}if(!(s instanceof TextView))return null;let l=findClusterBreak(s.text,a);if(l==a)return null;let c=textRange(s.dom,a,l).getClientRects();for(let d=0;d<c.length;d++){let u=c[d];if(d==c.length-1||u.top<u.bottom&&u.left<u.right)return u}return null}measureVisibleLineHeights(e){let n=[],{from:a,to:s}=e,l=this.view.contentDOM.clientWidth,c=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,d=-1,u=this.view.textDirection==Direction.LTR;for(let f=0,p=0;p<this.children.length;p++){let _=this.children[p],b=f+_.length;if(b>s)break;if(f>=a){let v=_.dom.getBoundingClientRect();if(n.push(v.height),c){let k=_.dom.lastChild,x=k?clientRectsFor(k):[];if(x.length){let M=x[x.length-1],E=u?M.right-v.left:v.right-M.left;E>d&&(d=E,this.minWidth=l,this.minWidthFrom=f,this.minWidthTo=b)}}}f=b+_.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let l of this.children)if(l instanceof LineView){let c=l.measureTextSize();if(c)return c}let e=document.createElement("div"),n,a,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=clientRectsFor(e.firstChild)[0];n=e.getBoundingClientRect().height,a=l?l.width/27:7,s=l?l.height:n,e.remove()}),{lineHeight:n,charWidth:a,textHeight:s}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new ChildCursor(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let a=0,s=0;;s++){let l=s==n.viewports.length?null:n.viewports[s],c=l?l.from-1:this.length;if(c>a){let d=(n.lineBlockAt(c).bottom-n.lineBlockAt(a).top)/this.view.scaleY;e.push(Decoration.replace({widget:new BlockGapWidget(d),block:!0,inclusive:!0,isBlockGap:!0}).range(a,c))}if(!l)break;a=l.to+1}return Decoration.set(e)}updateDeco(){let e=1,n=this.view.state.facet(decorations).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),a=!1,s=this.view.state.facet(outerDecorations).map((l,c)=>{let d=typeof l=="function";return d&&(a=!0),d?l(this.view):l});for(s.length&&(this.dynamicDecorationMap[e++]=a,n.push(RangeSet.join(s))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let f=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=f.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let f of this.view.state.facet(scrollHandler))try{if(f(this.view,e.range,e))return!0}catch(p){logException(this.view.state,p,"scroll handler")}let{range:n}=e,a=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),s;if(!a)return;!n.empty&&(s=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(a={left:Math.min(a.left,s.left),top:Math.min(a.top,s.top),right:Math.max(a.right,s.right),bottom:Math.max(a.bottom,s.bottom)});let l=getScrollMargins(this.view),c={left:a.left-l.left,top:a.top-l.top,right:a.right+l.right,bottom:a.bottom+l.bottom},{offsetWidth:d,offsetHeight:u}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,c,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,d),-d),Math.max(Math.min(e.yMargin,u),-u),this.view.textDirection==Direction.LTR)}}function betweenUneditable(o){return o.node.nodeType==1&&o.node.firstChild&&(o.offset==0||o.node.childNodes[o.offset-1].contentEditable=="false")&&(o.offset==o.node.childNodes.length||o.node.childNodes[o.offset].contentEditable=="false")}function findCompositionNode(o,e){let n=o.observer.selectionRange;if(!n.focusNode)return null;let a=textNodeBefore(n.focusNode,n.focusOffset),s=textNodeAfter(n.focusNode,n.focusOffset),l=a||s;if(s&&a&&s.node!=a.node){let d=ContentView.get(s.node);if(!d||d instanceof TextView&&d.text!=s.node.nodeValue)l=s;else if(o.docView.lastCompositionAfterCursor){let u=ContentView.get(a.node);!u||u instanceof TextView&&u.text!=a.node.nodeValue||(l=s)}}if(o.docView.lastCompositionAfterCursor=l!=a,!l)return null;let c=e-l.offset;return{from:c,to:c+l.node.nodeValue.length,node:l.node}}function findCompositionRange(o,e,n){let a=findCompositionNode(o,n);if(!a)return null;let{node:s,from:l,to:c}=a,d=s.nodeValue;if(/[\n\r]/.test(d)||o.state.doc.sliceString(a.from,a.to)!=d)return null;let u=e.invertedDesc,f=new ChangedRange(u.mapPos(l),u.mapPos(c),l,c),p=[];for(let _=s.parentNode;;_=_.parentNode){let b=ContentView.get(_);if(b instanceof MarkView)p.push({node:_,deco:b.mark});else{if(b instanceof LineView||_.nodeName=="DIV"&&_.parentNode==o.contentDOM)return{range:f,text:s,marks:p,line:_};if(_!=o.contentDOM)p.push({node:_,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(_),tagName:_.tagName.toLowerCase()})});else return null}}}function nextToUneditable(o,e){return o.nodeType!=1?0:(e&&o.childNodes[e-1].contentEditable=="false"?1:0)|(e<o.childNodes.length&&o.childNodes[e].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(e,n){addRange(e,n,this.changes)}comparePoint(e,n){addRange(e,n,this.changes)}boundChange(e){addRange(e,e,this.changes)}};function findChangedDeco(o,e,n){let a=new DecorationComparator$1;return RangeSet.compare(o,e,n,a),a.changes}function inUneditable(o,e){for(let n=o;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function touchesComposition(o,e){let n=!1;return e&&o.iterChangedRanges((a,s)=>{a<e.to&&s>e.from&&(n=!0)}),n}function groupAt(o,e,n=1){let a=o.charCategorizer(e),s=o.doc.lineAt(e),l=e-s.from;if(s.length==0)return EditorSelection.cursor(e);l==0?n=1:l==s.length&&(n=-1);let c=l,d=l;n<0?c=findClusterBreak(s.text,l,!1):d=findClusterBreak(s.text,l);let u=a(s.text.slice(c,d));for(;c>0;){let f=findClusterBreak(s.text,c,!1);if(a(s.text.slice(f,c))!=u)break;c=f}for(;d<s.length;){let f=findClusterBreak(s.text,d);if(a(s.text.slice(d,f))!=u)break;d=f}return EditorSelection.range(c+s.from,d+s.from)}function getdx(o,e){return e.left>o?e.left-o:Math.max(0,o-e.right)}function getdy(o,e){return e.top>o?e.top-o:Math.max(0,o-e.bottom)}function yOverlap(o,e){return o.top<e.bottom-1&&o.bottom>e.top+1}function upTop(o,e){return e<o.top?{top:e,left:o.left,right:o.right,bottom:o.bottom}:o}function upBot(o,e){return e>o.bottom?{top:o.top,left:o.left,right:o.right,bottom:e}:o}function domPosAtCoords(o,e,n){let a,s,l,c,d=!1,u,f,p,_;for(let k=o.firstChild;k;k=k.nextSibling){let x=clientRectsFor(k);for(let M=0;M<x.length;M++){let E=x[M];s&&yOverlap(s,E)&&(E=upTop(upBot(E,s.bottom),s.top));let L=getdx(e,E),V=getdy(n,E);if(L==0&&V==0)return k.nodeType==3?domPosInText(k,e,n):domPosAtCoords(k,e,n);if(!a||c>V||c==V&&l>L){a=k,s=E,l=L,c=V;let B=V?n<E.top?-1:1:L?e<E.left?-1:1:0;d=!B||(B>0?M<x.length-1:M>0)}L==0?n>E.bottom&&(!p||p.bottom<E.bottom)?(u=k,p=E):n<E.top&&(!_||_.top>E.top)&&(f=k,_=E):p&&yOverlap(p,E)?p=upBot(p,E.bottom):_&&yOverlap(_,E)&&(_=upTop(_,E.top))}}if(p&&p.bottom>=n?(a=u,s=p):_&&_.top<=n&&(a=f,s=_),!a)return{node:o,offset:0};let b=Math.max(s.left,Math.min(s.right,e));if(a.nodeType==3)return domPosInText(a,b,n);if(d&&a.contentEditable!="false")return domPosAtCoords(a,b,n);let v=Array.prototype.indexOf.call(o.childNodes,a)+(e>=(s.left+s.right)/2?1:0);return{node:o,offset:v}}function domPosInText(o,e,n){let a=o.nodeValue.length,s=-1,l=1e9,c=0;for(let d=0;d<a;d++){let u=textRange(o,d,d+1).getClientRects();for(let f=0;f<u.length;f++){let p=u[f];if(p.top==p.bottom)continue;c||(c=e-p.left);let _=(p.top>n?p.top-n:n-p.bottom)-1;if(p.left-1<=e&&p.right+1>=e&&_<l){let b=e>=(p.left+p.right)/2,v=b;if((browser.chrome||browser.gecko)&&textRange(o,d).getBoundingClientRect().left==p.right&&(v=!b),_<=0)return{node:o,offset:d+(v?1:0)};s=d+(v?1:0),l=_}}}return{node:o,offset:s>-1?s:c>0?o.nodeValue.length:0}}function posAtCoords(o,e,n,a=-1){var s,l;let c=o.contentDOM.getBoundingClientRect(),d=c.top+o.viewState.paddingTop,u,{docHeight:f}=o.viewState,{x:p,y:_}=e,b=_-d;if(b<0)return 0;if(b>f)return o.state.doc.length;for(let B=o.viewState.heightOracle.textHeight/2,F=!1;u=o.elementAtHeight(b),u.type!=BlockType.Text;)for(;b=a>0?u.bottom+B:u.top-B,!(b>=0&&b<=f);){if(F)return n?null:0;F=!0,a=-a}_=d+b;let v=u.from;if(v<o.viewport.from)return o.viewport.from==0?0:n?null:posAtCoordsImprecise(o,c,u,p,_);if(v>o.viewport.to)return o.viewport.to==o.state.doc.length?o.state.doc.length:n?null:posAtCoordsImprecise(o,c,u,p,_);let k=o.dom.ownerDocument,x=o.root.elementFromPoint?o.root:k,M=x.elementFromPoint(p,_);M&&!o.contentDOM.contains(M)&&(M=null),M||(p=Math.max(c.left+1,Math.min(c.right-1,p)),M=x.elementFromPoint(p,_),M&&!o.contentDOM.contains(M)&&(M=null));let E,L=-1;if(M&&((s=o.docView.nearest(M))===null||s===void 0?void 0:s.isEditable)!=!1){if(k.caretPositionFromPoint){let B=k.caretPositionFromPoint(p,_);B&&({offsetNode:E,offset:L}=B)}else if(k.caretRangeFromPoint){let B=k.caretRangeFromPoint(p,_);B&&({startContainer:E,startOffset:L}=B,(!o.contentDOM.contains(E)||browser.safari&&isSuspiciousSafariCaretResult(E,L,p)||browser.chrome&&isSuspiciousChromeCaretResult(E,L,p))&&(E=void 0))}E&&(L=Math.min(maxOffset(E),L))}if(!E||!o.docView.dom.contains(E)){let B=LineView.find(o.docView,v);if(!B)return b>u.top+u.height/2?u.to:u.from;({node:E,offset:L}=domPosAtCoords(B.dom,p,_))}let V=o.docView.nearest(E);if(!V)return null;if(V.isWidget&&((l=V.dom)===null||l===void 0?void 0:l.nodeType)==1){let B=V.dom.getBoundingClientRect();return e.y<B.top||e.y<=B.bottom&&e.x<=(B.left+B.right)/2?V.posAtStart:V.posAtEnd}else return V.localPosFromDOM(E,L)+V.posAtStart}function posAtCoordsImprecise(o,e,n,a,s){let l=Math.round((a-e.left)*o.defaultCharacterWidth);if(o.lineWrapping&&n.height>o.defaultLineHeight*1.5){let d=o.viewState.heightOracle.textHeight,u=Math.floor((s-n.top-(o.defaultLineHeight-d)*.5)/d);l+=u*o.viewState.heightOracle.lineLength}let c=o.state.sliceDoc(n.from,n.to);return n.from+findColumn(c,l,o.state.tabSize)}function isSuspiciousSafariCaretResult(o,e,n){let a;if(o.nodeType!=3||e!=(a=o.nodeValue.length))return!1;for(let s=o.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return textRange(o,a-1,a).getBoundingClientRect().left>n}function isSuspiciousChromeCaretResult(o,e,n){if(e!=0)return!1;for(let s=o;;){let l=s.parentNode;if(!l||l.nodeType!=1||l.firstChild!=s)return!1;if(l.classList.contains("cm-line"))break;s=l}let a=o.nodeType==1?o.getBoundingClientRect():textRange(o,0,Math.max(o.nodeValue.length,1)).getBoundingClientRect();return n-a.left>5}function blockAt(o,e){let n=o.lineBlockAt(e);if(Array.isArray(n.type)){for(let a of n.type)if(a.to>e||a.to==e&&(a.to==n.to||a.type==BlockType.Text))return a}return n}function moveToLineBoundary(o,e,n,a){let s=blockAt(o,e.head),l=!a||s.type!=BlockType.Text||!(o.lineWrapping||s.widgetLineBreaks)?null:o.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(l){let c=o.dom.getBoundingClientRect(),d=o.textDirectionAt(s.from),u=o.posAtCoords({x:n==(d==Direction.LTR)?c.right-1:c.left+1,y:(l.top+l.bottom)/2});if(u!=null)return EditorSelection.cursor(u,n?-1:1)}return EditorSelection.cursor(n?s.to:s.from,n?-1:1)}function moveByChar(o,e,n,a){let s=o.state.doc.lineAt(e.head),l=o.bidiSpans(s),c=o.textDirectionAt(s.from);for(let d=e,u=null;;){let f=moveVisually(s,l,c,d,n),p=movedOver;if(!f){if(s.number==(n?o.state.doc.lines:1))return d;p=`
`,s=o.state.doc.line(s.number+(n?1:-1)),l=o.bidiSpans(s),f=o.visualLineSide(s,!n)}if(u){if(!u(p))return d}else{if(!a)return f;u=a(p)}d=f}}function byGroup(o,e,n){let a=o.state.charCategorizer(e),s=a(n);return l=>{let c=a(l);return s==CharCategory.Space&&(s=c),s==c}}function moveVertically(o,e,n,a){let s=e.head,l=n?1:-1;if(s==(n?o.state.doc.length:0))return EditorSelection.cursor(s,e.assoc);let c=e.goalColumn,d,u=o.contentDOM.getBoundingClientRect(),f=o.coordsAtPos(s,e.assoc||-1),p=o.documentTop;if(f)c==null&&(c=f.left-u.left),d=l<0?f.top:f.bottom;else{let v=o.viewState.lineBlockAt(s);c==null&&(c=Math.min(u.right-u.left,o.defaultCharacterWidth*(s-v.from))),d=(l<0?v.top:v.bottom)+p}let _=u.left+c,b=a??o.viewState.heightOracle.textHeight>>1;for(let v=0;;v+=10){let k=d+(b+v)*l,x=posAtCoords(o,{x:_,y:k},!1,l);if(k<u.top||k>u.bottom||(l<0?x<s:x>s)){let M=o.docView.coordsForChar(x),E=!M||k<M.top?-1:1;return EditorSelection.cursor(x,E,void 0,c)}}}function skipAtomicRanges(o,e,n){for(;;){let a=0;for(let s of o)s.between(e-1,e+1,(l,c,d)=>{if(e>l&&e<c){let u=a||n||(e-l<c-e?-1:1);e=u<0?l:c,a=u}});if(!a)return e}}function skipAtoms(o,e,n){let a=skipAtomicRanges(o.state.facet(atomicRanges).map(s=>s(o)),n.from,e.head>n.from?-1:1);return a==n.from?n:EditorSelection.cursor(a,a<n.from?1:-1)}const LineBreakPlaceholder="￿";class DOMReader{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,n){if(!e)return this;let a=e.parentNode;for(let s=e;;){this.findPointBefore(a,s);let l=this.text.length;this.readNode(s);let c=s.nextSibling;if(c==n)break;let d=ContentView.get(s),u=ContentView.get(c);(d&&u?d.breakAfter:(d?d.breakAfter:isBlockElement(s))||isBlockElement(c)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>l)&&this.lineBreak(),s=c}return this.findPointBefore(a,n),this}readTextNode(e){let n=e.nodeValue;for(let a of this.points)a.node==e&&(a.pos=this.text.length+Math.min(a.offset,n.length));for(let a=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,c=1,d;if(this.lineSeparator?(l=n.indexOf(this.lineSeparator,a),c=this.lineSeparator.length):(d=s.exec(n))&&(l=d.index,c=d[0].length),this.append(n.slice(a,l<0?n.length:l)),l<0)break;if(this.lineBreak(),c>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=c-1);a=l+c}}readNode(e){if(e.cmIgnore)return;let n=ContentView.get(e),a=n&&n.overrideDOMText;if(a!=null){this.findPointInside(e,a.length);for(let s=a.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let a of this.points)a.node==e&&e.childNodes[a.offset]==n&&(a.pos=this.text.length)}findPointInside(e,n){for(let a of this.points)(e.nodeType==3?a.node==e:e.contains(a.node))&&(a.pos=this.text.length+(isAtEnd(e,a.node,a.offset)?n:0))}}function isAtEnd(o,e,n){for(;;){if(!e||n<maxOffset(e))return!1;if(e==o)return!0;n=domIndex(e)+1,e=e.parentNode}}class DOMPoint{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class DOMChange{constructor(e,n,a,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:l,impreciseAnchor:c}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,a,0))){let d=l||c?[]:selectionPoints(e),u=new DOMReader(d,e.state);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=selectionFromPoints(d,this.bounds.from)}else{let d=e.observer.selectionRange,u=l&&l.node==d.focusNode&&l.offset==d.focusOffset||!contains$1(e.contentDOM,d.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(d.focusNode,d.focusOffset),f=c&&c.node==d.anchorNode&&c.offset==d.anchorOffset||!contains$1(e.contentDOM,d.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(d.anchorNode,d.anchorOffset),p=e.viewport;if((browser.ios||browser.chrome)&&e.state.selection.main.empty&&u!=f&&(p.from>0||p.to<e.state.doc.length)){let _=Math.min(u,f),b=Math.max(u,f),v=p.from-_,k=p.to-b;(v==0||v==1||_==0)&&(k==0||k==-1||b==e.state.doc.length)&&(u=0,f=e.state.doc.length)}this.newSel=EditorSelection.single(f,u)}}}function applyDOMChange(o,e){let n,{newSel:a}=e,s=o.state.selection.main,l=o.inputState.lastKeyTime>Date.now()-100?o.inputState.lastKeyCode:-1;if(e.bounds){let{from:c,to:d}=e.bounds,u=s.from,f=null;(l===8||browser.android&&e.text.length<d-c)&&(u=s.to,f="end");let p=findDiff(o.state.doc.sliceString(c,d,LineBreakPlaceholder),e.text,u-c,f);p&&(browser.chrome&&l==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&p.toB--,n={from:c+p.from,to:c+p.toA,insert:Text.of(e.text.slice(p.from,p.toB).split(LineBreakPlaceholder))})}else a&&(!o.hasFocus&&o.state.facet(editable)||a.main.eq(s))&&(a=null);if(!n&&!a)return!1;if(!n&&e.typeOver&&!s.empty&&a&&a.main.empty?n={from:s.from,to:s.to,insert:o.state.doc.slice(s.from,s.to)}:n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:o.state.doc.slice(s.from,n.from).append(n.insert).append(o.state.doc.slice(n.to,s.to))}:(browser.mac||browser.android)&&n&&n.from==n.to&&n.from==s.head-1&&/^\. ?$/.test(n.insert.toString())&&o.contentDOM.getAttribute("autocorrect")=="off"?(a&&n.insert.length==2&&(a=EditorSelection.single(a.main.anchor-1,a.main.head-1)),n={from:s.from,to:s.to,insert:Text.of([" "])}):browser.chrome&&n&&n.from==n.to&&n.from==s.head&&n.insert.toString()==`
 `&&o.lineWrapping&&(a&&(a=EditorSelection.single(a.main.anchor-1,a.main.head-1)),n={from:s.from,to:s.to,insert:Text.of([" "])}),n)return applyDOMChangeInner(o,n,a,l);if(a&&!a.main.eq(s)){let c=!1,d="select";return o.inputState.lastSelectionTime>Date.now()-50&&(o.inputState.lastSelectionOrigin=="select"&&(c=!0),d=o.inputState.lastSelectionOrigin),o.dispatch({selection:a,scrollIntoView:c,userEvent:d}),!0}else return!1}function applyDOMChangeInner(o,e,n,a=-1){if(browser.ios&&o.inputState.flushIOSKey(e))return!0;let s=o.state.selection.main;if(browser.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&o.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&dispatchKey(o.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||a==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&dispatchKey(o.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&dispatchKey(o.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();o.inputState.composing>=0&&o.inputState.composing++;let c,d=()=>c||(c=applyDefaultInsert(o,e,n));return o.state.facet(inputHandler$1).some(u=>u(o,e.from,e.to,l,d))||o.dispatch(d()),!0}function applyDefaultInsert(o,e,n){let a,s=o.state,l=s.selection.main;if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&o.inputState.composing<0){let d=l.from<e.from?s.sliceDoc(l.from,e.from):"",u=l.to>e.to?s.sliceDoc(e.to,l.to):"";a=s.replaceSelection(o.state.toText(d+e.insert.sliceString(0,void 0,o.state.lineBreak)+u))}else{let d=s.changes(e),u=n&&n.main.to<=d.newLength?n.main:void 0;if(s.selection.ranges.length>1&&o.inputState.composing>=0&&e.to<=l.to&&e.to>=l.to-10){let f=o.state.sliceDoc(e.from,e.to),p,_=n&&findCompositionNode(o,n.main.head);if(_){let k=e.insert.length-(e.to-e.from);p={from:_.from,to:_.to-k}}else p=o.state.doc.lineAt(l.head);let b=l.to-e.to,v=l.to-l.from;a=s.changeByRange(k=>{if(k.from==l.from&&k.to==l.to)return{changes:d,range:u||k.map(d)};let x=k.to-b,M=x-f.length;if(k.to-k.from!=v||o.state.sliceDoc(M,x)!=f||k.to>=p.from&&k.from<=p.to)return{range:k};let E=s.changes({from:M,to:x,insert:e.insert}),L=k.to-l.to;return{changes:E,range:u?EditorSelection.range(Math.max(0,u.anchor+L),Math.max(0,u.head+L)):k.map(E)}})}else a={changes:d,selection:u&&s.selection.replaceRange(u)}}let c="input.type";return(o.composing||o.inputState.compositionPendingChange&&o.inputState.compositionEndedAt>Date.now()-50)&&(o.inputState.compositionPendingChange=!1,c+=".compose",o.inputState.compositionFirstChange&&(c+=".start",o.inputState.compositionFirstChange=!1)),s.update(a,{userEvent:c,scrollIntoView:!0})}function findDiff(o,e,n,a){let s=Math.min(o.length,e.length),l=0;for(;l<s&&o.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==s&&o.length==e.length)return null;let c=o.length,d=e.length;for(;c>0&&d>0&&o.charCodeAt(c-1)==e.charCodeAt(d-1);)c--,d--;if(a=="end"){let u=Math.max(0,l-Math.min(c,d));n-=c+u-l}if(c<l&&o.length<e.length){let u=n<=l&&n>=c?l-n:0;l-=u,d=l+(d-c),c=l}else if(d<l){let u=n<=l&&n>=d?l-n:0;l-=u,c=l+(c-d),d=l}return{from:l,toA:c,toB:d}}function selectionPoints(o){let e=[];if(o.root.activeElement!=o.contentDOM)return e;let{anchorNode:n,anchorOffset:a,focusNode:s,focusOffset:l}=o.observer.selectionRange;return n&&(e.push(new DOMPoint(n,a)),(s!=n||l!=a)&&e.push(new DOMPoint(s,l))),e}function selectionFromPoints(o,e){if(o.length==0)return null;let n=o[0].pos,a=o.length==2?o[1].pos:n;return n>-1&&a>-1?EditorSelection.single(n+e,a+e):null}class InputState{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(e.contentDOM.ownerDocument)}handleEvent(e){!eventBelongsToEditor(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let a=this.handlers[e];if(a){for(let s of a.observers)s(this.view,n);for(let s of a.handlers){if(n.defaultPrevented)break;if(s(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=computeHandlers(e),a=this.handlers,s=this.view.contentDOM;for(let l in n)if(l!="scroll"){let c=!n[l].handlers.length,d=a[l];d&&c!=!d.handlers.length&&(s.removeEventListener(l,this.handleEvent),d=null),d||s.addEventListener(l,this.handleEvent,{passive:c})}for(let l in a)l!="scroll"&&!n[l]&&s.removeEventListener(l,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&modifierCodes.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return browser.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=PendingKeys.find(a=>a.keyCode==e.keyCode))&&!e.ctrlKey||EmacsyPendingKeys.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(o,e){return(n,a)=>{try{return e.call(o,a,n)}catch(s){logException(n.state,s)}}}function computeHandlers(o){let e=Object.create(null);function n(a){return e[a]||(e[a]={observers:[],handlers:[]})}for(let a of o){let s=a.spec;if(s&&s.domEventHandlers)for(let l in s.domEventHandlers){let c=s.domEventHandlers[l];c&&n(l).handlers.push(bindHandler(a.value,c))}if(s&&s.domEventObservers)for(let l in s.domEventObservers){let c=s.domEventObservers[l];c&&n(l).observers.push(bindHandler(a.value,c))}}for(let a in handlers$1)n(a).handlers.push(handlers$1[a]);for(let a in observers)n(a).observers.push(observers[a]);return e}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(o){return Math.max(0,o)*.7+8}function dist(o,e){return Math.max(Math.abs(o.clientX-e.clientX),Math.abs(o.clientY-e.clientY))}class MouseSelection{constructor(e,n,a,s){this.view=e,this.startEvent=n,this.style=a,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=scrollableParents(e.contentDOM),this.atoms=e.state.facet(atomicRanges).map(c=>c(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,n),this.dragging=isInPrimarySelection(e,n)&&getClickType(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,a=0,s=0,l=0,c=this.view.win.innerWidth,d=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:c}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:d}=this.scrollParents.y.getBoundingClientRect());let u=getScrollMargins(this.view);e.clientX-u.left<=s+dragScrollMargin?n=-dragScrollSpeed(s-e.clientX):e.clientX+u.right>=c-dragScrollMargin&&(n=dragScrollSpeed(e.clientX-c)),e.clientY-u.top<=l+dragScrollMargin?a=-dragScrollSpeed(l-e.clientY):e.clientY+u.bottom>=d-dragScrollMargin&&(a=dragScrollSpeed(e.clientY-d)),this.setScrollSpeed(n,a)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let a=0;a<e.ranges.length;a++){let s=e.ranges[a],l=null;if(s.empty){let c=skipAtomicRanges(this.atoms,s.from,0);c!=s.from&&(l=EditorSelection.cursor(c,-1))}else{let c=skipAtomicRanges(this.atoms,s.from,-1),d=skipAtomicRanges(this.atoms,s.to,1);(c!=s.from||d!=s.to)&&(l=EditorSelection.range(s.from==s.anchor?c:d,s.from==s.head?c:d))}l&&(n||(n=e.ranges.slice()),n[a]=l)}return n?EditorSelection.create(n,e.mainIndex):e}select(e){let{view:n}=this,a=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!a.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:a,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(o,e){let n=o.state.facet(clickAddsSelectionRange);return n.length?n[0](e):browser.mac?e.metaKey:e.ctrlKey}function dragMovesSelection(o,e){let n=o.state.facet(dragMovesSelection$1);return n.length?n[0](e):browser.mac?!e.altKey:!e.ctrlKey}function isInPrimarySelection(o,e){let{main:n}=o.state.selection;if(n.empty)return!1;let a=getSelection$1(o.root);if(!a||a.rangeCount==0)return!0;let s=a.getRangeAt(0).getClientRects();for(let l=0;l<s.length;l++){let c=s[l];if(c.left<=e.clientX&&c.right>=e.clientX&&c.top<=e.clientY&&c.bottom>=e.clientY)return!0}return!1}function eventBelongsToEditor(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,a;n!=o.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(a=ContentView.get(n))&&a.ignoreEvent(e))return!1;return!0}const handlers$1=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(o){let e=o.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{o.focus(),n.remove(),doPaste(o,n.value)},50)}function textFilter(o,e,n){for(let a of o.facet(e))n=a(n,o);return n}function doPaste(o,e){e=textFilter(o.state,clipboardInputFilter,e);let{state:n}=o,a,s=1,l=n.toText(e),c=l.lines==n.selection.ranges.length;if(lastLinewiseCopy!=null&&n.selection.ranges.every(u=>u.empty)&&lastLinewiseCopy==l.toString()){let u=-1;a=n.changeByRange(f=>{let p=n.doc.lineAt(f.from);if(p.from==u)return{range:f};u=p.from;let _=n.toText((c?l.line(s++).text:e)+n.lineBreak);return{changes:{from:p.from,insert:_},range:EditorSelection.cursor(f.from+_.length)}})}else c?a=n.changeByRange(u=>{let f=l.line(s++);return{changes:{from:u.from,to:u.to,insert:f.text},range:EditorSelection.cursor(u.from+f.length)}}):a=n.replaceSelection(l);o.dispatch(a,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=o=>{o.inputState.lastScrollTop=o.scrollDOM.scrollTop,o.inputState.lastScrollLeft=o.scrollDOM.scrollLeft};handlers$1.keydown=(o,e)=>(o.inputState.setSelectionOrigin("select"),e.keyCode==27&&o.inputState.tabFocusMode!=0&&(o.inputState.tabFocusMode=Date.now()+2e3),!1);observers.touchstart=(o,e)=>{o.inputState.lastTouchTime=Date.now(),o.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=o=>{o.inputState.setSelectionOrigin("select.pointer")};handlers$1.mousedown=(o,e)=>{if(o.observer.flush(),o.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let a of o.state.facet(mouseSelectionStyle))if(n=a(o,e),n)break;if(!n&&e.button==0&&(n=basicMouseSelection(o,e)),n){let a=!o.hasFocus;o.inputState.startMouseSelection(new MouseSelection(o,e,n,a)),a&&o.observer.ignore(()=>{focusPreventScroll(o.contentDOM);let l=o.root.activeElement;l&&!l.contains(o.contentDOM)&&l.blur()});let s=o.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function rangeForClick(o,e,n,a){if(a==1)return EditorSelection.cursor(e,n);if(a==2)return groupAt(o.state,e,n);{let s=LineView.find(o.docView,e),l=o.state.doc.lineAt(s?s.posAtEnd:e),c=s?s.posAtStart:l.from,d=s?s.posAtEnd:l.to;return d<o.state.doc.length&&d==l.to&&d++,EditorSelection.range(c,d)}}let inside=(o,e,n)=>e>=n.top&&e<=n.bottom&&o>=n.left&&o<=n.right;function findPositionSide(o,e,n,a){let s=LineView.find(o.docView,e);if(!s)return 1;let l=e-s.posAtStart;if(l==0)return 1;if(l==s.length)return-1;let c=s.coordsAt(l,-1);if(c&&inside(n,a,c))return-1;let d=s.coordsAt(l,1);return d&&inside(n,a,d)?1:c&&c.bottom>=a?-1:1}function queryPos(o,e){let n=o.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:findPositionSide(o,n,e.clientX,e.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(o){if(!BadMouseDetail)return o.detail;let e=lastMouseDown,n=lastMouseDownTime;return lastMouseDown=o,lastMouseDownTime=Date.now(),lastMouseDownCount=!e||n>Date.now()-400&&Math.abs(e.clientX-o.clientX)<2&&Math.abs(e.clientY-o.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(o,e){let n=queryPos(o,e),a=getClickType(e),s=o.state.selection;return{update(l){l.docChanged&&(n.pos=l.changes.mapPos(n.pos),s=s.map(l.changes))},get(l,c,d){let u=queryPos(o,l),f,p=rangeForClick(o,u.pos,u.bias,a);if(n.pos!=u.pos&&!c){let _=rangeForClick(o,n.pos,n.bias,a),b=Math.min(_.from,p.from),v=Math.max(_.to,p.to);p=b<p.from?EditorSelection.range(b,v):EditorSelection.range(v,b)}return c?s.replaceRange(s.main.extend(p.from,p.to)):d&&a==1&&s.ranges.length>1&&(f=removeRangeAround(s,u.pos))?f:d?s.addRange(p):EditorSelection.create([p])}}}function removeRangeAround(o,e){for(let n=0;n<o.ranges.length;n++){let{from:a,to:s}=o.ranges[n];if(a<=e&&s>=e)return EditorSelection.create(o.ranges.slice(0,n).concat(o.ranges.slice(n+1)),o.mainIndex==n?0:o.mainIndex-(o.mainIndex>n?1:0))}return null}handlers$1.dragstart=(o,e)=>{let{selection:{main:n}}=o.state;if(e.target.draggable){let s=o.docView.nearest(e.target);if(s&&s.isWidget){let l=s.posAtStart,c=l+s.length;(l>=n.to||c<=n.from)&&(n=EditorSelection.range(l,c))}}let{inputState:a}=o;return a.mouseSelection&&(a.mouseSelection.dragging=!0),a.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",textFilter(o.state,clipboardOutputFilter,o.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};handlers$1.dragend=o=>(o.inputState.draggedContent=null,!1);function dropText(o,e,n,a){if(n=textFilter(o.state,clipboardInputFilter,n),!n)return;let s=o.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=o.inputState,c=a&&l&&dragMovesSelection(o,e)?{from:l.from,to:l.to}:null,d={from:s,insert:n},u=o.state.changes(c?[c,d]:d);o.focus(),o.dispatch({changes:u,selection:{anchor:u.mapPos(s,-1),head:u.mapPos(s,1)},userEvent:c?"move.drop":"input.drop"}),o.inputState.draggedContent=null}handlers$1.drop=(o,e)=>{if(!e.dataTransfer)return!1;if(o.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let a=Array(n.length),s=0,l=()=>{++s==n.length&&dropText(o,e,a.filter(c=>c!=null).join(o.state.lineBreak),!1)};for(let c=0;c<n.length;c++){let d=new FileReader;d.onerror=l,d.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(d.result)||(a[c]=d.result),l()},d.readAsText(n[c])}return!0}else{let a=e.dataTransfer.getData("Text");if(a)return dropText(o,e,a,!0),!0}return!1};handlers$1.paste=(o,e)=>{if(o.state.readOnly)return!0;o.observer.flush();let n=brokenClipboardAPI?null:e.clipboardData;return n?(doPaste(o,n.getData("text/plain")||n.getData("text/uri-list")),!0):(capturePaste(o),!1)};function captureCopy(o,e){let n=o.dom.parentNode;if(!n)return;let a=n.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.value=e,a.focus(),a.selectionEnd=e.length,a.selectionStart=0,setTimeout(()=>{a.remove(),o.focus()},50)}function copiedRange(o){let e=[],n=[],a=!1;for(let s of o.selection.ranges)s.empty||(e.push(o.sliceDoc(s.from,s.to)),n.push(s));if(!e.length){let s=-1;for(let{from:l}of o.selection.ranges){let c=o.doc.lineAt(l);c.number>s&&(e.push(c.text),n.push({from:c.from,to:Math.min(o.doc.length,c.to+1)})),s=c.number}a=!0}return{text:textFilter(o,clipboardOutputFilter,e.join(o.lineBreak)),ranges:n,linewise:a}}let lastLinewiseCopy=null;handlers$1.copy=handlers$1.cut=(o,e)=>{let{text:n,ranges:a,linewise:s}=copiedRange(o.state);if(!n&&!s)return!1;lastLinewiseCopy=s?n:null,e.type=="cut"&&!o.state.readOnly&&o.dispatch({changes:a,scrollIntoView:!0,userEvent:"delete.cut"});let l=brokenClipboardAPI?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",n),!0):(captureCopy(o,n),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(o,e){let n=[];for(let a of o.facet(focusChangeEffect)){let s=a(o,e);s&&n.push(s)}return n?o.update({effects:n,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(o){setTimeout(()=>{let e=o.hasFocus;if(e!=o.inputState.notifiedFocused){let n=focusChangeTransaction(o.state,e);n?o.dispatch(n):o.update([])}},10)}observers.focus=o=>{o.inputState.lastFocusTime=Date.now(),!o.scrollDOM.scrollTop&&(o.inputState.lastScrollTop||o.inputState.lastScrollLeft)&&(o.scrollDOM.scrollTop=o.inputState.lastScrollTop,o.scrollDOM.scrollLeft=o.inputState.lastScrollLeft),updateForFocusChange(o)};observers.blur=o=>{o.observer.clearSelectionRange(),updateForFocusChange(o)};observers.compositionstart=observers.compositionupdate=o=>{o.observer.editContext||(o.inputState.compositionFirstChange==null&&(o.inputState.compositionFirstChange=!0),o.inputState.composing<0&&(o.inputState.composing=0))};observers.compositionend=o=>{o.observer.editContext||(o.inputState.composing=-1,o.inputState.compositionEndedAt=Date.now(),o.inputState.compositionPendingKey=!0,o.inputState.compositionPendingChange=o.observer.pendingRecords().length>0,o.inputState.compositionFirstChange=null,browser.chrome&&browser.android?o.observer.flushSoon():o.inputState.compositionPendingChange?Promise.resolve().then(()=>o.observer.flush()):setTimeout(()=>{o.inputState.composing<0&&o.docView.hasComposition&&o.update([])},50))};observers.contextmenu=o=>{o.inputState.lastContextMenu=Date.now()};handlers$1.beforeinput=(o,e)=>{var n,a;if(e.inputType=="insertReplacementText"&&o.observer.editContext){let l=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),c=e.getTargetRanges();if(l&&c.length){let d=c[0],u=o.posAtDOM(d.startContainer,d.startOffset),f=o.posAtDOM(d.endContainer,d.endOffset);return applyDOMChangeInner(o,{from:u,to:f,insert:o.state.toText(l)},null),!0}}let s;if(browser.chrome&&browser.android&&(s=PendingKeys.find(l=>l.inputType==e.inputType))&&(o.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let l=((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0;setTimeout(()=>{var c;(((c=window.visualViewport)===null||c===void 0?void 0:c.height)||0)>l+10&&o.hasFocus&&(o.contentDOM.blur(),o.focus())},100)}return browser.ios&&e.inputType=="deleteContentForward"&&o.observer.flushSoon(),browser.safari&&e.inputType=="insertText"&&o.inputState.composing>=0&&setTimeout(()=>observers.compositionend(o,e),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(o){appliedFirefoxHack.has(o)||(appliedFirefoxHack.add(o),o.addEventListener("copy",()=>{}),o.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let a=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(a+=Math.max(0,Math.ceil((n-e-a*this.lineLength*.5)/this.lineLength))),this.lineHeight*a}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let a=0;a<e.length;a++){let s=e[a];s<0?a++:this.heightSamples[Math.floor(s*10)]||(n=!0,this.heightSamples[Math.floor(s*10)]=!0)}return n}refresh(e,n,a,s,l,c){let d=wrappingWhiteSpace.indexOf(e)>-1,u=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=d;if(this.lineWrapping=d,this.lineHeight=n,this.charWidth=a,this.textHeight=s,this.lineLength=l,u){this.heightSamples={};for(let f=0;f<c.length;f++){let p=c[f];p<0?f++:this.heightSamples[Math.floor(p*10)]=!0}}return u}}class MeasuredHeights{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,n,a,s,l){this.from=e,this.length=n,this.top=a,this.height=s,this._content=l}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var QueryType=function(o){return o[o.ByPos=0]="ByPos",o[o.ByHeight=1]="ByHeight",o[o.ByPosNoHeight=2]="ByPosNoHeight",o}(QueryType||(QueryType={}));const Epsilon=.001;class HeightMap{constructor(e,n,a=2){this.length=e,this.height=n,this.flags=a}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Epsilon&&(heightChangeFlag=!0),this.height=e)}replace(e,n,a){return HeightMap.of(a)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,a,s){let l=this,c=a.doc;for(let d=s.length-1;d>=0;d--){let{fromA:u,toA:f,fromB:p,toB:_}=s[d],b=l.lineAt(u,QueryType.ByPosNoHeight,a.setDoc(n),0,0),v=b.to>=f?b:l.lineAt(f,QueryType.ByPosNoHeight,a,0,0);for(_+=v.to-f,f=v.to;d>0&&b.from<=s[d-1].toA;)u=s[d-1].fromA,p=s[d-1].fromB,d--,u<b.from&&(b=l.lineAt(u,QueryType.ByPosNoHeight,a,0,0));p+=b.from-u,u=b.from;let k=NodeBuilder.build(a.setDoc(c),e,p,_);l=replace$1(l,l.replace(u,f,k))}return l.updateHeight(a,0)}static empty(){return new HeightMapText(0,0)}static of(e){if(e.length==1)return e[0];let n=0,a=e.length,s=0,l=0;for(;;)if(n==a)if(s>l*2){let d=e[n-1];d.break?e.splice(--n,1,d.left,null,d.right):e.splice(--n,1,d.left,d.right),a+=1+d.break,s-=d.size}else if(l>s*2){let d=e[a];d.break?e.splice(a,1,d.left,null,d.right):e.splice(a,1,d.left,d.right),a+=2+d.break,l-=d.size}else break;else if(s<l){let d=e[n++];d&&(s+=d.size)}else{let d=e[--a];d&&(l+=d.size)}let c=0;return e[n-1]==null?(c=1,n--):e[n]==null&&(c=1,a++),new HeightMapBranch(HeightMap.of(e.slice(0,n)),c,HeightMap.of(e.slice(a)))}}function replace$1(o,e){return o==e?o:(o.constructor!=e.constructor&&(heightChangeFlag=!0),e)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(e,n,a){super(e,n),this.deco=a}blockAt(e,n,a,s){return new BlockInfo(s,this.length,a,this.height,this.deco||0)}lineAt(e,n,a,s,l){return this.blockAt(0,a,s,l)}forEachLine(e,n,a,s,l,c){e<=l+this.length&&n>=l&&c(this.blockAt(0,a,s,l))}updateHeight(e,n=0,a=!1,s){return s&&s.from<=n&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,a,s){return new BlockInfo(s,this.length,a,this.height,this.breaks)}replace(e,n,a){let s=a[0];return a.length==1&&(s instanceof HeightMapText||s instanceof HeightMapGap&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof HeightMapGap?s=new HeightMapText(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):HeightMap.of(a)}updateHeight(e,n=0,a=!1,s){return s&&s.from<=n&&s.more?this.setHeight(s.heights[s.index++]):(a||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,n){let a=e.doc.lineAt(n).number,s=e.doc.lineAt(n+this.length).number,l=s-a+1,c,d=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*l);c=u/l,this.length>l+1&&(d=(this.height-u)/(this.length-l-1))}else c=this.height/l;return{firstLine:a,lastLine:s,perLine:c,perChar:d}}blockAt(e,n,a,s){let{firstLine:l,lastLine:c,perLine:d,perChar:u}=this.heightMetrics(n,s);if(n.lineWrapping){let f=s+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-a)/this.height))*this.length)),p=n.doc.lineAt(f),_=d+p.length*u,b=Math.max(a,e-_/2);return new BlockInfo(p.from,p.length,b,_,0)}else{let f=Math.max(0,Math.min(c-l,Math.floor((e-a)/d))),{from:p,length:_}=n.doc.line(l+f);return new BlockInfo(p,_,a+d*f,d,0)}}lineAt(e,n,a,s,l){if(n==QueryType.ByHeight)return this.blockAt(e,a,s,l);if(n==QueryType.ByPosNoHeight){let{from:v,to:k}=a.doc.lineAt(e);return new BlockInfo(v,k-v,0,0,0)}let{firstLine:c,perLine:d,perChar:u}=this.heightMetrics(a,l),f=a.doc.lineAt(e),p=d+f.length*u,_=f.number-c,b=s+d*_+u*(f.from-l-_);return new BlockInfo(f.from,f.length,Math.max(s,Math.min(b,s+this.height-p)),p,0)}forEachLine(e,n,a,s,l,c){e=Math.max(e,l),n=Math.min(n,l+this.length);let{firstLine:d,perLine:u,perChar:f}=this.heightMetrics(a,l);for(let p=e,_=s;p<=n;){let b=a.doc.lineAt(p);if(p==e){let k=b.number-d;_+=u*k+f*(e-l-k)}let v=u+f*b.length;c(new BlockInfo(b.from,b.length,_,v,0)),_+=v,p=b.to+1}}replace(e,n,a){let s=this.length-n;if(s>0){let l=a[a.length-1];l instanceof HeightMapGap?a[a.length-1]=new HeightMapGap(l.length+s):a.push(null,new HeightMapGap(s-1))}if(e>0){let l=a[0];l instanceof HeightMapGap?a[0]=new HeightMapGap(e+l.length):a.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(a)}decomposeLeft(e,n){n.push(new HeightMapGap(e-1),null)}decomposeRight(e,n){n.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,n=0,a=!1,s){let l=n+this.length;if(s&&s.from<=n+this.length&&s.more){let c=[],d=Math.max(n,s.from),u=-1;for(s.from>n&&c.push(new HeightMapGap(s.from-n-1).updateHeight(e,n));d<=l&&s.more;){let p=e.doc.lineAt(d).length;c.length&&c.push(null);let _=s.heights[s.index++];u==-1?u=_:Math.abs(_-u)>=Epsilon&&(u=-2);let b=new HeightMapText(p,_);b.outdated=!1,c.push(b),d+=p+1}d<=l&&c.push(null,new HeightMapGap(l-d).updateHeight(e,d));let f=HeightMap.of(c);return(u<0||Math.abs(f.height-this.height)>=Epsilon||Math.abs(u-this.heightMetrics(e,n).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace$1(this,f)}else(a||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,n,a){super(e.length+n+a.length,e.height+a.height,n|(e.outdated||a.outdated?2:0)),this.left=e,this.right=a,this.size=e.size+a.size}get break(){return this.flags&1}blockAt(e,n,a,s){let l=a+this.left.height;return e<l?this.left.blockAt(e,n,a,s):this.right.blockAt(e,n,l,s+this.left.length+this.break)}lineAt(e,n,a,s,l){let c=s+this.left.height,d=l+this.left.length+this.break,u=n==QueryType.ByHeight?e<c:e<d,f=u?this.left.lineAt(e,n,a,s,l):this.right.lineAt(e,n,a,c,d);if(this.break||(u?f.to<d:f.from>d))return f;let p=n==QueryType.ByPosNoHeight?QueryType.ByPosNoHeight:QueryType.ByPos;return u?f.join(this.right.lineAt(d,p,a,c,d)):this.left.lineAt(d,p,a,s,l).join(f)}forEachLine(e,n,a,s,l,c){let d=s+this.left.height,u=l+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,n,a,s,l,c),n>=u&&this.right.forEachLine(e,n,a,d,u,c);else{let f=this.lineAt(u,QueryType.ByPos,a,s,l);e<f.from&&this.left.forEachLine(e,f.from-1,a,s,l,c),f.to>=e&&f.from<=n&&c(f),n>f.to&&this.right.forEachLine(f.to+1,n,a,d,u,c)}}replace(e,n,a){let s=this.left.length+this.break;if(n<s)return this.balanced(this.left.replace(e,n,a),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,n-s,a));let l=[];e>0&&this.decomposeLeft(e,l);let c=l.length;for(let d of a)l.push(d);if(e>0&&mergeGaps(l,c-1),n<this.length){let d=l.length;this.decomposeRight(n,l),mergeGaps(l,d)}return HeightMap.of(l)}decomposeLeft(e,n){let a=this.left.length;if(e<=a)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(a++,e>=a&&n.push(null)),e>a&&this.right.decomposeLeft(e-a,n)}decomposeRight(e,n){let a=this.left.length,s=a+this.break;if(e>=s)return this.right.decomposeRight(e-s,n);e<a&&this.left.decomposeRight(e,n),this.break&&e<s&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?HeightMap.of(this.break?[e,null,n]:[e,n]):(this.left=replace$1(this.left,e),this.right=replace$1(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,a=!1,s){let{left:l,right:c}=this,d=n+l.length+this.break,u=null;return s&&s.from<=n+l.length&&s.more?u=l=l.updateHeight(e,n,a,s):l.updateHeight(e,n,a),s&&s.from<=d+c.length&&s.more?u=c=c.updateHeight(e,d,a,s):c.updateHeight(e,d,a),u?this.balanced(l,c):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(o,e){let n,a;o[e]==null&&(n=o[e-1])instanceof HeightMapGap&&(a=o[e+1])instanceof HeightMapGap&&o.splice(e-1,3,new HeightMapGap(n.length+1+a.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let a=Math.min(n,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof HeightMapText?s.length+=a-this.pos:(a>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(a-this.pos,-1)),this.writtenTo=a,n>a&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,a){if(e<n||a.heightRelevant){let s=a.widget?a.widget.estimatedHeight:0,l=a.widget?a.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let c=n-e;a.block?this.addBlock(new HeightMapBlock(c,s,a)):(c||l||s>=relevantWidgetHeight)&&this.addLineDeco(s,l,c)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let a=new HeightMapGap(n-e);return this.oracle.doc.lineAt(e).to==n&&(a.flags|=4),a}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let n=new HeightMapText(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,a){let s=this.ensureLine();s.length+=a,s.collapsed+=a,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=n,this.writtenTo=this.pos=this.pos+a}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let a=e;for(let s of this.nodes)s instanceof HeightMapText&&s.updateHeight(this.oracle,a),a+=s?s.length:1;return this.nodes}static build(e,n,a,s){let l=new NodeBuilder(a,e);return RangeSet.spans(n,a,s,l,0),l.finish(a)}}function heightRelevantDecoChanges(o,e,n){let a=new DecorationComparator;return RangeSet.compare(o,e,n,a,0),a.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,a,s){(e<n||a&&a.heightRelevant||s&&s.heightRelevant)&&addRange(e,n,this.changes,5)}}function visiblePixelRange(o,e){let n=o.getBoundingClientRect(),a=o.ownerDocument,s=a.defaultView||window,l=Math.max(0,n.left),c=Math.min(s.innerWidth,n.right),d=Math.max(0,n.top),u=Math.min(s.innerHeight,n.bottom);for(let f=o.parentNode;f&&f!=a.body;)if(f.nodeType==1){let p=f,_=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&_.overflow!="visible"){let b=p.getBoundingClientRect();l=Math.max(l,b.left),c=Math.min(c,b.right),d=Math.max(d,b.top),u=Math.min(f==o.parentNode?s.innerHeight:u,b.bottom)}f=_.position=="absolute"||_.position=="fixed"?p.offsetParent:p.parentNode}else if(f.nodeType==11)f=f.host;else break;return{left:l-n.left,right:Math.max(l,c)-n.left,top:d-(n.top+e),bottom:Math.max(d,u)-(n.top+e)}}function fullPixelRange(o,e){let n=o.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class LineGap{constructor(e,n,a,s){this.from=e,this.to=n,this.size=a,this.displaySize=s}static same(e,n){if(e.length!=n.length)return!1;for(let a=0;a<e.length;a++){let s=e[a],l=n[a];if(s.from!=l.from||s.to!=l.to||s.size!=l.size)return!1}return!0}draw(e,n){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(contentAttributes).some(a=>typeof a!="function"&&a.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(n),this.stateDeco=e.facet(decorations).filter(a=>typeof a!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]);for(let a=0;a<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());a++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(a=>a.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let a=0;a<=1;a++){let s=a?n.head:n.anchor;if(!e.some(({from:l,to:c})=>s>=l&&s<=c)){let{from:l,to:c}=this.lineBlockAt(s);e.push(new Viewport(l,c))}}return this.viewports=e.sort((a,s)=>a.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(scaleBlock(e,this.scaler))})}update(e,n=null){this.state=e.state;let a=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(p=>typeof p!="function");let s=e.changedRanges,l=ChangedRange.extendWithRanges(s,heightRelevantDecoChanges(a,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),c=this.heightMap.height,d=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=c||heightChangeFlag)&&(e.flags|=2),d?(this.scrollAnchorPos=e.changes.mapPos(d.from,-1),this.scrollAnchorHeight=d.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let u=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<u.from||n.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,n));let f=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(f||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,a=window.getComputedStyle(n),s=this.heightOracle,l=a.whiteSpace;this.defaultTextDirection=a.direction=="rtl"?Direction.RTL:Direction.LTR;let c=this.heightOracle.mustRefreshForWrapping(l),d=n.getBoundingClientRect(),u=c||this.mustMeasureContent||this.contentDOMHeight!=d.height;this.contentDOMHeight=d.height,this.mustMeasureContent=!1;let f=0,p=0;if(d.width&&d.height){let{scaleX:B,scaleY:F}=getScale$1(n,d);(B>.005&&Math.abs(this.scaleX-B)>.005||F>.005&&Math.abs(this.scaleY-F)>.005)&&(this.scaleX=B,this.scaleY=F,f|=16,c=u=!0)}let _=(parseInt(a.paddingTop)||0)*this.scaleY,b=(parseInt(a.paddingBottom)||0)*this.scaleY;(this.paddingTop!=_||this.paddingBottom!=b)&&(this.paddingTop=_,this.paddingBottom=b,f|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,f|=16);let v=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=v&&(this.scrollAnchorHeight=-1,this.scrollTop=v),this.scrolledToBottom=isScrolledToBottom(e.scrollDOM);let k=(this.printing?fullPixelRange:visiblePixelRange)(n,this.paddingTop),x=k.top-this.pixelViewport.top,M=k.bottom-this.pixelViewport.bottom;this.pixelViewport=k;let E=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(E!=this.inView&&(this.inView=E,E&&(u=!0)),!this.inView&&!this.scrollTarget)return 0;let L=d.width;if((this.contentDOMWidth!=L||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=d.width,this.editorHeight=e.scrollDOM.clientHeight,f|=16),u){let B=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(B)&&(c=!0),c||s.lineWrapping&&Math.abs(L-this.contentDOMWidth)>s.charWidth){let{lineHeight:F,charWidth:j,textHeight:I}=e.docView.measureTextSize();c=F>0&&s.refresh(l,F,j,I,L/j,B),c&&(e.docView.minWidth=0,f|=16)}x>0&&M>0?p=Math.max(x,M):x<0&&M<0&&(p=Math.min(x,M)),clearHeightChangeFlag();for(let F of this.viewports){let j=F.from==this.viewport.from?B:e.docView.measureVisibleLineHeights(F);this.heightMap=(c?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,c,new MeasuredHeights(F.from,j))}heightChangeFlag&&(f|=2)}let V=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return V&&(f&2&&(f|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),f|=this.updateForViewport()),(f&2||V)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps,e)),f|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),f}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let a=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,l=this.heightOracle,{visibleTop:c,visibleBottom:d}=this,u=new Viewport(s.lineAt(c-a*1e3,QueryType.ByHeight,l,0,0).from,s.lineAt(d+(1-a)*1e3,QueryType.ByHeight,l,0,0).to);if(n){let{head:f}=n.range;if(f<u.from||f>u.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),_=s.lineAt(f,QueryType.ByPos,l,0,0),b;n.y=="center"?b=(_.top+_.bottom)/2-p/2:n.y=="start"||n.y=="nearest"&&f<u.from?b=_.top:b=_.bottom-p,u=new Viewport(s.lineAt(b-1e3/2,QueryType.ByHeight,l,0,0).from,s.lineAt(b+p+1e3/2,QueryType.ByHeight,l,0,0).to)}}return u}mapViewport(e,n){let a=n.mapPos(e.from,-1),s=n.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(a,QueryType.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,QueryType.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},a=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,QueryType.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(n,QueryType.ByPos,this.heightOracle,0,0),{visibleTop:c,visibleBottom:d}=this;return(e==0||s<=c-Math.max(10,Math.min(-a,250)))&&(n==this.state.doc.length||l>=d+Math.max(10,Math.min(a,250)))&&s>c-2*1e3&&l<d+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let a=[];for(let s of e)n.touchesRange(s.from,s.to)||a.push(new LineGap(n.mapPos(s.from),n.mapPos(s.to),s.size,s.displaySize));return a}ensureLineGaps(e,n){let a=this.heightOracle.lineWrapping,s=a?1e4:2e3,l=s>>1,c=s<<1;if(this.defaultTextDirection!=Direction.LTR&&!a)return[];let d=[],u=(p,_,b,v)=>{if(_-p<l)return;let k=this.state.selection.main,x=[k.from];k.empty||x.push(k.to);for(let E of x)if(E>p&&E<_){u(p,E-10,b,v),u(E+10,_,b,v);return}let M=find(e,E=>E.from>=b.from&&E.to<=b.to&&Math.abs(E.from-p)<l&&Math.abs(E.to-_)<l&&!x.some(L=>E.from<L&&E.to>L));if(!M){if(_<b.to&&n&&a&&n.visibleRanges.some(V=>V.from<=_&&V.to>=_)){let V=n.moveToLineBoundary(EditorSelection.cursor(_),!1,!0).head;V>p&&(_=V)}let E=this.gapSize(b,p,_,v),L=a||E<2e6?E:2e6;M=new LineGap(p,_,E,L)}d.push(M)},f=p=>{if(p.length<c||p.type!=BlockType.Text)return;let _=lineStructure(p.from,p.to,this.stateDeco);if(_.total<c)return;let b=this.scrollTarget?this.scrollTarget.range.head:null,v,k;if(a){let x=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,M,E;if(b!=null){let L=findFraction(_,b),V=((this.visibleBottom-this.visibleTop)/2+x)/p.height;M=L-V,E=L+V}else M=(this.visibleTop-p.top-x)/p.height,E=(this.visibleBottom-p.top+x)/p.height;v=findPosition(_,M),k=findPosition(_,E)}else{let x=_.total*this.heightOracle.charWidth,M=s*this.heightOracle.charWidth,E=0;if(x>2e6)for(let j of e)j.from>=p.from&&j.from<p.to&&j.size!=j.displaySize&&j.from*this.heightOracle.charWidth+E<this.pixelViewport.left&&(E=j.size-j.displaySize);let L=this.pixelViewport.left+E,V=this.pixelViewport.right+E,B,F;if(b!=null){let j=findFraction(_,b),I=((V-L)/2+M)/x;B=j-I,F=j+I}else B=(L-M)/x,F=(V+M)/x;v=findPosition(_,B),k=findPosition(_,F)}v>p.from&&u(p.from,v,p,_),k<p.to&&u(k,p.to,p,_)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(f):f(p);return d}gapSize(e,n,a,s){let l=findFraction(s,a)-findFraction(s,n);return this.heightOracle.lineWrapping?e.height*l:s.total*this.heightOracle.charWidth*l}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let a=[];RangeSet.spans(n,this.viewport.from,this.viewport.to,{span(l,c){a.push({from:l,to:c})},point(){}},20);let s=0;if(a.length!=this.visibleRanges.length)s=12;else for(let l=0;l<a.length&&!(s&8);l++){let c=this.visibleRanges[l],d=a[l];(c.from!=d.from||c.to!=d.to)&&(s|=4,e&&e.mapPos(c.from,-1)==d.from&&e.mapPos(c.to,1)==d.to||(s|=8))}return this.visibleRanges=a,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,n){this.from=e,this.to=n}}function lineStructure(o,e,n){let a=[],s=o,l=0;return RangeSet.spans(n,o,e,{span(){},point(c,d){c>s&&(a.push({from:s,to:c}),l+=c-s),s=d}},20),s<e&&(a.push({from:s,to:e}),l+=e-s),{total:l,ranges:a}}function findPosition({total:o,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let a=Math.floor(o*n);for(let s=0;;s++){let{from:l,to:c}=e[s],d=c-l;if(a<=d)return l+a;a-=d}}function findFraction(o,e){let n=0;for(let{from:a,to:s}of o.ranges){if(e<=s){n+=e-a;break}n+=s-a}return n/o.total}function find(o,e){for(let n of o)if(e(n))return n}const IdScaler={toDOM(o){return o},fromDOM(o){return o},scale:1,eq(o){return o==this}};class BigScaler{constructor(e,n,a){let s=0,l=0,c=0;this.viewports=a.map(({from:d,to:u})=>{let f=n.lineAt(d,QueryType.ByPos,e,0,0).top,p=n.lineAt(u,QueryType.ByPos,e,0,0).bottom;return s+=p-f,{from:d,to:u,top:f,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(n.height-s);for(let d of this.viewports)d.domTop=c+(d.top-l)*this.scale,c=d.domBottom=d.domTop+(d.bottom-d.top),l=d.bottom}toDOM(e){for(let n=0,a=0,s=0;;n++){let l=n<this.viewports.length?this.viewports[n]:null;if(!l||e<l.top)return s+(e-a)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);a=l.bottom,s=l.domBottom}}fromDOM(e){for(let n=0,a=0,s=0;;n++){let l=n<this.viewports.length?this.viewports[n]:null;if(!l||e<l.domTop)return a+(e-s)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);a=l.bottom,s=l.domBottom}}eq(e){return e instanceof BigScaler?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,a)=>n.from==e.viewports[a].from&&n.to==e.viewports[a].to):!1}}function scaleBlock(o,e){if(e.scale==1)return o;let n=e.toDOM(o.top),a=e.toDOM(o.bottom);return new BlockInfo(o.from,o.length,n,a-n,Array.isArray(o._content)?o._content.map(s=>scaleBlock(s,e)):o._content)}const theme=Facet.define({combine:o=>o.join(" ")}),darkTheme=Facet.define({combine:o=>o.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(o,e,n){return new StyleModule(e,{finish(a){return/&/.test(a)?a.replace(/&\w*/,s=>{if(s=="&")return o;if(!n||!n[s])throw new RangeError(`Unsupported selector: ${s}`);return n[s]}):o+" "+a}})}const baseTheme$1$1=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let a of n)this.queue.push(a);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&n.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(e),e.state.facet(editable)&&(e.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,a)=>n!=e[a]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:a}=this,s=this.selectionRange;if(a.state.facet(editable)?a.root.activeElement!=this.dom:!hasSelection(this.dom,s))return;let l=s.anchorNode&&a.docView.nearest(s.anchorNode);if(l&&l.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!a.state.selection.main.empty&&s.focusNode&&isEquivalentPosition(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=getSelection$1(e.root);if(!n)return!1;let a=browser.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,n)||n;if(!a||this.selectionRange.eq(a))return!1;let s=hasSelection(this.dom,a);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,a)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(a),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let a=this.dom;a;)if(a.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==a?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(a),a=a.assignedSlot||a.parentNode;else if(a.nodeType==11)a=a.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);for(let a of this.scrollTargets=n)a.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var a;if(!this.delayedAndroidKey){let s=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&dispatchKey(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((a=this.delayedAndroidKey)===null||a===void 0)&&a.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,a=-1,s=!1;for(let l of e){let c=this.readMutation(l);c&&(c.typeOver&&(s=!0),n==-1?{from:n,to:a}=c:(n=Math.min(c.from,n),a=Math.max(c.to,a)))}return{from:n,to:a,typeOver:s}}readChange(){let{from:e,to:n,typeOver:a}=this.processRecords(),s=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new DOMChange(this.view,e,n,a);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let a=this.view.state,s=applyDOMChange(this.view,n);return this.view.state==a&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let a=findChild(n,e.previousSibling||e.target.previousSibling,-1),s=findChild(n,e.nextSibling||e.target.nextSibling,1);return{from:a?n.posAfter(a):n.posAtStart,to:s?n.posBefore(s):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(editable)!=e.state.facet(editable)&&(e.view.contentDOM.editContext=e.state.facet(editable)?this.editContext.editContext:null))}destroy(){var e,n,a;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(a=this.resizeScroll)===null||a===void 0||a.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(o,e,n){for(;e;){let a=ContentView.get(e);if(a&&a.parent==o)return a;let s=e.parentNode;e=s!=o.dom?s:n>0?e.nextSibling:e.previousSibling}return null}function buildSelectionRangeFromRange(o,e){let n=e.startContainer,a=e.startOffset,s=e.endContainer,l=e.endOffset,c=o.docView.domAtPos(o.state.selection.main.anchor);return isEquivalentPosition(c.node,c.offset,s,l)&&([n,a,s,l]=[s,l,n,a]),{anchorNode:n,anchorOffset:a,focusNode:s,focusOffset:l}}function safariSelectionRangeHack(o,e){if(e.getComposedRanges){let s=e.getComposedRanges(o.root)[0];if(s)return buildSelectionRangeFromRange(o,s)}let n=null;function a(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return o.contentDOM.addEventListener("beforeinput",a,!0),o.dom.ownerDocument.execCommand("indent"),o.contentDOM.removeEventListener("beforeinput",a,!0),n?buildSelectionRangeFromRange(o,n):null}class EditContextManager{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=a=>{let{anchor:s}=e.state.selection.main,l=this.toEditorPos(a.updateRangeStart),c=this.toEditorPos(a.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:a.updateRangeStart,editorBase:l,drifted:!1});let d={from:l,to:c,insert:Text.of(a.text.split(`
`))};if(d.from==this.from&&s<this.from?d.from=s:d.to==this.to&&s>this.to&&(d.to=s),!(d.from==d.to&&!d.insert.length)){if(this.pendingContextChange=d,!e.state.readOnly){let u=this.to-this.from+(d.to-d.from+d.insert.length);applyDOMChangeInner(e,d,EditorSelection.single(this.toEditorPos(a.selectionStart,u),this.toEditorPos(a.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))}},this.handlers.characterboundsupdate=a=>{let s=[],l=null;for(let c=this.toEditorPos(a.rangeStart),d=this.toEditorPos(a.rangeEnd);c<d;c++){let u=e.coordsForChar(c);l=u&&new DOMRect(u.left,u.top,u.right-u.left,u.bottom-u.top)||l||new DOMRect,s.push(l)}n.updateCharacterBounds(a.rangeStart,s)},this.handlers.textformatupdate=a=>{let s=[];for(let l of a.getTextFormats()){let c=l.underlineStyle,d=l.underlineThickness;if(c!="None"&&d!="None"){let u=this.toEditorPos(l.rangeStart),f=this.toEditorPos(l.rangeEnd);if(u<f){let p=`text-decoration: underline ${c=="Dashed"?"dashed ":c=="Squiggle"?"wavy ":""}${d=="Thin"?1:2}px`;s.push(Decoration.mark({attributes:{style:p}}).range(u,f))}}}e.dispatch({effects:setEditContextFormatting.of(Decoration.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:a}=this.composing;this.composing=null,a&&this.reset(e.state)}};for(let a in this.handlers)n.addEventListener(a,this.handlers[a]);this.measureReq={read:a=>{this.editContext.updateControlBounds(a.contentDOM.getBoundingClientRect());let s=getSelection$1(a.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,a=!1,s=this.pendingContextChange;return e.changes.iterChanges((l,c,d,u,f)=>{if(a)return;let p=f.length-(c-l);if(s&&c>=s.to)if(s.from==l&&s.to==c&&s.insert.eq(f)){s=this.pendingContextChange=null,n+=p,this.to+=p;return}else s=null,this.revertPending(e.state);if(l+=n,c+=n,c<=this.from)this.from+=p,this.to+=p;else if(l<this.to){if(l<this.from||c>this.to||this.to-this.from+f.length>3e4){a=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(c),f.toString()),this.to+=p}n+=p}),s&&!a&&this.revertPending(e.state),!a}update(e){let n=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(a=>!a.isUserEvent("input.type")&&a.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,a=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),s=this.toContextPos(n.head);(this.editContext.selectionStart!=a||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(a,s)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let a=this.composing;return a&&a.drifted?a.editorBase+(e-a.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}EditorView=class{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:a}=e;this.dispatchTransactions=e.dispatchTransactions||a&&(s=>s.forEach(l=>a(l,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||getRoot(e.parent)||document,this.viewState=new ViewState(e.state||EditorState.create(e)),e.scrollTo&&e.scrollTo.is(scrollIntoView)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(s=>new PluginInstance(s));for(let s of this.plugins)s.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Transaction?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,a=!1,s,l=this.state;for(let b of e){if(b.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=b.state}if(this.destroyed){this.viewState.state=l;return}let c=this.hasFocus,d=0,u=null;e.some(b=>b.annotation(isFocusChange))?(this.inputState.notifiedFocused=c,d=1):c!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=c,u=focusChangeTransaction(l,c),u||(d=1));let f=this.observer.delayedAndroidKey,p=null;if(f?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(p=null)):this.observer.clear(),l.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(l);s=ViewUpdate.create(this,l,e),s.flags|=d;let _=this.viewState.scrollTarget;try{this.updateState=2;for(let b of e){if(_&&(_=_.map(b.changes)),b.scrollIntoView){let{main:v}=b.state.selection;_=new ScrollTarget(v.empty?v:EditorSelection.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of b.effects)v.is(scrollIntoView)&&(_=v.value.clip(this.state))}this.viewState.update(s,_),this.bidiCache=CachedOrder.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),n=this.docView.update(s),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),a=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(b=>b.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(theme)!=s.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(n||a||_||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!s.empty)for(let b of this.state.facet(updateListener))try{b(s)}catch(v){logException(this.state,v,"update listener")}(u||p)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),p&&!applyDOMChange(this,p)&&f.force&&dispatchKey(this.contentDOM,f.key,f.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let a of this.plugins)a.destroy(this);this.viewState=new ViewState(e),this.plugins=e.facet(viewPlugin).map(a=>new PluginInstance(a)),this.pluginMap.clear();for(let a of this.plugins)a.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(viewPlugin),a=e.state.facet(viewPlugin);if(n!=a){let s=[];for(let l of a){let c=n.indexOf(l);if(c<0)s.push(new PluginInstance(l));else{let d=this.plugins[c];d.mustUpdate=e,s.push(d)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);n!=a&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(a){logException(this.state,a,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,a=this.scrollDOM,s=a.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:c}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(c=-1),this.viewState.scrollAnchorHeight=-1;try{for(let d=0;;d++){if(c<0)if(isScrolledToBottom(a))l=-1,c=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(s);l=v.from,c=v.top}this.updateState=1;let u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(d>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];u&4||([this.measureRequests,f]=[f,this.measureRequests]);let p=f.map(v=>{try{return v.read(this)}catch(k){return logException(this.state,k),BadMeasure}}),_=ViewUpdate.create(this,this.state,[]),b=!1;_.flags|=u,n?n.flags|=u:n=_,this.updateState=2,_.empty||(this.updatePlugins(_),this.inputState.update(_),this.updateAttrs(),b=this.docView.update(_),b&&this.docViewUpdate());for(let v=0;v<f.length;v++)if(p[v]!=BadMeasure)try{let k=f[v];k.write&&k.write(p[v],this)}catch(k){logException(this.state,k)}if(b&&this.docView.updateSelection(!0),!_.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,c=-1;continue}else{let k=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-c;if(k>1||k<-1){s=s+k,a.scrollTop=s/this.scaleY,c=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let d of this.state.facet(updateListener))d(n)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let e=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,n);let a=this.observer.ignore(()=>{let s=updateAttrs(this.contentDOM,this.contentAttrs,n),l=updateAttrs(this.dom,this.editorAttrs,e);return s||l});return this.editorAttrs=e,this.contentAttrs=n,a}showAnnouncements(e){let n=!0;for(let a of e)for(let s of a.effects)if(s.is(EditorView.announce)){n&&(this.announceDOM.textContent=""),n=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let e=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$1).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(a=>a.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,a){return skipAtoms(this,e,moveByChar(this,e,n,a))}moveByGroup(e,n){return skipAtoms(this,e,moveByChar(this,e,n,a=>byGroup(this,e.head,a)))}visualLineSide(e,n){let a=this.bidiSpans(e),s=this.textDirectionAt(e.from),l=a[n?a.length-1:0];return EditorSelection.cursor(l.side(n,s)+e.from,l.forward(!n,s)?1:-1)}moveToLineBoundary(e,n,a=!0){return moveToLineBoundary(this,e,n,a)}moveVertically(e,n,a){return skipAtoms(this,e,moveVertically(this,e,n,a))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),posAtCoords(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let a=this.docView.coordsAt(e,n);if(!a||a.left==a.right)return a;let s=this.state.doc.lineAt(e),l=this.bidiSpans(s),c=l[BidiSpan.find(l,e-s.from,-1,n)];return flattenRect(a,c.dir==Direction.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(perLineTextDirection)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>MaxBidiLine)return trivialOrder(e.length);let n=this.textDirectionAt(e.from),a;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==n&&(l.fresh||isolatesEq(l.isolates,a=getIsolatedRanges(this,e))))return l.order;a||(a=getIsolatedRanges(this,e));let s=computeOrder(e.text,n,a);return this.bidiCache.push(new CachedOrder(e.from,e.to,n,a,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return scrollIntoView.of(new ScrollTarget(typeof e=="number"?EditorSelection.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,a=this.viewState.scrollAnchorAt(e);return scrollIntoView.of(new ScrollTarget(EditorSelection.cursor(a.from),"start","start",a.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ViewPlugin.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ViewPlugin.define(()=>({}),{eventObservers:e})}static theme(e,n){let a=StyleModule.newName(),s=[theme.of(a),styleModule.of(buildTheme(`.${a}`,e))];return n&&n.dark&&s.push(darkTheme.of(!0)),s}static baseTheme(e){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,e,lightDarkIDs)))}static findFromDOM(e){var n;let a=e.querySelector(".cm-content"),s=a&&ContentView.get(a)||ContentView.get(e);return((n=s?.rootView)===null||n===void 0?void 0:n.view)||null}};EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.clipboardInputFilter=clipboardInputFilter;EditorView.clipboardOutputFilter=clipboardOutputFilter;EditorView.scrollHandler=scrollHandler;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:o=>o.length?o[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,n,a,s,l,c){this.from=e,this.to=n,this.dir=a,this.isolates=s,this.fresh=l,this.order=c}static update(e,n){if(n.empty&&!e.some(l=>l.fresh))return e;let a=[],s=e.length?e[e.length-1].dir:Direction.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let c=e[l];c.dir==s&&!n.touchesRange(c.from,c.to)&&a.push(new CachedOrder(n.mapPos(c.from,1),n.mapPos(c.to,-1),c.dir,c.isolates,!1,c.order))}return a}}function attrsFromFacet(o,e,n){for(let a=o.state.facet(e),s=a.length-1;s>=0;s--){let l=a[s],c=typeof l=="function"?l(o):l;c&&combineAttrs(c,n)}return n}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName$1(o,e){const n=o.split(/-(?!$)/);let a=n[n.length-1];a=="Space"&&(a=" ");let s,l,c,d;for(let u=0;u<n.length-1;++u){const f=n[u];if(/^(cmd|meta|m)$/i.test(f))d=!0;else if(/^a(lt)?$/i.test(f))s=!0;else if(/^(c|ctrl|control)$/i.test(f))l=!0;else if(/^s(hift)?$/i.test(f))c=!0;else if(/^mod$/i.test(f))e=="mac"?d=!0:l=!0;else throw new Error("Unrecognized modifier name: "+f)}return s&&(a="Alt-"+a),l&&(a="Ctrl-"+a),d&&(a="Meta-"+a),c&&(a="Shift-"+a),a}function modifiers$1(o,e,n){return e.altKey&&(o="Alt-"+o),e.ctrlKey&&(o="Ctrl-"+o),e.metaKey&&(o="Meta-"+o),n!==!1&&e.shiftKey&&(o="Shift-"+o),o}let handleKeyEvents,Keymaps;handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(o,e){return runHandlers(getKeymap(e.state),o,e,"editor")}}));keymap=Facet.define({enables:handleKeyEvents});Keymaps=new WeakMap;function getKeymap(o){let e=o.facet(keymap),n=Keymaps.get(e);return n||Keymaps.set(e,n=buildKeymap(e.reduce((a,s)=>a.concat(s),[]))),n}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(o,e=currentPlatform){let n=Object.create(null),a=Object.create(null),s=(c,d)=>{let u=a[c];if(u==null)a[c]=d;else if(u!=d)throw new Error("Key binding "+c+" is used both as a regular binding and as a multi-stroke prefix")},l=(c,d,u,f,p)=>{var _,b;let v=n[c]||(n[c]=Object.create(null)),k=d.split(/ (?!$)/).map(E=>normalizeKeyName$1(E,e));for(let E=1;E<k.length;E++){let L=k.slice(0,E).join(" ");s(L,!0),v[L]||(v[L]={preventDefault:!0,stopPropagation:!1,run:[V=>{let B=storedPrefix={view:V,prefix:L,scope:c};return setTimeout(()=>{storedPrefix==B&&(storedPrefix=null)},PrefixTimeout),!0}]})}let x=k.join(" ");s(x,!1);let M=v[x]||(v[x]={preventDefault:!1,stopPropagation:!1,run:((b=(_=v._any)===null||_===void 0?void 0:_.run)===null||b===void 0?void 0:b.slice())||[]});u&&M.run.push(u),f&&(M.preventDefault=!0),p&&(M.stopPropagation=!0)};for(let c of o){let d=c.scope?c.scope.split(" "):["editor"];if(c.any)for(let f of d){let p=n[f]||(n[f]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:_}=c;for(let b in p)p[b].run.push(v=>_(v,currentKeyEvent))}let u=c[e]||c.key;if(u)for(let f of d)l(f,u,c.run,c.preventDefault,c.stopPropagation),c.shift&&l(f,"Shift-"+u,c.shift,c.preventDefault,c.stopPropagation)}return n}let currentKeyEvent=null;function runHandlers(o,e,n,a){currentKeyEvent=e;let s=keyName(e),l=codePointAt(s,0),c=codePointSize(l)==s.length&&s!=" ",d="",u=!1,f=!1,p=!1;storedPrefix&&storedPrefix.view==n&&storedPrefix.scope==a&&(d=storedPrefix.prefix+" ",modifierCodes.indexOf(e.keyCode)<0&&(f=!0,storedPrefix=null));let _=new Set,b=M=>{if(M){for(let E of M.run)if(!_.has(E)&&(_.add(E),E(n)))return M.stopPropagation&&(p=!0),!0;M.preventDefault&&(M.stopPropagation&&(p=!0),f=!0)}return!1},v=o[a],k,x;return v&&(b(v[d+modifiers$1(s,e,!c)])?u=!0:c&&(e.altKey||e.metaKey||e.ctrlKey)&&!(browser.windows&&e.ctrlKey&&e.altKey)&&(k=base[e.keyCode])&&k!=s?(b(v[d+modifiers$1(k,e,!0)])||e.shiftKey&&(x=shift$2[e.keyCode])!=s&&x!=k&&b(v[d+modifiers$1(x,e,!1)]))&&(u=!0):c&&e.shiftKey&&b(v[d+modifiers$1(s,e,!0)])&&(u=!0),!u&&b(v._any)&&(u=!0)),f&&(u=!0),u&&p&&e.stopPropagation(),currentKeyEvent=null,u}class RectangleMarker{constructor(e,n,a,s,l){this.className=e,this.left=n,this.top=a,this.width=s,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,a){if(a.empty){let s=e.coordsAtPos(a.head,a.assoc||1);if(!s)return[];let l=getBase(e);return[new RectangleMarker(n,s.left-l.left,s.top-l.top,null,s.bottom-s.top)]}else return rectanglesForRange(e,n,a)}}function getBase(o){let e=o.scrollDOM.getBoundingClientRect();return{left:(o.textDirection==Direction.LTR?e.left:e.right-o.scrollDOM.clientWidth*o.scaleX)-o.scrollDOM.scrollLeft*o.scaleX,top:e.top-o.scrollDOM.scrollTop*o.scaleY}}function wrappedLine(o,e,n,a){let s=o.coordsAtPos(e,n*2);if(!s)return a;let l=o.dom.getBoundingClientRect(),c=(s.top+s.bottom)/2,d=o.posAtCoords({x:l.left+1,y:c}),u=o.posAtCoords({x:l.right-1,y:c});return d==null||u==null?a:{from:Math.max(a.from,Math.min(d,u)),to:Math.min(a.to,Math.max(d,u))}}function rectanglesForRange(o,e,n){if(n.to<=o.viewport.from||n.from>=o.viewport.to)return[];let a=Math.max(n.from,o.viewport.from),s=Math.min(n.to,o.viewport.to),l=o.textDirection==Direction.LTR,c=o.contentDOM,d=c.getBoundingClientRect(),u=getBase(o),f=c.querySelector(".cm-line"),p=f&&window.getComputedStyle(f),_=d.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),b=d.right-(p?parseInt(p.paddingRight):0),v=blockAt(o,a),k=blockAt(o,s),x=v.type==BlockType.Text?v:null,M=k.type==BlockType.Text?k:null;if(x&&(o.lineWrapping||v.widgetLineBreaks)&&(x=wrappedLine(o,a,1,x)),M&&(o.lineWrapping||k.widgetLineBreaks)&&(M=wrappedLine(o,s,-1,M)),x&&M&&x.from==M.from&&x.to==M.to)return L(V(n.from,n.to,x));{let F=x?V(n.from,null,x):B(v,!1),j=M?V(null,n.to,M):B(k,!0),I=[];return(x||v).to<(M||k).from-(x&&M?1:0)||v.widgetLineBreaks>1&&F.bottom+o.defaultLineHeight/2<j.top?I.push(E(_,F.bottom,b,j.top)):F.bottom<j.top&&o.elementAtHeight((F.bottom+j.top)/2).type==BlockType.Text&&(F.bottom=j.top=(F.bottom+j.top)/2),L(F).concat(I).concat(L(j))}function E(F,j,I,U){return new RectangleMarker(e,F-u.left,j-u.top,I-F,U-j)}function L({top:F,bottom:j,horizontal:I}){let U=[];for(let W=0;W<I.length;W+=2)U.push(E(I[W],F,I[W+1],j));return U}function V(F,j,I){let U=1e9,W=-1e9,K=[];function G(Y,se,le,ce,de){let ge=o.coordsAtPos(Y,Y==I.to?-2:2),qe=o.coordsAtPos(le,le==I.from?2:-2);!ge||!qe||(U=Math.min(ge.top,qe.top,U),W=Math.max(ge.bottom,qe.bottom,W),de==Direction.LTR?K.push(l&&se?_:ge.left,l&&ce?b:qe.right):K.push(!l&&ce?_:qe.left,!l&&se?b:ge.right))}let Z=F??I.from,oe=j??I.to;for(let Y of o.visibleRanges)if(Y.to>Z&&Y.from<oe)for(let se=Math.max(Y.from,Z),le=Math.min(Y.to,oe);;){let ce=o.state.doc.lineAt(se);for(let de of o.bidiSpans(ce)){let ge=de.from+ce.from,qe=de.to+ce.from;if(ge>=le)break;qe>se&&G(Math.max(ge,se),F==null&&ge<=Z,Math.min(qe,le),j==null&&qe>=oe,de.dir)}if(se=ce.to+1,se>=le)break}return K.length==0&&G(Z,F==null,oe,j==null,o.textDirection),{top:U,bottom:W,horizontal:K}}function B(F,j){let I=d.top+(j?F.top:F.bottom);return{top:I,bottom:I,horizontal:[]}}}function sameMarker(o,e){return o.constructor==e.constructor&&o.eq(e)}class LayerView{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(layerOrder)!=e.state.facet(layerOrder)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,a=e.facet(layerOrder);for(;n<a.length&&a[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,a)=>!sameMarker(n,this.drawn[a]))){let n=this.dom.firstChild,a=0;for(let s of e)s.update&&n&&s.constructor&&this.drawn[a].constructor&&s.update(n,this.drawn[a])?(n=n.nextSibling,a++):this.dom.insertBefore(s.draw(),n);for(;n;){let s=n.nextSibling;n.remove(),n=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(o){return[ViewPlugin.define(e=>new LayerView(e,o)),layerOrder.of(o)]}const CanHidePrimary=!(browser.ios&&browser.webkit&&browser.webkit_version<534),selectionConfig=Facet.define({combine(o){return combineConfig(o,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function drawSelection(o={}){return[selectionConfig.of(o),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(o){return o.startState.facet(selectionConfig)!=o.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(o){let{state:e}=o,n=e.facet(selectionConfig),a=[];for(let s of e.selection.ranges){let l=s==e.selection.main;if(s.empty?!l||CanHidePrimary:n.drawRangeCursor){let c=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",d=s.empty?s:EditorSelection.cursor(s.head,s.head>s.anchor?-1:1);for(let u of RectangleMarker.forRange(o,c,d))a.push(u)}}return a},update(o,e){o.transactions.some(a=>a.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=configChanged(o);return n&&setBlinkRate(o.state,e),o.docChanged||o.selectionSet||n},mount(o,e){setBlinkRate(e.state,o)},class:"cm-cursorLayer"});function setBlinkRate(o,e){e.style.animationDuration=o.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(o){return o.state.selection.ranges.map(e=>e.empty?[]:RectangleMarker.forRange(o,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(o,e){return o.docChanged||o.selectionSet||o.viewportChanged||configChanged(o)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor=themeSpec[".cm-content"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec));function iterMatches(o,e,n,a,s){e.lastIndex=0;for(let l=o.iterRange(n,a),c=n,d;!l.next().done;c+=l.value.length)if(!l.lineBreak)for(;d=e.exec(l.value);)s(c+d.index,d)}function matchRanges(o,e){let n=o.visibleRanges;if(n.length==1&&n[0].from==o.viewport.from&&n[0].to==o.viewport.to)return n;let a=[];for(let{from:s,to:l}of n)s=Math.max(o.state.doc.lineAt(s).from,s-e),l=Math.min(o.state.doc.lineAt(l).to,l+e),a.length&&a[a.length-1].to>=s?a[a.length-1].to=l:a.push({from:s,to:l});return a}class MatchDecorator{constructor(e){const{regexp:n,decoration:a,decorate:s,boundary:l,maxLength:c=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,s)this.addMatch=(d,u,f,p)=>s(p,f,f+d[0].length,d,u);else if(typeof a=="function")this.addMatch=(d,u,f,p)=>{let _=a(d,u,f);_&&p(f,f+d[0].length,_)};else if(a)this.addMatch=(d,u,f,p)=>p(f,f+d[0].length,a);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=l,this.maxLength=c}createDeco(e){let n=new RangeSetBuilder,a=n.add.bind(n);for(let{from:s,to:l}of matchRanges(e,this.maxLength))iterMatches(e.state.doc,this.regexp,s,l,(c,d)=>this.addMatch(d,e,c,a));return n.finish()}updateDeco(e,n){let a=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((l,c,d,u)=>{u>=e.view.viewport.from&&d<=e.view.viewport.to&&(a=Math.min(d,a),s=Math.max(u,s))}),e.viewportMoved||s-a>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,n.map(e.changes),a,s):n}updateRange(e,n,a,s){for(let l of e.visibleRanges){let c=Math.max(l.from,a),d=Math.min(l.to,s);if(d>c){let u=e.state.doc.lineAt(c),f=u.to<d?e.state.doc.lineAt(d):u,p=Math.max(l.from,u.from),_=Math.min(l.to,f.to);if(this.boundary){for(;c>u.from;c--)if(this.boundary.test(u.text[c-1-u.from])){p=c;break}for(;d<f.to;d++)if(this.boundary.test(f.text[d-f.from])){_=d;break}}let b=[],v,k=(x,M,E)=>b.push(E.range(x,M));if(u==f)for(this.regexp.lastIndex=p-u.from;(v=this.regexp.exec(u.text))&&v.index<_-u.from;)this.addMatch(v,e,v.index+u.from,k);else iterMatches(e.state.doc,this.regexp,p,_,(x,M)=>this.addMatch(M,e,x,k));n=n.update({filterFrom:p,filterTo:_,filter:(x,M)=>x<p||M>_,add:b})}}return n}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
-\x7f-\x9f\xad؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var o;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let e=document.body.style;_supportsTabSize=((o=e.tabSize)!==null&&o!==void 0?o:e.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(o){let e=combineConfig(o,{render:null,specialChars:Specials,addSpecialChars:null});return(e.replaceTabs=!supportsTabSize())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,UnicodeRegexpSupport)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,UnicodeRegexpSupport)),e}});function highlightSpecialChars(o={}){return[specialCharConfig.of(o),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(o.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(o)}makeDecorator(o){return new MatchDecorator({regexp:o.specialChars,decoration:(e,n,a)=>{let{doc:s}=n.state,l=codePointAt(e[0],0);if(l==9){let c=s.lineAt(a),d=n.state.tabSize,u=countColumn(c.text,d,a-c.from);return Decoration.replace({widget:new TabWidget((d-u%d)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[l]||(this.decorationCache[l]=Decoration.replace({widget:new SpecialCharWidget(o,l)}))},boundary:o.replaceTabs?void 0:/[^]/})}update(o){let e=o.state.facet(specialCharConfig);o.startState.facet(specialCharConfig)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(o.view)):this.decorations=this.decorator.updateDeco(o,this.decorations)}},{decorations:o=>o.decorations}))}const DefaultPlaceholder="•";function placeholder$1(o){return o>=32?DefaultPlaceholder:o==10?"␤":String.fromCharCode(9216+o)}class SpecialCharWidget extends WidgetType{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=placeholder$1(this.code),a=e.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,a,n);if(s)return s;let l=document.createElement("span");return l.textContent=n,l.title=a,l.setAttribute("aria-label",a),l.className="cm-specialChar",l}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;function createUndoManager(o){const{createBlockTransaction:e}=o,n=useEventBus(),a=shallowReactive([]),s=shallowReactive([]);let l=0;const c=()=>{s.length=0,a.length=0,l=0},d=()=>{const p=a.length;s.push(p)};return n.on("afterBlocksTrCommit",([p])=>{!p.meta.isUndoRedo&&p.meta.canUndo&&(a.length=l,a.push(p),l=a.length,p.meta.autoAddUndoPoint&&d()),(!p.meta.canUndo||p.origin.type!=="ui")&&c()}),{undo:()=>{const p=s[s.length-1];l>p&&s.push(l);const _=s.indexOf(l);if(_==-1||_==0)return;const b=s[_-1],v=[...a.slice(b,l)];v.reverse(),document.activeElement?.blur();const k=e({type:"ui"}).setMeta("isUndoRedo",!0);for(const B of v)k.addReverseTransaction(B);k.commit();const x=v[0].meta.envUndoStrategy==="beforeCommit"?v[0].envInfo.beforeCommit:v[0].envInfo.onCreate,{rootBlockId:M,focusedTreeId:E,focusedItemId:L,selection:V}=x??{};setTimeout(()=>{try{if(o.mainRootBlockId.value=M??null,E){const B=o.getBlockTree(E);if(B&&L&&(B.focusDi(L),V!=null)){const F=B.getEditorView(L);if(F instanceof EditorView$1){const j=Selection.fromJSON(F.state.doc,V),I=F.state.tr.setSelection(j);F.dispatch(I)}else if(F instanceof EditorView){const j=EditorSelection.fromJSON(V);F.dispatch({selection:j})}}}}catch{}}),l=b},redo:()=>{const p=s.indexOf(l);if(p==-1)return;if(p==s.length-1){console.warn("Already reached the last state, cannot redo");return}const _=s[p+1],b=[...a.slice(l,_)];document.activeElement?.blur();const v=e({type:"ui"}).setMeta("isUndoRedo",!0);for(const V of b)v.addTransaction(V);v.commit();const k=b[0].meta.envUndoStrategy==="beforeCommit"?b[0].envInfo.beforeCommit:b[0].envInfo.onCreate,{rootBlockId:x,focusedTreeId:M,focusedItemId:E,selection:L}=k??{};setTimeout(()=>{try{if(o.mainRootBlockId.value=x??null,M){const V=o.getBlockTree(M);if(V&&E&&(V.focusDi(E),L!=null)){const B=V.getEditorView(E);if(B instanceof EditorView$1){const F=Selection.fromJSON(B.state.doc,L),j=B.state.tr.setSelection(F);B.dispatch(j)}else if(B instanceof EditorView){const F=EditorSelection.fromJSON(L);B.dispatch({selection:F})}}}}catch{}}),l=_},addUndoPoint:d,clearUndoRedoHistory:c}}const createContext=(o,e=Symbol())=>({injectionKey:e,useContext:s=>inject(e,s),Provider:defineComponent({name:"ContextProvider",inheritAttrs:!1,setup(s,{slots:l}){const c=o(s);return provide(e,c),()=>l.default?.()}})}),DI_FILTERS={isBlockDi:o=>o.type==="basic-block"||o.type==="backlink-block"||o.type==="backlink-descendant"||o.type==="potential-links-block"||o.type==="potential-links-descendant"},BlockTreeContext=createContext(()=>{const o=new Map;return{registerBlockTree:l=>{o.set(l.getId(),l)},getBlockTree:l=>o.get(l),unregisterBlockTree:l=>{o.delete(l)}}}),LastFocusContext=createContext(()=>{const o=shallowRef(null),e=shallowRef(null);return{lastFocusedDiId:o,lastFocusedBlockTree:e}});function tryOnScopeDispose(o){return getCurrentScope()?(onScopeDispose(o),!0):!1}const localProvidedStateMap=new WeakMap,injectLocal=(...o)=>{var e;const n=o[0],a=(e=getCurrentInstance())==null?void 0:e.proxy;if(a==null&&!hasInjectionContext())throw new Error("injectLocal must be called in setup");return a&&localProvidedStateMap.has(a)&&n in localProvidedStateMap.get(a)?localProvidedStateMap.get(a)[n]:inject(...o)},isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const isDef=o=>typeof o<"u",toString$2=Object.prototype.toString,isObject$2=o=>toString$2.call(o)==="[object Object]",noop$2=()=>{};function createFilterWrapper(o,e){function n(...a){return new Promise((s,l)=>{Promise.resolve(o(()=>e.apply(this,a),{fn:e,thisArg:this,args:a})).then(s).catch(l)})}return n}const bypassFilter=o=>o();function debounceFilter(o,e={}){let n,a,s=noop$2;const l=d=>{clearTimeout(d),s(),s=noop$2};return d=>{const u=toValue$2(o),f=toValue$2(e.maxWait);return n&&l(n),u<=0||f!==void 0&&f<=0?(a&&(l(a),a=null),Promise.resolve(d())):new Promise((p,_)=>{s=e.rejectOnCancel?_:p,f&&!a&&(a=setTimeout(()=>{n&&l(n),a=null,p(d())},f)),n=setTimeout(()=>{a&&l(a),a=null,p(d())},u)})}}function throttleFilter(...o){let e=0,n,a=!0,s=noop$2,l,c,d,u,f;!isRef(o[0])&&typeof o[0]=="object"?{delay:c,trailing:d=!0,leading:u=!0,rejectOnCancel:f=!1}=o[0]:[c,d=!0,u=!0,f=!1]=o;const p=()=>{n&&(clearTimeout(n),n=void 0,s(),s=noop$2)};return b=>{const v=toValue$2(c),k=Date.now()-e,x=()=>l=b();return p(),v<=0?(e=Date.now(),x()):(k>v&&(u||!a)?(e=Date.now(),x()):d&&(l=new Promise((M,E)=>{s=f?E:M,n=setTimeout(()=>{e=Date.now(),a=!0,M(x()),p()},Math.max(0,v-k))})),!u&&!n&&(n=setTimeout(()=>a=!0,v)),a=!1,l)}}function pausableFilter(o=bypassFilter){const e=ref(!0);function n(){e.value=!1}function a(){e.value=!0}const s=(...l)=>{e.value&&o(...l)};return{isActive:readonly(e),pause:n,resume:a,eventFilter:s}}function pxValue(o){return o.endsWith("rem")?Number.parseFloat(o)*16:Number.parseFloat(o)}function getLifeCycleTarget(o){return getCurrentInstance()}function toArray$1(o){return Array.isArray(o)?o:[o]}function toRef(...o){if(o.length!==1)return toRef$1(...o);const e=o[0];return typeof e=="function"?readonly(customRef(()=>({get:e,set:noop$2}))):ref(e)}function useDebounceFn(o,e=200,n={}){return createFilterWrapper(debounceFilter(e,n),o)}function useThrottleFn(o,e=200,n=!1,a=!0,s=!1){return createFilterWrapper(throttleFilter(e,n,a,s),o)}function watchWithFilter(o,e,n={}){const{eventFilter:a=bypassFilter,...s}=n;return watch(o,createFilterWrapper(a,e),s)}function watchPausable(o,e,n={}){const{eventFilter:a,...s}=n,{eventFilter:l,pause:c,resume:d,isActive:u}=pausableFilter(a);return{stop:watchWithFilter(o,e,{...s,eventFilter:l}),pause:c,resume:d,isActive:u}}function syncRef(o,e,...[n]){const{flush:a="sync",deep:s=!1,immediate:l=!0,direction:c="both",transform:d={}}=n||{},u=[],f="ltr"in d&&d.ltr||(b=>b),p="rtl"in d&&d.rtl||(b=>b);return(c==="both"||c==="ltr")&&u.push(watchPausable(o,b=>{u.forEach(v=>v.pause()),e.value=f(b),u.forEach(v=>v.resume())},{flush:a,deep:s,immediate:l})),(c==="both"||c==="rtl")&&u.push(watchPausable(e,b=>{u.forEach(v=>v.pause()),o.value=p(b),u.forEach(v=>v.resume())},{flush:a,deep:s,immediate:l})),()=>{u.forEach(b=>b.stop())}}function tryOnMounted(o,e=!0,n){getLifeCycleTarget()?onMounted(o,n):e?o():nextTick(o)}const defaultWindow=isClient?window:void 0;function unrefElement(o){var e;const n=toValue$2(o);return(e=n?.$el)!=null?e:n}function useEventListener(...o){let e,n,a,s;if(typeof o[0]=="string"||Array.isArray(o[0])?([n,a,s]=o,e=defaultWindow):[e,n,a,s]=o,!e)return noop$2;n=toArray$1(n),a=toArray$1(a);const l=[],c=()=>{l.forEach(p=>p()),l.length=0},d=(p,_,b,v)=>(p.addEventListener(_,b,v),()=>p.removeEventListener(_,b,v)),u=watch(()=>[unrefElement(e),toValue$2(s)],([p,_])=>{if(c(),!p)return;const b=isObject$2(_)?{..._}:_;l.push(...n.flatMap(v=>a.map(k=>d(p,v,k,b))))},{immediate:!0,flush:"post"}),f=()=>{u(),c()};return tryOnScopeDispose(f),f}function useMounted(){const o=ref(!1),e=getCurrentInstance();return e&&onMounted(()=>{o.value=!0},e),o}function useSupported(o){const e=useMounted();return computed(()=>(e.value,!!o()))}const ssrWidthSymbol=Symbol("vueuse-ssr-width");function useSSRWidth(){const o=hasInjectionContext()?injectLocal(ssrWidthSymbol,null):null;return typeof o=="number"?o:void 0}function useMediaQuery(o,e={}){const{window:n=defaultWindow,ssrWidth:a=useSSRWidth()}=e,s=useSupported(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function"),l=ref(typeof a=="number");let c;const d=ref(!1),u=_=>{d.value=_.matches},f=()=>{c&&("removeEventListener"in c?c.removeEventListener("change",u):c.removeListener(u))},p=watchEffect(()=>{if(l.value){l.value=!s.value;const _=toValue$2(o).split(",");d.value=_.some(b=>{const v=b.includes("not all"),k=b.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),x=b.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let M=!!(k||x);return k&&M&&(M=a>=pxValue(k[1])),x&&M&&(M=a<=pxValue(x[1])),v?!M:M});return}s.value&&(f(),c=n.matchMedia(toValue$2(o)),"addEventListener"in c?c.addEventListener("change",u):c.addListener(u),d.value=c.matches)});return tryOnScopeDispose(()=>{p(),f(),c=void 0}),computed(()=>d.value)}function cloneFnJSON(o){return JSON.parse(JSON.stringify(o))}const _global$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers=getHandlers();function getHandlers(){return globalKey in _global$1||(_global$1[globalKey]=_global$1[globalKey]||{}),_global$1[globalKey]}function getSSRHandler(o,e){return handlers[o]||e}function usePreferredDark(o){return useMediaQuery("(prefers-color-scheme: dark)",o)}function guessSerializerType(o){return o==null?"any":o instanceof Set?"set":o instanceof Map?"map":o instanceof Date?"date":typeof o=="boolean"?"boolean":typeof o=="string"?"string":typeof o=="object"?"object":Number.isNaN(o)?"any":"number"}const StorageSerializers={boolean:{read:o=>o==="true",write:o=>String(o)},object:{read:o=>JSON.parse(o),write:o=>JSON.stringify(o)},number:{read:o=>Number.parseFloat(o),write:o=>String(o)},any:{read:o=>o,write:o=>String(o)},string:{read:o=>o,write:o=>String(o)},map:{read:o=>new Map(JSON.parse(o)),write:o=>JSON.stringify(Array.from(o.entries()))},set:{read:o=>new Set(JSON.parse(o)),write:o=>JSON.stringify(Array.from(o))},date:{read:o=>new Date(o),write:o=>o.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(o,e,n,a={}){var s;const{flush:l="pre",deep:c=!0,listenToStorageChanges:d=!0,writeDefaults:u=!0,mergeDefaults:f=!1,shallow:p,window:_=defaultWindow,eventFilter:b,onError:v=K=>{console.error(K)},initOnMounted:k}=a,x=(p?shallowRef:ref)(typeof e=="function"?e():e);if(!n)try{n=getSSRHandler("getDefaultStorage",()=>{var K;return(K=defaultWindow)==null?void 0:K.localStorage})()}catch(K){v(K)}if(!n)return x;const M=toValue$2(e),E=guessSerializerType(M),L=(s=a.serializer)!=null?s:StorageSerializers[E],{pause:V,resume:B}=watchPausable(x,()=>j(x.value),{flush:l,deep:c,eventFilter:b});_&&d&&tryOnMounted(()=>{n instanceof Storage?useEventListener(_,"storage",U):useEventListener(_,customStorageEventName,W),k&&U()}),k||U();function F(K,G){if(_){const Z={key:o,oldValue:K,newValue:G,storageArea:n};_.dispatchEvent(n instanceof Storage?new StorageEvent("storage",Z):new CustomEvent(customStorageEventName,{detail:Z}))}}function j(K){try{const G=n.getItem(o);if(K==null)F(G,null),n.removeItem(o);else{const Z=L.write(K);G!==Z&&(n.setItem(o,Z),F(G,Z))}}catch(G){v(G)}}function I(K){const G=K?K.newValue:n.getItem(o);if(G==null)return u&&M!=null&&n.setItem(o,L.write(M)),M;if(!K&&f){const Z=L.read(G);return typeof f=="function"?f(Z,M):E==="object"&&!Array.isArray(Z)?{...M,...Z}:Z}else return typeof G!="string"?G:L.read(G)}function U(K){if(!(K&&K.storageArea!==n)){if(K&&K.key==null){x.value=M;return}if(!(K&&K.key!==o)){V();try{K?.newValue!==L.write(x.value)&&(x.value=I(K))}catch(G){v(G)}finally{K?nextTick(B):B()}}}}function W(K){U(K.detail)}return x}const CSS_DISABLE_TRANS="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function useColorMode(o={}){const{selector:e="html",attribute:n="class",initialValue:a="auto",window:s=defaultWindow,storage:l,storageKey:c="vueuse-color-scheme",listenToStorageChanges:d=!0,storageRef:u,emitAuto:f,disableTransition:p=!0}=o,_={auto:"",light:"light",dark:"dark",...o.modes||{}},b=usePreferredDark({window:s}),v=computed(()=>b.value?"dark":"light"),k=u||(c==null?toRef(a):useStorage(c,a,l,{window:s,listenToStorageChanges:d})),x=computed(()=>k.value==="auto"?v.value:k.value),M=getSSRHandler("updateHTMLAttrs",(B,F,j)=>{const I=typeof B=="string"?s?.document.querySelector(B):unrefElement(B);if(!I)return;const U=new Set,W=new Set;let K=null;if(F==="class"){const Z=j.split(/\s/g);Object.values(_).flatMap(oe=>(oe||"").split(/\s/g)).filter(Boolean).forEach(oe=>{Z.includes(oe)?U.add(oe):W.add(oe)})}else K={key:F,value:j};if(U.size===0&&W.size===0&&K===null)return;let G;p&&(G=s.document.createElement("style"),G.appendChild(document.createTextNode(CSS_DISABLE_TRANS)),s.document.head.appendChild(G));for(const Z of U)I.classList.add(Z);for(const Z of W)I.classList.remove(Z);K&&I.setAttribute(K.key,K.value),p&&(s.getComputedStyle(G).opacity,document.head.removeChild(G))});function E(B){var F;M(e,n,(F=_[B])!=null?F:B)}function L(B){o.onChanged?o.onChanged(B,E):E(B)}watch(x,L,{flush:"post",immediate:!0}),tryOnMounted(()=>L(x.value));const V=computed({get(){return f?k.value:x.value},set(B){k.value=B}});return Object.assign(V,{store:k,system:v,state:x})}function useLocalStorage(o,e,n={}){const{window:a=defaultWindow}=n;return useStorage(o,e,a?.localStorage,n)}function useVModel(o,e,n,a={}){var s,l,c;const{clone:d=!1,passive:u=!1,eventName:f,deep:p=!1,defaultValue:_,shouldEmit:b}=a,v=getCurrentInstance(),k=n||v?.emit||((s=v?.$emit)==null?void 0:s.bind(v))||((c=(l=v?.proxy)==null?void 0:l.$emit)==null?void 0:c.bind(v?.proxy));let x=f;x=x||`update:${e.toString()}`;const M=V=>d?typeof d=="function"?d(V):cloneFnJSON(V):V,E=()=>isDef(o[e])?M(o[e]):_,L=V=>{b?b(V)&&k(x,V):k(x,V)};if(u){const V=E(),B=ref(V);let F=!1;return watch(()=>o[e],j=>{F||(F=!0,B.value=M(j),nextTick(()=>F=!1))}),watch(B,j=>{!F&&(j!==o[e]||p)&&L(j)},{deep:p}),B}else return computed({get(){return E()},set(V){L(V)}})}const useLocalStorage2=(o,e)=>{const n=ref(e);return watch(o,(a,s,l)=>{if(!a)return;const c=useLocalStorage(a,e),d=syncRef(n,c,{immediate:!0,direction:"rtl"}),u=syncRef(n,c,{direction:"ltr"});l(()=>{d(),u()})},{immediate:!0}),n},JwtPayloadSchema=z$1.discriminatedUnion("role",[z$1.object({role:z$1.literal("admin"),serverUrl:z$1.string()}),z$1.object({role:z$1.literal("kb-editor"),serverUrl:z$1.string(),location:z$1.string()})]);function r(o){var e,n,a="";if(typeof o=="string"||typeof o=="number")a+=o;else if(typeof o=="object")if(Array.isArray(o)){var s=o.length;for(e=0;e<s;e++)o[e]&&(n=r(o[e]))&&(a&&(a+=" "),a+=n)}else for(n in o)o[n]&&(a&&(a+=" "),a+=n);return a}function clsx(){for(var o,e,n=0,a="",s=arguments.length;n<s;n++)(o=arguments[n])&&(e=r(o))&&(a&&(a+=" "),a+=e);return a}const falsyToString=o=>typeof o=="boolean"?`${o}`:o===0?"0":o,cx=clsx,cva=(o,e)=>n=>{var a;if(e?.variants==null)return cx(o,n?.class,n?.className);const{variants:s,defaultVariants:l}=e,c=Object.keys(s).map(f=>{const p=n?.[f],_=l?.[f];if(p===null)return null;const b=falsyToString(p)||falsyToString(_);return s[f][b]}),d=n&&Object.entries(n).reduce((f,p)=>{let[_,b]=p;return b===void 0||(f[_]=b),f},{}),u=e==null||(a=e.compoundVariants)===null||a===void 0?void 0:a.reduce((f,p)=>{let{class:_,className:b,...v}=p;return Object.entries(v).every(k=>{let[x,M]=k;return Array.isArray(M)?M.includes({...l,...d}[x]):{...l,...d}[x]===M})?[...f,_,b]:f},[]);return cx(o,c,u,n?.class,n?.className)},CLASS_PART_SEPARATOR="-",createClassGroupUtils=o=>{const e=createClassMap(o),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=o;return{getClassGroupId:c=>{const d=c.split(CLASS_PART_SEPARATOR);return d[0]===""&&d.length!==1&&d.shift(),getGroupRecursive(d,e)||getGroupIdForArbitraryProperty(c)},getConflictingClassGroupIds:(c,d)=>{const u=n[c]||[];return d&&a[c]?[...u,...a[c]]:u}}},getGroupRecursive=(o,e)=>{if(o.length===0)return e.classGroupId;const n=o[0],a=e.nextPart.get(n),s=a?getGroupRecursive(o.slice(1),a):void 0;if(s)return s;if(e.validators.length===0)return;const l=o.join(CLASS_PART_SEPARATOR);return e.validators.find(({validator:c})=>c(l))?.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=o=>{if(arbitraryPropertyRegex.test(o)){const e=arbitraryPropertyRegex.exec(o)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},createClassMap=o=>{const{theme:e,prefix:n}=o,a={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(o.classGroups),n).forEach(([l,c])=>{processClassesRecursively(c,a,l,e)}),a},processClassesRecursively=(o,e,n,a)=>{o.forEach(s=>{if(typeof s=="string"){const l=s===""?e:getPart(e,s);l.classGroupId=n;return}if(typeof s=="function"){if(isThemeGetter(s)){processClassesRecursively(s(a),e,n,a);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([l,c])=>{processClassesRecursively(c,getPart(e,l),n,a)})})},getPart=(o,e)=>{let n=o;return e.split(CLASS_PART_SEPARATOR).forEach(a=>{n.nextPart.has(a)||n.nextPart.set(a,{nextPart:new Map,validators:[]}),n=n.nextPart.get(a)}),n},isThemeGetter=o=>o.isThemeGetter,getPrefixedClassGroupEntries=(o,e)=>e?o.map(([n,a])=>{const s=a.map(l=>typeof l=="string"?e+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([c,d])=>[e+c,d])):l);return[n,s]}):o,createLruCache=o=>{if(o<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,a=new Map;const s=(l,c)=>{n.set(l,c),e++,e>o&&(e=0,a=n,n=new Map)};return{get(l){let c=n.get(l);if(c!==void 0)return c;if((c=a.get(l))!==void 0)return s(l,c),c},set(l,c){n.has(l)?n.set(l,c):s(l,c)}}},IMPORTANT_MODIFIER="!",createParseClassName=o=>{const{separator:e,experimentalParseClassName:n}=o,a=e.length===1,s=e[0],l=e.length,c=d=>{const u=[];let f=0,p=0,_;for(let M=0;M<d.length;M++){let E=d[M];if(f===0){if(E===s&&(a||d.slice(M,M+l)===e)){u.push(d.slice(p,M)),p=M+l;continue}if(E==="/"){_=M;continue}}E==="["?f++:E==="]"&&f--}const b=u.length===0?d:d.substring(p),v=b.startsWith(IMPORTANT_MODIFIER),k=v?b.substring(1):b,x=_&&_>p?_-p:void 0;return{modifiers:u,hasImportantModifier:v,baseClassName:k,maybePostfixModifierPosition:x}};return n?d=>n({className:d,parseClassName:c}):c},sortModifiers=o=>{if(o.length<=1)return o;const e=[];let n=[];return o.forEach(a=>{a[0]==="["?(e.push(...n.sort(),a),n=[]):n.push(a)}),e.push(...n.sort()),e},createConfigUtils=o=>({cache:createLruCache(o.cacheSize),parseClassName:createParseClassName(o),...createClassGroupUtils(o)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(o,e)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:s}=e,l=[],c=o.trim().split(SPLIT_CLASSES_REGEX);let d="";for(let u=c.length-1;u>=0;u-=1){const f=c[u],{modifiers:p,hasImportantModifier:_,baseClassName:b,maybePostfixModifierPosition:v}=n(f);let k=!!v,x=a(k?b.substring(0,v):b);if(!x){if(!k){d=f+(d.length>0?" "+d:d);continue}if(x=a(b),!x){d=f+(d.length>0?" "+d:d);continue}k=!1}const M=sortModifiers(p).join(":"),E=_?M+IMPORTANT_MODIFIER:M,L=E+x;if(l.includes(L))continue;l.push(L);const V=s(x,k);for(let B=0;B<V.length;++B){const F=V[B];l.push(E+F)}d=f+(d.length>0?" "+d:d)}return d};function twJoin(){let o=0,e,n,a="";for(;o<arguments.length;)(e=arguments[o++])&&(n=toValue$1(e))&&(a&&(a+=" "),a+=n);return a}const toValue$1=o=>{if(typeof o=="string")return o;let e,n="";for(let a=0;a<o.length;a++)o[a]&&(e=toValue$1(o[a]))&&(n&&(n+=" "),n+=e);return n};function createTailwindMerge(o,...e){let n,a,s,l=c;function c(u){const f=e.reduce((p,_)=>_(p),o());return n=createConfigUtils(f),a=n.cache.get,s=n.cache.set,l=d,d(u)}function d(u){const f=a(u);if(f)return f;const p=mergeClassList(u,n);return s(u,p),p}return function(){return l(twJoin.apply(null,arguments))}}const fromTheme=o=>{const e=n=>n[o]||[];return e.isThemeGetter=!0,e},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength=o=>isNumber$2(o)||stringLengths.has(o)||fractionRegex.test(o),isArbitraryLength=o=>getIsArbitraryValue(o,"length",isLengthOnly),isNumber$2=o=>!!o&&!Number.isNaN(Number(o)),isArbitraryNumber=o=>getIsArbitraryValue(o,"number",isNumber$2),isInteger=o=>!!o&&Number.isInteger(Number(o)),isPercent=o=>o.endsWith("%")&&isNumber$2(o.slice(0,-1)),isArbitraryValue=o=>arbitraryValueRegex.test(o),isTshirtSize=o=>tshirtUnitRegex.test(o),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=o=>getIsArbitraryValue(o,sizeLabels,isNever),isArbitraryPosition=o=>getIsArbitraryValue(o,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=o=>getIsArbitraryValue(o,imageLabels,isImage$1),isArbitraryShadow=o=>getIsArbitraryValue(o,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(o,e,n)=>{const a=arbitraryValueRegex.exec(o);return a?a[1]?typeof e=="string"?a[1]===e:e.has(a[1]):n(a[2]):!1},isLengthOnly=o=>lengthUnitRegex.test(o)&&!colorFunctionRegex.test(o),isNever=()=>!1,isShadow=o=>shadowRegex.test(o),isImage$1=o=>imageRegex.test(o),getDefaultConfig=()=>{const o=fromTheme("colors"),e=fromTheme("spacing"),n=fromTheme("blur"),a=fromTheme("brightness"),s=fromTheme("borderColor"),l=fromTheme("borderRadius"),c=fromTheme("borderSpacing"),d=fromTheme("borderWidth"),u=fromTheme("contrast"),f=fromTheme("grayscale"),p=fromTheme("hueRotate"),_=fromTheme("invert"),b=fromTheme("gap"),v=fromTheme("gradientColorStops"),k=fromTheme("gradientColorStopPositions"),x=fromTheme("inset"),M=fromTheme("margin"),E=fromTheme("opacity"),L=fromTheme("padding"),V=fromTheme("saturate"),B=fromTheme("scale"),F=fromTheme("sepia"),j=fromTheme("skew"),I=fromTheme("space"),U=fromTheme("translate"),W=()=>["auto","contain","none"],K=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto",isArbitraryValue,e],Z=()=>[isArbitraryValue,e],oe=()=>["",isLength,isArbitraryLength],Y=()=>["auto",isNumber$2,isArbitraryValue],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],le=()=>["solid","dashed","dotted","double","none"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],de=()=>["start","end","center","between","around","evenly","stretch"],ge=()=>["","0",isArbitraryValue],qe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ke=()=>[isNumber$2,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:ke(),borderColor:[o],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:Z(),borderWidth:oe(),contrast:ke(),grayscale:ge(),hueRotate:ke(),invert:ge(),gap:Z(),gradientColorStops:[o],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:G(),margin:G(),opacity:ke(),padding:Z(),saturate:ke(),scale:ke(),sepia:ge(),skew:ke(),space:Z(),translate:Z()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":qe()}],"break-before":[{"break-before":qe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),isArbitraryValue]}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:W()}],"overscroll-x":[{"overscroll-x":W()}],"overscroll-y":[{"overscroll-y":W()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:G()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:ge()}],shrink:[{shrink:ge()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...de()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...de(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...de(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[L]}],px:[{px:[L]}],py:[{py:[L]}],ps:[{ps:[L]}],pe:[{pe:[L]}],pt:[{pt:[L]}],pr:[{pr:[L]}],pb:[{pb:[L]}],pl:[{pl:[L]}],m:[{m:[M]}],mx:[{mx:[M]}],my:[{my:[M]}],ms:[{ms:[M]}],me:[{me:[M]}],mt:[{mt:[M]}],mr:[{mr:[M]}],mb:[{mb:[M]}],ml:[{ml:[M]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,e]}],"min-w":[{"min-w":[isArbitraryValue,e,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,e,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,e,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$2,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[o]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[o]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...le(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[o]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[o]}],"gradient-from-pos":[{from:[k]}],"gradient-via-pos":[{via:[k]}],"gradient-to-pos":[{to:[k]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...le(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:le()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...le()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[o]}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[o]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[o]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...ce(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ce()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[a]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[_]}],saturate:[{saturate:[V]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[_]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[V]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:ke()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:ke()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[B]}],"scale-x":[{"scale-x":[B]}],"scale-y":[{"scale-y":[B]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[U]}],"translate-y":[{"translate-y":[U]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",o]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[o]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Z()}],"scroll-mx":[{"scroll-mx":Z()}],"scroll-my":[{"scroll-my":Z()}],"scroll-ms":[{"scroll-ms":Z()}],"scroll-me":[{"scroll-me":Z()}],"scroll-mt":[{"scroll-mt":Z()}],"scroll-mr":[{"scroll-mr":Z()}],"scroll-mb":[{"scroll-mb":Z()}],"scroll-ml":[{"scroll-ml":Z()}],"scroll-p":[{"scroll-p":Z()}],"scroll-px":[{"scroll-px":Z()}],"scroll-py":[{"scroll-py":Z()}],"scroll-ps":[{"scroll-ps":Z()}],"scroll-pe":[{"scroll-pe":Z()}],"scroll-pt":[{"scroll-pt":Z()}],"scroll-pr":[{"scroll-pr":Z()}],"scroll-pb":[{"scroll-pb":Z()}],"scroll-pl":[{"scroll-pl":Z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[o,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[o,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...o){return twMerge(clsx(o))}function $2b4dce13dd5a17fa$export$842a2cf37af977e1(o,e){return o-e*Math.floor(o/e)}const $3b62074eb05584b2$var$EPOCH=1721426;function $3b62074eb05584b2$export$f297eb839006d339(o,e,n,a){e=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(o,e);let s=e-1,l=-2;return n<=2?l=0:$3b62074eb05584b2$export$553d7fa8e3805fc0(e)&&(l=-1),$3b62074eb05584b2$var$EPOCH-1+365*s+Math.floor(s/4)-Math.floor(s/100)+Math.floor(s/400)+Math.floor((367*n-362)/12+l+a)}function $3b62074eb05584b2$export$553d7fa8e3805fc0(o){return o%4===0&&(o%100!==0||o%400===0)}function $3b62074eb05584b2$export$c36e0ecb2d4fa69d(o,e){return o==="BC"?1-e:e}function $3b62074eb05584b2$export$4475b7e617eb123c(o){let e="AD";return o<=0&&(e="BC",o=1-o),[e,o]}const $3b62074eb05584b2$var$daysInMonth={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let n=e,a=n-$3b62074eb05584b2$var$EPOCH,s=Math.floor(a/146097),l=$2b4dce13dd5a17fa$export$842a2cf37af977e1(a,146097),c=Math.floor(l/36524),d=$2b4dce13dd5a17fa$export$842a2cf37af977e1(l,36524),u=Math.floor(d/1461),f=$2b4dce13dd5a17fa$export$842a2cf37af977e1(d,1461),p=Math.floor(f/365),_=s*400+c*100+u*4+p+(c!==4&&p!==4?1:0),[b,v]=$3b62074eb05584b2$export$4475b7e617eb123c(_),k=n-$3b62074eb05584b2$export$f297eb839006d339(b,v,1,1),x=2;n<$3b62074eb05584b2$export$f297eb839006d339(b,v,3,1)?x=0:$3b62074eb05584b2$export$553d7fa8e3805fc0(v)&&(x=1);let M=Math.floor(((k+x)*12+373)/367),E=n-$3b62074eb05584b2$export$f297eb839006d339(b,v,M,1)+1;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(b,v,M,E)}toJulianDay(e){return $3b62074eb05584b2$export$f297eb839006d339(e.era,e.year,e.month,e.day)}getDaysInMonth(e){return $3b62074eb05584b2$var$daysInMonth[$3b62074eb05584b2$export$553d7fa8e3805fc0(e.year)?"leapyear":"standard"][e.month-1]}getMonthsInYear(e){return 12}getDaysInYear(e){return $3b62074eb05584b2$export$553d7fa8e3805fc0(e.year)?366:365}getYearsInEra(e){return 9999}getEras(){return["BC","AD"]}isInverseEra(e){return e.era==="BC"}balanceDate(e){e.year<=0&&(e.era=e.era==="BC"?"AD":"BC",e.year=1-e.year)}constructor(){this.identifier="gregory"}}const $2fe286d2fb449abb$export$7a5acbd77d414bd9={"001":1,AD:1,AE:6,AF:6,AI:1,AL:1,AM:1,AN:1,AR:1,AT:1,AU:1,AX:1,AZ:1,BA:1,BE:1,BG:1,BH:6,BM:1,BN:1,BY:1,CH:1,CL:1,CM:1,CN:1,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DZ:6,EC:1,EE:1,EG:6,ES:1,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,HR:1,HU:1,IE:1,IQ:6,IR:6,IS:1,IT:1,JO:6,KG:1,KW:6,KZ:1,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MK:1,MN:1,MQ:1,MV:5,MY:1,NL:1,NO:1,NZ:1,OM:6,PL:1,QA:6,RE:1,RO:1,RS:1,RU:1,SD:6,SE:1,SI:1,SK:1,SM:1,SY:6,TJ:1,TM:1,TR:1,UA:1,UY:1,UZ:1,VA:1,VN:1,XK:1};function $14e0f24ef4ac5c92$export$ea39ec197993aef0(o,e){return e=$11d87f3f76e88657$export$b4a036af3fc0b032(e,o.calendar),o.era===e.era&&o.year===e.year&&o.month===e.month&&o.day===e.day}function $14e0f24ef4ac5c92$export$a18c89cbd24170ff(o,e){return e=$11d87f3f76e88657$export$b4a036af3fc0b032(e,o.calendar),o=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(o),e=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(e),o.era===e.era&&o.year===e.year&&o.month===e.month}function $14e0f24ef4ac5c92$export$91b62ebf2ba703ee(o,e){return o.calendar.identifier===e.calendar.identifier&&o.era===e.era&&o.year===e.year&&o.month===e.month&&o.day===e.day}function $14e0f24ef4ac5c92$export$5a8da0c44a3afdf2(o,e){return o=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(o),e=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(e),o.calendar.identifier===e.calendar.identifier&&o.era===e.era&&o.year===e.year&&o.month===e.month}function $14e0f24ef4ac5c92$export$629b0a497aa65267(o,e){return $14e0f24ef4ac5c92$export$ea39ec197993aef0(o,$14e0f24ef4ac5c92$export$d0bdf45af03a6ea3(e))}function $14e0f24ef4ac5c92$export$2061056d06d7cdf7(o,e){let n=o.calendar.toJulianDay(o),a=Math.ceil(n+1-$14e0f24ef4ac5c92$var$getWeekStart(e))%7;return a<0&&(a+=7),a}function $14e0f24ef4ac5c92$export$461939dd4422153(o){return $11d87f3f76e88657$export$1b96692a1ba042ac(Date.now(),o)}function $14e0f24ef4ac5c92$export$d0bdf45af03a6ea3(o){return $11d87f3f76e88657$export$93522d1a439f3617($14e0f24ef4ac5c92$export$461939dd4422153(o))}function $14e0f24ef4ac5c92$export$68781ddf31c0090f(o,e){return o.calendar.toJulianDay(o)-e.calendar.toJulianDay(e)}function $14e0f24ef4ac5c92$export$c19a80a9721b80f6(o,e){return $14e0f24ef4ac5c92$var$timeToMs(o)-$14e0f24ef4ac5c92$var$timeToMs(e)}function $14e0f24ef4ac5c92$var$timeToMs(o){return o.hour*36e5+o.minute*6e4+o.second*1e3+o.millisecond}let $14e0f24ef4ac5c92$var$localTimeZone=null;function $14e0f24ef4ac5c92$export$aa8b41735afcabd2(){return $14e0f24ef4ac5c92$var$localTimeZone==null&&($14e0f24ef4ac5c92$var$localTimeZone=new Intl.DateTimeFormat().resolvedOptions().timeZone),$14e0f24ef4ac5c92$var$localTimeZone}function $14e0f24ef4ac5c92$export$a5a3b454ada2268e(o){return o.subtract({days:o.day-1})}function $14e0f24ef4ac5c92$export$a2258d9c4118825c(o){return o.add({days:o.calendar.getDaysInMonth(o)-o.day})}const $14e0f24ef4ac5c92$var$cachedRegions=new Map;function $14e0f24ef4ac5c92$var$getRegion(o){if(Intl.Locale){let n=$14e0f24ef4ac5c92$var$cachedRegions.get(o);return n||(n=new Intl.Locale(o).maximize().region,n&&$14e0f24ef4ac5c92$var$cachedRegions.set(o,n)),n}let e=o.split("-")[1];return e==="u"?void 0:e}function $14e0f24ef4ac5c92$var$getWeekStart(o){let e=$14e0f24ef4ac5c92$var$getRegion(o);return e&&$2fe286d2fb449abb$export$7a5acbd77d414bd9[e]||0}function $11d87f3f76e88657$export$bd4fb2bc8bb06fb(o){o=$11d87f3f76e88657$export$b4a036af3fc0b032(o,new $3b62074eb05584b2$export$80ee6245ec4f29ec);let e=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(o.era,o.year);return $11d87f3f76e88657$var$epochFromParts(e,o.month,o.day,o.hour,o.minute,o.second,o.millisecond)}function $11d87f3f76e88657$var$epochFromParts(o,e,n,a,s,l,c){let d=new Date;return d.setUTCHours(a,s,l,c),d.setUTCFullYear(o,e-1,n),d.getTime()}function $11d87f3f76e88657$export$59c99f3515d3493f(o,e){if(e==="UTC")return 0;if(o>0&&e===$14e0f24ef4ac5c92$export$aa8b41735afcabd2())return new Date(o).getTimezoneOffset()*-6e4;let{year:n,month:a,day:s,hour:l,minute:c,second:d}=$11d87f3f76e88657$var$getTimeZoneParts(o,e);return $11d87f3f76e88657$var$epochFromParts(n,a,s,l,c,d,0)-Math.floor(o/1e3)*1e3}const $11d87f3f76e88657$var$formattersByTimeZone=new Map;function $11d87f3f76e88657$var$getTimeZoneParts(o,e){let n=$11d87f3f76e88657$var$formattersByTimeZone.get(e);n||(n=new Intl.DateTimeFormat("en-US",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),$11d87f3f76e88657$var$formattersByTimeZone.set(e,n));let a=n.formatToParts(new Date(o)),s={};for(let l of a)l.type!=="literal"&&(s[l.type]=l.value);return{year:s.era==="BC"||s.era==="B"?-s.year+1:+s.year,month:+s.month,day:+s.day,hour:s.hour==="24"?0:+s.hour,minute:+s.minute,second:+s.second}}const $11d87f3f76e88657$var$DAYMILLIS=864e5;function $11d87f3f76e88657$var$getValidWallTimes(o,e,n,a){return(n===a?[n]:[n,a]).filter(l=>$11d87f3f76e88657$var$isValidWallTime(o,e,l))}function $11d87f3f76e88657$var$isValidWallTime(o,e,n){let a=$11d87f3f76e88657$var$getTimeZoneParts(n,e);return o.year===a.year&&o.month===a.month&&o.day===a.day&&o.hour===a.hour&&o.minute===a.minute&&o.second===a.second}function $11d87f3f76e88657$export$5107c82f94518f5c(o,e,n="compatible"){let a=$11d87f3f76e88657$export$b21e0b124e224484(o);if(e==="UTC")return $11d87f3f76e88657$export$bd4fb2bc8bb06fb(a);if(e===$14e0f24ef4ac5c92$export$aa8b41735afcabd2()&&n==="compatible"){a=$11d87f3f76e88657$export$b4a036af3fc0b032(a,new $3b62074eb05584b2$export$80ee6245ec4f29ec);let u=new Date,f=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(a.era,a.year);return u.setFullYear(f,a.month-1,a.day),u.setHours(a.hour,a.minute,a.second,a.millisecond),u.getTime()}let s=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(a),l=$11d87f3f76e88657$export$59c99f3515d3493f(s-$11d87f3f76e88657$var$DAYMILLIS,e),c=$11d87f3f76e88657$export$59c99f3515d3493f(s+$11d87f3f76e88657$var$DAYMILLIS,e),d=$11d87f3f76e88657$var$getValidWallTimes(a,e,s-l,s-c);if(d.length===1)return d[0];if(d.length>1)switch(n){case"compatible":case"earlier":return d[0];case"later":return d[d.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(n){case"earlier":return Math.min(s-l,s-c);case"compatible":case"later":return Math.max(s-l,s-c);case"reject":throw new RangeError("No such absolute time found")}}function $11d87f3f76e88657$export$e67a095c620b86fe(o,e,n="compatible"){return new Date($11d87f3f76e88657$export$5107c82f94518f5c(o,e,n))}function $11d87f3f76e88657$export$1b96692a1ba042ac(o,e){let n=$11d87f3f76e88657$export$59c99f3515d3493f(o,e),a=new Date(o+n),s=a.getUTCFullYear(),l=a.getUTCMonth()+1,c=a.getUTCDate(),d=a.getUTCHours(),u=a.getUTCMinutes(),f=a.getUTCSeconds(),p=a.getUTCMilliseconds();return new $35ea8db9cb2ccb90$export$d3b7288e7994edea(s<1?"BC":"AD",s<1?-s+1:s,l,c,e,n,d,u,f,p)}function $11d87f3f76e88657$export$93522d1a439f3617(o){return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(o.calendar,o.era,o.year,o.month,o.day)}function $11d87f3f76e88657$export$b21e0b124e224484(o,e){let n=0,a=0,s=0,l=0;if("timeZone"in o)({hour:n,minute:a,second:s,millisecond:l}=o);else if("hour"in o&&!e)return o;return e&&({hour:n,minute:a,second:s,millisecond:l}=e),new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(o.calendar,o.era,o.year,o.month,o.day,n,a,s,l)}function $11d87f3f76e88657$export$b4a036af3fc0b032(o,e){if(o.calendar.identifier===e.identifier)return o;let n=e.fromJulianDay(o.calendar.toJulianDay(o)),a=o.copy();return a.calendar=e,a.era=n.era,a.year=n.year,a.month=n.month,a.day=n.day,$735220c2d4774dd3$export$c4e2ecac49351ef2(a),a}function $11d87f3f76e88657$export$84c95a83c799e074(o,e,n){if(o instanceof $35ea8db9cb2ccb90$export$d3b7288e7994edea)return o.timeZone===e?o:$11d87f3f76e88657$export$538b00033cc11c75(o,e);let a=$11d87f3f76e88657$export$5107c82f94518f5c(o,e,n);return $11d87f3f76e88657$export$1b96692a1ba042ac(a,e)}function $11d87f3f76e88657$export$83aac07b4c37b25(o){let e=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(o)-o.offset;return new Date(e)}function $11d87f3f76e88657$export$538b00033cc11c75(o,e){let n=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(o)-o.offset;return $11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(n,e),o.calendar)}const $735220c2d4774dd3$var$ONE_HOUR=36e5;function $735220c2d4774dd3$export$e16d8520af44a096(o,e){let n=o.copy(),a="hour"in n?$735220c2d4774dd3$var$addTimeFields(n,e):0;$735220c2d4774dd3$var$addYears(n,e.years||0),n.calendar.balanceYearMonth&&n.calendar.balanceYearMonth(n,o),n.month+=e.months||0,$735220c2d4774dd3$var$balanceYearMonth(n),$735220c2d4774dd3$var$constrainMonthDay(n),n.day+=(e.weeks||0)*7,n.day+=e.days||0,n.day+=a,$735220c2d4774dd3$var$balanceDay(n),n.calendar.balanceDate&&n.calendar.balanceDate(n),n.year<1&&(n.year=1,n.month=1,n.day=1);let s=n.calendar.getYearsInEra(n);if(n.year>s){var l,c;let u=(l=(c=n.calendar).isInverseEra)===null||l===void 0?void 0:l.call(c,n);n.year=s,n.month=u?1:n.calendar.getMonthsInYear(n),n.day=u?1:n.calendar.getDaysInMonth(n)}n.month<1&&(n.month=1,n.day=1);let d=n.calendar.getMonthsInYear(n);return n.month>d&&(n.month=d,n.day=n.calendar.getDaysInMonth(n)),n.day=Math.max(1,Math.min(n.calendar.getDaysInMonth(n),n.day)),n}function $735220c2d4774dd3$var$addYears(o,e){var n,a;!((n=(a=o.calendar).isInverseEra)===null||n===void 0)&&n.call(a,o)&&(e=-e),o.year+=e}function $735220c2d4774dd3$var$balanceYearMonth(o){for(;o.month<1;)$735220c2d4774dd3$var$addYears(o,-1),o.month+=o.calendar.getMonthsInYear(o);let e=0;for(;o.month>(e=o.calendar.getMonthsInYear(o));)o.month-=e,$735220c2d4774dd3$var$addYears(o,1)}function $735220c2d4774dd3$var$balanceDay(o){for(;o.day<1;)o.month--,$735220c2d4774dd3$var$balanceYearMonth(o),o.day+=o.calendar.getDaysInMonth(o);for(;o.day>o.calendar.getDaysInMonth(o);)o.day-=o.calendar.getDaysInMonth(o),o.month++,$735220c2d4774dd3$var$balanceYearMonth(o)}function $735220c2d4774dd3$var$constrainMonthDay(o){o.month=Math.max(1,Math.min(o.calendar.getMonthsInYear(o),o.month)),o.day=Math.max(1,Math.min(o.calendar.getDaysInMonth(o),o.day))}function $735220c2d4774dd3$export$c4e2ecac49351ef2(o){o.calendar.constrainDate&&o.calendar.constrainDate(o),o.year=Math.max(1,Math.min(o.calendar.getYearsInEra(o),o.year)),$735220c2d4774dd3$var$constrainMonthDay(o)}function $735220c2d4774dd3$export$3e2544e88a25bff8(o){let e={};for(let n in o)typeof o[n]=="number"&&(e[n]=-o[n]);return e}function $735220c2d4774dd3$export$4e2d2ead65e5f7e3(o,e){return $735220c2d4774dd3$export$e16d8520af44a096(o,$735220c2d4774dd3$export$3e2544e88a25bff8(e))}function $735220c2d4774dd3$export$adaa4cf7ef1b65be(o,e){let n=o.copy();return e.era!=null&&(n.era=e.era),e.year!=null&&(n.year=e.year),e.month!=null&&(n.month=e.month),e.day!=null&&(n.day=e.day),$735220c2d4774dd3$export$c4e2ecac49351ef2(n),n}function $735220c2d4774dd3$export$e5d5e1c1822b6e56(o,e){let n=o.copy();return e.hour!=null&&(n.hour=e.hour),e.minute!=null&&(n.minute=e.minute),e.second!=null&&(n.second=e.second),e.millisecond!=null&&(n.millisecond=e.millisecond),$735220c2d4774dd3$export$7555de1e070510cb(n),n}function $735220c2d4774dd3$var$balanceTime(o){o.second+=Math.floor(o.millisecond/1e3),o.millisecond=$735220c2d4774dd3$var$nonNegativeMod(o.millisecond,1e3),o.minute+=Math.floor(o.second/60),o.second=$735220c2d4774dd3$var$nonNegativeMod(o.second,60),o.hour+=Math.floor(o.minute/60),o.minute=$735220c2d4774dd3$var$nonNegativeMod(o.minute,60);let e=Math.floor(o.hour/24);return o.hour=$735220c2d4774dd3$var$nonNegativeMod(o.hour,24),e}function $735220c2d4774dd3$export$7555de1e070510cb(o){o.millisecond=Math.max(0,Math.min(o.millisecond,1e3)),o.second=Math.max(0,Math.min(o.second,59)),o.minute=Math.max(0,Math.min(o.minute,59)),o.hour=Math.max(0,Math.min(o.hour,23))}function $735220c2d4774dd3$var$nonNegativeMod(o,e){let n=o%e;return n<0&&(n+=e),n}function $735220c2d4774dd3$var$addTimeFields(o,e){return o.hour+=e.hours||0,o.minute+=e.minutes||0,o.second+=e.seconds||0,o.millisecond+=e.milliseconds||0,$735220c2d4774dd3$var$balanceTime(o)}function $735220c2d4774dd3$export$d52ced6badfb9a4c(o,e,n,a){let s=o.copy();switch(e){case"era":{let d=o.calendar.getEras(),u=d.indexOf(o.era);if(u<0)throw new Error("Invalid era: "+o.era);u=$735220c2d4774dd3$var$cycleValue(u,n,0,d.length-1,a?.round),s.era=d[u],$735220c2d4774dd3$export$c4e2ecac49351ef2(s);break}case"year":var l,c;!((l=(c=s.calendar).isInverseEra)===null||l===void 0)&&l.call(c,s)&&(n=-n),s.year=$735220c2d4774dd3$var$cycleValue(o.year,n,-1/0,9999,a?.round),s.year===-1/0&&(s.year=1),s.calendar.balanceYearMonth&&s.calendar.balanceYearMonth(s,o);break;case"month":s.month=$735220c2d4774dd3$var$cycleValue(o.month,n,1,o.calendar.getMonthsInYear(o),a?.round);break;case"day":s.day=$735220c2d4774dd3$var$cycleValue(o.day,n,1,o.calendar.getDaysInMonth(o),a?.round);break;default:throw new Error("Unsupported field "+e)}return o.calendar.balanceDate&&o.calendar.balanceDate(s),$735220c2d4774dd3$export$c4e2ecac49351ef2(s),s}function $735220c2d4774dd3$export$dd02b3e0007dfe28(o,e,n,a){let s=o.copy();switch(e){case"hour":{let l=o.hour,c=0,d=23;if(a?.hourCycle===12){let u=l>=12;c=u?12:0,d=u?23:11}s.hour=$735220c2d4774dd3$var$cycleValue(l,n,c,d,a?.round);break}case"minute":s.minute=$735220c2d4774dd3$var$cycleValue(o.minute,n,0,59,a?.round);break;case"second":s.second=$735220c2d4774dd3$var$cycleValue(o.second,n,0,59,a?.round);break;case"millisecond":s.millisecond=$735220c2d4774dd3$var$cycleValue(o.millisecond,n,0,999,a?.round);break;default:throw new Error("Unsupported field "+e)}return s}function $735220c2d4774dd3$var$cycleValue(o,e,n,a,s=!1){if(s){o+=Math.sign(e),o<n&&(o=a);let l=Math.abs(e);e>0?o=Math.ceil(o/l)*l:o=Math.floor(o/l)*l,o>a&&(o=n)}else o+=e,o<n?o=a-(n-o-1):o>a&&(o=n+(o-a-1));return o}function $735220c2d4774dd3$export$96b1d28349274637(o,e){let n;if(e.years!=null&&e.years!==0||e.months!=null&&e.months!==0||e.weeks!=null&&e.weeks!==0||e.days!=null&&e.days!==0){let s=$735220c2d4774dd3$export$e16d8520af44a096($11d87f3f76e88657$export$b21e0b124e224484(o),{years:e.years,months:e.months,weeks:e.weeks,days:e.days});n=$11d87f3f76e88657$export$5107c82f94518f5c(s,o.timeZone)}else n=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(o)-o.offset;n+=e.milliseconds||0,n+=(e.seconds||0)*1e3,n+=(e.minutes||0)*6e4,n+=(e.hours||0)*36e5;let a=$11d87f3f76e88657$export$1b96692a1ba042ac(n,o.timeZone);return $11d87f3f76e88657$export$b4a036af3fc0b032(a,o.calendar)}function $735220c2d4774dd3$export$6814caac34ca03c7(o,e){return $735220c2d4774dd3$export$96b1d28349274637(o,$735220c2d4774dd3$export$3e2544e88a25bff8(e))}function $735220c2d4774dd3$export$9a297d111fc86b79(o,e,n,a){switch(e){case"hour":{let s=0,l=23;if(a?.hourCycle===12){let k=o.hour>=12;s=k?12:0,l=k?23:11}let c=$11d87f3f76e88657$export$b21e0b124e224484(o),d=$11d87f3f76e88657$export$b4a036af3fc0b032($735220c2d4774dd3$export$e5d5e1c1822b6e56(c,{hour:s}),new $3b62074eb05584b2$export$80ee6245ec4f29ec),u=[$11d87f3f76e88657$export$5107c82f94518f5c(d,o.timeZone,"earlier"),$11d87f3f76e88657$export$5107c82f94518f5c(d,o.timeZone,"later")].filter(k=>$11d87f3f76e88657$export$1b96692a1ba042ac(k,o.timeZone).day===d.day)[0],f=$11d87f3f76e88657$export$b4a036af3fc0b032($735220c2d4774dd3$export$e5d5e1c1822b6e56(c,{hour:l}),new $3b62074eb05584b2$export$80ee6245ec4f29ec),p=[$11d87f3f76e88657$export$5107c82f94518f5c(f,o.timeZone,"earlier"),$11d87f3f76e88657$export$5107c82f94518f5c(f,o.timeZone,"later")].filter(k=>$11d87f3f76e88657$export$1b96692a1ba042ac(k,o.timeZone).day===f.day).pop(),_=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(o)-o.offset,b=Math.floor(_/$735220c2d4774dd3$var$ONE_HOUR),v=_%$735220c2d4774dd3$var$ONE_HOUR;return _=$735220c2d4774dd3$var$cycleValue(b,n,Math.floor(u/$735220c2d4774dd3$var$ONE_HOUR),Math.floor(p/$735220c2d4774dd3$var$ONE_HOUR),a?.round)*$735220c2d4774dd3$var$ONE_HOUR+v,$11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(_,o.timeZone),o.calendar)}case"minute":case"second":case"millisecond":return $735220c2d4774dd3$export$dd02b3e0007dfe28(o,e,n,a);case"era":case"year":case"month":case"day":{let s=$735220c2d4774dd3$export$d52ced6badfb9a4c($11d87f3f76e88657$export$b21e0b124e224484(o),e,n,a),l=$11d87f3f76e88657$export$5107c82f94518f5c(s,o.timeZone);return $11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(l,o.timeZone),o.calendar)}default:throw new Error("Unsupported field "+e)}}function $735220c2d4774dd3$export$31b5430eb18be4f8(o,e,n){let a=$11d87f3f76e88657$export$b21e0b124e224484(o),s=$735220c2d4774dd3$export$e5d5e1c1822b6e56($735220c2d4774dd3$export$adaa4cf7ef1b65be(a,e),e);if(s.compare(a)===0)return o;let l=$11d87f3f76e88657$export$5107c82f94518f5c(s,o.timeZone,n);return $11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(l,o.timeZone),o.calendar)}function $fae977aafc393c5c$export$f59dee82248f5ad4(o){return`${String(o.hour).padStart(2,"0")}:${String(o.minute).padStart(2,"0")}:${String(o.second).padStart(2,"0")}${o.millisecond?String(o.millisecond/1e3).slice(1):""}`}function $fae977aafc393c5c$export$60dfd74aa96791bd(o){let e=$11d87f3f76e88657$export$b4a036af3fc0b032(o,new $3b62074eb05584b2$export$80ee6245ec4f29ec),n;return e.era==="BC"?n=e.year===1?"0000":"-"+String(Math.abs(1-e.year)).padStart(6,"00"):n=String(e.year).padStart(4,"0"),`${n}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}function $fae977aafc393c5c$export$4223de14708adc63(o){return`${$fae977aafc393c5c$export$60dfd74aa96791bd(o)}T${$fae977aafc393c5c$export$f59dee82248f5ad4(o)}`}function $fae977aafc393c5c$var$offsetToString(o){let e=Math.sign(o)<0?"-":"+";o=Math.abs(o);let n=Math.floor(o/36e5),a=o%36e5/6e4;return`${e}${String(n).padStart(2,"0")}:${String(a).padStart(2,"0")}`}function $fae977aafc393c5c$export$bf79f1ebf4b18792(o){return`${$fae977aafc393c5c$export$4223de14708adc63(o)}${$fae977aafc393c5c$var$offsetToString(o.offset)}[${o.timeZone}]`}function _check_private_redeclaration(o,e){if(e.has(o))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _class_private_field_init(o,e,n){_check_private_redeclaration(o,e),e.set(o,n)}function $35ea8db9cb2ccb90$var$shiftArgs(o){let e=typeof o[0]=="object"?o.shift():new $3b62074eb05584b2$export$80ee6245ec4f29ec,n;if(typeof o[0]=="string")n=o.shift();else{let c=e.getEras();n=c[c.length-1]}let a=o.shift(),s=o.shift(),l=o.shift();return[e,n,a,s,l]}var $35ea8db9cb2ccb90$var$_type=new WeakMap;class $35ea8db9cb2ccb90$export$99faa760c7908e4f{copy(){return this.era?new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this.calendar,this.era,this.year,this.month,this.day):new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this.calendar,this.year,this.month,this.day)}add(e){return $735220c2d4774dd3$export$e16d8520af44a096(this,e)}subtract(e){return $735220c2d4774dd3$export$4e2d2ead65e5f7e3(this,e)}set(e){return $735220c2d4774dd3$export$adaa4cf7ef1b65be(this,e)}cycle(e,n,a){return $735220c2d4774dd3$export$d52ced6badfb9a4c(this,e,n,a)}toDate(e){return $11d87f3f76e88657$export$e67a095c620b86fe(this,e)}toString(){return $fae977aafc393c5c$export$60dfd74aa96791bd(this)}compare(e){return $14e0f24ef4ac5c92$export$68781ddf31c0090f(this,e)}constructor(...e){_class_private_field_init(this,$35ea8db9cb2ccb90$var$_type,{writable:!0,value:void 0});let[n,a,s,l,c]=$35ea8db9cb2ccb90$var$shiftArgs(e);this.calendar=n,this.era=a,this.year=s,this.month=l,this.day=c,$735220c2d4774dd3$export$c4e2ecac49351ef2(this)}}var $35ea8db9cb2ccb90$var$_type2=new WeakMap;class $35ea8db9cb2ccb90$export$ca871e8dbb80966f{copy(){return this.era?new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(e){return $735220c2d4774dd3$export$e16d8520af44a096(this,e)}subtract(e){return $735220c2d4774dd3$export$4e2d2ead65e5f7e3(this,e)}set(e){return $735220c2d4774dd3$export$adaa4cf7ef1b65be($735220c2d4774dd3$export$e5d5e1c1822b6e56(this,e),e)}cycle(e,n,a){switch(e){case"era":case"year":case"month":case"day":return $735220c2d4774dd3$export$d52ced6badfb9a4c(this,e,n,a);default:return $735220c2d4774dd3$export$dd02b3e0007dfe28(this,e,n,a)}}toDate(e,n){return $11d87f3f76e88657$export$e67a095c620b86fe(this,e,n)}toString(){return $fae977aafc393c5c$export$4223de14708adc63(this)}compare(e){let n=$14e0f24ef4ac5c92$export$68781ddf31c0090f(this,e);return n===0?$14e0f24ef4ac5c92$export$c19a80a9721b80f6(this,$11d87f3f76e88657$export$b21e0b124e224484(e)):n}constructor(...e){_class_private_field_init(this,$35ea8db9cb2ccb90$var$_type2,{writable:!0,value:void 0});let[n,a,s,l,c]=$35ea8db9cb2ccb90$var$shiftArgs(e);this.calendar=n,this.era=a,this.year=s,this.month=l,this.day=c,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,$735220c2d4774dd3$export$c4e2ecac49351ef2(this)}}var $35ea8db9cb2ccb90$var$_type3=new WeakMap;class $35ea8db9cb2ccb90$export$d3b7288e7994edea{copy(){return this.era?new $35ea8db9cb2ccb90$export$d3b7288e7994edea(this.calendar,this.era,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond):new $35ea8db9cb2ccb90$export$d3b7288e7994edea(this.calendar,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond)}add(e){return $735220c2d4774dd3$export$96b1d28349274637(this,e)}subtract(e){return $735220c2d4774dd3$export$6814caac34ca03c7(this,e)}set(e,n){return $735220c2d4774dd3$export$31b5430eb18be4f8(this,e,n)}cycle(e,n,a){return $735220c2d4774dd3$export$9a297d111fc86b79(this,e,n,a)}toDate(){return $11d87f3f76e88657$export$83aac07b4c37b25(this)}toString(){return $fae977aafc393c5c$export$bf79f1ebf4b18792(this)}toAbsoluteString(){return this.toDate().toISOString()}compare(e){return this.toDate().getTime()-$11d87f3f76e88657$export$84c95a83c799e074(e,this.timeZone).toDate().getTime()}constructor(...e){_class_private_field_init(this,$35ea8db9cb2ccb90$var$_type3,{writable:!0,value:void 0});let[n,a,s,l,c]=$35ea8db9cb2ccb90$var$shiftArgs(e),d=e.shift(),u=e.shift();this.calendar=n,this.era=a,this.year=s,this.month=l,this.day=c,this.timeZone=d,this.offset=u,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,$735220c2d4774dd3$export$c4e2ecac49351ef2(this)}}const $62225008020f0a13$var$ERA_START_DATES=[[1868,9,8],[1912,7,30],[1926,12,25],[1989,1,8],[2019,5,1]],$62225008020f0a13$var$ERA_END_DATES=[[1912,7,29],[1926,12,24],[1989,1,7],[2019,4,30]],$62225008020f0a13$var$ERA_ADDENDS=[1867,1911,1925,1988,2018],$62225008020f0a13$var$ERA_NAMES=["meiji","taisho","showa","heisei","reiwa"];function $62225008020f0a13$var$findEraFromGregorianDate(o){const e=$62225008020f0a13$var$ERA_START_DATES.findIndex(([n,a,s])=>o.year<n||o.year===n&&o.month<a||o.year===n&&o.month===a&&o.day<s);return e===-1?$62225008020f0a13$var$ERA_START_DATES.length-1:e===0?0:e-1}function $62225008020f0a13$var$toGregorian(o){let e=$62225008020f0a13$var$ERA_ADDENDS[$62225008020f0a13$var$ERA_NAMES.indexOf(o.era)];if(!e)throw new Error("Unknown era: "+o.era);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(o.year+e,o.month,o.day)}class $62225008020f0a13$export$b746ab2b60cdffbf extends $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let n=super.fromJulianDay(e),a=$62225008020f0a13$var$findEraFromGregorianDate(n);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,$62225008020f0a13$var$ERA_NAMES[a],n.year-$62225008020f0a13$var$ERA_ADDENDS[a],n.month,n.day)}toJulianDay(e){return super.toJulianDay($62225008020f0a13$var$toGregorian(e))}balanceDate(e){let n=$62225008020f0a13$var$toGregorian(e),a=$62225008020f0a13$var$findEraFromGregorianDate(n);$62225008020f0a13$var$ERA_NAMES[a]!==e.era&&(e.era=$62225008020f0a13$var$ERA_NAMES[a],e.year=n.year-$62225008020f0a13$var$ERA_ADDENDS[a]),this.constrainDate(e)}constrainDate(e){let n=$62225008020f0a13$var$ERA_NAMES.indexOf(e.era),a=$62225008020f0a13$var$ERA_END_DATES[n];if(a!=null){let[s,l,c]=a,d=s-$62225008020f0a13$var$ERA_ADDENDS[n];e.year=Math.max(1,Math.min(d,e.year)),e.year===d&&(e.month=Math.min(l,e.month),e.month===l&&(e.day=Math.min(c,e.day)))}if(e.year===1&&n>=0){let[,s,l]=$62225008020f0a13$var$ERA_START_DATES[n];e.month=Math.max(s,e.month),e.month===s&&(e.day=Math.max(l,e.day))}}getEras(){return $62225008020f0a13$var$ERA_NAMES}getYearsInEra(e){let n=$62225008020f0a13$var$ERA_NAMES.indexOf(e.era),a=$62225008020f0a13$var$ERA_START_DATES[n],s=$62225008020f0a13$var$ERA_START_DATES[n+1];if(s==null)return 9999-a[0]+1;let l=s[0]-a[0];return(e.month<s[1]||e.month===s[1]&&e.day<s[2])&&l++,l}getDaysInMonth(e){return super.getDaysInMonth($62225008020f0a13$var$toGregorian(e))}getMinimumMonthInYear(e){let n=$62225008020f0a13$var$getMinimums(e);return n?n[1]:1}getMinimumDayInMonth(e){let n=$62225008020f0a13$var$getMinimums(e);return n&&e.month===n[1]?n[2]:1}constructor(...e){super(...e),this.identifier="japanese"}}function $62225008020f0a13$var$getMinimums(o){if(o.year===1){let e=$62225008020f0a13$var$ERA_NAMES.indexOf(o.era);return $62225008020f0a13$var$ERA_START_DATES[e]}}const $8d73d47422ca7302$var$BUDDHIST_ERA_START=-543;class $8d73d47422ca7302$export$42d20a78301dee44 extends $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let n=super.fromJulianDay(e),a=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(n.era,n.year);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,a-$8d73d47422ca7302$var$BUDDHIST_ERA_START,n.month,n.day)}toJulianDay(e){return super.toJulianDay($8d73d47422ca7302$var$toGregorian(e))}getEras(){return["BE"]}getDaysInMonth(e){return super.getDaysInMonth($8d73d47422ca7302$var$toGregorian(e))}balanceDate(){}constructor(...e){super(...e),this.identifier="buddhist"}}function $8d73d47422ca7302$var$toGregorian(o){let[e,n]=$3b62074eb05584b2$export$4475b7e617eb123c(o.year+$8d73d47422ca7302$var$BUDDHIST_ERA_START);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(e,n,o.month,o.day)}const $5f31bd6f0c8940b2$var$TAIWAN_ERA_START=1911;function $5f31bd6f0c8940b2$var$gregorianYear(o){return o.era==="minguo"?o.year+$5f31bd6f0c8940b2$var$TAIWAN_ERA_START:1-o.year+$5f31bd6f0c8940b2$var$TAIWAN_ERA_START}function $5f31bd6f0c8940b2$var$gregorianToTaiwan(o){let e=o-$5f31bd6f0c8940b2$var$TAIWAN_ERA_START;return e>0?["minguo",e]:["before_minguo",1-e]}class $5f31bd6f0c8940b2$export$65e01080afcb0799 extends $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let n=super.fromJulianDay(e),a=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(n.era,n.year),[s,l]=$5f31bd6f0c8940b2$var$gregorianToTaiwan(a);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,s,l,n.month,n.day)}toJulianDay(e){return super.toJulianDay($5f31bd6f0c8940b2$var$toGregorian(e))}getEras(){return["before_minguo","minguo"]}balanceDate(e){let[n,a]=$5f31bd6f0c8940b2$var$gregorianToTaiwan($5f31bd6f0c8940b2$var$gregorianYear(e));e.era=n,e.year=a}isInverseEra(e){return e.era==="before_minguo"}getDaysInMonth(e){return super.getDaysInMonth($5f31bd6f0c8940b2$var$toGregorian(e))}getYearsInEra(e){return e.era==="before_minguo"?9999:9999-$5f31bd6f0c8940b2$var$TAIWAN_ERA_START}constructor(...e){super(...e),this.identifier="roc"}}function $5f31bd6f0c8940b2$var$toGregorian(o){let[e,n]=$3b62074eb05584b2$export$4475b7e617eb123c($5f31bd6f0c8940b2$var$gregorianYear(o));return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(e,n,o.month,o.day)}const $f3ed2e4472ae7e25$var$PERSIAN_EPOCH=1948320,$f3ed2e4472ae7e25$var$MONTH_START=[0,31,62,93,124,155,186,216,246,276,306,336];class $f3ed2e4472ae7e25$export$37fccdbfd14c5939{fromJulianDay(e){let n=e-$f3ed2e4472ae7e25$var$PERSIAN_EPOCH,a=1+Math.floor((33*n+3)/12053),s=365*(a-1)+Math.floor((8*a+21)/33),l=n-s,c=l<216?Math.floor(l/31):Math.floor((l-6)/30),d=l-$f3ed2e4472ae7e25$var$MONTH_START[c]+1;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,a,c+1,d)}toJulianDay(e){let n=$f3ed2e4472ae7e25$var$PERSIAN_EPOCH-1+365*(e.year-1)+Math.floor((8*e.year+21)/33);return n+=$f3ed2e4472ae7e25$var$MONTH_START[e.month-1],n+=e.day,n}getMonthsInYear(){return 12}getDaysInMonth(e){return e.month<=6?31:e.month<=11||$2b4dce13dd5a17fa$export$842a2cf37af977e1(25*e.year+11,33)<8?30:29}getEras(){return["AP"]}getYearsInEra(){return 9377}constructor(){this.identifier="persian"}}const $82c358003bdda0a8$var$INDIAN_ERA_START=78,$82c358003bdda0a8$var$INDIAN_YEAR_START=80;class $82c358003bdda0a8$export$39f31c639fa15726 extends $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let n=super.fromJulianDay(e),a=n.year-$82c358003bdda0a8$var$INDIAN_ERA_START,s=e-$3b62074eb05584b2$export$f297eb839006d339(n.era,n.year,1,1),l;s<$82c358003bdda0a8$var$INDIAN_YEAR_START?(a--,l=$3b62074eb05584b2$export$553d7fa8e3805fc0(n.year-1)?31:30,s+=l+155+90+10):(l=$3b62074eb05584b2$export$553d7fa8e3805fc0(n.year)?31:30,s-=$82c358003bdda0a8$var$INDIAN_YEAR_START);let c,d;if(s<l)c=1,d=s+1;else{let u=s-l;u<155?(c=Math.floor(u/31)+2,d=u%31+1):(u-=155,c=Math.floor(u/30)+7,d=u%30+1)}return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,a,c,d)}toJulianDay(e){let n=e.year+$82c358003bdda0a8$var$INDIAN_ERA_START,[a,s]=$3b62074eb05584b2$export$4475b7e617eb123c(n),l,c;return $3b62074eb05584b2$export$553d7fa8e3805fc0(s)?(l=31,c=$3b62074eb05584b2$export$f297eb839006d339(a,s,3,21)):(l=30,c=$3b62074eb05584b2$export$f297eb839006d339(a,s,3,22)),e.month===1?c+e.day-1:(c+=l+Math.min(e.month-2,5)*31,e.month>=8&&(c+=(e.month-7)*30),c+=e.day-1,c)}getDaysInMonth(e){return e.month===1&&$3b62074eb05584b2$export$553d7fa8e3805fc0(e.year+$82c358003bdda0a8$var$INDIAN_ERA_START)||e.month>=2&&e.month<=6?31:30}getYearsInEra(){return 9919}getEras(){return["saka"]}balanceDate(){}constructor(...e){super(...e),this.identifier="indian"}}const $f2f3e0e3a817edbd$var$CIVIL_EPOC=1948440,$f2f3e0e3a817edbd$var$ASTRONOMICAL_EPOC=1948439,$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START=1300,$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END=1600,$f2f3e0e3a817edbd$var$UMALQURA_START_DAYS=460322;function $f2f3e0e3a817edbd$var$islamicToJulianDay(o,e,n,a){return a+Math.ceil(29.5*(n-1))+(e-1)*354+Math.floor((3+11*e)/30)+o-1}function $f2f3e0e3a817edbd$var$julianDayToIslamic(o,e,n){let a=Math.floor((30*(n-e)+10646)/10631),s=Math.min(12,Math.ceil((n-(29+$f2f3e0e3a817edbd$var$islamicToJulianDay(e,a,1,1)))/29.5)+1),l=n-$f2f3e0e3a817edbd$var$islamicToJulianDay(e,a,s,1)+1;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(o,a,s,l)}function $f2f3e0e3a817edbd$var$isLeapYear(o){return(14+11*o)%30<11}class $f2f3e0e3a817edbd$export$2066795aadd37bfc{fromJulianDay(e){return $f2f3e0e3a817edbd$var$julianDayToIslamic(this,$f2f3e0e3a817edbd$var$CIVIL_EPOC,e)}toJulianDay(e){return $f2f3e0e3a817edbd$var$islamicToJulianDay($f2f3e0e3a817edbd$var$CIVIL_EPOC,e.year,e.month,e.day)}getDaysInMonth(e){let n=29+e.month%2;return e.month===12&&$f2f3e0e3a817edbd$var$isLeapYear(e.year)&&n++,n}getMonthsInYear(){return 12}getDaysInYear(e){return $f2f3e0e3a817edbd$var$isLeapYear(e.year)?355:354}getYearsInEra(){return 9665}getEras(){return["AH"]}constructor(){this.identifier="islamic-civil"}}class $f2f3e0e3a817edbd$export$37f0887f2f9d22f7 extends $f2f3e0e3a817edbd$export$2066795aadd37bfc{fromJulianDay(e){return $f2f3e0e3a817edbd$var$julianDayToIslamic(this,$f2f3e0e3a817edbd$var$ASTRONOMICAL_EPOC,e)}toJulianDay(e){return $f2f3e0e3a817edbd$var$islamicToJulianDay($f2f3e0e3a817edbd$var$ASTRONOMICAL_EPOC,e.year,e.month,e.day)}constructor(...e){super(...e),this.identifier="islamic-tbla"}}const $f2f3e0e3a817edbd$var$UMALQURA_DATA="qgpUDckO1AbqBmwDrQpVBakGkgepC9QF2gpcBS0NlQZKB1QLagutBa4ETwoXBYsGpQbVCtYCWwmdBE0KJg2VDawFtgm6AlsKKwWVCsoG6Qr0AnYJtgJWCcoKpAvSC9kF3AJtCU0FpQpSC6ULtAW2CVcFlwJLBaMGUgdlC2oFqworBZUMSg2lDcoF1gpXCasESwmlClILagt1BXYCtwhbBFUFqQW0BdoJ3QRuAjYJqgpUDbIN1QXaAlsJqwRVCkkLZAtxC7QFtQpVCiUNkg7JDtQG6QprCasEkwpJDaQNsg25CroEWworBZUKKgtVC1wFvQQ9Ah0JlQpKC1oLbQW2AjsJmwRVBqkGVAdqC2wFrQpVBSkLkgupC9QF2gpaBasKlQVJB2QHqgu1BbYCVgpNDiULUgtqC60FrgIvCZcESwalBqwG1gpdBZ0ETQoWDZUNqgW1BdoCWwmtBJUFygbkBuoK9QS2AlYJqgpUC9IL2QXqAm0JrQSVCkoLpQuyBbUJ1gSXCkcFkwZJB1ULagVrCisFiwpGDaMNygXWCtsEawJLCaUKUgtpC3UFdgG3CFsCKwVlBbQF2gntBG0BtgimClINqQ3UBdoKWwmrBFMGKQdiB6kLsgW1ClUFJQuSDckO0gbpCmsFqwRVCikNVA2qDbUJugQ7CpsETQqqCtUK2gJdCV4ELgqaDFUNsga5BroEXQotBZUKUguoC7QLuQXaAloJSgukDdEO6AZqC20FNQWVBkoNqA3UDdoGWwWdAisGFQtKC5ULqgWuCi4JjwwnBZUGqgbWCl0FnQI=";let $f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH,$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE;function $f2f3e0e3a817edbd$var$umalquraYearStart(o){return $f2f3e0e3a817edbd$var$UMALQURA_START_DAYS+$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[o-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START]}function $f2f3e0e3a817edbd$var$umalquraMonthLength(o,e){let n=o-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START,a=1<<11-(e-1);return $f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH[n]&a?30:29}function $f2f3e0e3a817edbd$var$umalquraMonthStart(o,e){let n=$f2f3e0e3a817edbd$var$umalquraYearStart(o);for(let a=1;a<e;a++)n+=$f2f3e0e3a817edbd$var$umalquraMonthLength(o,a);return n}function $f2f3e0e3a817edbd$var$umalquraYearLength(o){return $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[o+1-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START]-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[o-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START]}class $f2f3e0e3a817edbd$export$5baab4758c231076 extends $f2f3e0e3a817edbd$export$2066795aadd37bfc{fromJulianDay(e){let n=e-$f2f3e0e3a817edbd$var$CIVIL_EPOC,a=$f2f3e0e3a817edbd$var$umalquraYearStart($f2f3e0e3a817edbd$var$UMALQURA_YEAR_START),s=$f2f3e0e3a817edbd$var$umalquraYearStart($f2f3e0e3a817edbd$var$UMALQURA_YEAR_END);if(n<a||n>s)return super.fromJulianDay(e);{let l=$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START-1,c=1,d=1;for(;d>0;){l++,d=n-$f2f3e0e3a817edbd$var$umalquraYearStart(l)+1;let u=$f2f3e0e3a817edbd$var$umalquraYearLength(l);if(d===u){c=12;break}else if(d<u){let f=$f2f3e0e3a817edbd$var$umalquraMonthLength(l,c);for(c=1;d>f;)d-=f,c++,f=$f2f3e0e3a817edbd$var$umalquraMonthLength(l,c);break}}return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,l,c,n-$f2f3e0e3a817edbd$var$umalquraMonthStart(l,c)+1)}}toJulianDay(e){return e.year<$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START||e.year>$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END?super.toJulianDay(e):$f2f3e0e3a817edbd$var$CIVIL_EPOC+$f2f3e0e3a817edbd$var$umalquraMonthStart(e.year,e.month)+(e.day-1)}getDaysInMonth(e){return e.year<$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START||e.year>$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END?super.getDaysInMonth(e):$f2f3e0e3a817edbd$var$umalquraMonthLength(e.year,e.month)}getDaysInYear(e){return e.year<$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START||e.year>$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END?super.getDaysInYear(e):$f2f3e0e3a817edbd$var$umalquraYearLength(e.year)}constructor(){if(super(),this.identifier="islamic-umalqura",$f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH||($f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH=new Uint16Array(Uint8Array.from(atob($f2f3e0e3a817edbd$var$UMALQURA_DATA),e=>e.charCodeAt(0)).buffer)),!$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE){$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE=new Uint32Array($f2f3e0e3a817edbd$var$UMALQURA_YEAR_END-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START+1);let e=0;for(let n=$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START;n<=$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END;n++){$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[n-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START]=e;for(let a=1;a<=12;a++)e+=$f2f3e0e3a817edbd$var$umalquraMonthLength(n,a)}}}}const $7c5f6fbf42389787$var$HEBREW_EPOCH=347997,$7c5f6fbf42389787$var$HOUR_PARTS=1080,$7c5f6fbf42389787$var$DAY_PARTS=24*$7c5f6fbf42389787$var$HOUR_PARTS,$7c5f6fbf42389787$var$MONTH_DAYS=29,$7c5f6fbf42389787$var$MONTH_FRACT=12*$7c5f6fbf42389787$var$HOUR_PARTS+793,$7c5f6fbf42389787$var$MONTH_PARTS=$7c5f6fbf42389787$var$MONTH_DAYS*$7c5f6fbf42389787$var$DAY_PARTS+$7c5f6fbf42389787$var$MONTH_FRACT;function $7c5f6fbf42389787$var$isLeapYear(o){return $2b4dce13dd5a17fa$export$842a2cf37af977e1(o*7+1,19)<7}function $7c5f6fbf42389787$var$hebrewDelay1(o){let e=Math.floor((235*o-234)/19),n=12084+13753*e,a=e*29+Math.floor(n/25920);return $2b4dce13dd5a17fa$export$842a2cf37af977e1(3*(a+1),7)<3&&(a+=1),a}function $7c5f6fbf42389787$var$hebrewDelay2(o){let e=$7c5f6fbf42389787$var$hebrewDelay1(o-1),n=$7c5f6fbf42389787$var$hebrewDelay1(o);return $7c5f6fbf42389787$var$hebrewDelay1(o+1)-n===356?2:n-e===382?1:0}function $7c5f6fbf42389787$var$startOfYear(o){return $7c5f6fbf42389787$var$hebrewDelay1(o)+$7c5f6fbf42389787$var$hebrewDelay2(o)}function $7c5f6fbf42389787$var$getDaysInYear(o){return $7c5f6fbf42389787$var$startOfYear(o+1)-$7c5f6fbf42389787$var$startOfYear(o)}function $7c5f6fbf42389787$var$getYearType(o){let e=$7c5f6fbf42389787$var$getDaysInYear(o);switch(e>380&&(e-=30),e){case 353:return 0;case 354:return 1;case 355:return 2}}function $7c5f6fbf42389787$var$getDaysInMonth(o,e){if(e>=6&&!$7c5f6fbf42389787$var$isLeapYear(o)&&e++,e===4||e===7||e===9||e===11||e===13)return 29;let n=$7c5f6fbf42389787$var$getYearType(o);return e===2?n===2?30:29:e===3?n===0?29:30:e===6?$7c5f6fbf42389787$var$isLeapYear(o)?30:0:30}class $7c5f6fbf42389787$export$ca405048b8fb5af{fromJulianDay(e){let n=e-$7c5f6fbf42389787$var$HEBREW_EPOCH,a=n*$7c5f6fbf42389787$var$DAY_PARTS/$7c5f6fbf42389787$var$MONTH_PARTS,s=Math.floor((19*a+234)/235)+1,l=$7c5f6fbf42389787$var$startOfYear(s),c=Math.floor(n-l);for(;c<1;)s--,l=$7c5f6fbf42389787$var$startOfYear(s),c=Math.floor(n-l);let d=1,u=0;for(;u<c;)u+=$7c5f6fbf42389787$var$getDaysInMonth(s,d),d++;d--,u-=$7c5f6fbf42389787$var$getDaysInMonth(s,d);let f=c-u;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,s,d,f)}toJulianDay(e){let n=$7c5f6fbf42389787$var$startOfYear(e.year);for(let a=1;a<e.month;a++)n+=$7c5f6fbf42389787$var$getDaysInMonth(e.year,a);return n+e.day+$7c5f6fbf42389787$var$HEBREW_EPOCH}getDaysInMonth(e){return $7c5f6fbf42389787$var$getDaysInMonth(e.year,e.month)}getMonthsInYear(e){return $7c5f6fbf42389787$var$isLeapYear(e.year)?13:12}getDaysInYear(e){return $7c5f6fbf42389787$var$getDaysInYear(e.year)}getYearsInEra(){return 9999}getEras(){return["AM"]}balanceYearMonth(e,n){n.year!==e.year&&($7c5f6fbf42389787$var$isLeapYear(n.year)&&!$7c5f6fbf42389787$var$isLeapYear(e.year)&&n.month>6?e.month--:!$7c5f6fbf42389787$var$isLeapYear(n.year)&&$7c5f6fbf42389787$var$isLeapYear(e.year)&&n.month>6&&e.month++)}constructor(){this.identifier="hebrew"}}const $b956b2d7a6cf451f$var$ETHIOPIC_EPOCH=1723856,$b956b2d7a6cf451f$var$COPTIC_EPOCH=1824665,$b956b2d7a6cf451f$var$AMETE_MIHRET_DELTA=5500;function $b956b2d7a6cf451f$var$ceToJulianDay(o,e,n,a){return o+365*e+Math.floor(e/4)+30*(n-1)+a-1}function $b956b2d7a6cf451f$var$julianDayToCE(o,e){let n=Math.floor(4*(e-o)/1461),a=1+Math.floor((e-$b956b2d7a6cf451f$var$ceToJulianDay(o,n,1,1))/30),s=e+1-$b956b2d7a6cf451f$var$ceToJulianDay(o,n,a,1);return[n,a,s]}function $b956b2d7a6cf451f$var$getLeapDay(o){return Math.floor(o%4/3)}function $b956b2d7a6cf451f$var$getDaysInMonth(o,e){return e%13!==0?30:$b956b2d7a6cf451f$var$getLeapDay(o)+5}class $b956b2d7a6cf451f$export$26ba6eab5e20cd7d{fromJulianDay(e){let[n,a,s]=$b956b2d7a6cf451f$var$julianDayToCE($b956b2d7a6cf451f$var$ETHIOPIC_EPOCH,e),l="AM";return n<=0&&(l="AA",n+=$b956b2d7a6cf451f$var$AMETE_MIHRET_DELTA),new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,l,n,a,s)}toJulianDay(e){let n=e.year;return e.era==="AA"&&(n-=$b956b2d7a6cf451f$var$AMETE_MIHRET_DELTA),$b956b2d7a6cf451f$var$ceToJulianDay($b956b2d7a6cf451f$var$ETHIOPIC_EPOCH,n,e.month,e.day)}getDaysInMonth(e){return $b956b2d7a6cf451f$var$getDaysInMonth(e.year,e.month)}getMonthsInYear(){return 13}getDaysInYear(e){return 365+$b956b2d7a6cf451f$var$getLeapDay(e.year)}getYearsInEra(e){return e.era==="AA"?9999:9991}getEras(){return["AA","AM"]}constructor(){this.identifier="ethiopic"}}class $b956b2d7a6cf451f$export$d72e0c37005a4914 extends $b956b2d7a6cf451f$export$26ba6eab5e20cd7d{fromJulianDay(e){let[n,a,s]=$b956b2d7a6cf451f$var$julianDayToCE($b956b2d7a6cf451f$var$ETHIOPIC_EPOCH,e);return n+=$b956b2d7a6cf451f$var$AMETE_MIHRET_DELTA,new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,"AA",n,a,s)}getEras(){return["AA"]}getYearsInEra(){return 9999}constructor(...e){super(...e),this.identifier="ethioaa"}}class $b956b2d7a6cf451f$export$fe6243cbe1a4b7c1 extends $b956b2d7a6cf451f$export$26ba6eab5e20cd7d{fromJulianDay(e){let[n,a,s]=$b956b2d7a6cf451f$var$julianDayToCE($b956b2d7a6cf451f$var$COPTIC_EPOCH,e),l="CE";return n<=0&&(l="BCE",n=1-n),new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,l,n,a,s)}toJulianDay(e){let n=e.year;return e.era==="BCE"&&(n=1-n),$b956b2d7a6cf451f$var$ceToJulianDay($b956b2d7a6cf451f$var$COPTIC_EPOCH,n,e.month,e.day)}getDaysInMonth(e){let n=e.year;return e.era==="BCE"&&(n=1-n),$b956b2d7a6cf451f$var$getDaysInMonth(n,e.month)}isInverseEra(e){return e.era==="BCE"}balanceDate(e){e.year<=0&&(e.era=e.era==="BCE"?"CE":"BCE",e.year=1-e.year)}getEras(){return["BCE","CE"]}getYearsInEra(e){return e.era==="BCE"?9999:9715}constructor(...e){super(...e),this.identifier="coptic"}}function $64244302c3013299$export$dd0bbc9b26defe37(o){switch(o){case"buddhist":return new $8d73d47422ca7302$export$42d20a78301dee44;case"ethiopic":return new $b956b2d7a6cf451f$export$26ba6eab5e20cd7d;case"ethioaa":return new $b956b2d7a6cf451f$export$d72e0c37005a4914;case"coptic":return new $b956b2d7a6cf451f$export$fe6243cbe1a4b7c1;case"hebrew":return new $7c5f6fbf42389787$export$ca405048b8fb5af;case"indian":return new $82c358003bdda0a8$export$39f31c639fa15726;case"islamic-civil":return new $f2f3e0e3a817edbd$export$2066795aadd37bfc;case"islamic-tbla":return new $f2f3e0e3a817edbd$export$37f0887f2f9d22f7;case"islamic-umalqura":return new $f2f3e0e3a817edbd$export$5baab4758c231076;case"japanese":return new $62225008020f0a13$export$b746ab2b60cdffbf;case"persian":return new $f3ed2e4472ae7e25$export$37fccdbfd14c5939;case"roc":return new $5f31bd6f0c8940b2$export$65e01080afcb0799;case"gregory":default:return new $3b62074eb05584b2$export$80ee6245ec4f29ec}}let $fb18d541ea1ad717$var$formatterCache=new Map;class $fb18d541ea1ad717$export$ad991b66133851cf{format(e){return this.formatter.format(e)}formatToParts(e){return this.formatter.formatToParts(e)}formatRange(e,n){if(typeof this.formatter.formatRange=="function")return this.formatter.formatRange(e,n);if(n<e)throw new RangeError("End date must be >= start date");return`${this.formatter.format(e)} – ${this.formatter.format(n)}`}formatRangeToParts(e,n){if(typeof this.formatter.formatRangeToParts=="function")return this.formatter.formatRangeToParts(e,n);if(n<e)throw new RangeError("End date must be >= start date");let a=this.formatter.formatToParts(e),s=this.formatter.formatToParts(n);return[...a.map(l=>({...l,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...s.map(l=>({...l,source:"endRange"}))]}resolvedOptions(){let e=this.formatter.resolvedOptions();return $fb18d541ea1ad717$var$hasBuggyResolvedHourCycle()&&(this.resolvedHourCycle||(this.resolvedHourCycle=$fb18d541ea1ad717$var$getResolvedHourCycle(e.locale,this.options)),e.hourCycle=this.resolvedHourCycle,e.hour12=this.resolvedHourCycle==="h11"||this.resolvedHourCycle==="h12"),e.calendar==="ethiopic-amete-alem"&&(e.calendar="ethioaa"),e}constructor(e,n={}){this.formatter=$fb18d541ea1ad717$var$getCachedDateFormatter(e,n),this.options=n}}const $fb18d541ea1ad717$var$hour12Preferences={true:{ja:"h11"},false:{}};function $fb18d541ea1ad717$var$getCachedDateFormatter(o,e={}){if(typeof e.hour12=="boolean"&&$fb18d541ea1ad717$var$hasBuggyHour12Behavior()){e={...e};let s=$fb18d541ea1ad717$var$hour12Preferences[String(e.hour12)][o.split("-")[0]],l=e.hour12?"h12":"h23";e.hourCycle=s??l,delete e.hour12}let n=o+(e?Object.entries(e).sort((s,l)=>s[0]<l[0]?-1:1).join():"");if($fb18d541ea1ad717$var$formatterCache.has(n))return $fb18d541ea1ad717$var$formatterCache.get(n);let a=new Intl.DateTimeFormat(o,e);return $fb18d541ea1ad717$var$formatterCache.set(n,a),a}let $fb18d541ea1ad717$var$_hasBuggyHour12Behavior=null;function $fb18d541ea1ad717$var$hasBuggyHour12Behavior(){return $fb18d541ea1ad717$var$_hasBuggyHour12Behavior==null&&($fb18d541ea1ad717$var$_hasBuggyHour12Behavior=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!1}).format(new Date(2020,2,3,0))==="24"),$fb18d541ea1ad717$var$_hasBuggyHour12Behavior}let $fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle=null;function $fb18d541ea1ad717$var$hasBuggyResolvedHourCycle(){return $fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle==null&&($fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle=new Intl.DateTimeFormat("fr",{hour:"numeric",hour12:!1}).resolvedOptions().hourCycle==="h12"),$fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle}function $fb18d541ea1ad717$var$getResolvedHourCycle(o,e){if(!e.timeStyle&&!e.hour)return;o=o.replace(/(-u-)?-nu-[a-zA-Z0-9]+/,""),o+=(o.includes("-u-")?"":"-u")+"-nu-latn";let n=$fb18d541ea1ad717$var$getCachedDateFormatter(o,{...e,timeZone:void 0}),a=parseInt(n.formatToParts(new Date(2020,2,3,0)).find(l=>l.type==="hour").value,10),s=parseInt(n.formatToParts(new Date(2020,2,3,23)).find(l=>l.type==="hour").value,10);if(a===0&&s===23)return"h23";if(a===24&&s===23)return"h24";if(a===0&&s===11)return"h11";if(a===12&&s===11)return"h12";throw new Error("Unexpected hour cycle result")}function N$1(o,e){const n=[];for(let a=0;a<o.length;a+=e)n.push(o.slice(a,a+e));return n}function $$1(o,e=$14e0f24ef4ac5c92$export$aa8b41735afcabd2()){return m(o)?o.toDate():o.toDate(e)}function w(o){return o instanceof $35ea8db9cb2ccb90$export$ca871e8dbb80966f}function m(o){return o instanceof $35ea8db9cb2ccb90$export$d3b7288e7994edea}function z(o){return w(o)||m(o)}function R$1(o){if(o instanceof Date){const e=o.getFullYear(),n=o.getMonth()+1;return new Date(e,n,0).getDate()}else return o.set({day:100}).day}function q$1(o,e){return o.compare(e)<0}function P(o,e){return o.compare(e)>0}function H(o,e,n){const a=$14e0f24ef4ac5c92$export$2061056d06d7cdf7(o,n);return e>a?o.subtract({days:a+7-e}):e===a?o:o.subtract({days:a-e})}function J(o,e,n){const a=$14e0f24ef4ac5c92$export$2061056d06d7cdf7(o,n),s=e===0?6:e-1;return a===s?o:a>s?o.add({days:7-a+s}):o.add({days:s-a})}function A(o,e){const n=[];let a=o.add({days:1});const s=e;for(;a.compare(s)<0;)n.push(a),a=a.add({days:1});return n}function y(o){const{dateObj:e,weekStartsOn:n,fixedWeeks:a,locale:s}=o,l=R$1(e),c=Array.from({length:l},(M,E)=>e.set({day:E+1})),d=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(e),u=$14e0f24ef4ac5c92$export$a2258d9c4118825c(e),f=H(d,n,s),p=J(u,n,s),_=A(f.subtract({days:1}),d),b=A(u,p.add({days:1})),v=_.length+c.length+b.length;if(a&&v<42){const M=42-v;let E=b[b.length-1];E||(E=$14e0f24ef4ac5c92$export$a2258d9c4118825c(e));const L=Array.from({length:M},(V,B)=>{const F=B+1;return E.add({days:F})});b.push(...L)}const k=_.concat(c,b),x=N$1(k,7);return{value:e,cells:k,rows:x}}function rt$1(o){const{numberOfMonths:e,dateObj:n,...a}=o,s=[];if(!e||e===1)return s.push(y({...a,dateObj:n})),s;s.push(y({...a,dateObj:n}));for(let l=1;l<e;l++){const c=n.add({months:l});s.push(y({...a,dateObj:c}))}return s}const sides=["top","right","bottom","left"],min$1=Math.min,max$1=Math.max,round=Math.round,floor$1=Math.floor,createCoords=o=>({x:o,y:o}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(o,e,n){return max$1(o,min$1(e,n))}function evaluate(o,e){return typeof o=="function"?o(e):o}function getSide(o){return o.split("-")[0]}function getAlignment(o){return o.split("-")[1]}function getOppositeAxis(o){return o==="x"?"y":"x"}function getAxisLength(o){return o==="y"?"height":"width"}function getSideAxis(o){return["top","bottom"].includes(getSide(o))?"y":"x"}function getAlignmentAxis(o){return getOppositeAxis(getSideAxis(o))}function getAlignmentSides(o,e,n){n===void 0&&(n=!1);const a=getAlignment(o),s=getAlignmentAxis(o),l=getAxisLength(s);let c=s==="x"?a===(n?"end":"start")?"right":"left":a==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(c=getOppositePlacement(c)),[c,getOppositePlacement(c)]}function getExpandedPlacements(o){const e=getOppositePlacement(o);return[getOppositeAlignmentPlacement(o),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(o){return o.replace(/start|end/g,e=>oppositeAlignmentMap[e])}function getSideList(o,e,n){const a=["left","right"],s=["right","left"],l=["top","bottom"],c=["bottom","top"];switch(o){case"top":case"bottom":return n?e?s:a:e?a:s;case"left":case"right":return e?l:c;default:return[]}}function getOppositeAxisPlacements(o,e,n,a){const s=getAlignment(o);let l=getSideList(getSide(o),n==="start",a);return s&&(l=l.map(c=>c+"-"+s),e&&(l=l.concat(l.map(getOppositeAlignmentPlacement)))),l}function getOppositePlacement(o){return o.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(o){return{top:0,right:0,bottom:0,left:0,...o}}function getPaddingObject(o){return typeof o!="number"?expandPaddingObject(o):{top:o,right:o,bottom:o,left:o}}function rectToClientRect(o){const{x:e,y:n,width:a,height:s}=o;return{width:a,height:s,top:n,left:e,right:e+a,bottom:n+s,x:e,y:n}}function computeCoordsFromPlacement(o,e,n){let{reference:a,floating:s}=o;const l=getSideAxis(e),c=getAlignmentAxis(e),d=getAxisLength(c),u=getSide(e),f=l==="y",p=a.x+a.width/2-s.width/2,_=a.y+a.height/2-s.height/2,b=a[d]/2-s[d]/2;let v;switch(u){case"top":v={x:p,y:a.y-s.height};break;case"bottom":v={x:p,y:a.y+a.height};break;case"right":v={x:a.x+a.width,y:_};break;case"left":v={x:a.x-s.width,y:_};break;default:v={x:a.x,y:a.y}}switch(getAlignment(e)){case"start":v[c]-=b*(n&&f?-1:1);break;case"end":v[c]+=b*(n&&f?-1:1);break}return v}const computePosition$1=async(o,e,n)=>{const{placement:a="bottom",strategy:s="absolute",middleware:l=[],platform:c}=n,d=l.filter(Boolean),u=await (c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:o,floating:e,strategy:s}),{x:p,y:_}=computeCoordsFromPlacement(f,a,u),b=a,v={},k=0;for(let x=0;x<d.length;x++){const{name:M,fn:E}=d[x],{x:L,y:V,data:B,reset:F}=await E({x:p,y:_,initialPlacement:a,placement:b,strategy:s,middlewareData:v,rects:f,platform:c,elements:{reference:o,floating:e}});p=L??p,_=V??_,v={...v,[M]:{...v[M],...B}},F&&k<=50&&(k++,typeof F=="object"&&(F.placement&&(b=F.placement),F.rects&&(f=F.rects===!0?await c.getElementRects({reference:o,floating:e,strategy:s}):F.rects),{x:p,y:_}=computeCoordsFromPlacement(f,b,u)),x=-1)}return{x:p,y:_,placement:b,strategy:s,middlewareData:v}};async function detectOverflow(o,e){var n;e===void 0&&(e={});const{x:a,y:s,platform:l,rects:c,elements:d,strategy:u}=o,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:_="floating",altBoundary:b=!1,padding:v=0}=evaluate(e,o),k=getPaddingObject(v),M=d[b?_==="floating"?"reference":"floating":_],E=rectToClientRect(await l.getClippingRect({element:(n=await (l.isElement==null?void 0:l.isElement(M)))==null||n?M:M.contextElement||await (l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:f,rootBoundary:p,strategy:u})),L=_==="floating"?{x:a,y:s,width:c.floating.width,height:c.floating.height}:c.reference,V=await (l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),B=await (l.isElement==null?void 0:l.isElement(V))?await (l.getScale==null?void 0:l.getScale(V))||{x:1,y:1}:{x:1,y:1},F=rectToClientRect(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:L,offsetParent:V,strategy:u}):L);return{top:(E.top-F.top+k.top)/B.y,bottom:(F.bottom-E.bottom+k.bottom)/B.y,left:(E.left-F.left+k.left)/B.x,right:(F.right-E.right+k.right)/B.x}}const arrow$2=o=>({name:"arrow",options:o,async fn(e){const{x:n,y:a,placement:s,rects:l,platform:c,elements:d,middlewareData:u}=e,{element:f,padding:p=0}=evaluate(o,e)||{};if(f==null)return{};const _=getPaddingObject(p),b={x:n,y:a},v=getAlignmentAxis(s),k=getAxisLength(v),x=await c.getDimensions(f),M=v==="y",E=M?"top":"left",L=M?"bottom":"right",V=M?"clientHeight":"clientWidth",B=l.reference[k]+l.reference[v]-b[v]-l.floating[k],F=b[v]-l.reference[v],j=await (c.getOffsetParent==null?void 0:c.getOffsetParent(f));let I=j?j[V]:0;(!I||!await (c.isElement==null?void 0:c.isElement(j)))&&(I=d.floating[V]||l.floating[k]);const U=B/2-F/2,W=I/2-x[k]/2-1,K=min$1(_[E],W),G=min$1(_[L],W),Z=K,oe=I-x[k]-G,Y=I/2-x[k]/2+U,se=clamp(Z,Y,oe),le=!u.arrow&&getAlignment(s)!=null&&Y!==se&&l.reference[k]/2-(Y<Z?K:G)-x[k]/2<0,ce=le?Y<Z?Y-Z:Y-oe:0;return{[v]:b[v]+ce,data:{[v]:se,centerOffset:Y-se-ce,...le&&{alignmentOffset:ce}},reset:le}}}),flip$1=function(o){return o===void 0&&(o={}),{name:"flip",options:o,async fn(e){var n,a;const{placement:s,middlewareData:l,rects:c,initialPlacement:d,platform:u,elements:f}=e,{mainAxis:p=!0,crossAxis:_=!0,fallbackPlacements:b,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:x=!0,...M}=evaluate(o,e);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const E=getSide(s),L=getSideAxis(d),V=getSide(d)===d,B=await (u.isRTL==null?void 0:u.isRTL(f.floating)),F=b||(V||!x?[getOppositePlacement(d)]:getExpandedPlacements(d)),j=k!=="none";!b&&j&&F.push(...getOppositeAxisPlacements(d,x,k,B));const I=[d,...F],U=await detectOverflow(e,M),W=[];let K=((a=l.flip)==null?void 0:a.overflows)||[];if(p&&W.push(U[E]),_){const Y=getAlignmentSides(s,c,B);W.push(U[Y[0]],U[Y[1]])}if(K=[...K,{placement:s,overflows:W}],!W.every(Y=>Y<=0)){var G,Z;const Y=(((G=l.flip)==null?void 0:G.index)||0)+1,se=I[Y];if(se)return{data:{index:Y,overflows:K},reset:{placement:se}};let le=(Z=K.filter(ce=>ce.overflows[0]<=0).sort((ce,de)=>ce.overflows[1]-de.overflows[1])[0])==null?void 0:Z.placement;if(!le)switch(v){case"bestFit":{var oe;const ce=(oe=K.filter(de=>{if(j){const ge=getSideAxis(de.placement);return ge===L||ge==="y"}return!0}).map(de=>[de.placement,de.overflows.filter(ge=>ge>0).reduce((ge,qe)=>ge+qe,0)]).sort((de,ge)=>de[1]-ge[1])[0])==null?void 0:oe[0];ce&&(le=ce);break}case"initialPlacement":le=d;break}if(s!==le)return{reset:{placement:le}}}return{}}}};function getSideOffsets(o,e){return{top:o.top-e.height,right:o.right-e.width,bottom:o.bottom-e.height,left:o.left-e.width}}function isAnySideFullyClipped(o){return sides.some(e=>o[e]>=0)}const hide$1=function(o){return o===void 0&&(o={}),{name:"hide",options:o,async fn(e){const{rects:n}=e,{strategy:a="referenceHidden",...s}=evaluate(o,e);switch(a){case"referenceHidden":{const l=await detectOverflow(e,{...s,elementContext:"reference"}),c=getSideOffsets(l,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:isAnySideFullyClipped(c)}}}case"escaped":{const l=await detectOverflow(e,{...s,altBoundary:!0}),c=getSideOffsets(l,n.floating);return{data:{escapedOffsets:c,escaped:isAnySideFullyClipped(c)}}}default:return{}}}}};async function convertValueToCoords(o,e){const{placement:n,platform:a,elements:s}=o,l=await (a.isRTL==null?void 0:a.isRTL(s.floating)),c=getSide(n),d=getAlignment(n),u=getSideAxis(n)==="y",f=["left","top"].includes(c)?-1:1,p=l&&u?-1:1,_=evaluate(e,o);let{mainAxis:b,crossAxis:v,alignmentAxis:k}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:_.mainAxis||0,crossAxis:_.crossAxis||0,alignmentAxis:_.alignmentAxis};return d&&typeof k=="number"&&(v=d==="end"?k*-1:k),u?{x:v*p,y:b*f}:{x:b*f,y:v*p}}const offset$1=function(o){return o===void 0&&(o=0),{name:"offset",options:o,async fn(e){var n,a;const{x:s,y:l,placement:c,middlewareData:d}=e,u=await convertValueToCoords(e,o);return c===((n=d.offset)==null?void 0:n.placement)&&(a=d.arrow)!=null&&a.alignmentOffset?{}:{x:s+u.x,y:l+u.y,data:{...u,placement:c}}}}},shift$1=function(o){return o===void 0&&(o={}),{name:"shift",options:o,async fn(e){const{x:n,y:a,placement:s}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:d={fn:M=>{let{x:E,y:L}=M;return{x:E,y:L}}},...u}=evaluate(o,e),f={x:n,y:a},p=await detectOverflow(e,u),_=getSideAxis(getSide(s)),b=getOppositeAxis(_);let v=f[b],k=f[_];if(l){const M=b==="y"?"top":"left",E=b==="y"?"bottom":"right",L=v+p[M],V=v-p[E];v=clamp(L,v,V)}if(c){const M=_==="y"?"top":"left",E=_==="y"?"bottom":"right",L=k+p[M],V=k-p[E];k=clamp(L,k,V)}const x=d.fn({...e,[b]:v,[_]:k});return{...x,data:{x:x.x-n,y:x.y-a,enabled:{[b]:l,[_]:c}}}}}},limitShift$1=function(o){return o===void 0&&(o={}),{options:o,fn(e){const{x:n,y:a,placement:s,rects:l,middlewareData:c}=e,{offset:d=0,mainAxis:u=!0,crossAxis:f=!0}=evaluate(o,e),p={x:n,y:a},_=getSideAxis(s),b=getOppositeAxis(_);let v=p[b],k=p[_];const x=evaluate(d,e),M=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(u){const V=b==="y"?"height":"width",B=l.reference[b]-l.floating[V]+M.mainAxis,F=l.reference[b]+l.reference[V]-M.mainAxis;v<B?v=B:v>F&&(v=F)}if(f){var E,L;const V=b==="y"?"width":"height",B=["top","left"].includes(getSide(s)),F=l.reference[_]-l.floating[V]+(B&&((E=c.offset)==null?void 0:E[_])||0)+(B?0:M.crossAxis),j=l.reference[_]+l.reference[V]+(B?0:((L=c.offset)==null?void 0:L[_])||0)-(B?M.crossAxis:0);k<F?k=F:k>j&&(k=j)}return{[b]:v,[_]:k}}}},size$1=function(o){return o===void 0&&(o={}),{name:"size",options:o,async fn(e){var n,a;const{placement:s,rects:l,platform:c,elements:d}=e,{apply:u=()=>{},...f}=evaluate(o,e),p=await detectOverflow(e,f),_=getSide(s),b=getAlignment(s),v=getSideAxis(s)==="y",{width:k,height:x}=l.floating;let M,E;_==="top"||_==="bottom"?(M=_,E=b===(await (c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(E=_,M=b==="end"?"top":"bottom");const L=x-p.top-p.bottom,V=k-p.left-p.right,B=min$1(x-p[M],L),F=min$1(k-p[E],V),j=!e.middlewareData.shift;let I=B,U=F;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(U=V),(a=e.middlewareData.shift)!=null&&a.enabled.y&&(I=L),j&&!b){const K=max$1(p.left,0),G=max$1(p.right,0),Z=max$1(p.top,0),oe=max$1(p.bottom,0);v?U=k-2*(K!==0||G!==0?K+G:max$1(p.left,p.right)):I=x-2*(Z!==0||oe!==0?Z+oe:max$1(p.top,p.bottom))}await u({...e,availableWidth:U,availableHeight:I});const W=await c.getDimensions(d.floating);return k!==W.width||x!==W.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(o){return isNode(o)?(o.nodeName||"").toLowerCase():"#document"}function getWindow(o){var e;return(o==null||(e=o.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement(o){var e;return(e=(isNode(o)?o.ownerDocument:o.document)||window.document)==null?void 0:e.documentElement}function isNode(o){return hasWindow()?o instanceof Node||o instanceof getWindow(o).Node:!1}function isElement(o){return hasWindow()?o instanceof Element||o instanceof getWindow(o).Element:!1}function isHTMLElement(o){return hasWindow()?o instanceof HTMLElement||o instanceof getWindow(o).HTMLElement:!1}function isShadowRoot(o){return!hasWindow()||typeof ShadowRoot>"u"?!1:o instanceof ShadowRoot||o instanceof getWindow(o).ShadowRoot}function isOverflowElement(o){const{overflow:e,overflowX:n,overflowY:a,display:s}=getComputedStyle$1(o);return/auto|scroll|overlay|hidden|clip/.test(e+a+n)&&!["inline","contents"].includes(s)}function isTableElement(o){return["table","td","th"].includes(getNodeName(o))}function isTopLayer(o){return[":popover-open",":modal"].some(e=>{try{return o.matches(e)}catch{return!1}})}function isContainingBlock(o){const e=isWebKit(),n=isElement(o)?getComputedStyle$1(o):o;return["transform","translate","scale","rotate","perspective"].some(a=>n[a]?n[a]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(n.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(n.contain||"").includes(a))}function getContainingBlock(o){let e=getParentNode(o);for(;isHTMLElement(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;if(isTopLayer(e))return null;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(o){return["html","body","#document"].includes(getNodeName(o))}function getComputedStyle$1(o){return getWindow(o).getComputedStyle(o)}function getNodeScroll(o){return isElement(o)?{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}:{scrollLeft:o.scrollX,scrollTop:o.scrollY}}function getParentNode(o){if(getNodeName(o)==="html")return o;const e=o.assignedSlot||o.parentNode||isShadowRoot(o)&&o.host||getDocumentElement(o);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(o){const e=getParentNode(o);return isLastTraversableNode(e)?o.ownerDocument?o.ownerDocument.body:o.body:isHTMLElement(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(o,e,n){var a;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=getNearestOverflowAncestor(o),l=s===((a=o.ownerDocument)==null?void 0:a.body),c=getWindow(s);if(l){const d=getFrameElement(c);return e.concat(c,c.visualViewport||[],isOverflowElement(s)?s:[],d&&n?getOverflowAncestors(d):[])}return e.concat(s,getOverflowAncestors(s,[],n))}function getFrameElement(o){return o.parent&&Object.getPrototypeOf(o.parent)?o.frameElement:null}function getCssDimensions(o){const e=getComputedStyle$1(o);let n=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const s=isHTMLElement(o),l=s?o.offsetWidth:n,c=s?o.offsetHeight:a,d=round(n)!==l||round(a)!==c;return d&&(n=l,a=c),{width:n,height:a,$:d}}function unwrapElement$1(o){return isElement(o)?o:o.contextElement}function getScale(o){const e=unwrapElement$1(o);if(!isHTMLElement(e))return createCoords(1);const n=e.getBoundingClientRect(),{width:a,height:s,$:l}=getCssDimensions(e);let c=(l?round(n.width):n.width)/a,d=(l?round(n.height):n.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const noOffsets=createCoords(0);function getVisualOffsets(o){const e=getWindow(o);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(o,e,n){return e===void 0&&(e=!1),!n||e&&n!==getWindow(o)?!1:e}function getBoundingClientRect(o,e,n,a){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=o.getBoundingClientRect(),l=unwrapElement$1(o);let c=createCoords(1);e&&(a?isElement(a)&&(c=getScale(a)):c=getScale(o));const d=shouldAddVisualOffsets(l,n,a)?getVisualOffsets(l):createCoords(0);let u=(s.left+d.x)/c.x,f=(s.top+d.y)/c.y,p=s.width/c.x,_=s.height/c.y;if(l){const b=getWindow(l),v=a&&isElement(a)?getWindow(a):a;let k=b,x=getFrameElement(k);for(;x&&a&&v!==k;){const M=getScale(x),E=x.getBoundingClientRect(),L=getComputedStyle$1(x),V=E.left+(x.clientLeft+parseFloat(L.paddingLeft))*M.x,B=E.top+(x.clientTop+parseFloat(L.paddingTop))*M.y;u*=M.x,f*=M.y,p*=M.x,_*=M.y,u+=V,f+=B,k=getWindow(x),x=getFrameElement(k)}}return rectToClientRect({width:p,height:_,x:u,y:f})}function getWindowScrollBarX(o,e){const n=getNodeScroll(o).scrollLeft;return e?e.left+n:getBoundingClientRect(getDocumentElement(o)).left+n}function getHTMLOffset(o,e,n){n===void 0&&(n=!1);const a=o.getBoundingClientRect(),s=a.left+e.scrollLeft-(n?0:getWindowScrollBarX(o,a)),l=a.top+e.scrollTop;return{x:s,y:l}}function convertOffsetParentRelativeRectToViewportRelativeRect(o){let{elements:e,rect:n,offsetParent:a,strategy:s}=o;const l=s==="fixed",c=getDocumentElement(a),d=e?isTopLayer(e.floating):!1;if(a===c||d&&l)return n;let u={scrollLeft:0,scrollTop:0},f=createCoords(1);const p=createCoords(0),_=isHTMLElement(a);if((_||!_&&!l)&&((getNodeName(a)!=="body"||isOverflowElement(c))&&(u=getNodeScroll(a)),isHTMLElement(a))){const v=getBoundingClientRect(a);f=getScale(a),p.x=v.x+a.clientLeft,p.y=v.y+a.clientTop}const b=c&&!_&&!l?getHTMLOffset(c,u,!0):createCoords(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-u.scrollLeft*f.x+p.x+b.x,y:n.y*f.y-u.scrollTop*f.y+p.y+b.y}}function getClientRects(o){return Array.from(o.getClientRects())}function getDocumentRect(o){const e=getDocumentElement(o),n=getNodeScroll(o),a=o.ownerDocument.body,s=max$1(e.scrollWidth,e.clientWidth,a.scrollWidth,a.clientWidth),l=max$1(e.scrollHeight,e.clientHeight,a.scrollHeight,a.clientHeight);let c=-n.scrollLeft+getWindowScrollBarX(o);const d=-n.scrollTop;return getComputedStyle$1(a).direction==="rtl"&&(c+=max$1(e.clientWidth,a.clientWidth)-s),{width:s,height:l,x:c,y:d}}function getViewportRect(o,e){const n=getWindow(o),a=getDocumentElement(o),s=n.visualViewport;let l=a.clientWidth,c=a.clientHeight,d=0,u=0;if(s){l=s.width,c=s.height;const f=isWebKit();(!f||f&&e==="fixed")&&(d=s.offsetLeft,u=s.offsetTop)}return{width:l,height:c,x:d,y:u}}function getInnerBoundingClientRect(o,e){const n=getBoundingClientRect(o,!0,e==="fixed"),a=n.top+o.clientTop,s=n.left+o.clientLeft,l=isHTMLElement(o)?getScale(o):createCoords(1),c=o.clientWidth*l.x,d=o.clientHeight*l.y,u=s*l.x,f=a*l.y;return{width:c,height:d,x:u,y:f}}function getClientRectFromClippingAncestor(o,e,n){let a;if(e==="viewport")a=getViewportRect(o,n);else if(e==="document")a=getDocumentRect(getDocumentElement(o));else if(isElement(e))a=getInnerBoundingClientRect(e,n);else{const s=getVisualOffsets(o);a={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return rectToClientRect(a)}function hasFixedPositionAncestor(o,e){const n=getParentNode(o);return n===e||!isElement(n)||isLastTraversableNode(n)?!1:getComputedStyle$1(n).position==="fixed"||hasFixedPositionAncestor(n,e)}function getClippingElementAncestors(o,e){const n=e.get(o);if(n)return n;let a=getOverflowAncestors(o,[],!1).filter(d=>isElement(d)&&getNodeName(d)!=="body"),s=null;const l=getComputedStyle$1(o).position==="fixed";let c=l?getParentNode(o):o;for(;isElement(c)&&!isLastTraversableNode(c);){const d=getComputedStyle$1(c),u=isContainingBlock(c);!u&&d.position==="fixed"&&(s=null),(l?!u&&!s:!u&&d.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||isOverflowElement(c)&&!u&&hasFixedPositionAncestor(o,c))?a=a.filter(p=>p!==c):s=d,c=getParentNode(c)}return e.set(o,a),a}function getClippingRect(o){let{element:e,boundary:n,rootBoundary:a,strategy:s}=o;const c=[...n==="clippingAncestors"?isTopLayer(e)?[]:getClippingElementAncestors(e,this._c):[].concat(n),a],d=c[0],u=c.reduce((f,p)=>{const _=getClientRectFromClippingAncestor(e,p,s);return f.top=max$1(_.top,f.top),f.right=min$1(_.right,f.right),f.bottom=min$1(_.bottom,f.bottom),f.left=max$1(_.left,f.left),f},getClientRectFromClippingAncestor(e,d,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function getDimensions(o){const{width:e,height:n}=getCssDimensions(o);return{width:e,height:n}}function getRectRelativeToOffsetParent(o,e,n){const a=isHTMLElement(e),s=getDocumentElement(e),l=n==="fixed",c=getBoundingClientRect(o,!0,l,e);let d={scrollLeft:0,scrollTop:0};const u=createCoords(0);if(a||!a&&!l)if((getNodeName(e)!=="body"||isOverflowElement(s))&&(d=getNodeScroll(e)),a){const b=getBoundingClientRect(e,!0,l,e);u.x=b.x+e.clientLeft,u.y=b.y+e.clientTop}else s&&(u.x=getWindowScrollBarX(s));const f=s&&!a&&!l?getHTMLOffset(s,d):createCoords(0),p=c.left+d.scrollLeft-u.x-f.x,_=c.top+d.scrollTop-u.y-f.y;return{x:p,y:_,width:c.width,height:c.height}}function isStaticPositioned(o){return getComputedStyle$1(o).position==="static"}function getTrueOffsetParent(o,e){if(!isHTMLElement(o)||getComputedStyle$1(o).position==="fixed")return null;if(e)return e(o);let n=o.offsetParent;return getDocumentElement(o)===n&&(n=n.ownerDocument.body),n}function getOffsetParent(o,e){const n=getWindow(o);if(isTopLayer(o))return n;if(!isHTMLElement(o)){let s=getParentNode(o);for(;s&&!isLastTraversableNode(s);){if(isElement(s)&&!isStaticPositioned(s))return s;s=getParentNode(s)}return n}let a=getTrueOffsetParent(o,e);for(;a&&isTableElement(a)&&isStaticPositioned(a);)a=getTrueOffsetParent(a,e);return a&&isLastTraversableNode(a)&&isStaticPositioned(a)&&!isContainingBlock(a)?n:a||getContainingBlock(o)||n}const getElementRects=async function(o){const e=this.getOffsetParent||getOffsetParent,n=this.getDimensions,a=await n(o.floating);return{reference:getRectRelativeToOffsetParent(o.reference,await e(o.floating),o.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function isRTL(o){return getComputedStyle$1(o).direction==="rtl"}const platform$2={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(o,e){return o.x===e.x&&o.y===e.y&&o.width===e.width&&o.height===e.height}function observeMove(o,e){let n=null,a;const s=getDocumentElement(o);function l(){var d;clearTimeout(a),(d=n)==null||d.disconnect(),n=null}function c(d,u){d===void 0&&(d=!1),u===void 0&&(u=1),l();const f=o.getBoundingClientRect(),{left:p,top:_,width:b,height:v}=f;if(d||e(),!b||!v)return;const k=floor$1(_),x=floor$1(s.clientWidth-(p+b)),M=floor$1(s.clientHeight-(_+v)),E=floor$1(p),V={rootMargin:-k+"px "+-x+"px "+-M+"px "+-E+"px",threshold:max$1(0,min$1(1,u))||1};let B=!0;function F(j){const I=j[0].intersectionRatio;if(I!==u){if(!B)return c();I?c(!1,I):a=setTimeout(()=>{c(!1,1e-7)},1e3)}I===1&&!rectsAreEqual(f,o.getBoundingClientRect())&&c(),B=!1}try{n=new IntersectionObserver(F,{...V,root:s.ownerDocument})}catch{n=new IntersectionObserver(F,V)}n.observe(o)}return c(!0),l}function autoUpdate(o,e,n,a){a===void 0&&(a={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:u=!1}=a,f=unwrapElement$1(o),p=s||l?[...f?getOverflowAncestors(f):[],...getOverflowAncestors(e)]:[];p.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),l&&E.addEventListener("resize",n)});const _=f&&d?observeMove(f,n):null;let b=-1,v=null;c&&(v=new ResizeObserver(E=>{let[L]=E;L&&L.target===f&&v&&(v.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var V;(V=v)==null||V.observe(e)})),n()}),f&&!u&&v.observe(f),v.observe(e));let k,x=u?getBoundingClientRect(o):null;u&&M();function M(){const E=getBoundingClientRect(o);x&&!rectsAreEqual(x,E)&&n(),x=E,k=requestAnimationFrame(M)}return n(),()=>{var E;p.forEach(L=>{s&&L.removeEventListener("scroll",n),l&&L.removeEventListener("resize",n)}),_?.(),(E=v)==null||E.disconnect(),v=null,u&&cancelAnimationFrame(k)}}const offset=offset$1,shift=shift$1,flip=flip$1,size=size$1,hide=hide$1,arrow$1=arrow$2,limitShift=limitShift$1,computePosition=(o,e,n)=>{const a=new Map,s={platform:platform$2,...n},l={...s.platform,_c:a};return computePosition$1(o,e,{...s,platform:l})};function isComponentPublicInstance(o){return o!=null&&typeof o=="object"&&"$el"in o}function unwrapElement(o){if(isComponentPublicInstance(o)){const e=o.$el;return isNode(e)&&getNodeName(e)==="#comment"?null:e}return o}function toValue(o){return typeof o=="function"?o():unref(o)}function arrow(o){return{name:"arrow",options:o,fn(e){const n=unwrapElement(toValue(o.element));return n==null?{}:arrow$1({element:n,padding:o.padding}).fn(e)}}}function getDPR(o){return typeof window>"u"?1:(o.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(o,e){const n=getDPR(o);return Math.round(e*n)/n}function useFloating(o,e,n){n===void 0&&(n={});const a=n.whileElementsMounted,s=computed(()=>{var I;return(I=toValue(n.open))!=null?I:!0}),l=computed(()=>toValue(n.middleware)),c=computed(()=>{var I;return(I=toValue(n.placement))!=null?I:"bottom"}),d=computed(()=>{var I;return(I=toValue(n.strategy))!=null?I:"absolute"}),u=computed(()=>{var I;return(I=toValue(n.transform))!=null?I:!0}),f=computed(()=>unwrapElement(o.value)),p=computed(()=>unwrapElement(e.value)),_=ref(0),b=ref(0),v=ref(d.value),k=ref(c.value),x=shallowRef({}),M=ref(!1),E=computed(()=>{const I={position:v.value,left:"0",top:"0"};if(!p.value)return I;const U=roundByDPR(p.value,_.value),W=roundByDPR(p.value,b.value);return u.value?{...I,transform:"translate("+U+"px, "+W+"px)",...getDPR(p.value)>=1.5&&{willChange:"transform"}}:{position:v.value,left:U+"px",top:W+"px"}});let L;function V(){if(f.value==null||p.value==null)return;const I=s.value;computePosition(f.value,p.value,{middleware:l.value,placement:c.value,strategy:d.value}).then(U=>{_.value=U.x,b.value=U.y,v.value=U.strategy,k.value=U.placement,x.value=U.middlewareData,M.value=I!==!1})}function B(){typeof L=="function"&&(L(),L=void 0)}function F(){if(B(),a===void 0){V();return}if(f.value!=null&&p.value!=null){L=a(f.value,p.value,V);return}}function j(){s.value||(M.value=!1)}return watch([l,c,d,s],V,{flush:"sync"}),watch([f,p],F,{flush:"sync"}),watch(s,j,{flush:"sync"}),getCurrentScope()&&onScopeDispose(B),{x:shallowReadonly(_),y:shallowReadonly(b),strategy:shallowReadonly(v),placement:shallowReadonly(k),middlewareData:shallowReadonly(x),isPositioned:shallowReadonly(M),floatingStyles:E,update:V}}function Q$1(o,e){const n=typeof o=="string"&&!e?`${o}Context`:e,a=Symbol(n);return[s=>{const l=inject(a,s);if(l||l===null)return l;throw new Error(`Injection \`${a.toString()}\` not found. Component must be used within ${Array.isArray(o)?`one of the following components: ${o.join(", ")}`:`\`${o}\``}`)},s=>(provide(a,s),s)]}function Wt(o,e,n){const a=n.originalEvent.target,s=new CustomEvent(o,{bubbles:!1,cancelable:!0,detail:n});e&&a.addEventListener(o,e,{once:!0}),a.dispatchEvent(s)}function jt(o,e=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){return Math.min(n,Math.max(e,o))}function vt$1(o){return o==null}function qt(o){const{defaultValue:e,defaultPlaceholder:n,granularity:a="day",locale:s="en"}=o;if(Array.isArray(e)&&e.length)return e.at(-1).copy();if(e&&!Array.isArray(e))return e.copy();if(n)return n.copy();const l=new Date,c=l.getFullYear(),d=l.getMonth()+1,u=l.getDate(),f=["hour","minute","second"],p=new $fb18d541ea1ad717$export$ad991b66133851cf(s),_=$64244302c3013299$export$dd0bbc9b26defe37(p.resolvedOptions().calendar);return f.includes(a??"day")?$11d87f3f76e88657$export$b4a036af3fc0b032(new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(c,d,u,0,0,0),_):$11d87f3f76e88657$export$b4a036af3fc0b032(new $35ea8db9cb2ccb90$export$99faa760c7908e4f(c,d,u),_)}function xl(o){const e=o.querySelector("[data-selected]");if(e)return e.focus();const n=o.querySelector("[data-today]");if(n)return n.focus();const a=o.querySelector("[data-radix-vue-calendar-day]");if(a)return a.focus()}function ei(o,e){var n;const a=shallowRef();return watchEffect(()=>{a.value=o()},{...e,flush:(n=void 0)!=null?n:"sync"}),readonly(a)}function yt(o){return getCurrentScope()?(onScopeDispose(o),!0):!1}function ia(){const o=new Set,e=n=>{o.delete(n)};return{on:n=>{o.add(n);const a=()=>e(n);return yt(a),{off:a}},off:e,trigger:(...n)=>Promise.all(Array.from(o).map(a=>a(...n)))}}function ai(o){let e=!1,n;const a=effectScope(!0);return(...s)=>(e||(n=a.run(()=>o(...s)),e=!0),n)}function Sl(o){let e=0,n,a;const s=()=>{e-=1,a&&e<=0&&(a.stop(),n=void 0,a=void 0)};return(...l)=>(e+=1,n||(a=effectScope(!0),n=a.run(()=>o(...l))),yt(s),n)}function Ke(o){return typeof o=="function"?o():unref(o)}const Ye=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const oi=o=>typeof o<"u",si=Object.prototype.toString,ri=o=>si.call(o)==="[object Object]",Va=()=>{},Ko=ii();function ii(){var o,e;return Ye&&((o=window?.navigator)==null?void 0:o.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function Pl(o,e){function n(...a){return new Promise((s,l)=>{Promise.resolve(o(()=>e.apply(this,a),{fn:e,thisArg:this,args:a})).then(s).catch(l)})}return n}function ui(o,e={}){let n,a,s=Va;const l=c=>{clearTimeout(c),s(),s=Va};return c=>{const d=Ke(o),u=Ke(e.maxWait);return n&&l(n),d<=0||u!==void 0&&u<=0?(a&&(l(a),a=null),Promise.resolve(c())):new Promise((f,p)=>{s=e.rejectOnCancel?p:f,u&&!a&&(a=setTimeout(()=>{n&&l(n),a=null,f(c())},u)),n=setTimeout(()=>{a&&l(a),a=null,f(c())},d)})}}function $l(o){return getCurrentInstance()}function It(o,e=1e4){return customRef((n,a)=>{let s=Ke(o),l;const c=()=>setTimeout(()=>{s=Ke(o),a()},Ke(e));return yt(()=>{clearTimeout(l)}),{get(){return n(),s},set(d){s=d,a(),clearTimeout(l),l=c()}}})}function Hn(o,e=200,n={}){return Pl(ui(e,n),o)}function pi(o,e){$l()&&onBeforeUnmount(o,e)}function Wn(o,e,n={}){const{immediate:a=!0}=n,s=ref(!1);let l=null;function c(){l&&(clearTimeout(l),l=null)}function d(){s.value=!1,c()}function u(...f){c(),s.value=!0,l=setTimeout(()=>{s.value=!1,l=null,o(...f)},Ke(e))}return a&&(s.value=!0,Ye&&u()),yt(d),{isPending:readonly(s),start:u,stop:d}}function hi(o,e,n){const a=watch(o,(...s)=>(nextTick(()=>a()),e(...s)),n);return a}function $e(o){var e;const n=Ke(o);return(e=n?.$el)!=null?e:n}const Tt=Ye?window:void 0;function Le(...o){let e,n,a,s;if(typeof o[0]=="string"||Array.isArray(o[0])?([n,a,s]=o,e=Tt):[e,n,a,s]=o,!e)return Va;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const l=[],c=()=>{l.forEach(p=>p()),l.length=0},d=(p,_,b,v)=>(p.addEventListener(_,b,v),()=>p.removeEventListener(_,b,v)),u=watch(()=>[$e(e),Ke(s)],([p,_])=>{if(c(),!p)return;const b=ri(_)?{..._}:_;l.push(...n.flatMap(v=>a.map(k=>d(p,v,k,b))))},{immediate:!0,flush:"post"}),f=()=>{u(),c()};return yt(f),f}function yi(o){return typeof o=="function"?o:typeof o=="string"?e=>e.key===o:Array.isArray(o)?e=>o.includes(e.key):()=>!0}function jn(...o){let e,n,a={};o.length===3?(e=o[0],n=o[1],a=o[2]):o.length===2?typeof o[1]=="object"?(e=!0,n=o[0],a=o[1]):(e=o[0],n=o[1]):(e=!0,n=o[0]);const{target:s=Tt,eventName:l="keydown",passive:c=!1,dedupe:d=!1}=a,u=yi(e);return Le(s,l,f=>{f.repeat&&Ke(d)||u(f)&&n(f)},c)}function ja(){const o=ref(!1),e=getCurrentInstance();return e&&onMounted(()=>{o.value=!0},e),o}function Bl(o){const e=ja();return computed(()=>(e.value,!!o()))}function bi(o){return JSON.parse(JSON.stringify(o))}function Je(o,e,n={}){const{window:a=Tt,...s}=n;let l;const c=Bl(()=>a&&"ResizeObserver"in a),d=()=>{l&&(l.disconnect(),l=void 0)},u=computed(()=>Array.isArray(o)?o.map(_=>$e(_)):[$e(o)]),f=watch(u,_=>{if(d(),c.value&&a){l=new ResizeObserver(e);for(const b of _)b&&l.observe(b,s)}},{immediate:!0,flush:"post"}),p=()=>{d(),f()};return yt(p),{isSupported:c,stop:p}}function ne$1(o,e,n,a={}){var s,l,c;const{clone:d=!1,passive:u=!1,eventName:f,deep:p=!1,defaultValue:_,shouldEmit:b}=a,v=getCurrentInstance(),k=n||v?.emit||((s=v?.$emit)==null?void 0:s.bind(v))||((c=(l=v?.proxy)==null?void 0:l.$emit)==null?void 0:c.bind(v?.proxy));let x=f;e||(e="modelValue"),x=x||`update:${e.toString()}`;const M=V=>d?typeof d=="function"?d(V):bi(V):V,E=()=>oi(o[e])?M(o[e]):_,L=V=>{b?b(V)&&k(x,V):k(x,V)};if(u){const V=E(),B=ref(V);let F=!1;return watch(()=>o[e],j=>{F||(F=!0,B.value=M(j),nextTick(()=>F=!1))}),watch(B,j=>{!F&&(j!==o[e]||p)&&L(j)},{deep:p}),B}else return computed({get(){return E()},set(V){L(V)}})}function Ua(o){return o?o.flatMap(e=>e.type===Fragment?Ua(e.children):[e]):[]}const _i$1=["INPUT","TEXTAREA"];function Rt(o,e,n,a={}){if(!e||a.enableIgnoredElement&&_i$1.includes(e.nodeName))return null;const{arrowKeyOptions:s="both",attributeName:l="[data-radix-vue-collection-item]",itemsArray:c=[],loop:d=!0,dir:u="ltr",preventScroll:f=!0,focus:p=!1}=a,[_,b,v,k,x,M]=[o.key==="ArrowRight",o.key==="ArrowLeft",o.key==="ArrowUp",o.key==="ArrowDown",o.key==="Home",o.key==="End"],E=v||k,L=_||b;if(!x&&!M&&(!E&&!L||s==="vertical"&&L||s==="horizontal"&&E))return null;const V=n?Array.from(n.querySelectorAll(l)):c;if(!V.length)return null;f&&o.preventDefault();let B=null;return L||E?B=Al(V,e,{goForward:E?k:u==="ltr"?_:b,loop:d}):x?B=V.at(0)||null:M&&(B=V.at(-1)||null),p&&B?.focus(),B}function Al(o,e,n,a=o.length){if(--a===0)return null;const s=o.indexOf(e),l=n.goForward?s+1:s-1;if(!n.loop&&(l<0||l>=o.length))return null;const c=(l+o.length)%o.length,d=o[c];return d?d.hasAttribute("disabled")&&d.getAttribute("disabled")!=="false"?Al(o,d,n,a):d:null}function gn(o){if(o===null||typeof o!="object")return!1;const e=Object.getPrototypeOf(o);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in o?!1:Symbol.toStringTag in o?Object.prototype.toString.call(o)==="[object Module]":!0}function Pn(o,e,n=".",a){if(!gn(e))return Pn(o,{},n);const s=Object.assign({},e);for(const l in o){if(l==="__proto__"||l==="constructor")continue;const c=o[l];c!=null&&(Array.isArray(c)&&Array.isArray(s[l])?s[l]=[...c,...s[l]]:gn(c)&&gn(s[l])?s[l]=Pn(c,s[l],(n?`${n}.`:"")+l.toString()):s[l]=c)}return s}function xi(o){return(...e)=>e.reduce((n,a)=>Pn(n,a,""),{})}const Si=xi(),[Ga,Ei]=Q$1("ConfigProvider");let Pi="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Di=(o=21)=>{let e="",n=o;for(;n--;)e+=Pi[Math.random()*64|0];return e};const $i=Sl(()=>{const o=ref(new Map),e=ref(),n=computed(()=>{for(const c of o.value.values())if(c)return!0;return!1}),a=Ga({scrollBody:ref(!0)});let s=null;const l=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.body.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",Ko&&s?.(),e.value=void 0};return watch(n,(c,d)=>{var u;if(!Ye)return;if(!c){d&&l();return}e.value===void 0&&(e.value=document.body.style.overflow);const f=window.innerWidth-document.documentElement.clientWidth,p={padding:f,margin:0},_=(u=a.scrollBody)!=null&&u.value?typeof a.scrollBody.value=="object"?Si({padding:a.scrollBody.value.padding===!0?f:a.scrollBody.value.padding,margin:a.scrollBody.value.margin===!0?f:a.scrollBody.value.margin},p):p:{padding:0,margin:0};f>0&&(document.body.style.paddingRight=typeof _.padding=="number"?`${_.padding}px`:String(_.padding),document.body.style.marginRight=typeof _.margin=="number"?`${_.margin}px`:String(_.margin),document.body.style.setProperty("--scrollbar-width",`${f}px`),document.body.style.overflow="hidden"),Ko&&(s=Le(document,"touchmove",b=>Bi(b),{passive:!1})),nextTick(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),o});function ha(o){const e=Di(6),n=$i();n.value.set(e,o??!1);const a=computed({get:()=>n.value.get(e)??!1,set:s=>n.value.set(e,s)});return pi(()=>{n.value.delete(e)}),a}function Ol(o){const e=window.getComputedStyle(o);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&o.clientWidth<o.scrollWidth||e.overflowY==="auto"&&o.clientHeight<o.scrollHeight)return!0;{const n=o.parentNode;return!n||n.tagName==="BODY"?!1:Ol(n)}}function Bi(o){const e=o||window.event,n=e.target;return n instanceof Element&&Ol(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}const Ii="data-radix-vue-collection-item";function Me(o,e=Ii){const n=Symbol();return{createCollection:a=>{const s=ref([]);function l(){const c=$e(a);return c?s.value=Array.from(c.querySelectorAll(`[${e}]:not([data-disabled])`)):s.value=[]}return onBeforeUpdate(()=>{s.value=[]}),onMounted(l),onUpdated(l),watch(()=>a?.value,l,{immediate:!0}),provide(n,s),s},injectCollection:()=>inject(n,ref([]))}}function Un(o){const e=ref(o);function n(){return e.value}function a(x){e.value=x}function s(x,M){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,M).format(x)}function l(x,M=!0){return z(x)&&M?s($$1(x),{dateStyle:"long",timeStyle:"long"}):s($$1(x),{dateStyle:"long"})}function c(x,M={}){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{month:"long",year:"numeric",...M}).format(x)}function d(x,M={}){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{month:"long",...M}).format(x)}function u(){const x=$14e0f24ef4ac5c92$export$d0bdf45af03a6ea3($14e0f24ef4ac5c92$export$aa8b41735afcabd2());return[1,2,3,4,5,6,7,8,9,10,11,12].map(M=>({label:d($$1(x.set({month:M}))),value:M}))}function f(x,M={}){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{year:"numeric",...M}).format(x)}function p(x,M){return m(x)?new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{...M,timeZone:x.timeZone}).formatToParts($$1(x)):new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,M).formatToParts($$1(x))}function _(x,M="narrow"){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{weekday:M}).format(x)}function b(x){var M;return((M=new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{hour:"numeric",minute:"numeric"}).formatToParts(x).find(E=>E.type==="dayPeriod"))==null?void 0:M.value)==="PM"?"PM":"AM"}const v={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};function k(x,M,E={}){const L={...v,...E},V=p(x,L).find(B=>B.type===M);return V?V.value:""}return{setLocale:a,getLocale:n,fullMonth:d,fullYear:f,fullMonthAndYear:c,toParts:p,custom:s,part:k,dayPeriod:b,selectedDate:l,dayOfWeek:_,getMonths:u}}function be(o){const e=Ga({dir:ref("ltr")});return computed(()=>{var n;return o?.value||((n=e.dir)==null?void 0:n.value)||"ltr"})}function Ae(o){const e=getCurrentInstance(),n=e?.type.emits,a={};return n!=null&&n.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),n?.forEach(s=>{a[toHandlerKey(camelize(s))]=(...l)=>o(s,...l)}),a}let bn=0;function Gn(){watchEffect(o=>{if(!Ye)return;const e=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",e[0]??Wo()),document.body.insertAdjacentElement("beforeend",e[1]??Wo()),bn++,o(()=>{bn===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),bn--})})}function Wo(){const o=document.createElement("span");return o.setAttribute("data-radix-focus-guard",""),o.tabIndex=0,o.style.outline="none",o.style.opacity="0",o.style.position="fixed",o.style.pointerEvents="none",o}function Qe(o){return computed(()=>{var e;return Ke(o)?!!((e=$e(o))!=null&&e.closest("form")):!0})}function At(o){const e=getCurrentInstance(),n=Object.keys(e?.type.props??{}).reduce((s,l)=>{const c=(e?.type.props[l]).default;return c!==void 0&&(s[l]=c),s},{}),a=toRef$1(o);return computed(()=>{const s={},l=e?.vnode.props??{};return Object.keys(l).forEach(c=>{s[camelize(c)]=l[c]}),Object.keys({...n,...s}).reduce((c,d)=>(a.value[d]!==void 0&&(c[d]=a.value[d]),c),{})})}function xe(o,e){const n=At(o),a=e?Ae(e):{};return computed(()=>({...n.value,...a}))}function R(){const o=getCurrentInstance(),e=ref(),n=computed(()=>{var c,d;return["#text","#comment"].includes((c=e.value)==null?void 0:c.$el.nodeName)?(d=e.value)==null?void 0:d.$el.nextElementSibling:$e(e)}),a=Object.assign({},o.exposed),s={};for(const c in o.props)Object.defineProperty(s,c,{enumerable:!0,configurable:!0,get:()=>o.props[c]});if(Object.keys(a).length>0)for(const c in a)Object.defineProperty(s,c,{enumerable:!0,configurable:!0,get:()=>a[c]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>o.vnode.el}),o.exposed=s;function l(c){e.value=c,!(c instanceof Element||!c)&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>c.$el}),o.exposed=s)}return{forwardRef:l,currentRef:e,currentElement:n}}function kl(o,e){const n=It(!1,300),a=ref(null),s=ia();function l(){a.value=null,n.value=!1}function c(d,u){const f=d.currentTarget,p={x:d.clientX,y:d.clientY},_=Ti(p,f.getBoundingClientRect()),b=Ri(p,_),v=Ai(u.getBoundingClientRect()),k=ki([...b,...v]);a.value=k,n.value=!0}return watchEffect(d=>{if(o.value&&e.value){const u=p=>c(p,e.value),f=p=>c(p,o.value);o.value.addEventListener("pointerleave",u),e.value.addEventListener("pointerleave",f),d(()=>{var p,_;(p=o.value)==null||p.removeEventListener("pointerleave",u),(_=e.value)==null||_.removeEventListener("pointerleave",f)})}}),watchEffect(d=>{var u;if(a.value){const f=p=>{var _,b;if(!a.value)return;const v=p.target,k={x:p.clientX,y:p.clientY},x=((_=o.value)==null?void 0:_.contains(v))||((b=e.value)==null?void 0:b.contains(v)),M=!Oi(k,a.value),E=v.hasAttribute("data-grace-area-trigger");x?l():(M||E)&&(l(),s.trigger())};(u=o.value)==null||u.ownerDocument.addEventListener("pointermove",f),d(()=>{var p;return(p=o.value)==null?void 0:p.ownerDocument.removeEventListener("pointermove",f)})}}),{isPointerInTransit:n,onPointerExit:s.on}}function Ti(o,e){const n=Math.abs(e.top-o.y),a=Math.abs(e.bottom-o.y),s=Math.abs(e.right-o.x),l=Math.abs(e.left-o.x);switch(Math.min(n,a,s,l)){case l:return"left";case s:return"right";case n:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function Ri(o,e,n=5){const a=[];switch(e){case"top":a.push({x:o.x-n,y:o.y+n},{x:o.x+n,y:o.y+n});break;case"bottom":a.push({x:o.x-n,y:o.y-n},{x:o.x+n,y:o.y-n});break;case"left":a.push({x:o.x+n,y:o.y-n},{x:o.x+n,y:o.y+n});break;case"right":a.push({x:o.x-n,y:o.y-n},{x:o.x-n,y:o.y+n});break}return a}function Ai(o){const{top:e,right:n,bottom:a,left:s}=o;return[{x:s,y:e},{x:n,y:e},{x:n,y:a},{x:s,y:a}]}function Oi(o,e){const{x:n,y:a}=o;let s=!1;for(let l=0,c=e.length-1;l<e.length;c=l++){const d=e[l].x,u=e[l].y,f=e[c].x,p=e[c].y;u>a!=p>a&&n<(f-d)*(a-u)/(p-u)+d&&(s=!s)}return s}function ki(o){const e=o.slice();return e.sort((n,a)=>n.x<a.x?-1:n.x>a.x?1:n.y<a.y?-1:n.y>a.y?1:0),Mi(e)}function Mi(o){if(o.length<=1)return o.slice();const e=[];for(let a=0;a<o.length;a++){const s=o[a];for(;e.length>=2;){const l=e[e.length-1],c=e[e.length-2];if((l.x-c.x)*(s.y-c.y)>=(l.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let a=o.length-1;a>=0;a--){const s=o[a];for(;n.length>=2;){const l=n[n.length-1],c=n[n.length-2];if((l.x-c.x)*(s.y-c.y)>=(l.y-c.y)*(s.x-c.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Vi=function(o){if(typeof document>"u")return null;var e=Array.isArray(o)?o[0]:o;return e.ownerDocument.body},zt=new WeakMap,Pa=new WeakMap,Da={},Cn=0,Ml=function(o){return o&&(o.host||Ml(o.parentNode))},Fi=function(o,e){return e.map(function(n){if(o.contains(n))return n;var a=Ml(n);return a&&o.contains(a)?a:(console.error("aria-hidden",n,"in not contained inside",o,". Doing nothing"),null)}).filter(function(n){return!!n})},Ni=function(o,e,n,a){var s=Fi(e,Array.isArray(o)?o:[o]);Da[n]||(Da[n]=new WeakMap);var l=Da[n],c=[],d=new Set,u=new Set(s),f=function(_){!_||d.has(_)||(d.add(_),f(_.parentNode))};s.forEach(f);var p=function(_){!_||u.has(_)||Array.prototype.forEach.call(_.children,function(b){if(d.has(b))p(b);else try{var v=b.getAttribute(a),k=v!==null&&v!=="false",x=(zt.get(b)||0)+1,M=(l.get(b)||0)+1;zt.set(b,x),l.set(b,M),c.push(b),x===1&&k&&Pa.set(b,!0),M===1&&b.setAttribute(n,"true"),k||b.setAttribute(a,"true")}catch(E){console.error("aria-hidden: cannot operate on ",b,E)}})};return p(e),d.clear(),Cn++,function(){c.forEach(function(_){var b=zt.get(_)-1,v=l.get(_)-1;zt.set(_,b),l.set(_,v),b||(Pa.has(_)||_.removeAttribute(a),Pa.delete(_)),v||_.removeAttribute(n)}),Cn--,Cn||(zt=new WeakMap,zt=new WeakMap,Pa=new WeakMap,Da={})}},Li=function(o,e,n){n===void 0&&(n="data-aria-hidden");var a=Array.from(Array.isArray(o)?o:[o]),s=Vi(o);return s?(a.push.apply(a,Array.from(s.querySelectorAll("[aria-live]"))),Ni(a,s,n,"aria-hidden")):function(){return null}};function ya(o){let e;watch(()=>$e(o),n=>{n?e=Li(n):e&&e()}),onUnmounted(()=>{e&&e()})}function he(o,e="radix"){return Ga({useId:void 0}),`${e}-${useId()}`}function Vl(o){const e=ref(),n=computed(()=>{var s;return((s=e.value)==null?void 0:s.width)??0}),a=computed(()=>{var s;return((s=e.value)==null?void 0:s.height)??0});return onMounted(()=>{const s=$e(o);if(s){e.value={width:s.offsetWidth,height:s.offsetHeight};const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const d=c[0];let u,f;if("borderBoxSize"in d){const p=d.borderBoxSize,_=Array.isArray(p)?p[0]:p;u=_.inlineSize,f=_.blockSize}else u=s.offsetWidth,f=s.offsetHeight;e.value={width:u,height:f}});return l.observe(s,{box:"border-box"}),()=>l.unobserve(s)}else e.value=void 0}),{width:n,height:a}}function Fl(o,e){const n=ref(o);function a(s){return e[n.value][s]??n.value}return{state:n,dispatch:s=>{n.value=a(s)}}}const Hi="data-item-text";function ga(o){const e=It("",1e3);return{search:e,handleTypeaheadSearch:(n,a)=>{if(!(o!=null&&o.value)&&!a)return;e.value=e.value+n;const s=o?.value??a,l=document.activeElement,c=s.map(_=>{var b;return{ref:_,textValue:((b=(_.querySelector(`[${Hi}]`)??_).textContent)==null?void 0:b.trim())??""}}),d=c.find(_=>_.ref===l),u=c.map(_=>_.textValue),f=Yn(u,e.value,d?.textValue),p=c.find(_=>_.textValue===f);return p&&p.ref.focus(),p?.ref},resetTypeahead:()=>{e.value=""}}}function qn(o,e){return o.map((n,a)=>o[(e+a)%o.length])}function Yn(o,e,n){const a=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,s=n?o.indexOf(n):-1;let l=qn(o,Math.max(s,0));a.length===1&&(l=l.filter(d=>d!==n));const c=l.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function et$1(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}const Xn=defineComponent({name:"PrimitiveSlot",inheritAttrs:!1,setup(o,{attrs:e,slots:n}){return()=>{var a,s;if(!n.default)return null;const l=Ua(n.default()),c=l.findIndex(p=>p.type!==Comment);if(c===-1)return l;const d=l[c];(a=d.props)==null||delete a.ref;const u=d.props?mergeProps(e,d.props):e;e.class&&(s=d.props)!=null&&s.class&&delete d.props.class;const f=cloneVNode(d,u);for(const p in u)p.startsWith("on")&&(f.props||(f.props={}),f.props[p]=u[p]);return l.length===1?f:(l[c]=f,l)}}}),O=defineComponent({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(o,{attrs:e,slots:n}){const a=o.asChild?"template":o.as;return typeof a=="string"&&["area","img","input"].includes(a)?()=>h(a,e):a!=="template"?()=>h(o.as,e,{default:n.default}):()=>h(Xn,e,{default:n.default})}});function Ie(){const o=ref(),e=computed(()=>{var n,a;return["#text","#comment"].includes((n=o.value)==null?void 0:n.$el.nodeName)?(a=o.value)==null?void 0:a.$el.nextElementSibling:$e(o)});return{primitiveElement:o,currentElement:e}}const[Nl,Wi]=Q$1("CollapsibleRoot"),ji=defineComponent({__name:"CollapsibleRoot",props:{defaultOpen:{type:Boolean,default:!1},open:{type:Boolean,default:void 0},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:open"],setup(o,{expose:e,emit:n}){const a=o,s=ne$1(a,"open",n,{defaultValue:a.defaultOpen,passive:a.open===void 0}),l=ne$1(a,"disabled");return Wi({contentId:"",disabled:l,open:s,onOpenToggle:()=>{s.value=!s.value}}),e({open:s}),R(),(c,d)=>(openBlock(),createBlock(unref(O),{as:c.as,"as-child":a.asChild,"data-state":unref(s)?"open":"closed","data-disabled":unref(l)?"":void 0},{default:withCtx(()=>[renderSlot(c.$slots,"default",{open:unref(s)})]),_:3},8,["as","as-child","data-state","data-disabled"]))}}),Ui=defineComponent({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o;R();const n=Nl();return(a,s)=>{var l,c;return openBlock(),createBlock(unref(O),{type:a.as==="button"?"button":void 0,as:a.as,"as-child":e.asChild,"aria-controls":unref(n).contentId,"aria-expanded":unref(n).open.value,"data-state":unref(n).open.value?"open":"closed","data-disabled":(l=unref(n).disabled)!=null&&l.value?"":void 0,disabled:(c=unref(n).disabled)==null?void 0:c.value,onClick:unref(n).onOpenToggle},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["type","as","as-child","aria-controls","aria-expanded","data-state","data-disabled","disabled","onClick"])}}});function Gi(o,e){var n;const a=ref({}),s=ref("none"),l=ref(o),c=o.value?"mounted":"unmounted";let d;const u=((n=e.value)==null?void 0:n.ownerDocument.defaultView)??Tt,{state:f,dispatch:p}=Fl(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),_=M=>{var E;if(Ye){const L=new CustomEvent(M,{bubbles:!1,cancelable:!1});(E=e.value)==null||E.dispatchEvent(L)}};watch(o,async(M,E)=>{var L;const V=E!==M;if(await nextTick(),V){const B=s.value,F=$a(e.value);M?(p("MOUNT"),_("enter"),F==="none"&&_("after-enter")):F==="none"||((L=a.value)==null?void 0:L.display)==="none"?(p("UNMOUNT"),_("leave"),_("after-leave")):E&&B!==F?(p("ANIMATION_OUT"),_("leave")):(p("UNMOUNT"),_("after-leave"))}},{immediate:!0});const b=M=>{const E=$a(e.value),L=E.includes(M.animationName),V=f.value==="mounted"?"enter":"leave";if(M.target===e.value&&L&&(_(`after-${V}`),p("ANIMATION_END"),!l.value)){const B=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",d=u?.setTimeout(()=>{var F;((F=e.value)==null?void 0:F.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=B)})}M.target===e.value&&E==="none"&&p("ANIMATION_END")},v=M=>{M.target===e.value&&(s.value=$a(e.value))},k=watch(e,(M,E)=>{M?(a.value=getComputedStyle(M),M.addEventListener("animationstart",v),M.addEventListener("animationcancel",b),M.addEventListener("animationend",b)):(p("ANIMATION_END"),u?.clearTimeout(d),E?.removeEventListener("animationstart",v),E?.removeEventListener("animationcancel",b),E?.removeEventListener("animationend",b))},{immediate:!0}),x=watch(f,()=>{const M=$a(e.value);s.value=f.value==="mounted"?M:"none"});return onUnmounted(()=>{k(),x()}),{isPresent:computed(()=>["mounted","unmountSuspended"].includes(f.value))}}function $a(o){return o&&getComputedStyle(o).animationName||"none"}const Pe$1=defineComponent({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(o,{slots:e,expose:n}){var a;const{present:s,forceMount:l}=toRefs(o),c=ref(),{isPresent:d}=Gi(s,c);n({present:d});let u=e.default({present:d});u=Ua(u||[]);const f=getCurrentInstance();if(u&&u?.length>1){const p=(a=f?.parent)!=null&&a.type.name?`<${f.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${p}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(_=>`  - ${_}`).join(`
`)].join(`
`))}return()=>l.value||s.value||d.value?h(e.default({present:d})[0],{ref:p=>{const _=$e(p);return typeof _?.hasAttribute>"u"||(_!=null&&_.hasAttribute("data-radix-popper-content-wrapper")?c.value=_.firstElementChild:c.value=_),_}}):null}}),qi=defineComponent({inheritAttrs:!1,__name:"CollapsibleContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const e=o,n=Nl();n.contentId||(n.contentId=he(void 0,"radix-vue-collapsible-content"));const a=ref(),{forwardRef:s,currentElement:l}=R(),c=ref(0),d=ref(0),u=computed(()=>n.open.value),f=ref(u.value),p=ref();return watch(()=>{var _;return[u.value,(_=a.value)==null?void 0:_.present]},async()=>{await nextTick();const _=l.value;if(!_)return;p.value=p.value||{transitionDuration:_.style.transitionDuration,animationName:_.style.animationName},_.style.transitionDuration="0s",_.style.animationName="none";const b=_.getBoundingClientRect();d.value=b.height,c.value=b.width,f.value||(_.style.transitionDuration=p.value.transitionDuration,_.style.animationName=p.value.animationName)},{immediate:!0}),onMounted(()=>{requestAnimationFrame(()=>{f.value=!1})}),(_,b)=>(openBlock(),createBlock(unref(Pe$1),{ref_key:"presentRef",ref:a,present:_.forceMount||unref(n).open.value,"force-mount":!0},{default:withCtx(()=>{var v,k;return[createVNode(unref(O),mergeProps(_.$attrs,{id:unref(n).contentId,ref:unref(s),"as-child":e.asChild,as:_.as,"data-state":unref(n).open.value?"open":"closed","data-disabled":(v=unref(n).disabled)!=null&&v.value?"":void 0,hidden:!((k=a.value)!=null&&k.present),style:{"--radix-collapsible-content-height":`${d.value}px`,"--radix-collapsible-content-width":`${c.value}px`}}),{default:withCtx(()=>{var x;return[(x=a.value)!=null&&x.present?renderSlot(_.$slots,"default",{key:0}):createCommentVNode("",!0)]}),_:3},16,["id","as-child","as","data-state","data-disabled","hidden","style"])]}),_:3},8,["present"]))}}),[tt$1,Qi]=Q$1("DialogRoot"),eu=defineComponent({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=ne$1(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),s=ref(),l=ref(),{modal:c}=toRefs(n);return Qi({open:a,modal:c,openModal:()=>{a.value=!0},onOpenChange:d=>{a.value=d},onOpenToggle:()=>{a.value=!a.value},contentId:"",titleId:"",descriptionId:"",triggerElement:s,contentElement:l}),(d,u)=>renderSlot(d.$slots,"default",{open:unref(a)})}}),tu=defineComponent({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=tt$1(),{forwardRef:a,currentElement:s}=R();return n.contentId||(n.contentId=he(void 0,"radix-vue-dialog-content")),onMounted(()=>{n.triggerElement.value=s.value}),(l,c)=>(openBlock(),createBlock(unref(O),mergeProps(e,{ref:unref(a),type:l.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":unref(n).open.value||!1,"aria-controls":unref(n).open.value?unref(n).contentId:void 0,"data-state":unref(n).open.value?"open":"closed",onClick:unref(n).onOpenToggle}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),ot$1=defineComponent({__name:"Teleport",props:{to:{default:"body"},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=ja();return(n,a)=>unref(e)||n.forceMount?(openBlock(),createBlock(Teleport,{key:0,to:n.to,disabled:n.disabled},[renderSlot(n.$slots,"default")],8,["to","disabled"])):createCommentVNode("",!0)}}),Dv=defineComponent({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),au="dismissableLayer.pointerDownOutside",nu="dismissableLayer.focusOutside";function Kl(o,e){const n=e.closest("[data-dismissable-layer]"),a=o.dataset.dismissableLayer===""?o:o.querySelector("[data-dismissable-layer]"),s=Array.from(o.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&a===n||s.indexOf(a)<s.indexOf(n))}function Hl(o,e){var n;const a=((n=e?.value)==null?void 0:n.ownerDocument)??globalThis?.document,s=ref(!1),l=ref(()=>{});return watchEffect(c=>{if(!Ye)return;const d=async f=>{const p=f.target;if(e!=null&&e.value){if(Kl(e.value,p)){s.value=!1;return}if(f.target&&!s.value){let _=function(){Wt(au,o,b)};const b={originalEvent:f};f.pointerType==="touch"?(a.removeEventListener("click",l.value),l.value=_,a.addEventListener("click",l.value,{once:!0})):_()}else a.removeEventListener("click",l.value);s.value=!1}},u=window.setTimeout(()=>{a.addEventListener("pointerdown",d)},0);c(()=>{window.clearTimeout(u),a.removeEventListener("pointerdown",d),a.removeEventListener("click",l.value)})}),{onPointerDownCapture:()=>s.value=!0}}function Wl(o,e){var n;const a=((n=e?.value)==null?void 0:n.ownerDocument)??globalThis?.document,s=ref(!1);return watchEffect(l=>{if(!Ye)return;const c=async d=>{e!=null&&e.value&&(await nextTick(),!(!e.value||Kl(e.value,d.target))&&d.target&&!s.value&&Wt(nu,o,{originalEvent:d}))};a.addEventListener("focusin",c),l(()=>a.removeEventListener("focusin",c))}),{onFocusCapture:()=>s.value=!0,onBlurCapture:()=>s.value=!1}}const je=reactive({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gt$1=defineComponent({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(o,{emit:e}){const n=o,a=e,{forwardRef:s,currentElement:l}=R(),c=computed(()=>{var k;return((k=l.value)==null?void 0:k.ownerDocument)??globalThis.document}),d=computed(()=>je.layersRoot),u=computed(()=>l.value?Array.from(d.value).indexOf(l.value):-1),f=computed(()=>je.layersWithOutsidePointerEventsDisabled.size>0),p=computed(()=>{const k=Array.from(d.value),[x]=[...je.layersWithOutsidePointerEventsDisabled].slice(-1),M=k.indexOf(x);return u.value>=M}),_=Hl(async k=>{const x=[...je.branches].some(M=>M?.contains(k.target));!p.value||x||(a("pointerDownOutside",k),a("interactOutside",k),await nextTick(),k.defaultPrevented||a("dismiss"))},l),b=Wl(k=>{[...je.branches].some(x=>x?.contains(k.target))||(a("focusOutside",k),a("interactOutside",k),k.defaultPrevented||a("dismiss"))},l);jn("Escape",k=>{u.value===d.value.size-1&&(a("escapeKeyDown",k),k.defaultPrevented||a("dismiss"))});let v;return watchEffect(k=>{l.value&&(n.disableOutsidePointerEvents&&(je.layersWithOutsidePointerEventsDisabled.size===0&&(v=c.value.body.style.pointerEvents,c.value.body.style.pointerEvents="none"),je.layersWithOutsidePointerEventsDisabled.add(l.value)),d.value.add(l.value),k(()=>{n.disableOutsidePointerEvents&&je.layersWithOutsidePointerEventsDisabled.size===1&&(c.value.body.style.pointerEvents=v)}))}),watchEffect(k=>{k(()=>{l.value&&(d.value.delete(l.value),je.layersWithOutsidePointerEventsDisabled.delete(l.value))})}),(k,x)=>(openBlock(),createBlock(unref(O),{ref:unref(s),"as-child":k.asChild,as:k.as,"data-dismissable-layer":"",style:normalizeStyle({pointerEvents:f.value?p.value?"auto":"none":void 0}),onFocusCapture:unref(b).onFocusCapture,onBlurCapture:unref(b).onBlurCapture,onPointerdownCapture:unref(_).onPointerDownCapture},{default:withCtx(()=>[renderSlot(k.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),wn="focusScope.autoFocusOnMount",_n="focusScope.autoFocusOnUnmount",jo={bubbles:!1,cancelable:!0};function Oa(o,{select:e=!1}={}){const n=document.activeElement;for(const a of o)if(ct$1(a,{select:e}),document.activeElement!==n)return!0}function lu(o){const e=Jn(o),n=Uo(e,o),a=Uo(e.reverse(),o);return[n,a]}function Jn(o){const e=[],n=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const s=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||s?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Uo(o,e){for(const n of o)if(!su(n,{upTo:e}))return n}function su(o,{upTo:e}){if(getComputedStyle(o).visibility==="hidden")return!0;for(;o;){if(e!==void 0&&o===e)return!1;if(getComputedStyle(o).display==="none")return!0;o=o.parentElement}return!1}function ru(o){return o instanceof HTMLInputElement&&"select"in o}function ct$1(o,{select:e=!1}={}){if(o&&o.focus){const n=document.activeElement;o.focus({preventScroll:!0}),o!==n&&ru(o)&&e&&o.select()}}const iu=ai(()=>ref([]));function uu(){const o=iu();return{add(e){const n=o.value[0];e!==n&&n?.pause(),o.value=Go(o.value,e),o.value.unshift(e)},remove(e){var n;o.value=Go(o.value,e),(n=o.value[0])==null||n.resume()}}}function Go(o,e){const n=[...o],a=n.indexOf(e);return a!==-1&&n.splice(a,1),n}function du(o){return o.filter(e=>e.tagName!=="A")}const Ya=defineComponent({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(o,{emit:e}){const n=o,a=e,{currentRef:s,currentElement:l}=R(),c=ref(null),d=uu(),u=reactive({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});watchEffect(p=>{if(!Ye)return;const _=l.value;if(!n.trapped)return;function b(M){if(u.paused||!_)return;const E=M.target;_.contains(E)?c.value=E:ct$1(c.value,{select:!0})}function v(M){if(u.paused||!_)return;const E=M.relatedTarget;E!==null&&(_.contains(E)||ct$1(c.value,{select:!0}))}function k(M){_.contains(c.value)||ct$1(_)}document.addEventListener("focusin",b),document.addEventListener("focusout",v);const x=new MutationObserver(k);_&&x.observe(_,{childList:!0,subtree:!0}),p(()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",v),x.disconnect()})}),watchEffect(async p=>{const _=l.value;if(await nextTick(),!_)return;d.add(u);const b=document.activeElement;if(!_.contains(b)){const v=new CustomEvent(wn,jo);_.addEventListener(wn,k=>a("mountAutoFocus",k)),_.dispatchEvent(v),v.defaultPrevented||(Oa(du(Jn(_)),{select:!0}),document.activeElement===b&&ct$1(_))}p(()=>{_.removeEventListener(wn,x=>a("mountAutoFocus",x));const v=new CustomEvent(_n,jo),k=x=>{a("unmountAutoFocus",x)};_.addEventListener(_n,k),_.dispatchEvent(v),setTimeout(()=>{v.defaultPrevented||ct$1(b??document.body,{select:!0}),_.removeEventListener(_n,k),d.remove(u)},0)})});function f(p){if(!n.loop&&!n.trapped||u.paused)return;const _=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,b=document.activeElement;if(_&&b){const v=p.currentTarget,[k,x]=lu(v);k&&x?!p.shiftKey&&b===x?(p.preventDefault(),n.loop&&ct$1(k,{select:!0})):p.shiftKey&&b===k&&(p.preventDefault(),n.loop&&ct$1(x,{select:!0})):b===v&&p.preventDefault()}}return(p,_)=>(openBlock(),createBlock(unref(O),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":p.asChild,as:p.as,onKeydown:f},{default:withCtx(()=>[renderSlot(p.$slots,"default")]),_:3},8,["as-child","as"]))}}),cu="menu.itemSelect",Dn=["Enter"," "],fu=["ArrowDown","PageUp","Home"],jl=["ArrowUp","PageDown","End"],pu=[...fu,...jl],vu={ltr:[...Dn,"ArrowRight"],rtl:[...Dn,"ArrowLeft"]},mu={ltr:["ArrowLeft"],rtl:["ArrowRight"]};function Qn(o){return o?"open":"closed"}function $n(o){const e=document.activeElement;for(const n of o)if(n===e||(n.focus(),document.activeElement!==e))return}function hu(o,e){const{x:n,y:a}=o;let s=!1;for(let l=0,c=e.length-1;l<e.length;c=l++){const d=e[l].x,u=e[l].y,f=e[c].x,p=e[c].y;u>a!=p>a&&n<(f-d)*(a-u)/(p-u)+d&&(s=!s)}return s}function yu(o,e){if(!e)return!1;const n={x:o.clientX,y:o.clientY};return hu(n,e)}function ua(o){return o.pointerType==="mouse"}const Ul=defineComponent({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=tt$1(),{forwardRef:l,currentElement:c}=R();return s.titleId||(s.titleId=he(void 0,"radix-vue-dialog-title")),s.descriptionId||(s.descriptionId=he(void 0,"radix-vue-dialog-description")),onMounted(()=>{s.contentElement=c,document.activeElement!==document.body&&(s.triggerElement.value=document.activeElement)}),(d,u)=>(openBlock(),createBlock(unref(Ya),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:u[5]||(u[5]=f=>a("openAutoFocus",f)),onUnmountAutoFocus:u[6]||(u[6]=f=>a("closeAutoFocus",f))},{default:withCtx(()=>[createVNode(unref(gt$1),mergeProps({id:unref(s).contentId,ref:unref(l),as:d.as,"as-child":d.asChild,"disable-outside-pointer-events":d.disableOutsidePointerEvents,role:"dialog","aria-describedby":unref(s).descriptionId,"aria-labelledby":unref(s).titleId,"data-state":unref(Qn)(unref(s).open.value)},d.$attrs,{onDismiss:u[0]||(u[0]=f=>unref(s).onOpenChange(!1)),onEscapeKeyDown:u[1]||(u[1]=f=>a("escapeKeyDown",f)),onFocusOutside:u[2]||(u[2]=f=>a("focusOutside",f)),onInteractOutside:u[3]||(u[3]=f=>a("interactOutside",f)),onPointerDownOutside:u[4]||(u[4]=f=>a("pointerDownOutside",f))}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),wu=defineComponent({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=tt$1(),l=Ae(a),{forwardRef:c,currentElement:d}=R();return ya(d),(u,f)=>(openBlock(),createBlock(Ul,mergeProps({...n,...unref(l)},{ref:unref(c),"trap-focus":unref(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:f[0]||(f[0]=p=>{var _;p.defaultPrevented||(p.preventDefault(),(_=unref(s).triggerElement.value)==null||_.focus())}),onPointerDownOutside:f[1]||(f[1]=p=>{const _=p.detail.originalEvent,b=_.button===0&&_.ctrlKey===!0;(_.button===2||b)&&p.preventDefault()}),onFocusOutside:f[2]||(f[2]=p=>{p.preventDefault()})}),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16,["trap-focus"]))}}),_u=defineComponent({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=Ae(e);R();const s=tt$1(),l=ref(!1),c=ref(!1);return(d,u)=>(openBlock(),createBlock(Ul,mergeProps({...n,...unref(a)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:u[0]||(u[0]=f=>{var p;f.defaultPrevented||(l.value||(p=unref(s).triggerElement.value)==null||p.focus(),f.preventDefault()),l.value=!1,c.value=!1}),onInteractOutside:u[1]||(u[1]=f=>{var p;f.defaultPrevented||(l.value=!0,f.detail.originalEvent.type==="pointerdown"&&(c.value=!0));const _=f.target;(p=unref(s).triggerElement.value)!=null&&p.contains(_)&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&c.value&&f.preventDefault()})}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16))}}),xu=defineComponent({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=tt$1(),l=Ae(a),{forwardRef:c}=R();return(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||unref(s).open.value},{default:withCtx(()=>[unref(s).modal.value?(openBlock(),createBlock(wu,mergeProps({key:0,ref:unref(c)},{...n,...unref(l),...d.$attrs}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16)):(openBlock(),createBlock(_u,mergeProps({key:1,ref:unref(c)},{...n,...unref(l),...d.$attrs}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Su=defineComponent({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean},as:{}},setup(o){const e=tt$1();return ha(!0),R(),(n,a)=>(openBlock(),createBlock(unref(O),{as:n.as,"as-child":n.asChild,"data-state":unref(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Eu=defineComponent({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const e=tt$1(),{forwardRef:n}=R();return(a,s)=>{var l;return(l=unref(e))!=null&&l.modal.value?(openBlock(),createBlock(unref(Pe$1),{key:0,present:a.forceMount||unref(e).open.value},{default:withCtx(()=>[createVNode(Su,mergeProps(a.$attrs,{ref:unref(n),as:a.as,"as-child":a.asChild}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):createCommentVNode("",!0)}}}),Gl=defineComponent({__name:"DialogClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o;R();const n=tt$1();return(a,s)=>(openBlock(),createBlock(unref(O),mergeProps(e,{type:a.as==="button"?"button":void 0,onClick:s[0]||(s[0]=l=>unref(n).onOpenChange(!1))}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["type"]))}}),Pu=defineComponent({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(o){const e=o,n=tt$1();return R(),(a,s)=>(openBlock(),createBlock(unref(O),mergeProps(e,{id:unref(n).titleId}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["id"]))}}),Du=defineComponent({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(o){const e=o;R();const n=tt$1();return(a,s)=>(openBlock(),createBlock(unref(O),mergeProps(e,{id:unref(n).descriptionId}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["id"]))}}),$v=defineComponent({__name:"AlertDialogRoot",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const n=xe(o,e);return R(),(a,s)=>(openBlock(),createBlock(unref(eu),mergeProps(unref(n),{modal:!0}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),Bv=defineComponent({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(tu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Iv=defineComponent({__name:"AlertDialogPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),[$u,Bu]=Q$1("AlertDialogContent"),Tv=defineComponent({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=Ae(e);R();const s=ref();return Bu({onCancelElementChange:l=>{s.value=l}}),(l,c)=>(openBlock(),createBlock(unref(xu),mergeProps({...n,...unref(a)},{role:"alertdialog",onPointerDownOutside:c[0]||(c[0]=withModifiers(()=>{},["prevent"])),onInteractOutside:c[1]||(c[1]=withModifiers(()=>{},["prevent"])),onOpenAutoFocus:c[2]||(c[2]=()=>{nextTick(()=>{var d;(d=s.value)==null||d.focus({preventScroll:!0})})})}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),Rv=defineComponent({__name:"AlertDialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(Eu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Av=defineComponent({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=$u(),{forwardRef:a,currentElement:s}=R();return onMounted(()=>{n.onCancelElementChange(s.value)}),(l,c)=>(openBlock(),createBlock(unref(Gl),mergeProps(e,{ref:unref(a)}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),Ov=defineComponent({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(Pu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),kv=defineComponent({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(Du),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Mv=defineComponent({__name:"AlertDialogAction",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(Gl),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}});function Ru(o){function e(a){return Array.isArray(o.date.value)?o.date.value.some(s=>$14e0f24ef4ac5c92$export$ea39ec197993aef0(s,a)):o.date.value?$14e0f24ef4ac5c92$export$ea39ec197993aef0(o.date.value,a):!1}const n=computed(()=>{var a,s,l,c;if(Array.isArray(o.date.value)){if(!o.date.value.length)return!1;for(const d of o.date.value)if((a=o.isDateDisabled)!=null&&a.call(o,d)||(s=o.isDateUnavailable)!=null&&s.call(o,d))return!0}else{if(!o.date.value)return!1;if((l=o.isDateDisabled)!=null&&l.call(o,o.date.value)||(c=o.isDateUnavailable)!=null&&c.call(o,o.date.value))return!0}return!1});return{isDateSelected:e,isInvalid:n}}function Au(o,e){const n=e(o),a=n.compare(o),s={};return a>=7&&(s.day=1),a>=R$1(o)&&(s.month=1),n.set({...s})}function Ou(o,e){const n=e(o),a=o.compare(n),s={};return a>=7&&(s.day=35),a>=R$1(o)&&(s.month=13),n.set({...s})}function ku(o,e){return e(o)}function Mu(o,e){return e(o)}function Yl(o){const e=Un(o.locale.value),n=computed(()=>{const x={calendar:o.placeholder.value.calendar.identifier};return o.placeholder.value.calendar.identifier==="gregory"&&o.placeholder.value.era==="BC"&&(x.era="short"),x}),a=ref(rt$1({dateObj:o.placeholder.value,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value})),s=computed(()=>a.value.map(x=>x.value));function l(x){return!s.value.some(M=>$14e0f24ef4ac5c92$export$5a8da0c44a3afdf2(x,M))}const c=(x="month",M)=>{if(!o.maxValue.value||!a.value.length)return!1;if(o.disabled.value)return!0;const E=a.value[a.value.length-1].value;if(M||o.nextPage.value){const V=Au(E,M||o.nextPage.value);return P(V,o.maxValue.value)}if(x==="year"){const V=E.add({years:1}).set({day:1,month:1});return P(V,o.maxValue.value)}const L=E.add({months:1}).set({day:1});return P(L,o.maxValue.value)},d=(x="month",M)=>{if(!o.minValue.value||!a.value.length)return!1;if(o.disabled.value)return!0;const E=a.value[0].value;if(M||o.prevPage.value){const V=Ou(E,M||o.prevPage.value);return q$1(V,o.minValue.value)}if(x==="year"){const V=E.subtract({years:1}).set({day:35,month:13});return q$1(V,o.minValue.value)}const L=E.subtract({months:1}).set({day:35});return q$1(L,o.minValue.value)};function u(x){var M;return!!((M=o.isDateDisabled)!=null&&M.call(o,x)||o.disabled.value||o.maxValue.value&&P(x,o.maxValue.value)||o.minValue.value&&q$1(x,o.minValue.value))}const f=x=>{var M;return!!((M=o.isDateUnavailable)!=null&&M.call(o,x))},p=computed(()=>a.value.length?a.value[0].rows[0].map(x=>e.dayOfWeek($$1(x),o.weekdayFormat.value)):[]),_=(x="month",M)=>{const E=a.value[0].value;if(M||o.nextPage.value){const B=ku(E,M||o.nextPage.value),F=rt$1({dateObj:B,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value});a.value=F;const j={};if(!M){const I=F[0].value.compare(E);I>=R$1(E)&&(j.day=1),I>=365&&(j.month=1)}o.placeholder.value=F[0].value.set({...j});return}const L=x==="month"?E.add({months:o.pagedNavigation.value?o.numberOfMonths.value:1}):E.add({years:1}),V=rt$1({dateObj:L,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value});a.value=V,o.placeholder.value=V[0].value.set({day:1})},b=(x="month",M)=>{const E=a.value[0].value;if(M||o.prevPage.value){const B=Mu(E,M||o.prevPage.value),F=rt$1({dateObj:B,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value});a.value=F;const j={};if(!M){const I=E.compare(F[0].value);I>=R$1(E)&&(j.day=1),I>=365&&(j.month=1)}o.placeholder.value=F[0].value.set({...j});return}const L=x==="month"?E.subtract({months:o.pagedNavigation.value?o.numberOfMonths.value:1}):E.subtract({years:1}),V=rt$1({dateObj:L,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value});a.value=V,o.placeholder.value=V[0].value.set({day:1})};watch(o.placeholder,x=>{s.value.some(M=>$14e0f24ef4ac5c92$export$5a8da0c44a3afdf2(M,x))||(a.value=rt$1({dateObj:x,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value}))}),watch([o.locale,o.weekStartsOn,o.fixedWeeks,o.numberOfMonths],()=>{a.value=rt$1({dateObj:o.placeholder.value,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value})});const v=computed(()=>{if(!a.value.length)return"";if(o.locale.value!==e.getLocale()&&e.setLocale(o.locale.value),a.value.length===1){const F=a.value[0].value;return`${e.fullMonthAndYear($$1(F),n.value)}`}const x=$$1(a.value[0].value),M=$$1(a.value[a.value.length-1].value),E=e.fullMonth(x,n.value),L=e.fullMonth(M,n.value),V=e.fullYear(x,n.value),B=e.fullYear(M,n.value);return V===B?`${E} - ${L} ${B}`:`${E} ${V} - ${L} ${B}`}),k=computed(()=>`${o.calendarLabel.value??"Event Date"}, ${v.value}`);return{isDateDisabled:u,isDateUnavailable:f,isNextButtonDisabled:c,isPrevButtonDisabled:d,grid:a,weekdays:p,visibleView:s,isOutsideVisibleView:l,formatter:e,nextPage:_,prevPage:b,headingValue:v,fullCalendarLabel:k}}const Vu={style:{border:"0px",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute","white-space":"nowrap",width:"1px"}},Fu={role:"heading","aria-level":"2"},[Yt,Nu]=Q$1("CalendarRoot"),Lu=defineComponent({__name:"CalendarRoot",props:{modelValue:{},multiple:{type:Boolean,default:!1},defaultValue:{default:void 0},defaultPlaceholder:{},placeholder:{default:void 0},pagedNavigation:{type:Boolean,default:!1},preventDeselect:{type:Boolean,default:!1},weekStartsOn:{default:0},weekdayFormat:{default:"narrow"},calendarLabel:{},fixedWeeks:{type:Boolean,default:!1},maxValue:{},minValue:{},locale:{default:"en"},numberOfMonths:{default:1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},initialFocus:{type:Boolean,default:!1},isDateDisabled:{type:Function,default:void 0},isDateUnavailable:{type:Function,default:void 0},dir:{},nextPage:{},prevPage:{},asChild:{type:Boolean},as:{default:"div"}},emits:["update:modelValue","update:placeholder"],setup(o,{emit:e}){const n=o,a=e,{locale:s,disabled:l,readonly:c,initialFocus:d,pagedNavigation:u,weekStartsOn:f,weekdayFormat:p,fixedWeeks:_,multiple:b,minValue:v,maxValue:k,numberOfMonths:x,preventDeselect:M,isDateDisabled:E,isDateUnavailable:L,calendarLabel:V,defaultValue:B,nextPage:F,prevPage:j,dir:I}=toRefs(n),{primitiveElement:U,currentElement:W}=Ie(),K=be(I),G=ne$1(n,"modelValue",a,{defaultValue:B.value,passive:n.modelValue===void 0}),Z=qt({defaultPlaceholder:n.placeholder,defaultValue:G.value,locale:n.locale}),oe=ne$1(n,"placeholder",a,{defaultValue:n.defaultPlaceholder??Z.copy(),passive:n.placeholder===void 0});function Y(te){oe.value=te.copy()}const{fullCalendarLabel:se,headingValue:le,isDateDisabled:ce,isDateUnavailable:de,isNextButtonDisabled:ge,isPrevButtonDisabled:qe,weekdays:ke,isOutsideVisibleView:Ee,nextPage:Oe,prevPage:Ve,formatter:Ne,grid:dt}=Yl({locale:s,placeholder:oe,weekStartsOn:f,fixedWeeks:_,numberOfMonths:x,minValue:v,maxValue:k,disabled:l,weekdayFormat:p,pagedNavigation:u,isDateDisabled:E.value,isDateUnavailable:L.value,calendarLabel:V,nextPage:F,prevPage:j}),{isInvalid:pe,isDateSelected:fe}=Ru({date:G,isDateDisabled:ce,isDateUnavailable:de});watch(G,te=>{if(Array.isArray(te)&&te.length){const ue=te[te.length-1];ue&&!$14e0f24ef4ac5c92$export$91b62ebf2ba703ee(oe.value,ue)&&Y(ue)}else!Array.isArray(te)&&te&&!$14e0f24ef4ac5c92$export$91b62ebf2ba703ee(oe.value,te)&&Y(te)});function me(te){if(b.value){if(!G.value)G.value=[te.copy()];else if(Array.isArray(G.value)){if(G.value.findIndex(ue=>$14e0f24ef4ac5c92$export$ea39ec197993aef0(ue,te))===-1)G.value=[...G.value,te];else if(!M.value){const ue=G.value.filter(we=>!$14e0f24ef4ac5c92$export$ea39ec197993aef0(we,te));if(!ue.length){oe.value=te.copy(),G.value=void 0;return}G.value=ue.map(we=>we.copy())}}}else{if(!G.value){G.value=te.copy();return}!M.value&&$14e0f24ef4ac5c92$export$91b62ebf2ba703ee(G.value,te)?(oe.value=te.copy(),G.value=void 0):G.value=te.copy()}}return onMounted(()=>{d.value&&xl(W.value)}),Nu({isDateUnavailable:de,dir:K,isDateDisabled:ce,locale:s,formatter:Ne,modelValue:G,placeholder:oe,disabled:l,initialFocus:d,pagedNavigation:u,weekStartsOn:f,weekdayFormat:p,fixedWeeks:_,multiple:b,numberOfMonths:x,readonly:c,preventDeselect:M,fullCalendarLabel:se,headingValue:le,isInvalid:pe,isDateSelected:fe,isNextButtonDisabled:ge,isPrevButtonDisabled:qe,isOutsideVisibleView:Ee,nextPage:Oe,prevPage:Ve,parentElement:W,onPlaceholderChange:Y,onDateChange:me}),(te,ue)=>(openBlock(),createBlock(unref(O),{ref_key:"primitiveElement",ref:U,as:te.as,"as-child":te.asChild,role:"application","aria-label":unref(se),"data-readonly":unref(c)?"":void 0,"data-disabled":unref(l)?"":void 0,"data-invalid":unref(pe)?"":void 0,dir:unref(K)},{default:withCtx(()=>[renderSlot(te.$slots,"default",{date:unref(oe),grid:unref(dt),weekDays:unref(ke),weekStartsOn:unref(f),locale:unref(s),fixedWeeks:unref(_)}),createBaseVNode("div",Vu,[createBaseVNode("div",Fu,toDisplayString$1(unref(se)),1)])]),_:3},8,["as","as-child","aria-label","data-readonly","data-disabled","data-invalid","dir"]))}}),zu=defineComponent({__name:"CalendarHeader",props:{asChild:{type:Boolean},as:{default:"div"}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Ku=defineComponent({__name:"CalendarHeading",props:{asChild:{type:Boolean},as:{default:"div"}},setup(o){const e=o,n=Yt();return(a,s)=>(openBlock(),createBlock(unref(O),mergeProps(e,{"data-disabled":unref(n).disabled.value?"":void 0}),{default:withCtx(()=>[renderSlot(a.$slots,"default",{headingValue:unref(n).headingValue.value},()=>[createTextVNode(toDisplayString$1(unref(n).headingValue.value),1)])]),_:3},16,["data-disabled"]))}}),Hu=defineComponent({__name:"CalendarGrid",props:{asChild:{type:Boolean},as:{default:"table"}},setup(o){const e=o,n=Yt(),a=computed(()=>n.disabled.value?!0:void 0),s=computed(()=>n.readonly.value?!0:void 0);return(l,c)=>(openBlock(),createBlock(unref(O),mergeProps(e,{tabindex:"-1",role:"grid","aria-readonly":s.value,"aria-disabled":a.value,"data-readonly":s.value&&"","data-disabled":a.value&&""}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16,["aria-readonly","aria-disabled","data-readonly","data-disabled"]))}}),Wu=defineComponent({__name:"CalendarCell",props:{date:{},asChild:{type:Boolean},as:{default:"td"}},setup(o){const e=Yt();return(n,a)=>{var s,l;return openBlock(),createBlock(unref(O),{as:n.as,"as-child":n.asChild,role:"gridcell","aria-selected":unref(e).isDateSelected(n.date)?!0:void 0,"aria-disabled":unref(e).isDateDisabled(n.date)||((l=(s=unref(e)).isDateUnavailable)==null?void 0:l.call(s,n.date)),"data-disabled":unref(e).isDateDisabled(n.date)?"":void 0},{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},8,["as","as-child","aria-selected","aria-disabled","data-disabled"])}}}),ju=defineComponent({__name:"CalendarHeadCell",props:{asChild:{type:Boolean},as:{default:"th"}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Uu=defineComponent({__name:"CalendarNext",props:{step:{default:"month"},nextPage:{},asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=computed(()=>a.disabled.value||a.isNextButtonDisabled(e.step,e.nextPage)),a=Yt();return(s,l)=>(openBlock(),createBlock(unref(O),{as:e.as,"as-child":e.asChild,"aria-label":"Next page",type:s.as==="button"?"button":void 0,"aria-disabled":n.value||void 0,"data-disabled":n.value||void 0,disabled:n.value,onClick:l[0]||(l[0]=c=>unref(a).nextPage(e.step,e.nextPage))},{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createTextVNode("Next page")])]),_:3},8,["as","as-child","type","aria-disabled","data-disabled","disabled"]))}}),Gu=defineComponent({__name:"CalendarPrev",props:{step:{default:"month"},prevPage:{},asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=computed(()=>a.disabled.value||a.isPrevButtonDisabled(e.step,e.prevPage)),a=Yt();return(s,l)=>(openBlock(),createBlock(unref(O),{"aria-label":"Previous page",as:e.as,"as-child":e.asChild,type:s.as==="button"?"button":void 0,"aria-disabled":n.value||void 0,"data-disabled":n.value||void 0,disabled:n.value,onClick:l[0]||(l[0]=c=>unref(a).prevPage(e.step,e.prevPage))},{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createTextVNode("Prev page")])]),_:3},8,["as","as-child","type","aria-disabled","data-disabled","disabled"]))}}),qu=defineComponent({__name:"CalendarGridHead",props:{asChild:{type:Boolean},as:{default:"thead"}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),mergeProps(e,{"aria-hidden":"true"}),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Yu=defineComponent({__name:"CalendarGridBody",props:{asChild:{type:Boolean},as:{default:"tbody"}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Xu=defineComponent({__name:"CalendarGridRow",props:{asChild:{type:Boolean},as:{default:"tr"}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Zu=defineComponent({__name:"CalendarCellTrigger",props:{day:{},month:{},asChild:{type:Boolean},as:{default:"div"}},setup(o){const e=o,n=et$1(),a=Yt(),{primitiveElement:s,currentElement:l}=Ie(),c=computed(()=>e.day.day.toLocaleString(a.locale.value)),d=computed(()=>a.formatter.custom($$1(e.day),{weekday:"long",month:"long",day:"numeric",year:"numeric"})),u=computed(()=>a.isDateDisabled(e.day)),f=computed(()=>{var V;return(V=a.isDateUnavailable)==null?void 0:V.call(a,e.day)}),p=computed(()=>$14e0f24ef4ac5c92$export$629b0a497aa65267(e.day,$14e0f24ef4ac5c92$export$aa8b41735afcabd2())),_=computed(()=>!$14e0f24ef4ac5c92$export$a18c89cbd24170ff(e.day,e.month)),b=computed(()=>a.isOutsideVisibleView(e.day)),v=computed(()=>!a.disabled.value&&$14e0f24ef4ac5c92$export$ea39ec197993aef0(e.day,a.placeholder.value)),k=computed(()=>a.isDateSelected(e.day)),x="[data-radix-vue-calendar-cell-trigger]:not([data-disabled]):not([data-outside-month]):not([data-outside-visible-months])";function M(V){var B;a.readonly.value||a.isDateDisabled(V)||(B=a.isDateUnavailable)!=null&&B.call(a,V)||a.onDateChange(V)}function E(){M(e.day)}function L(V){V.preventDefault(),V.stopPropagation();const B=a.parentElement.value,F=B?Array.from(B.querySelectorAll(x)):[];let j=F.indexOf(l.value);const I=7,U=a.dir.value==="rtl"?-1:1;switch(V.code){case n.ARROW_RIGHT:j+=U;break;case n.ARROW_LEFT:j-=U;break;case n.ARROW_UP:j-=I;break;case n.ARROW_DOWN:j+=I;break;case n.ENTER:case n.SPACE_CODE:M(e.day);return;default:return}if(j>=0&&j<F.length){F[j].focus();return}if(j<0){if(a.isPrevButtonDisabled("month"))return;a.prevPage(),nextTick(()=>{const W=B?Array.from(B.querySelectorAll(x)):[];W[W.length-Math.abs(j)].focus()});return}if(j>=F.length){if(a.isNextButtonDisabled("month"))return;a.nextPage(),nextTick(()=>{(B?Array.from(B.querySelectorAll(x)):[])[j-F.length].focus()})}}return(V,B)=>(openBlock(),createBlock(unref(O),mergeProps({ref_key:"primitiveElement",ref:s},e,{role:"button","aria-label":d.value,"data-radix-vue-calendar-cell-trigger":"","aria-disabled":_.value||u.value||f.value?!0:void 0,"data-selected":k.value?!0:void 0,"data-value":V.day.toString(),"data-disabled":u.value||_.value?"":void 0,"data-unavailable":f.value?"":void 0,"data-today":p.value?"":void 0,"data-outside-view":_.value?"":void 0,"data-outside-visible-view":b.value?"":void 0,"data-focused":v.value?"":void 0,tabindex:v.value?0:_.value||u.value?void 0:-1,onClick:E,onKeydown:[withKeys(L,["up","down","left","right","space","enter"]),B[0]||(B[0]=withKeys(withModifiers(()=>{},["prevent"]),["enter"]))]}),{default:withCtx(()=>[renderSlot(V.$slots,"default",{dayValue:c.value},()=>[createTextVNode(toDisplayString$1(c.value),1)])]),_:3},16,["aria-label","aria-disabled","data-selected","data-value","data-disabled","data-unavailable","data-today","data-outside-view","data-outside-visible-view","data-focused","tabindex"]))}});function Na(o){return o==="indeterminate"}function Xl(o){return Na(o)?"indeterminate":o?"checked":"unchecked"}const Ju=["value","checked","name","disabled","required"],[Qu,ed]=Q$1("CheckboxRoot"),zv=defineComponent({inheritAttrs:!1,__name:"CheckboxRoot",props:{defaultChecked:{type:Boolean},checked:{type:[Boolean,String],default:void 0},disabled:{type:Boolean},required:{type:Boolean},name:{},value:{default:"on"},id:{},asChild:{type:Boolean},as:{default:"button"}},emits:["update:checked"],setup(o,{emit:e}){const n=o,a=e,{disabled:s}=toRefs(n),l=ne$1(n,"checked",a,{defaultValue:n.defaultChecked,passive:n.checked===void 0}),{forwardRef:c,currentElement:d}=R(),u=Qe(d),f=computed(()=>{var p;return n.id&&d.value?(p=document.querySelector(`[for="${n.id}"]`))==null?void 0:p.innerText:void 0});return ed({disabled:s,state:l}),(p,_)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(unref(O),mergeProps(p.$attrs,{id:p.id,ref:unref(c),role:"checkbox","as-child":n.asChild,as:p.as,type:p.as==="button"?"button":void 0,"aria-checked":unref(Na)(unref(l))?"mixed":unref(l),"aria-required":!1,"aria-label":p.$attrs["aria-label"]||f.value,"data-state":unref(Xl)(unref(l)),"data-disabled":unref(s)?"":void 0,disabled:unref(s),onKeydown:withKeys(withModifiers(()=>{},["prevent"]),["enter"]),onClick:_[0]||(_[0]=b=>l.value=unref(Na)(unref(l))?!0:!unref(l))}),{default:withCtx(()=>[renderSlot(p.$slots,"default",{checked:unref(l)})]),_:3},16,["id","as-child","as","type","aria-checked","aria-label","data-state","data-disabled","disabled","onKeydown"]),unref(u)?(openBlock(),createElementBlock("input",{key:0,type:"checkbox",tabindex:"-1","aria-hidden":"true",value:p.value,checked:!!unref(l),name:n.name,disabled:n.disabled,required:n.required,style:{transform:"translateX(-100%)",position:"absolute",pointerEvents:"none",opacity:0,margin:0}},null,8,Ju)):createCommentVNode("",!0)],64))}}),Kv=defineComponent({__name:"CheckboxIndicator",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(o){const{forwardRef:e}=R(),n=Qu();return(a,s)=>(openBlock(),createBlock(unref(Pe$1),{present:a.forceMount||unref(Na)(unref(n).state.value)||unref(n).state.value===!0},{default:withCtx(()=>[createVNode(unref(O),mergeProps({ref:unref(e),"data-state":unref(Xl)(unref(n).state.value),"data-disabled":unref(n).disabled.value?"":void 0,style:{pointerEvents:"none"},"as-child":a.asChild,as:a.as},a.$attrs),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["data-state","data-disabled","as-child","as"])]),_:3},8,["present"]))}}),[Zl,td]=Q$1("PopperRoot"),Ot=defineComponent({inheritAttrs:!1,__name:"PopperRoot",setup(o){const e=ref();return td({anchor:e,onAnchorChange:n=>e.value=n}),(n,a)=>renderSlot(n.$slots,"default")}}),kt=defineComponent({__name:"PopperAnchor",props:{element:{},asChild:{type:Boolean},as:{}},setup(o){const e=o,{forwardRef:n,currentElement:a}=R(),s=Zl();return watchEffect(()=>{s.onAnchorChange(e.element??a.value)}),(l,c)=>(openBlock(),createBlock(unref(O),{ref:unref(n),as:l.as,"as-child":l.asChild},{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},8,["as","as-child"]))}});function ad(o){return o!==null}function nd(o){return{name:"transformOrigin",options:o,fn(e){var n,a,s;const{placement:l,rects:c,middlewareData:d}=e,u=((n=d.arrow)==null?void 0:n.centerOffset)!==0,f=u?0:o.arrowWidth,p=u?0:o.arrowHeight,[_,b]=Bn(l),v={start:"0%",center:"50%",end:"100%"}[b],k=(((a=d.arrow)==null?void 0:a.x)??0)+f/2,x=(((s=d.arrow)==null?void 0:s.y)??0)+p/2;let M="",E="";return _==="bottom"?(M=u?v:`${k}px`,E=`${-p}px`):_==="top"?(M=u?v:`${k}px`,E=`${c.floating.height+p}px`):_==="right"?(M=`${-p}px`,E=u?v:`${x}px`):_==="left"&&(M=`${c.floating.width+p}px`,E=u?v:`${x}px`),{data:{x:M,y:E}}}}}function Bn(o){const[e,n="center"]=o.split("-");return[e,n]}const Jl={side:"bottom",sideOffset:0,align:"center",alignOffset:0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,updatePositionStrategy:"optimized",prioritizePosition:!1},[od,ld]=Q$1("PopperContent"),Bt=defineComponent({inheritAttrs:!1,__name:"PopperContent",props:mergeDefaults({side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},{...Jl}),emits:["placed"],setup(o,{emit:e}){const n=o,a=e,s=Zl(),{forwardRef:l,currentElement:c}=R(),d=ref(),u=ref(),{width:f,height:p}=Vl(u),_=computed(()=>n.side+(n.align!=="center"?`-${n.align}`:"")),b=computed(()=>typeof n.collisionPadding=="number"?n.collisionPadding:{top:0,right:0,bottom:0,left:0,...n.collisionPadding}),v=computed(()=>Array.isArray(n.collisionBoundary)?n.collisionBoundary:[n.collisionBoundary]),k=computed(()=>({padding:b.value,boundary:v.value.filter(ad),altBoundary:v.value.length>0})),x=ei(()=>[offset({mainAxis:n.sideOffset+p.value,alignmentAxis:n.alignOffset}),n.prioritizePosition&&n.avoidCollisions&&flip({...k.value}),n.avoidCollisions&&shift({mainAxis:!0,crossAxis:!!n.prioritizePosition,limiter:n.sticky==="partial"?limitShift():void 0,...k.value}),!n.prioritizePosition&&n.avoidCollisions&&flip({...k.value}),size({...k.value,apply:({elements:K,rects:G,availableWidth:Z,availableHeight:oe})=>{const{width:Y,height:se}=G.reference,le=K.floating.style;le.setProperty("--radix-popper-available-width",`${Z}px`),le.setProperty("--radix-popper-available-height",`${oe}px`),le.setProperty("--radix-popper-anchor-width",`${Y}px`),le.setProperty("--radix-popper-anchor-height",`${se}px`)}}),u.value&&arrow({element:u.value,padding:n.arrowPadding}),nd({arrowWidth:f.value,arrowHeight:p.value}),n.hideWhenDetached&&hide({strategy:"referenceHidden",...k.value})]),{floatingStyles:M,placement:E,isPositioned:L,middlewareData:V}=useFloating(s.anchor,d,{strategy:"fixed",placement:_,whileElementsMounted:(...K)=>autoUpdate(...K,{animationFrame:n.updatePositionStrategy==="always"}),middleware:x}),B=computed(()=>Bn(E.value)[0]),F=computed(()=>Bn(E.value)[1]);watchPostEffect(()=>{L.value&&a("placed")});const j=computed(()=>{var K;return((K=V.value.arrow)==null?void 0:K.centerOffset)!==0}),I=ref("");watchEffect(()=>{c.value&&(I.value=window.getComputedStyle(c.value).zIndex)});const U=computed(()=>{var K;return((K=V.value.arrow)==null?void 0:K.x)??0}),W=computed(()=>{var K;return((K=V.value.arrow)==null?void 0:K.y)??0});return ld({placedSide:B,onArrowChange:K=>u.value=K,arrowX:U,arrowY:W,shouldHideArrow:j}),(K,G)=>{var Z,oe,Y;return openBlock(),createElementBlock("div",{ref_key:"floatingRef",ref:d,"data-radix-popper-content-wrapper":"",style:normalizeStyle({...unref(M),transform:unref(L)?unref(M).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:I.value,"--radix-popper-transform-origin":[(Z=unref(V).transformOrigin)==null?void 0:Z.x,(oe=unref(V).transformOrigin)==null?void 0:oe.y].join(" "),...((Y=unref(V).hide)==null?void 0:Y.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}})},[createVNode(unref(O),mergeProps({ref:unref(l)},K.$attrs,{"as-child":n.asChild,as:K.as,"data-side":B.value,"data-align":F.value,style:{animation:unref(L)?void 0:"none"}}),{default:withCtx(()=>[renderSlot(K.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4)}}}),Zt=defineComponent({__name:"VisuallyHidden",props:{asChild:{type:Boolean},as:{default:"span"}},setup(o){return R(),(e,n)=>(openBlock(),createBlock(unref(O),{as:e.as,"as-child":e.asChild,style:{position:"absolute",border:0,width:"1px",display:"inline-block",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},8,["as","as-child"]))}}),ud="data-radix-vue-collection-item",[ao,dd]=Q$1("CollectionProvider");function ba(o=ud){const e=ref(new Map),n=ref(),a=dd({collectionRef:n,itemMap:e,attrName:o}),{getItems:s}=Qt(a),l=computed(()=>Array.from(a.itemMap.value.values())),c=computed(()=>a.itemMap.value.size);return{getItems:s,reactiveItems:l,itemMapSize:c}}const Ca=defineComponent({name:"CollectionSlot",setup(o,{slots:e}){const n=ao(),{primitiveElement:a,currentElement:s}=Ie();return watch(s,()=>{n.collectionRef.value=s.value}),()=>h(Xn,{ref:a},e)}}),Jt=defineComponent({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(o,{slots:e,attrs:n}){const a=ao(),{primitiveElement:s,currentElement:l}=Ie();return watchEffect(c=>{if(l.value){const d=markRaw(l.value);a.itemMap.value.set(d,{ref:l.value,value:o.value}),c(()=>a.itemMap.value.delete(d))}}),()=>h(Xn,{...n,[a.attrName]:"",ref:s},e)}});function Qt(o){const e=o??ao();return{getItems:()=>{const n=e.collectionRef.value;if(!n)return[];const a=Array.from(n.querySelectorAll(`[${e.attrName}]`));return Array.from(e.itemMap.value.values()).sort((s,l)=>a.indexOf(s.ref)-a.indexOf(l.ref))}}}function Xa(o){const e=Ga({nonce:ref()});return computed(()=>{var n;return o?.value||((n=e.nonce)==null?void 0:n.value)})}const Za=defineComponent({__name:"MenuAnchor",props:{element:{},asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(kt),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}});function bd(){const o=ref(!1);return onMounted(()=>{Le("keydown",()=>{o.value=!0},{capture:!0,passive:!0}),Le(["pointerdown","pointermove"],()=>{o.value=!1},{capture:!0,passive:!0})}),o}const Cd=Sl(bd),[Mt,es]=Q$1(["MenuRoot","MenuSub"],"MenuContext"),[wa,wd]=Q$1("MenuRoot"),oo=defineComponent({__name:"MenuRoot",props:{open:{type:Boolean,default:!1},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=e,{modal:s,dir:l}=toRefs(n),c=be(l),d=ne$1(n,"open",a),u=ref(),f=Cd();return es({open:d,onOpenChange:p=>{d.value=p},content:u,onContentChange:p=>{u.value=p}}),wd({onClose:()=>{d.value=!1},isUsingKeyboardRef:f,dir:c,modal:s}),(p,_)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(p.$slots,"default")]),_:3}))}}),_d="rovingFocusGroup.onEntryFocus",xd={bubbles:!1,cancelable:!0},Ja={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Sd(o,e){return e!=="rtl"?o:o==="ArrowLeft"?"ArrowRight":o==="ArrowRight"?"ArrowLeft":o}function ts(o,e,n){const a=Sd(o.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return Ja[a]}function as(o,e=!1,n){const a=n?.activeElement??document.activeElement;for(const s of o)if(s===a||(s.focus({preventScroll:e}),document.activeElement!==a))return}function Ed(o,e){return o.map((n,a)=>o[(e+a)%o.length])}const[Pd,Dd]=Q$1("RovingFocusGroup"),Vt=defineComponent({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(o,{expose:e,emit:n}){const a=o,s=n,{loop:l,orientation:c,dir:d}=toRefs(a),u=be(d),f=ne$1(a,"currentTabStopId",s,{defaultValue:a.defaultCurrentTabStopId,passive:a.currentTabStopId===void 0}),p=ref(!1),_=ref(!1),b=ref(0),{getItems:v}=ba();function k(M){const E=!_.value;if(M.currentTarget&&M.target===M.currentTarget&&E&&!p.value){const L=new CustomEvent(_d,xd);if(M.currentTarget.dispatchEvent(L),s("entryFocus",L),!L.defaultPrevented){const V=v().map(I=>I.ref).filter(I=>I.dataset.disabled!==""),B=V.find(I=>I.getAttribute("data-active")==="true"),F=V.find(I=>I.id===f.value),j=[B,F,...V].filter(Boolean);as(j,a.preventScrollOnEntryFocus)}}_.value=!1}function x(){setTimeout(()=>{_.value=!1},1)}return e({getItems:v}),Dd({loop:l,dir:u,orientation:c,currentTabStopId:f,onItemFocus:M=>{f.value=M},onItemShiftTab:()=>{p.value=!0},onFocusableItemAdd:()=>{b.value++},onFocusableItemRemove:()=>{b.value--}}),(M,E)=>(openBlock(),createBlock(unref(Ca),null,{default:withCtx(()=>[createVNode(unref(O),{tabindex:p.value||b.value===0?-1:0,"data-orientation":unref(c),as:M.as,"as-child":M.asChild,dir:unref(u),style:{outline:"none"},onMousedown:E[0]||(E[0]=L=>_.value=!0),onMouseup:x,onFocus:k,onBlur:E[1]||(E[1]=L=>p.value=!1)},{default:withCtx(()=>[renderSlot(M.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Ft=defineComponent({__name:"RovingFocusItem",props:{tabStopId:{},focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!0},allowShiftKey:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(o){const e=o,n=Pd(),a=computed(()=>e.tabStopId||he()),s=computed(()=>n.currentTabStopId.value===a.value),{getItems:l}=Qt(),{primitiveElement:c,currentElement:d}=Ie(),u=computed(()=>{var p;return(p=d.value)==null?void 0:p.getRootNode()});onMounted(()=>{e.focusable&&n.onFocusableItemAdd()}),onUnmounted(()=>{e.focusable&&n.onFocusableItemRemove()});function f(p){if(p.key==="Tab"&&p.shiftKey){n.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const _=ts(p,n.orientation.value,n.dir.value);if(_!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||!e.allowShiftKey&&p.shiftKey)return;p.preventDefault();let b=[...l().map(v=>v.ref).filter(v=>v.dataset.disabled!=="")];if(_==="last")b.reverse();else if(_==="prev"||_==="next"){_==="prev"&&b.reverse();const v=b.indexOf(p.currentTarget);b=n.loop.value?Ed(b,v+1):b.slice(v+1)}nextTick(()=>as(b,!1,u.value))}}return(p,_)=>(openBlock(),createBlock(unref(Jt),null,{default:withCtx(()=>[createVNode(unref(O),{ref_key:"primitiveElement",ref:c,tabindex:s.value?0:-1,"data-orientation":unref(n).orientation.value,"data-active":p.active,"data-disabled":p.focusable?void 0:"",as:p.as,"as-child":p.asChild,onMousedown:_[0]||(_[0]=b=>{p.focusable?unref(n).onItemFocus(a.value):b.preventDefault()}),onFocus:_[1]||(_[1]=b=>unref(n).onItemFocus(a.value)),onKeydown:f},{default:withCtx(()=>[renderSlot(p.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),[lo,$d]=Q$1("MenuContent"),so=defineComponent({__name:"MenuContentImpl",props:mergeDefaults({loop:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},disableOutsideScroll:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},{...Jl}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(o,{emit:e}){const n=o,a=e,s=Mt(),l=wa(),{trapFocus:c,disableOutsidePointerEvents:d,loop:u}=toRefs(n);Gn(),ha(d.value);const f=ref(""),p=ref(0),_=ref(0),b=ref(null),v=ref("right"),k=ref(0),x=ref(null),{createCollection:M}=Me(),{forwardRef:E,currentElement:L}=R(),V=M(L);watch(L,K=>{s.onContentChange(K)});const{handleTypeaheadSearch:B}=ga(V);onUnmounted(()=>{window.clearTimeout(p.value)});function F(K){var G,Z;return v.value===((G=b.value)==null?void 0:G.side)&&yu(K,(Z=b.value)==null?void 0:Z.area)}async function j(K){var G;a("openAutoFocus",K),!K.defaultPrevented&&(K.preventDefault(),(G=L.value)==null||G.focus({preventScroll:!0}))}function I(K){if(K.defaultPrevented)return;const G=K.target.closest("[data-radix-menu-content]")===K.currentTarget,Z=K.ctrlKey||K.altKey||K.metaKey,oe=K.key.length===1,Y=Rt(K,document.activeElement,L.value,{loop:u.value,arrowKeyOptions:"vertical",dir:l?.dir.value,focus:!0,attributeName:"[data-radix-vue-collection-item]:not([data-disabled])"});if(Y)return Y?.focus();if(K.code==="Space"||(G&&(K.key==="Tab"&&K.preventDefault(),!Z&&oe&&B(K.key)),K.target!==L.value)||!pu.includes(K.key))return;K.preventDefault();const se=V.value;jl.includes(K.key)&&se.reverse(),$n(se)}function U(K){var G,Z;(Z=(G=K?.currentTarget)==null?void 0:G.contains)!=null&&Z.call(G,K.target)||(window.clearTimeout(p.value),f.value="")}function W(K){var G;if(!ua(K))return;const Z=K.target,oe=k.value!==K.clientX;if((G=K?.currentTarget)!=null&&G.contains(Z)&&oe){const Y=K.clientX>k.value?"right":"left";v.value=Y,k.value=K.clientX}}return $d({onItemEnter:K=>!!F(K),onItemLeave:K=>{var G;F(K)||((G=L.value)==null||G.focus(),x.value=null)},onTriggerLeave:K=>!!F(K),searchRef:f,pointerGraceTimerRef:_,onPointerGraceIntentChange:K=>{b.value=K}}),(K,G)=>(openBlock(),createBlock(unref(Ya),{"as-child":"",trapped:unref(c),onMountAutoFocus:j,onUnmountAutoFocus:G[7]||(G[7]=Z=>a("closeAutoFocus",Z))},{default:withCtx(()=>[createVNode(unref(gt$1),{"as-child":"","disable-outside-pointer-events":unref(d),onEscapeKeyDown:G[2]||(G[2]=Z=>a("escapeKeyDown",Z)),onPointerDownOutside:G[3]||(G[3]=Z=>a("pointerDownOutside",Z)),onFocusOutside:G[4]||(G[4]=Z=>a("focusOutside",Z)),onInteractOutside:G[5]||(G[5]=Z=>a("interactOutside",Z)),onDismiss:G[6]||(G[6]=Z=>a("dismiss"))},{default:withCtx(()=>[createVNode(unref(Vt),{"current-tab-stop-id":x.value,"onUpdate:currentTabStopId":G[0]||(G[0]=Z=>x.value=Z),"as-child":"",orientation:"vertical",dir:unref(l).dir.value,loop:unref(u),onEntryFocus:G[1]||(G[1]=Z=>{a("entryFocus",Z),unref(l).isUsingKeyboardRef.value||Z.preventDefault()})},{default:withCtx(()=>[createVNode(unref(Bt),{ref:unref(E),role:"menu",as:K.as,"as-child":K.asChild,"aria-orientation":"vertical","data-radix-menu-content":"","data-state":unref(Qn)(unref(s).open.value),dir:unref(l).dir.value,side:K.side,"side-offset":K.sideOffset,align:K.align,"align-offset":K.alignOffset,"avoid-collisions":K.avoidCollisions,"collision-boundary":K.collisionBoundary,"collision-padding":K.collisionPadding,"arrow-padding":K.arrowPadding,"prioritize-position":K.prioritizePosition,sticky:K.sticky,"hide-when-detached":K.hideWhenDetached,onKeydown:I,onBlur:U,onPointermove:W},{default:withCtx(()=>[renderSlot(K.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","sticky","hide-when-detached"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),ns=defineComponent({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(o){const e=o,n=lo(),{forwardRef:a}=R(),s=ref(!1);async function l(d){if(!d.defaultPrevented&&ua(d)){if(e.disabled)n.onItemLeave(d);else if(!n.onItemEnter(d)){const u=d.currentTarget;u?.focus({preventScroll:!0})}}}async function c(d){await nextTick(),!d.defaultPrevented&&ua(d)&&n.onItemLeave(d)}return(d,u)=>(openBlock(),createBlock(unref(Jt),{value:{textValue:d.textValue}},{default:withCtx(()=>[createVNode(unref(O),mergeProps({ref:unref(a),role:"menuitem",tabindex:"-1"},d.$attrs,{as:d.as,"as-child":d.asChild,"data-radix-vue-collection-item":"","aria-disabled":d.disabled||void 0,"data-disabled":d.disabled?"":void 0,"data-highlighted":s.value?"":void 0,onPointermove:l,onPointerleave:c,onFocus:u[0]||(u[0]=async f=>{await nextTick(),!(f.defaultPrevented||d.disabled)&&(s.value=!0)}),onBlur:u[1]||(u[1]=async f=>{await nextTick(),!f.defaultPrevented&&(s.value=!1)})}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),_a$1=defineComponent({__name:"MenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(o,{emit:e}){const n=o,a=e,{forwardRef:s,currentElement:l}=R(),c=wa(),d=lo(),u=ref(!1);async function f(){const p=l.value;if(!n.disabled&&p){const _=new CustomEvent(cu,{bubbles:!0,cancelable:!0});a("select",_),await nextTick(),_.defaultPrevented?u.value=!1:c.onClose()}}return(p,_)=>(openBlock(),createBlock(ns,mergeProps(n,{ref:unref(s),onClick:f,onPointerdown:_[0]||(_[0]=()=>{u.value=!0}),onPointerup:_[1]||(_[1]=async b=>{var v;await nextTick(),!b.defaultPrevented&&(u.value||(v=b.currentTarget)==null||v.click())}),onKeydown:_[2]||(_[2]=async b=>{const v=unref(d).searchRef.value!=="";p.disabled||v&&b.key===" "||unref(Dn).includes(b.key)&&(b.currentTarget.click(),b.preventDefault())})}),{default:withCtx(()=>[renderSlot(p.$slots,"default")]),_:3},16))}}),Id=defineComponent({__name:"MenuRootContentModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=xe(n,a),l=Mt(),{forwardRef:c,currentElement:d}=R();return ya(d),(u,f)=>(openBlock(),createBlock(so,mergeProps(unref(s),{ref:unref(c),"trap-focus":unref(l).open.value,"disable-outside-pointer-events":unref(l).open.value,"disable-outside-scroll":!0,onDismiss:f[0]||(f[0]=p=>unref(l).onOpenChange(!1)),onFocusOutside:f[1]||(f[1]=withModifiers(p=>a("focusOutside",p),["prevent"]))}),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),Td=defineComponent({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=xe(o,e),a=Mt();return(s,l)=>(openBlock(),createBlock(so,mergeProps(unref(n),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:l[0]||(l[0]=c=>unref(a).onOpenChange(!1))}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16))}}),uo=defineComponent({__name:"MenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=xe(o,e),a=Mt(),s=wa();return(l,c)=>(openBlock(),createBlock(unref(Pe$1),{present:l.forceMount||unref(a).open.value},{default:withCtx(()=>[unref(s).modal.value?(openBlock(),createBlock(Id,normalizeProps(mergeProps({key:0},{...l.$attrs,...unref(n)})),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16)):(openBlock(),createBlock(Td,normalizeProps(mergeProps({key:1},{...l.$attrs,...unref(n)})),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Qa=defineComponent({__name:"MenuGroup",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),mergeProps({role:"group"},e),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),fo=defineComponent({__name:"MenuPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),[ls,Od]=Q$1("MenuSub"),ho=defineComponent({__name:"MenuSub",props:{open:{type:Boolean,default:void 0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=ne$1(n,"open",e,{defaultValue:!1,passive:n.open===void 0}),s=Mt(),l=ref(),c=ref();return watchEffect(d=>{s?.open.value===!1&&(a.value=!1),d(()=>a.value=!1)}),es({open:a,onOpenChange:d=>{a.value=d},content:c,onContentChange:d=>{c.value=d}}),Od({triggerId:"",contentId:"",trigger:l,onTriggerChange:d=>{l.value=d}}),(d,u)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3}))}}),yo=defineComponent({__name:"MenuSubContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideOffset:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean,default:!0},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=xe(o,e),a=Mt(),s=wa(),l=ls(),{forwardRef:c,currentElement:d}=R();return l.contentId||(l.contentId=he(void 0,"radix-vue-menu-sub-content")),(u,f)=>(openBlock(),createBlock(unref(Pe$1),{present:u.forceMount||unref(a).open.value},{default:withCtx(()=>[createVNode(so,mergeProps(unref(n),{id:unref(l).contentId,ref:unref(c),"aria-labelledby":unref(l).triggerId,align:"start",side:unref(s).dir.value==="rtl"?"left":"right","disable-outside-pointer-events":!1,"disable-outside-scroll":!1,"trap-focus":!1,onOpenAutoFocus:f[0]||(f[0]=withModifiers(p=>{var _;unref(s).isUsingKeyboardRef.value&&((_=unref(d))==null||_.focus())},["prevent"])),onCloseAutoFocus:f[1]||(f[1]=withModifiers(()=>{},["prevent"])),onFocusOutside:f[2]||(f[2]=p=>{p.defaultPrevented||p.target!==unref(l).trigger.value&&unref(a).onOpenChange(!1)}),onEscapeKeyDown:f[3]||(f[3]=p=>{unref(s).onClose(),p.preventDefault()}),onKeydown:f[4]||(f[4]=p=>{var _,b;const v=(_=p.currentTarget)==null?void 0:_.contains(p.target),k=unref(mu)[unref(s).dir.value].includes(p.key);v&&k&&(unref(a).onOpenChange(!1),(b=unref(l).trigger.value)==null||b.focus(),p.preventDefault())})}),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16,["id","aria-labelledby","side"])]),_:3},8,["present"]))}}),go=defineComponent({__name:"MenuSubTrigger",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(o){const e=o,n=Mt(),a=wa(),s=ls(),l=lo(),c=ref(null);s.triggerId||(s.triggerId=he(void 0,"radix-vue-menu-sub-trigger"));function d(){c.value&&window.clearTimeout(c.value),c.value=null}onUnmounted(()=>{d()});function u(_){!ua(_)||l.onItemEnter(_)||!e.disabled&&!n.open.value&&!c.value&&(l.onPointerGraceIntentChange(null),c.value=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))}async function f(_){var b,v;if(!ua(_))return;d();const k=(b=n.content.value)==null?void 0:b.getBoundingClientRect();if(k!=null&&k.width){const x=(v=n.content.value)==null?void 0:v.dataset.side,M=x==="right",E=M?-5:5,L=k[M?"left":"right"],V=k[M?"right":"left"];l.onPointerGraceIntentChange({area:[{x:_.clientX+E,y:_.clientY},{x:L,y:k.top},{x:V,y:k.top},{x:V,y:k.bottom},{x:L,y:k.bottom}],side:x}),window.clearTimeout(l.pointerGraceTimerRef.value),l.pointerGraceTimerRef.value=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(_))return;l.onPointerGraceIntentChange(null)}}async function p(_){var b;const v=l.searchRef.value!=="";e.disabled||v&&_.key===" "||vu[a.dir.value].includes(_.key)&&(n.onOpenChange(!0),await nextTick(),(b=n.content.value)==null||b.focus(),_.preventDefault())}return(_,b)=>(openBlock(),createBlock(Za,{"as-child":""},{default:withCtx(()=>[createVNode(ns,mergeProps(e,{id:unref(s).triggerId,ref:v=>{var k;(k=unref(s))==null||k.onTriggerChange(v?.$el)},"aria-haspopup":"menu","aria-expanded":unref(n).open.value,"aria-controls":unref(s).contentId,"data-state":unref(Qn)(unref(n).open.value),onClick:b[0]||(b[0]=async v=>{e.disabled||v.defaultPrevented||(v.currentTarget.focus(),unref(n).open.value||unref(n).onOpenChange(!0))}),onPointermove:u,onPointerleave:f,onKeydown:p}),{default:withCtx(()=>[renderSlot(_.$slots,"default")]),_:3},16,["id","aria-expanded","aria-controls","data-state"])]),_:3}))}}),[ss,kd]=Q$1("ContextMenuRoot"),om=defineComponent({inheritAttrs:!1,__name:"ContextMenuRoot",props:{dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=e,{dir:s,modal:l}=toRefs(n);R();const c=be(s),d=ref(!1);return kd({open:d,onOpenChange:u=>{d.value=u},dir:c,modal:l}),watch(d,u=>{a("update:open",u)}),(u,f)=>(openBlock(),createBlock(unref(oo),{open:d.value,"onUpdate:open":f[0]||(f[0]=p=>d.value=p),dir:unref(c),modal:unref(l)},{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},8,["open","dir","modal"]))}});function qo(o){return o.pointerType!=="mouse"}const lm=defineComponent({inheritAttrs:!1,__name:"ContextMenuTrigger",props:{disabled:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"span"}},setup(o){const e=o,{disabled:n}=toRefs(e),{forwardRef:a}=R(),s=ss(),l=ref({x:0,y:0}),c=computed(()=>({getBoundingClientRect:()=>({width:0,height:0,left:l.value.x,right:l.value.x,top:l.value.y,bottom:l.value.y,...l.value})})),d=ref(0);function u(){window.clearTimeout(d.value)}function f(v){l.value={x:v.clientX,y:v.clientY},s.onOpenChange(!0)}async function p(v){n.value||(await nextTick(),v.defaultPrevented||(u(),f(v),v.preventDefault()))}async function _(v){n.value||(await nextTick(),qo(v)&&!v.defaultPrevented&&(u(),d.value=window.setTimeout(()=>f(v),700)))}async function b(v){n.value||(await nextTick(),qo(v)&&!v.defaultPrevented&&u())}return(v,k)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(unref(Za),{as:"template",element:c.value},null,8,["element"]),createVNode(unref(O),mergeProps({ref:unref(a),as:v.as,"as-child":v.asChild,"data-state":unref(s).open.value?"open":"closed","data-disabled":unref(n)?"":void 0,style:{WebkitTouchCallout:"none"}},v.$attrs,{onContextmenu:p,onPointerdown:_,onPointermove:b,onPointercancel:b,onPointerup:b}),{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3},16,["as","as-child","data-state","data-disabled"])],64))}}),sm=defineComponent({__name:"ContextMenuPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(fo),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),rm=defineComponent({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},alignOffset:{default:0},avoidCollisions:{type:Boolean,default:!0},collisionBoundary:{default:()=>[]},collisionPadding:{default:0},sticky:{default:"partial"},hideWhenDetached:{type:Boolean,default:!1},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(o,{emit:e}){const n=xe(o,e);R();const a=ss(),s=ref(!1);return(l,c)=>(openBlock(),createBlock(unref(uo),mergeProps(unref(n),{side:"right","side-offset":2,align:"start",style:{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"},onCloseAutoFocus:c[0]||(c[0]=d=>{!d.defaultPrevented&&s.value&&d.preventDefault(),s.value=!1}),onInteractOutside:c[1]||(c[1]=d=>{!d.defaultPrevented&&!unref(a).modal.value&&(s.value=!0)})}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),[us,ic]=Q$1("DropdownMenuRoot"),sh=defineComponent({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean},open:{type:Boolean,default:void 0},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=e;R();const s=ne$1(n,"open",a,{defaultValue:n.defaultOpen,passive:n.open===void 0}),l=ref(),{modal:c,dir:d}=toRefs(n),u=be(d);return ic({open:s,onOpenChange:f=>{s.value=f},onOpenToggle:()=>{s.value=!s.value},triggerId:"",triggerElement:l,contentId:"",modal:c,dir:u}),(f,p)=>(openBlock(),createBlock(unref(oo),{open:unref(s),"onUpdate:open":p[0]||(p[0]=_=>isRef(s)?s.value=_:null),dir:unref(u),modal:unref(c)},{default:withCtx(()=>[renderSlot(f.$slots,"default",{open:unref(s)})]),_:3},8,["open","dir","modal"]))}}),rh=defineComponent({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=us(),{forwardRef:a,currentElement:s}=R();return onMounted(()=>{n.triggerElement=s}),n.triggerId||(n.triggerId=he(void 0,"radix-vue-dropdown-menu-trigger")),(l,c)=>(openBlock(),createBlock(unref(Za),{"as-child":""},{default:withCtx(()=>[createVNode(unref(O),{id:unref(n).triggerId,ref:unref(a),type:l.as==="button"?"button":void 0,"as-child":e.asChild,as:l.as,"aria-haspopup":"menu","aria-expanded":unref(n).open.value,"aria-controls":unref(n).open.value?unref(n).contentId:void 0,"data-disabled":l.disabled?"":void 0,disabled:l.disabled,"data-state":unref(n).open.value?"open":"closed",onClick:c[0]||(c[0]=async d=>{var u;!l.disabled&&d.button===0&&d.ctrlKey===!1&&((u=unref(n))==null||u.onOpenToggle(),await nextTick(),unref(n).open.value&&d.preventDefault())}),onKeydown:c[1]||(c[1]=withKeys(d=>{l.disabled||(["Enter"," "].includes(d.key)&&unref(n).onOpenToggle(),d.key==="ArrowDown"&&unref(n).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())},["enter","space","arrow-down"]))},{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),ih=defineComponent({__name:"DropdownMenuPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(fo),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),uh=defineComponent({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(o,{emit:e}){const n=xe(o,e);R();const a=us(),s=ref(!1);function l(c){c.defaultPrevented||(s.value||setTimeout(()=>{var d;(d=a.triggerElement.value)==null||d.focus()},0),s.value=!1,c.preventDefault())}return a.contentId||(a.contentId=he(void 0,"radix-vue-dropdown-menu-content")),(c,d)=>{var u;return openBlock(),createBlock(unref(uo),mergeProps(unref(n),{id:unref(a).contentId,"aria-labelledby":(u=unref(a))==null?void 0:u.triggerId,style:{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"},onCloseAutoFocus:l,onInteractOutside:d[0]||(d[0]=f=>{var p;if(f.defaultPrevented)return;const _=f.detail.originalEvent,b=_.button===0&&_.ctrlKey===!0,v=_.button===2||b;(!unref(a).modal.value||v)&&(s.value=!0),(p=unref(a).triggerElement.value)!=null&&p.contains(f.target)&&f.preventDefault()})}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),ch$1=defineComponent({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(o,{emit:e}){const n=o,a=Ae(e);return R(),(s,l)=>(openBlock(),createBlock(unref(_a$1),normalizeProps(guardReactiveProps({...n,...unref(a)})),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16))}}),fh=defineComponent({__name:"DropdownMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(Qa),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),bh=defineComponent({__name:"DropdownMenuSub",props:{defaultOpen:{type:Boolean},open:{type:Boolean,default:void 0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=ne$1(n,"open",e,{passive:n.open===void 0,defaultValue:n.defaultOpen??!1});return R(),(s,l)=>(openBlock(),createBlock(unref(ho),{open:unref(a),"onUpdate:open":l[0]||(l[0]=c=>isRef(a)?a.value=c:null)},{default:withCtx(()=>[renderSlot(s.$slots,"default",{open:unref(a)})]),_:3},8,["open"]))}}),Ch=defineComponent({__name:"DropdownMenuSubContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideOffset:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=xe(o,e);return R(),(a,s)=>(openBlock(),createBlock(unref(yo),mergeProps(unref(n),{style:{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),wh=defineComponent({__name:"DropdownMenuSubTrigger",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(go),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Oh=defineComponent({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(O),mergeProps(e,{onMousedown:a[0]||(a[0]=s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})}),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),[Nt,Xc]=Q$1("PopoverRoot"),ys=defineComponent({__name:"PopoverRoot",props:{defaultOpen:{type:Boolean,default:!1},open:{type:Boolean,default:void 0},modal:{type:Boolean,default:!1}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=e,{modal:s}=toRefs(n),l=ne$1(n,"open",a,{defaultValue:n.defaultOpen,passive:n.open===void 0}),c=ref(),d=ref(!1);return Xc({contentId:"",modal:s,open:l,onOpenChange:u=>{l.value=u},onOpenToggle:()=>{l.value=!l.value},triggerElement:c,hasCustomAnchor:d}),(u,f)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(u.$slots,"default",{open:unref(l)})]),_:3}))}}),gs=defineComponent({__name:"PopoverTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=Nt(),{forwardRef:a,currentElement:s}=R();return onMounted(()=>{n.triggerElement.value=s.value}),(l,c)=>(openBlock(),createBlock(resolveDynamicComponent(unref(n).hasCustomAnchor.value?unref(O):unref(kt)),{"as-child":""},{default:withCtx(()=>[createVNode(unref(O),{ref:unref(a),type:l.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":unref(n).open.value,"aria-controls":unref(n).contentId,"data-state":unref(n).open.value?"open":"closed",as:l.as,"as-child":e.asChild,onClick:unref(n).onOpenToggle},{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},8,["type","aria-expanded","aria-controls","data-state","as","as-child","onClick"])]),_:3}))}}),bs=defineComponent({__name:"PopoverPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Cs=defineComponent({__name:"PopoverContentImpl",props:{trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=At(n),{forwardRef:l}=R(),c=Nt();return Gn(),(d,u)=>(openBlock(),createBlock(unref(Ya),{"as-child":"",loop:"",trapped:d.trapFocus,onMountAutoFocus:u[5]||(u[5]=f=>a("openAutoFocus",f)),onUnmountAutoFocus:u[6]||(u[6]=f=>a("closeAutoFocus",f))},{default:withCtx(()=>[createVNode(unref(gt$1),{"as-child":"","disable-outside-pointer-events":d.disableOutsidePointerEvents,onPointerDownOutside:u[0]||(u[0]=f=>a("pointerDownOutside",f)),onInteractOutside:u[1]||(u[1]=f=>a("interactOutside",f)),onEscapeKeyDown:u[2]||(u[2]=f=>a("escapeKeyDown",f)),onFocusOutside:u[3]||(u[3]=f=>a("focusOutside",f)),onDismiss:u[4]||(u[4]=f=>unref(c).onOpenChange(!1))},{default:withCtx(()=>[createVNode(unref(Bt),mergeProps(unref(s),{id:unref(c).contentId,ref:unref(l),"data-state":unref(c).open.value?"open":"closed",role:"dialog",style:{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["id","data-state"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),Zc=defineComponent({__name:"PopoverContentModal",props:{trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=Nt(),l=ref(!1);ha(!0);const c=xe(n,a),{forwardRef:d,currentElement:u}=R();return ya(u),(f,p)=>(openBlock(),createBlock(Cs,mergeProps(unref(c),{ref:unref(d),"trap-focus":unref(s).open.value,"disable-outside-pointer-events":"",onCloseAutoFocus:p[0]||(p[0]=withModifiers(_=>{var b;a("closeAutoFocus",_),l.value||(b=unref(s).triggerElement.value)==null||b.focus()},["prevent"])),onPointerDownOutside:p[1]||(p[1]=_=>{a("pointerDownOutside",_);const b=_.detail.originalEvent,v=b.button===0&&b.ctrlKey===!0,k=b.button===2||v;l.value=k}),onFocusOutside:p[2]||(p[2]=withModifiers(()=>{},["prevent"]))}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["trap-focus"]))}}),Jc=defineComponent({__name:"PopoverContentNonModal",props:{trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=Nt(),l=ref(!1),c=ref(!1),d=xe(n,a);return(u,f)=>(openBlock(),createBlock(Cs,mergeProps(unref(d),{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:f[0]||(f[0]=p=>{var _;a("closeAutoFocus",p),p.defaultPrevented||(l.value||(_=unref(s).triggerElement.value)==null||_.focus(),p.preventDefault()),l.value=!1,c.value=!1}),onInteractOutside:f[1]||(f[1]=async p=>{var _;a("interactOutside",p),p.defaultPrevented||(l.value=!0,p.detail.originalEvent.type==="pointerdown"&&(c.value=!0));const b=p.target;(_=unref(s).triggerElement.value)!=null&&_.contains(b)&&p.preventDefault(),p.detail.originalEvent.type==="focusin"&&c.value&&p.preventDefault()})}),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16))}}),ws=defineComponent({__name:"PopoverContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=Nt(),l=xe(n,a),{forwardRef:c}=R();return s.contentId||(s.contentId=he(void 0,"radix-vue-popover-content")),(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||unref(s).open.value},{default:withCtx(()=>[unref(s).modal.value?(openBlock(),createBlock(Zc,mergeProps({key:0},unref(l),{ref:unref(c)}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16)):(openBlock(),createBlock(Jc,mergeProps({key:1},unref(l),{ref:unref(c)}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Ss=defineComponent({__name:"PopoverAnchor",props:{element:{},asChild:{type:Boolean},as:{}},setup(o){const e=o;R();const n=Nt();return onBeforeMount(()=>{n.hasCustomAnchor.value=!0}),onUnmounted(()=>{n.hasCustomAnchor.value=!1}),(a,s)=>(openBlock(),createBlock(unref(kt),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),[He,Pf]=Q$1("ScrollAreaRoot"),Oy=defineComponent({__name:"ScrollAreaRoot",props:{type:{default:"hover"},dir:{},scrollHideDelay:{default:600},asChild:{type:Boolean},as:{}},setup(o,{expose:e}){const n=o,a=ref(0),s=ref(0),l=ref(),c=ref(),d=ref(),u=ref(),f=ref(!1),p=ref(!1),{type:_,dir:b,scrollHideDelay:v}=toRefs(n),k=be(b);function x(){var V;(V=l.value)==null||V.scrollTo({top:0})}function M(){var V;(V=l.value)==null||V.scrollTo({top:0,left:0})}e({viewport:l,scrollTop:x,scrollTopLeft:M});const{forwardRef:E,currentElement:L}=R();return Pf({type:_,dir:k,scrollHideDelay:v,scrollArea:L,viewport:l,onViewportChange:V=>{l.value=V||void 0},content:c,onContentChange:V=>{c.value=V},scrollbarX:d,scrollbarXEnabled:f,scrollbarY:u,scrollbarYEnabled:p,onScrollbarXChange:V=>{d.value=V||void 0},onScrollbarYChange:V=>{u.value=V||void 0},onScrollbarXEnabledChange:V=>{f.value=V},onScrollbarYEnabledChange:V=>{p.value=V},onCornerWidthChange:V=>{a.value=V},onCornerHeightChange:V=>{s.value=V}}),(V,B)=>(openBlock(),createBlock(unref(O),{ref:unref(E),"as-child":n.asChild,as:V.as,dir:unref(k),style:normalizeStyle({position:"relative","--radix-scroll-area-corner-width":`${a.value}px`,"--radix-scroll-area-corner-height":`${s.value}px`})},{default:withCtx(()=>[renderSlot(V.$slots,"default")]),_:3},8,["as-child","as","dir","style"]))}}),ky=defineComponent({inheritAttrs:!1,__name:"ScrollAreaViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(o,{expose:e}){const n=o,{nonce:a}=toRefs(n),s=Xa(a),l=He(),c=ref();onMounted(()=>{l.onViewportChange(c.value),l.onContentChange(u.value)}),e({viewportElement:c});const{forwardRef:d,currentElement:u}=R();return(f,p)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",mergeProps({ref_key:"viewportElement",ref:c,"data-radix-scroll-area-viewport":"",style:{overflowX:unref(l).scrollbarXEnabled.value?"scroll":"hidden",overflowY:unref(l).scrollbarYEnabled.value?"scroll":"hidden"}},f.$attrs,{tabindex:0}),[createVNode(unref(O),{ref:unref(d),style:normalizeStyle({minWidth:unref(l).scrollbarXEnabled.value?"fit-content":void 0}),"as-child":n.asChild,as:f.as},{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},8,["style","as-child","as"])],16),createVNode(unref(O),{as:"style",nonce:unref(s)},{default:withCtx(()=>[createTextVNode(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-radix-scroll-area-viewport] { scrollbar-width:none; -ms-overflow-style:none; -webkit-overflow-scrolling:touch; } [data-radix-scroll-area-viewport]::-webkit-scrollbar { display:none; } ")]),_:1},8,["nonce"])],64))}});function Es(o,e){return n=>{if(o[0]===o[1]||e[0]===e[1])return e[0];const a=(e[1]-e[0])/(o[1]-o[0]);return e[0]+a*(n-o[0])}}function nn(o){const e=Ps(o.viewport,o.content),n=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,a=(o.scrollbar.size-n)*e;return Math.max(a,18)}function Ps(o,e){const n=o/e;return Number.isNaN(n)?0:n}function Df(o,e=()=>{}){let n={left:o.scrollLeft,top:o.scrollTop},a=0;return function s(){const l={left:o.scrollLeft,top:o.scrollTop},c=n.left!==l.left,d=n.top!==l.top;(c||d)&&e(),n=l,a=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(a)}function Jo(o,e,n="ltr"){const a=nn(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,l=e.scrollbar.size-s,c=e.content-e.viewport,d=l-a,u=n==="ltr"?[0,c]:[c*-1,0],f=jt(o,u[0],u[1]);return Es([0,c],[0,d])(f)}function Ia(o){return o?Number.parseInt(o,10):0}function $f(o,e,n,a="ltr"){const s=nn(n),l=s/2,c=e||l,d=s-c,u=n.scrollbar.paddingStart+c,f=n.scrollbar.size-n.scrollbar.paddingEnd-d,p=n.content-n.viewport,_=a==="ltr"?[0,p]:[p*-1,0];return Es([u,f],_)(o)}function Qo(o,e){return o>0&&o<e}const Ds=defineComponent({__name:"ScrollAreaScrollbarImpl",props:{isHorizontal:{type:Boolean}},emits:["onDragScroll","onWheelScroll","onThumbPointerDown"],setup(o,{emit:e}){const n=o,a=e,s=He(),l=on(),c=ln(),{forwardRef:d,currentElement:u}=R(),f=ref(""),p=ref();function _(E){var L,V;if(p.value){const B=E.clientX-((L=p.value)==null?void 0:L.left),F=E.clientY-((V=p.value)==null?void 0:V.top);a("onDragScroll",{x:B,y:F})}}function b(E){E.button===0&&(E.target.setPointerCapture(E.pointerId),p.value=u.value.getBoundingClientRect(),f.value=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",s.viewport&&(s.viewport.value.style.scrollBehavior="auto"),_(E))}function v(E){_(E)}function k(E){const L=E.target;L.hasPointerCapture(E.pointerId)&&L.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=f.value,s.viewport&&(s.viewport.value.style.scrollBehavior=""),p.value=void 0}function x(E){var L;const V=E.target,B=(L=u.value)==null?void 0:L.contains(V),F=l.sizes.value.content-l.sizes.value.viewport;B&&l.handleWheelScroll(E,F)}onMounted(()=>{document.addEventListener("wheel",x,{passive:!1})}),onUnmounted(()=>{document.removeEventListener("wheel",x)});function M(){var E,L,V,B,F;u.value&&(n.isHorizontal?l.handleSizeChange({content:((E=s.viewport.value)==null?void 0:E.scrollWidth)??0,viewport:((L=s.viewport.value)==null?void 0:L.offsetWidth)??0,scrollbar:{size:u.value.clientWidth??0,paddingStart:Ia(getComputedStyle(u.value).paddingLeft),paddingEnd:Ia(getComputedStyle(u.value).paddingRight)}}):l.handleSizeChange({content:((V=s.viewport.value)==null?void 0:V.scrollHeight)??0,viewport:((B=s.viewport.value)==null?void 0:B.offsetHeight)??0,scrollbar:{size:((F=u.value)==null?void 0:F.clientHeight)??0,paddingStart:Ia(getComputedStyle(u.value).paddingLeft),paddingEnd:Ia(getComputedStyle(u.value).paddingRight)}}))}return Je(u,M),Je(s.content,M),(E,L)=>(openBlock(),createBlock(unref(O),{ref:unref(d),style:{position:"absolute"},"data-scrollbarimpl":"",as:unref(c).as.value,"as-child":unref(c).asChild.value,onPointerdown:b,onPointermove:v,onPointerup:k},{default:withCtx(()=>[renderSlot(E.$slots,"default")]),_:3},8,["as","as-child"]))}}),Bf=defineComponent({__name:"ScrollAreaScrollbarX",setup(o){const e=He(),n=on(),{forwardRef:a,currentElement:s}=R();onMounted(()=>{s.value&&e.onScrollbarXChange(s.value)});const l=computed(()=>n.sizes.value);return(c,d)=>(openBlock(),createBlock(Ds,{ref:unref(a),"is-horizontal":!0,"data-orientation":"horizontal",style:normalizeStyle({bottom:0,left:unref(e).dir.value==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:unref(e).dir.value==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":l.value?`${unref(nn)(l.value)}px`:void 0}),onOnDragScroll:d[0]||(d[0]=u=>unref(n).onDragScroll(u.x))},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["style"]))}}),If=defineComponent({__name:"ScrollAreaScrollbarY",setup(o){const e=He(),n=on(),{forwardRef:a,currentElement:s}=R();onMounted(()=>{s.value&&e.onScrollbarYChange(s.value)});const l=computed(()=>n.sizes.value);return(c,d)=>(openBlock(),createBlock(Ds,{ref:unref(a),"is-horizontal":!1,"data-orientation":"vertical",style:normalizeStyle({top:0,right:unref(e).dir.value==="ltr"?0:void 0,left:unref(e).dir.value==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":l.value?`${unref(nn)(l.value)}px`:void 0}),onOnDragScroll:d[0]||(d[0]=u=>unref(n).onDragScroll(u.y))},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["style"]))}}),[on,Tf]=Q$1("ScrollAreaScrollbarVisible"),Do=defineComponent({__name:"ScrollAreaScrollbarVisible",setup(o){const e=He(),n=ln(),{forwardRef:a}=R(),s=ref({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=computed(()=>{const E=Ps(s.value.viewport,s.value.content);return E>0&&E<1}),c=ref(),d=ref(0);function u(E,L){if(v.value){const V=e.viewport.value.scrollLeft+E.deltaY;e.viewport.value.scrollLeft=V,Qo(V,L)&&E.preventDefault()}else{const V=e.viewport.value.scrollTop+E.deltaY;e.viewport.value.scrollTop=V,Qo(V,L)&&E.preventDefault()}}function f(E,L){v.value?d.value=L.x:d.value=L.y}function p(E){d.value=0}function _(E){s.value=E}function b(E,L){return $f(E,d.value,s.value,L)}const v=computed(()=>n.isHorizontal.value);function k(E){v.value?e.viewport.value.scrollLeft=b(E,e.dir.value):e.viewport.value.scrollTop=b(E)}function x(){if(v.value){if(e.viewport.value&&c.value){const E=e.viewport.value.scrollLeft,L=Jo(E,s.value,e.dir.value);c.value.style.transform=`translate3d(${L}px, 0, 0)`}}else if(e.viewport.value&&c.value){const E=e.viewport.value.scrollTop,L=Jo(E,s.value);c.value.style.transform=`translate3d(0, ${L}px, 0)`}}function M(E){c.value=E}return Tf({sizes:s,hasThumb:l,handleWheelScroll:u,handleThumbDown:f,handleThumbUp:p,handleSizeChange:_,onThumbPositionChange:x,onThumbChange:M,onDragScroll:k}),(E,L)=>v.value?(openBlock(),createBlock(Bf,mergeProps({key:0},E.$attrs,{ref:unref(a)}),{default:withCtx(()=>[renderSlot(E.$slots,"default")]),_:3},16)):(openBlock(),createBlock(If,mergeProps({key:1},E.$attrs,{ref:unref(a)}),{default:withCtx(()=>[renderSlot(E.$slots,"default")]),_:3},16))}}),$s=defineComponent({__name:"ScrollAreaScrollbarAuto",props:{forceMount:{type:Boolean}},setup(o){const e=He(),n=ln(),{forwardRef:a}=R(),s=ref(!1),l=Hn(()=>{if(e.viewport.value){const c=e.viewport.value.offsetWidth<e.viewport.value.scrollWidth,d=e.viewport.value.offsetHeight<e.viewport.value.scrollHeight;s.value=n.isHorizontal.value?c:d}},10);return onMounted(()=>l()),Je(e.viewport,l),Je(e.content,l),(c,d)=>(openBlock(),createBlock(unref(Pe$1),{present:c.forceMount||s.value},{default:withCtx(()=>[createVNode(Do,mergeProps(c.$attrs,{ref:unref(a),"data-state":s.value?"visible":"hidden"}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Rf=defineComponent({inheritAttrs:!1,__name:"ScrollAreaScrollbarHover",props:{forceMount:{type:Boolean}},setup(o){const e=He(),{forwardRef:n}=R();let a;const s=ref(!1);function l(){window.clearTimeout(a),s.value=!0}function c(){a=window.setTimeout(()=>{s.value=!1},e.scrollHideDelay.value)}return onMounted(()=>{const d=e.scrollArea.value;d&&(d.addEventListener("pointerenter",l),d.addEventListener("pointerleave",c))}),onUnmounted(()=>{const d=e.scrollArea.value;d&&(window.clearTimeout(a),d.removeEventListener("pointerenter",l),d.removeEventListener("pointerleave",c))}),(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||s.value},{default:withCtx(()=>[createVNode($s,mergeProps(d.$attrs,{ref:unref(n),"data-state":s.value?"visible":"hidden"}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Af=defineComponent({__name:"ScrollAreaScrollbarScroll",props:{forceMount:{type:Boolean}},setup(o){const e=He(),n=ln(),{forwardRef:a}=R(),{state:s,dispatch:l}=Fl("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});watchEffect(d=>{if(s.value==="idle"){const u=window.setTimeout(()=>l("HIDE"),e.scrollHideDelay.value);d(()=>{window.clearTimeout(u)})}});const c=Hn(()=>l("SCROLL_END"),100);return watchEffect(d=>{const u=e.viewport.value,f=n.isHorizontal.value?"scrollLeft":"scrollTop";if(u){let p=u[f];const _=()=>{const b=u[f];p!==b&&(l("SCROLL"),c()),p=b};u.addEventListener("scroll",_),d(()=>{u.removeEventListener("scroll",_)})}}),(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||unref(s)!=="hidden"},{default:withCtx(()=>[createVNode(Do,mergeProps(d.$attrs,{ref:unref(a)}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),[ln,Of]=Q$1("ScrollAreaScrollbar"),My=defineComponent({inheritAttrs:!1,__name:"ScrollAreaScrollbar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},setup(o){const e=o,{forwardRef:n}=R(),a=He(),s=computed(()=>e.orientation==="horizontal");watch(s,()=>{s.value?a.onScrollbarXEnabledChange(!0):a.onScrollbarYEnabledChange(!0)},{immediate:!0}),onUnmounted(()=>{a.onScrollbarXEnabledChange(!1),a.onScrollbarYEnabledChange(!1)});const{orientation:l,forceMount:c,asChild:d,as:u}=toRefs(e);return Of({orientation:l,forceMount:c,isHorizontal:s,as:u,asChild:d}),(f,p)=>unref(a).type.value==="hover"?(openBlock(),createBlock(Rf,mergeProps({key:0},f.$attrs,{ref:unref(n),"force-mount":unref(c)}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["force-mount"])):unref(a).type.value==="scroll"?(openBlock(),createBlock(Af,mergeProps({key:1},f.$attrs,{ref:unref(n),"force-mount":unref(c)}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["force-mount"])):unref(a).type.value==="auto"?(openBlock(),createBlock($s,mergeProps({key:2},f.$attrs,{ref:unref(n),"force-mount":unref(c)}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["force-mount"])):unref(a).type.value==="always"?(openBlock(),createBlock(Do,mergeProps({key:3},f.$attrs,{ref:unref(n),"data-state":"visible"}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16)):createCommentVNode("",!0)}}),Vy=defineComponent({__name:"ScrollAreaThumb",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o,n=He(),a=on();function s(b){const v=b.target.getBoundingClientRect(),k=b.clientX-v.left,x=b.clientY-v.top;a.handleThumbDown(b,{x:k,y:x})}function l(b){a.handleThumbUp(b)}const{forwardRef:c,currentElement:d}=R(),u=ref(),f=computed(()=>n.viewport.value);function p(){if(!u.value){const b=Df(f.value,a.onThumbPositionChange);u.value=b,a.onThumbPositionChange()}}const _=computed(()=>a.sizes.value);return hi(_,()=>{a.onThumbChange(d.value),f.value&&(a.onThumbPositionChange(),f.value.addEventListener("scroll",p))}),onUnmounted(()=>{var b;f.value.removeEventListener("scroll",p),(b=n.viewport.value)==null||b.removeEventListener("scroll",p)}),(b,v)=>(openBlock(),createBlock(unref(O),{ref:unref(c),"data-state":unref(a).hasThumb?"visible":"hidden",style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},"as-child":e.asChild,as:b.as,onPointerdown:s,onPointerup:l},{default:withCtx(()=>[renderSlot(b.$slots,"default")]),_:3},8,["data-state","as-child","as"]))}}),kf=defineComponent({__name:"ScrollAreaCornerImpl",setup(o){const e=He(),n=ref(0),a=ref(0),s=computed(()=>!!n.value&&!!a.value);function l(){var d;const u=((d=e.scrollbarX.value)==null?void 0:d.offsetHeight)||0;e.onCornerHeightChange(u),a.value=u}function c(){var d;const u=((d=e.scrollbarY.value)==null?void 0:d.offsetWidth)||0;e.onCornerWidthChange(u),n.value=u}return Je(e.scrollbarX.value,l),Je(e.scrollbarY.value,c),watch(()=>e.scrollbarX.value,l),watch(()=>e.scrollbarY.value,c),(d,u)=>{var f;return s.value?(openBlock(),createBlock(unref(O),mergeProps({key:0,style:{width:`${n.value}px`,height:`${a.value}px`,position:"absolute",right:unref(e).dir.value==="ltr"?0:void 0,left:unref(e).dir.value==="rtl"?0:void 0,bottom:0}},(f=d.$parent)==null?void 0:f.$props),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["style"])):createCommentVNode("",!0)}}}),Fy=defineComponent({__name:"ScrollAreaCorner",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o,{forwardRef:n}=R(),a=He(),s=computed(()=>!!a.scrollbarX.value&&!!a.scrollbarY.value),l=computed(()=>a.type.value!=="scroll"&&s.value);return(c,d)=>l.value?(openBlock(),createBlock(kf,mergeProps({key:0},e,{ref:unref(n)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16)):createCommentVNode("",!0)}}),Mf=["default-value"],Vf=defineComponent({__name:"BubbleSelect",props:{autocomplete:{},autofocus:{type:Boolean},disabled:{type:Boolean},form:{},multiple:{type:Boolean},name:{},required:{type:Boolean},size:{},value:{}},setup(o){const e=o,{value:n}=toRefs(e),a=ref();return(s,l)=>(openBlock(),createBlock(unref(Zt),{"as-child":""},{default:withCtx(()=>[withDirectives(createBaseVNode("select",mergeProps({ref_key:"selectElement",ref:a},e,{"onUpdate:modelValue":l[0]||(l[0]=c=>isRef(n)?n.value=c:null),"default-value":unref(n)}),[renderSlot(s.$slots,"default")],16,Mf),[[vModelSelect,unref(n)]])]),_:3}))}}),Ff={key:0,value:""},[wt,Bs]=Q$1("SelectRoot"),[Nf,Lf]=Q$1("SelectRoot"),Ny=defineComponent({__name:"SelectRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean},defaultValue:{default:""},modelValue:{default:void 0},dir:{},name:{},autocomplete:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(o,{emit:e}){const n=o,a=e,s=ne$1(n,"modelValue",a,{defaultValue:n.defaultValue,passive:n.modelValue===void 0}),l=ne$1(n,"open",a,{defaultValue:n.defaultOpen,passive:n.open===void 0}),c=ref(),d=ref(),u=ref({x:0,y:0}),f=ref(!1),{required:p,disabled:_,dir:b}=toRefs(n),v=be(b);Bs({triggerElement:c,onTriggerChange:E=>{c.value=E},valueElement:d,onValueElementChange:E=>{d.value=E},valueElementHasChildren:f,onValueElementHasChildrenChange:E=>{f.value=E},contentId:"",modelValue:s,onValueChange:E=>{s.value=E},open:l,required:p,onOpenChange:E=>{l.value=E},dir:v,triggerPointerDownPosRef:u,disabled:_});const k=Qe(c),x=ref(new Set),M=computed(()=>Array.from(x.value).map(E=>{var L;return(L=E.props)==null?void 0:L.value}).join(";"));return Lf({onNativeOptionAdd:E=>{x.value.add(E)},onNativeOptionRemove:E=>{x.value.delete(E)}}),(E,L)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(E.$slots,"default",{modelValue:unref(s),open:unref(l)}),unref(k)?(openBlock(),createBlock(Vf,mergeProps({key:M.value},E.$attrs,{"aria-hidden":"true",tabindex:"-1",required:unref(p),name:E.name,autocomplete:E.autocomplete,disabled:unref(_),value:unref(s),onChange:L[0]||(L[0]=V=>s.value=V.target.value)}),{default:withCtx(()=>[unref(s)===void 0?(openBlock(),createElementBlock("option",Ff)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(Array.from(x.value),V=>(openBlock(),createBlock(resolveDynamicComponent(V),mergeProps({ref_for:!0},V.props,{key:V.key??""}),null,16))),128))]),_:1},16,["required","name","autocomplete","disabled","value"])):createCommentVNode("",!0)]),_:3}))}}),zf=[" ","Enter","ArrowUp","ArrowDown"],Kf=[" ","Enter"],Ue=10;function Is(o){return o===""||vt$1(o)}const Ly=defineComponent({__name:"SelectTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=wt(),a=computed(()=>{var v;return((v=n.disabled)==null?void 0:v.value)||e.disabled}),{forwardRef:s,currentElement:l}=R();n.contentId||(n.contentId=he(void 0,"radix-vue-select-content")),onMounted(()=>{n.triggerElement=l});const{injectCollection:c}=Me(),d=c(),{search:u,handleTypeaheadSearch:f,resetTypeahead:p}=ga(d);function _(){a.value||(n.onOpenChange(!0),p())}function b(v){_(),n.triggerPointerDownPosRef.value={x:Math.round(v.pageX),y:Math.round(v.pageY)}}return(v,k)=>(openBlock(),createBlock(unref(kt),{"as-child":""},{default:withCtx(()=>{var x,M,E,L;return[createVNode(unref(O),{ref:unref(s),role:"combobox",type:v.as==="button"?"button":void 0,"aria-controls":unref(n).contentId,"aria-expanded":unref(n).open.value||!1,"aria-required":(x=unref(n).required)==null?void 0:x.value,"aria-autocomplete":"none",disabled:a.value,dir:(M=unref(n))==null?void 0:M.dir.value,"data-state":(E=unref(n))!=null&&E.open.value?"open":"closed","data-disabled":a.value?"":void 0,"data-placeholder":unref(Is)((L=unref(n).modelValue)==null?void 0:L.value)?"":void 0,"as-child":v.asChild,as:v.as,onClick:k[0]||(k[0]=V=>{var B;(B=V?.currentTarget)==null||B.focus()}),onPointerdown:k[1]||(k[1]=V=>{if(V.pointerType==="touch")return V.preventDefault();const B=V.target;B.hasPointerCapture(V.pointerId)&&B.releasePointerCapture(V.pointerId),V.button===0&&V.ctrlKey===!1&&(b(V),V.preventDefault())}),onPointerup:k[2]||(k[2]=withModifiers(V=>{V.pointerType==="touch"&&b(V)},["prevent"])),onKeydown:k[3]||(k[3]=V=>{const B=unref(u)!=="";!(V.ctrlKey||V.altKey||V.metaKey)&&V.key.length===1&&B&&V.key===" "||(unref(f)(V.key),unref(zf).includes(V.key)&&(_(),V.preventDefault()))})},{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3},8,["type","aria-controls","aria-expanded","aria-required","disabled","dir","data-state","data-disabled","data-placeholder","as-child","as"])]}),_:3}))}}),zy=defineComponent({__name:"SelectPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),[$o,Hf]=Q$1("SelectItemAlignedPosition"),Wf=defineComponent({inheritAttrs:!1,__name:"SelectItemAlignedPosition",props:{asChild:{type:Boolean},as:{}},emits:["placed"],setup(o,{emit:e}){const n=o,a=e,{injectCollection:s}=Me(),l=wt(),c=_t(),d=s(),u=ref(!1),f=ref(!0),p=ref(),{forwardRef:_,currentElement:b}=R(),{viewport:v,selectedItem:k,selectedItemText:x,focusSelectedItem:M}=c;function E(){if(l.triggerElement.value&&l.valueElement.value&&p.value&&b.value&&v!=null&&v.value&&k!=null&&k.value&&x!=null&&x.value){const B=l.triggerElement.value.getBoundingClientRect(),F=b.value.getBoundingClientRect(),j=l.valueElement.value.getBoundingClientRect(),I=x.value.getBoundingClientRect();if(l.dir.value!=="rtl"){const pe=I.left-F.left,fe=j.left-pe,me=B.left-fe,te=B.width+me,ue=Math.max(te,F.width),we=window.innerWidth-Ue,_e=jt(fe,Ue,Math.max(Ue,we-ue));p.value.style.minWidth=`${te}px`,p.value.style.left=`${_e}px`}else{const pe=F.right-I.right,fe=window.innerWidth-j.right-pe,me=window.innerWidth-B.right-fe,te=B.width+me,ue=Math.max(te,F.width),we=window.innerWidth-Ue,_e=jt(fe,Ue,Math.max(Ue,we-ue));p.value.style.minWidth=`${te}px`,p.value.style.right=`${_e}px`}const U=d.value,W=window.innerHeight-Ue*2,K=v.value.scrollHeight,G=window.getComputedStyle(b.value),Z=Number.parseInt(G.borderTopWidth,10),oe=Number.parseInt(G.paddingTop,10),Y=Number.parseInt(G.borderBottomWidth,10),se=Number.parseInt(G.paddingBottom,10),le=Z+oe+K+se+Y,ce=Math.min(k.value.offsetHeight*5,le),de=window.getComputedStyle(v.value),ge=Number.parseInt(de.paddingTop,10),qe=Number.parseInt(de.paddingBottom,10),ke=B.top+B.height/2-Ue,Ee=W-ke,Oe=k.value.offsetHeight/2,Ve=k.value.offsetTop+Oe,Ne=Z+oe+Ve,dt=le-Ne;if(Ne<=ke){const pe=k.value===U[U.length-1];p.value.style.bottom="0px";const fe=b.value.clientHeight-v.value.offsetTop-v.value.offsetHeight,me=Math.max(Ee,Oe+(pe?qe:0)+fe+Y),te=Ne+me;p.value.style.height=`${te}px`}else{const pe=k.value===U[0];p.value.style.top="0px";const fe=Math.max(ke,Z+v.value.offsetTop+(pe?ge:0)+Oe)+dt;p.value.style.height=`${fe}px`,v.value.scrollTop=Ne-ke+v.value.offsetTop}p.value.style.margin=`${Ue}px 0`,p.value.style.minHeight=`${ce}px`,p.value.style.maxHeight=`${W}px`,a("placed"),requestAnimationFrame(()=>u.value=!0)}}const L=ref("");onMounted(async()=>{await nextTick(),E(),b.value&&(L.value=window.getComputedStyle(b.value).zIndex)});function V(B){B&&f.value===!0&&(E(),M?.(),f.value=!1)}return Hf({contentWrapper:p,shouldExpandOnScrollRef:u,onScrollButtonChange:V}),(B,F)=>(openBlock(),createElementBlock("div",{ref_key:"contentWrapperElement",ref:p,style:normalizeStyle({display:"flex",flexDirection:"column",position:"fixed",zIndex:L.value})},[createVNode(unref(O),mergeProps({ref:unref(_),style:{boxSizing:"border-box",maxHeight:"100%"}},{...B.$attrs,...n}),{default:withCtx(()=>[renderSlot(B.$slots,"default")]),_:3},16)],4))}}),jf=defineComponent({__name:"SelectPopperPosition",props:{side:{},sideOffset:{},align:{default:"start"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{default:Ue},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const e=At(o);return(n,a)=>(openBlock(),createBlock(unref(Bt),mergeProps(unref(e),{style:{boxSizing:"border-box","--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Lt={onViewportChange:()=>{},itemTextRefCallback:()=>{},itemRefCallback:()=>{}},[_t,Uf]=Q$1("SelectContent"),Gf=defineComponent({__name:"SelectContentImpl",props:{position:{default:"item-aligned"},bodyLock:{type:Boolean,default:!0},side:{},sideOffset:{},align:{default:"start"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const n=o,a=e,s=wt();Gn(),ha(n.bodyLock);const{createCollection:l}=Me(),c=ref();ya(c);const d=l(c),{search:u,handleTypeaheadSearch:f}=ga(d),p=ref(),_=ref(),b=ref(),v=ref(!1),k=ref(!1);function x(){_.value&&c.value&&$n([_.value,c.value])}watch(v,()=>{x()});const{onOpenChange:M,triggerPointerDownPosRef:E}=s;watchEffect(F=>{if(!c.value)return;let j={x:0,y:0};const I=W=>{var K,G;j={x:Math.abs(Math.round(W.pageX)-(((K=E.value)==null?void 0:K.x)??0)),y:Math.abs(Math.round(W.pageY)-(((G=E.value)==null?void 0:G.y)??0))}},U=W=>{var K;W.pointerType!=="touch"&&(j.x<=10&&j.y<=10?W.preventDefault():(K=c.value)!=null&&K.contains(W.target)||M(!1),document.removeEventListener("pointermove",I),E.value=null)};E.value!==null&&(document.addEventListener("pointermove",I),document.addEventListener("pointerup",U,{capture:!0,once:!0})),F(()=>{document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",U,{capture:!0})})});function L(F){const j=F.ctrlKey||F.altKey||F.metaKey;if(F.key==="Tab"&&F.preventDefault(),!j&&F.key.length===1&&f(F.key),["ArrowUp","ArrowDown","Home","End"].includes(F.key)){let I=d.value;if(["ArrowUp","End"].includes(F.key)&&(I=I.slice().reverse()),["ArrowUp","ArrowDown"].includes(F.key)){const U=F.target,W=I.indexOf(U);I=I.slice(W+1)}setTimeout(()=>$n(I)),F.preventDefault()}}const V=computed(()=>n.position==="popper"?n:{}),B=At(V.value);return Uf({content:c,viewport:p,onViewportChange:F=>{p.value=F},itemRefCallback:(F,j,I)=>{var U,W;const K=!k.value&&!I;(((U=s.modelValue)==null?void 0:U.value)!==void 0&&((W=s.modelValue)==null?void 0:W.value)===j||K)&&(_.value=F,K&&(k.value=!0))},selectedItem:_,selectedItemText:b,onItemLeave:()=>{var F;(F=c.value)==null||F.focus()},itemTextRefCallback:(F,j,I)=>{var U,W;const K=!k.value&&!I;(((U=s.modelValue)==null?void 0:U.value)!==void 0&&((W=s.modelValue)==null?void 0:W.value)===j||K)&&(b.value=F)},focusSelectedItem:x,position:n.position,isPositioned:v,searchRef:u}),(F,j)=>(openBlock(),createBlock(unref(Ya),{"as-child":"",onMountAutoFocus:j[6]||(j[6]=withModifiers(()=>{},["prevent"])),onUnmountAutoFocus:j[7]||(j[7]=I=>{var U;a("closeAutoFocus",I),!I.defaultPrevented&&((U=unref(s).triggerElement.value)==null||U.focus({preventScroll:!0}),I.preventDefault())})},{default:withCtx(()=>[createVNode(unref(gt$1),{"as-child":"","disable-outside-pointer-events":"",onFocusOutside:j[2]||(j[2]=withModifiers(()=>{},["prevent"])),onDismiss:j[3]||(j[3]=I=>unref(s).onOpenChange(!1)),onEscapeKeyDown:j[4]||(j[4]=I=>a("escapeKeyDown",I)),onPointerDownOutside:j[5]||(j[5]=I=>a("pointerDownOutside",I))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(F.position==="popper"?jf:Wf),mergeProps({...F.$attrs,...unref(B)},{id:unref(s).contentId,ref:I=>{c.value=unref($e)(I)},role:"listbox","data-state":unref(s).open.value?"open":"closed",dir:unref(s).dir.value,style:{display:"flex",flexDirection:"column",outline:"none"},onContextmenu:j[0]||(j[0]=withModifiers(()=>{},["prevent"])),onPlaced:j[1]||(j[1]=I=>v.value=!0),onKeydown:L}),{default:withCtx(()=>[renderSlot(F.$slots,"default")]),_:3},16,["id","data-state","dir","onKeydown"]))]),_:3})]),_:3}))}}),qf=defineComponent({inheritAttrs:!1,__name:"SelectProvider",props:{context:{}},setup(o){return Bs(o.context),(e,n)=>renderSlot(e.$slots,"default")}}),Yf={key:1},Ky=defineComponent({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const n=o,a=xe(n,e),s=wt(),l=ref();onMounted(()=>{l.value=new DocumentFragment});const c=ref(),d=computed(()=>n.forceMount||s.open.value);return(u,f)=>{var p;return d.value?(openBlock(),createBlock(unref(Pe$1),{key:0,ref_key:"presenceRef",ref:c,present:!0},{default:withCtx(()=>[createVNode(Gf,normalizeProps(guardReactiveProps({...unref(a),...u.$attrs})),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16)]),_:3},512)):!((p=c.value)!=null&&p.present)&&l.value?(openBlock(),createElementBlock("div",Yf,[(openBlock(),createBlock(Teleport,{to:l.value},[createVNode(qf,{context:unref(s)},{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},8,["context"])],8,["to"]))])):createCommentVNode("",!0)}}}),[Ts,Xf]=Q$1("SelectItem"),jy=defineComponent({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(o){const e=o,{disabled:n}=toRefs(e),a=wt(),s=_t(Lt),{forwardRef:l,currentElement:c}=R(),d=computed(()=>{var x;return((x=a.modelValue)==null?void 0:x.value)===e.value}),u=ref(!1),f=ref(e.textValue??""),p=he(void 0,"radix-vue-select-item-text");async function _(x){await nextTick(),!(x!=null&&x.defaultPrevented)&&(n.value||(a.onValueChange(e.value),a.onOpenChange(!1)))}async function b(x){var M;await nextTick(),!x.defaultPrevented&&(n.value?(M=s.onItemLeave)==null||M.call(s):x.currentTarget.focus({preventScroll:!0}))}async function v(x){var M;await nextTick(),!x.defaultPrevented&&x.currentTarget===document.activeElement&&((M=s.onItemLeave)==null||M.call(s))}async function k(x){var M;await nextTick(),!(x.defaultPrevented||((M=s.searchRef)==null?void 0:M.value)!==""&&x.key===" ")&&(Kf.includes(x.key)&&_(),x.key===" "&&x.preventDefault())}if(e.value==="")throw new Error("A <SelectItem /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return onMounted(()=>{c.value&&s.itemRefCallback(c.value,e.value,e.disabled)}),Xf({value:e.value,disabled:n,textId:p,isSelected:d,onItemTextChange:x=>{f.value=((f.value||x?.textContent)??"").trim()}}),(x,M)=>(openBlock(),createBlock(unref(O),{ref:unref(l),role:"option","data-radix-vue-collection-item":"","aria-labelledby":unref(p),"data-highlighted":u.value?"":void 0,"aria-selected":d.value,"data-state":d.value?"checked":"unchecked","aria-disabled":unref(n)||void 0,"data-disabled":unref(n)?"":void 0,tabindex:unref(n)?void 0:-1,as:x.as,"as-child":x.asChild,onFocus:M[0]||(M[0]=E=>u.value=!0),onBlur:M[1]||(M[1]=E=>u.value=!1),onPointerup:_,onPointerdown:M[2]||(M[2]=E=>{E.currentTarget.focus({preventScroll:!0})}),onTouchend:M[3]||(M[3]=withModifiers(()=>{},["prevent","stop"])),onPointermove:b,onPointerleave:v,onKeydown:k},{default:withCtx(()=>[renderSlot(x.$slots,"default")]),_:3},8,["aria-labelledby","data-highlighted","aria-selected","data-state","aria-disabled","data-disabled","tabindex","as","as-child"]))}}),Uy=defineComponent({__name:"SelectItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(o){const e=o,n=Ts();return(a,s)=>unref(n).isSelected.value?(openBlock(),createBlock(unref(O),mergeProps({key:0,"aria-hidden":"true"},e),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16)):createCommentVNode("",!0)}}),[Zf,Jf]=Q$1("SelectGroup"),Gy=defineComponent({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o,n=he(void 0,"radix-vue-select-group");return Jf({id:n}),(a,s)=>(openBlock(),createBlock(unref(O),mergeProps({role:"group"},e,{"aria-labelledby":unref(n)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),Yy=defineComponent({inheritAttrs:!1,__name:"SelectItemText",props:{asChild:{type:Boolean},as:{default:"span"}},setup(o){const e=o,n=wt(),a=_t(Lt),s=Nf(),l=Ts(),{forwardRef:c,currentElement:d}=R(),u=computed(()=>{var f;return h("option",{key:l.value,value:l.value,disabled:l.disabled.value,textContent:(f=d.value)==null?void 0:f.textContent})});return onMounted(()=>{d.value&&(l.onItemTextChange(d.value),a.itemTextRefCallback(d.value,l.value,l.disabled.value),s.onNativeOptionAdd(u.value))}),onBeforeUnmount(()=>{s.onNativeOptionRemove(u.value)}),(f,p)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(unref(O),mergeProps({id:unref(l).textId,ref:unref(c)},{...e,...f.$attrs},{"data-item-text":""}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["id"]),unref(l).isSelected.value&&unref(n).valueElement.value&&!unref(n).valueElementHasChildren.value?(openBlock(),createBlock(Teleport,{key:0,to:unref(n).valueElement.value},[renderSlot(f.$slots,"default")],8,["to"])):createCommentVNode("",!0)],64))}}),Xy=defineComponent({__name:"SelectViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(o){const e=o,{nonce:n}=toRefs(e),a=Xa(n),s=_t(Lt),l=s.position==="item-aligned"?$o():void 0,{forwardRef:c,currentElement:d}=R();onMounted(()=>{s?.onViewportChange(d.value)});const u=ref(0);function f(p){const _=p.currentTarget,{shouldExpandOnScrollRef:b,contentWrapper:v}=l??{};if(b!=null&&b.value&&v!=null&&v.value){const k=Math.abs(u.value-_.scrollTop);if(k>0){const x=window.innerHeight-Ue*2,M=Number.parseFloat(v.value.style.minHeight),E=Number.parseFloat(v.value.style.height),L=Math.max(M,E);if(L<x){const V=L+k,B=Math.min(x,V),F=V-B;v.value.style.height=`${B}px`,v.value.style.bottom==="0px"&&(_.scrollTop=F>0?F:0,v.value.style.justifyContent="flex-end")}}}u.value=_.scrollTop}return(p,_)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(unref(O),mergeProps({ref:unref(c),"data-radix-select-viewport":"",role:"presentation"},{...p.$attrs,...e},{style:{position:"relative",flex:1,overflow:"hidden auto"},onScroll:f}),{default:withCtx(()=>[renderSlot(p.$slots,"default")]),_:3},16),createVNode(unref(O),{as:"style",nonce:unref(a)},{default:withCtx(()=>[createTextVNode(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-radix-select-viewport] { scrollbar-width:none; -ms-overflow-style: none; -webkit-overflow-scrolling: touch; } [data-radix-select-viewport]::-webkit-scrollbar { display: none; } ")]),_:1},8,["nonce"])],64))}}),Rs=defineComponent({__name:"SelectScrollButtonImpl",emits:["autoScroll"],setup(o,{emit:e}){const n=e,{injectCollection:a}=Me(),s=a(),l=_t(Lt),c=ref(null);function d(){c.value!==null&&(window.clearInterval(c.value),c.value=null)}watchEffect(()=>{const p=s.value.find(_=>_===document.activeElement);p?.scrollIntoView({block:"nearest"})});function u(){c.value===null&&(c.value=window.setInterval(()=>{n("autoScroll")},50))}function f(){var p;(p=l.onItemLeave)==null||p.call(l),c.value===null&&(c.value=window.setInterval(()=>{n("autoScroll")},50))}return onBeforeUnmount(()=>d()),(p,_)=>{var b;return openBlock(),createBlock(unref(O),mergeProps({"aria-hidden":"true",style:{flexShrink:0}},(b=p.$parent)==null?void 0:b.$props,{onPointerdown:u,onPointermove:f,onPointerleave:_[0]||(_[0]=()=>{d()})}),{default:withCtx(()=>[renderSlot(p.$slots,"default")]),_:3},16)}}}),Zy=defineComponent({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean},as:{}},setup(o){const e=_t(Lt),n=e.position==="item-aligned"?$o():void 0,{forwardRef:a,currentElement:s}=R(),l=ref(!1);return watchEffect(c=>{var d,u;if((d=e.viewport)!=null&&d.value&&(u=e.isPositioned)!=null&&u.value){let f=function(){l.value=p.scrollTop>0};const p=e.viewport.value;f(),p.addEventListener("scroll",f),c(()=>p.removeEventListener("scroll",f))}}),watch(s,()=>{s.value&&n?.onScrollButtonChange(s.value)}),(c,d)=>l.value?(openBlock(),createBlock(Rs,{key:0,ref:unref(a),onAutoScroll:d[0]||(d[0]=()=>{const{viewport:u,selectedItem:f}=unref(e);u!=null&&u.value&&f!=null&&f.value&&(u.value.scrollTop=u.value.scrollTop-f.value.offsetHeight)})},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},512)):createCommentVNode("",!0)}}),Jy=defineComponent({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean},as:{}},setup(o){const e=_t(Lt),n=e.position==="item-aligned"?$o():void 0,{forwardRef:a,currentElement:s}=R(),l=ref(!1);return watchEffect(c=>{var d,u;if((d=e.viewport)!=null&&d.value&&(u=e.isPositioned)!=null&&u.value){let f=function(){const _=p.scrollHeight-p.clientHeight;l.value=Math.ceil(p.scrollTop)<_};const p=e.viewport.value;f(),p.addEventListener("scroll",f),c(()=>p.removeEventListener("scroll",f))}}),watch(s,()=>{s.value&&n?.onScrollButtonChange(s.value)}),(c,d)=>l.value?(openBlock(),createBlock(Rs,{key:0,ref:unref(a),onAutoScroll:d[0]||(d[0]=()=>{const{viewport:u,selectedItem:f}=unref(e);u!=null&&u.value&&f!=null&&f.value&&(u.value.scrollTop=u.value.scrollTop+f.value.offsetHeight)})},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},512)):createCommentVNode("",!0)}}),Qy=defineComponent({__name:"SelectValue",props:{placeholder:{default:""},asChild:{type:Boolean},as:{default:"span"}},setup(o){const{forwardRef:e,currentElement:n}=R(),a=wt(),s=useSlots();return onBeforeMount(()=>{var l;const c=!!Ua((l=s?.default)==null?void 0:l.call(s)).length;a.onValueElementHasChildrenChange(c)}),onMounted(()=>{a.valueElement=n}),(l,c)=>(openBlock(),createBlock(unref(O),{ref:unref(e),as:l.as,"as-child":l.asChild,style:{pointerEvents:"none"}},{default:withCtx(()=>{var d;return[unref(Is)((d=unref(a).modelValue)==null?void 0:d.value)?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(l.placeholder),1)],64)):renderSlot(l.$slots,"default",{key:1})]}),_:3},8,["as","as-child"]))}}),eg=defineComponent({__name:"SelectIcon",props:{asChild:{type:Boolean},as:{default:"span"}},setup(o){return(e,n)=>(openBlock(),createBlock(unref(O),{"aria-hidden":"true",as:e.as,"as-child":e.asChild},{default:withCtx(()=>[renderSlot(e.$slots,"default",{},()=>[createTextVNode("▼")])]),_:3},8,["as","as-child"]))}});function Cp(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}Cp();const Np=["name","disabled","required","value","checked","data-state","data-disabled"],[Lp,zp]=Q$1("SwitchRoot"),mg=defineComponent({__name:"SwitchRoot",props:{defaultChecked:{type:Boolean},checked:{type:Boolean,default:void 0},disabled:{type:Boolean},required:{type:Boolean},name:{},id:{},value:{default:"on"},asChild:{type:Boolean},as:{default:"button"}},emits:["update:checked"],setup(o,{emit:e}){const n=o,a=e,{disabled:s}=toRefs(n),l=ne$1(n,"checked",a,{defaultValue:n.defaultChecked,passive:n.checked===void 0});function c(){s.value||(l.value=!l.value)}const{forwardRef:d,currentElement:u}=R(),f=Qe(u),p=computed(()=>{var _;return n.id&&u.value?(_=document.querySelector(`[for="${n.id}"]`))==null?void 0:_.innerText:void 0});return zp({checked:l,toggleCheck:c,disabled:s}),(_,b)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(unref(O),mergeProps(_.$attrs,{id:_.id,ref:unref(d),role:"switch",type:_.as==="button"?"button":void 0,value:_.value,"aria-label":_.$attrs["aria-label"]||p.value,"aria-checked":unref(l),"aria-required":_.required,"data-state":unref(l)?"checked":"unchecked","data-disabled":unref(s)?"":void 0,"as-child":_.asChild,as:_.as,disabled:unref(s),onClick:c,onKeydown:withKeys(withModifiers(c,["prevent"]),["enter"])}),{default:withCtx(()=>[renderSlot(_.$slots,"default",{checked:unref(l)})]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]),unref(f)?(openBlock(),createElementBlock("input",{key:0,type:"checkbox",name:_.name,tabindex:"-1","aria-hidden":"true",disabled:unref(s),required:_.required,value:_.value,checked:!!unref(l),"data-state":unref(l)?"checked":"unchecked","data-disabled":unref(s)?"":void 0,style:{transform:"translateX(-100%)",position:"absolute",pointerEvents:"none",opacity:0,margin:0}},null,8,Np)):createCommentVNode("",!0)],64))}}),hg=defineComponent({__name:"SwitchThumb",props:{asChild:{type:Boolean},as:{default:"span"}},setup(o){const e=Lp();return R(),(n,a)=>{var s;return openBlock(),createBlock(unref(O),{"data-state":(s=unref(e).checked)!=null&&s.value?"checked":"unchecked","data-disabled":unref(e).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),[fn,Kp]=Q$1("TabsRoot"),yg=defineComponent({__name:"TabsRoot",props:{defaultValue:{},orientation:{default:"horizontal"},dir:{},activationMode:{default:"automatic"},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(o,{emit:e}){const n=o,a=e,{orientation:s,dir:l}=toRefs(n),c=be(l);R();const d=ne$1(n,"modelValue",a,{defaultValue:n.defaultValue,passive:n.modelValue===void 0}),u=ref();return Kp({modelValue:d,changeModelValue:f=>{d.value=f},orientation:s,dir:c,activationMode:n.activationMode,baseId:he(void 0,"radix-vue-tabs"),tabsList:u}),(f,p)=>(openBlock(),createBlock(unref(O),{dir:unref(c),"data-orientation":unref(s),"as-child":f.asChild,as:f.as},{default:withCtx(()=>[renderSlot(f.$slots,"default",{modelValue:unref(d)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),gg=defineComponent({__name:"TabsList",props:{loop:{type:Boolean,default:!0},asChild:{type:Boolean},as:{}},setup(o){const e=o,{loop:n}=toRefs(e),{forwardRef:a,currentElement:s}=R(),l=fn();return l.tabsList=s,(c,d)=>(openBlock(),createBlock(unref(Vt),{"as-child":"",orientation:unref(l).orientation.value,dir:unref(l).dir.value,loop:unref(n)},{default:withCtx(()=>[createVNode(unref(O),{ref:unref(a),role:"tablist","as-child":c.asChild,as:c.as,"aria-orientation":unref(l).orientation.value},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}});function lr(o,e){return`${o}-trigger-${e}`}function sr(o,e){return`${o}-content-${e}`}const bg=defineComponent({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const e=o,{forwardRef:n}=R(),a=fn(),s=computed(()=>lr(a.baseId,e.value)),l=computed(()=>sr(a.baseId,e.value)),c=computed(()=>e.value===a.modelValue.value),d=ref(c.value);return onMounted(()=>{requestAnimationFrame(()=>{d.value=!1})}),(u,f)=>(openBlock(),createBlock(unref(Pe$1),{present:c.value,"force-mount":""},{default:withCtx(({present:p})=>[createVNode(unref(O),{id:l.value,ref:unref(n),"as-child":u.asChild,as:u.as,role:"tabpanel","data-state":c.value?"active":"inactive","data-orientation":unref(a).orientation.value,"aria-labelledby":s.value,hidden:!p.value,tabindex:"0",style:normalizeStyle({animationDuration:d.value?"0s":void 0})},{default:withCtx(()=>[u.forceMount||c.value?renderSlot(u.$slots,"default",{key:0}):createCommentVNode("",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),Cg=defineComponent({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,{forwardRef:n}=R(),a=fn(),s=computed(()=>lr(a.baseId,e.value)),l=computed(()=>sr(a.baseId,e.value)),c=computed(()=>e.value===a.modelValue.value);return(d,u)=>(openBlock(),createBlock(unref(Ft),{"as-child":"",focusable:!d.disabled,active:c.value},{default:withCtx(()=>[createVNode(unref(O),{id:s.value,ref:unref(n),role:"tab",type:d.as==="button"?"button":void 0,as:d.as,"as-child":d.asChild,"aria-selected":c.value?"true":"false","aria-controls":l.value,"data-state":c.value?"active":"inactive",disabled:d.disabled,"data-disabled":d.disabled?"":void 0,"data-orientation":unref(a).orientation.value,onMousedown:u[0]||(u[0]=withModifiers(f=>{!d.disabled&&f.ctrlKey===!1?unref(a).changeModelValue(d.value):f.preventDefault()},["left"])),onKeydown:u[1]||(u[1]=withKeys(f=>unref(a).changeModelValue(d.value),["enter","space"])),onFocus:u[2]||(u[2]=()=>{const f=unref(a).activationMode!=="manual";!c.value&&!d.disabled&&f&&unref(a).changeModelValue(d.value)})},{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),[Jp,Qp]=Q$1("ToastRoot"),ur=defineComponent({__name:"ToastAnnounceExclude",props:{altText:{},asChild:{type:Boolean},as:{}},setup(o){return(e,n)=>(openBlock(),createBlock(unref(O),{as:e.as,"as-child":e.asChild,"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":e.altText||void 0},{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},8,["as","as-child","data-radix-toast-announce-alt"]))}}),tv=defineComponent({__name:"ToastClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=Jp(),{forwardRef:a}=R();return(s,l)=>(openBlock(),createBlock(ur,{"as-child":""},{default:withCtx(()=>[createVNode(unref(O),mergeProps(e,{ref:unref(a),type:s.as==="button"?"button":void 0,onClick:l[0]||(l[0]=c=>unref(n).onClose())}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["type"])]),_:3}))}}),Tg=defineComponent({__name:"ToastAction",props:{altText:{},asChild:{type:Boolean},as:{}},setup(o){if(!o.altText)throw new Error("Missing prop `altText` expected on `ToastAction`");const{forwardRef:e}=R();return(n,a)=>n.altText?(openBlock(),createBlock(ur,{key:0,"alt-text":n.altText,"as-child":""},{default:withCtx(()=>[createVNode(tv,{ref:unref(e),as:n.as,"as-child":n.asChild},{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},8,["as","as-child"])]),_:3},8,["alt-text"])):createCommentVNode("",!0)}}),cr="tooltip.open",[Oo,uv]=Q$1("TooltipProvider"),Lg=defineComponent({inheritAttrs:!1,__name:"TooltipProvider",props:{delayDuration:{default:700},skipDelayDuration:{default:300},disableHoverableContent:{type:Boolean,default:!1},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean,default:!1}},setup(o){const e=o,{delayDuration:n,skipDelayDuration:a,disableHoverableContent:s,disableClosingTrigger:l,ignoreNonKeyboardFocus:c,disabled:d}=toRefs(e);R();const u=ref(!0),f=ref(!1),{start:p,stop:_}=Wn(()=>{u.value=!0},a,{immediate:!1});return uv({isOpenDelayed:u,delayDuration:n,onOpen(){_(),u.value=!1},onClose(){p()},isPointerInTransitRef:f,disableHoverableContent:s,disableClosingTrigger:l,disabled:d,ignoreNonKeyboardFocus:c}),(b,v)=>renderSlot(b.$slots,"default")}}),[mn,dv]=Q$1("TooltipRoot"),zg=defineComponent({__name:"TooltipRoot",props:{defaultOpen:{type:Boolean,default:!1},open:{type:Boolean,default:void 0},delayDuration:{default:void 0},disableHoverableContent:{type:Boolean,default:void 0},disableClosingTrigger:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},ignoreNonKeyboardFocus:{type:Boolean,default:void 0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=e;R();const s=Oo(),l=computed(()=>n.disableHoverableContent??s.disableHoverableContent.value),c=computed(()=>n.disableClosingTrigger??s.disableClosingTrigger.value),d=computed(()=>n.disabled??s.disabled.value),u=computed(()=>n.delayDuration??s.delayDuration.value),f=computed(()=>n.ignoreNonKeyboardFocus??s.ignoreNonKeyboardFocus.value),p=ne$1(n,"open",a,{defaultValue:n.defaultOpen,passive:n.open===void 0});watch(p,V=>{s.onClose&&(V?(s.onOpen(),document.dispatchEvent(new CustomEvent(cr))):s.onClose())});const _=ref(!1),b=ref(),v=computed(()=>p.value?_.value?"delayed-open":"instant-open":"closed"),{start:k,stop:x}=Wn(()=>{_.value=!0,p.value=!0},u,{immediate:!1});function M(){x(),_.value=!1,p.value=!0}function E(){x(),p.value=!1}function L(){k()}return dv({contentId:"",open:p,stateAttribute:v,trigger:b,onTriggerChange(V){b.value=V},onTriggerEnter(){s.isOpenDelayed.value?L():M()},onTriggerLeave(){l.value?E():x()},onOpen:M,onClose:E,disableHoverableContent:l,disableClosingTrigger:c,disabled:d,ignoreNonKeyboardFocus:f}),(V,B)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(V.$slots,"default",{open:unref(p)})]),_:3}))}}),Kg=defineComponent({__name:"TooltipTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=mn(),a=Oo();n.contentId||(n.contentId=he(void 0,"radix-vue-tooltip-content"));const{forwardRef:s,currentElement:l}=R(),c=ref(!1),d=ref(!1),u=computed(()=>n.disabled.value?{}:{click:x,focus:v,pointermove:_,pointerleave:b,pointerdown:p,blur:k});onMounted(()=>{n.onTriggerChange(l.value)});function f(){setTimeout(()=>{c.value=!1},1)}function p(){c.value=!0,document.addEventListener("pointerup",f,{once:!0})}function _(M){M.pointerType!=="touch"&&!d.value&&!a.isPointerInTransitRef.value&&(n.onTriggerEnter(),d.value=!0)}function b(){n.onTriggerLeave(),d.value=!1}function v(M){var E,L;c.value||n.ignoreNonKeyboardFocus.value&&!((L=(E=M.target).matches)!=null&&L.call(E,":focus-visible"))||n.onOpen()}function k(){n.onClose()}function x(){n.disableClosingTrigger.value||n.onClose()}return(M,E)=>(openBlock(),createBlock(unref(kt),{"as-child":""},{default:withCtx(()=>[createVNode(unref(O),mergeProps({ref:unref(s),"aria-describedby":unref(n).open.value?unref(n).contentId:void 0,"data-state":unref(n).stateAttribute.value,as:M.as,"as-child":e.asChild,"data-grace-area-trigger":""},toHandlers(u.value)),{default:withCtx(()=>[renderSlot(M.$slots,"default")]),_:3},16,["aria-describedby","data-state","as","as-child"])]),_:3}))}}),fr=defineComponent({__name:"TooltipContentImpl",props:{ariaLabel:{},asChild:{type:Boolean},as:{},side:{default:"top"},sideOffset:{default:0},align:{default:"center"},alignOffset:{},avoidCollisions:{type:Boolean,default:!0},collisionBoundary:{default:()=>[]},collisionPadding:{default:0},arrowPadding:{default:0},sticky:{default:"partial"},hideWhenDetached:{type:Boolean,default:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const n=o,a=e,s=mn(),{forwardRef:l}=R(),c=useSlots(),d=computed(()=>{var p;return(p=c.default)==null?void 0:p.call(c)}),u=computed(()=>{var p;if(n.ariaLabel)return n.ariaLabel;let _="";function b(v){typeof v.children=="string"&&v.type!==Comment?_+=v.children:Array.isArray(v.children)&&v.children.forEach(k=>b(k))}return(p=d.value)==null||p.forEach(v=>b(v)),_}),f=computed(()=>{const{ariaLabel:p,..._}=n;return _});return onMounted(()=>{Le(window,"scroll",p=>{const _=p.target;_!=null&&_.contains(s.trigger.value)&&s.onClose()}),Le(window,cr,s.onClose)}),(p,_)=>(openBlock(),createBlock(unref(gt$1),{"as-child":"","disable-outside-pointer-events":!1,onEscapeKeyDown:_[0]||(_[0]=b=>a("escapeKeyDown",b)),onPointerDownOutside:_[1]||(_[1]=b=>{var v;unref(s).disableClosingTrigger.value&&(v=unref(s).trigger.value)!=null&&v.contains(b.target)&&b.preventDefault(),a("pointerDownOutside",b)}),onFocusOutside:_[2]||(_[2]=withModifiers(()=>{},["prevent"])),onDismiss:_[3]||(_[3]=b=>unref(s).onClose())},{default:withCtx(()=>[createVNode(unref(Bt),mergeProps({ref:unref(l),"data-state":unref(s).stateAttribute.value},{...p.$attrs,...f.value},{style:{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:withCtx(()=>[renderSlot(p.$slots,"default"),createVNode(unref(Zt),{id:unref(s).contentId,role:"tooltip"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(u.value),1)]),_:1},8,["id"])]),_:3},16,["data-state"])]),_:3}))}}),cv=defineComponent({__name:"TooltipContentHoverable",props:{ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean}},setup(o){const e=At(o),{forwardRef:n,currentElement:a}=R(),{trigger:s,onClose:l}=mn(),c=Oo(),{isPointerInTransit:d,onPointerExit:u}=kl(s,a);return c.isPointerInTransitRef=d,u(()=>{l()}),(f,p)=>(openBlock(),createBlock(fr,mergeProps({ref:unref(n)},unref(e)),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16))}}),Hg=defineComponent({__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{default:"top"},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const n=o,a=e,s=mn(),l=xe(n,a),{forwardRef:c}=R();return(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||unref(s).open.value},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(s).disableHoverableContent.value?fr:cv),mergeProps({ref:unref(c)},unref(l)),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),jg=defineComponent({__name:"TooltipPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}});var _sfc_main$2r=defineComponent({__name:"Button",props:{variant:{},size:{},class:{},asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),{as:n.as,"as-child":n.asChild,class:normalizeClass(unref(cn)(unref(buttonVariants)({variant:n.variant,size:n.size}),e.class))},{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},8,["as","as-child","class"]))}});const buttonVariants=cva("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",xs:"h-7 rounded px-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-8 w-8"}},defaultVariants:{variant:"default",size:"default"}});var _sfc_main$2q=defineComponent({__name:"Card",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$2p=defineComponent({__name:"CardContent",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("p-6 pt-0",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$2o=defineComponent({__name:"CardDescription",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("p",{class:normalizeClass(unref(cn)("text-sm text-muted-foreground",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$2n=defineComponent({__name:"CardFooter",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("flex items-center p-6 pt-0",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$2m=defineComponent({__name:"CardHeader",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("flex flex-col gap-y-1.5 p-6",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$2l=defineComponent({__name:"CardTitle",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("h3",{class:normalizeClass(unref(cn)("text-2xl font-semibold leading-none tracking-tight",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$2k=defineComponent({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(o,{emit:e}){const s=xe(o,e);return(l,c)=>(openBlock(),createBlock(unref(yg),normalizeProps(guardReactiveProps(unref(s))),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),_sfc_main$2j=defineComponent({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(bg),mergeProps({class:unref(cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e.class)},n.value),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$2i=defineComponent({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(gg),mergeProps(n.value,{class:unref(cn)("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}});const _hoisted_1$H={class:"truncate"};var _sfc_main$2h=defineComponent({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Cg),mergeProps(unref(a),{class:unref(cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e.class)}),{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$H,[renderSlot(s.$slots,"default")])]),_:3},16,["class"]))}});const GetAllKbInfoSchema={request:z$1.object({}),result:z$1.array(z$1.object({name:z$1.string(),location:z$1.string()}))},CreateKbSchema={request:z$1.object({location:z$1.string(),name:z$1.string(),password:z$1.string()}),result:z$1.object({})};z$1.object({location:z$1.string(),newName:z$1.string()}),z$1.object({});const DeleteKbSchema={request:z$1.object({location:z$1.string()}),result:z$1.object({})},RespSchema=o=>z$1.discriminatedUnion("success",[z$1.object({success:z$1.literal(!0),data:o}),z$1.object({success:z$1.literal(!1),code:z$1.number(),msg:z$1.string().optional()})]),usePostApi=(o,e,n)=>async(a,s)=>{try{let l;try{l=globalThis.getAxios()}catch(f){return console.error(`[NO_AXIOS] ${f}`),{success:!1,code:RESP_CODES.NO_AXIOS}}const c=await l.post(o,a,s);if(!c)return console.error(`[EMPTY_RESPONSE] endpoint=${o}, params=${JSON.stringify(a)}`),{success:!1,code:RESP_CODES.UNKNOWN_ERROR};const u=RespSchema(n).safeParse(c.data);return u.success?u.data:(console.error(`[INVALID_RESPONSE] endpoint=${o}, params=${JSON.stringify(a)}, response=${JSON.stringify(c.data)}, validationErrors=${JSON.stringify(u.error.errors)}`),{success:!1,code:RESP_CODES.INVALID_RESPONSE})}catch(l){return console.error(`[UNKNOWN_ERROR] endpoint=${o}, params=${JSON.stringify(a)}, error=$`,l),{success:!1,code:RESP_CODES.UNKNOWN_ERROR}}},getAllKbInfo=usePostApi("/kb/list",z$1.object({}),GetAllKbInfoSchema.result),createKb=usePostApi("/kb/create",CreateKbSchema.request,CreateKbSchema.result),deleteKb=usePostApi("/kb/delete",DeleteKbSchema.request,DeleteKbSchema.result);const isBrowser=typeof document<"u";function isRouteComponent(o){return typeof o=="object"||"displayName"in o||"props"in o||"__vccOpts"in o}function isESModule(o){return o.__esModule||o[Symbol.toStringTag]==="Module"||o.default&&isRouteComponent(o.default)}const assign$1=Object.assign;function applyToParams(o,e){const n={};for(const a in e){const s=e[a];n[a]=isArray$2(s)?s.map(o):o(s)}return n}const noop$1=()=>{},isArray$2=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(o){return encodeURI(""+o).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(o){return commonEncode(o).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(o){return commonEncode(o).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(o){return encodeQueryValue(o).replace(EQUAL_RE,"%3D")}function encodePath(o){return commonEncode(o).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(o){return o==null?"":encodePath(o).replace(SLASH_RE,"%2F")}function decode(o){try{return decodeURIComponent(""+o)}catch{}return""+o}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=o=>o.replace(TRAILING_SLASH_RE,"");function parseURL(o,e,n="/"){let a,s={},l="",c="";const d=e.indexOf("#");let u=e.indexOf("?");return d<u&&d>=0&&(u=-1),u>-1&&(a=e.slice(0,u),l=e.slice(u+1,d>-1?d:e.length),s=o(l)),d>-1&&(a=a||e.slice(0,d),c=e.slice(d,e.length)),a=resolveRelativePath(a??e,n),{fullPath:a+(l&&"?")+l+c,path:a,query:s,hash:decode(c)}}function stringifyURL(o,e){const n=e.query?o(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function stripBase(o,e){return!e||!o.toLowerCase().startsWith(e.toLowerCase())?o:o.slice(e.length)||"/"}function isSameRouteLocation(o,e,n){const a=e.matched.length-1,s=n.matched.length-1;return a>-1&&a===s&&isSameRouteRecord(e.matched[a],n.matched[s])&&isSameRouteLocationParams(e.params,n.params)&&o(e.query)===o(n.query)&&e.hash===n.hash}function isSameRouteRecord(o,e){return(o.aliasOf||o)===(e.aliasOf||e)}function isSameRouteLocationParams(o,e){if(Object.keys(o).length!==Object.keys(e).length)return!1;for(const n in o)if(!isSameRouteLocationParamsValue(o[n],e[n]))return!1;return!0}function isSameRouteLocationParamsValue(o,e){return isArray$2(o)?isEquivalentArray(o,e):isArray$2(e)?isEquivalentArray(e,o):o===e}function isEquivalentArray(o,e){return isArray$2(e)?o.length===e.length&&o.every((n,a)=>n===e[a]):o.length===1&&o[0]===e}function resolveRelativePath(o,e){if(o.startsWith("/"))return o;if(!o)return e;const n=e.split("/"),a=o.split("/"),s=a[a.length-1];(s===".."||s===".")&&a.push("");let l=n.length-1,c,d;for(c=0;c<a.length;c++)if(d=a[c],d!==".")if(d==="..")l>1&&l--;else break;return n.slice(0,l).join("/")+"/"+a.slice(c).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(o){o.pop="pop",o.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(o){o.back="back",o.forward="forward",o.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(o){if(!o)if(isBrowser){const e=document.querySelector("base");o=e&&e.getAttribute("href")||"/",o=o.replace(/^\w+:\/\/[^\/]+/,"")}else o="/";return o[0]!=="/"&&o[0]!=="#"&&(o="/"+o),removeTrailingSlash(o)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(o,e){return o.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(o,e){const n=document.documentElement.getBoundingClientRect(),a=o.getBoundingClientRect();return{behavior:e.behavior,left:a.left-n.left-(e.left||0),top:a.top-n.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(o){let e;if("el"in o){const n=o.el,a=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=getElementPosition(s,o)}else e=o;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function getScrollKey(o,e){return(history.state?history.state.position-e:-1)+o}const scrollPositions=new Map;function saveScrollPosition(o,e){scrollPositions.set(o,e)}function getSavedScrollPosition(o){const e=scrollPositions.get(o);return scrollPositions.delete(o),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(o,e){const{pathname:n,search:a,hash:s}=e,l=o.indexOf("#");if(l>-1){let d=s.includes(o.slice(l))?o.slice(l).length:1,u=s.slice(d);return u[0]!=="/"&&(u="/"+u),stripBase(u,"")}return stripBase(n,o)+a+s}function useHistoryListeners(o,e,n,a){let s=[],l=[],c=null;const d=({state:b})=>{const v=createCurrentLocation(o,location),k=n.value,x=e.value;let M=0;if(b){if(n.value=v,e.value=b,c&&c===k){c=null;return}M=x?b.position-x.position:0}else a(v);s.forEach(E=>{E(n.value,k,{delta:M,type:NavigationType.pop,direction:M?M>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function u(){c=n.value}function f(b){s.push(b);const v=()=>{const k=s.indexOf(b);k>-1&&s.splice(k,1)};return l.push(v),v}function p(){const{history:b}=window;b.state&&b.replaceState(assign$1({},b.state,{scroll:computeScrollPosition()}),"")}function _(){for(const b of l)b();l=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:u,listen:f,destroy:_}}function buildState(o,e,n,a=!1,s=!1){return{back:o,current:e,forward:n,replaced:a,position:window.history.length,scroll:s?computeScrollPosition():null}}function useHistoryStateNavigation(o){const{history:e,location:n}=window,a={value:createCurrentLocation(o,n)},s={value:e.state};s.value||l(a.value,{back:null,current:a.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function l(u,f,p){const _=o.indexOf("#"),b=_>-1?(n.host&&document.querySelector("base")?o:o.slice(_))+u:createBaseLocation()+o+u;try{e[p?"replaceState":"pushState"](f,"",b),s.value=f}catch(v){console.error(v),n[p?"replace":"assign"](b)}}function c(u,f){const p=assign$1({},e.state,buildState(s.value.back,u,s.value.forward,!0),f,{position:s.value.position});l(u,p,!0),a.value=u}function d(u,f){const p=assign$1({},s.value,e.state,{forward:u,scroll:computeScrollPosition()});l(p.current,p,!0);const _=assign$1({},buildState(a.value,u,null),{position:p.position+1},f);l(u,_,!1),a.value=u}return{location:a,state:s,push:d,replace:c}}function createWebHistory(o){o=normalizeBase(o);const e=useHistoryStateNavigation(o),n=useHistoryListeners(o,e.state,e.location,e.replace);function a(l,c=!0){c||n.pauseListeners(),history.go(l)}const s=assign$1({location:"",base:o,go:a,createHref:createHref.bind(null,o)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function createWebHashHistory(o){return o=location.host?o||location.pathname+location.search:"",o.includes("#")||(o+="#"),createWebHistory(o)}function isRouteLocation(o){return typeof o=="string"||o&&typeof o=="object"}function isRouteName(o){return typeof o=="string"||typeof o=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(o){o[o.aborted=4]="aborted",o[o.cancelled=8]="cancelled",o[o.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(o,e){return assign$1(new Error,{type:o,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(o,e){return o instanceof Error&&NavigationFailureSymbol in o&&(e==null||!!(o.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(o,e){const n=assign$1({},BASE_PATH_PARSER_OPTIONS,e),a=[];let s=n.start?"^":"";const l=[];for(const f of o){const p=f.length?[]:[90];n.strict&&!f.length&&(s+="/");for(let _=0;_<f.length;_++){const b=f[_];let v=40+(n.sensitive?.25:0);if(b.type===0)_||(s+="/"),s+=b.value.replace(REGEX_CHARS_RE,"\\$&"),v+=40;else if(b.type===1){const{value:k,repeatable:x,optional:M,regexp:E}=b;l.push({name:k,repeatable:x,optional:M});const L=E||BASE_PARAM_PATTERN;if(L!==BASE_PARAM_PATTERN){v+=10;try{new RegExp(`(${L})`)}catch(B){throw new Error(`Invalid custom RegExp for param "${k}" (${L}): `+B.message)}}let V=x?`((?:${L})(?:/(?:${L}))*)`:`(${L})`;_||(V=M&&f.length<2?`(?:/${V})`:"/"+V),M&&(V+="?"),s+=V,v+=20,M&&(v+=-8),x&&(v+=-20),L===".*"&&(v+=-50)}p.push(v)}a.push(p)}if(n.strict&&n.end){const f=a.length-1;a[f][a[f].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const c=new RegExp(s,n.sensitive?"":"i");function d(f){const p=f.match(c),_={};if(!p)return null;for(let b=1;b<p.length;b++){const v=p[b]||"",k=l[b-1];_[k.name]=v&&k.repeatable?v.split("/"):v}return _}function u(f){let p="",_=!1;for(const b of o){(!_||!p.endsWith("/"))&&(p+="/"),_=!1;for(const v of b)if(v.type===0)p+=v.value;else if(v.type===1){const{value:k,repeatable:x,optional:M}=v,E=k in f?f[k]:"";if(isArray$2(E)&&!x)throw new Error(`Provided param "${k}" is an array but it is not repeatable (* or + modifiers)`);const L=isArray$2(E)?E.join("/"):E;if(!L)if(M)b.length<2&&(p.endsWith("/")?p=p.slice(0,-1):_=!0);else throw new Error(`Missing required param "${k}"`);p+=L}}return p||"/"}return{re:c,score:a,keys:l,parse:d,stringify:u}}function compareScoreArray(o,e){let n=0;for(;n<o.length&&n<e.length;){const a=e[n]-o[n];if(a)return a;n++}return o.length<e.length?o.length===1&&o[0]===80?-1:1:o.length>e.length?e.length===1&&e[0]===80?1:-1:0}function comparePathParserScore(o,e){let n=0;const a=o.score,s=e.score;for(;n<a.length&&n<s.length;){const l=compareScoreArray(a[n],s[n]);if(l)return l;n++}if(Math.abs(s.length-a.length)===1){if(isLastScoreNegative(a))return 1;if(isLastScoreNegative(s))return-1}return s.length-a.length}function isLastScoreNegative(o){const e=o[o.length-1];return o.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(o){if(!o)return[[]];if(o==="/")return[[ROOT_TOKEN]];if(!o.startsWith("/"))throw new Error(`Invalid path "${o}"`);function e(v){throw new Error(`ERR (${n})/"${f}": ${v}`)}let n=0,a=n;const s=[];let l;function c(){l&&s.push(l),l=[]}let d=0,u,f="",p="";function _(){f&&(n===0?l.push({type:0,value:f}):n===1||n===2||n===3?(l.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:f,regexp:p,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),f="")}function b(){f+=u}for(;d<o.length;){if(u=o[d++],u==="\\"&&n!==2){a=n,n=4;continue}switch(n){case 0:u==="/"?(f&&_(),c()):u===":"?(_(),n=1):b();break;case 4:b(),n=a;break;case 1:u==="("?n=2:VALID_PARAM_RE.test(u)?b():(_(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&d--);break;case 2:u===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+u:n=3:p+=u;break;case 3:_(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&d--,p="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${f}"`),_(),c(),s}function createRouteRecordMatcher(o,e,n){const a=tokensToParser(tokenizePath(o.path),n),s=assign$1(a,{record:o,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function createRouterMatcher(o,e){const n=[],a=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function s(_){return a.get(_)}function l(_,b,v){const k=!v,x=normalizeRouteRecord(_);x.aliasOf=v&&v.record;const M=mergeOptions(e,_),E=[x];if("alias"in _){const B=typeof _.alias=="string"?[_.alias]:_.alias;for(const F of B)E.push(normalizeRouteRecord(assign$1({},x,{components:v?v.record.components:x.components,path:F,aliasOf:v?v.record:x})))}let L,V;for(const B of E){const{path:F}=B;if(b&&F[0]!=="/"){const j=b.record.path,I=j[j.length-1]==="/"?"":"/";B.path=b.record.path+(F&&I+F)}if(L=createRouteRecordMatcher(B,b,M),v?v.alias.push(L):(V=V||L,V!==L&&V.alias.push(L),k&&_.name&&!isAliasRecord(L)&&c(_.name)),isMatchable(L)&&u(L),x.children){const j=x.children;for(let I=0;I<j.length;I++)l(j[I],L,v&&v.children[I])}v=v||L}return V?()=>{c(V)}:noop$1}function c(_){if(isRouteName(_)){const b=a.get(_);b&&(a.delete(_),n.splice(n.indexOf(b),1),b.children.forEach(c),b.alias.forEach(c))}else{const b=n.indexOf(_);b>-1&&(n.splice(b,1),_.record.name&&a.delete(_.record.name),_.children.forEach(c),_.alias.forEach(c))}}function d(){return n}function u(_){const b=findInsertionIndex(_,n);n.splice(b,0,_),_.record.name&&!isAliasRecord(_)&&a.set(_.record.name,_)}function f(_,b){let v,k={},x,M;if("name"in _&&_.name){if(v=a.get(_.name),!v)throw createRouterError(1,{location:_});M=v.record.name,k=assign$1(paramsFromLocation(b.params,v.keys.filter(V=>!V.optional).concat(v.parent?v.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),_.params&&paramsFromLocation(_.params,v.keys.map(V=>V.name))),x=v.stringify(k)}else if(_.path!=null)x=_.path,v=n.find(V=>V.re.test(x)),v&&(k=v.parse(x),M=v.record.name);else{if(v=b.name?a.get(b.name):n.find(V=>V.re.test(b.path)),!v)throw createRouterError(1,{location:_,currentLocation:b});M=v.record.name,k=assign$1({},b.params,_.params),x=v.stringify(k)}const E=[];let L=v;for(;L;)E.unshift(L.record),L=L.parent;return{name:M,path:x,params:k,matched:E,meta:mergeMetaFields(E)}}o.forEach(_=>l(_));function p(){n.length=0,a.clear()}return{addRoute:l,resolve:f,removeRoute:c,clearRoutes:p,getRoutes:d,getRecordMatcher:s}}function paramsFromLocation(o,e){const n={};for(const a of e)a in o&&(n[a]=o[a]);return n}function normalizeRouteRecord(o){const e={path:o.path,redirect:o.redirect,name:o.name,meta:o.meta||{},aliasOf:o.aliasOf,beforeEnter:o.beforeEnter,props:normalizeRecordProps(o),children:o.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in o?o.components||null:o.component&&{default:o.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function normalizeRecordProps(o){const e={},n=o.props||!1;if("component"in o)e.default=n;else for(const a in o.components)e[a]=typeof n=="object"?n[a]:n;return e}function isAliasRecord(o){for(;o;){if(o.record.aliasOf)return!0;o=o.parent}return!1}function mergeMetaFields(o){return o.reduce((e,n)=>assign$1(e,n.meta),{})}function mergeOptions(o,e){const n={};for(const a in o)n[a]=a in e?e[a]:o[a];return n}function findInsertionIndex(o,e){let n=0,a=e.length;for(;n!==a;){const l=n+a>>1;comparePathParserScore(o,e[l])<0?a=l:n=l+1}const s=getInsertionAncestor(o);return s&&(a=e.lastIndexOf(s,a-1)),a}function getInsertionAncestor(o){let e=o;for(;e=e.parent;)if(isMatchable(e)&&comparePathParserScore(o,e)===0)return e}function isMatchable({record:o}){return!!(o.name||o.components&&Object.keys(o.components).length||o.redirect)}function parseQuery(o){const e={};if(o===""||o==="?")return e;const a=(o[0]==="?"?o.slice(1):o).split("&");for(let s=0;s<a.length;++s){const l=a[s].replace(PLUS_RE," "),c=l.indexOf("="),d=decode(c<0?l:l.slice(0,c)),u=c<0?null:decode(l.slice(c+1));if(d in e){let f=e[d];isArray$2(f)||(f=e[d]=[f]),f.push(u)}else e[d]=u}return e}function stringifyQuery(o){let e="";for(let n in o){const a=o[n];if(n=encodeQueryKey(n),a==null){a!==void 0&&(e+=(e.length?"&":"")+n);continue}(isArray$2(a)?a.map(l=>l&&encodeQueryValue(l)):[a&&encodeQueryValue(a)]).forEach(l=>{l!==void 0&&(e+=(e.length?"&":"")+n,l!=null&&(e+="="+l))})}return e}function normalizeQuery(o){const e={};for(const n in o){const a=o[n];a!==void 0&&(e[n]=isArray$2(a)?a.map(s=>s==null?null:""+s):a==null?a:""+a)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let o=[];function e(a){return o.push(a),()=>{const s=o.indexOf(a);s>-1&&o.splice(s,1)}}function n(){o=[]}return{add:e,list:()=>o.slice(),reset:n}}function guardToPromiseFn(o,e,n,a,s,l=c=>c()){const c=a&&(a.enterCallbacks[s]=a.enterCallbacks[s]||[]);return()=>new Promise((d,u)=>{const f=b=>{b===!1?u(createRouterError(4,{from:n,to:e})):b instanceof Error?u(b):isRouteLocation(b)?u(createRouterError(2,{from:e,to:b})):(c&&a.enterCallbacks[s]===c&&typeof b=="function"&&c.push(b),d())},p=l(()=>o.call(a&&a.instances[s],e,n,f));let _=Promise.resolve(p);o.length<3&&(_=_.then(f)),_.catch(b=>u(b))})}function extractComponentsGuards(o,e,n,a,s=l=>l()){const l=[];for(const c of o)for(const d in c.components){let u=c.components[d];if(!(e!=="beforeRouteEnter"&&!c.instances[d]))if(isRouteComponent(u)){const p=(u.__vccOpts||u)[e];p&&l.push(guardToPromiseFn(p,n,a,c,d,s))}else{let f=u();l.push(()=>f.then(p=>{if(!p)throw new Error(`Couldn't resolve component "${d}" at "${c.path}"`);const _=isESModule(p)?p.default:p;c.mods[d]=p,c.components[d]=_;const v=(_.__vccOpts||_)[e];return v&&guardToPromiseFn(v,n,a,c,d,s)()}))}}return l}function useLink(o){const e=inject(routerKey),n=inject(routeLocationKey),a=computed(()=>{const u=unref(o.to);return e.resolve(u)}),s=computed(()=>{const{matched:u}=a.value,{length:f}=u,p=u[f-1],_=n.matched;if(!p||!_.length)return-1;const b=_.findIndex(isSameRouteRecord.bind(null,p));if(b>-1)return b;const v=getOriginalPath(u[f-2]);return f>1&&getOriginalPath(p)===v&&_[_.length-1].path!==v?_.findIndex(isSameRouteRecord.bind(null,u[f-2])):b}),l=computed(()=>s.value>-1&&includesParams(n.params,a.value.params)),c=computed(()=>s.value>-1&&s.value===n.matched.length-1&&isSameRouteLocationParams(n.params,a.value.params));function d(u={}){if(guardEvent(u)){const f=e[unref(o.replace)?"replace":"push"](unref(o.to)).catch(noop$1);return o.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>f),f}return Promise.resolve()}return{route:a,href:computed(()=>a.value.href),isActive:l,isExactActive:c,navigate:d}}function preferSingleVNode(o){return o.length===1?o[0]:o}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(o,{slots:e}){const n=reactive(useLink(o)),{options:a}=inject(routerKey),s=computed(()=>({[getLinkClass(o.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(o.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=e.default&&preferSingleVNode(e.default(n));return o.custom?l:h("a",{"aria-current":n.isExactActive?o.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},l)}}}),RouterLink=RouterLinkImpl;function guardEvent(o){if(!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)&&!o.defaultPrevented&&!(o.button!==void 0&&o.button!==0)){if(o.currentTarget&&o.currentTarget.getAttribute){const e=o.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return o.preventDefault&&o.preventDefault(),!0}}function includesParams(o,e){for(const n in e){const a=e[n],s=o[n];if(typeof a=="string"){if(a!==s)return!1}else if(!isArray$2(s)||s.length!==a.length||a.some((l,c)=>l!==s[c]))return!1}return!0}function getOriginalPath(o){return o?o.aliasOf?o.aliasOf.path:o.path:""}const getLinkClass=(o,e,n)=>o??e??n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(o,{attrs:e,slots:n}){const a=inject(routerViewLocationKey),s=computed(()=>o.route||a.value),l=inject(viewDepthKey,0),c=computed(()=>{let f=unref(l);const{matched:p}=s.value;let _;for(;(_=p[f])&&!_.components;)f++;return f}),d=computed(()=>s.value.matched[c.value]);provide(viewDepthKey,computed(()=>c.value+1)),provide(matchedRouteKey,d),provide(routerViewLocationKey,s);const u=ref();return watch(()=>[u.value,d.value,o.name],([f,p,_],[b,v,k])=>{p&&(p.instances[_]=f,v&&v!==p&&f&&f===b&&(p.leaveGuards.size||(p.leaveGuards=v.leaveGuards),p.updateGuards.size||(p.updateGuards=v.updateGuards))),f&&p&&(!v||!isSameRouteRecord(p,v)||!b)&&(p.enterCallbacks[_]||[]).forEach(x=>x(f))},{flush:"post"}),()=>{const f=s.value,p=o.name,_=d.value,b=_&&_.components[p];if(!b)return normalizeSlot(n.default,{Component:b,route:f});const v=_.props[p],k=v?v===!0?f.params:typeof v=="function"?v(f):v:null,M=h(b,assign$1({},k,e,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(_.instances[p]=null)},ref:u}));return normalizeSlot(n.default,{Component:M,route:f})||M}}});function normalizeSlot(o,e){if(!o)return null;const n=o(e);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function createRouter(o){const e=createRouterMatcher(o.routes,o),n=o.parseQuery||parseQuery,a=o.stringifyQuery||stringifyQuery,s=o.history,l=useCallbacks(),c=useCallbacks(),d=useCallbacks(),u=shallowRef(START_LOCATION_NORMALIZED);let f=START_LOCATION_NORMALIZED;isBrowser&&o.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=applyToParams.bind(null,pe=>""+pe),_=applyToParams.bind(null,encodeParam),b=applyToParams.bind(null,decode);function v(pe,fe){let me,te;return isRouteName(pe)?(me=e.getRecordMatcher(pe),te=fe):te=pe,e.addRoute(te,me)}function k(pe){const fe=e.getRecordMatcher(pe);fe&&e.removeRoute(fe)}function x(){return e.getRoutes().map(pe=>pe.record)}function M(pe){return!!e.getRecordMatcher(pe)}function E(pe,fe){if(fe=assign$1({},fe||u.value),typeof pe=="string"){const Be=parseURL(n,pe,fe.path),Ge=e.resolve({path:Be.path},fe),ze=s.createHref(Be.fullPath);return assign$1(Be,Ge,{params:b(Ge.params),hash:decode(Be.hash),redirectedFrom:void 0,href:ze})}let me;if(pe.path!=null)me=assign$1({},pe,{path:parseURL(n,pe.path,fe.path).path});else{const Be=assign$1({},pe.params);for(const Ge in Be)Be[Ge]==null&&delete Be[Ge];me=assign$1({},pe,{params:_(Be)}),fe.params=_(fe.params)}const te=e.resolve(me,fe),ue=pe.hash||"";te.params=p(b(te.params));const we=stringifyURL(a,assign$1({},pe,{hash:encodeHash(ue),path:te.path})),_e=s.createHref(we);return assign$1({fullPath:we,hash:ue,query:a===stringifyQuery?normalizeQuery(pe.query):pe.query||{}},te,{redirectedFrom:void 0,href:_e})}function L(pe){return typeof pe=="string"?parseURL(n,pe,u.value.path):assign$1({},pe)}function V(pe,fe){if(f!==pe)return createRouterError(8,{from:fe,to:pe})}function B(pe){return I(pe)}function F(pe){return B(assign$1(L(pe),{replace:!0}))}function j(pe){const fe=pe.matched[pe.matched.length-1];if(fe&&fe.redirect){const{redirect:me}=fe;let te=typeof me=="function"?me(pe):me;return typeof te=="string"&&(te=te.includes("?")||te.includes("#")?te=L(te):{path:te},te.params={}),assign$1({query:pe.query,hash:pe.hash,params:te.path!=null?{}:pe.params},te)}}function I(pe,fe){const me=f=E(pe),te=u.value,ue=pe.state,we=pe.force,_e=pe.replace===!0,Be=j(me);if(Be)return I(assign$1(L(Be),{state:typeof Be=="object"?assign$1({},ue,Be.state):ue,force:we,replace:_e}),fe||me);const Ge=me;Ge.redirectedFrom=fe;let ze;return!we&&isSameRouteLocation(a,te,me)&&(ze=createRouterError(16,{to:Ge,from:te}),ke(te,te,!0,!1)),(ze?Promise.resolve(ze):K(Ge,te)).catch(We=>isNavigationFailure(We)?isNavigationFailure(We,2)?We:qe(We):de(We,Ge,te)).then(We=>{if(We){if(isNavigationFailure(We,2))return I(assign$1({replace:_e},L(We.to),{state:typeof We.to=="object"?assign$1({},ue,We.to.state):ue,force:we}),fe||Ge)}else We=Z(Ge,te,!0,_e,ue);return G(Ge,te,We),We})}function U(pe,fe){const me=V(pe,fe);return me?Promise.reject(me):Promise.resolve()}function W(pe){const fe=Ve.values().next().value;return fe&&typeof fe.runWithContext=="function"?fe.runWithContext(pe):pe()}function K(pe,fe){let me;const[te,ue,we]=extractChangingRecords(pe,fe);me=extractComponentsGuards(te.reverse(),"beforeRouteLeave",pe,fe);for(const Be of te)Be.leaveGuards.forEach(Ge=>{me.push(guardToPromiseFn(Ge,pe,fe))});const _e=U.bind(null,pe,fe);return me.push(_e),dt(me).then(()=>{me=[];for(const Be of l.list())me.push(guardToPromiseFn(Be,pe,fe));return me.push(_e),dt(me)}).then(()=>{me=extractComponentsGuards(ue,"beforeRouteUpdate",pe,fe);for(const Be of ue)Be.updateGuards.forEach(Ge=>{me.push(guardToPromiseFn(Ge,pe,fe))});return me.push(_e),dt(me)}).then(()=>{me=[];for(const Be of we)if(Be.beforeEnter)if(isArray$2(Be.beforeEnter))for(const Ge of Be.beforeEnter)me.push(guardToPromiseFn(Ge,pe,fe));else me.push(guardToPromiseFn(Be.beforeEnter,pe,fe));return me.push(_e),dt(me)}).then(()=>(pe.matched.forEach(Be=>Be.enterCallbacks={}),me=extractComponentsGuards(we,"beforeRouteEnter",pe,fe,W),me.push(_e),dt(me))).then(()=>{me=[];for(const Be of c.list())me.push(guardToPromiseFn(Be,pe,fe));return me.push(_e),dt(me)}).catch(Be=>isNavigationFailure(Be,8)?Be:Promise.reject(Be))}function G(pe,fe,me){d.list().forEach(te=>W(()=>te(pe,fe,me)))}function Z(pe,fe,me,te,ue){const we=V(pe,fe);if(we)return we;const _e=fe===START_LOCATION_NORMALIZED,Be=isBrowser?history.state:{};me&&(te||_e?s.replace(pe.fullPath,assign$1({scroll:_e&&Be&&Be.scroll},ue)):s.push(pe.fullPath,ue)),u.value=pe,ke(pe,fe,me,_e),qe()}let oe;function Y(){oe||(oe=s.listen((pe,fe,me)=>{const te=E(pe),ue=j(te);if(ue){I(assign$1(ue,{replace:!0,force:!0}),te).catch(noop$1);return}f=te;const we=u.value;isBrowser&&saveScrollPosition(getScrollKey(we.fullPath,me.delta),computeScrollPosition()),K(te,we).catch(_e=>isNavigationFailure(_e,12)?_e:isNavigationFailure(_e,2)?(I(assign$1(L(_e.to),{force:!0}),te).then(Be=>{isNavigationFailure(Be,20)&&!me.delta&&me.type===NavigationType.pop&&s.go(-1,!1)}).catch(noop$1),Promise.reject()):(me.delta&&s.go(-me.delta,!1),de(_e,te,we))).then(_e=>{_e=_e||Z(te,we,!1),_e&&(me.delta&&!isNavigationFailure(_e,8)?s.go(-me.delta,!1):me.type===NavigationType.pop&&isNavigationFailure(_e,20)&&s.go(-1,!1)),G(te,we,_e)}).catch(noop$1)}))}let se=useCallbacks(),le=useCallbacks(),ce;function de(pe,fe,me){qe(pe);const te=le.list();return te.length?te.forEach(ue=>ue(pe,fe,me)):console.error(pe),Promise.reject(pe)}function ge(){return ce&&u.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((pe,fe)=>{se.add([pe,fe])})}function qe(pe){return ce||(ce=!pe,Y(),se.list().forEach(([fe,me])=>pe?me(pe):fe()),se.reset()),pe}function ke(pe,fe,me,te){const{scrollBehavior:ue}=o;if(!isBrowser||!ue)return Promise.resolve();const we=!me&&getSavedScrollPosition(getScrollKey(pe.fullPath,0))||(te||!me)&&history.state&&history.state.scroll||null;return nextTick().then(()=>ue(pe,fe,we)).then(_e=>_e&&scrollToPosition(_e)).catch(_e=>de(_e,pe,fe))}const Ee=pe=>s.go(pe);let Oe;const Ve=new Set,Ne={currentRoute:u,listening:!0,addRoute:v,removeRoute:k,clearRoutes:e.clearRoutes,hasRoute:M,getRoutes:x,resolve:E,options:o,push:B,replace:F,go:Ee,back:()=>Ee(-1),forward:()=>Ee(1),beforeEach:l.add,beforeResolve:c.add,afterEach:d.add,onError:le.add,isReady:ge,install(pe){const fe=this;pe.component("RouterLink",RouterLink),pe.component("RouterView",RouterView),pe.config.globalProperties.$router=fe,Object.defineProperty(pe.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(u)}),isBrowser&&!Oe&&u.value===START_LOCATION_NORMALIZED&&(Oe=!0,B(s.location).catch(ue=>{}));const me={};for(const ue in START_LOCATION_NORMALIZED)Object.defineProperty(me,ue,{get:()=>u.value[ue],enumerable:!0});pe.provide(routerKey,fe),pe.provide(routeLocationKey,shallowReactive(me)),pe.provide(routerViewLocationKey,u);const te=pe.unmount;Ve.add(pe),pe.unmount=function(){Ve.delete(pe),Ve.size<1&&(f=START_LOCATION_NORMALIZED,oe&&oe(),oe=null,u.value=START_LOCATION_NORMALIZED,Oe=!1,ce=!1),te()}}};function dt(pe){return pe.reduce((fe,me)=>fe.then(()=>W(me)),Promise.resolve())}return Ne}function extractChangingRecords(o,e){const n=[],a=[],s=[],l=Math.max(e.matched.length,o.matched.length);for(let c=0;c<l;c++){const d=e.matched[c];d&&(o.matched.find(f=>isSameRouteRecord(f,d))?a.push(d):n.push(d));const u=o.matched[c];u&&(e.matched.find(f=>isSameRouteRecord(f,u))||s.push(u))}return[n,a,s]}function useRouter(){return inject(routerKey)}function useRoute(o){return inject(routeLocationKey)}const paramsSchema=z$1.object({serverUrl:z$1.string().optional(),location:z$1.string().optional(),rootBLockId:z$1.string().optional(),focusedBlockId:z$1.string().optional()}),useRouterParams=()=>{const o=useRoute(),e=useRouter();return computed({get:()=>{const a=paramsSchema.safeParse({serverUrl:o.params.serverUrl,location:o.params.location,rootBLockId:o.params.rootBLockId,focusedBlockId:o.params.focusedBlockId});if(!a.success)return;const{serverUrl:s,location:l,rootBLockId:c,focusedBlockId:d}=a.data;return{serverUrl:s?decodeURIComponent(s):void 0,location:l?decodeURIComponent(l):void 0,rootBLockId:c?decodeURIComponent(c):void 0,focusedBlockId:d?decodeURIComponent(d):void 0}},set:a=>{const s=paramsSchema.safeParse(a);if(!s.success){console.error("invalid router params",a);return}const{serverUrl:l,location:c,rootBLockId:d,focusedBlockId:u}=s.data;e.push({params:{serverUrl:l?encodeURIComponent(l):void 0,location:c?encodeURIComponent(c):void 0,rootBLockId:d?encodeURIComponent(d):void 0,focusedBlockId:u?encodeURIComponent(u):void 0}})}})},KbInfoContext=createContext(()=>{const o=ref({}),e=useRouterParams(),n=computed(()=>{const s=e.value?.location;return s==null?null:o.value[s]??null}),a=async(s,l,c)=>{const d=await getAllKbInfo({});if(!d.success){c?.(d);return}o.value=d.data.reduce((u,f)=>(u[f.location]={name:f.name,location:f.location},u),{}),l?.(d)};return watch(()=>e.value?.serverUrl,()=>{e.value?.serverUrl!=null&&a()},{immediate:!0}),{kbs:o,refreshKbList:a,currKbInfo:n}});const toKebabCase=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const Icon=({size:o,strokeWidth:e=2,absoluteStrokeWidth:n,color:a,iconNode:s,name:l,class:c,...d},{slots:u})=>h("svg",{...defaultAttributes,width:o||defaultAttributes.width,height:o||defaultAttributes.height,stroke:a||defaultAttributes.stroke,"stroke-width":n?Number(e)*24/Number(o):e,class:["lucide",`lucide-${toKebabCase(l??"icon")}`],...d},[...s.map(f=>h(...f)),...u.default?[u.default()]:[]]);const createLucideIcon=(o,e)=>(n,{slots:a})=>h(Icon,{...n,iconNode:e,name:o},a);const ArrowDownAZ=createLucideIcon("ArrowDownAZIcon",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);const ArrowDownFromLine=createLucideIcon("ArrowDownFromLineIcon",[["path",{d:"M19 3H5",key:"1236rx"}],["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m6 15 6 6 6-6",key:"h15q88"}]]);const ArrowLeft=createLucideIcon("ArrowLeftIcon",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const ArrowRightFromLine=createLucideIcon("ArrowRightFromLineIcon",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]]);const ArrowRight=createLucideIcon("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const ArrowUpAZ=createLucideIcon("ArrowUpAZIcon",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);const ArrowUpNarrowWide=createLucideIcon("ArrowUpNarrowWideIcon",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);const Bell=createLucideIcon("BellIcon",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const Blend=createLucideIcon("BlendIcon",[["circle",{cx:"9",cy:"9",r:"7",key:"p2h5vp"}],["circle",{cx:"15",cy:"15",r:"7",key:"19ennj"}]]);const Bookmark=createLucideIcon("BookmarkIcon",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);const CalendarArrowDown=createLucideIcon("CalendarArrowDownIcon",[["path",{d:"m14 18 4 4 4-4",key:"1waygx"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M18 14v8",key:"irew45"}],["path",{d:"M21 11.354V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7.343",key:"bse4f3"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]]);const CalendarArrowUp=createLucideIcon("CalendarArrowUpIcon",[["path",{d:"m14 18 4-4 4 4",key:"ftkppy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M18 22v-8",key:"su0gjh"}],["path",{d:"M21 11.343V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9",key:"1exg90"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]]);const CalendarDays=createLucideIcon("CalendarDaysIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);const Check=createLucideIcon("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const ChevronDown=createLucideIcon("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const ChevronLeft=createLucideIcon("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const ChevronRight=createLucideIcon("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const ChevronUp=createLucideIcon("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const CircleCheck=createLucideIcon("CircleCheckIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const CircleHelp=createLucideIcon("CircleHelpIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Circle=createLucideIcon("CircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Clipboard=createLucideIcon("ClipboardIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);const Command=createLucideIcon("CommandIcon",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);const Copy=createLucideIcon("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const Database=createLucideIcon("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Delete=createLucideIcon("DeleteIcon",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);const Diamond=createLucideIcon("DiamondIcon",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);const Dot=createLucideIcon("DotIcon",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);const Download=createLucideIcon("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const EllipsisVertical=createLucideIcon("EllipsisVerticalIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const Ellipsis=createLucideIcon("EllipsisIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);const Eye=createLucideIcon("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const FileScan=createLucideIcon("FileScanIcon",[["path",{d:"M20 10V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4",key:"1rdf37"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M16 14a2 2 0 0 0-2 2",key:"ceaadl"}],["path",{d:"M20 14a2 2 0 0 1 2 2",key:"1ny6zw"}],["path",{d:"M20 22a2 2 0 0 0 2-2",key:"1l9q4k"}],["path",{d:"M16 22a2 2 0 0 1-2-2",key:"1wqh5n"}]]);const File=createLucideIcon("FileIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const FlipHorizontal=createLucideIcon("FlipHorizontalIcon",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]);const Focus=createLucideIcon("FocusIcon",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);const FolderClosed=createLucideIcon("FolderClosedIcon",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]]);const FolderInput=createLucideIcon("FolderInputIcon",[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]]);const Folder=createLucideIcon("FolderIcon",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);const History=createLucideIcon("HistoryIcon",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const Image$1=createLucideIcon("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const Info=createLucideIcon("InfoIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Kanban=createLucideIcon("KanbanIcon",[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]]);const Keyboard=createLucideIcon("KeyboardIcon",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);const Link2=createLucideIcon("Link2Icon",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);const Link=createLucideIcon("LinkIcon",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const ListTree=createLucideIcon("ListTreeIcon",[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]]);const List=createLucideIcon("ListIcon",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);const LoaderCircle=createLucideIcon("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const LogOut=createLucideIcon("LogOutIcon",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const MessageSquareMore=createLucideIcon("MessageSquareMoreIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M16 10h.01",key:"1m94wz"}]]);const Moon=createLucideIcon("MoonIcon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const Paintbrush=createLucideIcon("PaintbrushIcon",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);const PanelLeft=createLucideIcon("PanelLeftIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);const PanelRight=createLucideIcon("PanelRightIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const PanelsTopLeft=createLucideIcon("PanelsTopLeftIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);const Pencil=createLucideIcon("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Plus=createLucideIcon("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const RefreshCcw=createLucideIcon("RefreshCcwIcon",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);const RefreshCw=createLucideIcon("RefreshCwIcon",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Search=createLucideIcon("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Settings$1=createLucideIcon("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const SlidersHorizontal=createLucideIcon("SlidersHorizontalIcon",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);const Sun=createLucideIcon("SunIcon",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Table=createLucideIcon("TableIcon",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);const Trash2=createLucideIcon("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Triangle=createLucideIcon("TriangleIcon",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]);const Upload=createLucideIcon("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const X=createLucideIcon("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const inBrowser=typeof window<"u",makeSymbol$1=(o,e=!1)=>e?Symbol.for(o):Symbol(o),generateFormatCacheKey=(o,e,n)=>friendlyJSONstringify({l:o,k:e,s:n}),friendlyJSONstringify=o=>JSON.stringify(o).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$1=o=>typeof o=="number"&&isFinite(o),isDate$1=o=>toTypeString(o)==="[object Date]",isRegExp$1=o=>toTypeString(o)==="[object RegExp]",isEmptyObject=o=>isPlainObject$1(o)&&Object.keys(o).length===0,assign=Object.assign,_create=Object.create,create$2=(o=null)=>_create(o);let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:create$2());function escapeHtml(o){return o.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$1=Object.prototype.hasOwnProperty;function hasOwn(o,e){return hasOwnProperty$1.call(o,e)}const isArray$1=Array.isArray,isFunction$1=o=>typeof o=="function",isString$1=o=>typeof o=="string",isBoolean$1=o=>typeof o=="boolean",isObject$1=o=>o!==null&&typeof o=="object",isPromise=o=>isObject$1(o)&&isFunction$1(o.then)&&isFunction$1(o.catch),objectToString=Object.prototype.toString,toTypeString=o=>objectToString.call(o),isPlainObject$1=o=>toTypeString(o)==="[object Object]",toDisplayString=o=>o==null?"":isArray$1(o)||isPlainObject$1(o)&&o.toString===objectToString?JSON.stringify(o,null,2):String(o);function join(o,e=""){return o.reduce((n,a,s)=>s===0?n+a:n+e+a,"")}function warn(o,e){typeof console<"u"&&(console.warn("[intlify] "+o),e&&console.warn(e.stack))}const isNotObjectOrIsArray=o=>!isObject$1(o)||isArray$1(o);function deepCopy(o,e){if(isNotObjectOrIsArray(o)||isNotObjectOrIsArray(e))throw new Error("Invalid value");const n=[{src:o,des:e}];for(;n.length;){const{src:a,des:s}=n.pop();Object.keys(a).forEach(l=>{l!=="__proto__"&&(isObject$1(a[l])&&!isObject$1(s[l])&&(s[l]=Array.isArray(a[l])?[]:create$2()),isNotObjectOrIsArray(s[l])||isNotObjectOrIsArray(a[l])?s[l]=a[l]:n.push({src:a[l],des:s[l]}))})}}function createPosition(o,e,n){return{line:o,column:e,offset:n}}function createLocation(o,e,n){return{start:o,end:e}}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16},COMPILE_ERROR_CODES_EXTEND_POINT=17;function createCompileError(o,e,n={}){const{domain:a,messages:s,args:l}=n,c=o,d=new SyntaxError(String(c));return d.code=o,e&&(d.location=e),d.domain=a,d}function defaultOnError(o){throw o}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS="\u2028",CHAR_PS="\u2029";function createScanner(o){const e=o;let n=0,a=1,s=1,l=0;const c=I=>e[I]===CHAR_CR&&e[I+1]===CHAR_LF,d=I=>e[I]===CHAR_LF,u=I=>e[I]===CHAR_PS,f=I=>e[I]===CHAR_LS,p=I=>c(I)||d(I)||u(I)||f(I),_=()=>n,b=()=>a,v=()=>s,k=()=>l,x=I=>c(I)||u(I)||f(I)?CHAR_LF:e[I],M=()=>x(n),E=()=>x(n+l);function L(){return l=0,p(n)&&(a++,s=0),c(n)&&n++,n++,s++,e[n]}function V(){return c(n+l)&&l++,l++,e[n+l]}function B(){n=0,a=1,s=1,l=0}function F(I=0){l=I}function j(){const I=n+l;for(;I!==n;)L();l=0}return{index:_,line:b,column:v,peekOffset:k,charAt:x,currentChar:M,currentPeek:E,next:L,peek:V,reset:B,resetPeek:F,skipToPeek:j}}const EOF=void 0,DOT=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(o,e={}){const n=e.location!==!1,a=createScanner(o),s=()=>a.index(),l=()=>createPosition(a.line(),a.column(),a.index()),c=l(),d=s(),u={currentType:13,offset:d,startLoc:c,endLoc:c,lastType:13,lastOffset:d,lastStartLoc:c,lastEndLoc:c,braceNest:0,inLinked:!1,text:""},f=()=>u,{onError:p}=e;function _(ee,re,Te,...Xe){const ht=f();if(re.column+=Te,re.offset+=Te,p){const ft=n?createLocation(ht.startLoc,re):null,Ce=createCompileError(ee,ft,{domain:ERROR_DOMAIN$3,args:Xe});p(Ce)}}function b(ee,re,Te){ee.endLoc=l(),ee.currentType=re;const Xe={type:re};return n&&(Xe.loc=createLocation(ee.startLoc,ee.endLoc)),Te!=null&&(Xe.value=Te),Xe}const v=ee=>b(ee,13);function k(ee,re){return ee.currentChar()===re?(ee.next(),re):(_(CompileErrorCodes.EXPECTED_TOKEN,l(),0,re),"")}function x(ee){let re="";for(;ee.currentPeek()===CHAR_SP||ee.currentPeek()===CHAR_LF;)re+=ee.currentPeek(),ee.peek();return re}function M(ee){const re=x(ee);return ee.skipToPeek(),re}function E(ee){if(ee===EOF)return!1;const re=ee.charCodeAt(0);return re>=97&&re<=122||re>=65&&re<=90||re===95}function L(ee){if(ee===EOF)return!1;const re=ee.charCodeAt(0);return re>=48&&re<=57}function V(ee,re){const{currentType:Te}=re;if(Te!==2)return!1;x(ee);const Xe=E(ee.currentPeek());return ee.resetPeek(),Xe}function B(ee,re){const{currentType:Te}=re;if(Te!==2)return!1;x(ee);const Xe=ee.currentPeek()==="-"?ee.peek():ee.currentPeek(),ht=L(Xe);return ee.resetPeek(),ht}function F(ee,re){const{currentType:Te}=re;if(Te!==2)return!1;x(ee);const Xe=ee.currentPeek()===LITERAL_DELIMITER;return ee.resetPeek(),Xe}function j(ee,re){const{currentType:Te}=re;if(Te!==7)return!1;x(ee);const Xe=ee.currentPeek()===".";return ee.resetPeek(),Xe}function I(ee,re){const{currentType:Te}=re;if(Te!==8)return!1;x(ee);const Xe=E(ee.currentPeek());return ee.resetPeek(),Xe}function U(ee,re){const{currentType:Te}=re;if(!(Te===7||Te===11))return!1;x(ee);const Xe=ee.currentPeek()===":";return ee.resetPeek(),Xe}function W(ee,re){const{currentType:Te}=re;if(Te!==9)return!1;const Xe=()=>{const ft=ee.currentPeek();return ft==="{"?E(ee.peek()):ft==="@"||ft==="|"||ft===":"||ft==="."||ft===CHAR_SP||!ft?!1:ft===CHAR_LF?(ee.peek(),Xe()):G(ee,!1)},ht=Xe();return ee.resetPeek(),ht}function K(ee){x(ee);const re=ee.currentPeek()==="|";return ee.resetPeek(),re}function G(ee,re=!0){const Te=(ht=!1,ft="")=>{const Ce=ee.currentPeek();return Ce==="{"||Ce==="@"||!Ce?ht:Ce==="|"?!(ft===CHAR_SP||ft===CHAR_LF):Ce===CHAR_SP?(ee.peek(),Te(!0,CHAR_SP)):Ce===CHAR_LF?(ee.peek(),Te(!0,CHAR_LF)):!0},Xe=Te();return re&&ee.resetPeek(),Xe}function Z(ee,re){const Te=ee.currentChar();return Te===EOF?EOF:re(Te)?(ee.next(),Te):null}function oe(ee){const re=ee.charCodeAt(0);return re>=97&&re<=122||re>=65&&re<=90||re>=48&&re<=57||re===95||re===36}function Y(ee){return Z(ee,oe)}function se(ee){const re=ee.charCodeAt(0);return re>=97&&re<=122||re>=65&&re<=90||re>=48&&re<=57||re===95||re===36||re===45}function le(ee){return Z(ee,se)}function ce(ee){const re=ee.charCodeAt(0);return re>=48&&re<=57}function de(ee){return Z(ee,ce)}function ge(ee){const re=ee.charCodeAt(0);return re>=48&&re<=57||re>=65&&re<=70||re>=97&&re<=102}function qe(ee){return Z(ee,ge)}function ke(ee){let re="",Te="";for(;re=de(ee);)Te+=re;return Te}function Ee(ee){let re="";for(;;){const Te=ee.currentChar();if(Te==="{"||Te==="}"||Te==="@"||Te==="|"||!Te)break;if(Te===CHAR_SP||Te===CHAR_LF)if(G(ee))re+=Te,ee.next();else{if(K(ee))break;re+=Te,ee.next()}else re+=Te,ee.next()}return re}function Oe(ee){M(ee);let re="",Te="";for(;re=le(ee);)Te+=re;return ee.currentChar()===EOF&&_(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),Te}function Ve(ee){M(ee);let re="";return ee.currentChar()==="-"?(ee.next(),re+=`-${ke(ee)}`):re+=ke(ee),ee.currentChar()===EOF&&_(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),re}function Ne(ee){return ee!==LITERAL_DELIMITER&&ee!==CHAR_LF}function dt(ee){M(ee),k(ee,"'");let re="",Te="";for(;re=Z(ee,Ne);)re==="\\"?Te+=pe(ee):Te+=re;const Xe=ee.currentChar();return Xe===CHAR_LF||Xe===EOF?(_(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,l(),0),Xe===CHAR_LF&&(ee.next(),k(ee,"'")),Te):(k(ee,"'"),Te)}function pe(ee){const re=ee.currentChar();switch(re){case"\\":case"'":return ee.next(),`\\${re}`;case"u":return fe(ee,re,4);case"U":return fe(ee,re,6);default:return _(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,l(),0,re),""}}function fe(ee,re,Te){k(ee,re);let Xe="";for(let ht=0;ht<Te;ht++){const ft=qe(ee);if(!ft){_(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,l(),0,`\\${re}${Xe}${ee.currentChar()}`);break}Xe+=ft}return`\\${re}${Xe}`}function me(ee){return ee!=="{"&&ee!=="}"&&ee!==CHAR_SP&&ee!==CHAR_LF}function te(ee){M(ee);let re="",Te="";for(;re=Z(ee,me);)Te+=re;return Te}function ue(ee){let re="",Te="";for(;re=Y(ee);)Te+=re;return Te}function we(ee){const re=Te=>{const Xe=ee.currentChar();return Xe==="{"||Xe==="@"||Xe==="|"||Xe==="("||Xe===")"||!Xe||Xe===CHAR_SP?Te:(Te+=Xe,ee.next(),re(Te))};return re("")}function _e(ee){M(ee);const re=k(ee,"|");return M(ee),re}function Be(ee,re){let Te=null;switch(ee.currentChar()){case"{":return re.braceNest>=1&&_(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,l(),0),ee.next(),Te=b(re,2,"{"),M(ee),re.braceNest++,Te;case"}":return re.braceNest>0&&re.currentType===2&&_(CompileErrorCodes.EMPTY_PLACEHOLDER,l(),0),ee.next(),Te=b(re,3,"}"),re.braceNest--,re.braceNest>0&&M(ee),re.inLinked&&re.braceNest===0&&(re.inLinked=!1),Te;case"@":return re.braceNest>0&&_(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),Te=Ge(ee,re)||v(re),re.braceNest=0,Te;default:{let ht=!0,ft=!0,Ce=!0;if(K(ee))return re.braceNest>0&&_(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),Te=b(re,1,_e(ee)),re.braceNest=0,re.inLinked=!1,Te;if(re.braceNest>0&&(re.currentType===4||re.currentType===5||re.currentType===6))return _(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),re.braceNest=0,ze(ee,re);if(ht=V(ee,re))return Te=b(re,4,Oe(ee)),M(ee),Te;if(ft=B(ee,re))return Te=b(re,5,Ve(ee)),M(ee),Te;if(Ce=F(ee,re))return Te=b(re,6,dt(ee)),M(ee),Te;if(!ht&&!ft&&!Ce)return Te=b(re,12,te(ee)),_(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,l(),0,Te.value),M(ee),Te;break}}return Te}function Ge(ee,re){const{currentType:Te}=re;let Xe=null;const ht=ee.currentChar();switch((Te===7||Te===8||Te===11||Te===9)&&(ht===CHAR_LF||ht===CHAR_SP)&&_(CompileErrorCodes.INVALID_LINKED_FORMAT,l(),0),ht){case"@":return ee.next(),Xe=b(re,7,"@"),re.inLinked=!0,Xe;case".":return M(ee),ee.next(),b(re,8,".");case":":return M(ee),ee.next(),b(re,9,":");default:return K(ee)?(Xe=b(re,1,_e(ee)),re.braceNest=0,re.inLinked=!1,Xe):j(ee,re)||U(ee,re)?(M(ee),Ge(ee,re)):I(ee,re)?(M(ee),b(re,11,ue(ee))):W(ee,re)?(M(ee),ht==="{"?Be(ee,re)||Xe:b(re,10,we(ee))):(Te===7&&_(CompileErrorCodes.INVALID_LINKED_FORMAT,l(),0),re.braceNest=0,re.inLinked=!1,ze(ee,re))}}function ze(ee,re){let Te={type:13};if(re.braceNest>0)return Be(ee,re)||v(re);if(re.inLinked)return Ge(ee,re)||v(re);switch(ee.currentChar()){case"{":return Be(ee,re)||v(re);case"}":return _(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,l(),0),ee.next(),b(re,3,"}");case"@":return Ge(ee,re)||v(re);default:{if(K(ee))return Te=b(re,1,_e(ee)),re.braceNest=0,re.inLinked=!1,Te;if(G(ee))return b(re,0,Ee(ee));break}}return Te}function We(){const{currentType:ee,offset:re,startLoc:Te,endLoc:Xe}=u;return u.lastType=ee,u.lastOffset=re,u.lastStartLoc=Te,u.lastEndLoc=Xe,u.offset=s(),u.startLoc=l(),a.currentChar()===EOF?b(u,13):ze(a,u)}return{nextToken:We,currentOffset:s,currentPosition:l,context:f}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(o,e,n){switch(o){case"\\\\":return"\\";case"\\'":return"'";default:{const a=parseInt(e||n,16);return a<=55295||a>=57344?String.fromCodePoint(a):"�"}}}function createParser(o={}){const e=o.location!==!1,{onError:n}=o;function a(E,L,V,B,...F){const j=E.currentPosition();if(j.offset+=B,j.column+=B,n){const I=e?createLocation(V,j):null,U=createCompileError(L,I,{domain:ERROR_DOMAIN$2,args:F});n(U)}}function s(E,L,V){const B={type:E};return e&&(B.start=L,B.end=L,B.loc={start:V,end:V}),B}function l(E,L,V,B){e&&(E.end=L,E.loc&&(E.loc.end=V))}function c(E,L){const V=E.context(),B=s(3,V.offset,V.startLoc);return B.value=L,l(B,E.currentOffset(),E.currentPosition()),B}function d(E,L){const V=E.context(),{lastOffset:B,lastStartLoc:F}=V,j=s(5,B,F);return j.index=parseInt(L,10),E.nextToken(),l(j,E.currentOffset(),E.currentPosition()),j}function u(E,L){const V=E.context(),{lastOffset:B,lastStartLoc:F}=V,j=s(4,B,F);return j.key=L,E.nextToken(),l(j,E.currentOffset(),E.currentPosition()),j}function f(E,L){const V=E.context(),{lastOffset:B,lastStartLoc:F}=V,j=s(9,B,F);return j.value=L.replace(KNOWN_ESCAPES,fromEscapeSequence),E.nextToken(),l(j,E.currentOffset(),E.currentPosition()),j}function p(E){const L=E.nextToken(),V=E.context(),{lastOffset:B,lastStartLoc:F}=V,j=s(8,B,F);return L.type!==11?(a(E,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,V.lastStartLoc,0),j.value="",l(j,B,F),{nextConsumeToken:L,node:j}):(L.value==null&&a(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,V.lastStartLoc,0,getTokenCaption(L)),j.value=L.value||"",l(j,E.currentOffset(),E.currentPosition()),{node:j})}function _(E,L){const V=E.context(),B=s(7,V.offset,V.startLoc);return B.value=L,l(B,E.currentOffset(),E.currentPosition()),B}function b(E){const L=E.context(),V=s(6,L.offset,L.startLoc);let B=E.nextToken();if(B.type===8){const F=p(E);V.modifier=F.node,B=F.nextConsumeToken||E.nextToken()}switch(B.type!==9&&a(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,getTokenCaption(B)),B=E.nextToken(),B.type===2&&(B=E.nextToken()),B.type){case 10:B.value==null&&a(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,getTokenCaption(B)),V.key=_(E,B.value||"");break;case 4:B.value==null&&a(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,getTokenCaption(B)),V.key=u(E,B.value||"");break;case 5:B.value==null&&a(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,getTokenCaption(B)),V.key=d(E,B.value||"");break;case 6:B.value==null&&a(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,getTokenCaption(B)),V.key=f(E,B.value||"");break;default:{a(E,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,L.lastStartLoc,0);const F=E.context(),j=s(7,F.offset,F.startLoc);return j.value="",l(j,F.offset,F.startLoc),V.key=j,l(V,F.offset,F.startLoc),{nextConsumeToken:B,node:V}}}return l(V,E.currentOffset(),E.currentPosition()),{node:V}}function v(E){const L=E.context(),V=L.currentType===1?E.currentOffset():L.offset,B=L.currentType===1?L.endLoc:L.startLoc,F=s(2,V,B);F.items=[];let j=null;do{const W=j||E.nextToken();switch(j=null,W.type){case 0:W.value==null&&a(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,getTokenCaption(W)),F.items.push(c(E,W.value||""));break;case 5:W.value==null&&a(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,getTokenCaption(W)),F.items.push(d(E,W.value||""));break;case 4:W.value==null&&a(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,getTokenCaption(W)),F.items.push(u(E,W.value||""));break;case 6:W.value==null&&a(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,getTokenCaption(W)),F.items.push(f(E,W.value||""));break;case 7:{const K=b(E);F.items.push(K.node),j=K.nextConsumeToken||null;break}}}while(L.currentType!==13&&L.currentType!==1);const I=L.currentType===1?L.lastOffset:E.currentOffset(),U=L.currentType===1?L.lastEndLoc:E.currentPosition();return l(F,I,U),F}function k(E,L,V,B){const F=E.context();let j=B.items.length===0;const I=s(1,L,V);I.cases=[],I.cases.push(B);do{const U=v(E);j||(j=U.items.length===0),I.cases.push(U)}while(F.currentType!==13);return j&&a(E,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,V,0),l(I,E.currentOffset(),E.currentPosition()),I}function x(E){const L=E.context(),{offset:V,startLoc:B}=L,F=v(E);return L.currentType===13?F:k(E,V,B,F)}function M(E){const L=createTokenizer(E,assign({},o)),V=L.context(),B=s(0,V.offset,V.startLoc);return e&&B.loc&&(B.loc.source=E),B.body=x(L),o.onCacheKey&&(B.cacheKey=o.onCacheKey(E)),V.currentType!==13&&a(L,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,V.lastStartLoc,0,E[V.offset]||""),l(B,L.currentOffset(),L.currentPosition()),B}return{parse:M}}function getTokenCaption(o){if(o.type===13)return"EOF";const e=(o.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function createTransformer(o,e={}){const n={ast:o,helpers:new Set};return{context:()=>n,helper:l=>(n.helpers.add(l),l)}}function traverseNodes(o,e){for(let n=0;n<o.length;n++)traverseNode(o[n],e)}function traverseNode(o,e){switch(o.type){case 1:traverseNodes(o.cases,e),e.helper("plural");break;case 2:traverseNodes(o.items,e);break;case 6:{traverseNode(o.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function transform(o,e={}){const n=createTransformer(o);n.helper("normalize"),o.body&&traverseNode(o.body,n);const a=n.context();o.helpers=Array.from(a.helpers)}function optimize(o){const e=o.body;return e.type===2?optimizeMessageNode(e):e.cases.forEach(n=>optimizeMessageNode(n)),o}function optimizeMessageNode(o){if(o.items.length===1){const e=o.items[0];(e.type===3||e.type===9)&&(o.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<o.items.length;n++){const a=o.items[n];if(!(a.type===3||a.type===9)||a.value==null)break;e.push(a.value)}if(e.length===o.items.length){o.static=join(e);for(let n=0;n<o.items.length;n++){const a=o.items[n];(a.type===3||a.type===9)&&delete a.value}}}}function minify(o){switch(o.t=o.type,o.type){case 0:{const e=o;minify(e.body),e.b=e.body,delete e.body;break}case 1:{const e=o,n=e.cases;for(let a=0;a<n.length;a++)minify(n[a]);e.c=n,delete e.cases;break}case 2:{const e=o,n=e.items;for(let a=0;a<n.length;a++)minify(n[a]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=o;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=o;minify(e.key),e.k=e.key,delete e.key,e.modifier&&(minify(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=o;e.i=e.index,delete e.index;break}case 4:{const e=o;e.k=e.key,delete e.key;break}}delete o.type}function createCodeGenerator(o,e){const{sourceMap:n,filename:a,breakLineCode:s,needIndent:l}=e,c=e.location!==!1,d={filename:a,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:l,indentLevel:0};c&&o.loc&&(d.source=o.loc.source);const u=()=>d;function f(M,E){d.code+=M}function p(M,E=!0){const L=E?s:"";f(l?L+"  ".repeat(M):L)}function _(M=!0){const E=++d.indentLevel;M&&p(E)}function b(M=!0){const E=--d.indentLevel;M&&p(E)}function v(){p(d.indentLevel)}return{context:u,push:f,indent:_,deindent:b,newline:v,helper:M=>`_${M}`,needIndent:()=>d.needIndent}}function generateLinkedNode(o,e){const{helper:n}=o;o.push(`${n("linked")}(`),generateNode(o,e.key),e.modifier?(o.push(", "),generateNode(o,e.modifier),o.push(", _type")):o.push(", undefined, _type"),o.push(")")}function generateMessageNode(o,e){const{helper:n,needIndent:a}=o;o.push(`${n("normalize")}([`),o.indent(a());const s=e.items.length;for(let l=0;l<s&&(generateNode(o,e.items[l]),l!==s-1);l++)o.push(", ");o.deindent(a()),o.push("])")}function generatePluralNode(o,e){const{helper:n,needIndent:a}=o;if(e.cases.length>1){o.push(`${n("plural")}([`),o.indent(a());const s=e.cases.length;for(let l=0;l<s&&(generateNode(o,e.cases[l]),l!==s-1);l++)o.push(", ");o.deindent(a()),o.push("])")}}function generateResource(o,e){e.body?generateNode(o,e.body):o.push("null")}function generateNode(o,e){const{helper:n}=o;switch(e.type){case 0:generateResource(o,e);break;case 1:generatePluralNode(o,e);break;case 2:generateMessageNode(o,e);break;case 6:generateLinkedNode(o,e);break;case 8:o.push(JSON.stringify(e.value),e);break;case 7:o.push(JSON.stringify(e.value),e);break;case 5:o.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:o.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:o.push(JSON.stringify(e.value),e);break;case 3:o.push(JSON.stringify(e.value),e);break}}const generate=(o,e={})=>{const n=isString$1(e.mode)?e.mode:"normal",a=isString$1(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,l=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,c=e.needIndent?e.needIndent:n!=="arrow",d=o.helpers||[],u=createCodeGenerator(o,{mode:n,filename:a,sourceMap:s,breakLineCode:l,needIndent:c});u.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),u.indent(c),d.length>0&&(u.push(`const { ${join(d.map(_=>`${_}: _${_}`),", ")} } = ctx`),u.newline()),u.push("return "),generateNode(u,o),u.deindent(c),u.push("}"),delete o.helpers;const{code:f,map:p}=u.context();return{ast:o,code:f,map:p?p.toJSON():void 0}};function baseCompile$1(o,e={}){const n=assign({},e),a=!!n.jit,s=!!n.minify,l=n.optimize==null?!0:n.optimize,d=createParser(n).parse(o);return a?(l&&optimize(d),s&&minify(d),{ast:d,code:""}):(transform(d,n),generate(d,n))}function initFeatureFlags$1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function format(o){return n=>formatParts(n,o)}function formatParts(o,e){const n=resolveBody(e);if(n==null)throw createUnhandleNodeError(0);if(resolveType(n)===1){const l=resolveCases(n);return o.plural(l.reduce((c,d)=>[...c,formatMessageParts(o,d)],[]))}else return formatMessageParts(o,n)}const PROPS_BODY=["b","body"];function resolveBody(o){return resolveProps(o,PROPS_BODY)}const PROPS_CASES=["c","cases"];function resolveCases(o){return resolveProps(o,PROPS_CASES,[])}function formatMessageParts(o,e){const n=resolveStatic(e);if(n!=null)return o.type==="text"?n:o.normalize([n]);{const a=resolveItems(e).reduce((s,l)=>[...s,formatMessagePart(o,l)],[]);return o.normalize(a)}}const PROPS_STATIC=["s","static"];function resolveStatic(o){return resolveProps(o,PROPS_STATIC)}const PROPS_ITEMS=["i","items"];function resolveItems(o){return resolveProps(o,PROPS_ITEMS,[])}function formatMessagePart(o,e){const n=resolveType(e);switch(n){case 3:return resolveValue$1(e,n);case 9:return resolveValue$1(e,n);case 4:{const a=e;if(hasOwn(a,"k")&&a.k)return o.interpolate(o.named(a.k));if(hasOwn(a,"key")&&a.key)return o.interpolate(o.named(a.key));throw createUnhandleNodeError(n)}case 5:{const a=e;if(hasOwn(a,"i")&&isNumber$1(a.i))return o.interpolate(o.list(a.i));if(hasOwn(a,"index")&&isNumber$1(a.index))return o.interpolate(o.list(a.index));throw createUnhandleNodeError(n)}case 6:{const a=e,s=resolveLinkedModifier(a),l=resolveLinkedKey(a);return o.linked(formatMessagePart(o,l),s?formatMessagePart(o,s):void 0,o.type)}case 7:return resolveValue$1(e,n);case 8:return resolveValue$1(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const PROPS_TYPE=["t","type"];function resolveType(o){return resolveProps(o,PROPS_TYPE)}const PROPS_VALUE=["v","value"];function resolveValue$1(o,e){const n=resolveProps(o,PROPS_VALUE);if(n)return n;throw createUnhandleNodeError(e)}const PROPS_MODIFIER=["m","modifier"];function resolveLinkedModifier(o){return resolveProps(o,PROPS_MODIFIER)}const PROPS_KEY=["k","key"];function resolveLinkedKey(o){const e=resolveProps(o,PROPS_KEY);if(e)return e;throw createUnhandleNodeError(6)}function resolveProps(o,e,n){for(let a=0;a<e.length;a++){const s=e[a];if(hasOwn(o,s)&&o[s]!=null)return o[s]}return n}function createUnhandleNodeError(o){return new Error(`unhandled node type: ${o}`)}const defaultOnCacheKey=o=>o;let compileCache=create$2();function isMessageAST(o){return isObject$1(o)&&resolveType(o)===0&&(hasOwn(o,"b")||hasOwn(o,"body"))}function baseCompile(o,e={}){let n=!1;const a=e.onError||defaultOnError;return e.onError=s=>{n=!0,a(s)},{...baseCompile$1(o,e),detectError:n}}function compile(o,e){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&isString$1(o)){isBoolean$1(e.warnHtmlMessage)&&e.warnHtmlMessage;const a=(e.onCacheKey||defaultOnCacheKey)(o),s=compileCache[a];if(s)return s;const{ast:l,detectError:c}=baseCompile(o,{...e,location:!1,jit:!0}),d=format(l);return c?d:compileCache[a]=d}else{const n=o.cacheKey;if(n){const a=compileCache[n];return a||(compileCache[n]=format(o))}else return format(o)}}let devtools=null;function setDevToolsHook(o){devtools=o}function initI18nDevTools(o,e,n){devtools&&devtools.emit("i18n:init",{timestamp:Date.now(),i18n:o,version:e,meta:n})}const translateDevTools=createDevToolsHook("function:translate");function createDevToolsHook(o){return e=>devtools&&devtools.emit(o,e)}const CoreErrorCodes={INVALID_ARGUMENT:COMPILE_ERROR_CODES_EXTEND_POINT,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_NON_STRING_MESSAGE:20,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},CORE_ERROR_CODES_EXTEND_POINT=24;function createCoreError(o){return createCompileError(o,null,void 0)}function getLocale(o,e){return e.locale!=null?resolveLocale(e.locale):resolveLocale(o.locale)}let _resolveLocale;function resolveLocale(o){if(isString$1(o))return o;if(isFunction$1(o)){if(o.resolvedOnce&&_resolveLocale!=null)return _resolveLocale;if(o.constructor.name==="Function"){const e=o();if(isPromise(e))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return _resolveLocale=e}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_TYPE)}function fallbackWithSimple(o,e,n){return[...new Set([n,...isArray$1(e)?e:isObject$1(e)?Object.keys(e):isString$1(e)?[e]:[n]])]}function fallbackWithLocaleChain(o,e,n){const a=isString$1(n)?n:DEFAULT_LOCALE,s=o;s.__localeChainCache||(s.__localeChainCache=new Map);let l=s.__localeChainCache.get(a);if(!l){l=[];let c=[n];for(;isArray$1(c);)c=appendBlockToChain(l,c,e);const d=isArray$1(e)||!isPlainObject$1(e)?e:e.default?e.default:null;c=isString$1(d)?[d]:d,isArray$1(c)&&appendBlockToChain(l,c,!1),s.__localeChainCache.set(a,l)}return l}function appendBlockToChain(o,e,n){let a=!0;for(let s=0;s<e.length&&isBoolean$1(a);s++){const l=e[s];isString$1(l)&&(a=appendLocaleToChain(o,e[s],n))}return a}function appendLocaleToChain(o,e,n){let a;const s=e.split("-");do{const l=s.join("-");a=appendItemToChain(o,l,n),s.splice(-1,1)}while(s.length&&a===!0);return a}function appendItemToChain(o,e,n){let a=!1;if(!o.includes(e)&&(a=!0,e)){a=e[e.length-1]!=="!";const s=e.replace(/!/g,"");o.push(s),(isArray$1(n)||isPlainObject$1(n))&&n[s]&&(a=n[s])}return a}const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]};pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]};pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]};pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]};pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(o){return literalValueRE.test(o)}function stripQuotes(o){const e=o.charCodeAt(0),n=o.charCodeAt(o.length-1);return e===n&&(e===34||e===39)?o.slice(1,-1):o}function getPathCharType(o){if(o==null)return"o";switch(o.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return o;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(o){const e=o.trim();return o.charAt(0)==="0"&&isNaN(parseInt(o))?!1:isLiteral(e)?stripQuotes(e):"*"+e}function parse(o){const e=[];let n=-1,a=0,s=0,l,c,d,u,f,p,_;const b=[];b[0]=()=>{c===void 0?c=d:c+=d},b[1]=()=>{c!==void 0&&(e.push(c),c=void 0)},b[2]=()=>{b[0](),s++},b[3]=()=>{if(s>0)s--,a=4,b[0]();else{if(s=0,c===void 0||(c=formatSubPath(c),c===!1))return!1;b[1]()}};function v(){const k=o[n+1];if(a===5&&k==="'"||a===6&&k==='"')return n++,d="\\"+k,b[0](),!0}for(;a!==null;)if(n++,l=o[n],!(l==="\\"&&v())){if(u=getPathCharType(l),_=pathStateMachine[a],f=_[u]||_.l||8,f===8||(a=f[0],f[1]!==void 0&&(p=b[f[1]],p&&(d=l,p()===!1))))return;if(a===7)return e}}const cache=new Map;function resolveWithKeyValue(o,e){return isObject$1(o)?o[e]:null}function resolveValue(o,e){if(!isObject$1(o))return null;let n=cache.get(e);if(n||(n=parse(e),n&&cache.set(e,n)),!n)return null;const a=n.length;let s=o,l=0;for(;l<a;){const c=s[n[l]];if(c===void 0||isFunction$1(s))return null;s=c,l++}return s}const VERSION$2="10.0.5",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=o=>`${o.charAt(0).toLocaleUpperCase()}${o.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(o,e)=>e==="text"&&isString$1(o)?o.toUpperCase():e==="vnode"&&isObject$1(o)&&"__v_isVNode"in o?o.children.toUpperCase():o,lower:(o,e)=>e==="text"&&isString$1(o)?o.toLowerCase():e==="vnode"&&isObject$1(o)&&"__v_isVNode"in o?o.children.toLowerCase():o,capitalize:(o,e)=>e==="text"&&isString$1(o)?capitalize(o):e==="vnode"&&isObject$1(o)&&"__v_isVNode"in o?capitalize(o.children):o}}let _compiler;function registerMessageCompiler(o){_compiler=o}let _resolver;function registerMessageResolver(o){_resolver=o}let _fallbacker;function registerLocaleFallbacker(o){_fallbacker=o}let _additionalMeta=null;const setAdditionalMeta=o=>{_additionalMeta=o},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=o=>{_fallbackContext=o},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(o={}){const e=isFunction$1(o.onWarn)?o.onWarn:warn,n=isString$1(o.version)?o.version:VERSION$2,a=isString$1(o.locale)||isFunction$1(o.locale)?o.locale:DEFAULT_LOCALE,s=isFunction$1(a)?DEFAULT_LOCALE:a,l=isArray$1(o.fallbackLocale)||isPlainObject$1(o.fallbackLocale)||isString$1(o.fallbackLocale)||o.fallbackLocale===!1?o.fallbackLocale:s,c=isPlainObject$1(o.messages)?o.messages:createResources(s),d=isPlainObject$1(o.datetimeFormats)?o.datetimeFormats:createResources(s),u=isPlainObject$1(o.numberFormats)?o.numberFormats:createResources(s),f=assign(create$2(),o.modifiers,getDefaultLinkedModifiers()),p=o.pluralRules||create$2(),_=isFunction$1(o.missing)?o.missing:null,b=isBoolean$1(o.missingWarn)||isRegExp$1(o.missingWarn)?o.missingWarn:!0,v=isBoolean$1(o.fallbackWarn)||isRegExp$1(o.fallbackWarn)?o.fallbackWarn:!0,k=!!o.fallbackFormat,x=!!o.unresolving,M=isFunction$1(o.postTranslation)?o.postTranslation:null,E=isPlainObject$1(o.processor)?o.processor:null,L=isBoolean$1(o.warnHtmlMessage)?o.warnHtmlMessage:!0,V=!!o.escapeParameter,B=isFunction$1(o.messageCompiler)?o.messageCompiler:_compiler,F=isFunction$1(o.messageResolver)?o.messageResolver:_resolver||resolveWithKeyValue,j=isFunction$1(o.localeFallbacker)?o.localeFallbacker:_fallbacker||fallbackWithSimple,I=isObject$1(o.fallbackContext)?o.fallbackContext:void 0,U=o,W=isObject$1(U.__datetimeFormatters)?U.__datetimeFormatters:new Map,K=isObject$1(U.__numberFormatters)?U.__numberFormatters:new Map,G=isObject$1(U.__meta)?U.__meta:{};_cid++;const Z={version:n,cid:_cid,locale:a,fallbackLocale:l,messages:c,modifiers:f,pluralRules:p,missing:_,missingWarn:b,fallbackWarn:v,fallbackFormat:k,unresolving:x,postTranslation:M,processor:E,warnHtmlMessage:L,escapeParameter:V,messageCompiler:B,messageResolver:F,localeFallbacker:j,fallbackContext:I,onWarn:e,__meta:G};return Z.datetimeFormats=d,Z.numberFormats=u,Z.__datetimeFormatters=W,Z.__numberFormatters=K,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(Z,n,G),Z}const createResources=o=>({[o]:create$2()});function handleMissing(o,e,n,a,s){const{missing:l,onWarn:c}=o;if(l!==null){const d=l(o,n,e,s);return isString$1(d)?d:e}else return e}function updateFallbackLocale(o,e,n){const a=o;a.__localeChainCache=new Map,o.localeFallbacker(o,n,e)}function isAlmostSameLocale(o,e){return o===e?!1:o.split("-")[0]===e.split("-")[0]}function isImplicitFallback(o,e){const n=e.indexOf(o);if(n===-1)return!1;for(let a=n+1;a<e.length;a++)if(isAlmostSameLocale(o,e[a]))return!0;return!1}function datetime(o,...e){const{datetimeFormats:n,unresolving:a,fallbackLocale:s,onWarn:l,localeFallbacker:c}=o,{__datetimeFormatters:d}=o,[u,f,p,_]=parseDateTimeArgs(...e),b=isBoolean$1(p.missingWarn)?p.missingWarn:o.missingWarn;isBoolean$1(p.fallbackWarn)?p.fallbackWarn:o.fallbackWarn;const v=!!p.part,k=getLocale(o,p),x=c(o,s,k);if(!isString$1(u)||u==="")return new Intl.DateTimeFormat(k,_).format(f);let M={},E,L=null;const V="datetime format";for(let j=0;j<x.length&&(E=x[j],M=n[E]||{},L=M[u],!isPlainObject$1(L));j++)handleMissing(o,u,E,b,V);if(!isPlainObject$1(L)||!isString$1(E))return a?NOT_REOSLVED:u;let B=`${E}__${u}`;isEmptyObject(_)||(B=`${B}__${JSON.stringify(_)}`);let F=d.get(B);return F||(F=new Intl.DateTimeFormat(E,assign({},L,_)),d.set(B,F)),v?F.formatToParts(f):F.format(f)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...o){const[e,n,a,s]=o,l=create$2();let c=create$2(),d;if(isString$1(e)){const u=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const f=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();d=new Date(f);try{d.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate$1(e)){if(isNaN(e.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);d=e}else if(isNumber$1(e))d=e;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$1(n)?l.key=n:isPlainObject$1(n)&&Object.keys(n).forEach(u=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(u)?c[u]=n[u]:l[u]=n[u]}),isString$1(a)?l.locale=a:isPlainObject$1(a)&&(c=a),isPlainObject$1(s)&&(c=s),[l.key||"",d,l,c]}function clearDateTimeFormat(o,e,n){const a=o;for(const s in n){const l=`${e}__${s}`;a.__datetimeFormatters.has(l)&&a.__datetimeFormatters.delete(l)}}function number$1(o,...e){const{numberFormats:n,unresolving:a,fallbackLocale:s,onWarn:l,localeFallbacker:c}=o,{__numberFormatters:d}=o,[u,f,p,_]=parseNumberArgs(...e),b=isBoolean$1(p.missingWarn)?p.missingWarn:o.missingWarn;isBoolean$1(p.fallbackWarn)?p.fallbackWarn:o.fallbackWarn;const v=!!p.part,k=getLocale(o,p),x=c(o,s,k);if(!isString$1(u)||u==="")return new Intl.NumberFormat(k,_).format(f);let M={},E,L=null;const V="number format";for(let j=0;j<x.length&&(E=x[j],M=n[E]||{},L=M[u],!isPlainObject$1(L));j++)handleMissing(o,u,E,b,V);if(!isPlainObject$1(L)||!isString$1(E))return a?NOT_REOSLVED:u;let B=`${E}__${u}`;isEmptyObject(_)||(B=`${B}__${JSON.stringify(_)}`);let F=d.get(B);return F||(F=new Intl.NumberFormat(E,assign({},L,_)),d.set(B,F)),v?F.formatToParts(f):F.format(f)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...o){const[e,n,a,s]=o,l=create$2();let c=create$2();if(!isNumber$1(e))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const d=e;return isString$1(n)?l.key=n:isPlainObject$1(n)&&Object.keys(n).forEach(u=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(u)?c[u]=n[u]:l[u]=n[u]}),isString$1(a)?l.locale=a:isPlainObject$1(a)&&(c=a),isPlainObject$1(s)&&(c=s),[l.key||"",d,l,c]}function clearNumberFormat(o,e,n){const a=o;for(const s in n){const l=`${e}__${s}`;a.__numberFormatters.has(l)&&a.__numberFormatters.delete(l)}}const DEFAULT_MODIFIER=o=>o,DEFAULT_MESSAGE=o=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=o=>o.length===0?"":join(o),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(o,e){return o=Math.abs(o),e===2?o?o>1?1:0:1:o?Math.min(o,2):0}function getPluralIndex(o){const e=isNumber$1(o.pluralIndex)?o.pluralIndex:-1;return o.named&&(isNumber$1(o.named.count)||isNumber$1(o.named.n))?isNumber$1(o.named.count)?o.named.count:isNumber$1(o.named.n)?o.named.n:e:e}function normalizeNamed(o,e){e.count||(e.count=o),e.n||(e.n=o)}function createMessageContext(o={}){const e=o.locale,n=getPluralIndex(o),a=isObject$1(o.pluralRules)&&isString$1(e)&&isFunction$1(o.pluralRules[e])?o.pluralRules[e]:pluralDefault,s=isObject$1(o.pluralRules)&&isString$1(e)&&isFunction$1(o.pluralRules[e])?pluralDefault:void 0,l=E=>E[a(n,E.length,s)],c=o.list||[],d=E=>c[E],u=o.named||create$2();isNumber$1(o.pluralIndex)&&normalizeNamed(n,u);const f=E=>u[E];function p(E,L){const V=isFunction$1(o.messages)?o.messages(E,!!L):isObject$1(o.messages)?o.messages[E]:!1;return V||(o.parent?o.parent.message(E):DEFAULT_MESSAGE)}const _=E=>o.modifiers?o.modifiers[E]:DEFAULT_MODIFIER,b=isPlainObject$1(o.processor)&&isFunction$1(o.processor.normalize)?o.processor.normalize:DEFAULT_NORMALIZE,v=isPlainObject$1(o.processor)&&isFunction$1(o.processor.interpolate)?o.processor.interpolate:DEFAULT_INTERPOLATE,k=isPlainObject$1(o.processor)&&isString$1(o.processor.type)?o.processor.type:DEFAULT_MESSAGE_DATA_TYPE,M={list:d,named:f,plural:l,linked:(E,...L)=>{const[V,B]=L;let F="text",j="";L.length===1?isObject$1(V)?(j=V.modifier||j,F=V.type||F):isString$1(V)&&(j=V||j):L.length===2&&(isString$1(V)&&(j=V||j),isString$1(B)&&(F=B||F));const I=p(E,!0)(M),U=F==="vnode"&&isArray$1(I)&&j?I[0]:I;return j?_(j)(U,F):U},message:p,type:k,interpolate:v,normalize:b,values:assign(create$2(),c,u)};return M}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=o=>isFunction$1(o);function translate(o,...e){const{fallbackFormat:n,postTranslation:a,unresolving:s,messageCompiler:l,fallbackLocale:c,messages:d}=o,[u,f]=parseTranslateArgs(...e),p=isBoolean$1(f.missingWarn)?f.missingWarn:o.missingWarn,_=isBoolean$1(f.fallbackWarn)?f.fallbackWarn:o.fallbackWarn,b=isBoolean$1(f.escapeParameter)?f.escapeParameter:o.escapeParameter,v=!!f.resolvedMessage,k=isString$1(f.default)||isBoolean$1(f.default)?isBoolean$1(f.default)?l?u:()=>u:f.default:n?l?u:()=>u:null,x=n||k!=null&&(isString$1(k)||isFunction$1(k)),M=getLocale(o,f);b&&escapeParams(f);let[E,L,V]=v?[u,M,d[M]||create$2()]:resolveMessageFormat(o,u,M,c,_,p),B=E,F=u;if(!v&&!(isString$1(B)||isMessageAST(B)||isMessageFunction(B))&&x&&(B=k,F=B),!v&&(!(isString$1(B)||isMessageAST(B)||isMessageFunction(B))||!isString$1(L)))return s?NOT_REOSLVED:u;let j=!1;const I=()=>{j=!0},U=isMessageFunction(B)?B:compileMessageFormat(o,u,L,B,F,I);if(j)return B;const W=getMessageContextOptions(o,L,V,f),K=createMessageContext(W),G=evaluateMessage(o,U,K),Z=a?a(G,u):G;if(__INTLIFY_PROD_DEVTOOLS__){const oe={timestamp:Date.now(),key:isString$1(u)?u:isMessageFunction(B)?B.key:"",locale:L||(isMessageFunction(B)?B.locale:""),format:isString$1(B)?B:isMessageFunction(B)?B.source:"",message:Z};oe.meta=assign({},o.__meta,getAdditionalMeta()||{}),translateDevTools(oe)}return Z}function escapeParams(o){isArray$1(o.list)?o.list=o.list.map(e=>isString$1(e)?escapeHtml(e):e):isObject$1(o.named)&&Object.keys(o.named).forEach(e=>{isString$1(o.named[e])&&(o.named[e]=escapeHtml(o.named[e]))})}function resolveMessageFormat(o,e,n,a,s,l){const{messages:c,onWarn:d,messageResolver:u,localeFallbacker:f}=o,p=f(o,a,n);let _=create$2(),b,v=null;const k="translate";for(let x=0;x<p.length&&(b=p[x],_=c[b]||create$2(),(v=u(_,e))===null&&(v=_[e]),!(isString$1(v)||isMessageAST(v)||isMessageFunction(v)));x++)if(!isImplicitFallback(b,p)){const M=handleMissing(o,e,b,l,k);M!==e&&(v=M)}return[v,b,_]}function compileMessageFormat(o,e,n,a,s,l){const{messageCompiler:c,warnHtmlMessage:d}=o;if(isMessageFunction(a)){const f=a;return f.locale=f.locale||n,f.key=f.key||e,f}if(c==null){const f=()=>a;return f.locale=n,f.key=e,f}const u=c(a,getCompileContext(o,n,s,a,d,l));return u.locale=n,u.key=e,u.source=a,u}function evaluateMessage(o,e,n){return e(n)}function parseTranslateArgs(...o){const[e,n,a]=o,s=create$2();if(!isString$1(e)&&!isNumber$1(e)&&!isMessageFunction(e)&&!isMessageAST(e))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const l=isNumber$1(e)?String(e):(isMessageFunction(e),e);return isNumber$1(n)?s.plural=n:isString$1(n)?s.default=n:isPlainObject$1(n)&&!isEmptyObject(n)?s.named=n:isArray$1(n)&&(s.list=n),isNumber$1(a)?s.plural=a:isString$1(a)?s.default=a:isPlainObject$1(a)&&assign(s,a),[l,s]}function getCompileContext(o,e,n,a,s,l){return{locale:e,key:n,warnHtmlMessage:s,onError:c=>{throw l&&l(c),c},onCacheKey:c=>generateFormatCacheKey(e,n,c)}}function getMessageContextOptions(o,e,n,a){const{modifiers:s,pluralRules:l,messageResolver:c,fallbackLocale:d,fallbackWarn:u,missingWarn:f,fallbackContext:p}=o,b={locale:e,modifiers:s,pluralRules:l,messages:(v,k)=>{let x=c(n,v);if(x==null&&(p||k)){const[,,M]=resolveMessageFormat(p||o,v,e,d,u,f);x=c(M,v)}if(isString$1(x)||isMessageAST(x)){let M=!1;const L=compileMessageFormat(o,v,e,x,v,()=>{M=!0});return M?NOOP_MESSAGE_FUNCTION:L}else return isMessageFunction(x)?x:NOOP_MESSAGE_FUNCTION}};return o.processor&&(b.processor=o.processor),a.list&&(b.list=a.list),a.named&&(b.named=a.named),isNumber$1(a.plural)&&(b.pluralIndex=a.plural),b}initFeatureFlags$1();const VERSION$1="10.0.5";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}const I18nErrorCodes={UNEXPECTED_RETURN_TYPE:CORE_ERROR_CODES_EXTEND_POINT,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:30,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32,NOT_COMPATIBLE_LEGACY_VUE_I18N:33,NOT_AVAILABLE_COMPOSITION_IN_LEGACY:34};function createI18nError(o,...e){return createCompileError(o,null,void 0)}const TranslateVNodeSymbol=makeSymbol$1("__translateVNode"),DatetimePartsSymbol=makeSymbol$1("__datetimeParts"),NumberPartsSymbol=makeSymbol$1("__numberParts"),SetPluralRulesSymbol=makeSymbol$1("__setPluralRules"),InejctWithOptionSymbol=makeSymbol$1("__injectWithOption"),DisposeSymbol=makeSymbol$1("__dispose");function handleFlatJson(o){if(!isObject$1(o))return o;for(const e in o)if(hasOwn(o,e))if(!e.includes("."))isObject$1(o[e])&&handleFlatJson(o[e]);else{const n=e.split("."),a=n.length-1;let s=o,l=!1;for(let c=0;c<a;c++){if(n[c]in s||(s[n[c]]=create$2()),!isObject$1(s[n[c]])){l=!0;break}s=s[n[c]]}l||(s[n[a]]=o[e],delete o[e]),isObject$1(s[n[a]])&&handleFlatJson(s[n[a]])}return o}function getLocaleMessages(o,e){const{messages:n,__i18n:a,messageResolver:s,flatJson:l}=e,c=isPlainObject$1(n)?n:isArray$1(a)?create$2():{[o]:create$2()};if(isArray$1(a)&&a.forEach(d=>{if("locale"in d&&"resource"in d){const{locale:u,resource:f}=d;u?(c[u]=c[u]||create$2(),deepCopy(f,c[u])):deepCopy(f,c)}else isString$1(d)&&deepCopy(JSON.parse(d),c)}),s==null&&l)for(const d in c)hasOwn(c,d)&&handleFlatJson(c[d]);return c}function getComponentOptions(o){return o.type}function adjustI18nResources(o,e,n){let a=isObject$1(e.messages)?e.messages:create$2();"__i18nGlobal"in n&&(a=getLocaleMessages(o.locale.value,{messages:a,__i18n:n.__i18nGlobal}));const s=Object.keys(a);s.length&&s.forEach(l=>{o.mergeLocaleMessage(l,a[l])});{if(isObject$1(e.datetimeFormats)){const l=Object.keys(e.datetimeFormats);l.length&&l.forEach(c=>{o.mergeDateTimeFormat(c,e.datetimeFormats[c])})}if(isObject$1(e.numberFormats)){const l=Object.keys(e.numberFormats);l.length&&l.forEach(c=>{o.mergeNumberFormat(c,e.numberFormats[c])})}}}function createTextNode(o){return createVNode(Text$1,null,o,0)}const DEVTOOLS_META="__INTLIFY_META__",NOOP_RETURN_ARRAY=()=>[],NOOP_RETURN_FALSE=()=>!1;let composerID=0;function defineCoreMissingHandler(o){return(e,n,a,s)=>o(n,a,getCurrentInstance()||void 0,s)}const getMetaInfo=()=>{const o=getCurrentInstance();let e=null;return o&&(e=getComponentOptions(o)[DEVTOOLS_META])?{[DEVTOOLS_META]:e}:null};function createComposer(o={}){const{__root:e,__injectWithOption:n}=o,a=e===void 0,s=o.flatJson,l=inBrowser?ref:shallowRef;let c=isBoolean$1(o.inheritLocale)?o.inheritLocale:!0;const d=l(e&&c?e.locale.value:isString$1(o.locale)?o.locale:DEFAULT_LOCALE),u=l(e&&c?e.fallbackLocale.value:isString$1(o.fallbackLocale)||isArray$1(o.fallbackLocale)||isPlainObject$1(o.fallbackLocale)||o.fallbackLocale===!1?o.fallbackLocale:d.value),f=l(getLocaleMessages(d.value,o)),p=l(isPlainObject$1(o.datetimeFormats)?o.datetimeFormats:{[d.value]:{}}),_=l(isPlainObject$1(o.numberFormats)?o.numberFormats:{[d.value]:{}});let b=e?e.missingWarn:isBoolean$1(o.missingWarn)||isRegExp$1(o.missingWarn)?o.missingWarn:!0,v=e?e.fallbackWarn:isBoolean$1(o.fallbackWarn)||isRegExp$1(o.fallbackWarn)?o.fallbackWarn:!0,k=e?e.fallbackRoot:isBoolean$1(o.fallbackRoot)?o.fallbackRoot:!0,x=!!o.fallbackFormat,M=isFunction$1(o.missing)?o.missing:null,E=isFunction$1(o.missing)?defineCoreMissingHandler(o.missing):null,L=isFunction$1(o.postTranslation)?o.postTranslation:null,V=e?e.warnHtmlMessage:isBoolean$1(o.warnHtmlMessage)?o.warnHtmlMessage:!0,B=!!o.escapeParameter;const F=e?e.modifiers:isPlainObject$1(o.modifiers)?o.modifiers:{};let j=o.pluralRules||e&&e.pluralRules,I;I=(()=>{a&&setFallbackContext(null);const Ce={version:VERSION$1,locale:d.value,fallbackLocale:u.value,messages:f.value,modifiers:F,pluralRules:j,missing:E===null?void 0:E,missingWarn:b,fallbackWarn:v,fallbackFormat:x,unresolving:!0,postTranslation:L===null?void 0:L,warnHtmlMessage:V,escapeParameter:B,messageResolver:o.messageResolver,messageCompiler:o.messageCompiler,__meta:{framework:"vue"}};Ce.datetimeFormats=p.value,Ce.numberFormats=_.value,Ce.__datetimeFormatters=isPlainObject$1(I)?I.__datetimeFormatters:void 0,Ce.__numberFormatters=isPlainObject$1(I)?I.__numberFormatters:void 0;const Ze=createCoreContext(Ce);return a&&setFallbackContext(Ze),Ze})(),updateFallbackLocale(I,d.value,u.value);function W(){return[d.value,u.value,f.value,p.value,_.value]}const K=computed({get:()=>d.value,set:Ce=>{d.value=Ce,I.locale=d.value}}),G=computed({get:()=>u.value,set:Ce=>{u.value=Ce,I.fallbackLocale=u.value,updateFallbackLocale(I,d.value,Ce)}}),Z=computed(()=>f.value),oe=computed(()=>p.value),Y=computed(()=>_.value);function se(){return isFunction$1(L)?L:null}function le(Ce){L=Ce,I.postTranslation=Ce}function ce(){return M}function de(Ce){Ce!==null&&(E=defineCoreMissingHandler(Ce)),M=Ce,I.missing=E}const ge=(Ce,Ze,pt,bt,St,Ct)=>{W();let $t;try{__INTLIFY_PROD_DEVTOOLS__,a||(I.fallbackContext=e?getFallbackContext():void 0),$t=Ce(I)}finally{__INTLIFY_PROD_DEVTOOLS__,a||(I.fallbackContext=void 0)}if(pt!=="translate exists"&&isNumber$1($t)&&$t===NOT_REOSLVED||pt==="translate exists"&&!$t){const[Kt,Et]=Ze();return e&&k?bt(e):St(Kt)}else{if(Ct($t))return $t;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function qe(...Ce){return ge(Ze=>Reflect.apply(translate,null,[Ze,...Ce]),()=>parseTranslateArgs(...Ce),"translate",Ze=>Reflect.apply(Ze.t,Ze,[...Ce]),Ze=>Ze,Ze=>isString$1(Ze))}function ke(...Ce){const[Ze,pt,bt]=Ce;if(bt&&!isObject$1(bt))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return qe(Ze,pt,assign({resolvedMessage:!0},bt||{}))}function Ee(...Ce){return ge(Ze=>Reflect.apply(datetime,null,[Ze,...Ce]),()=>parseDateTimeArgs(...Ce),"datetime format",Ze=>Reflect.apply(Ze.d,Ze,[...Ce]),()=>MISSING_RESOLVE_VALUE,Ze=>isString$1(Ze))}function Oe(...Ce){return ge(Ze=>Reflect.apply(number$1,null,[Ze,...Ce]),()=>parseNumberArgs(...Ce),"number format",Ze=>Reflect.apply(Ze.n,Ze,[...Ce]),()=>MISSING_RESOLVE_VALUE,Ze=>isString$1(Ze))}function Ve(Ce){return Ce.map(Ze=>isString$1(Ze)||isNumber$1(Ze)||isBoolean$1(Ze)?createTextNode(String(Ze)):Ze)}const dt={normalize:Ve,interpolate:Ce=>Ce,type:"vnode"};function pe(...Ce){return ge(Ze=>{let pt;const bt=Ze;try{bt.processor=dt,pt=Reflect.apply(translate,null,[bt,...Ce])}finally{bt.processor=null}return pt},()=>parseTranslateArgs(...Ce),"translate",Ze=>Ze[TranslateVNodeSymbol](...Ce),Ze=>[createTextNode(Ze)],Ze=>isArray$1(Ze))}function fe(...Ce){return ge(Ze=>Reflect.apply(number$1,null,[Ze,...Ce]),()=>parseNumberArgs(...Ce),"number format",Ze=>Ze[NumberPartsSymbol](...Ce),NOOP_RETURN_ARRAY,Ze=>isString$1(Ze)||isArray$1(Ze))}function me(...Ce){return ge(Ze=>Reflect.apply(datetime,null,[Ze,...Ce]),()=>parseDateTimeArgs(...Ce),"datetime format",Ze=>Ze[DatetimePartsSymbol](...Ce),NOOP_RETURN_ARRAY,Ze=>isString$1(Ze)||isArray$1(Ze))}function te(Ce){j=Ce,I.pluralRules=j}function ue(Ce,Ze){return ge(()=>{if(!Ce)return!1;const pt=isString$1(Ze)?Ze:d.value,bt=Be(pt),St=I.messageResolver(bt,Ce);return isMessageAST(St)||isMessageFunction(St)||isString$1(St)},()=>[Ce],"translate exists",pt=>Reflect.apply(pt.te,pt,[Ce,Ze]),NOOP_RETURN_FALSE,pt=>isBoolean$1(pt))}function we(Ce){let Ze=null;const pt=fallbackWithLocaleChain(I,u.value,d.value);for(let bt=0;bt<pt.length;bt++){const St=f.value[pt[bt]]||{},Ct=I.messageResolver(St,Ce);if(Ct!=null){Ze=Ct;break}}return Ze}function _e(Ce){const Ze=we(Ce);return Ze??(e?e.tm(Ce)||{}:{})}function Be(Ce){return f.value[Ce]||{}}function Ge(Ce,Ze){if(s){const pt={[Ce]:Ze};for(const bt in pt)hasOwn(pt,bt)&&handleFlatJson(pt[bt]);Ze=pt[Ce]}f.value[Ce]=Ze,I.messages=f.value}function ze(Ce,Ze){f.value[Ce]=f.value[Ce]||{};const pt={[Ce]:Ze};if(s)for(const bt in pt)hasOwn(pt,bt)&&handleFlatJson(pt[bt]);Ze=pt[Ce],deepCopy(Ze,f.value[Ce]),I.messages=f.value}function We(Ce){return p.value[Ce]||{}}function ee(Ce,Ze){p.value[Ce]=Ze,I.datetimeFormats=p.value,clearDateTimeFormat(I,Ce,Ze)}function re(Ce,Ze){p.value[Ce]=assign(p.value[Ce]||{},Ze),I.datetimeFormats=p.value,clearDateTimeFormat(I,Ce,Ze)}function Te(Ce){return _.value[Ce]||{}}function Xe(Ce,Ze){_.value[Ce]=Ze,I.numberFormats=_.value,clearNumberFormat(I,Ce,Ze)}function ht(Ce,Ze){_.value[Ce]=assign(_.value[Ce]||{},Ze),I.numberFormats=_.value,clearNumberFormat(I,Ce,Ze)}composerID++,e&&inBrowser&&(watch(e.locale,Ce=>{c&&(d.value=Ce,I.locale=Ce,updateFallbackLocale(I,d.value,u.value))}),watch(e.fallbackLocale,Ce=>{c&&(u.value=Ce,I.fallbackLocale=Ce,updateFallbackLocale(I,d.value,u.value))}));const ft={id:composerID,locale:K,fallbackLocale:G,get inheritLocale(){return c},set inheritLocale(Ce){c=Ce,Ce&&e&&(d.value=e.locale.value,u.value=e.fallbackLocale.value,updateFallbackLocale(I,d.value,u.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:Z,get modifiers(){return F},get pluralRules(){return j||{}},get isGlobal(){return a},get missingWarn(){return b},set missingWarn(Ce){b=Ce,I.missingWarn=b},get fallbackWarn(){return v},set fallbackWarn(Ce){v=Ce,I.fallbackWarn=v},get fallbackRoot(){return k},set fallbackRoot(Ce){k=Ce},get fallbackFormat(){return x},set fallbackFormat(Ce){x=Ce,I.fallbackFormat=x},get warnHtmlMessage(){return V},set warnHtmlMessage(Ce){V=Ce,I.warnHtmlMessage=Ce},get escapeParameter(){return B},set escapeParameter(Ce){B=Ce,I.escapeParameter=Ce},t:qe,getLocaleMessage:Be,setLocaleMessage:Ge,mergeLocaleMessage:ze,getPostTranslationHandler:se,setPostTranslationHandler:le,getMissingHandler:ce,setMissingHandler:de,[SetPluralRulesSymbol]:te};return ft.datetimeFormats=oe,ft.numberFormats=Y,ft.rt=ke,ft.te=ue,ft.tm=_e,ft.d=Ee,ft.n=Oe,ft.getDateTimeFormat=We,ft.setDateTimeFormat=ee,ft.mergeDateTimeFormat=re,ft.getNumberFormat=Te,ft.setNumberFormat=Xe,ft.mergeNumberFormat=ht,ft[InejctWithOptionSymbol]=n,ft[TranslateVNodeSymbol]=pe,ft[DatetimePartsSymbol]=me,ft[NumberPartsSymbol]=fe,ft}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:o=>o==="parent"||o==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:o},e){return e.length===1&&e[0]==="default"?(o.default?o.default():[]).reduce((a,s)=>[...a,...s.type===Fragment?s.children:[s]],[]):e.reduce((n,a)=>{const s=o[a];return s&&(n[a]=s()),n},create$2())}function getFragmentableTag(){return Fragment}assign({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:o=>isNumber$1(o)||!isNaN(o)}},baseFormatProps);function isVNode(o){return isArray$1(o)&&!isString$1(o[0])}function renderFormatter(o,e,n,a){const{slots:s,attrs:l}=e;return()=>{const c={part:!0};let d=create$2();o.locale&&(c.locale=o.locale),isString$1(o.format)?c.key=o.format:isObject$1(o.format)&&(isString$1(o.format.key)&&(c.key=o.format.key),d=Object.keys(o.format).reduce((b,v)=>n.includes(v)?assign(create$2(),b,{[v]:o.format[v]}):b,create$2()));const u=a(o.value,c,d);let f=[c.key];isArray$1(u)?f=u.map((b,v)=>{const k=s[b.type],x=k?k({[b.type]:b.value,index:v,parts:u}):[b.value];return isVNode(x)&&(x[0].key=`${b.type}-${v}`),x}):isString$1(u)&&(f=[u]);const p=assign(create$2(),l),_=isString$1(o.tag)||isObject$1(o.tag)?o.tag:getFragmentableTag();return h(_,p,f)}}assign({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps);assign({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps);const I18nInjectionKey=makeSymbol$1("global-vue-i18n");function useI18n(o={}){const e=getCurrentInstance();if(e==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSTALLED);const n=getI18nInstance(e),a=getGlobalComposer(n),s=getComponentOptions(e),l=getScope(o,s);if(l==="global")return adjustI18nResources(a,o,s),a;if(l==="parent"){let u=getComposer(n,e,o.__useComponent);return u==null&&(u=a),u}const c=n;let d=c.__getInstance(e);if(d==null){const u=assign({},o);"__i18n"in s&&(u.__i18n=s.__i18n),a&&(u.__root=a),d=createComposer(u),c.__composerExtend&&(d[DisposeSymbol]=c.__composerExtend(d)),setupLifeCycle(c,e,d),c.__setInstance(e,d)}return d}function getI18nInstance(o){const e=inject(o.isCE?I18nInjectionKey:o.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw createI18nError(o.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return e}function getScope(o,e){return isEmptyObject(o)?"__i18n"in e?"local":"global":o.useScope?o.useScope:"local"}function getGlobalComposer(o){return o.mode==="composition"?o.global:o.global.__composer}function getComposer(o,e,n=!1){let a=null;const s=e.root;let l=getParentComponentInstance(e,n);for(;l!=null;){const c=o;if(o.mode==="composition")a=c.__getInstance(l);else if(__VUE_I18N_LEGACY_API__){const d=c.__getInstance(l);d!=null&&(a=d.__composer,n&&a&&!a[InejctWithOptionSymbol]&&(a=null))}if(a!=null||s===l)break;l=l.parent}return a}function getParentComponentInstance(o,e=!1){return o==null?null:e&&o.vnode.ctx||o.parent}function setupLifeCycle(o,e,n){onMounted(()=>{},e),onUnmounted(()=>{const a=n;o.__deleteInstance(e);const s=a[DisposeSymbol];s&&(s(),delete a[DisposeSymbol])},e)}initFeatureFlags();registerMessageCompiler(compile);registerMessageResolver(resolveValue);registerLocaleFallbacker(fallbackWithLocaleChain);if(__INTLIFY_PROD_DEVTOOLS__){const o=getGlobalThis();o.__INTLIFY__=!0,setDevToolsHook(o.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var _sfc_main$2g=defineComponent({__name:"AlertDialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const s=xe(o,e);return(l,c)=>(openBlock(),createBlock(unref($v),normalizeProps(guardReactiveProps(unref(s))),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),_sfc_main$2f=defineComponent({__name:"AlertDialogAction",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Mv),mergeProps(n.value,{class:unref(cn)(unref(buttonVariants)(),e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$2e=defineComponent({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Av),mergeProps(n.value,{class:unref(cn)(unref(buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$2d=defineComponent({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=computed(()=>{const{class:c,...d}=n;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(Iv),null,{default:withCtx(()=>[createVNode(unref(Rv),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),createVNode(unref(Tv),mergeProps(unref(l),{class:unref(cn)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_sfc_main$2c=defineComponent({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(kv),mergeProps(n.value,{class:unref(cn)("text-sm text-muted-foreground",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$2b=defineComponent({__name:"AlertDialogFooter",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$2a=defineComponent({__name:"AlertDialogHeader",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("flex flex-col gap-y-2 text-center sm:text-left",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$29=defineComponent({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Ov),mergeProps(n.value,{class:unref(cn)("text-lg font-semibold",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$28=defineComponent({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(Bv),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),_sfc_main$27=defineComponent({__name:"DeleteKbDialog",props:{location:{},name:{}},setup(o){const e=o,n=ref(!1),a=ref("idle");async function s(){if(a.value==="deleting")return;if(a.value==="deleteSuccess"||a.value==="deleteFailed"){a.value="idle";return}a.value="deleting",(await deleteKb({location:e.location})).success?(a.value="deleteSuccess",setTimeout(()=>{a.value="idle",n.value=!1},1e3)):(a.value="deleteFailed",setTimeout(()=>{a.value="idle",n.value=!1},1e3))}return(l,c)=>(openBlock(),createBlock(unref(_sfc_main$2g),{open:n.value,"onUpdate:open":c[0]||(c[0]=d=>n.value=d)},{default:withCtx(()=>[createVNode(unref(_sfc_main$28),{asChild:""},{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3}),createVNode(unref(_sfc_main$2d),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2a),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$29),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.kbManagement.deleteKbDialog.title")),1)]),_:1}),createVNode(unref(_sfc_main$2c),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.kbManagement.deleteKbDialog.description",{location:e.location,name:e.name})),1)]),_:1})]),_:1}),createVNode(unref(_sfc_main$2b),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2e),{disabled:a.value==="deleting"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.kbManagement.deleteKbDialog.cancelBtn")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$2r),{variant:"destructive",disabled:a.value==="deleting",onClick:s},{default:withCtx(()=>[a.value==="deleting"?(openBlock(),createBlock(unref(LoaderCircle),{key:0,class:"size-4 mr-2 animate-spin"})):a.value==="deleteSuccess"?(openBlock(),createBlock(unref(Check),{key:1,class:"size-4 mr-2"})):a.value==="deleteFailed"?(openBlock(),createBlock(unref(X),{key:2,class:"size-4 mr-2"})):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(l.$t(`adminDashboard.kbManagement.deleteKbDialog.status.${a.value}`)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["open"]))}}),_sfc_main$26=defineComponent({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const s=xe(o,e);return(l,c)=>(openBlock(),createBlock(unref(eu),normalizeProps(guardReactiveProps(unref(s))),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),_sfc_main$25=defineComponent({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=computed(()=>{const{class:c,...d}=n;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(Dv),null,{default:withCtx(()=>[createVNode(unref(Eu),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),createVNode(unref(xu),mergeProps(unref(l),{class:unref(cn)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default"),createVNode(unref(Gl),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:withCtx(()=>[createVNode(unref(X),{class:"w-4 h-4"}),d[0]||(d[0]=createBaseVNode("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),_sfc_main$24=defineComponent({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Du),mergeProps(unref(a),{class:unref(cn)("text-sm text-muted-foreground",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$23=defineComponent({__name:"DialogFooter",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$22=defineComponent({__name:"DialogHeader",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("flex flex-col gap-y-1.5 text-center sm:text-left",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$21=defineComponent({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Pu),mergeProps(unref(a),{class:unref(cn)("text-lg font-semibold leading-none tracking-tight",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$20=defineComponent({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(tu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),_sfc_main$1$=defineComponent({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(o,{emit:e}){const n=o,s=useVModel(n,"modelValue",e,{passive:!0,defaultValue:n.defaultValue});return(l,c)=>withDirectives((openBlock(),createElementBlock("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>isRef(s)?s.value=d:null),class:normalizeClass(unref(cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n.class))},null,2)),[[vModelText,unref(s)]])}});const _hoisted_1$G={class:"grid gap-4 py-4"},_hoisted_2$n={class:"grid grid-cols-4 items-center gap-4"},_hoisted_3$j={for:"name",class:"text-right"},_hoisted_4$g={class:"grid grid-cols-4 items-center gap-4"},_hoisted_5$9={for:"location",class:"text-right"},_hoisted_6$5={class:"grid grid-cols-4 items-center gap-4"},_hoisted_7$4={for:"password",class:"text-right"};var _sfc_main$1_=defineComponent({__name:"NewKbDialog",setup(o){const e=ref(!1),n=ref(""),a=ref(""),s=ref(""),l=ref("idle"),c=()=>{n.value="",a.value="",s.value="",l.value="idle"};async function d(){if(l.value==="creating")return;if(l.value==="createSuccess"||l.value==="createFailed"){l.value="idle";return}l.value="creating",(await createKb({name:n.value,location:a.value,password:s.value})).success?(l.value="createSuccess",setTimeout(()=>{c(),e.value=!1},1e3)):(l.value="createFailed",setTimeout(()=>{c(),e.value=!1},1e3))}function u(){c(),e.value=!1}return(f,p)=>(openBlock(),createBlock(unref(_sfc_main$26),{open:e.value,"onUpdate:open":p[3]||(p[3]=_=>e.value=_)},{default:withCtx(()=>[createVNode(unref(_sfc_main$20),{asChild:""},{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3}),createVNode(unref(_sfc_main$25),{class:"sm:max-w-[425px]"},{default:withCtx(()=>[createVNode(unref(_sfc_main$22),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$21),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(f.$t("adminDashboard.kbManagement.newKbDialog.title")),1)]),_:1}),createVNode(unref(_sfc_main$24),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(f.$t("adminDashboard.kbManagement.newKbDialog.description")),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$G,[createBaseVNode("div",_hoisted_2$n,[createBaseVNode("label",_hoisted_3$j,toDisplayString$1(f.$t("adminDashboard.kbManagement.newKbDialog.nameLabel")),1),createVNode(unref(_sfc_main$1$),{id:"name",modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=_=>n.value=_),class:"col-span-3",placeholder:f.$t("adminDashboard.kbManagement.newKbDialog.namePlaceholder")},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_4$g,[createBaseVNode("label",_hoisted_5$9,toDisplayString$1(f.$t("adminDashboard.kbManagement.newKbDialog.locationLabel")),1),createVNode(unref(_sfc_main$1$),{id:"location",modelValue:a.value,"onUpdate:modelValue":p[1]||(p[1]=_=>a.value=_),class:"col-span-3",placeholder:f.$t("adminDashboard.kbManagement.newKbDialog.locationPlaceholder")},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_6$5,[createBaseVNode("label",_hoisted_7$4,toDisplayString$1(f.$t("adminDashboard.kbManagement.newKbDialog.passwordLabel")),1),createVNode(unref(_sfc_main$1$),{id:"password",modelValue:s.value,"onUpdate:modelValue":p[2]||(p[2]=_=>s.value=_),type:"password",class:"col-span-3",placeholder:f.$t("adminDashboard.kbManagement.newKbDialog.passwordPlaceholder")},null,8,["modelValue","placeholder"])])]),createVNode(unref(_sfc_main$23),{class:"flex gap-2"},{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"outline",onClick:u},{default:withCtx(()=>[createTextVNode(toDisplayString$1(f.$t("adminDashboard.kbManagement.newKbDialog.cancelBtn")),1)]),_:1}),createVNode(unref(_sfc_main$2r),{type:"submit",onClick:d,disabled:l.value==="creating"},{default:withCtx(()=>[l.value==="creating"?(openBlock(),createBlock(unref(LoaderCircle),{key:0,class:"size-4 mr-2 animate-spin"})):l.value==="createSuccess"?(openBlock(),createBlock(unref(Check),{key:1,class:"size-4 mr-2"})):l.value==="createFailed"?(openBlock(),createBlock(unref(X),{key:2,class:"size-4 mr-2"})):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(f.$t(`adminDashboard.kbManagement.newKbDialog.createBtn.${l.value}`)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["open"]))}});const _hoisted_1$F={class:"flex-1 space-y-4 p-8 pt-6"},_hoisted_2$m={class:"flex items-center justify-between space-y-2"},_hoisted_3$i={class:"flex items-baseline"},_hoisted_4$f={class:"text-3xl font-bold tracking-tight"},_hoisted_5$8={class:"text-muted-foreground ml-4"},_hoisted_6$4={class:"flex items-center space-x-2"},_hoisted_7$3={class:"flex flex-col space-y-2"},_hoisted_8$2={class:"flex items-center space-x-2"},_hoisted_9$2={class:"space-y-2"},_hoisted_10$2={key:0,class:"flex flex-col items-center justify-center py-8 text-center space-y-2"},_hoisted_11$2={class:"text-2xl font-semibold text-muted-foreground"},_hoisted_12={class:"text-sm text-muted-foreground"},_hoisted_13={class:"space-y-1"},_hoisted_14={class:"font-medium"},_hoisted_15={class:"text-sm text-muted-foreground"},_hoisted_16={class:"flex space-x-2"};var _sfc_main$1Z=defineComponent({__name:"AdminDashboard",setup(o){const{serverUrl:e,logout:n}=ServerInfoContext.useContext(),{kbs:a,refreshKbList:s}=KbInfoContext.useContext();return watch(e,()=>{s(e.value)},{immediate:!0}),(l,c)=>(openBlock(),createElementBlock("div",_hoisted_1$F,[createBaseVNode("div",_hoisted_2$m,[createBaseVNode("div",_hoisted_3$i,[createBaseVNode("h2",_hoisted_4$f,toDisplayString$1(l.$t("adminDashboard.title")),1),createBaseVNode("div",_hoisted_5$8,toDisplayString$1(unref(e)),1)]),createBaseVNode("div",_hoisted_6$4,[createVNode(unref(_sfc_main$2r),{variant:"outline",onClick:unref(n)},{default:withCtx(()=>[createVNode(unref(LogOut),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(l.$t("adminDashboard.logout")),1)]),_:1},8,["onClick"])])]),createVNode(unref(_sfc_main$2k),{"default-value":"kbManagement",class:"space-y-4"},{default:withCtx(()=>[createVNode(unref(_sfc_main$2i),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2h),{value:"kbManagement"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.tabs.kbManagement")),1)]),_:1}),createVNode(unref(_sfc_main$2h),{value:"logsAndAnalytics"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.tabs.logsAndAnalytics")),1)]),_:1})]),_:1}),createVNode(unref(_sfc_main$2j),{value:"kbManagement",class:"space-y-4"},{default:withCtx(()=>[createVNode(unref(_sfc_main$2q),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2m),{class:"flex flex-row items-center justify-between"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_7$3,[createVNode(unref(_sfc_main$2l),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.kbManagement.allKbs")),1)]),_:1}),createVNode(unref(_sfc_main$2o),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.kbManagement.allKbsDescription")),1)]),_:1})]),createBaseVNode("div",_hoisted_8$2,[createVNode(unref(_sfc_main$2r),{size:"sm",variant:"outline",onClick:unref(s)},{default:withCtx(()=>[createVNode(unref(RefreshCcw),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(l.$t("adminDashboard.kbManagement.kbActions.refreshKbList")),1)]),_:1},8,["onClick"]),createVNode(_sfc_main$1_,null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{size:"sm"},{default:withCtx(()=>[createVNode(unref(Plus),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(l.$t("adminDashboard.kbManagement.kbActions.addKb")),1)]),_:1})]),_:1})])]),_:1}),createVNode(unref(_sfc_main$2p),null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_9$2,[Object.keys(unref(a)).length===0?(openBlock(),createElementBlock("div",_hoisted_10$2,[createBaseVNode("div",_hoisted_11$2,toDisplayString$1(l.$t("adminDashboard.kbManagement.noKbs")),1),createBaseVNode("div",_hoisted_12,toDisplayString$1(l.$t("adminDashboard.kbManagement.noKbsDescription")),1)])):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(unref(a),(d,u)=>(openBlock(),createElementBlock("div",{key:u,class:"flex items-center justify-between p-4 border rounded-lg"},[createBaseVNode("div",_hoisted_13,[createBaseVNode("h4",_hoisted_14,toDisplayString$1(d.name),1),createBaseVNode("p",_hoisted_15,toDisplayString$1(u),1)]),createBaseVNode("div",_hoisted_16,[createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm"},{default:withCtx(()=>[createVNode(unref(Pencil),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(l.$t("adminDashboard.kbManagement.kbActions.edit")),1)]),_:1}),createVNode(_sfc_main$27,{location:u,name:d.name},{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"destructive",size:"sm"},{default:withCtx(()=>[createVNode(unref(Trash2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(l.$t("adminDashboard.kbManagement.kbActions.delete")),1)]),_:1})]),_:2},1032,["location","name"])])]))),128))])]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$2j),{value:"logsAndAnalytics",class:"space-y-4"})]),_:1})]))}});const createPromise=()=>{let o;return{promise:new Promise(n=>{o=n}),resolve:o}},createSyncLayer=()=>{const o=mitt$1(),{promise:e,resolve:n}=createPromise(),a=new Worker(self.location.href,{type:"module"});a.addEventListener("message",v=>{const k=v.data;if(k.type==="init"){n(void 0);return}console.debug("[syncLayer] Received message from syncWorker:",k),o.emit(k.type,k)});const s=v=>{(async()=>(await e,a.postMessage(v)))()},l=(v,k,x)=>{s({type:"connect",serverUrl:v,location:k,token:x})},c=()=>{s({type:"disconnect"})},d=v=>{s({type:"loadDataDoc",docId:v})},u=v=>{s({type:"unloadDataDoc",docId:v})},f=v=>{s({type:"_printBlockInfo",blockId:v})},p=(v,k)=>{s({type:"_printBlockData",docId:v,blockId:k})},_=v=>{const k={_tr:{patches:[],origin:v},upsertBlockInfo:(x,M)=>{k._tr.patches.push({op:"upsertBlockInfo",blockId:x,blockInfo:M})},deleteBlockInfo:x=>{k._tr.patches.push({op:"deleteBlockInfo",blockId:x})},upsertBlockData:(x,M,E)=>{k._tr.patches.push({op:"upsertBlockData",docId:x,blockId:M,blockData:E})},deleteBlockData:(x,M)=>{k._tr.patches.push({op:"deleteBlockData",docId:x,blockId:M})},commit:()=>{k._tr.patches.length!==0&&s({type:"postYjsLayerTransaction",transaction:k._tr})}};return k};return{connect:l,disconnect:c,on:o.on,off:o.off,createSyncLayerTransaction:_,loadDataDoc:d,unloadDataDoc:u,_printBlockInfo:f,_printBlockData:p}},createBlocksEditor=(o,e,n)=>{const a=M=>{if("parentId"in M)if(typeof M.childIndex=="string"){const E=o.getBlock(M.parentId);return E?{parentId:M.parentId,childIndex:M.childIndex=="first"?0:M.childIndex=="last"?E.childrenIds.length-1:E.childrenIds.length}:null}else return M;else{const E=o.getBlock(M.baseBlockId);if(!E||E.id=="root")return null;const L=E.parentRef.value;if(!L)return null;const V=L.childrenIds.indexOf(M.baseBlockId);return{parentId:L.id,childIndex:Math.min(L.childrenIds.length,Math.max(0,V+M.offset))}}},s=(M,E)=>{const L=o.getBlock(M);L&&(E??=!L.fold,L.fold!=E&&(L.fold=E,o.updateBlock(L,{type:"ui"})))};return{normalizePos:a,changeBlockContent:M=>{let{blockId:E,content:L,tr:V,commit:B}=M;V??=o.createBlockTransaction({type:"ui",changeSources:[E]}),B??=!0;const F=o.getBlock(E);if(!F)return;const I=n().getOccurs(F.acturalSrc),U=o.getCtext(L),W=L[0]===BLOCK_CONTENT_TYPES.TEXT?o.getOlinks(L[1]):[],K=0;for(const G of I){const Z=o.getBlock(G);Z&&(Z.content=L,Z.ctext=U,Z.olinks=W,Z.boosting=K,V.updateBlock(Z))}B&&V.commit()},setBlockMetadata:M=>{let{blockId:E,metadata:L,tr:V,commit:B}=M;V??=o.createBlockTransaction({type:"ui",changeSources:[E]}),B??=!0;const F=o.getBlock(E);if(!F)return;const I=n().getOccurs(F.acturalSrc);for(const U of I){const W=o.getBlock(U);W&&(W.metadata=L,V.updateBlock(W))}B&&V.commit()},insertNormalBlock:M=>{let{pos:E,content:L,meta:V,childrenIds:B,tr:F,commit:j}=M;B??=[],F??=o.createBlockTransaction({type:"ui"}),j??=!0;const I=n(),U=a(E);if(!U)return;const{parentId:W,childIndex:K}=U,G=o.getBlock(W);if(!G)return;const Z=G.type=="normalBlock"?G:o.getBlock(G.acturalSrc);if(!Z)return;const oe=nanoid();F.addBlock({id:oe,type:"normalBlock",parentId:W,childrenIds:B,fold:!0,content:L,metadata:V??{}}),W==Z.id&&Z.fold&&(Z.fold=!1),Z.childrenIds.splice(K,0,oe),F.updateBlock(Z);const Y=I.getOccurs(Z.acturalSrc,!1);for(const se of Y){const le=o.getBlock(se);if(!le||le.type=="virtualBlock"&&!le.childrenCreated)continue;const ce=nanoid();F.addBlock({id:ce,type:"virtualBlock",childrenIds:[],fold:!0,parentId:le.id,src:oe,childrenCreated:!1}),se==W&&le.fold&&(le.fold=!1),le.childrenIds.splice(K,0,ce),F.updateBlock(le)}return j&&F.commit(),{newNormalBlockId:oe}},insertNormalBlocks:M=>{let{pos:E,blocks:L,tr:V,commit:B}=M;if(L.length===0)return;V??=o.createBlockTransaction({type:"ui"}),B??=!0;const F=n();let j;const I=a(E);if(!I)return;const{parentId:U,childIndex:W}=I,K=o.getBlock(U);if(!K)return;const G=K.type=="normalBlock"?K:o.getBlock(K.acturalSrc);if(!G)return;const Z=L.map(Y=>Y.id??nanoid());L.forEach(({content:Y,meta:se,childrenIds:le},ce)=>{const de=Z[ce];V.addBlock({id:de,type:"normalBlock",parentId:U,childrenIds:le??[],fold:!1,content:Y,metadata:se??{}})}),G.childrenIds.splice(W,0,...Z),G.fold&&(G.fold=!1),V.updateBlock(G),U==G.id&&(j=Z[0]);const oe=F.getOccurs(G.acturalSrc,!1);for(const Y of oe){const se=o.getBlock(Y);if(!se||se.type=="virtualBlock"&&!se.childrenCreated)continue;const le=Z.map(ce=>{const de=nanoid();return V.addBlock({id:de,type:"virtualBlock",childrenIds:[],fold:!0,parentId:se.id,src:ce,childrenCreated:!1}),de});se.childrenIds.splice(W,0,...le),Y==U&&(se.fold=!1,j=le[0]),V.updateBlock(se)}return B&&V.commit(),{focusNext:j,newNormalBlockIds:Z}},insertMirrorBlock:M=>{let{pos:E,srcBlockId:L,tr:V,commit:B}=M;V??=o.createBlockTransaction({type:"ui"}),B??=!0;const F=n(),j=a(E);if(!j)return;const{parentId:I,childIndex:U}=j,W=o.getBlock(I);if(!W)return;const K=W.type=="normalBlock"?W:o.getBlock(W.acturalSrc);if(!K)return;const G=o.getBlock(L);if(!G)return;const Z=G.type==="normalBlock"?G:o.getBlock(G.acturalSrc);if(!Z)return;const oe=nanoid(),Y=[];for(const ce of Z.childrenIds){const de=o.getBlock(ce);if(!de)continue;const ge={...de,id:nanoid(),parentId:oe,type:"virtualBlock",fold:!0,src:ce,acturalSrc:"src"in de?de.src:de.id,childrenCreated:!1};V.addBlock(ge),Y.push(ge.id)}const se={...G,id:oe,parentId:K.id,type:"mirrorBlock",childrenIds:Y,fold:!0,src:Z.id};V.addBlock(se),I==K.id&&(K.fold=!1),K.childrenIds.splice(U,0,se.id),V.updateBlock(K);const le=F.getOccurs(K.id,!1);for(const ce of le){const de=o.getBlock(ce);if(!de)continue;const ge={...se,id:nanoid(),parentId:ce,type:"virtualBlock",childrenIds:[],fold:!0,src:se.id,childrenCreated:!1};ce==I&&(de.fold=!1),!(de.type==="virtualBlock"&&!de.childrenCreated)&&(de.childrenIds.splice(U,0,ge.id),V.updateBlock(de))}return B&&V.commit(),{}},deleteBlock:M=>{let{blockId:E,tr:L,commit:V}=M;V??=!0;const B=n(),F=o.getBlock(E);if(!F){const U=o.createBlockTransaction({type:"ui"}),W=o.missingBlockParents.get(E);if(!W)return;const K=o.getBlock(W);if(!K)return;const G=K.childrenIds.indexOf(E);if(G<0)return;const Z=B.getOccurs(K.acturalSrc,!0);for(const oe of Z){const Y=o.getBlock(oe);Y&&(Y.childrenIds.splice(G,1),U.updateBlock(Y))}U.commit();return}const j=[],I=U=>{if(U.type=="normalBlock"||U.type=="virtualBlock"){const K=B.getOccurs(U.acturalSrc,!0).map(G=>o.getBlock(G)).filter(G=>G!=null);j.push(...K);for(const G of K)for(const Z of G.childrenIds){const oe=o.getBlock(Z);oe&&I(oe)}}else if(U.type=="mirrorBlock"){j.push(U);for(const W of U.childrenIds){const K=o.getBlock(W);K&&I(K)}}};I(F),L??=o.createBlockTransaction({type:"ui"});for(const U of j)L.deleteBlock(U.id);if(F.type=="normalBlock"||F.type=="virtualBlock"){const U=o.getBlock(F.parentId);if(!U)return;const W=U.childrenIds.indexOf(F.id);if(W<0)return;const K=B.getOccurs(U.acturalSrc,!0);for(const G of K){const Z=o.getBlock(G);Z&&(Z.childrenIds.splice(W,1),L.updateBlock(Z))}}else{const U=o.getBlock(F.parentId);if(!U)return;const W=U.childrenIds.indexOf(F.id);if(W<0)return;U.childrenIds.splice(W,1),L.updateBlock(U)}V&&L.commit()},promoteBlock:M=>{let{blockId:E,tr:L,commit:V}=M;L??=o.createBlockTransaction({type:"ui"}),V??=!0;const B=n(),F=o.getBlock(E);if(!F||F.id=="root")return;const j=o.getBlock(F.acturalSrc);if(!j)return;const I=F.parentRef.value;if(!I)return;const U=o.getBlock(I.acturalSrc);if(!U)return;const W=I.childrenIds.indexOf(F.id);if(W<=0)return;const K=o.getBlock(I.childrenIds[W-1]);if(!K)return;const G=o.getBlock(K.acturalSrc);if(!G)return;const Z=U.childrenIds.splice(W,1)[0],oe=o.getBlock(Z);if(!oe)return;L.updateBlock(U),G.childrenIds.push(Z),G.id==K.id&&(G.fold=!1),L.updateBlock(G),oe.parentId=G.id,L.updateBlock(oe);const Y=B.getOccurs(U.id,!1);for(const le of Y){const ce=o.getBlock(le);if(!ce||ce.type=="virtualBlock"&&!ce.childrenCreated)continue;const de=ce.childrenIds.splice(W,1)[0];L.updateBlock(ce),L.deleteBlock(de)}const se=B.getOccurs(G.id,!1);for(const le of se){const ce=o.getBlock(le);if(!ce||ce.type=="virtualBlock"&&!ce.childrenCreated)continue;const de={...j,id:nanoid(),parentId:ce.id,type:"virtualBlock",fold:!0,src:j.id,childrenCreated:!1};ce.childrenIds.push(de.id),le==K.id&&(ce.fold=!1),L.updateBlock(ce),L.addBlock(de)}return V&&L.commit(),{}},demoteBlock:M=>{let{blockId:E,tr:L,commit:V}=M;L??=o.createBlockTransaction({type:"ui"}),V??=!0;const B=n(),F=o.getBlock(E);if(!F||F.parentId=="null")return;const j=o.getBlock(F.acturalSrc);if(!j)return;const I=o.getBlock(F.parentId);if(!I||I.parentId=="null")return;const U=o.getBlock(I.acturalSrc);if(!U)return;const W=o.getBlock(I.parentId);if(!W)return;const K=o.getBlock(W.acturalSrc);if(!K)return;const G=U.childrenIds.indexOf(j.id),Z=U.childrenIds.splice(G,1)[0],oe=o.getBlock(Z);if(!oe)return;L.updateBlock(U);let Y;I.type=="mirrorBlock"&&W.type=="normalBlock"?(Y=W.childrenIds.indexOf(I.id),W.childrenIds.splice(Y+1,0,Z),L.updateBlock(W),oe.parentId=W.id,L.updateBlock(oe)):(Y=K.childrenIds.indexOf(U.id),K.childrenIds.splice(Y+1,0,Z),L.updateBlock(K),oe.parentId=K.id,L.updateBlock(oe));const se=B.getOccurs(U.id,!1);for(const ce of se){const de=o.getBlock(ce);if(!de||de.type=="virtualBlock"&&!de.childrenCreated)continue;const ge=de.childrenIds.splice(G,1)[0];L.updateBlock(de),L.deleteBlock(ge)}const le=B.getOccurs(K.id,!1);for(const ce of le){const de=o.getBlock(ce);if(!de||de.type=="virtualBlock"&&!de.childrenCreated)continue;const ge={...j,id:nanoid(),parentId:de.id,type:"virtualBlock",fold:!0,src:j.id,childrenCreated:!1};de.childrenIds.splice(Y+1,0,ge.id),L.updateBlock(de),L.addBlock(ge)}return V&&L.commit(),{}},toggleFold:s,moveBlock:M=>{let{blockId:E,pos:L,tr:V,commit:B}=M;B??=!0;const F=n(),j=a(L);if(!j)return null;const I=o.getBlock(E);if(!I)return null;const U=o.getBlock(I.acturalSrc);if(!U)return null;const W=o.getBlock(U.parentId);if(!W)return null;const K=o.getBlock(j.parentId);if(!K)return null;const G=o.getBlock(K.acturalSrc);if(!G)return null;const Z=W.childrenIds.indexOf(U.id);if(Z==-1)return null;let oe;if(W.id===G.id?oe=Z<j.childIndex?j.childIndex-1:j.childIndex:oe=j.childIndex,oe<0||oe>G.childrenIds.length)return null;if(V??=o.createBlockTransaction({type:"ui"}),W.id==G.id){if(Z==j.childIndex||Z+1==j.childIndex)return null;W.childrenIds.splice(Z,1),W.childrenIds.splice(oe,0,U.id),V.updateBlock(W)}else W.childrenIds.splice(Z,1),V.updateBlock(W),G.childrenIds.splice(oe,0,U.id),V.updateBlock(G),U.parentId=G.id,V.updateBlock(U);const Y=F.getOccurs(W.id,!1);for(const le of Y){const ce=o.getBlock(le);if(!ce||ce.type=="virtualBlock"&&!ce.childrenCreated)continue;const de=ce.childrenIds.splice(Z,1)[0];V.updateBlock(ce),V.deleteBlock(de)}const se=F.getOccurs(G.id,!1);for(const le of se){const ce=o.getBlock(le);if(!ce||ce.type=="virtualBlock"&&!ce.childrenCreated)continue;const de={...structuredClone(U),id:nanoid(),parentId:ce.id,type:"virtualBlock",childrenIds:[],fold:!0,src:U.id,childrenCreated:!1};ce.childrenIds.splice(oe,0,de.id),V.updateBlock(ce),V.addBlock(de)}return B&&V.commit(),{}},moveBlocks:M=>{let{blockIds:E,pos:L,tr:V,commit:B}=M;B??=!0,V??=o.createBlockTransaction({type:"ui"});const F=n(),j=a(L);if(!j)return null;const I=E[0],U=o.getBlock(I);if(!U)return null;const W=cloneBlock(U.parentRef.value);if(!W)return null;const K=W.childrenIds.indexOf(I);if(K==-1)return null;for(let le=1;le<E.length;le++){const ce=E[le],de=W.childrenIds[K+le];if(ce!==de)return null}const G=K+E.length-1,Z=W.type==="normalBlock"?W:o.getBlock(W.acturalSrc);if(!Z)return null;const oe=o.getBlock(j.parentId);if(!oe)return null;const Y=oe.type==="normalBlock"?oe:o.getBlock(oe.acturalSrc);if(!Y)return null;let se;if(Z.id===Y.id){if(j.childIndex>=K&&j.childIndex<=G+1)return null;se=Z.childrenIds.splice(K,E.length);const le=j.childIndex<K?j.childIndex:j.childIndex-E.length;Z.childrenIds.splice(le,0,...se),V.updateBlock(Z);const ce=F.getOccurs(Z.id,!1);for(const de of ce){const ge=o.getBlock(de);if(!ge||ge.type=="virtualBlock"&&!ge.childrenCreated)continue;const qe=ge.childrenIds.splice(K,E.length);ge.childrenIds.splice(le,0,...qe),V.updateBlock(ge)}}else{se=Z.childrenIds.splice(K,E.length),V.updateBlock(Z),Y.childrenIds.splice(j.childIndex,0,...se),V.updateBlock(Y);for(const de of se){const ge=o.getBlock(de);ge&&(ge.parentId=Y.id,V.updateBlock(ge))}const le=F.getOccurs(Z.id,!1);for(const de of le){const ge=o.getBlock(de);!ge||ge.type=="virtualBlock"&&!ge.childrenCreated||(ge.childrenIds.splice(K,E.length),V.updateBlock(ge))}const ce=F.getOccurs(Y.id,!1);for(const de of ce){const ge=o.getBlock(de);if(!ge||ge.type=="virtualBlock"&&!ge.childrenCreated)continue;const qe=[];for(const ke of se){const Ee=o.getBlock(ke);if(!Ee)continue;const Oe={...Ee,id:nanoid(),parentId:ge.id,type:"virtualBlock",childrenIds:[],fold:!0,src:Ee.id,childrenCreated:!1};qe.push(Oe.id),V.addBlock(Oe)}ge.childrenIds.splice(j.childIndex,0,...qe),V.updateBlock(ge)}}return B&&V.commit(),{}},locateBlock:async(M,E)=>{const L=[e.value],V=o.getBlockPath(M);if(V==null)return;let B,F;for(const j of L)if(F=V.findIndex(I=>I.id===j),F!=-1){B=j;break}if(B&&F!=null&&F>0)for(let j=F;j>0;j--){const I=V[j];I.fold&&await s(I.id,!1)}else{if(E?.getId()!=="main")return;const j=o.getBlockPath(L[0]);if(!j)return;let I=j.length-1,U=V.length-1;for(;I>=0&&U>=0&&j[I].id==V[U].id;)I--,U--;const W=I<0?j[0]:U<0?V[0]:j[I+1],K=I<0?V.slice(0,U+1):U<0?j.slice(0,I+1):V.slice(U);e.value=W.id;for(const G of K)G.fold&&await s(G.id,!1)}}}},kbViewRegistry=createContext(()=>{const o={};return{register:(a,s)=>{o[a]=s},get:a=>o[a]}}),BlocksContext=createContext(()=>{const o=useRouterParams(),{token:e}=ServerInfoContext.useContext(),{get:n}=kbViewRegistry.useContext(),{mainRootBlockId:a}=MainTreeContext.useContext(),s=()=>n("index"),l=createSyncLayer(),c=createBlocksManager(l),d=createBlocksEditor(c,a,s);return watch(o,f=>{l.disconnect();const{serverUrl:p,location:_}=f??{};!p||!_||!e.value||l.connect(decodeURIComponent(p),decodeURIComponent(_),e.value)},{immediate:!0}),{blocksManager:c,blockEditor:d,syncLayer:l,synced:c.synced}}),FocusModeContext=createContext(()=>{const o=ref(!1),e=ref(!1);return{focusModeEnabled:o,focusNow:e}}),SPACE_OR_PUNCTUATION=/[|\n\r\s!"'&()*,\-./:;<=>?@[\\\]^_`{}~\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u,CJK=/[\u4E00-\u9FA5]/,ngramSplit=(o,e)=>{const n=[];for(let a=0;a<o.length-e+1;a++)n.push(o.slice(a<0?0:a,a+e));return n},extractAllPrefixies=o=>{const e=[];for(let n=1;n<=o.length;n++)e.push(o.slice(0,n));return e},splitByCjk=(o,e,n,a={})=>{let s=!1;const l=[],c=(d,u)=>{a.caseSensitive||(d=d.toLowerCase()),u?e(d):n(d)};for(const d of o)if(SPACE_OR_PUNCTUATION.test(d))l.length>0&&(c(l.join(""),s),l.length=0);else if(l.length==0)l.push(d),s=CJK.test(d);else{const u=CJK.test(d);u!=s?(c(l.join(""),s),l.length=0,l.push(d),s=u):l.push(d)}l.length>0&&c(l.join(""),s)},hybridTokenize=(o,e=!1,n=2,a=!0)=>{const s=[];return splitByCjk(o,l=>s.push(...ngramSplit(l,n)),l=>{s.push(l),a&&s.push(...extractAllPrefixies(l).slice(0,-1))},{caseSensitive:e}),s},calcMatchScore=(o,e)=>{let n=0;const a=e.toLowerCase();for(const s of o)a.includes(s)&&(n+=s.length);return n/e.length};function parse_option(o,e){return typeof o<"u"?o:e}function create_object_array(o){const e=Array(o);for(let n=0;n<o;n++)e[n]=create_object();return e}function get_keys(o){return Object.keys(o)}function create_object(){return Object.create(null)}function concat(o){return[].concat.apply([],o)}function sort_by_length_down(o,e){return e.length-o.length}function is_array(o){return o.constructor===Array}function is_string(o){return typeof o=="string"}function is_object(o){return typeof o=="object"}function is_function(o){return typeof o=="function"}function pipeline(o,e,n,a){if(o&&(e&&(o=replace(o,e)),this.matcher&&(o=replace(o,this.matcher)),this.stemmer&&1<o.length&&(o=replace(o,this.stemmer)),a&&1<o.length&&(o=collapse(o)),n||n==="")){const s=o.split(n);return this.filter?filter(s,this.filter):s}return o}const regex_whitespace=/[\p{Z}\p{S}\p{P}\p{C}]+/u;function init_filter(o){const e=create_object();for(let n=0,a=o.length;n<a;n++)e[o[n]]=1;return e}function init_stemmer_or_matcher(o,e){const n=get_keys(o),a=n.length,s=[];let l="",c=0;for(let d=0,u,f;d<a;d++)u=n[d],f=o[u],f?(s[c++]=regex(e?"(?!\\b)"+u+"(\\b|_)":u),s[c++]=f):l+=(l?"|":"")+u;return l&&(s[c++]=regex(e?"(?!\\b)("+l+")(\\b|_)":"("+l+")"),s[c]=""),s}function replace(o,e){for(let n=0,a=e.length;n<a&&(o=o.replace(e[n],e[n+1]),!!o);n+=2);return o}function regex(o){return new RegExp(o,"g")}function collapse(o){let e="",n="";for(let a=0,s=o.length,l;a<s;a++)(l=o[a])!==n&&(e+=n=l);return e}function filter(o,e){const n=o.length,a=[];for(let s=0,l=0;s<n;s++){const c=o[s];c&&!e[c]&&(a[l++]=c)}return a}function encode$2(o){return pipeline.call(this,(""+o).toLowerCase(),!1,regex_whitespace,!1)}const global_lang={},global_charset={};function apply_async(o){register$1(o,"add"),register$1(o,"append"),register$1(o,"search"),register$1(o,"update"),register$1(o,"remove")}function register$1(o,e){o[e+"Async"]=function(){const n=this,a=arguments,s=a[a.length-1];let l;is_function(s)&&(l=s,delete a[a.length-1]);const c=new Promise(function(d){setTimeout(function(){n.async=!0;const u=n[e].apply(n,a);n.async=!1,d(u)})});return l?(c.then(l),this):c}}function intersect(o,e,n,a){const s=o.length;let l=[],c,d,u=0;a&&(a=[]);for(let f=s-1;0<=f;f--){const p=o[f],_=p.length,b=create_object();let v=!c;for(let k=0;k<_;k++){const x=p[k],M=x.length;if(M)for(let E=0,L,V;E<M;E++)if(V=x[E],c){if(c[V]){if(!f){if(n)n--;else if(l[u++]=V,u===e)return l}(f||a)&&(b[V]=1),v=!0}if(a&&(L=(d[V]||0)+1,d[V]=L,L<s)){const B=a[L-2]||(a[L-2]=[]);B[B.length]=V}}else b[V]=1}if(a)c||(d=b);else if(!v)return[];c=b}if(a)for(let f=a.length-1,p,_;0<=f;f--){p=a[f],_=p.length;for(let b=0,v;b<_;b++)if(v=p[b],!c[v]){if(n)n--;else if(l[u++]=v,u===e)return l;c[v]=1}}return l}function intersect_union(o,e){const n=create_object(),a=create_object(),s=[];for(let l=0;l<o.length;l++)n[o[l]]=1;for(let l=0,c;l<e.length;l++){c=e[l];for(let d=0,u;d<c.length;d++)u=c[d],n[u]&&(a[u]||(a[u]=1,s[s.length]=u))}return s}function CacheClass(o){this.limit=o!==!0&&o,this.cache=create_object(),this.queue=[]}function searchCache(o,e,n){is_object(o)&&(o=o.query);let a=this.cache.get(o);return a||(a=this.search(o,e,n),this.cache.set(o,a)),a}CacheClass.prototype.set=function(o,e){if(!this.cache[o]){let n=this.queue.length;n===this.limit?delete this.cache[this.queue[n-1]]:n++;for(let a=n-1;0<a;a--)this.queue[a]=this.queue[a-1];this.queue[0]=o}this.cache[o]=e};CacheClass.prototype.get=function(o){const e=this.cache[o];if(this.limit&&e){const n=this.queue.indexOf(o);if(n){const a=this.queue[n-1];this.queue[n-1]=this.queue[n],this.queue[n]=a}}return e};CacheClass.prototype.del=function(o){for(let e=0,n,a;e<this.queue.length;e++)a=this.queue[e],n=this.cache[a],n.includes(o)&&(this.queue.splice(e--,1),delete this.cache[a])};const preset={memory:{charset:"latin:extra",resolution:3,minlength:4,fastupdate:!1},performance:{resolution:3,minlength:3,optimize:!1,context:{depth:2,resolution:1}},match:{charset:"latin:extra",tokenize:"reverse"},score:{charset:"latin:advanced",resolution:20,minlength:3,context:{depth:3,resolution:9}},default:{}};function apply_preset(o){if(is_string(o))o=preset[o];else{const e=o.preset;e&&(o=Object.assign({},e[e],o))}return o}function async(o,e,n,a,s,l,c,d){setTimeout(function(){const u=o(n?n+"."+a:a,JSON.stringify(c));u&&u.then?u.then(function(){e.export(o,e,n,s,l+1,d)}):e.export(o,e,n,s,l+1,d)})}function exportIndex(o,e,n,a,s,l){let c=!0;typeof l>"u"&&(c=new Promise(f=>{l=f}));let d,u;switch(s||(s=0)){case 0:if(d="reg",this.fastupdate){u=create_object();for(let f in this.register)u[f]=1}else u=this.register;break;case 1:d="cfg",u={doc:0,opt:this.optimize?1:0};break;case 2:d="map",u=this.map;break;case 3:d="ctx",u=this.ctx;break;default:typeof n>"u"&&l&&l();return}return async(o,e||this,n,d,a,s,u,l),c}function importIndex(o,e){if(e)switch(is_string(e)&&(e=JSON.parse(e)),o){case"cfg":this.optimize=!!e.opt;break;case"reg":this.fastupdate=!1,this.register=e;break;case"map":this.map=e;break;case"ctx":this.ctx=e;break}}function exportDocument(o,e,n,a,s,l){let c;if(typeof l>"u"&&(c=new Promise(d=>{l=d})),s||(s=0),a||(a=0),a<this.field.length){const d=this.field[a],u=this.index[d];e=this,setTimeout(function(){u.export(o,e,s?d:"",a,s++,l)||(a++,s=1,e.export(o,e,d,a,s,l))})}else{let d,u;switch(s){case 1:d="tag",u=this.tagindex,n=null;break;case 2:d="store",u=this.store,n=null;break;default:l();return}async(o,this,n,d,a,s,u,l)}return c}function importDocument(o,e){if(e)switch(is_string(e)&&(e=JSON.parse(e)),o){case"tag":this.tagindex=e;break;case"reg":this.fastupdate=!1,this.register=e;for(let a=0,s;a<this.field.length;a++)s=this.index[this.field[a]],s.register=e,s.fastupdate=!1;break;case"store":this.store=e;break;default:o=o.split(".");const n=o[0];o=o[1],n&&o&&this.index[n].import(o,e)}}function Index(o,e){if(!(this instanceof Index))return new Index(o);let n,a,s;o?(o=apply_preset(o),n=o.charset,a=o.lang,is_string(n)&&(n.indexOf(":")===-1&&(n+=":default"),n=global_charset[n]),is_string(a)&&(a=global_lang[a])):o={};let l,c,d=o.context||{};this.encode=o.encode||n&&n.encode||encode$2,this.register=e||create_object(),this.resolution=l=o.resolution||9,this.tokenize=s=n&&n.tokenize||o.tokenize||"strict",this.depth=s==="strict"&&d.depth,this.bidirectional=parse_option(d.bidirectional,!0),this.optimize=c=parse_option(o.optimize,!0),this.fastupdate=parse_option(o.fastupdate,!0),this.minlength=o.minlength||1,this.boost=o.boost,this.map=c?create_object_array(l):create_object(),this.resolution_ctx=l=d.resolution||1,this.ctx=c?create_object_array(l):create_object(),this.rtl=n&&n.rtl||o.rtl,this.matcher=(s=o.matcher||a&&a.matcher)&&init_stemmer_or_matcher(s,!1),this.stemmer=(s=o.stemmer||a&&a.stemmer)&&init_stemmer_or_matcher(s,!0),this.filter=(s=o.filter||a&&a.filter)&&init_filter(s),this.cache=(s=o.cache)&&new CacheClass(s)}Index.prototype.append=function(o,e){return this.add(o,e,!0)};Index.prototype.add=function(o,e,n,a){if(e&&(o||o===0)){if(!a&&!n&&this.register[o])return this.update(o,e);e=this.encode(""+e);const s=e.length;if(s){const l=create_object(),c=create_object(),d=this.depth,u=this.resolution;for(let f=0;f<s;f++){let p=e[this.rtl?s-1-f:f],_=p.length;if(p&&_>=this.minlength&&(d||!c[p])){let b=get_score(u,s,f),v="";switch(this.tokenize){case"full":if(2<_){for(let k=0;k<_;k++)for(let x=_;x>k;x--)if(x-k>=this.minlength){const M=get_score(u,s,f,_,k);v=p.substring(k,x),this.push_index(c,v,M,o,n)}break}case"reverse":if(1<_){for(let k=_-1;0<k;k--)if(v=p[k]+v,v.length>=this.minlength){const x=get_score(u,s,f,_,k);this.push_index(c,v,x,o,n)}v=""}case"forward":if(1<_){for(let k=0;k<_;k++)v+=p[k],v.length>=this.minlength&&this.push_index(c,v,b,o,n);break}default:if(this.boost&&(b=Math.min(0|b/this.boost(e,p,f),u-1)),this.push_index(c,p,b,o,n),d&&1<s&&f<s-1){const k=create_object(),x=this.resolution_ctx,M=p,E=Math.min(d+1,s-f);k[M]=1;for(let L=1;L<E;L++)if(p=e[this.rtl?s-1-f-L:f+L],p&&p.length>=this.minlength&&!k[p]){k[p]=1;const V=get_score(x+(s/2>x?0:1),s,f,E-1,L-1),B=this.bidirectional&&p>M;this.push_index(l,B?M:p,V,o,n,B?p:M)}}}}}this.fastupdate||(this.register[o]=1)}}return this};function get_score(o,e,n,a,s){return n&&1<o?e+(a||0)<=o?n+(s||0):0|(o-1)/(e+(a||0))*(n+(s||0))+1:0}Index.prototype.push_index=function(o,e,n,a,s,l){let c=l?this.ctx:this.map;if((!o[e]||l&&!o[e][l])&&(this.optimize&&(c=c[n]),l?(o=o[e]||(o[e]=create_object()),o[l]=1,c=c[l]||(c[l]=create_object())):o[e]=1,c=c[e]||(c[e]=[]),this.optimize||(c=c[n]||(c[n]=[])),(!s||!c.includes(a))&&(c[c.length]=a,this.fastupdate))){const d=this.register[a]||(this.register[a]=[]);d[d.length]=c}};Index.prototype.search=function(o,e,n){n||(!e&&is_object(o)?(n=o,o=n.query):is_object(e)&&(n=e));let a=[],s,l,c,d=0;if(n&&(o=n.query||o,e=n.limit,d=n.offset||0,l=n.context,c=n.suggest),o&&(o=this.encode(""+o),s=o.length,1<s)){const _=create_object(),b=[];for(let v=0,k=0,x;v<s;v++)if(x=o[v],x&&x.length>=this.minlength&&!_[x]){if(!this.optimize&&!c&&!this.map[x])return a;b[k++]=x,_[x]=1}o=b,s=o.length}if(!s)return a;e||(e=100);let u=this.depth&&1<s&&l!==!1,f=0,p;u?(p=o[0],f=1):1<s&&o.sort(sort_by_length_down);for(let _,b;f<s;f++){if(b=o[f],u?(_=this.add_result(a,c,e,d,s===2,b,p),(!c||_!==!1||!a.length)&&(p=b)):_=this.add_result(a,c,e,d,s===1,b),_)return _;if(c&&f==s-1){let v=a.length;if(v){if(v===1)return single_result(a[0],e,d)}else{if(u){u=0,f=-1;continue}return a}}}return intersect(a,e,d,c)};Index.prototype.add_result=function(o,e,n,a,s,l,c){let d=[],u=c?this.ctx:this.map;if(this.optimize||(u=get_array(u,l,c,this.bidirectional)),u){let f=0;const p=Math.min(u.length,c?this.resolution_ctx:this.resolution);for(let _=0,b=0,v,k;_<p&&(v=u[_],!(v&&(this.optimize&&(v=get_array(v,l,c,this.bidirectional)),a&&v&&s&&(k=v.length,k<=a?(a-=k,v=null):(v=v.slice(a),a=0)),v&&(d[f++]=v,s&&(b+=v.length,b>=n)))));_++);if(f){if(s)return single_result(d,n,0);o[o.length]=d;return}}return!e&&d};function single_result(o,e,n){return o.length===1?o=o[0]:o=concat(o),n||o.length>e?o.slice(n,n+e):o}function get_array(o,e,n,a){if(n){const s=a&&e>n;o=o[s?e:n],o=o&&o[s?n:e]}else o=o[e];return o}Index.prototype.contain=function(o){return!!this.register[o]};Index.prototype.update=function(o,e){return this.remove(o).add(o,e)};Index.prototype.remove=function(o,e){const n=this.register[o];if(n){if(this.fastupdate)for(let a=0,s;a<n.length;a++)s=n[a],s.splice(s.indexOf(o),1);else remove_index(this.map,o,this.resolution,this.optimize),this.depth&&remove_index(this.ctx,o,this.resolution_ctx,this.optimize);e||delete this.register[o],this.cache&&this.cache.del(o)}return this};function remove_index(o,e,n,a,s){let l=0;if(is_array(o))if(s){const c=o.indexOf(e);c!==-1?1<o.length&&(o.splice(c,1),l++):l++}else{s=Math.min(o.length,n);for(let c=0,d;c<s;c++)d=o[c],d&&(l=remove_index(d,e,n,a,s),!a&&!l&&delete o[c])}else for(let c in o)l=remove_index(o[c],e,n,a,s),l||delete o[c];return l}Index.prototype.searchCache=searchCache;Index.prototype.export=exportIndex;Index.prototype.import=importIndex;apply_async(Index.prototype);function handler(o){o=o.data;const e=self._index,n=o.args,a=o.task;switch(a){case"init":const s=o.options||{},l=o.factory,c=s.encode;s.cache=!1,c&&c.indexOf("function")===0&&(s.encode=Function("return "+c)()),l?(Function("return "+l)()(self),self._index=new self.FlexSearch.Index(s),delete self.FlexSearch):self._index=new Index(s);break;default:const d=o.id,u=e[a].apply(e,n);postMessage(a==="search"?{id:d,msg:u}:{id:d})}}let pid=0;function WorkerIndex(o){if(!(this instanceof WorkerIndex))return new WorkerIndex(o);let e;o?is_function(e=o.encode)&&(o.encode=e.toString()):o={};let n=(self||window)._factory;n&&(n=n.toString());const a=typeof window>"u"&&self.exports,s=this;this.worker=create$1(n,a,o.worker),this.resolver=create_object(),this.worker&&(a?this.worker.on("message",function(l){s.resolver[l.id](l.msg),delete s.resolver[l.id]}):this.worker.onmessage=function(l){l=l.data,s.resolver[l.id](l.msg),delete s.resolver[l.id]},this.worker.postMessage({task:"init",factory:n,options:o}))}register("add");register("append");register("search");register("update");register("remove");function register(o){WorkerIndex.prototype[o]=WorkerIndex.prototype[o+"Async"]=function(){const e=this,n=[].slice.call(arguments),a=n[n.length-1];let s;is_function(a)&&(s=a,n.splice(n.length-1,1));const l=new Promise(function(c){setTimeout(function(){e.resolver[++pid]=c,e.worker.postMessage({task:o,id:pid,args:n})})});return s?(l.then(s),this):l}}function create$1(factory,is_node_js,worker_path){let worker;try{worker=is_node_js?eval('new (require("worker_threads")["Worker"])(__dirname + "/node/node.js")'):factory?new Worker(URL.createObjectURL(new Blob(["onmessage="+handler.toString()],{type:"text/javascript"}))):new Worker(is_string(worker_path)?worker_path:"worker/worker.js",{type:"module"})}catch(o){}return worker}function Document(o){if(!(this instanceof Document))return new Document(o);const e=o.document||o.doc||o;let n;this.tree=[],this.field=[],this.marker=[],this.register=create_object(),this.key=(n=e.key||e.id)&&parse_tree(n,this.marker)||"id",this.fastupdate=parse_option(o.fastupdate,!0),this.storetree=(n=e.store)&&n!==!0&&[],this.store=n&&create_object(),this.tag=(n=e.tag)&&parse_tree(n,this.marker),this.tagindex=n&&create_object(),this.cache=(n=o.cache)&&new CacheClass(n),o.cache=!1,this.worker=o.worker,this.async=!1,this.index=parse_descriptor.call(this,o,e)}function parse_descriptor(o,e){const n=create_object();let a=e.index||e.field||e;is_string(a)&&(a=[a]);for(let s=0,l,c;s<a.length;s++)l=a[s],is_string(l)||(c=l,l=l.field),c=is_object(c)?Object.assign({},o,c):o,this.worker&&(n[l]=new WorkerIndex(c),n[l].worker||(this.worker=!1)),this.worker||(n[l]=new Index(c,this.register)),this.tree[s]=parse_tree(l,this.marker),this.field[s]=l;if(this.storetree){let s=e.store;is_string(s)&&(s=[s]);for(let l=0;l<s.length;l++)this.storetree[l]=parse_tree(s[l],this.marker)}return n}function parse_tree(o,e){const n=o.split(":");let a=0;for(let s=0;s<n.length;s++)o=n[s],0<=o.indexOf("[]")&&(o=o.substring(0,o.length-2),o&&(e[a]=!0)),o&&(n[a++]=o);return a<n.length&&(n.length=a),1<a?n:n[0]}function parse_simple(o,e){if(is_string(e))o=o[e];else for(let n=0;o&&n<e.length;n++)o=o[e[n]];return o}function store_value(o,e,n,a,s){if(o=o[s],a===n.length-1)e[s]=o;else if(o)if(is_array(o)){e=e[s]=Array(o.length);for(let l=0;l<o.length;l++)store_value(o,e,n,a,l)}else e=e[s]||(e[s]=create_object()),s=n[++a],store_value(o,e,n,a,s)}function add_index(o,e,n,a,s,l,c,d){if(o=o[c],o)if(a===e.length-1){if(is_array(o)){if(n[a]){for(let u=0;u<o.length;u++)s.add(l,o[u],!0,!0);return}o=o.join(" ")}s.add(l,o,d,!0)}else if(is_array(o))for(let u=0;u<o.length;u++)add_index(o,e,n,a,s,l,u,d);else c=e[++a],add_index(o,e,n,a,s,l,c,d)}Document.prototype.add=function(o,e,n){if(is_object(o)&&(e=o,o=parse_simple(e,this.key)),e&&(o||o===0)){if(!n&&this.register[o])return this.update(o,e);for(let a=0,s,l;a<this.field.length;a++)l=this.field[a],s=this.tree[a],is_string(s)&&(s=[s]),add_index(e,s,this.marker,0,this.index[l],o,s[0],n);if(this.tag){let a=parse_simple(e,this.tag),s=create_object();is_string(a)&&(a=[a]);for(let l=0,c,d;l<a.length;l++)if(c=a[l],!s[c]&&(s[c]=1,d=this.tagindex[c]||(this.tagindex[c]=[]),(!n||!d.includes(o))&&(d[d.length]=o,this.fastupdate))){const u=this.register[o]||(this.register[o]=[]);u[u.length]=d}}if(this.store&&(!n||!this.store[o])){let a;if(this.storetree){a=create_object();for(let s=0,l;s<this.storetree.length;s++)l=this.storetree[s],is_string(l)?a[l]=e[l]:store_value(e,a,l,0,l[0])}this.store[o]=a||e}}return this};Document.prototype.append=function(o,e){return this.add(o,e,!0)};Document.prototype.update=function(o,e){return this.remove(o).add(o,e)};Document.prototype.remove=function(o){if(is_object(o)&&(o=parse_simple(o,this.key)),this.register[o]){for(let e=0;e<this.field.length&&(this.index[this.field[e]].remove(o,!this.worker),!this.fastupdate);e++);if(this.tag&&!this.fastupdate)for(let e in this.tagindex){const n=this.tagindex[e],a=n.indexOf(o);a!==-1&&(1<n.length?n.splice(a,1):delete this.tagindex[e])}this.store&&delete this.store[o],delete this.register[o]}return this};Document.prototype.search=function(o,e,n,a){n||(!e&&is_object(o)?(n=o,o=""):is_object(e)&&(n=e,e=0));let s=[],l=[],c,d,u,f,p,_,b=0;if(n)if(is_array(n))u=n,n=null;else{if(o=n.query||o,c=n.pluck,u=c||n.index||n.field,f=n.tag,d=this.store&&n.enrich,p=n.bool==="and",e=n.limit||e||100,_=n.offset||0,f&&(is_string(f)&&(f=[f]),!o)){for(let k=0,x;k<f.length;k++)x=get_tag.call(this,f[k],e,_,d),x&&(s[s.length]=x,b++);return b?s:[]}is_string(u)&&(u=[u])}u||(u=this.field),p=p&&(1<u.length||f&&1<f.length);const v=!a&&(this.worker||this.async)&&[];for(let k=0,x,M,E;k<u.length;k++){let L;if(M=u[k],is_string(M)||(L=M,M=L.field,o=L.query||o,e=L.limit||e,d=L.enrich||d),v){v[k]=this.index[M].searchAsync(o,e,L||n);continue}else a?x=a[k]:x=this.index[M].search(o,e,L||n);if(E=x&&x.length,f&&E){const V=[];let B=0;p&&(V[0]=[x]);for(let F=0,j,I;F<f.length;F++)j=f[F],I=this.tagindex[j],E=I&&I.length,E&&(B++,V[V.length]=p?[I]:I);B&&(p?x=intersect(V,e||100,_||0):x=intersect_union(x,V),E=x.length)}if(E)l[b]=M,s[b++]=x;else if(p)return[]}if(v){const k=this;return new Promise(function(x){Promise.all(v).then(function(M){x(k.search(o,e,n,M))})})}if(!b)return[];if(c&&(!d||!this.store))return s[0];for(let k=0,x;k<l.length;k++){if(x=s[k],x.length&&d&&(x=apply_enrich.call(this,x)),c)return x;s[k]={field:l[k],result:x}}return s};function get_tag(o,e,n){let a=this.tagindex[o];a&&a.length-n}function apply_enrich(o){const e=Array(o.length);for(let n=0,a;n<o.length;n++)a=o[n],e[n]={id:a,doc:this.store[a]};return e}Document.prototype.contain=function(o){return!!this.register[o]};Document.prototype.get=function(o){return this.store[o]};Document.prototype.set=function(o,e){return this.store[o]=e,this};Document.prototype.searchCache=searchCache;Document.prototype.export=exportDocument;Document.prototype.import=importDocument;apply_async(Document.prototype);const IndexContext=createContext(()=>{const o=useEventBus(),{blocksManager:e}=BlocksContext.useContext(),{register:n}=kbViewRegistry.useContext(),a=shallowReactive(new Map),s=shallowReactive(new Map),l=(B,F,j)=>{j=j||a;const I=j.get(B);I?I.add(F):j.set(B,new Set([F]))},c=(B,F,j)=>{j=j||s;const I=j.get(B);I?I.add(F):j.set(B,new Set([F]))},d=(B,F,j)=>{j=j||a;const I=j.get(B);I&&(I.delete(F),I.size==0&&j.delete(B))},u=(B,F,j)=>{j=j||s;const I=j.get(B);I&&(I.delete(F),I.size==0&&j.delete(B))},f=B=>a.get(B)??new Set,p=B=>s.get(B)??new Set,_=(B,F=!0)=>{const j=[];return j.push(...f(B)),j.push(...p(B)),F&&j.push(B),j};o.on("afterBlocksTrCommit",([B])=>{for(let F=0;F<B.patches.length;F++){const j=B.patches[F],I=B.reversePatches[F];if(j.op==="add"){const U=j.block;U.type==="mirrorBlock"?l(U.src,U.id):U.type==="virtualBlock"&&c(U.src,U.id)}else if(j.op==="delete"&&I.op==="add"){const U=I.block;U.type==="mirrorBlock"?d(U.src,U.id):U.type==="virtualBlock"&&u(U.src,U.id)}}}),o.on("blocksDestroy",()=>{a.clear(),s.clear()});const b=ref({}),v=ref({});o.on("afterBlocksTrCommit",([B])=>{for(let F=0;F<B.patches.length;F++){const j=B.patches[F],I=B.reversePatches[F];if(j.op==="delete"){if(delete b.value[j.blockId],delete v.value[j.blockId],I.op!=="add")continue;const U=I.block;if(U.type!=="normalBlock"||U.content[0]!==BLOCK_CONTENT_TYPES.TEXT)continue;const W=e.getOlinks(U.content[1]);for(const K of W)b.value[K]?.delete(U.id),v.value[K]?.delete(U.id)}else if(j.op==="add"||j.op==="update"){const U=j.block;if(U.type!=="normalBlock"||U.content[0]!==BLOCK_CONTENT_TYPES.TEXT)continue;const W=I.op==="delete"?[]:I.block.type!=="normalBlock"||I.block.content[0]!==BLOCK_CONTENT_TYPES.TEXT?[]:e.getOlinks(I.block.content[1],"blockRef"),K=I.op==="delete"?[]:I.block.type!=="normalBlock"||I.block.content[0]!==BLOCK_CONTENT_TYPES.TEXT?[]:e.getOlinks(I.block.content[1],"tag"),G=e.getOlinks(U.content[1],"blockRef"),Z=e.getOlinks(U.content[1],"tag"),oe=G.filter(ce=>!W.includes(ce)),Y=W.filter(ce=>!G.includes(ce));for(const ce of oe)b.value[ce]=(b.value[ce]??new Set).add(U.id);for(const ce of Y)b.value[ce]?.delete(U.id);const se=Z.filter(ce=>!K.includes(ce)),le=K.filter(ce=>!Z.includes(ce));for(const ce of se)v.value[ce]=(v.value[ce]??new Set).add(U.id);for(const ce of le)v.value[ce]?.delete(U.id)}}}),o.on("blocksDestroy",()=>{b.value={},v.value={}});const k=(B,F="both")=>{if(F==="blockRef")return b.value[B]??new Set;if(F==="tag")return v.value[B]??new Set;{const j=b.value[B]??new Set,I=v.value[B]??new Set;return new Set([...j,...I])}},x=new Document({document:{id:"id",index:"text",store:["text"]},encode:B=>hybridTokenize(B)}),M=new Set;o.on("afterBlocksTrCommit",([B])=>{for(const F of B.patches)F.op==="delete"?M.add(F.blockId):M.add(F.block.id)}),o.on("blocksDestroy",()=>{M.clear()});const E=()=>{if(M.size!==0){for(const B of M){const F=e.getBlock(B);if(F==null&&x.contain(B))x.remove(B);else if(F&&F.type==="normalBlock"){x.contain(B)&&x.remove(B);const j=F.ctext+" "+F.mtext;x.add(B,{id:B,text:j})}}M.clear()}},V={fulltextIndex:x,blockRefsIndex:b,tagIndex:v,search:(B,F=50)=>{E();const j=x.search(B,{limit:F,enrich:!0})?.[0]?.result;if(!j)return[];const I=hybridTokenize(B,!1,1,!1),U=j.map(W=>{const K=calcMatchScore(I,W.doc.text);return{id:W.id,score:K}});return U.sort((W,K)=>K.score-W.score),U.map(W=>W.id)},getMirrors:f,getVirtuals:p,getOccurs:_,getBacklinks:k};return n("index",V),V}),FusionCommandContext=createContext(()=>{const{blocksManager:o}=BlocksContext.useContext(),{search:e}=IndexContext.useContext(),n=ref(""),a=computed(()=>n.value.startsWith("/")?"searchCommand":"searchBlock"),s=ref([]),l=ref(-1),c=ref(null),d=ref(!1),u=ref(!1),f=ref([!0,!1,!1,!1,!1]),p=computed(()=>n.value.length==0?[]:hybridTokenize(n.value,!1,1,!1)??[]);return{inputText:n,mode:a,blockSearchResult:s,focusIndex:l,contentEl:c,suppressMouseOver:d,open:u,allowedBlockTypes:f,queryTerms:p,updateBlockSearchResult:()=>{const k=n.value.trim();if(k===""){s.value=[];return}s.value=e(k).map(x=>o.getBlock(x)).filter(x=>x!==null).filter(x=>x.type=="normalBlock"&&f.value[x.content[0]]),l.value=s.value.length>0?0:-1},openFusionCommand:k=>{n.value=k,u.value=!0,nextTick(()=>{const x=c.value?.querySelector("input");x instanceof HTMLElement&&x.focus()})}}});function markApplies(o,e,n,a){for(let s=0;s<e.length;s++){let{$from:l,$to:c}=e[s],d=l.depth==0?o.inlineContent&&o.type.allowsMarkType(n):!1;if(o.nodesBetween(l.pos,c.pos,(u,f)=>{if(d)return!1;d=u.inlineContent&&u.type.allowsMarkType(n)}),d)return!0}return!1}function toggleMark(o,e=null,n){return function(a,s){let{empty:l,$cursor:c,ranges:d}=a.selection;if(l&&!c||!markApplies(a.doc,d,o))return!1;if(s)if(c)o.isInSet(a.storedMarks||c.marks())?s(a.tr.removeStoredMark(o)):s(a.tr.addStoredMark(o.create(e)));else{let u,f=a.tr;u=!d.some(p=>a.doc.rangeHasMark(p.$from.pos,p.$to.pos,o));for(let p=0;p<d.length;p++){let{$from:_,$to:b}=d[p];if(!u)f.removeMark(_.pos,b.pos,o);else{let v=_.pos,k=b.pos,x=_.nodeAfter,M=b.nodeBefore,E=x&&x.isText?/^\s*/.exec(x.text)[0].length:0,L=M&&M.isText?/\s*$/.exec(M.text)[0].length:0;v+E<k&&(v+=E,k-=L),f.addMark(v,k,o.create(e))}}s(f.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";class AsyncTaskQueue{id=0;queue=[];giveupQueue=[];ongoingTask=null;defaultTimeout;constructor(e=2e3){this.defaultTimeout=e}addTask(e,n={}){const{type:a,delay:s,debounce:l,checker:c,timeout:d,meta:u}=n,f=this.id++;let p=[];if(l&&a!="null"){const k=this.queue.findIndex(x=>x.type==a);if(k!==-1){const x=this.queue[k];x.canceller&&x.canceller(),this.queue.splice(k,1),p.push(...x.awareness.mergedTasks),p.push(x)}}const b=(new Error().stack?.split(`
`).filter(k=>k.includes("addTask")).length??0)>1,v=this.ongoingTask?this.queue.findIndex(k=>k.id==this.ongoingTask.id):-1;if(s&&s>0){const k=setTimeout(async()=>{this._processQueue(f)},s),x=()=>{clearTimeout(k)};b?this.queue.splice(v+1,0,{id:f,callback:e,type:a??"null",canceller:x,recursive:!0,checker:c,timeout:d,meta:u,awareness:{mergedTasks:p}}):this.queue.push({id:f,callback:e,type:a??"null",canceller:x,timeout:d,checker:c,meta:u,awareness:{mergedTasks:p}})}else b?this.queue.splice(v+1,0,{id:f,callback:e,type:a??"null",recursive:!0,checker:c,timeout:d,meta:u,awareness:{mergedTasks:p}}):this.queue.push({id:f,callback:e,type:a??"null",checker:c,timeout:d,meta:u,awareness:{mergedTasks:p}}),this._processQueue(f)}async addTaskAndWait(e,n={}){return new Promise(a=>{const s=async l=>{await e(l),a(void 0)};this.addTask(s,n)})}async flushQueue(){await this.addTaskAndWait(()=>{},{})}async _processQueue(e){if(this.queue.length===0)return;if(this.ongoingTask&&!this.queue[0].recursive){this.giveupQueue.push(e);return}const n=this.queue.shift(),{id:a,callback:s,canceller:l,recursive:c,checker:d,timeout:u,meta:f,awareness:p}=n;if(this.ongoingTask=n,l&&l(),!d||d())try{console.log("callback",p);const _=s(p);if(_!=null)try{await withTimeout(_,u??this.defaultTimeout)}catch(b){console.warn(b)}}catch(_){console.error(_)}this.ongoingTask=null,a!==e&&await this._processQueue(e),!c&&this.giveupQueue.length>0&&queueMicrotask(()=>{for(const _ of this.giveupQueue)this.giveupQueue.shift()&&this._processQueue(_)})}}let useTaskQueue,globalTaskQueue;useTaskQueue=()=>globalTaskQueue;globalTaskQueue=new AsyncTaskQueue;DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(e,n){this.from=e,this.to=n}}NodeProp=class{constructor(e={}){this.id=nextPropID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=NodeType.match(e)),n=>{let a=e(n);return a===void 0?null:[this,a]}}};NodeProp.closedBy=new NodeProp({deserialize:o=>o.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:o=>o.split(" ")});NodeProp.group=new NodeProp({deserialize:o=>o.split(" ")});NodeProp.isolate=new NodeProp({deserialize:o=>{if(o&&o!="rtl"&&o!="ltr"&&o!="auto")throw new RangeError("Invalid value for isolate: "+o);return o||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(e,n,a){this.tree=e,this.overlay=n,this.parser=a}static get(e){return e&&e.props&&e.props[NodeProp.mounted.id]}}const noProps=Object.create(null);NodeType=class{constructor(e,n,a,s=0){this.name=e,this.props=n,this.id=a,this.flags=s}static define(e){let n=e.props&&e.props.length?Object.create(null):noProps,a=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new NodeType(e.name||"",n,e.id,a);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(s)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[l[0].id]=l[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(NodeProp.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let a in e)for(let s of a.split(" "))n[s]=e[a];return a=>{for(let s=a.prop(NodeProp.group),l=-1;l<(s?s.length:0);l++){let c=n[l<0?a.name:s[l]];if(c)return c}}}};NodeType.none=new NodeType("",Object.create(null),0,8);NodeSet=class{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let a of this.types){let s=null;for(let l of e){let c=l(a);c&&(s||(s=Object.assign({},a.props)),s[c[0].id]=c[1])}n.push(s?new NodeType(a.name,s,a.id,a.flags):a)}return new NodeSet(n)}};const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;(function(o){o[o.ExcludeBuffers=1]="ExcludeBuffers",o[o.IncludeAnonymous=2]="IncludeAnonymous",o[o.IgnoreMounts=4]="IgnoreMounts",o[o.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));Tree=class{constructor(e,n,a,s,l){if(this.type=e,this.children=n,this.positions=a,this.length=s,this.props=null,l&&l.length){this.props=Object.create(null);for(let[c,d]of l)this.props[typeof c=="number"?c:c.id]=d}}toString(){let e=MountedTree.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let a of this.children){let s=a.toString();s&&(n&&(n+=","),n+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new TreeCursor(this.topNode,e)}cursorAt(e,n=0,a=0){let s=CachedNode.get(this)||this.topNode,l=new TreeCursor(s);return l.moveTo(e,n),CachedNode.set(this,l._tree),l}get topNode(){return new TreeNode(this,0,0,null)}resolve(e,n=0){let a=resolveNode(CachedNode.get(this)||this.topNode,e,n,!1);return CachedNode.set(this,a),a}resolveInner(e,n=0){let a=resolveNode(CachedInnerNode.get(this)||this.topNode,e,n,!0);return CachedInnerNode.set(this,a),a}resolveStack(e,n=0){return stackIterator(this,e,n)}iterate(e){let{enter:n,leave:a,from:s=0,to:l=this.length}=e,c=e.mode||0,d=(c&IterMode.IncludeAnonymous)>0;for(let u=this.cursor(c|IterMode.IncludeAnonymous);;){let f=!1;if(u.from<=l&&u.to>=s&&(!d&&u.type.isAnonymous||n(u)!==!1)){if(u.firstChild())continue;f=!0}for(;f&&a&&(d||!u.type.isAnonymous)&&a(u),!u.nextSibling();){if(!u.parent())return;f=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(n,a,s)=>new Tree(this.type,n,a,s,this.propValues),e.makeTree||((n,a,s)=>new Tree(NodeType.none,n,a,s)))}static build(e){return buildTree$1(e)}};Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,n,a){this.buffer=e,this.length=n,this.set=a}get type(){return NodeType.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],a=this.buffer[e+3],s=this.set.types[n],l=s.name;if(/\W/.test(l)&&!s.isError&&(l=JSON.stringify(l)),e+=4,a==e)return l;let c=[];for(;e<a;)c.push(this.childString(e)),e=this.buffer[e+3];return l+"("+c.join(",")+")"}findChild(e,n,a,s,l){let{buffer:c}=this,d=-1;for(let u=e;u!=n&&!(checkSide(l,s,c[u+1],c[u+2])&&(d=u,a>0));u=c[u+3]);return d}slice(e,n,a){let s=this.buffer,l=new Uint16Array(n-e),c=0;for(let d=e,u=0;d<n;){l[u++]=s[d++],l[u++]=s[d++]-a;let f=l[u++]=s[d++]-a;l[u++]=s[d++]-e,c=Math.max(c,f)}return new TreeBuffer(l,c,this.set)}}function checkSide(o,e,n,a){switch(o){case-2:return n<e;case-1:return a>=e&&n<e;case 0:return n<e&&a>e;case 1:return n<=e&&a>e;case 2:return a>e;case 4:return!0}}function resolveNode(o,e,n,a){for(var s;o.from==o.to||(n<1?o.from>=e:o.from>e)||(n>-1?o.to<=e:o.to<e);){let c=!a&&o instanceof TreeNode&&o.index<0?null:o.parent;if(!c)return o;o=c}let l=a?0:IterMode.IgnoreOverlays;if(a)for(let c=o,d=c.parent;d;c=d,d=c.parent)c instanceof TreeNode&&c.index<0&&((s=d.enter(e,n,l))===null||s===void 0?void 0:s.from)!=c.from&&(o=d);for(;;){let c=o.enter(e,n,l);if(!c)return o;o=c}}class BaseNode{cursor(e=0){return new TreeCursor(this,e)}getChild(e,n=null,a=null){let s=getChildren(this,e,n,a);return s.length?s[0]:null}getChildren(e,n=null,a=null){return getChildren(this,e,n,a)}resolve(e,n=0){return resolveNode(this,e,n,!1)}resolveInner(e,n=0){return resolveNode(this,e,n,!0)}matchContext(e){return matchNodeContext(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),a=this;for(;n;){let s=n.lastChild;if(!s||s.to!=n.to)break;s.type.isError&&s.from==s.to?(a=n,n=s.prevSibling):n=s}return a}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(e,n,a,s){super(),this._tree=e,this.from=n,this.index=a,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,a,s,l=0){for(let c=this;;){for(let{children:d,positions:u}=c._tree,f=n>0?d.length:-1;e!=f;e+=n){let p=d[e],_=u[e]+c.from;if(checkSide(s,a,_,_+p.length)){if(p instanceof TreeBuffer){if(l&IterMode.ExcludeBuffers)continue;let b=p.findChild(0,p.buffer.length,n,a-_,s);if(b>-1)return new BufferNode(new BufferContext(c,p,e,_),null,b)}else if(l&IterMode.IncludeAnonymous||!p.type.isAnonymous||hasChild(p)){let b;if(!(l&IterMode.IgnoreMounts)&&(b=MountedTree.get(p))&&!b.overlay)return new TreeNode(b.tree,_,e,c);let v=new TreeNode(p,_,e,c);return l&IterMode.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(n<0?p.children.length-1:0,n,a,s)}}}if(l&IterMode.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?e=c.index+n:e=n<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,a=0){let s;if(!(a&IterMode.IgnoreOverlays)&&(s=MountedTree.get(this._tree))&&s.overlay){let l=e-this.from;for(let{from:c,to:d}of s.overlay)if((n>0?c<=l:c<l)&&(n<0?d>=l:d>l))return new TreeNode(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,a)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(o,e,n,a){let s=o.cursor(),l=[];if(!s.firstChild())return l;if(n!=null){for(let c=!1;!c;)if(c=s.type.is(n),!s.nextSibling())return l}for(;;){if(a!=null&&s.type.is(a))return l;if(s.type.is(e)&&l.push(s.node),!s.nextSibling())return a==null?l:[]}}function matchNodeContext(o,e,n=e.length-1){for(let a=o;n>=0;a=a.parent){if(!a)return!1;if(!a.type.isAnonymous){if(e[n]&&e[n]!=a.name)return!1;n--}}return!0}class BufferContext{constructor(e,n,a,s){this.parent=e,this.buffer=n,this.index=a,this.start=s}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,a){super(),this.context=e,this._parent=n,this.index=a,this.type=e.buffer.set.types[e.buffer.buffer[a]]}child(e,n,a){let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.context.start,a);return l<0?null:new BufferNode(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,a=0){if(a&IterMode.ExcludeBuffers)return null;let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return l<0?null:new BufferNode(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:a}=this.context,s=this.index+4,l=a.buffer[this.index+3];if(l>s){let c=a.buffer[this.index+1];e.push(a.slice(s,l,c)),n.push(0)}return new Tree(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(o){if(!o.length)return null;let e=0,n=o[0];for(let l=1;l<o.length;l++){let c=o[l];(c.from>n.from||c.to<n.to)&&(n=c,e=l)}let a=n instanceof TreeNode&&n.index<0?null:n.parent,s=o.slice();return a?s[e]=a:s.splice(e,1),new StackIterator(s,n)}class StackIterator{constructor(e,n){this.heads=e,this.node=n}get next(){return iterStack(this.heads)}}function stackIterator(o,e,n){let a=o.resolveInner(e,n),s=null;for(let l=a instanceof TreeNode?a:a.context.parent;l;l=l.parent)if(l.index<0){let c=l.parent;(s||(s=[a])).push(c.resolve(e,n)),l=c}else{let c=MountedTree.get(l.tree);if(c&&c.overlay&&c.overlay[0].from<=e&&c.overlay[c.overlay.length-1].to>=e){let d=new TreeNode(c.tree,c.overlay[0].from+l.from,-1,l);(s||(s=[a])).push(resolveNode(d,e,n,!1))}}return s?iterStack(s):a}class TreeCursor{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let a=e._parent;a;a=a._parent)this.stack.unshift(a.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:a,buffer:s}=this.buffer;return this.type=n||s.set.types[s.buffer[e]],this.from=a+s.buffer[e+1],this.to=a+s.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,a){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,a,this.mode));let{buffer:s}=this.buffer,l=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.buffer.start,a);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,a=this.mode){return this.buffer?a&IterMode.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,a))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,a=this.stack.length-1;if(e<0){let s=a<0?0:this.stack[a]+4;if(this.index!=s)return this.yieldBuf(n.findChild(s,this.index,-1,0,4))}else{let s=n.buffer[this.index+3];if(s<(a<0?n.buffer.length:n.buffer[this.stack[a]+3]))return this.yieldBuf(s)}return a<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,a,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(s.buffer.buffer[l+3]<this.index)return!1;({index:n,parent:a}=s)}else({index:n,_parent:a}=this._tree);for(;a;{index:n,_parent:a}=a)if(n>-1)for(let l=n+e,c=e<0?-1:a._tree.children.length;l!=c;l+=e){let d=a._tree.children[l];if(this.mode&IterMode.IncludeAnonymous||d instanceof TreeBuffer||!d.type.isAnonymous||hasChild(d))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,a=0;if(e&&e.context==this.buffer)e:for(let s=this.index,l=this.stack.length;l>=0;){for(let c=e;c;c=c._parent)if(c.index==s){if(s==this.index)return c;n=c,a=l+1;break e}s=this.stack[--l]}for(let s=a;s<this.stack.length;s++)n=new BufferNode(this.buffer,n,this.stack[s]);return this.bufferNode=new BufferNode(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let a=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){a++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&n&&n(this),s=this.type.isAnonymous,!a)return;if(this.nextSibling())break;this.parent(),a--,s=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node.parent,e);let{buffer:n}=this.buffer,{types:a}=n.set;for(let s=e.length-1,l=this.stack.length-1;s>=0;l--){if(l<0)return matchNodeContext(this._tree,e,s);let c=a[n.buffer[this.stack[l]]];if(!c.isAnonymous){if(e[s]&&e[s]!=c.name)return!1;s--}}return!0}}function hasChild(o){return o.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree$1(o){var e;let{buffer:n,nodeSet:a,maxBufferLength:s=DefaultBufferLength,reused:l=[],minRepeatType:c=a.types.length}=o,d=Array.isArray(n)?new FlatBufferCursor(n,n.length):n,u=a.types,f=0,p=0;function _(F,j,I,U,W,K){let{id:G,start:Z,end:oe,size:Y}=d,se=p,le=f;for(;Y<0;)if(d.next(),Y==-1){let ke=l[G];I.push(ke),U.push(Z-F);return}else if(Y==-3){f=G;return}else if(Y==-4){p=G;return}else throw new RangeError(`Unrecognized record size: ${Y}`);let ce=u[G],de,ge,qe=Z-F;if(oe-Z<=s&&(ge=M(d.pos-j,W))){let ke=new Uint16Array(ge.size-ge.skip),Ee=d.pos-ge.size,Oe=ke.length;for(;d.pos>Ee;)Oe=E(ge.start,ke,Oe);de=new TreeBuffer(ke,oe-ge.start,a),qe=ge.start-F}else{let ke=d.pos-Y;d.next();let Ee=[],Oe=[],Ve=G>=c?G:-1,Ne=0,dt=oe;for(;d.pos>ke;)Ve>=0&&d.id==Ve&&d.size>=0?(d.end<=dt-s&&(k(Ee,Oe,Z,Ne,d.end,dt,Ve,se,le),Ne=Ee.length,dt=d.end),d.next()):K>2500?b(Z,ke,Ee,Oe):_(Z,ke,Ee,Oe,Ve,K+1);if(Ve>=0&&Ne>0&&Ne<Ee.length&&k(Ee,Oe,Z,Ne,Z,dt,Ve,se,le),Ee.reverse(),Oe.reverse(),Ve>-1&&Ne>0){let pe=v(ce,le);de=balanceRange(ce,Ee,Oe,0,Ee.length,0,oe-Z,pe,pe)}else de=x(ce,Ee,Oe,oe-Z,se-oe,le)}I.push(de),U.push(qe)}function b(F,j,I,U){let W=[],K=0,G=-1;for(;d.pos>j;){let{id:Z,start:oe,end:Y,size:se}=d;if(se>4)d.next();else{if(G>-1&&oe<G)break;G<0&&(G=Y-s),W.push(Z,oe,Y),K++,d.next()}}if(K){let Z=new Uint16Array(K*4),oe=W[W.length-2];for(let Y=W.length-3,se=0;Y>=0;Y-=3)Z[se++]=W[Y],Z[se++]=W[Y+1]-oe,Z[se++]=W[Y+2]-oe,Z[se++]=se;I.push(new TreeBuffer(Z,W[2]-oe,a)),U.push(oe-F)}}function v(F,j){return(I,U,W)=>{let K=0,G=I.length-1,Z,oe;if(G>=0&&(Z=I[G])instanceof Tree){if(!G&&Z.type==F&&Z.length==W)return Z;(oe=Z.prop(NodeProp.lookAhead))&&(K=U[G]+Z.length+oe)}return x(F,I,U,W,K,j)}}function k(F,j,I,U,W,K,G,Z,oe){let Y=[],se=[];for(;F.length>U;)Y.push(F.pop()),se.push(j.pop()+I-W);F.push(x(a.types[G],Y,se,K-W,Z-K,oe)),j.push(W-I)}function x(F,j,I,U,W,K,G){if(K){let Z=[NodeProp.contextHash,K];G=G?[Z].concat(G):[Z]}if(W>25){let Z=[NodeProp.lookAhead,W];G=G?[Z].concat(G):[Z]}return new Tree(F,j,I,U,G)}function M(F,j){let I=d.fork(),U=0,W=0,K=0,G=I.end-s,Z={size:0,start:0,skip:0};e:for(let oe=I.pos-F;I.pos>oe;){let Y=I.size;if(I.id==j&&Y>=0){Z.size=U,Z.start=W,Z.skip=K,K+=4,U+=4,I.next();continue}let se=I.pos-Y;if(Y<0||se<oe||I.start<G)break;let le=I.id>=c?4:0,ce=I.start;for(I.next();I.pos>se;){if(I.size<0)if(I.size==-3)le+=4;else break e;else I.id>=c&&(le+=4);I.next()}W=ce,U+=Y,K+=le}return(j<0||U==F)&&(Z.size=U,Z.start=W,Z.skip=K),Z.size>4?Z:void 0}function E(F,j,I){let{id:U,start:W,end:K,size:G}=d;if(d.next(),G>=0&&U<c){let Z=I;if(G>4){let oe=d.pos-(G-4);for(;d.pos>oe;)I=E(F,j,I)}j[--I]=Z,j[--I]=K-F,j[--I]=W-F,j[--I]=U}else G==-3?f=U:G==-4&&(p=U);return I}let L=[],V=[];for(;d.pos>0;)_(o.start||0,o.bufferStart||0,L,V,-1,0);let B=(e=o.length)!==null&&e!==void 0?e:L.length?V[0]+L[0].length:0;return new Tree(u[o.topID],L.reverse(),V.reverse(),B)}const nodeSizeCache=new WeakMap;function nodeSize(o,e){if(!o.isAnonymous||e instanceof TreeBuffer||e.type!=o)return 1;let n=nodeSizeCache.get(e);if(n==null){n=1;for(let a of e.children){if(a.type!=o||!(a instanceof Tree)){n=1;break}n+=nodeSize(o,a)}nodeSizeCache.set(e,n)}return n}function balanceRange(o,e,n,a,s,l,c,d,u){let f=0;for(let k=a;k<s;k++)f+=nodeSize(o,e[k]);let p=Math.ceil(f*1.5/8),_=[],b=[];function v(k,x,M,E,L){for(let V=M;V<E;){let B=V,F=x[V],j=nodeSize(o,k[V]);for(V++;V<E;V++){let I=nodeSize(o,k[V]);if(j+I>=p)break;j+=I}if(V==B+1){if(j>p){let I=k[B];v(I.children,I.positions,0,I.children.length,x[B]+L);continue}_.push(k[B])}else{let I=x[V-1]+k[V-1].length-F;_.push(balanceRange(o,k,x,B,V,F,I,null,u))}b.push(F+L-l)}}return v(e,n,a,s,0),(d||u)(_,b,c)}NodeWeakMap=class{constructor(){this.map=new WeakMap}setBuffer(e,n,a){let s=this.map.get(e);s||this.map.set(e,s=new Map),s.set(n,a)}getBuffer(e,n){let a=this.map.get(e);return a&&a.get(n)}set(e,n){e instanceof BufferNode?this.setBuffer(e.context.buffer,e.index,n):e instanceof TreeNode&&this.map.set(e.tree,n)}get(e){return e instanceof BufferNode?this.getBuffer(e.context.buffer,e.index):e instanceof TreeNode?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}};class TreeFragment{constructor(e,n,a,s,l=!1,c=!1){this.from=e,this.to=n,this.tree=a,this.offset=s,this.open=(l?1:0)|(c?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],a=!1){let s=[new TreeFragment(0,e.length,e,0,!1,a)];for(let l of n)l.to>e.length&&s.push(l);return s}static applyChanges(e,n,a=128){if(!n.length)return e;let s=[],l=1,c=e.length?e[0]:null;for(let d=0,u=0,f=0;;d++){let p=d<n.length?n[d]:null,_=p?p.fromA:1e9;if(_-u>=a)for(;c&&c.from<_;){let b=c;if(u>=b.from||_<=b.to||f){let v=Math.max(b.from,u)-f,k=Math.min(b.to,_)-f;b=v>=k?null:new TreeFragment(v,k,b.tree,b.offset+f,d>0,!!p)}if(b&&s.push(b),c.to>_)break;c=l<e.length?e[l++]:null}if(!p)break;u=p.toA,f=p.toA-p.toB}return s}}Parser$1=class{startParse(e,n,a){return typeof e=="string"&&(e=new StringInput(e)),a=a?a.length?a.map(s=>new Range(s.from,s.to)):[new Range(0,0)]:[new Range(0,e.length)],this.createParse(e,n||[],a)}parse(e,n,a){let s=this.startParse(e,n,a);for(;;){let l=s.advance();if(l)return l}}};class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}parseMixed=function(o){return(e,n,a,s)=>new MixedParse(e,o,n,a,s)};class InnerParse{constructor(e,n,a,s,l){this.parser=e,this.parse=n,this.overlay=a,this.target=s,this.from=l}}function checkRanges(o){if(!o.length||o.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(o))}class ActiveOverlay{constructor(e,n,a,s,l,c,d){this.parser=e,this.predicate=n,this.mounts=a,this.index=s,this.start=l,this.target=c,this.prev=d,this.depth=0,this.ranges=[]}}const stoppedInner=new NodeProp({perNode:!0});class MixedParse{constructor(e,n,a,s,l){this.nest=n,this.input=a,this.fragments=s,this.ranges=l,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let a=this.baseParse.advance();if(!a)return null;if(this.baseParse=null,this.baseTree=a,this.startInner(),this.stoppedAt!=null)for(let s of this.inner)s.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let a=this.baseTree;return this.stoppedAt!=null&&(a=new Tree(a.type,a.children,a.positions,a.length,a.propValues.concat([[stoppedInner,this.stoppedAt]]))),a}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let a=Object.assign(Object.create(null),e.target.props);a[NodeProp.mounted.id]=new MountedTree(n,e.overlay,e.parser),e.target.props=a}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new FragmentCursor(this.fragments),n=null,a=null,s=new TreeCursor(new TreeNode(this.baseTree,this.ranges[0].from,0,null),IterMode.IncludeAnonymous|IterMode.IgnoreMounts);e:for(let l,c;;){let d=!0,u;if(this.stoppedAt!=null&&s.from>=this.stoppedAt)d=!1;else if(e.hasNode(s)){if(n){let f=n.mounts.find(p=>p.frag.from<=s.from&&p.frag.to>=s.to&&p.mount.overlay);if(f)for(let p of f.mount.overlay){let _=p.from+f.pos,b=p.to+f.pos;_>=s.from&&b<=s.to&&!n.ranges.some(v=>v.from<b&&v.to>_)&&n.ranges.push({from:_,to:b})}}d=!1}else if(a&&(c=checkCover(a.ranges,s.from,s.to)))d=c!=2;else if(!s.type.isAnonymous&&(l=this.nest(s,this.input))&&(s.from<s.to||!l.overlay)){s.tree||materialize(s);let f=e.findMounts(s.from,l.parser);if(typeof l.overlay=="function")n=new ActiveOverlay(l.parser,l.overlay,f,this.inner.length,s.from,s.tree,n);else{let p=punchRanges(this.ranges,l.overlay||(s.from<s.to?[new Range(s.from,s.to)]:[]));p.length&&checkRanges(p),(p.length||!l.overlay)&&this.inner.push(new InnerParse(l.parser,p.length?l.parser.startParse(this.input,enterFragments(f,p),p):l.parser.startParse(""),l.overlay?l.overlay.map(_=>new Range(_.from-s.from,_.to-s.from)):null,s.tree,p.length?p[0].from:s.from)),l.overlay?p.length&&(a={ranges:p,depth:0,prev:a}):d=!1}}else if(n&&(u=n.predicate(s))&&(u===!0&&(u=new Range(s.from,s.to)),u.from<u.to)){let f=n.ranges.length-1;f>=0&&n.ranges[f].to==u.from?n.ranges[f]={from:n.ranges[f].from,to:u.to}:n.ranges.push(u)}if(d&&s.firstChild())n&&n.depth++,a&&a.depth++;else for(;!s.nextSibling();){if(!s.parent())break e;if(n&&!--n.depth){let f=punchRanges(this.ranges,n.ranges);f.length&&(checkRanges(f),this.inner.splice(n.index,0,new InnerParse(n.parser,n.parser.startParse(this.input,enterFragments(n.mounts,f),f),n.ranges.map(p=>new Range(p.from-n.start,p.to-n.start)),n.target,f[0].from))),n=n.prev}a&&!--a.depth&&(a=a.prev)}}}}function checkCover(o,e,n){for(let a of o){if(a.from>=n)break;if(a.to>e)return a.from<=e&&a.to>=n?2:1}return 0}function sliceBuf(o,e,n,a,s,l){if(e<n){let c=o.buffer[e+1];a.push(o.slice(e,n,c)),s.push(c-l)}}function materialize(o){let{node:e}=o,n=[],a=e.context.buffer;do n.push(o.index),o.parent();while(!o.tree);let s=o.tree,l=s.children.indexOf(a),c=s.children[l],d=c.buffer,u=[l];function f(p,_,b,v,k,x){let M=n[x],E=[],L=[];sliceBuf(c,p,M,E,L,v);let V=d[M+1],B=d[M+2];u.push(E.length);let F=x?f(M+4,d[M+3],c.set.types[d[M]],V,B-V,x-1):e.toTree();return E.push(F),L.push(V-v),sliceBuf(c,d[M+3],_,E,L,v),new Tree(b,E,L,k)}s.children[l]=f(0,d.length,NodeType.none,0,c.length,n.length-1);for(let p of u){let _=o.tree.children[p],b=o.tree.positions[p];o.yield(new TreeNode(_,b+o.from,p,o._tree))}}class StructureCursor{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(IterMode.IncludeAnonymous|IterMode.IgnoreMounts)}moveTo(e){let{cursor:n}=this,a=e-this.offset;for(;!this.done&&n.from<a;)n.to>=e&&n.enter(a,1,IterMode.IgnoreOverlays|IterMode.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof Tree)n=n.children[0];else break}return!1}}class FragmentCursor{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let a=this.curFrag=e[0];this.curTo=(n=a.tree.prop(stoppedInner))!==null&&n!==void 0?n:a.to,this.inner=new StructureCursor(a.tree,-a.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(stoppedInner))!==null&&e!==void 0?e:n.to,this.inner=new StructureCursor(n.tree,-n.offset)}}findMounts(e,n){var a;let s=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let l=this.inner.cursor.node;l;l=l.parent){let c=(a=l.tree)===null||a===void 0?void 0:a.prop(NodeProp.mounted);if(c&&c.parser==n)for(let d=this.fragI;d<this.fragments.length;d++){let u=this.fragments[d];if(u.from>=l.to)break;u.tree==this.curFrag.tree&&s.push({frag:u,pos:l.from-u.offset,mount:c})}}}return s}}function punchRanges(o,e){let n=null,a=e;for(let s=1,l=0;s<o.length;s++){let c=o[s-1].to,d=o[s].from;for(;l<a.length;l++){let u=a[l];if(u.from>=d)break;u.to<=c||(n||(a=n=e.slice()),u.from<c?(n[l]=new Range(u.from,c),u.to>d&&n.splice(l+1,0,new Range(d,u.to))):u.to>d?n[l--]=new Range(d,u.to):n.splice(l--,1))}}return a}function findCoverChanges(o,e,n,a){let s=0,l=0,c=!1,d=!1,u=-1e9,f=[];for(;;){let p=s==o.length?1e9:c?o[s].to:o[s].from,_=l==e.length?1e9:d?e[l].to:e[l].from;if(c!=d){let b=Math.max(u,n),v=Math.min(p,_,a);b<v&&f.push(new Range(b,v))}if(u=Math.min(p,_),u==1e9)break;p==u&&(c?(c=!1,s++):c=!0),_==u&&(d?(d=!1,l++):d=!0)}return f}function enterFragments(o,e){let n=[];for(let{pos:a,mount:s,frag:l}of o){let c=a+(s.overlay?s.overlay[0].from:0),d=c+s.tree.length,u=Math.max(l.from,c),f=Math.min(l.to,d);if(s.overlay){let p=s.overlay.map(b=>new Range(b.from+a,b.to+a)),_=findCoverChanges(e,p,u,f);for(let b=0,v=u;;b++){let k=b==_.length,x=k?f:_[b].from;if(x>v&&n.push(new TreeFragment(v,x,s.tree,-c,l.from>=v||l.openStart,l.to<=x||l.openEnd)),k)break;v=_[b].to}}else n.push(new TreeFragment(u,f,s.tree,-c,l.from>=c||l.openStart,l.to<=d||l.openEnd))}return n}let nextTagID=0;Tag=class{constructor(e,n,a,s){this.name=e,this.set=n,this.base=a,this.modified=s,this.id=nextTagID++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let a=typeof e=="string"?e:"?";if(e instanceof Tag&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let s=new Tag(a,[],null,[]);if(s.set.push(s),n)for(let l of n.set)s.set.push(l);return s}static defineModifier(e){let n=new Modifier(e);return a=>a.modified.indexOf(n)>-1?a:Modifier.get(a.base||a,a.modified.concat(n).sort((s,l)=>s.id-l.id))}};let nextModifierID=0;class Modifier{constructor(e){this.name=e,this.instances=[],this.id=nextModifierID++}static get(e,n){if(!n.length)return e;let a=n[0].instances.find(d=>d.base==e&&sameArray(n,d.modified));if(a)return a;let s=[],l=new Tag(e.name,s,e,n);for(let d of n)d.instances.push(l);let c=powerSet(n);for(let d of e.set)if(!d.modified.length)for(let u of c)s.push(Modifier.get(d,u));return l}}function sameArray(o,e){return o.length==e.length&&o.every((n,a)=>n==e[a])}function powerSet(o){let e=[[]];for(let n=0;n<o.length;n++)for(let a=0,s=e.length;a<s;a++)e.push(e[a].concat(o[n]));return e.sort((n,a)=>a.length-n.length)}styleTags=function(o){let e=Object.create(null);for(let n in o){let a=o[n];Array.isArray(a)||(a=[a]);for(let s of n.split(" "))if(s){let l=[],c=2,d=s;for(let _=0;;){if(d=="..."&&_>0&&_+3==s.length){c=1;break}let b=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(d);if(!b)throw new RangeError("Invalid path: "+s);if(l.push(b[0]=="*"?"":b[0][0]=='"'?JSON.parse(b[0]):b[0]),_+=b[0].length,_==s.length)break;let v=s[_++];if(_==s.length&&v=="!"){c=0;break}if(v!="/")throw new RangeError("Invalid path: "+s);d=s.slice(_)}let u=l.length-1,f=l[u];if(!f)throw new RangeError("Invalid path: "+s);let p=new Rule(a,c,u>0?l.slice(0,u):null);e[f]=p.sort(e[f])}}return ruleNodeProp.add(e)};const ruleNodeProp=new NodeProp;class Rule{constructor(e,n,a,s){this.tags=e,this.mode=n,this.context=a,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(o,e){let n=Object.create(null);for(let l of o)if(!Array.isArray(l.tag))n[l.tag.id]=l.class;else for(let c of l.tag)n[c.id]=l.class;let{scope:a,all:s=null}=e||{};return{style:l=>{let c=s;for(let d of l)for(let u of d.set){let f=n[u.id];if(f){c=c?c+" "+f:f;break}}return c},scope:a}}function highlightTags(o,e){let n=null;for(let a of o){let s=a.style(e);s&&(n=n?n+" "+s:s)}return n}function highlightTree(o,e,n,a=0,s=o.length){let l=new HighlightBuilder(a,Array.isArray(e)?e:[e],n);l.highlightRange(o.cursor(),a,s,"",l.highlighters),l.flush(s)}class HighlightBuilder{constructor(e,n,a){this.at=e,this.highlighters=n,this.span=a,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,a,s,l){let{type:c,from:d,to:u}=e;if(d>=a||u<=n)return;c.isTop&&(l=this.highlighters.filter(v=>!v.scope||v.scope(c)));let f=s,p=getStyleTags(e)||Rule.empty,_=highlightTags(l,p.tags);if(_&&(f&&(f+=" "),f+=_,p.mode==1&&(s+=(s?" ":"")+_)),this.startSpan(Math.max(n,d),f),p.opaque)return;let b=e.tree&&e.tree.prop(NodeProp.mounted);if(b&&b.overlay){let v=e.node.enter(b.overlay[0].from+d,1),k=this.highlighters.filter(M=>!M.scope||M.scope(b.tree.type)),x=e.firstChild();for(let M=0,E=d;;M++){let L=M<b.overlay.length?b.overlay[M]:null,V=L?L.from+d:u,B=Math.max(n,E),F=Math.min(a,V);if(B<F&&x)for(;e.from<F&&(this.highlightRange(e,B,F,s,l),this.startSpan(Math.min(F,e.to),f),!(e.to>=V||!e.nextSibling())););if(!L||V>a)break;E=L.to+d,E>n&&(this.highlightRange(v.cursor(),Math.max(n,L.from+d),Math.min(a,E),"",k),this.startSpan(Math.min(a,E),f))}x&&e.parent()}else if(e.firstChild()){b&&(s="");do if(!(e.to<=n)){if(e.from>=a)break;this.highlightRange(e,n,a,s,l),this.startSpan(Math.min(a,e.to),f)}while(e.nextSibling());e.parent()}}}function getStyleTags(o){let e=o.type.prop(ruleNodeProp);for(;e&&e.context&&!o.matchContext(e.context);)e=e.next;return e||null}let t,comment,name,typeName,propertyName,literal,string,number,content,heading,keyword,operator,punctuation,bracket,meta;t=Tag.define;comment=t();name=t();typeName=t(name);propertyName=t(name);literal=t();string=t(literal);number=t(literal);content=t();heading=t(content);keyword=t();operator=t();punctuation=t();bracket=t(punctuation);meta=t();tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let o in tags){let e=tags[o];e instanceof Tag&&(e.name=o)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;languageDataProp=new NodeProp;defineLanguageFacet=function(o){return Facet.define({combine:o?e=>e.concat(o):void 0})};sublanguageProp=new NodeProp;Language=class{constructor(e,n,a=[],s=""){this.data=e,this.name=s,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=n,this.extension=[language.of(this),EditorState.languageData.of((l,c,d)=>{let u=topNodeAt(l,c,d),f=u.type.prop(languageDataProp);if(!f)return[];let p=l.facet(f),_=u.type.prop(sublanguageProp);if(_){let b=u.resolve(c-u.from,d);for(let v of _)if(v.test(b,l)){let k=l.facet(v.facet);return v.type=="replace"?k:k.concat(p)}}return p})].concat(a)}isActiveAt(e,n,a=-1){return topNodeAt(e,n,a).type.prop(languageDataProp)==this.data}findRegions(e){let n=e.facet(language);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let a=[],s=(l,c)=>{if(l.prop(languageDataProp)==this.data){a.push({from:c,to:c+l.length});return}let d=l.prop(NodeProp.mounted);if(d){if(d.tree.prop(languageDataProp)==this.data){if(d.overlay)for(let u of d.overlay)a.push({from:u.from+c,to:u.to+c});else a.push({from:c,to:c+l.length});return}else if(d.overlay){let u=a.length;if(s(d.tree,d.overlay[0].from+c),a.length>u)return}}for(let u=0;u<l.children.length;u++){let f=l.children[u];f instanceof Tree&&s(f,l.positions[u]+c)}};return s(syntaxTree(e),0),a}get allowsNesting(){return!0}};Language.setState=StateEffect.define();function topNodeAt(o,e,n){let a=o.facet(language),s=syntaxTree(o).topNode;if(!a||a.allowsNesting)for(let l=s;l;l=l.enter(e,n,IterMode.ExcludeBuffers))l.type.isTop&&(s=l);return s}LRLanguage=class extends Language{constructor(e,n,a){super(e,n,[],a),this.parser=n}static define(e){let n=defineLanguageFacet(e.languageData);return new LRLanguage(n,e.parser.configure({props:[languageDataProp.add(a=>a.isTop?n:void 0)]}),e.name)}configure(e,n){return new LRLanguage(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}};syntaxTree=function(o){let e=o.field(Language.state,!1);return e?e.tree:Tree.empty};class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let a=this.cursorPos-this.string.length;return e<a||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-a,n-a)}}let currentContext=null;ParseContext=class{constructor(e,n,a=[],s,l,c,d,u){this.parser=e,this.state=n,this.fragments=a,this.tree=s,this.treeLen=l,this.viewport=c,this.skipped=d,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,n,a){return new ParseContext(e,n,[],Tree.empty,0,a,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Tree.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var a;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(a=this.parse.stoppedAt)!==null&&a!==void 0?a:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=currentContext;currentContext=this;try{return e()}finally{currentContext=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=cutFragments(e,n.from,n.to);return e}changes(e,n){let{fragments:a,tree:s,treeLen:l,viewport:c,skipped:d}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((f,p,_,b)=>u.push({fromA:f,toA:p,fromB:_,toB:b})),a=TreeFragment.applyChanges(a,u),s=Tree.empty,l=0,c={from:e.mapPos(c.from,-1),to:e.mapPos(c.to,1)},this.skipped.length){d=[];for(let f of this.skipped){let p=e.mapPos(f.from,1),_=e.mapPos(f.to,-1);p<_&&d.push({from:p,to:_})}}}return new ParseContext(this.parser,n,a,s,l,c,d,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let a=0;a<this.skipped.length;a++){let{from:s,to:l}=this.skipped[a];s<e.to&&l>e.from&&(this.fragments=cutFragments(this.fragments,s,l),this.skipped.splice(a--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Parser$1{createParse(n,a,s){let l=s[0].from,c=s[s.length-1].to;return{parsedPos:l,advance(){let u=currentContext;if(u){for(let f of s)u.tempSkipped.push(f);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=c,new Tree(NodeType.none,[],[],c-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return currentContext}};function cutFragments(o,e,n){return TreeFragment.applyChanges(o,[{fromA:e,toA:n,fromB:e,toB:n}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),a=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,a)||n.takeTree(),new LanguageState(n)}static init(e){let n=Math.min(3e3,e.doc.length),a=ParseContext.create(e.facet(language).parser,e,{from:0,to:n});return a.work(20,n)||a.takeTree(),new LanguageState(a)}}Language.state=StateField.define({create:LanguageState.init,update(o,e){for(let n of e.effects)if(n.is(Language.setState))return n.value;return e.startState.facet(language)!=e.state.facet(language)?LanguageState.init(e.state):o.apply(e)}});let requestIdle=o=>{let e=setTimeout(()=>o(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(requestIdle=o=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(o,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Language.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Language.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=requestIdle(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:a,viewport:{to:s}}=this.view,l=a.field(Language.state);if(l.tree==l.context.tree&&l.context.isDone(s+1e5))return;let c=Date.now()+Math.min(this.chunkBudget,100,e&&!isInputPending?Math.max(25,e.timeRemaining()-5):1e9),d=l.context.treeLen<s&&a.doc.length>s+1e3,u=l.context.work(()=>isInputPending&&isInputPending()||Date.now()>c,s+(d?0:1e5));this.chunkBudget-=Date.now()-n,(u||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(l.context))})),this.chunkBudget>0&&!(u&&!d)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>logException(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(o){return o.length?o[0]:null},enables:o=>[Language.state,parseWorker,EditorView.contentAttributes.compute([o],e=>{let n=e.facet(o);return n&&n.name?{"data-language":n.name}:{}})]});LanguageSupport=class{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}};LanguageDescription=class{constructor(e,n,a,s,l,c=void 0){this.name=e,this.alias=n,this.extensions=a,this.filename=s,this.loadFunc=l,this.support=c,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:n,support:a}=e;if(!n){if(!a)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(a)}return new LanguageDescription(e.name,(e.alias||[]).concat(e.name).map(s=>s.toLowerCase()),e.extensions||[],e.filename,n,a)}static matchFilename(e,n){for(let s of e)if(s.filename&&s.filename.test(n))return s;let a=/\.([^.]+)$/.exec(n);if(a){for(let s of e)if(s.extensions.indexOf(a[1])>-1)return s}return null}static matchLanguageName(e,n,a=!0){n=n.toLowerCase();for(let s of e)if(s.alias.some(l=>l==n))return s;if(a)for(let s of e)for(let l of s.alias){let c=n.indexOf(l);if(c>-1&&(l.length>2||!/\w/.test(n[c-1])&&!/\w/.test(n[c+l.length])))return s}return null}};let indentService;indentService=Facet.define();indentUnit=Facet.define({combine:o=>{if(!o.length)return"  ";let e=o[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(o[0]));return e}});function getIndentUnit(o){let e=o.facet(indentUnit);return e.charCodeAt(0)==9?o.tabSize*e.length:e.length}function indentString(o,e){let n="",a=o.tabSize,s=o.facet(indentUnit)[0];if(s=="	"){for(;e>=a;)n+="	",e-=a;s=" "}for(let l=0;l<e;l++)n+=s;return n}function getIndentation(o,e){o instanceof EditorState&&(o=new IndentContext(o));for(let a of o.state.facet(indentService)){let s=a(o,e);if(s!==void 0)return s}let n=syntaxTree(o.state);return n.length>=e?syntaxIndentation(o,n,e):null}class IndentContext{constructor(e,n={}){this.state=e,this.options=n,this.unit=getIndentUnit(e)}lineAt(e,n=1){let a=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:l}=this.options;return s!=null&&s>=a.from&&s<=a.to?l&&s==e?{text:"",from:e}:(n<0?s<e:s<=e)?{text:a.text.slice(s-a.from),from:s}:{text:a.text.slice(0,s-a.from),from:a.from}:a}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:a,from:s}=this.lineAt(e,n);return a.slice(e-s,Math.min(a.length,e+100-s))}column(e,n=1){let{text:a,from:s}=this.lineAt(e,n),l=this.countColumn(a,e-s),c=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return c>-1&&(l+=c-this.countColumn(a,a.search(/\S|$/))),l}countColumn(e,n=e.length){return countColumn(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:a,from:s}=this.lineAt(e,n),l=this.options.overrideIndentation;if(l){let c=l(s);if(c>-1)return c}return this.countColumn(a,a.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}indentNodeProp=new NodeProp;function syntaxIndentation(o,e,n){let a=e.resolveStack(n),s=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(s!=a.node){let l=[];for(let c=s;c&&!(c.from==a.node.from&&c.type==a.node.type);c=c.parent)l.push(c);for(let c=l.length-1;c>=0;c--)a={node:l[c],next:a}}return indentFor(a,o,n)}function indentFor(o,e,n){for(let a=o;a;a=a.next){let s=indentStrategy(a.node);if(s)return s(TreeIndentContext.create(e,n,a))}return 0}function ignoreClosed(o){return o.pos==o.options.simulateBreak&&o.options.simulateDoubleBreak}function indentStrategy(o){let e=o.type.prop(indentNodeProp);if(e)return e;let n=o.firstChild,a;if(n&&(a=n.type.prop(NodeProp.closedBy))){let s=o.lastChild,l=s&&a.indexOf(s.name)>-1;return c=>delimitedStrategy(c,!0,1,void 0,l&&!ignoreClosed(c)?s.from:void 0)}return o.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(e,n,a){super(e.state,e.options),this.base=e,this.pos=n,this.context=a}get node(){return this.context.node}static create(e,n,a){return new TreeIndentContext(e,n,a)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let a=e.resolve(n.from);for(;a.parent&&a.parent.from==a.from;)a=a.parent;if(isParent(a,e))break;n=this.state.doc.lineAt(a.from)}return this.lineIndent(n.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(o,e){for(let n=e;n;n=n.parent)if(o==n)return!0;return!1}function bracketedAligned(o){let e=o.node,n=e.childAfter(e.from),a=e.lastChild;if(!n)return null;let s=o.options.simulateBreak,l=o.state.doc.lineAt(n.from),c=s==null||s<=l.from?l.to:Math.min(l.to,s);for(let d=n.to;;){let u=e.childAfter(d);if(!u||u==a)return null;if(!u.type.isSkipped){if(u.from>=c)return null;let f=/^ */.exec(l.text.slice(n.to-l.from))[0].length;return{from:n.from,to:n.to+f}}d=u.to}}delimitedIndent=function({closing:o,align:e=!0,units:n=1}){return a=>delimitedStrategy(a,e,n,o)};function delimitedStrategy(o,e,n,a,s){let l=o.textAfter,c=l.match(/^\s*/)[0].length,d=a&&l.slice(c,c+a.length)==a||s==o.pos+c,u=e?bracketedAligned(o):null;return u?d?o.column(u.from):o.column(u.to):o.baseIndent+(d?0:o.unit*n)}flatIndent=o=>o.baseIndent;continuedIndent=function({except:o,units:e=1}={}){return n=>{let a=o&&o.test(n.textAfter);return n.baseIndent+(a?0:e*n.unit)}};const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(o=>{if(!o.docChanged||!o.isUserEvent("input.type")&&!o.isUserEvent("input.complete"))return o;let e=o.startState.languageDataAt("indentOnInput",o.startState.selection.main.head);if(!e.length)return o;let n=o.newDoc,{head:a}=o.newSelection.main,s=n.lineAt(a);if(a>s.from+DontIndentBeyond)return o;let l=n.sliceString(s.from,a);if(!e.some(f=>f.test(l)))return o;let{state:c}=o,d=-1,u=[];for(let{head:f}of c.selection.ranges){let p=c.doc.lineAt(f);if(p.from==d)continue;d=p.from;let _=getIndentation(c,p.from);if(_==null)continue;let b=/^\s*/.exec(p.text)[0],v=indentString(c,_);b!=v&&u.push({from:p.from,to:p.from+b.length,insert:v})}return u.length?[o,{changes:u,sequential:!0}]:o})}foldService=Facet.define();foldNodeProp=new NodeProp;foldInside=function(o){let e=o.firstChild,n=o.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?o.to:n.from}:null};class HighlightStyle{constructor(e,n){this.specs=e;let a;function s(d){let u=StyleModule.newName();return(a||(a=Object.create(null)))["."+u]=d,u}const l=typeof n.all=="string"?n.all:n.all?s(n.all):void 0,c=n.scope;this.scope=c instanceof Language?d=>d.prop(languageDataProp)==c.data:c?d=>d==c:void 0,this.style=tagHighlighter(e.map(d=>({tag:d.tag,class:d.class||s(Object.assign({},d,{tag:null}))})),{all:l}).style,this.module=a?new StyleModule(a):null,this.themeType=n.themeType}static define(e,n){return new HighlightStyle(e,n||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(o){return o.length?[o[0]]:null}});function getHighlighters(o){let e=o.facet(highlighterFacet);return e.length?e:o.facet(fallbackHighlighter)}function syntaxHighlighting(o,e){let n=[treeHighlighter],a;return o instanceof HighlightStyle&&(o.module&&n.push(EditorView.styleModule.of(o.module)),a=o.themeType),e?.fallback?n.push(fallbackHighlighter.of(o)):a?n.push(highlighterFacet.computeN([EditorView.darkTheme],s=>s.facet(EditorView.darkTheme)==(a=="dark")?[o]:[])):n.push(highlighterFacet.of(o)),n}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=syntaxTree(e.state),a=getHighlighters(e.state),s=a!=getHighlighters(e.startState),{viewport:l}=e.view,c=e.changes.mapPos(this.decoratedTo,1);n.length<l.to&&!s&&n.type==this.tree.type&&c>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=c):(n!=this.tree||e.viewportChanged||s)&&(this.tree=n,this.decorations=this.buildDeco(e.view,a),this.decoratedTo=l.to)}buildDeco(e,n){if(!n||!this.tree.length)return Decoration.none;let a=new RangeSetBuilder;for(let{from:s,to:l}of e.visibleRanges)highlightTree(this.tree,n,(c,d,u)=>{a.add(c,d,this.markCache[u]||(this.markCache[u]=Decoration.mark({class:u})))},s,l);return a.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:o=>o.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$1=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(o){return combineConfig(o,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(o){let e=[],n=o.matched?matchingMark:nonmatchingMark;return e.push(n.range(o.start.from,o.start.to)),o.end&&e.push(n.range(o.end.from,o.end.to)),e}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(o,e){if(!e.docChanged&&!e.selection)return o;let n=[],a=e.state.facet(bracketMatchingConfig);for(let s of e.state.selection.ranges){if(!s.empty)continue;let l=matchBrackets(e.state,s.head,-1,a)||s.head>0&&matchBrackets(e.state,s.head-1,1,a)||a.afterCursor&&(matchBrackets(e.state,s.head,1,a)||s.head<e.state.doc.length&&matchBrackets(e.state,s.head+1,-1,a));l&&(n=n.concat(a.renderMatch(l,e.state)))}return Decoration.set(n,!0)},provide:o=>EditorView.decorations.from(o)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$1];function bracketMatching(o={}){return[bracketMatchingConfig.of(o),bracketMatchingUnique]}bracketMatchingHandle=new NodeProp;function matchingNodes(o,e,n){let a=o.prop(e<0?NodeProp.openedBy:NodeProp.closedBy);if(a)return a;if(o.name.length==1){let s=n.indexOf(o.name);if(s>-1&&s%2==(e<0?1:0))return[n[s+e]]}return null}function findHandle(o){let e=o.type.prop(bracketMatchingHandle);return e?e(o.node):o}function matchBrackets(o,e,n,a={}){let s=a.maxScanDistance||DefaultScanDist,l=a.brackets||DefaultBrackets,c=syntaxTree(o),d=c.resolveInner(e,n);for(let u=d;u;u=u.parent){let f=matchingNodes(u.type,n,l);if(f&&u.from<u.to){let p=findHandle(u);if(p&&(n>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return matchMarkedBrackets(o,e,n,u,p,f,l)}}return matchPlainBrackets(o,e,n,c,d.type,s,l)}function matchMarkedBrackets(o,e,n,a,s,l,c){let d=a.parent,u={from:s.from,to:s.to},f=0,p=d?.cursor();if(p&&(n<0?p.childBefore(a.from):p.childAfter(a.to)))do if(n<0?p.to<=a.from:p.from>=a.to){if(f==0&&l.indexOf(p.type.name)>-1&&p.from<p.to){let _=findHandle(p);return{start:u,end:_?{from:_.from,to:_.to}:void 0,matched:!0}}else if(matchingNodes(p.type,n,c))f++;else if(matchingNodes(p.type,-n,c)){if(f==0){let _=findHandle(p);return{start:u,end:_&&_.from<_.to?{from:_.from,to:_.to}:void 0,matched:!1}}f--}}while(n<0?p.prevSibling():p.nextSibling());return{start:u,matched:!1}}function matchPlainBrackets(o,e,n,a,s,l,c){let d=n<0?o.sliceDoc(e-1,e):o.sliceDoc(e,e+1),u=c.indexOf(d);if(u<0||u%2==0!=n>0)return null;let f={from:n<0?e-1:e,to:n>0?e+1:e},p=o.doc.iterRange(e,n>0?o.doc.length:0),_=0;for(let b=0;!p.next().done&&b<=l;){let v=p.value;n<0&&(b+=v.length);let k=e+b*n;for(let x=n>0?0:v.length-1,M=n>0?v.length:-1;x!=M;x+=n){let E=c.indexOf(v[x]);if(!(E<0||a.resolveInner(k+x,1).type!=s))if(E%2==0==n>0)_++;else{if(_==1)return{start:f,end:{from:k+x,to:k+x+1},matched:E>>1==u>>1};_--}}n>0&&(b+=v.length)}return p.done?{start:f,matched:!1}:null}function countCol(o,e,n,a=0,s=0){e==null&&(e=o.search(/[^\s\u00a0]/),e==-1&&(e=o.length));let l=s;for(let c=a;c<e;c++)o.charCodeAt(c)==9?l+=n-l%n:l++;return l}class StringStream{constructor(e,n,a,s){this.string=e,this.tabSize=n,this.indentUnit=a,this.overrideIndent=s,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),a;if(typeof e=="string"?a=n==e:a=n&&(e instanceof RegExp?e.test(n):e(n)),a)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countCol(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:countCol(this.string,null,this.tabSize)}match(e,n,a){if(typeof e=="string"){let s=c=>a?c.toLowerCase():c,l=this.string.substr(this.pos,e.length);return s(l)==s(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&n!==!1&&(this.pos+=s[0].length),s)}}current(){return this.string.slice(this.start,this.pos)}}function fullParser(o){return{name:o.name||"",token:o.token,blankLine:o.blankLine||(()=>{}),startState:o.startState||(()=>!0),copyState:o.copyState||defaultCopyState,indent:o.indent||(()=>null),languageData:o.languageData||{},tokenTable:o.tokenTable||noTokens}}function defaultCopyState(o){if(typeof o!="object")return o;let e={};for(let n in o){let a=o[n];e[n]=a instanceof Array?a.slice():a}return e}const IndentedFrom=new WeakMap;class StreamLanguage extends Language{constructor(e){let n=defineLanguageFacet(e.languageData),a=fullParser(e),s,l=new class extends Parser$1{createParse(c,d,u){return new Parse(s,c,d,u)}};super(n,l,[],e.name),this.topNode=docID(n,this),s=this,this.streamParser=a,this.stateAfter=new NodeProp({perNode:!0}),this.tokenTable=e.tokenTable?new TokenTable(a.tokenTable):defaultTokenTable}static define(e){return new StreamLanguage(e)}getIndent(e){let n,{overrideIndentation:a}=e.options;a&&(n=IndentedFrom.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let s=findState(this,e.node.tree,e.node.from,e.node.from,n??e.pos),l,c;if(s?(c=s.state,l=s.pos+1):(c=this.streamParser.startState(e.unit),l=e.node.from),e.pos-l>1e4)return null;for(;l<e.pos;){let u=e.state.doc.lineAt(l),f=Math.min(e.pos,u.to);if(u.length){let p=a?a(u.from):-1,_=new StringStream(u.text,e.state.tabSize,e.unit,p<0?void 0:p);for(;_.pos<f-u.from;)readToken(this.streamParser.token,_,c)}else this.streamParser.blankLine(c,e.unit);if(f==e.pos)break;l=u.to+1}let d=e.lineAt(e.pos);return a&&n==null&&IndentedFrom.set(e.state,d.from),this.streamParser.indent(c,/^\s*(.*)/.exec(d.text)[1],e)}get allowsNesting(){return!1}}function findState(o,e,n,a,s){let l=n>=a&&n+e.length<=s&&e.prop(o.stateAfter);if(l)return{state:o.streamParser.copyState(l),pos:n+e.length};for(let c=e.children.length-1;c>=0;c--){let d=e.children[c],u=n+e.positions[c],f=d instanceof Tree&&u<s&&findState(o,d,u,a,s);if(f)return f}return null}function cutTree(o,e,n,a,s){if(s&&n<=0&&a>=e.length)return e;!s&&n==0&&e.type==o.topNode&&(s=!0);for(let l=e.children.length-1;l>=0;l--){let c=e.positions[l],d=e.children[l],u;if(c<a&&d instanceof Tree){if(!(u=cutTree(o,d,n-c,a-c,s)))break;return s?new Tree(e.type,e.children.slice(0,l).concat(u),e.positions.slice(0,l+1),c+u.length):u}}return null}function findStartInFragments(o,e,n,a,s){for(let l of e){let c=l.from+(l.openStart?25:0),d=l.to-(l.openEnd?25:0),u=c<=n&&d>n&&findState(o,l.tree,0-l.offset,n,d),f;if(u&&u.pos<=a&&(f=cutTree(o,l.tree,n+l.offset,u.pos+l.offset,!1)))return{state:u.state,tree:f}}return{state:o.streamParser.startState(s?getIndentUnit(s):4),tree:Tree.empty}}class Parse{constructor(e,n,a,s){this.lang=e,this.input=n,this.fragments=a,this.ranges=s,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=s[s.length-1].to;let l=ParseContext.get(),c=s[0].from,{state:d,tree:u}=findStartInFragments(e,a,c,this.to,l?.state);this.state=d,this.parsedPos=this.chunkStart=c+u.length;for(let f=0;f<u.children.length;f++)this.chunks.push(u.children[f]),this.chunkPos.push(u.positions[f]);l&&this.parsedPos<l.viewport.from-1e5&&s.some(f=>f.from<=l.viewport.from&&f.to>=l.viewport.from)&&(this.state=this.lang.streamParser.startState(getIndentUnit(l.state)),l.skipUntilInView(this.parsedPos,l.viewport.from),this.parsedPos=l.viewport.from),this.moveRangeIndex()}advance(){let e=ParseContext.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),a=Math.min(n,this.chunkStart+2048);for(e&&(a=Math.min(a,e.viewport.to));this.parsedPos<a;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let a=n.indexOf(`
`);a>-1&&(n=n.slice(0,a))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),a=e+n.length;for(let s=this.rangeIndex;;){let l=this.ranges[s].to;if(l>=a||(n=n.slice(0,l-(a-n.length)),s++,s==this.ranges.length))break;let c=this.ranges[s].from,d=this.lineAfter(c);n+=d,a=c+d.length}return{line:n,end:a}}skipGapsTo(e,n,a){for(;;){let s=this.ranges[this.rangeIndex].to,l=e+n;if(a>0?s>l:s>=l)break;let c=this.ranges[++this.rangeIndex].from;n+=c-s}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,a,s){let l=4;if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let d=this.chunk.length;s=this.skipGapsTo(a,s,-1),a+=s,l+=this.chunk.length-d}let c=this.chunk.length-4;return l==4&&c>=0&&this.chunk[c]==e&&this.chunk[c+2]==n?this.chunk[c+2]=a:this.chunk.push(e,n,a,l),s}parseLine(e){let{line:n,end:a}=this.nextLine(),s=0,{streamParser:l}=this.lang,c=new StringStream(n,e?e.state.tabSize:4,e?getIndentUnit(e.state):2);if(c.eol())l.blankLine(this.state,c.indentUnit);else for(;!c.eol();){let d=readToken(l.token,c,this.state);if(d&&(s=this.emitToken(this.lang.tokenTable.resolve(d),this.parsedPos+c.start,this.parsedPos+c.pos,s)),c.start>1e4)break}this.parsedPos=a,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Tree(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function readToken(o,e,n){e.start=e.pos;for(let a=0;a<10;a++){let s=o(e,n);if(e.pos>e.start)return s}throw new Error("Stream parser failed to advance stream.")}const noTokens=Object.create(null),typeArray=[NodeType.none],nodeSet=new NodeSet(typeArray),warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[o,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[o]=createTokenType(noTokens,e);class TokenTable{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),defaultTable)}resolve(e){return e?this.table[e]||(this.table[e]=createTokenType(this.extra,e)):0}}const defaultTokenTable=new TokenTable(noTokens);function warnForPart(o,e){warned.indexOf(o)>-1||(warned.push(o),console.warn(e))}function createTokenType(o,e){let n=[];for(let d of e.split(" ")){let u=[];for(let f of d.split(".")){let p=o[f]||tags[f];p?typeof p=="function"?u.length?u=u.map(p):warnForPart(f,`Modifier ${f} used at start of tag`):u.length?warnForPart(f,`Tag ${f} used as modifier`):u=Array.isArray(p)?p:[p]:warnForPart(f,`Unknown highlighting tag ${f}`)}for(let f of u)n.push(f)}if(!n.length)return 0;let a=e.replace(/ /g,"_"),s=a+" "+n.map(d=>d.id),l=byTag[s];if(l)return l.id;let c=byTag[s]=NodeType.define({id:typeArray.length,name:a,props:[styleTags({[a]:n})]});return typeArray.push(c),c.id}function docID(o,e){let n=NodeType.define({id:typeArray.length,name:"Document",props:[languageDataProp.add(()=>o),indentNodeProp.add(()=>a=>e.getIndent(a))],top:!0});return typeArray.push(n),n}Direction.RTL,Direction.LTR;const toggleComment=o=>{let{state:e}=o,n=e.doc.lineAt(e.selection.main.from),a=getConfig(o.state,n.from);return a.line?toggleLineComment(o):a.block?toggleBlockCommentByLine(o):!1};function command(o,e){return({state:n,dispatch:a})=>{if(n.readOnly)return!1;let s=o(e,n);return s?(a(n.update(s)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((o,e)=>changeBlockComment(o,e,selectedLineRanges(e)),0);function getConfig(o,e){let n=o.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const SearchMargin=50;function findBlockComment(o,{open:e,close:n},a,s){let l=o.sliceDoc(a-SearchMargin,a),c=o.sliceDoc(s,s+SearchMargin),d=/\s*$/.exec(l)[0].length,u=/^\s*/.exec(c)[0].length,f=l.length-d;if(l.slice(f-e.length,f)==e&&c.slice(u,u+n.length)==n)return{open:{pos:a-d,margin:d&&1},close:{pos:s+u,margin:u&&1}};let p,_;s-a<=2*SearchMargin?p=_=o.sliceDoc(a,s):(p=o.sliceDoc(a,a+SearchMargin),_=o.sliceDoc(s-SearchMargin,s));let b=/^\s*/.exec(p)[0].length,v=/\s*$/.exec(_)[0].length,k=_.length-v-n.length;return p.slice(b,b+e.length)==e&&_.slice(k,k+n.length)==n?{open:{pos:a+b+e.length,margin:/\s/.test(p.charAt(b+e.length))?1:0},close:{pos:s-v-n.length,margin:/\s/.test(_.charAt(k-1))?1:0}}:null}function selectedLineRanges(o){let e=[];for(let n of o.selection.ranges){let a=o.doc.lineAt(n.from),s=n.to<=a.to?a:o.doc.lineAt(n.to);s.from>a.from&&s.from==n.to&&(s=n.to==a.to+1?a:o.doc.lineAt(n.to-1));let l=e.length-1;l>=0&&e[l].to>a.from?e[l].to=s.to:e.push({from:a.from+/^\s*/.exec(a.text)[0].length,to:s.to})}return e}function changeBlockComment(o,e,n=e.selection.ranges){let a=n.map(l=>getConfig(e,l.from).block);if(!a.every(l=>l))return null;let s=n.map((l,c)=>findBlockComment(e,a[c],l.from,l.to));if(o!=2&&!s.every(l=>l))return{changes:e.changes(n.map((l,c)=>s[c]?[]:[{from:l.from,insert:a[c].open+" "},{from:l.to,insert:" "+a[c].close}]))};if(o!=1&&s.some(l=>l)){let l=[];for(let c=0,d;c<s.length;c++)if(d=s[c]){let u=a[c],{open:f,close:p}=d;l.push({from:f.pos-u.open.length,to:f.pos+f.margin},{from:p.pos-p.margin,to:p.pos+u.close.length})}return{changes:l}}return null}function changeLineComment(o,e,n=e.selection.ranges){let a=[],s=-1;for(let{from:l,to:c}of n){let d=a.length,u=1e9,f=getConfig(e,l).line;if(f){for(let p=l;p<=c;){let _=e.doc.lineAt(p);if(_.from>s&&(l==c||c>_.from)){s=_.from;let b=/^\s*/.exec(_.text)[0].length,v=b==_.length,k=_.text.slice(b,b+f.length)==f?b:-1;b<_.text.length&&b<u&&(u=b),a.push({line:_,comment:k,token:f,indent:b,empty:v,single:!1})}p=_.to+1}if(u<1e9)for(let p=d;p<a.length;p++)a[p].indent<a[p].line.text.length&&(a[p].indent=u);a.length==d+1&&(a[d].single=!0)}}if(o!=2&&a.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:d,token:u,indent:f,empty:p,single:_}of a)(_||!p)&&l.push({from:d.from+f,insert:u+" "});let c=e.changes(l);return{changes:c,selection:e.selection.map(c,1)}}else if(o!=1&&a.some(l=>l.comment>=0)){let l=[];for(let{line:c,comment:d,token:u}of a)if(d>=0){let f=c.from+d,p=f+u.length;c.text[p-c.from]==" "&&p++,l.push({from:f,to:p})}return{changes:l}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(o){return combineConfig(o,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(a,s)=>e(a,s)||n(a,s)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(o,e){let n=e.state.facet(historyConfig),a=e.annotation(fromHistory);if(a){let u=HistEvent.fromTransaction(e,a.selection),f=a.side,p=f==0?o.undone:o.done;return u?p=updateBranch(p,p.length,n.minDepth,u):p=addSelection(p,e.startState.selection),new HistoryState(f==0?a.rest:p,f==0?p:a.rest)}let s=e.annotation(isolateHistory);if((s=="full"||s=="before")&&(o=o.isolate()),e.annotation(Transaction.addToHistory)===!1)return e.changes.empty?o:o.addMapping(e.changes.desc);let l=HistEvent.fromTransaction(e),c=e.annotation(Transaction.time),d=e.annotation(Transaction.userEvent);return l?o=o.addChanges(l,c,d,n,e):e.selection&&(o=o.addSelection(e.startState.selection,c,d,n.newGroupDelay)),(s=="full"||s=="after")&&(o=o.isolate()),o},toJSON(o){return{done:o.done.map(e=>e.toJSON()),undone:o.undone.map(e=>e.toJSON())}},fromJSON(o){return new HistoryState(o.done.map(HistEvent.fromJSON),o.undone.map(HistEvent.fromJSON))}});function history$1(o={}){return[historyField_,historyConfig.of(o),EditorView.domEventHandlers({beforeinput(e,n){let a=e.inputType=="historyUndo"?undo:e.inputType=="historyRedo"?redo:null;return a?(e.preventDefault(),a(n)):!1}})]}function cmd(o,e){return function({state:n,dispatch:a}){if(!e&&n.readOnly)return!1;let s=n.field(historyField_,!1);if(!s)return!1;let l=s.pop(o,n,e);return l?(a(l),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(e,n,a,s,l){this.changes=e,this.effects=n,this.mapped=a,this.startSelection=s,this.selectionsAfter=l}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,a;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(a=this.startSelection)===null||a===void 0?void 0:a.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,n){let a=none;for(let s of e.startState.facet(invertedEffects)){let l=s(e);l.length&&(a=a.concat(l))}return!a.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),a,void 0,n||e.startState.selection,none)}static selection(e){return new HistEvent(void 0,none,void 0,void 0,e)}}function updateBranch(o,e,n,a){let s=e+1>n+20?e-n-1:0,l=o.slice(s,e);return l.push(a),l}function isAdjacent(o,e){let n=[],a=!1;return o.iterChangedRanges((s,l)=>n.push(s,l)),e.iterChangedRanges((s,l,c,d)=>{for(let u=0;u<n.length;){let f=n[u++],p=n[u++];d>=f&&c<=p&&(a=!0)}}),a}function eqSelectionShape(o,e){return o.ranges.length==e.ranges.length&&o.ranges.filter((n,a)=>n.empty!=e.ranges[a].empty).length===0}function conc(o,e){return o.length?e.length?o.concat(e):o:e}const none=[],MaxSelectionsPerEvent=200;function addSelection(o,e){if(o.length){let n=o[o.length-1],a=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-MaxSelectionsPerEvent));return a.length&&a[a.length-1].eq(e)?o:(a.push(e),updateBranch(o,o.length-1,1e9,n.setSelAfter(a)))}else return[HistEvent.selection([e])]}function popSelection(o){let e=o[o.length-1],n=o.slice();return n[o.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function addMappingToBranch(o,e){if(!o.length)return o;let n=o.length,a=none;for(;n;){let s=mapEvent(o[n-1],e,a);if(s.changes&&!s.changes.empty||s.effects.length){let l=o.slice(0,n);return l[n-1]=s,l}else e=s.mapped,n--,a=s.selectionsAfter}return a.length?[HistEvent.selection(a)]:none}function mapEvent(o,e,n){let a=conc(o.selectionsAfter.length?o.selectionsAfter.map(d=>d.map(e)):none,n);if(!o.changes)return HistEvent.selection(a);let s=o.changes.map(e),l=e.mapDesc(o.changes,!0),c=o.mapped?o.mapped.composeDesc(l):l;return new HistEvent(s,StateEffect.mapEffects(o.effects,e),c,o.startSelection.map(l),a)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(e,n,a=0,s=void 0){this.done=e,this.undone=n,this.prevTime=a,this.prevUserEvent=s}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(e,n,a,s,l){let c=this.done,d=c[c.length-1];return d&&d.changes&&!d.changes.empty&&e.changes&&(!a||joinableUserEvent.test(a))&&(!d.selectionsAfter.length&&n-this.prevTime<s.newGroupDelay&&s.joinToEvent(l,isAdjacent(d.changes,e.changes))||a=="input.type.compose")?c=updateBranch(c,c.length-1,s.minDepth,new HistEvent(e.changes.compose(d.changes),conc(StateEffect.mapEffects(e.effects,d.changes),d.effects),d.mapped,d.startSelection,none)):c=updateBranch(c,c.length,s.minDepth,e),new HistoryState(c,none,n,a)}addSelection(e,n,a,s){let l=this.done.length?this.done[this.done.length-1].selectionsAfter:none;return l.length>0&&n-this.prevTime<s&&a==this.prevUserEvent&&a&&/^select($|\.)/.test(a)&&eqSelectionShape(l[l.length-1],e)?this:new HistoryState(addSelection(this.done,e),this.undone,n,a)}addMapping(e){return new HistoryState(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,a){let s=e==0?this.done:this.undone;if(s.length==0)return null;let l=s[s.length-1],c=l.selectionsAfter[0]||n.selection;if(a&&l.selectionsAfter.length)return n.update({selection:l.selectionsAfter[l.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(s),selection:c}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(l.changes){let d=s.length==1?none:s.slice(0,s.length-1);return l.mapped&&(d=addMappingToBranch(d,l.mapped)),n.update({changes:l.changes,selection:l.startSelection,effects:l.effects,annotations:fromHistory.of({side:e,rest:d,selection:c}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none,none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(o,e){return EditorSelection.create(o.ranges.map(e),o.mainIndex)}function setSel(o,e){return o.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:o,dispatch:e},n){let a=updateSel(o.selection,n);return a.eq(o.selection,!0)?!1:(e(setSel(o,a)),!0)}function rangeEnd(o,e){return EditorSelection.cursor(e?o.to:o.from)}function cursorByChar(o,e){return moveSel(o,n=>n.empty?o.moveByChar(n,e):rangeEnd(n,e))}function ltrAtCursor(o){return o.textDirectionAt(o.state.selection.main.head)==Direction.LTR}const cursorCharLeft=o=>cursorByChar(o,!ltrAtCursor(o)),cursorCharRight=o=>cursorByChar(o,ltrAtCursor(o));function cursorByGroup(o,e){return moveSel(o,n=>n.empty?o.moveByGroup(n,e):rangeEnd(n,e))}const cursorGroupLeft=o=>cursorByGroup(o,!ltrAtCursor(o)),cursorGroupRight=o=>cursorByGroup(o,ltrAtCursor(o));function interestingNode(o,e,n){if(e.type.prop(n))return!0;let a=e.to-e.from;return a&&(a>2||/[^\s,.;:]/.test(o.sliceDoc(e.from,e.to)))||e.firstChild}function moveBySyntax(o,e,n){let a=syntaxTree(o).resolveInner(e.head),s=n?NodeProp.closedBy:NodeProp.openedBy;for(let u=e.head;;){let f=n?a.childAfter(u):a.childBefore(u);if(!f)break;interestingNode(o,f,s)?a=f:u=n?f.to:f.from}let l=a.type.prop(s),c,d;return l&&(c=n?matchBrackets(o,a.from,1):matchBrackets(o,a.to,-1))&&c.matched?d=n?c.end.to:c.end.from:d=n?a.to:a.from,EditorSelection.cursor(d,n?-1:1)}const cursorSyntaxLeft=o=>moveSel(o,e=>moveBySyntax(o.state,e,!ltrAtCursor(o))),cursorSyntaxRight=o=>moveSel(o,e=>moveBySyntax(o.state,e,ltrAtCursor(o)));function cursorByLine(o,e){return moveSel(o,n=>{if(!n.empty)return rangeEnd(n,e);let a=o.moveVertically(n,e);return a.head!=n.head?a:o.moveToLineBoundary(n,e)})}const cursorLineUp=o=>cursorByLine(o,!1),cursorLineDown=o=>cursorByLine(o,!0);function pageInfo(o){let e=o.scrollDOM.clientHeight<o.scrollDOM.scrollHeight-2,n=0,a=0,s;if(e){for(let l of o.state.facet(EditorView.scrollMargins)){let c=l(o);c?.top&&(n=Math.max(c?.top,n)),c?.bottom&&(a=Math.max(c?.bottom,a))}s=o.scrollDOM.clientHeight-n-a}else s=(o.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:a,selfScroll:e,height:Math.max(o.defaultLineHeight,s-5)}}function cursorByPage(o,e){let n=pageInfo(o),{state:a}=o,s=updateSel(a.selection,c=>c.empty?o.moveVertically(c,e,n.height):rangeEnd(c,e));if(s.eq(a.selection))return!1;let l;if(n.selfScroll){let c=o.coordsAtPos(a.selection.main.head),d=o.scrollDOM.getBoundingClientRect(),u=d.top+n.marginTop,f=d.bottom-n.marginBottom;c&&c.top>u&&c.bottom<f&&(l=EditorView.scrollIntoView(s.main.head,{y:"start",yMargin:c.top-u}))}return o.dispatch(setSel(a,s),{effects:l}),!0}const cursorPageUp=o=>cursorByPage(o,!1),cursorPageDown=o=>cursorByPage(o,!0);function moveByLineBoundary(o,e,n){let a=o.lineBlockAt(e.head),s=o.moveToLineBoundary(e,n);if(s.head==e.head&&s.head!=(n?a.to:a.from)&&(s=o.moveToLineBoundary(e,n,!1)),!n&&s.head==a.from&&a.length){let l=/^\s*/.exec(o.state.sliceDoc(a.from,Math.min(a.from+100,a.to)))[0].length;l&&e.head!=a.from+l&&(s=EditorSelection.cursor(a.from+l))}return s}const cursorLineBoundaryForward=o=>moveSel(o,e=>moveByLineBoundary(o,e,!0)),cursorLineBoundaryBackward=o=>moveSel(o,e=>moveByLineBoundary(o,e,!1)),cursorLineBoundaryLeft=o=>moveSel(o,e=>moveByLineBoundary(o,e,!ltrAtCursor(o))),cursorLineBoundaryRight=o=>moveSel(o,e=>moveByLineBoundary(o,e,ltrAtCursor(o))),cursorLineStart=o=>moveSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).from,1)),cursorLineEnd=o=>moveSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).to,-1));function toMatchingBracket(o,e,n){let a=!1,s=updateSel(o.selection,l=>{let c=matchBrackets(o,l.head,-1)||matchBrackets(o,l.head,1)||l.head>0&&matchBrackets(o,l.head-1,1)||l.head<o.doc.length&&matchBrackets(o,l.head+1,-1);if(!c||!c.end)return l;a=!0;let d=c.start.from==l.head?c.end.to:c.end.from;return EditorSelection.cursor(d)});return a?(e(setSel(o,s)),!0):!1}const cursorMatchingBracket=({state:o,dispatch:e})=>toMatchingBracket(o,e);function extendSel(o,e){let n=updateSel(o.state.selection,a=>{let s=e(a);return EditorSelection.range(a.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return n.eq(o.state.selection)?!1:(o.dispatch(setSel(o.state,n)),!0)}function selectByChar(o,e){return extendSel(o,n=>o.moveByChar(n,e))}const selectCharLeft=o=>selectByChar(o,!ltrAtCursor(o)),selectCharRight=o=>selectByChar(o,ltrAtCursor(o));function selectByGroup(o,e){return extendSel(o,n=>o.moveByGroup(n,e))}const selectGroupLeft=o=>selectByGroup(o,!ltrAtCursor(o)),selectGroupRight=o=>selectByGroup(o,ltrAtCursor(o)),selectSyntaxLeft=o=>extendSel(o,e=>moveBySyntax(o.state,e,!ltrAtCursor(o))),selectSyntaxRight=o=>extendSel(o,e=>moveBySyntax(o.state,e,ltrAtCursor(o)));function selectByLine(o,e){return extendSel(o,n=>o.moveVertically(n,e))}const selectLineUp=o=>selectByLine(o,!1),selectLineDown=o=>selectByLine(o,!0);function selectByPage(o,e){return extendSel(o,n=>o.moveVertically(n,e,pageInfo(o).height))}const selectPageUp=o=>selectByPage(o,!1),selectPageDown=o=>selectByPage(o,!0),selectLineBoundaryForward=o=>extendSel(o,e=>moveByLineBoundary(o,e,!0)),selectLineBoundaryBackward=o=>extendSel(o,e=>moveByLineBoundary(o,e,!1)),selectLineBoundaryLeft=o=>extendSel(o,e=>moveByLineBoundary(o,e,!ltrAtCursor(o))),selectLineBoundaryRight=o=>extendSel(o,e=>moveByLineBoundary(o,e,ltrAtCursor(o))),selectLineStart=o=>extendSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).from)),selectLineEnd=o=>extendSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).to)),cursorDocStart=({state:o,dispatch:e})=>(e(setSel(o,{anchor:0})),!0),cursorDocEnd=({state:o,dispatch:e})=>(e(setSel(o,{anchor:o.doc.length})),!0),selectDocStart=({state:o,dispatch:e})=>(e(setSel(o,{anchor:o.selection.main.anchor,head:0})),!0),selectDocEnd=({state:o,dispatch:e})=>(e(setSel(o,{anchor:o.selection.main.anchor,head:o.doc.length})),!0),selectAll=({state:o,dispatch:e})=>(e(o.update({selection:{anchor:0,head:o.doc.length},userEvent:"select"})),!0),selectLine=({state:o,dispatch:e})=>{let n=selectedLineBlocks(o).map(({from:a,to:s})=>EditorSelection.range(a,Math.min(s+1,o.doc.length)));return e(o.update({selection:EditorSelection.create(n),userEvent:"select"})),!0},selectParentSyntax=({state:o,dispatch:e})=>{let n=updateSel(o.selection,a=>{let s=syntaxTree(o),l=s.resolveStack(a.from,1);if(a.empty){let c=s.resolveStack(a.from,-1);c.node.from>=l.node.from&&c.node.to<=l.node.to&&(l=c)}for(let c=l;c;c=c.next){let{node:d}=c;if((d.from<a.from&&d.to>=a.to||d.to>a.to&&d.from<=a.from)&&c.next)return EditorSelection.range(d.to,d.from)}return a});return n.eq(o.selection)?!1:(e(setSel(o,n)),!0)},simplifySelection=({state:o,dispatch:e})=>{let n=o.selection,a=null;return n.ranges.length>1?a=EditorSelection.create([n.main]):n.main.empty||(a=EditorSelection.create([EditorSelection.cursor(n.main.head)])),a?(e(setSel(o,a)),!0):!1};function deleteBy(o,e){if(o.state.readOnly)return!1;let n="delete.selection",{state:a}=o,s=a.changeByRange(l=>{let{from:c,to:d}=l;if(c==d){let u=e(l);u<c?(n="delete.backward",u=skipAtomic(o,u,!1)):u>c&&(n="delete.forward",u=skipAtomic(o,u,!0)),c=Math.min(c,u),d=Math.max(d,u)}else c=skipAtomic(o,c,!1),d=skipAtomic(o,d,!0);return c==d?{range:l}:{changes:{from:c,to:d},range:EditorSelection.cursor(c,c<l.head?-1:1)}});return s.changes.empty?!1:(o.dispatch(a.update(s,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?EditorView.announce.of(a.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(o,e,n){if(o instanceof EditorView)for(let a of o.state.facet(EditorView.atomicRanges).map(s=>s(o)))a.between(e,e,(s,l)=>{s<e&&l>e&&(e=n?l:s)});return e}const deleteByChar=(o,e,n)=>deleteBy(o,a=>{let s=a.from,{state:l}=o,c=l.doc.lineAt(s),d,u;if(n&&!e&&s>c.from&&s<c.from+200&&!/[^ \t]/.test(d=c.text.slice(0,s-c.from))){if(d[d.length-1]=="	")return s-1;let f=countColumn(d,l.tabSize),p=f%getIndentUnit(l)||getIndentUnit(l);for(let _=0;_<p&&d[d.length-1-_]==" ";_++)s--;u=s}else u=findClusterBreak(c.text,s-c.from,e,e)+c.from,u==s&&c.number!=(e?l.doc.lines:1)?u+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(c.text.slice(u-c.from,s-c.from))&&(u=findClusterBreak(c.text,u-c.from,!1,!1)+c.from);return u}),deleteCharBackward=o=>deleteByChar(o,!1,!0),deleteCharForward=o=>deleteByChar(o,!0,!1),deleteByGroup=(o,e)=>deleteBy(o,n=>{let a=n.head,{state:s}=o,l=s.doc.lineAt(a),c=s.charCategorizer(a);for(let d=null;;){if(a==(e?l.to:l.from)){a==n.head&&l.number!=(e?s.doc.lines:1)&&(a+=e?1:-1);break}let u=findClusterBreak(l.text,a-l.from,e)+l.from,f=l.text.slice(Math.min(a,u)-l.from,Math.max(a,u)-l.from),p=c(f);if(d!=null&&p!=d)break;(f!=" "||a!=n.head)&&(d=p),a=u}return a}),deleteGroupBackward=o=>deleteByGroup(o,!1),deleteGroupForward=o=>deleteByGroup(o,!0),deleteToLineEnd=o=>deleteBy(o,e=>{let n=o.lineBlockAt(e.head).to;return e.head<n?n:Math.min(o.state.doc.length,e.head+1)}),deleteLineBoundaryBackward=o=>deleteBy(o,e=>{let n=o.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),deleteLineBoundaryForward=o=>deleteBy(o,e=>{let n=o.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(o.state.doc.length,e.head+1)}),splitLine=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let n=o.changeByRange(a=>({changes:{from:a.from,to:a.to,insert:Text.of(["",""])},range:EditorSelection.cursor(a.from)}));return e(o.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let n=o.changeByRange(a=>{if(!a.empty||a.from==0||a.from==o.doc.length)return{range:a};let s=a.from,l=o.doc.lineAt(s),c=s==l.from?s-1:findClusterBreak(l.text,s-l.from,!1)+l.from,d=s==l.to?s+1:findClusterBreak(l.text,s-l.from,!0)+l.from;return{changes:{from:c,to:d,insert:o.doc.slice(s,d).append(o.doc.slice(c,s))},range:EditorSelection.cursor(d)}});return n.changes.empty?!1:(e(o.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(o){let e=[],n=-1;for(let a of o.selection.ranges){let s=o.doc.lineAt(a.from),l=o.doc.lineAt(a.to);if(!a.empty&&a.to==l.from&&(l=o.doc.lineAt(a.to-1)),n>=s.number){let c=e[e.length-1];c.to=l.to,c.ranges.push(a)}else e.push({from:s.from,to:l.to,ranges:[a]});n=l.number+1}return e}function moveLine(o,e,n){if(o.readOnly)return!1;let a=[],s=[];for(let l of selectedLineBlocks(o)){if(n?l.to==o.doc.length:l.from==0)continue;let c=o.doc.lineAt(n?l.to+1:l.from-1),d=c.length+1;if(n){a.push({from:l.to,to:c.to},{from:l.from,insert:c.text+o.lineBreak});for(let u of l.ranges)s.push(EditorSelection.range(Math.min(o.doc.length,u.anchor+d),Math.min(o.doc.length,u.head+d)))}else{a.push({from:c.from,to:l.from},{from:l.to,insert:o.lineBreak+c.text});for(let u of l.ranges)s.push(EditorSelection.range(u.anchor-d,u.head-d))}}return a.length?(e(o.update({changes:a,scrollIntoView:!0,selection:EditorSelection.create(s,o.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:o,dispatch:e})=>moveLine(o,e,!1),moveLineDown=({state:o,dispatch:e})=>moveLine(o,e,!0);function copyLine(o,e,n){if(o.readOnly)return!1;let a=[];for(let s of selectedLineBlocks(o))n?a.push({from:s.from,insert:o.doc.slice(s.from,s.to)+o.lineBreak}):a.push({from:s.to,insert:o.lineBreak+o.doc.slice(s.from,s.to)});return e(o.update({changes:a,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:o,dispatch:e})=>copyLine(o,e,!1),copyLineDown=({state:o,dispatch:e})=>copyLine(o,e,!0),deleteLine=o=>{if(o.state.readOnly)return!1;let{state:e}=o,n=e.changes(selectedLineBlocks(e).map(({from:s,to:l})=>(s>0?s--:l<e.doc.length&&l++,{from:s,to:l}))),a=updateSel(e.selection,s=>{let l;if(o.lineWrapping){let c=o.lineBlockAt(s.head),d=o.coordsAtPos(s.head,s.assoc||1);d&&(l=c.bottom+o.documentTop-d.bottom+o.defaultLineHeight/2)}return o.moveVertically(s,!0,l)}).map(n);return o.dispatch({changes:n,selection:a,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(o,e){if(/\(\)|\[\]|\{\}/.test(o.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=syntaxTree(o).resolveInner(e),a=n.childBefore(e),s=n.childAfter(e),l;return a&&s&&a.to<=e&&s.from>=e&&(l=a.type.prop(NodeProp.closedBy))&&l.indexOf(s.name)>-1&&o.doc.lineAt(a.to).from==o.doc.lineAt(s.from).from&&!/\S/.test(o.sliceDoc(a.to,s.from))?{from:a.to,to:s.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(o){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let a=e.changeByRange(s=>{let{from:l,to:c}=s,d=e.doc.lineAt(l),u=!o&&l==c&&isBetweenBrackets(e,l);o&&(l=c=(c<=d.to?d:e.doc.lineAt(c)).to);let f=new IndentContext(e,{simulateBreak:l,simulateDoubleBreak:!!u}),p=getIndentation(f,l);for(p==null&&(p=countColumn(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));c<d.to&&/\s/.test(d.text[c-d.from]);)c++;u?{from:l,to:c}=u:l>d.from&&l<d.from+100&&!/\S/.test(d.text.slice(0,l))&&(l=d.from);let _=["",indentString(e,p)];return u&&_.push(indentString(e,f.lineIndent(d.from,-1))),{changes:{from:l,to:c,insert:Text.of(_)},range:EditorSelection.cursor(l+1+_[1].length)}});return n(e.update(a,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(o,e){let n=-1;return o.changeByRange(a=>{let s=[];for(let c=a.from;c<=a.to;){let d=o.doc.lineAt(c);d.number>n&&(a.empty||a.to>d.from)&&(e(d,s,a),n=d.number),c=d.to+1}let l=o.changes(s);return{changes:s,range:EditorSelection.range(l.mapPos(a.anchor,1),l.mapPos(a.head,1))}})}const indentSelection=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let n=Object.create(null),a=new IndentContext(o,{overrideIndentation:l=>{let c=n[l];return c??-1}}),s=changeBySelectedLine(o,(l,c,d)=>{let u=getIndentation(a,l.from);if(u==null)return;/\S/.test(l.text)||(u=0);let f=/^\s*/.exec(l.text)[0],p=indentString(o,u);(f!=p||d.from<l.from+f.length)&&(n[l.from]=u,c.push({from:l.from,to:l.from+f.length,insert:p}))});return s.changes.empty||e(o.update(s,{userEvent:"indent"})),!0},indentMore=({state:o,dispatch:e})=>o.readOnly?!1:(e(o.update(changeBySelectedLine(o,(n,a)=>{a.push({from:n.from,insert:o.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:o,dispatch:e})=>o.readOnly?!1:(e(o.update(changeBySelectedLine(o,(n,a)=>{let s=/^\s*/.exec(n.text)[0];if(!s)return;let l=countColumn(s,o.tabSize),c=0,d=indentString(o,Math.max(0,l-getIndentUnit(o)));for(;c<s.length&&c<d.length&&s.charCodeAt(c)==d.charCodeAt(c);)c++;a.push({from:n.from+c,to:n.from+s.length,insert:d.slice(c)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=o=>(o.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(o=>({mac:o.key,run:o.run,shift:o.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),SettingsContext=createContext(()=>{const o=shallowRef({}),e=shallowRef({}),n=u=>{if(o.value[u.key]){console.warn(`Setting group with key ${u.key} already exists, ignored.`);return}o.value[u.key]=u},a=u=>{if(!o.value[u]){console.warn(`Setting group with key ${u} not found, ignored.`);return}delete o.value[u]},s=u=>{if(e.value[u.id]){console.warn(`Setting item with id ${u.id} already exists, ignored.`);return}if(!o.value[u.groupKey]){console.warn(`Setting group with key ${u.groupKey} not found, ignored.`);return}e.value[u.id]=u},l=u=>{if(!e.value[u]){console.warn(`Setting item with id ${u} not found, ignored.`);return}delete e.value[u]},c=u=>Object.values(e.value).filter(f=>f.groupKey===u);return{settingItems:readonly(e),settingGroups:readonly(o),registerSettingGroup:n,unregisterSettingGroup:a,registerSettingItem:s,unregisterSettingItem:l,getAllSettingItemsInGroup:c}}),mac=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function normalizeKeyName(o){let e=o.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let a,s,l,c;for(let d=0;d<e.length-1;d++){const u=e[d];if(/^(cmd|meta|m)$/i.test(u))c=!0;else if(/^a(lt)?$/i.test(u))a=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))mac?c=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return a&&(n="Alt-"+n),s&&(n="Ctrl-"+n),c&&(n="Meta-"+n),l&&(n="Shift-"+n),n}function normalize(o){const e=Object.create(null);for(const n in o)e[normalizeKeyName(n)]=o[n];return e}function modifiers(o,e,n=!0){return e.altKey&&(o="Alt-"+o),e.ctrlKey&&(o="Ctrl-"+o),e.metaKey&&(o="Meta-"+o),n&&e.shiftKey&&(o="Shift-"+o),o}function generateKeydownHandler(o,e,n){const a=normalize(o);return function(...s){const l=e(...s),c=n(...s);let d;const u=keyName(c),f=a[modifiers(u,c)];if(f&&f.run(...l))return f.stopPropagation&&c.stopPropagation(),f.preventDefault&&c.preventDefault(),!0;if(u.length==1&&u!=" "){if(c.shiftKey){const _=a[modifiers(u,c,!1)];if(_&&_.run(...l))return _.stopPropagation&&c.stopPropagation(),_.preventDefault&&c.preventDefault(),!0}if((c.shiftKey||c.altKey||c.metaKey||u.charCodeAt(0)>127)&&(d=base[c.keyCode])&&d!=u){const _=a[modifiers(d,c)];if(_&&_.run(...l))return _.stopPropagation&&c.stopPropagation(),_.preventDefault&&c.preventDefault(),!0}}const p=o["*"];return p&&p.run(...l)?(p.stopPropagation&&c.stopPropagation(),p.preventDefault&&c.preventDefault(),!0):!1}}function generateKeydownHandlerSimple(o){return generateKeydownHandler(o,e=>[e],e=>e)}const KeymapContext=createContext(()=>{const o=useTaskQueue(),{lastFocusedBlockTree:e,lastFocusedDiId:n}=LastFocusContext.useContext(),{blockEditor:a,blocksManager:s}=BlocksContext.useContext();SettingsContext.useContext();const l=getPmSchema({getBlockRef:s.getBlockRef}),c=ref(!1),d=ref({"Mod-z":{run:()=>(s.undo(),!0),stopPropagation:!0,preventDefault:!0},"Mod-Shift-z":{run:()=>(s.redo(),!0),stopPropagation:!0,preventDefault:!0},Enter:{run:()=>(o.addTask(async()=>{const I=e.value,U=n.value;if(!I||!U)return;const W=I.getEditorView(U),K=I.getDi(U);if(!(W instanceof EditorView$1)||!K||!DI_FILTERS.isBlockDi(K))return;const G=W.state.selection,Z=AllSelection.atEnd(W.state.doc),oe=K.block.id===I.getRootBlockId();if(G.eq(Z)){const Y=oe?a.normalizePos({parentId:K.block.id,childIndex:"last-space"}):a.normalizePos({baseBlockId:K.block.id,offset:1});if(!Y)return;if(document.activeElement.blur(),a.insertNormalBlock({pos:Y,content:plainTextToTextContent("",l)}),I){await I.nextUpdate();const se=I.getDiBelow(U,DI_FILTERS.isBlockDi);se&&I.focusDi(se[0].itemId)}}else if(G.head==0){if(oe)return;const Y=a.normalizePos({baseBlockId:K.block.id,offset:0});if(!Y)return;if(document.activeElement.blur(),a.insertNormalBlock({pos:Y,content:plainTextToTextContent("",l)}),I){await I.nextUpdate();const se=I.getDiAbove(U,DI_FILTERS.isBlockDi);se&&I.focusDi(se[0].itemId)}}else{if(oe)return;const Y=W.state.selection,se=W.state.doc.cut(0,Y.anchor),le=W.state.doc.cut(Y.anchor),ce=s.createBlockTransaction({type:"ui"});a.changeBlockContent({blockId:K.block.id,content:[BLOCK_CONTENT_TYPES.TEXT,le.toJSON()],tr:ce,commit:!1});const de=a.normalizePos({baseBlockId:K.block.id,offset:0});if(!de)return;a.insertNormalBlock({pos:de,content:[BLOCK_CONTENT_TYPES.TEXT,se.toJSON()],tr:ce,commit:!1}),document.activeElement.blur(),ce.commit(),I&&(await I.nextUpdate(),I.focusDi(K.itemId),I.moveCursorToBegin(K.itemId))}}),!0),stopPropagation:!0},"Shift-Enter":{run:(I,U)=>{const W=l.nodes.hardBreak.create(),K=I.tr.replaceSelectionWith(W);return U(K),!0},stopPropagation:!0},Backspace:{run:(I,U)=>(deleteUfeffBeforeCursor(I,U),o.addTask(async()=>{const W=e.value,K=n.value;if(!W||!K)return;const G=W.getEditorView(K),Z=W.getDi(K);if(!(G instanceof EditorView$1)||!Z||!DI_FILTERS.isBlockDi(Z))return;const oe=W.getDiAbove(K,DI_FILTERS.isBlockDi),Y=W.getDiBelow(K,DI_FILTERS.isBlockDi),se=oe?.[0].itemId||Y?.[0].itemId,le=G.state.selection;if(le.empty){if(G.state.doc.content.size==0){document.activeElement.blur(),a.deleteBlock({blockId:Z.block.id}),se&&W&&(await W.nextUpdate(),await W.focusDi(se),W.moveCursorToTheEnd(se));return}else if(le.from==0&&oe){if(DI_FILTERS.isBlockDi(oe[0])){const ce=oe[0].block;if(ce.content[0]!=BLOCK_CONTENT_TYPES.TEXT||ce.childrenIds.length>0||Z.block.parentId!=ce.parentId||ce.content[0]!=BLOCK_CONTENT_TYPES.TEXT)return;document.activeElement.blur();const de=Node$1.fromJSON(l,ce.content[1]),ge=G.state.doc,qe=de.content.append(ge.content),ke=l.nodes.doc.create(null,qe),Ee=s.createBlockTransaction({type:"ui"});if(a.changeBlockContent({blockId:Z.block.id,content:[BLOCK_CONTENT_TYPES.TEXT,ke.toJSON()],tr:Ee,commit:!1}),a.deleteBlock({blockId:ce.id,tr:Ee,commit:!1}),Ee.commit(),W){await W.nextUpdate();const Oe=W.getEditorView(Z.itemId);if(Oe instanceof EditorView$1){const Ve=TextSelection.create(Oe.state.doc,de.content.size),Ne=Oe.state.tr.setSelection(Ve);Oe.dispatch(Ne),Oe.focus()}}}return}}}),!1),preventDefault:!0,stopPropagation:!0},Delete:{run:(I,U)=>{deleteUfeffAfterCursor(I,U);const W=e.value,K=n.value;if(!W||!K)return!1;const G=W.getEditorView(K),Z=W.getDi(K);if(!(G instanceof EditorView$1)||!Z||!DI_FILTERS.isBlockDi(Z))return!1;const oe=W.getDiAbove(K,DI_FILTERS.isBlockDi),Y=W.getDiBelow(K,DI_FILTERS.isBlockDi),se=Y?.[0].itemId||oe?.[0].itemId,le=G.state.selection,ce=AllSelection.atEnd(G.state.doc);if(!le.empty)return!1;if(G.state.doc.content.size==0)return o.addTask(async()=>{a.deleteBlock({blockId:Z.block.id}),se&&W&&(await W.nextUpdate(),await W.focusDi(se))}),!0;if(le.eq(ce)&&Y&&DI_FILTERS.isBlockDi(Y[0])){const de=Y[0].block;return de.content[0]===BLOCK_CONTENT_TYPES.TEXT&&Node$1.fromJSON(l,de.content[1]).content.size===0?(o.addTask(async()=>{a.deleteBlock({blockId:de.id})}),!0):de.content[0]!==BLOCK_CONTENT_TYPES.TEXT||Z.block.childrenIds.length>0||Z.block.parentId!==de.parentId?!1:(o.addTask(async()=>{if(de.content[0]!==BLOCK_CONTENT_TYPES.TEXT)return;const ge=Node$1.fromJSON(l,de.content[1]),qe=G.state.doc,ke=qe.content.append(ge.content),Ee=l.nodes.doc.create(null,ke),Oe=s.createBlockTransaction({type:"ui"});if(a.changeBlockContent({blockId:de.id,content:[BLOCK_CONTENT_TYPES.TEXT,Ee.toJSON()],tr:Oe,commit:!1}),a.deleteBlock({blockId:Z.block.id,tr:Oe,commit:!1}),Oe.commit(),W){await W.nextUpdate(),await W.focusDi(Y[0].itemId);const Ve=W.getEditorView(Y[0].itemId);if(Ve instanceof EditorView$1){const Ne=TextSelection.create(Ve.state.doc,qe.content.size),dt=Ve.state.tr.setSelection(Ne);Ve.dispatch(dt)}}}),!0)}return!1},preventDefault:!0,stopPropagation:!0},"Mod-ArrowUp":{run:()=>(o.addTask(async()=>{const I=n.value,U=e.value;if(!I||!U)return;const W=U.getDi(I);W?.type==="basic-block"&&await a.toggleFold(W.block.id,!0)}),!0),preventDefault:!0,stopPropagation:!0},"Mod-ArrowDown":{run:()=>(o.addTask(async()=>{const I=n.value,U=e.value;if(!I||!U)return;const W=U.getDi(I);W?.type==="basic-block"&&await a.toggleFold(W.block.id,!1)}),!0),preventDefault:!0,stopPropagation:!0},"Alt-ArrowUp":{run:()=>(o.addTask(async()=>{const I=n.value,U=e.value;if(!I||!U)return;const W=U.getDi(I);if(!W||!DI_FILTERS.isBlockDi(W))return;const K=a.normalizePos({baseBlockId:W.block.id,offset:-1});K&&(a.moveBlock({blockId:W.block.id,pos:K}),await U.nextUpdate(),U.focusDi(I))}),!0),preventDefault:!0,stopPropagation:!0},"Alt-ArrowDown":{run:()=>(o.addTask(async()=>{const I=n.value,U=e.value;if(!I||!U)return;const W=U.getDi(I);if(!W||!DI_FILTERS.isBlockDi(W))return;const K=a.normalizePos({baseBlockId:W.block.id,offset:2});K&&(a.moveBlock({blockId:W.block.id,pos:K}),await U.nextUpdate(),U.focusDi(I))}),!0),preventDefault:!0,stopPropagation:!0},Tab:{run:()=>(o.addTask(async()=>{const I=n.value,U=e.value;if(!I||!U)return;const W=U.getDi(I);!W||!DI_FILTERS.isBlockDi(W)||(a.promoteBlock({blockId:W.block.id}),await U.nextUpdate(),U.focusDi(I))}),!0),preventDefault:!0,stopPropagation:!0},"Shift-Tab":{run:()=>(o.addTask(async()=>{const I=n.value,U=e.value;if(!I||!U)return;const W=U.getDi(I);!W||!DI_FILTERS.isBlockDi(W)||(a.demoteBlock({blockId:W.block.id}),await U.nextUpdate(),U.focusDi(I))}),!0),preventDefault:!0,stopPropagation:!0},ArrowUp:{run:()=>{const I=e.value,U=n.value;if(!I||!U)return!1;const W=I.getEditorView(U),K=I.getDi(U);if(!(W instanceof EditorView$1)||!K||!DI_FILTERS.isBlockDi(K))return!1;if(I&&W.endOfTextblock("up")){const G=W.state.selection.anchor,Z=W.coordsAtPos(G),oe=I.getDiAbove(U,DI_FILTERS.isBlockDi);if(!oe)return!1;I.focusDi(oe[0].itemId);const Y=I.getEditorView(oe[0].itemId);if(!(Y instanceof EditorView$1))return!1;const se=Y.posAtCoords({left:Z.left,top:Z.top-10})?.pos??G,le=Y.state.doc.content.size,ce=TextSelection.create(Y.state.doc,Math.min(se,le)),de=Y.state.tr.setSelection(ce);return Y.dispatch(de),!0}return!1},preventDefault:!0,stopPropagation:!0},ArrowDown:{run:()=>{const I=e.value,U=n.value;if(!I||!U)return!1;const W=I.getEditorView(U),K=I.getDi(U);if(!(W instanceof EditorView$1)||!K||!DI_FILTERS.isBlockDi(K))return!1;if(I&&W.endOfTextblock("down")){const G=W.state.selection.anchor,Z=W.coordsAtPos(G),oe=I.getDiBelow(U,DI_FILTERS.isBlockDi);if(!oe)return!1;I.focusDi(oe[0].itemId);const Y=I.getEditorView(oe[0].itemId);if(!(Y instanceof EditorView$1))return!1;const se=Y.posAtCoords({left:Z.left,top:Z.top+30})?.pos??G,le=Y.state.doc.content.size,ce=TextSelection.create(Y.state.doc,Math.min(se,le)),de=Y.state.tr.setSelection(ce);return Y.dispatch(de),!0}return!1},preventDefault:!0,stopPropagation:!0},"Mod-m":{run:(I,U,W)=>{if(U==null)return!1;const K=l.nodes.mathInline.create({src:""}),G=I.tr.replaceSelectionWith(K),Z=G.doc.resolve(G.selection.anchor-G.selection.$anchor.nodeBefore.nodeSize);return G.setSelection(new NodeSelection(Z)),U(G),!0},preventDefault:!0,stopPropagation:!0},"Mod-Shift-m":{run:(I,U,W)=>{const K=n.value,G=e.value;if(!K||!G)return!1;const Z=G.getDi(K);return!Z||!DI_FILTERS.isBlockDi(Z)?!1:(I.doc.content.size==0?o.addTask(async()=>{a.changeBlockContent({blockId:Z.block.id,content:[BLOCK_CONTENT_TYPES.MATH,""]}),await G.nextUpdate(),G.focusDi(K,{scrollIntoView:!0})}):o.addTask(async()=>{const Y=a.normalizePos({baseBlockId:Z.block.id,offset:1});if(Y==null)return;a.insertNormalBlock({pos:Y,content:[BLOCK_CONTENT_TYPES.MATH,""]});const se=G.getDiBelow(K,DI_FILTERS.isBlockDi);se&&(await G.nextUpdate(),G.focusDi(se[0].itemId,{scrollIntoView:!0}))}),!0)},preventDefault:!0,stopPropagation:!0},ArrowLeft:{run:(I,U,W)=>{skipOneUfeffBeforeCursor(I,U);const K=n.value,G=e.value;if(!K||!G)return!1;const Z=G.getDi(K);if(!Z||!DI_FILTERS.isBlockDi(Z))return!1;const oe=I.selection.empty&&I.selection.anchor==0;if(G&&oe){const Y=G.getPredecessorDi(K);return Y?(G.focusDi(Y[0].itemId),G.moveCursorToTheEnd(Y[0].itemId),!0):!1}return!1},preventDefault:!0,stopPropagation:!0},ArrowRight:{run:(I,U,W)=>{skipOneUfeffAfterCursor(I,U);const K=n.value,G=e.value;if(!K||!G)return!1;const Z=G.getDi(K);if(!Z||!DI_FILTERS.isBlockDi(Z))return!1;const oe=I.selection.empty&&I.selection.anchor==I.doc.content.size;if(G&&oe){const Y=G.getSuccessorDi(K);return Y?(G.focusDi(Y[0].itemId),G.moveCursorToTheEnd(Y[0].itemId),!0):!1}return!1},preventDefault:!0,stopPropagation:!0},"Mod-b":{run:toggleMark(l.marks.bold),preventDefault:!0,stopPropagation:!0},"Mod-i":{run:toggleMark(l.marks.italic),preventDefault:!0,stopPropagation:!0},"Mod-`":{run:toggleMark(l.marks.code),preventDefault:!0,stopPropagation:!0},"Mod-=":{run:toggleMark(l.marks.highlight,{bg:"bg4"}),preventDefault:!0,stopPropagation:!0}}),u=ref({ArrowLeft:{key:"ArrowLeft",run:()=>{const I=n.value,U=e.value;if(!I||!U)return!1;const W=U.getDi(I),K=U.getEditorView(I);if(!(K instanceof EditorView)||!W||!DI_FILTERS.isBlockDi(W))return!1;const G=K.state.selection;if(G.ranges.length==1){const Z=G.ranges[0];if(Z.from==Z.to&&Z.from==0){const oe=U.getPredecessorDi(I);return oe?(U.focusDi(oe[0].itemId),U.moveCursorToTheEnd(oe[0].itemId),!0):!1}}return cursorCharLeft(K)},stopPropagation:!0},ArrowRight:{key:"ArrowRight",run:()=>{const I=n.value,U=e.value;if(!I||!U)return!1;const W=U.getDi(I),K=U.getEditorView(I);if(!(K instanceof EditorView)||!W||!DI_FILTERS.isBlockDi(W))return!1;const G=K.state.selection,Z=K.state.doc.length;if(G.ranges.length==1){const oe=G.ranges[0];if(oe.from==oe.to&&oe.from==Z){const Y=U.getSuccessorDi(I);return Y?(U.focusDi(Y[0].itemId),U.moveCursorToTheEnd(Y[0].itemId),!0):!1}}return cursorCharRight(K)},stopPropagation:!0},ArrowUp:{key:"ArrowUp",run:()=>{const I=n.value,U=e.value;if(!I||!U)return!1;const W=U.getDi(I),K=U.getEditorView(I);if(!(K instanceof EditorView)||!W||!DI_FILTERS.isBlockDi(W))return!1;const G=K.state.selection;if(G.ranges.length==1){const Z=G.ranges[0];if(Z.from==Z.to&&K.state.doc.lineAt(Z.from).number==1){const Y=U.getDiAbove(I);return Y?(U.focusDi(Y[0].itemId),U.moveCursorToTheEnd(Y[0].itemId),!0):!1}}return cursorLineUp(K)},stopPropagation:!0},ArrowDown:{key:"ArrowDown",run:()=>{const I=n.value,U=e.value;if(!I||!U)return!1;const W=U.getDi(I),K=U.getEditorView(I);if(!(K instanceof EditorView)||!W||!DI_FILTERS.isBlockDi(W))return!1;const G=K.state.doc.lines,Z=K.state.selection;if(Z.ranges.length==1){const oe=Z.ranges[0];if(oe.from==oe.to&&K.state.doc.lineAt(oe.from).number==G){const se=U.getDiBelow(I);return se?(U.focusDi(se[0].itemId),U.moveCursorToBegin(se[0].itemId),!0):!1}}return cursorLineDown(K)},stopPropagation:!0},Backspace:{key:"Backspace",run:()=>{const I=n.value,U=e.value;if(!I||!U)return!1;const W=U.getDi(I),K=U.getEditorView(I);if(!(K instanceof EditorView)||!W||!DI_FILTERS.isBlockDi(W))return!1;if(K.state.doc.length==0){const Z=U.getDiAbove(I);return o.addTask(async()=>{a.deleteBlock({blockId:W.block.id}),Z&&(await U.nextUpdate(),U.focusDi(Z[0].itemId),U.moveCursorToTheEnd(Z[0].itemId))}),!0}return deleteCharBackward(K)},stopPropagation:!0},Delete:{key:"Delete",run:()=>{const I=n.value,U=e.value;if(!I||!U)return!1;const W=U.getDi(I),K=U.getEditorView(I);if(!(K instanceof EditorView)||!W||!DI_FILTERS.isBlockDi(W))return!1;if(K.state.doc.length==0){const Z=U.getDiBelow(I);return o.addTask(async()=>{a.deleteBlock({blockId:W.block.id}),Z&&(await U.nextUpdate(),U.focusDi(Z[0].itemId),U.moveCursorToBegin(Z[0].itemId))}),!0}return deleteCharForward(K)},stopPropagation:!0},Tab:{key:"Tab",run:I=>indentMore(I),stopPropagation:!0},"Shift-Tab":{key:"Shift-Tab",run:I=>indentLess(I),stopPropagation:!0},Enter:{key:"Enter",run:I=>insertNewlineAndIndent(I),stopPropagation:!0}}),f=ref({});return{openKeybindings:c,prosemirrorKeymap:d,codemirrorKeymap:u,globalKeymap:f,getProsemirrorKeybinding:I=>d.value[I],getCodemirrorKeybinding:I=>u.value[I],getGlobalKeybinding:I=>f.value[I],addProsemirrorKeybinding:(I,U)=>{if(d.value[I])throw new Error(`keybinding ${I} already exists`);d.value[I]=U},addCodemirrorKeybinding:(I,U)=>{if(u.value[I])throw new Error(`keybinding ${I} already exists`);u.value[I]=U},addGlobalKeybinding:(I,U)=>{if(f.value[I])throw new Error(`keybinding ${I} already exists`);f.value[I]=U},removeProsemirrorKeybinding:I=>{delete d.value[I]},removeCodemirrorKeybinding:I=>{delete u.value[I]},removeGlobalKeybinding:I=>{delete f.value[I]},moveProsemirrorKeybinding:(I,U,W)=>{const K=U?d.value[U]:void 0;if(d.value[I])throw new Error(`keybinding ${I} already exists`);const Z=K??W;Z&&(d.value[I]=Z,U&&K&&delete d.value[U])},moveCodemirrorKeybinding:(I,U,W)=>{const K=U?u.value[U]:void 0;if(u.value[I])throw new Error(`keybinding ${I} already exists`);const Z=K??W;Z&&(u.value[I]=Z,U&&K&&delete u.value[U])},moveGlobalKeybinding:(I,U,W)=>{const K=U?f.value[U]:void 0;if(f.value[I])throw new Error(`keybinding ${I} already exists`);const Z=K??W;Z&&(f.value[I]=Z,U&&K&&delete f.value[U])}}}),skipOneUfeffAfterCursor=(o,e)=>{if(e==null)return!1;const n=o.selection;try{if(o.doc.textBetween(n.from,n.from+1)=="\uFEFF"){const s=o.tr.setSelection(TextSelection.create(o.doc,n.from+1));return e(s),!0}}catch{}return!1},skipOneUfeffBeforeCursor=(o,e)=>{if(e==null)return!1;const n=o.selection;if(o.doc.textBetween(n.from-1,n.from)=="\uFEFF"){const s=o.tr.setSelection(TextSelection.create(o.doc,n.from-1));return e(s),!0}return!1},deleteUfeffAfterCursor=(o,e)=>{const n=o.selection;try{if(o.doc.textBetween(n.from,n.from+1)=="\uFEFF"){const s=o.tr.delete(n.from,n.from+1);e(s)}}catch{}},deleteUfeffBeforeCursor=(o,e)=>{if(e==null)return!1;const n=o.selection;if(o.doc.textBetween(n.from-1,n.from)=="\uFEFF"){const s=o.tr.delete(n.from-1,n.from);e(s)}},SidebarContext=createContext(()=>{const{blocksManager:o}=BlocksContext.useContext(),{kbPrefix:e}=ServerInfoContext.useContext(),n={sidePaneOpen:"sidePaneOpen",sidePaneDir:"sidePaneDir",sidePaneWidth:"sidePaneWidth",sidePaneHeight:"sidePaneHeight",sidePaneBlockIds:"sidePaneBlockIds",sidePaneCurrentBlockId:"sidePaneCurrentBlockId"},a={sidePaneOpen:computed(()=>`${e.value}${n.sidePaneOpen}`),sidePaneDir:computed(()=>`${e.value}${n.sidePaneDir}`),sidePaneWidth:computed(()=>`${e.value}${n.sidePaneWidth}`),sidePaneHeight:computed(()=>`${e.value}${n.sidePaneHeight}`),sidePaneBlockIds:computed(()=>`${e.value}${n.sidePaneBlockIds}`),sidePaneCurrentBlockId:computed(()=>`${e.value}${n.sidePaneCurrentBlockId}`)},s=useLocalStorage2(a.sidePaneOpen,!1),l=useLocalStorage2(a.sidePaneDir,"right"),c=useLocalStorage2(a.sidePaneWidth,500),d=useLocalStorage2(a.sidePaneHeight,300),u=ref(!0),f=useLocalStorage2(a.sidePaneBlockIds,[]),p=useLocalStorage2(a.sidePaneCurrentBlockId,""),_=ref("left"),b=computed(()=>f.value.map(E=>o.getBlock(E)).filter(E=>!!E)),v=computed(()=>{if(p.value==null)return!1;const E=f.value.indexOf(p.value);return E!==-1&&E>0}),k=computed(()=>{if(p.value==null)return!1;const E=f.value.indexOf(p.value);return E!==-1&&E<f.value.length-1}),x=()=>{const E=f.value.indexOf(p.value);if(E===-1)return;const L=E===0?f.value.length-1:E-1;p.value=f.value[L],_.value="left"},M=()=>{const E=f.value.indexOf(p.value);if(E===-1)return;const L=E===f.value.length-1?0:E+1;p.value=f.value[L],_.value="right"};return watch([f,p],()=>{p.value==null?f.value.length>0&&(p.value=f.value[0]):f.value.includes(p.value)||(f.value.length>0?p.value=f.value[0]:p.value=null)},{immediate:!0}),{sidePaneOpen:s,sidePaneDir:l,sidePaneWidth:c,sidePaneHeight:d,enableSidePaneAnimation:u,sidePaneBlockIds:f,sidePaneBlocks:b,sidePaneCurrentBlockId:p,hasPrev:v,hasNext:k,goPrev:x,goNext:M,dir:_}}),useWritableComputedRef=o=>computed({get:()=>o.value,set:e=>{o.value=e}}),TimeMachineContext=createContext(()=>{const{registerSettingItem:o,registerSettingGroup:e}=SettingsContext.useContext(),{kbPrefix:n}=ServerInfoContext.useContext();e({key:"timeMachine",label:{zh:"时光机"}});const a=ref(!1),s={hourly:1,daily:1,weekly:1},l="timeMachine.autoBackup",c=computed(()=>`${n.value}${l}`),d=useLocalStorage2(c,s),u={hourly:10,daily:10,weekly:10},f="timeMachine.autoBackupKeepNumber",p=computed(()=>`${n.value}${f}`),_=useLocalStorage2(p,u);o({id:l+"weekly",groupKey:"timeMachine",label:{zh:"每几周自动生成存档"},defaultValue:s.weekly,value:computed({get:()=>d.value.weekly,set:M=>d.value.weekly=M}),componentType:{type:"integerInput"}}),o({id:f+"weekly",groupKey:"timeMachine",label:{zh:"最多保留几份每周自动备份"},desc:{zh:"如果每周备份数量达到此值，则删除最早的备份。"},defaultValue:u.weekly,value:computed({get:()=>_.value.hourly,set:M=>_.value.hourly=M}),componentType:{type:"integerInput"}}),o({id:l+"daily",groupKey:"timeMachine",label:{zh:"每几日自动生成存档"},defaultValue:s.daily,value:computed({get:()=>d.value.daily,set:M=>d.value.daily=M}),componentType:{type:"integerInput"}}),o({id:f+"daily",groupKey:"timeMachine",label:{zh:"最多保留几份每日自动备份"},desc:{zh:"如果每日备份数量达到此值，则删除最早的备份。"},defaultValue:u.daily,value:computed({get:()=>_.value.daily,set:M=>_.value.daily=M}),componentType:{type:"integerInput"}}),o({id:l+"hourly",groupKey:"timeMachine",label:{zh:"每几小时自动生成存档"},defaultValue:s.hourly,value:computed({get:()=>d.value.hourly,set:M=>d.value.hourly=M}),componentType:{type:"integerInput"}}),o({id:f+"hourly",groupKey:"timeMachine",label:{zh:"最多保留几份每小时自动备份"},desc:{zh:"如果每小时备份数量达到此值，则删除最早的备份。"},defaultValue:u.hourly,value:computed({get:()=>_.value.hourly,set:M=>_.value.hourly=M}),componentType:{type:"integerInput"}});const b=30,v="timeMachine.inactiveThreshold",k=computed(()=>`${n.value}${v}`),x=useLocalStorage2(k,b);return o({id:v,groupKey:"timeMachine",label:{zh:"不活跃检测阈值"},desc:{zh:"如果一段时间无操作，则会自动生成不活跃归档。此值控制多久无操作算不活跃，单位：秒。"},defaultValue:b,value:useWritableComputedRef(x),componentType:{type:"integerInput"}}),{timeMachineOpen:a}}),FloatingMathInputContext=createContext(()=>{const o=ref(null);return{registerFloatingMathInput:s=>{o.value=s},openFloatingMathInput:(...s)=>{o.value?.(...s)}}});CompletionContext=class{constructor(e,n,a,s){this.state=e,this.pos=n,this.explicit=a,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=syntaxTree(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),a=Math.max(n.from,this.pos-250),s=n.text.slice(a-n.from,this.pos-n.from),l=s.search(ensureAnchor(e));return l<0?null:{from:a+l,to:this.pos,text:s.slice(l)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,a){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),a&&a.onDocChange&&(this.abortOnDocChange=!0))}};function toSet(o){let e=Object.keys(o).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(o){let e=Object.create(null),n=Object.create(null);for(let{label:s}of o){e[s[0]]=!0;for(let l=1;l<s.length;l++)n[s[l]]=!0}let a=toSet(e)+toSet(n)+"*$";return[new RegExp("^"+a),new RegExp(a)]}completeFromList=function(o){let e=o.map(s=>typeof s=="string"?{label:s}:s),[n,a]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:prefixMatch(e);return s=>{let l=s.matchBefore(a);return l||s.explicit?{from:l?l.from:s.pos,options:e,validFor:n}:null}};ifNotIn=function(o,e){return n=>{for(let a=syntaxTree(n.state).resolveInner(n.pos,-1);a;a=a.parent){if(o.indexOf(a.name)>-1)return null;if(a.type.isTop)break}return e(n)}};function ensureAnchor(o,e){var n;let{source:a}=o,s=a[a.length-1]!="$";return s?new RegExp(`(?:${a})${s?"$":""}`,(n=o.flags)!==null&&n!==void 0?n:o.ignoreCase?"i":""):o}const pickedCompletion=Annotation.define(),baseTheme=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'\uD835\uDC65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\uD835\uDC36'"}},".cm-completionIcon-type":{"&:after":{content:"'\uD835\uDC61'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\uD83D\uDD11︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(e,n,a,s){this.field=e,this.line=n,this.from=a,this.to=s}}class FieldRange{constructor(e,n,a){this.field=e,this.from=n,this.to=a}map(e){let n=e.mapPos(this.from,-1,MapMode.TrackDel),a=e.mapPos(this.to,1,MapMode.TrackDel);return n==null||a==null?null:new FieldRange(this.field,n,a)}}class Snippet{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let a=[],s=[n],l=e.doc.lineAt(n),c=/^\s*/.exec(l.text)[0];for(let u of this.lines){if(a.length){let f=c,p=/^\t*/.exec(u)[0].length;for(let _=0;_<p;_++)f+=e.facet(indentUnit);s.push(n+f.length-p),u=f+u.slice(p)}a.push(u),n+=u.length+1}let d=this.fieldPositions.map(u=>new FieldRange(u.field,s[u.line]+u.from,s[u.line]+u.to));return{text:a,ranges:d}}static parse(e){let n=[],a=[],s=[],l;for(let c of e.split(/\r\n?|\n/)){for(;l=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(c);){let d=l[1]?+l[1]:null,u=l[2]||l[3]||"",f=-1,p=u.replace(/\\[{}]/g,_=>_[1]);for(let _=0;_<n.length;_++)(d!=null?n[_].seq==d:p&&n[_].name==p)&&(f=_);if(f<0){let _=0;for(;_<n.length&&(d==null||n[_].seq!=null&&n[_].seq<d);)_++;n.splice(_,0,{seq:d,name:p}),f=_;for(let b of s)b.field>=f&&b.field++}s.push(new FieldPos(f,a.length,l.index,l.index+p.length)),c=c.slice(0,l.index)+u+c.slice(l.index+l[0].length)}c=c.replace(/\\([{}])/g,(d,u,f)=>{for(let p of s)p.line==a.length&&p.from>f&&(p.from--,p.to--);return u}),a.push(c)}return new Snippet(a,s)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let o=document.createElement("span");return o.className="cm-snippetFieldPosition",o}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(e,n){this.ranges=e,this.active=n,this.deco=Decoration.set(e.map(a=>(a.from==a.to?fieldMarker:fieldRange).range(a.from,a.to)))}map(e){let n=[];for(let a of this.ranges){let s=a.map(e);if(!s)return null;n.push(s)}return new ActiveSnippet(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(a=>a.field==this.active&&a.from<=n.from&&a.to>=n.to))}}const setActive=StateEffect.define({map(o,e){return o&&o.map(e)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(o,e){for(let n of e.effects){if(n.is(setActive))return n.value;if(n.is(moveToField)&&o)return new ActiveSnippet(o.ranges,n.value)}return o&&e.docChanged&&(o=o.map(e.changes)),o&&e.selection&&!o.selectionInsideField(e.selection)&&(o=null),o},provide:o=>EditorView.decorations.from(o,e=>e?e.deco:Decoration.none)});function fieldSelection(o,e){return EditorSelection.create(o.filter(n=>n.field==e).map(n=>EditorSelection.range(n.from,n.to)))}function snippet(o){let e=Snippet.parse(o);return(n,a,s,l)=>{let{text:c,ranges:d}=e.instantiate(n.state,s),{main:u}=n.state.selection,f={changes:{from:s,to:l==u.from?u.to:l,insert:Text.of(c)},scrollIntoView:!0,annotations:a?[pickedCompletion.of(a),Transaction.userEvent.of("input.complete")]:void 0};if(d.length&&(f.selection=fieldSelection(d,0)),d.some(p=>p.field>0)){let p=new ActiveSnippet(d,0),_=f.effects=[setActive.of(p)];n.state.field(snippetState,!1)===void 0&&_.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme]))}n.dispatch(n.state.update(f))}}function moveField(o){return({state:e,dispatch:n})=>{let a=e.field(snippetState,!1);if(!a||o<0&&a.active==0)return!1;let s=a.active+o,l=o>0&&!a.ranges.some(c=>c.field==s+o);return n(e.update({selection:fieldSelection(a.ranges,s),effects:setActive.of(l?null:new ActiveSnippet(a.ranges,s)),scrollIntoView:!0})),!0}}const clearSnippet=({state:o,dispatch:e})=>o.field(snippetState,!1)?(e(o.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(o){return o.length?o[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],o=>o.facet(snippetKeymap)));snippetCompletion=function(o,e){return Object.assign(Object.assign({},e),{apply:snippet(o)})};const snippetPointerHandler=EditorView.domEventHandlers({mousedown(o,e){let n=e.state.field(snippetState,!1),a;if(!n||(a=e.posAtCoords({x:o.clientX,y:o.clientY}))==null)return!1;let s=n.ranges.find(l=>l.from<=a&&l.to>=a);return!s||s.field==n.active?!1:(e.dispatch({selection:fieldSelection(n.ranges,s.field),effects:setActive.of(n.ranges.some(l=>l.field>s.field)?new ActiveSnippet(n.ranges,s.field):null),scrollIntoView:!0}),!0)}}),defaults$1={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(o,e){let n=e.mapPos(o,-1,MapMode.TrackAfter);return n??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(o,e){if(o=o.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);o=o.update({filter:a=>a>=n.from&&a<=n.to})}for(let n of e.effects)n.is(closeBracketEffect)&&(o=o.update({add:[closedBracket.range(n.value,n.value+1)]}));return o}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(o){for(let e=0;e<definedClosing.length;e+=2)if(definedClosing.charCodeAt(e)==o)return definedClosing.charAt(e+1);return fromCodePoint(o<128?o:o+1)}function config$1(o,e){return o.languageDataAt("closeBrackets",e)[0]||defaults$1}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((o,e,n,a)=>{if((android?o.composing:o.compositionStarted)||o.state.readOnly)return!1;let s=o.state.selection.main;if(a.length>2||a.length==2&&codePointSize(codePointAt(a,0))==1||e!=s.from||n!=s.to)return!1;let l=insertBracket(o.state,a);return l?(o.dispatch(l),!0):!1});function insertBracket(o,e){let n=config$1(o,o.selection.main.head),a=n.brackets||defaults$1.brackets;for(let s of a){let l=closing(codePointAt(s,0));if(e==s)return l==s?handleSame(o,s,a.indexOf(s+s+s)>-1,n):handleOpen(o,s,l,n.before||defaults$1.before);if(e==l&&closedBracketAt(o,o.selection.main.from))return handleClose(o,s,l)}return null}function closedBracketAt(o,e){let n=!1;return o.field(bracketState).between(0,o.doc.length,a=>{a==e&&(n=!0)}),n}function nextChar(o,e){let n=o.sliceString(e,e+2);return n.slice(0,codePointSize(codePointAt(n,0)))}function handleOpen(o,e,n,a){let s=null,l=o.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:n,from:c.to}],effects:closeBracketEffect.of(c.to+e.length),range:EditorSelection.range(c.anchor+e.length,c.head+e.length)};let d=nextChar(o.doc,c.head);return!d||/\s/.test(d)||a.indexOf(d)>-1?{changes:{insert:e+n,from:c.head},effects:closeBracketEffect.of(c.head+e.length),range:EditorSelection.cursor(c.head+e.length)}:{range:s=c}});return s?null:o.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(o,e,n){let a=null,s=o.changeByRange(l=>l.empty&&nextChar(o.doc,l.head)==n?{changes:{from:l.head,to:l.head+n.length,insert:n},range:EditorSelection.cursor(l.head+n.length)}:a={range:l});return a?null:o.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(o,e,n,a){let s=a.stringPrefixes||defaults$1.stringPrefixes,l=null,c=o.changeByRange(d=>{if(!d.empty)return{changes:[{insert:e,from:d.from},{insert:e,from:d.to}],effects:closeBracketEffect.of(d.to+e.length),range:EditorSelection.range(d.anchor+e.length,d.head+e.length)};let u=d.head,f=nextChar(o.doc,u),p;if(f==e){if(nodeStart(o,u))return{changes:{insert:e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)};if(closedBracketAt(o,u)){let b=n&&o.sliceDoc(u,u+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:u,to:u+b.length,insert:b},range:EditorSelection.cursor(u+b.length)}}}else{if(n&&o.sliceDoc(u-2*e.length,u)==e+e&&(p=canStartStringAt(o,u-2*e.length,s))>-1&&nodeStart(o,p))return{changes:{insert:e+e+e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)};if(o.charCategorizer(u)(f)!=CharCategory.Word&&canStartStringAt(o,u,s)>-1&&!probablyInString(o,u,e,s))return{changes:{insert:e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)}}return{range:l=d}});return l?null:o.update(c,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(o,e){let n=syntaxTree(o).resolveInner(e+1);return n.parent&&n.from==e}function probablyInString(o,e,n,a){let s=syntaxTree(o).resolveInner(e,-1),l=a.reduce((c,d)=>Math.max(c,d.length),0);for(let c=0;c<5;c++){let d=o.sliceDoc(s.from,Math.min(s.to,s.from+n.length+l)),u=d.indexOf(n);if(!u||u>-1&&a.indexOf(d.slice(0,u))>-1){let p=s.firstChild;for(;p&&p.from==s.from&&p.to-p.from>n.length+u;){if(o.sliceDoc(p.to-n.length,p.to)==n)return!1;p=p.firstChild}return!0}let f=s.to==e&&s.parent;if(!f)break;s=f}return!1}function canStartStringAt(o,e,n){let a=o.charCategorizer(e);if(a(o.sliceDoc(e-1,e))!=CharCategory.Word)return e;for(let s of n){let l=e-s.length;if(o.sliceDoc(l,e)==s&&a(o.sliceDoc(l-1,l))!=CharCategory.Word)return l}return-1}const minimalSetup=[highlightSpecialChars(),history$1(),drawSelection(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),keymap.of([...defaultKeymap,...historyKeymap])],HistoryContext=createContext(()=>{const o=ref([]),e=ref(0),n=computed(()=>e.value>0),a=computed(()=>e.value<o.value.length),{mainRootBlockId:s}=MainTreeContext.useContext(),{getBlockTree:l}=BlockTreeContext.useContext(),{lastFocusedDiId:c,lastFocusedBlockTree:d}=LastFocusContext.useContext(),u=()=>{const k=d.value,x=c.value;if(!k||!x)return null;const M=k.getEditorView(x),E=M instanceof EditorView$1||M instanceof EditorView?M.state.selection.toJSON():null;return{focusedDiId:x,rootBlockId:s.value,selection:E}},f=k=>{k??=u()??void 0,k&&(o.value.splice(e.value),o.value.push(k),e.value=o.value.length)},p=k=>{s.value=k.rootBlockId;const x=l("main");x&&x.focusDi(k.focusedDiId,{highlight:!0})};return{historyItems:o,currentIndex:e,pushHistoryItem:f,goPrev:()=>{if(e.value<=0)return;const k=e.value===o.value.length?u():void 0;e.value--,p(o.value[e.value]),k&&o.value.push(k)},goNext:()=>{e.value>=o.value.length||(e.value++,p(o.value[e.value]))},canGoPrev:n,canGoNext:a}}),RefSuggestionsContext=createContext(()=>{const{blocksManager:o}=BlocksContext.useContext(),{search:e}=IndexContext.useContext(),n=ref(null),a=computed({get:()=>n.value!==null,set:v=>!v&&(n.value=null)}),s=ref(""),l=ref(null),c=ref(0),d=ref([]),u=ref(!1),f=useDebounceFn(()=>{if(!s.value||s.value.trim().length==0){d.value=[];return}const v=e(s.value);d.value=v.slice(0,100).map(k=>o.getBlockRef(k)).filter(k=>{const x=k.value;return x!=null&&x.content[0]===BLOCK_CONTENT_TYPES.TEXT}),c.value=0},100);return{showPos:n,open:a,query:s,cb:l,focusItemIndex:c,suggestions:d,suppressMouseOver:u,updateSuggestions:f,withScrollSuppressed:(v,k=500)=>(u.value=!0,setTimeout(()=>u.value=!1,k),v()),openRefSuggestions:(v,k,x)=>{l.value=k,s.value=x??"",c.value=0,n.value=v}}}),mkEventBusPlugin=()=>{const o=mitt$1();return new Plugin({view:e=>(Object.assign(e,{on:o.on}),Object.assign(e,{off:o.off}),Object.assign(e,{emit:o.emit}),{})})},mkHighlightMatchesPlugin=(o,e="highlight-keep")=>new Plugin({props:{decorations:n=>{const a=o.getHighlightTerms();if(!a||a.length==0)return null;let s;const l=[];return n.doc.content.descendants((c,d)=>{if(!c.isText)return!1;const u=c.textContent.toLowerCase();for(const f of a)for(s=-1;(s=u.indexOf(f,s+1))!=-1;){const p=Decoration$1.inline(d+s,d+s+f.length,{class:e});l.push(p)}}),DecorationSet.create(n.doc,l)}}}),mkHighlightRefsPlugin=o=>new Plugin({props:{decorations:e=>{const n=o.getHighlightRefs();if(!n||n.length==0)return null;const a=[];return e.doc.content.descendants((s,l)=>{if(s.type.name=="blockRef_v2"&&n.includes(s.attrs.toBlockId)){const c=Decoration$1.inline(l,l+1,{class:"highlight-keep"});a.push(c)}}),DecorationSet.create(e.doc,a)}}}),mkListenDocChangedPlugin=()=>{let o=null;return new Plugin({view:e=>(o=e,{}),state:{init:()=>{},apply:(e,n,a,s)=>{if(o?.emit&&e.docChanged){const l=a.selection.toJSON(),c=s.selection.toJSON(),d=s.doc.toJSON(),u=a.doc.toJSON();o.emit("docChanged",{newDoc:d,oldDoc:u,view:o,oldSelection:l,newSelection:c})}}}})},PathsContext=createContext(()=>{ServerInfoContext.useContext();const o=useRoute(),e=computed(()=>o.params.location),n=ref("attachments"),a=computed(()=>joinPathSegments([e.value,n.value]));return{dbBasePath:e,attachmentsFolderName:n,attachmentsBasePath:a}});function bind(o,e){return function(){return o.apply(e,arguments)}}const{toString:toString$1}=Object.prototype,{getPrototypeOf}=Object,kindOf=(o=>e=>{const n=toString$1.call(e);return o[n]||(o[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=o=>(o=o.toLowerCase(),e=>kindOf(e)===o),typeOfTest=o=>e=>typeof e===o,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(o){return o!==null&&!isUndefined(o)&&o.constructor!==null&&!isUndefined(o.constructor)&&isFunction(o.constructor.isBuffer)&&o.constructor.isBuffer(o)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(o){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(o):e=o&&o.buffer&&isArrayBuffer(o.buffer),e}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=o=>o!==null&&typeof o=="object",isBoolean=o=>o===!0||o===!1,isPlainObject=o=>{if(kindOf(o)!=="object")return!1;const e=getPrototypeOf(o);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=o=>isObject(o)&&isFunction(o.pipe),isFormData=o=>{let e;return o&&(typeof FormData=="function"&&o instanceof FormData||isFunction(o.append)&&((e=kindOf(o))==="formdata"||e==="object"&&isFunction(o.toString)&&o.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=o=>o.trim?o.trim():o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(o,e,{allOwnKeys:n=!1}={}){if(o===null||typeof o>"u")return;let a,s;if(typeof o!="object"&&(o=[o]),isArray(o))for(a=0,s=o.length;a<s;a++)e.call(null,o[a],a,o);else{const l=n?Object.getOwnPropertyNames(o):Object.keys(o),c=l.length;let d;for(a=0;a<c;a++)d=l[a],e.call(null,o[d],d,o)}}function findKey(o,e){e=e.toLowerCase();const n=Object.keys(o);let a=n.length,s;for(;a-- >0;)if(s=n[a],e===s.toLowerCase())return s;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=o=>!isUndefined(o)&&o!==_global;function merge(){const{caseless:o}=isContextDefined(this)&&this||{},e={},n=(a,s)=>{const l=o&&findKey(e,s)||s;isPlainObject(e[l])&&isPlainObject(a)?e[l]=merge(e[l],a):isPlainObject(a)?e[l]=merge({},a):isArray(a)?e[l]=a.slice():e[l]=a};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&forEach(arguments[a],n);return e}const extend=(o,e,n,{allOwnKeys:a}={})=>(forEach(e,(s,l)=>{n&&isFunction(s)?o[l]=bind(s,n):o[l]=s},{allOwnKeys:a}),o),stripBOM=o=>(o.charCodeAt(0)===65279&&(o=o.slice(1)),o),inherits=(o,e,n,a)=>{o.prototype=Object.create(e.prototype,a),o.prototype.constructor=o,Object.defineProperty(o,"super",{value:e.prototype}),n&&Object.assign(o.prototype,n)},toFlatObject=(o,e,n,a)=>{let s,l,c;const d={};if(e=e||{},o==null)return e;do{for(s=Object.getOwnPropertyNames(o),l=s.length;l-- >0;)c=s[l],(!a||a(c,o,e))&&!d[c]&&(e[c]=o[c],d[c]=!0);o=n!==!1&&getPrototypeOf(o)}while(o&&(!n||n(o,e))&&o!==Object.prototype);return e},endsWith=(o,e,n)=>{o=String(o),(n===void 0||n>o.length)&&(n=o.length),n-=e.length;const a=o.indexOf(e,n);return a!==-1&&a===n},toArray=o=>{if(!o)return null;if(isArray(o))return o;let e=o.length;if(!isNumber(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=o[e];return n},isTypedArray=(o=>e=>o&&e instanceof o)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(o,e)=>{const a=(o&&o[Symbol.iterator]).call(o);let s;for(;(s=a.next())&&!s.done;){const l=s.value;e.call(o,l[0],l[1])}},matchAll=(o,e)=>{let n;const a=[];for(;(n=o.exec(e))!==null;)a.push(n);return a},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=o=>o.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,s){return a.toUpperCase()+s}),hasOwnProperty=(({hasOwnProperty:o})=>(e,n)=>o.call(e,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(o,e)=>{const n=Object.getOwnPropertyDescriptors(o),a={};forEach(n,(s,l)=>{let c;(c=e(s,l,o))!==!1&&(a[l]=c||s)}),Object.defineProperties(o,a)},freezeMethods=o=>{reduceDescriptors(o,(e,n)=>{if(isFunction(o)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=o[n];if(isFunction(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(o,e)=>{const n={},a=s=>{s.forEach(l=>{n[l]=!0})};return isArray(o)?a(o):a(String(o).split(e)),n},noop=()=>{},toFiniteNumber=(o,e)=>o!=null&&Number.isFinite(o=+o)?o:e,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(o=16,e=ALPHABET.ALPHA_DIGIT)=>{let n="";const{length:a}=e;for(;o--;)n+=e[Math.random()*a|0];return n};function isSpecCompliantForm(o){return!!(o&&isFunction(o.append)&&o[Symbol.toStringTag]==="FormData"&&o[Symbol.iterator])}const toJSONObject=o=>{const e=new Array(10),n=(a,s)=>{if(isObject(a)){if(e.indexOf(a)>=0)return;if(!("toJSON"in a)){e[s]=a;const l=isArray(a)?[]:{};return forEach(a,(c,d)=>{const u=n(c,s+1);!isUndefined(u)&&(l[d]=u)}),e[s]=void 0,l}}return a};return n(o,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=o=>o&&(isObject(o)||isFunction(o))&&isFunction(o.then)&&isFunction(o.catch),_setImmediate=((o,e)=>o?setImmediate:e?((n,a)=>(_global.addEventListener("message",({source:s,data:l})=>{s===_global&&l===n&&a.length&&a.shift()()},!1),s=>{a.push(s),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate;var utils$2={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(o,e,n,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=o,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}utils$2.inherits(AxiosError,Error,{toJSON:function o(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$2.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(o=>{descriptors[o]={value:o}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(o,e,n,a,s,l)=>{const c=Object.create(prototype$1);return utils$2.toFlatObject(o,c,function(u){return u!==Error.prototype},d=>d!=="isAxiosError"),AxiosError.call(c,o.message,e,n,a,s),c.cause=o,c.name=o.name,l&&Object.assign(c,l),c};var httpAdapter=null;function isVisitable(o){return utils$2.isPlainObject(o)||utils$2.isArray(o)}function removeBrackets(o){return utils$2.endsWith(o,"[]")?o.slice(0,-2):o}function renderKey(o,e,n){return o?o.concat(e).map(function(s,l){return s=removeBrackets(s),!n&&l?"["+s+"]":s}).join(n?".":""):e}function isFlatArray(o){return utils$2.isArray(o)&&!o.some(isVisitable)}const predicates=utils$2.toFlatObject(utils$2,{},null,function o(e){return/^is[A-Z]/.test(e)});function toFormData(o,e,n){if(!utils$2.isObject(o))throw new TypeError("target must be an object");e=e||new FormData,n=utils$2.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,M){return!utils$2.isUndefined(M[x])});const a=n.metaTokens,s=n.visitor||p,l=n.dots,c=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&utils$2.isSpecCompliantForm(e);if(!utils$2.isFunction(s))throw new TypeError("visitor must be a function");function f(k){if(k===null)return"";if(utils$2.isDate(k))return k.toISOString();if(!u&&utils$2.isBlob(k))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$2.isArrayBuffer(k)||utils$2.isTypedArray(k)?u&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function p(k,x,M){let E=k;if(k&&!M&&typeof k=="object"){if(utils$2.endsWith(x,"{}"))x=a?x:x.slice(0,-2),k=JSON.stringify(k);else if(utils$2.isArray(k)&&isFlatArray(k)||(utils$2.isFileList(k)||utils$2.endsWith(x,"[]"))&&(E=utils$2.toArray(k)))return x=removeBrackets(x),E.forEach(function(V,B){!(utils$2.isUndefined(V)||V===null)&&e.append(c===!0?renderKey([x],B,l):c===null?x:x+"[]",f(V))}),!1}return isVisitable(k)?!0:(e.append(renderKey(M,x,l),f(k)),!1)}const _=[],b=Object.assign(predicates,{defaultVisitor:p,convertValue:f,isVisitable});function v(k,x){if(!utils$2.isUndefined(k)){if(_.indexOf(k)!==-1)throw Error("Circular reference detected in "+x.join("."));_.push(k),utils$2.forEach(k,function(E,L){(!(utils$2.isUndefined(E)||E===null)&&s.call(e,E,utils$2.isString(L)?L.trim():L,x,b))===!0&&v(E,x?x.concat(L):[L])}),_.pop()}}if(!utils$2.isObject(o))throw new TypeError("data must be an object");return v(o),e}function encode$1(o){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(o).replace(/[!'()~]|%20|%00/g,function(a){return e[a]})}function AxiosURLSearchParams(o,e){this._pairs=[],o&&toFormData(o,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function o(e,n){this._pairs.push([e,n])};prototype.toString=function o(e){const n=e?function(a){return e.call(this,a,encode$1)}:encode$1;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function encode(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(o,e,n){if(!e)return o;const a=n&&n.encode||encode;utils$2.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let l;if(s?l=s(e,n):l=utils$2.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,n).toString(a),l){const c=o.indexOf("#");c!==-1&&(o=o.slice(0,c)),o+=(o.indexOf("?")===-1?"?":"&")+l}return o}class InterceptorManager{constructor(){this.handlers=[]}use(e,n,a){return this.handlers.push({fulfilled:e,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$2.forEach(this.handlers,function(a){a!==null&&e(a)})}}var transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]};const hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost";var utils$1=Object.freeze({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin}),platform={...utils$1,...platform$1};function toURLEncodedForm(o,e){return toFormData(o,new platform.classes.URLSearchParams,Object.assign({visitor:function(n,a,s,l){return platform.isNode&&utils$2.isBuffer(n)?(this.append(a,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(o){return utils$2.matchAll(/\w+|\[(\w*)]/g,o).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(o){const e={},n=Object.keys(o);let a;const s=n.length;let l;for(a=0;a<s;a++)l=n[a],e[l]=o[l];return e}function formDataToJSON(o){function e(n,a,s,l){let c=n[l++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),u=l>=n.length;return c=!c&&utils$2.isArray(s)?s.length:c,u?(utils$2.hasOwnProp(s,c)?s[c]=[s[c],a]:s[c]=a,!d):((!s[c]||!utils$2.isObject(s[c]))&&(s[c]=[]),e(n,a,s[c],l)&&utils$2.isArray(s[c])&&(s[c]=arrayToObject(s[c])),!d)}if(utils$2.isFormData(o)&&utils$2.isFunction(o.entries)){const n={};return utils$2.forEachEntry(o,(a,s)=>{e(parsePropPath(a),s,n,0)}),n}return null}function stringifySafely(o,e,n){if(utils$2.isString(o))try{return(e||JSON.parse)(o),utils$2.trim(o)}catch(a){if(a.name!=="SyntaxError")throw a}return(0,JSON.stringify)(o)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function o(e,n){const a=n.getContentType()||"",s=a.indexOf("application/json")>-1,l=utils$2.isObject(e);if(l&&utils$2.isHTMLForm(e)&&(e=new FormData(e)),utils$2.isFormData(e))return s?JSON.stringify(formDataToJSON(e)):e;if(utils$2.isArrayBuffer(e)||utils$2.isBuffer(e)||utils$2.isStream(e)||utils$2.isFile(e)||utils$2.isBlob(e)||utils$2.isReadableStream(e))return e;if(utils$2.isArrayBufferView(e))return e.buffer;if(utils$2.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((d=utils$2.isFileList(e))||a.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return toFormData(d?{"files[]":e}:e,u&&new u,this.formSerializer)}}return l||s?(n.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function o(e){const n=this.transitional||defaults.transitional,a=n&&n.forcedJSONParsing,s=this.responseType==="json";if(utils$2.isResponse(e)||utils$2.isReadableStream(e))return e;if(e&&utils$2.isString(e)&&(a&&!this.responseType||s)){const c=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(d){if(c)throw d.name==="SyntaxError"?AxiosError.from(d,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function o(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$2.forEach(["delete","get","head","post","put","patch"],o=>{defaults.headers[o]={}});const ignoreDuplicateOf=utils$2.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var parseHeaders=o=>{const e={};let n,a,s;return o&&o.split(`
`).forEach(function(c){s=c.indexOf(":"),n=c.substring(0,s).trim().toLowerCase(),a=c.substring(s+1).trim(),!(!n||e[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?e[n]?e[n].push(a):e[n]=[a]:e[n]=e[n]?e[n]+", "+a:a)}),e};const $internals=Symbol("internals");function normalizeHeader(o){return o&&String(o).trim().toLowerCase()}function normalizeValue(o){return o===!1||o==null?o:utils$2.isArray(o)?o.map(normalizeValue):String(o)}function parseTokens(o){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(o);)e[a[1]]=a[2];return e}const isValidHeaderName=o=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(o.trim());function matchHeaderValue(o,e,n,a,s){if(utils$2.isFunction(a))return a.call(this,e,n);if(s&&(e=n),!!utils$2.isString(e)){if(utils$2.isString(a))return e.indexOf(a)!==-1;if(utils$2.isRegExp(a))return a.test(e)}}function formatHeader(o){return o.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,a)=>n.toUpperCase()+a)}function buildAccessors(o,e){const n=utils$2.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(o,a+n,{value:function(s,l,c){return this[a].call(this,e,s,l,c)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,n,a){const s=this;function l(d,u,f){const p=normalizeHeader(u);if(!p)throw new Error("header name must be a non-empty string");const _=utils$2.findKey(s,p);(!_||s[_]===void 0||f===!0||f===void 0&&s[_]!==!1)&&(s[_||u]=normalizeValue(d))}const c=(d,u)=>utils$2.forEach(d,(f,p)=>l(f,p,u));if(utils$2.isPlainObject(e)||e instanceof this.constructor)c(e,n);else if(utils$2.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))c(parseHeaders(e),n);else if(utils$2.isHeaders(e))for(const[d,u]of e.entries())l(u,d,a);else e!=null&&l(n,e,a);return this}get(e,n){if(e=normalizeHeader(e),e){const a=utils$2.findKey(this,e);if(a){const s=this[a];if(!n)return s;if(n===!0)return parseTokens(s);if(utils$2.isFunction(n))return n.call(this,s,a);if(utils$2.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=normalizeHeader(e),e){const a=utils$2.findKey(this,e);return!!(a&&this[a]!==void 0&&(!n||matchHeaderValue(this,this[a],a,n)))}return!1}delete(e,n){const a=this;let s=!1;function l(c){if(c=normalizeHeader(c),c){const d=utils$2.findKey(a,c);d&&(!n||matchHeaderValue(a,a[d],d,n))&&(delete a[d],s=!0)}}return utils$2.isArray(e)?e.forEach(l):l(e),s}clear(e){const n=Object.keys(this);let a=n.length,s=!1;for(;a--;){const l=n[a];(!e||matchHeaderValue(this,this[l],l,e,!0))&&(delete this[l],s=!0)}return s}normalize(e){const n=this,a={};return utils$2.forEach(this,(s,l)=>{const c=utils$2.findKey(a,l);if(c){n[c]=normalizeValue(s),delete n[l];return}const d=e?formatHeader(l):String(l).trim();d!==l&&delete n[l],n[d]=normalizeValue(s),a[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return utils$2.forEach(this,(a,s)=>{a!=null&&a!==!1&&(n[s]=e&&utils$2.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const a=new this(e);return n.forEach(s=>a.set(s)),a}static accessor(e){const a=(this[$internals]=this[$internals]={accessors:{}}).accessors,s=this.prototype;function l(c){const d=normalizeHeader(c);a[d]||(buildAccessors(s,c),a[d]=!0)}return utils$2.isArray(e)?e.forEach(l):l(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$2.reduceDescriptors(AxiosHeaders.prototype,({value:o},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>o,set(a){this[n]=a}}});utils$2.freezeMethods(AxiosHeaders);function transformData(o,e){const n=this||defaults,a=e||n,s=AxiosHeaders.from(a.headers);let l=a.data;return utils$2.forEach(o,function(d){l=d.call(n,l,s.normalize(),e?e.status:void 0)}),s.normalize(),l}function isCancel(o){return!!(o&&o.__CANCEL__)}function CanceledError(o,e,n){AxiosError.call(this,o??"canceled",AxiosError.ERR_CANCELED,e,n),this.name="CanceledError"}utils$2.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(o,e,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?o(n):e(new AxiosError("Request failed with status code "+n.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(o){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(o);return e&&e[1]||""}function speedometer(o,e){o=o||10;const n=new Array(o),a=new Array(o);let s=0,l=0,c;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),p=a[l];c||(c=f),n[s]=u,a[s]=f;let _=l,b=0;for(;_!==s;)b+=n[_++],_=_%o;if(s=(s+1)%o,s===l&&(l=(l+1)%o),f-c<e)return;const v=p&&f-p;return v?Math.round(b*1e3/v):void 0}}function throttle(o,e){let n=0,a=1e3/e,s,l;const c=(f,p=Date.now())=>{n=p,s=null,l&&(clearTimeout(l),l=null),o.apply(null,f)};return[(...f)=>{const p=Date.now(),_=p-n;_>=a?c(f,p):(s=f,l||(l=setTimeout(()=>{l=null,c(s)},a-_)))},()=>s&&c(s)]}const progressEventReducer=(o,e,n=3)=>{let a=0;const s=speedometer(50,250);return throttle(l=>{const c=l.loaded,d=l.lengthComputable?l.total:void 0,u=c-a,f=s(u),p=c<=d;a=c;const _={loaded:c,total:d,progress:d?c/d:void 0,bytes:u,rate:f||void 0,estimated:f&&d&&p?(d-c)/f:void 0,event:l,lengthComputable:d!=null,[e?"download":"upload"]:!0};o(_)},n)},progressEventDecorator=(o,e)=>{const n=o!=null;return[a=>e[0]({lengthComputable:n,total:o,loaded:a}),e[1]]},asyncDecorator=o=>(...e)=>utils$2.asap(()=>o(...e));var isURLSameOrigin=platform.hasStandardBrowserEnv?((o,e)=>n=>(n=new URL(n,platform.origin),o.protocol===n.protocol&&o.host===n.host&&(e||o.port===n.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(o,e,n,a,s,l){const c=[o+"="+encodeURIComponent(e)];utils$2.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),utils$2.isString(a)&&c.push("path="+a),utils$2.isString(s)&&c.push("domain="+s),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(o){const e=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(o){this.write(o,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(o){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(o)}function combineURLs(o,e){return e?o.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):o}function buildFullPath(o,e){return o&&!isAbsoluteURL(e)?combineURLs(o,e):e}const headersToObject=o=>o instanceof AxiosHeaders?{...o}:o;function mergeConfig(o,e){e=e||{};const n={};function a(f,p,_,b){return utils$2.isPlainObject(f)&&utils$2.isPlainObject(p)?utils$2.merge.call({caseless:b},f,p):utils$2.isPlainObject(p)?utils$2.merge({},p):utils$2.isArray(p)?p.slice():p}function s(f,p,_,b){if(utils$2.isUndefined(p)){if(!utils$2.isUndefined(f))return a(void 0,f,_,b)}else return a(f,p,_,b)}function l(f,p){if(!utils$2.isUndefined(p))return a(void 0,p)}function c(f,p){if(utils$2.isUndefined(p)){if(!utils$2.isUndefined(f))return a(void 0,f)}else return a(void 0,p)}function d(f,p,_){if(_ in e)return a(f,p);if(_ in o)return a(void 0,f)}const u={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(f,p,_)=>s(headersToObject(f),headersToObject(p),_,!0)};return utils$2.forEach(Object.keys(Object.assign({},o,e)),function(p){const _=u[p]||s,b=_(o[p],e[p],p);utils$2.isUndefined(b)&&_!==d||(n[p]=b)}),n}var resolveConfig=o=>{const e=mergeConfig({},o);let{data:n,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:l,headers:c,auth:d}=e;e.headers=c=AxiosHeaders.from(c),e.url=buildURL(buildFullPath(e.baseURL,e.url),o.params,o.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let u;if(utils$2.isFormData(n)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((u=c.getContentType())!==!1){const[f,...p]=u?u.split(";").map(_=>_.trim()).filter(Boolean):[];c.setContentType([f||"multipart/form-data",...p].join("; "))}}if(platform.hasStandardBrowserEnv&&(a&&utils$2.isFunction(a)&&(a=a(e)),a||a!==!1&&isURLSameOrigin(e.url))){const f=s&&l&&cookies.read(l);f&&c.set(s,f)}return e};const isXHRAdapterSupported=typeof XMLHttpRequest<"u";var xhrAdapter=isXHRAdapterSupported&&function(o){return new Promise(function(n,a){const s=resolveConfig(o);let l=s.data;const c=AxiosHeaders.from(s.headers).normalize();let{responseType:d,onUploadProgress:u,onDownloadProgress:f}=s,p,_,b,v,k;function x(){v&&v(),k&&k(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let M=new XMLHttpRequest;M.open(s.method.toUpperCase(),s.url,!0),M.timeout=s.timeout;function E(){if(!M)return;const V=AxiosHeaders.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),F={data:!d||d==="text"||d==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:V,config:o,request:M};settle(function(I){n(I),x()},function(I){a(I),x()},F),M=null}"onloadend"in M?M.onloadend=E:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(E)},M.onabort=function(){M&&(a(new AxiosError("Request aborted",AxiosError.ECONNABORTED,o,M)),M=null)},M.onerror=function(){a(new AxiosError("Network Error",AxiosError.ERR_NETWORK,o,M)),M=null},M.ontimeout=function(){let B=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const F=s.transitional||transitionalDefaults;s.timeoutErrorMessage&&(B=s.timeoutErrorMessage),a(new AxiosError(B,F.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,o,M)),M=null},l===void 0&&c.setContentType(null),"setRequestHeader"in M&&utils$2.forEach(c.toJSON(),function(B,F){M.setRequestHeader(F,B)}),utils$2.isUndefined(s.withCredentials)||(M.withCredentials=!!s.withCredentials),d&&d!=="json"&&(M.responseType=s.responseType),f&&([b,k]=progressEventReducer(f,!0),M.addEventListener("progress",b)),u&&M.upload&&([_,v]=progressEventReducer(u),M.upload.addEventListener("progress",_),M.upload.addEventListener("loadend",v)),(s.cancelToken||s.signal)&&(p=V=>{M&&(a(!V||V.type?new CanceledError(null,o,M):V),M.abort(),M=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const L=parseProtocol(s.url);if(L&&platform.protocols.indexOf(L)===-1){a(new AxiosError("Unsupported protocol "+L+":",AxiosError.ERR_BAD_REQUEST,o));return}M.send(l||null)})};const composeSignals=(o,e)=>{const{length:n}=o=o?o.filter(Boolean):[];if(e||n){let a=new AbortController,s;const l=function(f){if(!s){s=!0,d();const p=f instanceof Error?f:this.reason;a.abort(p instanceof AxiosError?p:new CanceledError(p instanceof Error?p.message:p))}};let c=e&&setTimeout(()=>{c=null,l(new AxiosError(`timeout ${e} of ms exceeded`,AxiosError.ETIMEDOUT))},e);const d=()=>{o&&(c&&clearTimeout(c),c=null,o.forEach(f=>{f.unsubscribe?f.unsubscribe(l):f.removeEventListener("abort",l)}),o=null)};o.forEach(f=>f.addEventListener("abort",l));const{signal:u}=a;return u.unsubscribe=()=>utils$2.asap(d),u}},streamChunk=function*(o,e){let n=o.byteLength;if(n<e){yield o;return}let a=0,s;for(;a<n;)s=a+e,yield o.slice(a,s),a=s},readBytes=async function*(o,e){for await(const n of readStream(o))yield*streamChunk(n,e)},readStream=async function*(o){if(o[Symbol.asyncIterator]){yield*o;return}const e=o.getReader();try{for(;;){const{done:n,value:a}=await e.read();if(n)break;yield a}}finally{await e.cancel()}},trackStream=(o,e,n,a)=>{const s=readBytes(o,e);let l=0,c,d=u=>{c||(c=!0,a&&a(u))};return new ReadableStream({async pull(u){try{const{done:f,value:p}=await s.next();if(f){d(),u.close();return}let _=p.byteLength;if(n){let b=l+=_;n(b)}u.enqueue(new Uint8Array(p))}catch(f){throw d(f),f}},cancel(u){return d(u),s.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(o=>e=>o.encode(e))(new TextEncoder):async o=>new Uint8Array(await new Response(o).arrayBuffer())),test=(o,...e)=>{try{return!!o(...e)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let o=!1;const e=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return o=!0,"half"}}).headers.has("Content-Type");return o&&!e}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$2.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(o=>o.body)};isFetchSupported&&(o=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!resolvers[e]&&(resolvers[e]=utils$2.isFunction(o[e])?n=>n[e]():(n,a)=>{throw new AxiosError(`Response type '${e}' is not supported`,AxiosError.ERR_NOT_SUPPORT,a)})})})(new Response);const getBodyLength=async o=>{if(o==null)return 0;if(utils$2.isBlob(o))return o.size;if(utils$2.isSpecCompliantForm(o))return(await new Request(platform.origin,{method:"POST",body:o}).arrayBuffer()).byteLength;if(utils$2.isArrayBufferView(o)||utils$2.isArrayBuffer(o))return o.byteLength;if(utils$2.isURLSearchParams(o)&&(o=o+""),utils$2.isString(o))return(await encodeText(o)).byteLength},resolveBodyLength=async(o,e)=>{const n=utils$2.toFiniteNumber(o.getContentLength());return n??getBodyLength(e)};var fetchAdapter=isFetchSupported&&(async o=>{let{url:e,method:n,data:a,signal:s,cancelToken:l,timeout:c,onDownloadProgress:d,onUploadProgress:u,responseType:f,headers:p,withCredentials:_="same-origin",fetchOptions:b}=resolveConfig(o);f=f?(f+"").toLowerCase():"text";let v=composeSignals([s,l&&l.toAbortSignal()],c),k;const x=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let M;try{if(u&&supportsRequestStream&&n!=="get"&&n!=="head"&&(M=await resolveBodyLength(p,a))!==0){let F=new Request(e,{method:"POST",body:a,duplex:"half"}),j;if(utils$2.isFormData(a)&&(j=F.headers.get("content-type"))&&p.setContentType(j),F.body){const[I,U]=progressEventDecorator(M,progressEventReducer(asyncDecorator(u)));a=trackStream(F.body,DEFAULT_CHUNK_SIZE,I,U)}}utils$2.isString(_)||(_=_?"include":"omit");const E="credentials"in Request.prototype;k=new Request(e,{...b,signal:v,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:a,duplex:"half",credentials:E?_:void 0});let L=await fetch(k);const V=supportsResponseStream&&(f==="stream"||f==="response");if(supportsResponseStream&&(d||V&&x)){const F={};["status","statusText","headers"].forEach(W=>{F[W]=L[W]});const j=utils$2.toFiniteNumber(L.headers.get("content-length")),[I,U]=d&&progressEventDecorator(j,progressEventReducer(asyncDecorator(d),!0))||[];L=new Response(trackStream(L.body,DEFAULT_CHUNK_SIZE,I,()=>{U&&U(),x&&x()}),F)}f=f||"text";let B=await resolvers[utils$2.findKey(resolvers,f)||"text"](L,o);return!V&&x&&x(),await new Promise((F,j)=>{settle(F,j,{data:B,headers:AxiosHeaders.from(L.headers),status:L.status,statusText:L.statusText,config:o,request:k})})}catch(E){throw x&&x(),E&&E.name==="TypeError"&&/fetch/i.test(E.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,o,k),{cause:E.cause||E}):AxiosError.from(E,E&&E.code,o,k)}});const knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$2.forEach(knownAdapters,(o,e)=>{if(o){try{Object.defineProperty(o,"name",{value:e})}catch{}Object.defineProperty(o,"adapterName",{value:e})}});const renderReason=o=>`- ${o}`,isResolvedHandle=o=>utils$2.isFunction(o)||o===null||o===!1;var adapters={getAdapter:o=>{o=utils$2.isArray(o)?o:[o];const{length:e}=o;let n,a;const s={};for(let l=0;l<e;l++){n=o[l];let c;if(a=n,!isResolvedHandle(n)&&(a=knownAdapters[(c=String(n)).toLowerCase()],a===void 0))throw new AxiosError(`Unknown adapter '${c}'`);if(a)break;s[c||"#"+l]=a}if(!a){const l=Object.entries(s).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(renderReason).join(`
`):" "+renderReason(l[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return a},adapters:knownAdapters};function throwIfCancellationRequested(o){if(o.cancelToken&&o.cancelToken.throwIfRequested(),o.signal&&o.signal.aborted)throw new CanceledError(null,o)}function dispatchRequest(o){return throwIfCancellationRequested(o),o.headers=AxiosHeaders.from(o.headers),o.data=transformData.call(o,o.transformRequest),["post","put","patch"].indexOf(o.method)!==-1&&o.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(o.adapter||defaults.adapter)(o).then(function(a){return throwIfCancellationRequested(o),a.data=transformData.call(o,o.transformResponse,a),a.headers=AxiosHeaders.from(a.headers),a},function(a){return isCancel(a)||(throwIfCancellationRequested(o),a&&a.response&&(a.response.data=transformData.call(o,o.transformResponse,a.response),a.response.headers=AxiosHeaders.from(a.response.headers))),Promise.reject(a)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((o,e)=>{validators$1[o]=function(a){return typeof a===o||"a"+(e<1?"n ":" ")+o}});const deprecatedWarnings={};validators$1.transitional=function o(e,n,a){function s(l,c){return"[Axios v"+VERSION+"] Transitional option '"+l+"'"+c+(a?". "+a:"")}return(l,c,d)=>{if(e===!1)throw new AxiosError(s(c," has been removed"+(n?" in "+n:"")),AxiosError.ERR_DEPRECATED);return n&&!deprecatedWarnings[c]&&(deprecatedWarnings[c]=!0,console.warn(s(c," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(l,c,d):!0}};validators$1.spelling=function o(e){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${e}`),!0)};function assertOptions(o,e,n){if(typeof o!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const a=Object.keys(o);let s=a.length;for(;s-- >0;){const l=a[s],c=e[l];if(c){const d=o[l],u=d===void 0||c(d,l,o);if(u!==!0)throw new AxiosError("option "+l+" must be "+u,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError("Unknown option "+l,AxiosError.ERR_BAD_OPTION)}}var validator={assertOptions,validators:validators$1};const validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,n){try{return await this._request(e,n)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=mergeConfig(this.defaults,n);const{transitional:a,paramsSerializer:s,headers:l}=n;a!==void 0&&validator.assertOptions(a,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),s!=null&&(utils$2.isFunction(s)?n.paramsSerializer={serialize:s}:validator.assertOptions(s,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(n,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=l&&utils$2.merge(l.common,l[n.method]);l&&utils$2.forEach(["delete","get","head","post","put","patch","common"],k=>{delete l[k]}),n.headers=AxiosHeaders.concat(c,l);const d=[];let u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(u=u&&x.synchronous,d.unshift(x.fulfilled,x.rejected))});const f=[];this.interceptors.response.forEach(function(x){f.push(x.fulfilled,x.rejected)});let p,_=0,b;if(!u){const k=[dispatchRequest.bind(this),void 0];for(k.unshift.apply(k,d),k.push.apply(k,f),b=k.length,p=Promise.resolve(n);_<b;)p=p.then(k[_++],k[_++]);return p}b=d.length;let v=n;for(_=0;_<b;){const k=d[_++],x=d[_++];try{v=k(v)}catch(M){x.call(this,M);break}}try{p=dispatchRequest.call(this,v)}catch(k){return Promise.reject(k)}for(_=0,b=f.length;_<b;)p=p.then(f[_++],f[_++]);return p}getUri(e){e=mergeConfig(this.defaults,e);const n=buildFullPath(e.baseURL,e.url);return buildURL(n,e.params,e.paramsSerializer)}}utils$2.forEach(["delete","get","head","options"],function o(e){Axios.prototype[e]=function(n,a){return this.request(mergeConfig(a||{},{method:e,url:n,data:(a||{}).data}))}});utils$2.forEach(["post","put","patch"],function o(e){function n(a){return function(l,c,d){return this.request(mergeConfig(d||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}Axios.prototype[e]=n(),Axios.prototype[e+"Form"]=n(!0)});class CancelToken{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const a=this;this.promise.then(s=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](s);a._listeners=null}),this.promise.then=s=>{let l;const c=new Promise(d=>{a.subscribe(d),l=d}).then(s);return c.cancel=function(){a.unsubscribe(l)},c},e(function(l,c,d){a.reason||(a.reason=new CanceledError(l,c,d),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=a=>{e.abort(a)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new CancelToken(function(s){e=s}),cancel:e}}}function spread(o){return function(n){return o.apply(null,n)}}function isAxiosError(o){return utils$2.isObject(o)&&o.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([o,e])=>{HttpStatusCode[e]=o});function createInstance(o){const e=new Axios(o),n=bind(Axios.prototype.request,e);return utils$2.extend(n,Axios.prototype,e,{allOwnKeys:!0}),utils$2.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return createInstance(mergeConfig(o,s))},n}const axios=createInstance(defaults);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function o(e){return Promise.all(e)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=o=>formDataToJSON(utils$2.isHTMLForm(o)?new FormData(o):o);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;const DirentsSchema=z$1.record(z$1.string(),z$1.discriminatedUnion("isDirectory",[z$1.object({isDirectory:z$1.literal(!0),name:z$1.string(),subDirents:z$1.lazy(()=>DirentsSchema)}),z$1.object({isDirectory:z$1.literal(!1),name:z$1.string()})])),FsLsSchema={request:z$1.object({basePath:z$1.string(),includeHidden:z$1.boolean().optional(),recursive:z$1.boolean().optional(),maxDepth:z$1.number().optional()}),result:DirentsSchema};z$1.object({path:z$1.string()}),z$1.object({ctime:z$1.coerce.date(),mtime:z$1.coerce.date(),size:z$1.number()});const FsUploadSchema={request:z$1.object({overwrite:z$1.boolean().optional(),mkdir:z$1.boolean().optional()}),result:z$1.undefined()},FsEnsureAttachmentsDirSchema={request:z$1.object({}),result:z$1.any()},FsGetAttachmentSignedUrlSchema={request:z$1.object({path:z$1.string(),attachment:z$1.boolean().optional(),inferMimeType:z$1.boolean().optional()}),result:z$1.object({signedUrl:z$1.string()})},ClearScannedImageSchema={request:z$1.object({path:z$1.string()}),result:z$1.object({path:z$1.string()})},fsLs=usePostApi("/fs/ls",FsLsSchema.request,FsLsSchema.result),fsUpload=async(o,e)=>{const n="/fs/upload";try{let a;try{a=globalThis.getAxios()}catch(u){return console.error(`[NO_AXIOS] ${u}`),{success:!1,code:RESP_CODES.NO_AXIOS}}const s=new FormData;o.forEach(u=>{s.append("targetPath",u[0]),s.append("file",u[1])});const l=await a.post(n,s,{headers:{"Content-Type":"multipart/form-data"},params:e});if(!l)return console.error(`[EMPTY_RESPONSE] endpoint=${n}`),{success:!1,code:RESP_CODES.UNKNOWN_ERROR};const d=RespSchema(FsUploadSchema.result).safeParse(l.data);return d.success?{success:!0,code:RESP_CODES.SUCCESS}:(console.error(`[INVALID_RESPONSE] endpoint=${n}}, response=${JSON.stringify(l.data)}, validationErrors=${JSON.stringify(d.error.errors)}`),{success:!1,code:RESP_CODES.INVALID_RESPONSE})}catch(a){return console.error(`[UNKNOWN_ERROR] endpoint=${n}}, error=${a}`),{success:!1,code:RESP_CODES.UNKNOWN_ERROR}}},fsEnsureAttachmentsDir=usePostApi("/fs/ensure-attachments-dir",FsEnsureAttachmentsDirSchema.request,FsEnsureAttachmentsDirSchema.result),fsGetAttachmentSignedUrl=usePostApi("/fs/get-attachment-signed-url",FsGetAttachmentSignedUrlSchema.request,FsGetAttachmentSignedUrlSchema.result),fsClearScannedImage=usePostApi("/fs/clear-scanned-image",ClearScannedImageSchema.request,ClearScannedImageSchema.result),autoRetryGet=(o,e,n,a=!0)=>{let s=!1,l=0,c=0,d=null,u=null;const f=new Promise((_,b)=>{u=b;const v=()=>{if(s){b(new Error("Operation cancelled"));return}if(o(k=>{s||(_(k),p())}),l++,l>=n&&a){b(new Error("Max retry attempts reached"));return}l<n?(e.mode==="fixed"?c=e.value:c=Math.min(e.base*2**(l-1),e.max),d=setTimeout(v,c)):a||(e.mode==="fixed"?c=e.value:c=Math.min(e.base*2**(l-1),e.max),d=setTimeout(v,c))};v()}),p=()=>{s=!0,d&&clearTimeout(d),u&&u(new Error("Operation cancelled"))};return[f,p]},ImagesContext=createContext(()=>{const{serverUrl:o}=ServerInfoContext.useContext(),e=reactive({});ServerInfoContext.useContext(),PathsContext.useContext();const n=(c,d=!1)=>{const u=e[c]?.status,f=e[c]&&"url"in e[c]?e[c].url:void 0;u!=="fetching"&&(u!==void 0&&!d||(async()=>{e[c]={status:"fetching",url:f};const[p,_]=autoRetryGet(b=>{fsGetAttachmentSignedUrl({path:c,inferMimeType:!0,attachment:!1}).then(v=>v.success&&b(v.data.signedUrl))},{mode:"backoff",base:500,max:5e3},5,!0);p.then(b=>{console.debug("图片获取成功",c),e[c]={status:"synced",url:`http://${o.value}${b}`}}).catch(b=>{console.debug("图片获取失败",c,b.message),e[c]={status:"fetchError",url:f}})})())};function a(c,d){return computed(typeof c=="string"?()=>(n(c,d),e[c]):()=>{const u=c();return u?(n(u,d),e[u]):null})}return{images:e,useImage:a,uploadImage:(c,d)=>{const u=d??c.name,f=URL.createObjectURL(c);return e[u]={status:"uploading",url:f},queueMicrotask(async()=>{(await fsUpload([[u,c]])).success?(console.log("图片上传成功",u),n(u,!0)):e[u]={status:"uploadError",url:f}}),computed(()=>e[u])}}});var _sfc_main$1Y=defineComponent({__name:"ProseMirror",props:mergeModels({disableSpellcheckWhenBlur:{type:Boolean,default:!0},nodeViews:{},schema:{},pluginsBuilder:{},onDocChanged:{},highlightTerms:{},highlightRefs:{},blockTree:{},itemId:{},readonly:{type:Boolean,default:!1}},{doc:{},docModifiers:{}}),emits:["update:doc"],setup(o,{expose:e}){const n=o,a=useModel(o,"doc"),s=ref(null),l=ref(!1);let c=null;const d=HistoryContext.useContext(),u=BlockTreeContext.useContext(),f=BlocksContext.useContext(),p=RefSuggestionsContext.useContext(),_=LastFocusContext.useContext(),b=PathsContext.useContext(),v=ImagesContext.useContext(),k=KeymapContext.useContext(),x={getSchema:()=>n.schema,getItemId:()=>n.itemId??null,getBlockTree:()=>n.blockTree??null,getReadonly:()=>n.readonly,getEditorView:()=>c,getHighlightTerms:()=>n.highlightTerms??[],getHighlightRefs:()=>n.highlightRefs??[],lastFocusContext:_,historyContext:d,blockTreeContext:u,blocksContext:f,refSuggestionsContext:p,imagesContext:v,pathsContext:b,keymapContext:k};e({getEditorView:()=>c,isCorrupted:()=>l.value,getWrapperDom:()=>s.value});const M=()=>{const E=n.pluginsBuilder?.(x)??[];return n.readonly?[mkHighlightMatchesPlugin(x),mkHighlightRefsPlugin(x),...E]:[mkEventBusPlugin(),mkListenDocChangedPlugin(),mkHighlightMatchesPlugin(x),mkHighlightRefsPlugin(x),...E]};return watch(a,()=>{if(!c||c?.isDestroyed)return;const E=JSON.stringify(a.value),L=JSON.stringify(c.state.doc);if(E==L)return;let V;try{V=Node$1.fromJSON(n.schema,a.value)}catch{l.value=!0;return}const B=c.state.selection.toJSON();let F;try{F=Selection.fromJSON(V,B)}catch{}const j=EditorState$1.create({doc:V,plugins:c.state.plugins,selection:F});c.updateState(j)}),watch([()=>n.highlightTerms,()=>n.highlightRefs],()=>{if(c){const E=c.state.tr.setMeta("empty",{});c.dispatch(E)}}),onMounted(()=>{if(!s.value)return;let E;try{E=Node$1.fromJSON(n.schema,a.value)}catch{l.value=!0;return}const L=EditorState$1.create({doc:E,plugins:M()});if(c&&c.destroy(),c=new EditorView$1(s.value,{state:L,editable:()=>!n.readonly,nodeViews:n.nodeViews??{}}),c.on){const V=({newDoc:B})=>a.value=B;c.on("docChanged",n.onDocChanged??V)}n.disableSpellcheckWhenBlur&&(s.value.addEventListener("focusin",()=>{s.value&&(s.value.spellcheck=!0)}),s.value.addEventListener("focusout",()=>{s.value&&(s.value.spellcheck=!1)}))}),onUnmounted(()=>{setTimeout(()=>{c&&!c.isDestroyed&&c.destroy(),c=null},1e3)}),(E,L)=>(openBlock(),createElementBlock("div",{class:"prosemirror-wrapper",ref_key:"$wrapper",ref:s},null,512))}});class InputRule{constructor(e,n,a={}){this.match=e,this.match=e,this.handler=typeof n=="string"?stringHandler(n):n,this.undoable=a.undoable!==!1,this.inCode=a.inCode||!1}}function stringHandler(o){return function(e,n,a,s){let l=o;if(n[1]){let c=n[0].lastIndexOf(n[1]);l+=n[0].slice(c+n[1].length),a+=c;let d=a-s;d>0&&(l=n[0].slice(c-d,c)+l,a=s)}return e.tr.insertText(l,a,s)}}const MAX_MATCH=500;function inputRules({rules:o}){let e=new Plugin({state:{init(){return null},apply(n,a){let s=n.getMeta(this);return s||(n.selectionSet||n.docChanged?null:a)}},props:{handleTextInput(n,a,s,l){return run(n,a,s,l,o,e)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:a}=n.state.selection;a&&run(n,a.pos,a.pos,"",o,e)})}}},isInputRules:!0});return e}function run(o,e,n,a,s,l){if(o.composing)return!1;let c=o.state,d=c.doc.resolve(e),u=d.parent.textBetween(Math.max(0,d.parentOffset-MAX_MATCH),d.parentOffset,null,"￼")+a;for(let f=0;f<s.length;f++){let p=s[f];if(d.parent.type.spec.code){if(!p.inCode)continue}else if(p.inCode==="only")continue;let _=p.match.exec(u),b=_&&p.handler(c,_,e-(_[0].length-a.length),n);if(b)return p.undoable&&b.setMeta(l,{transform:b,from:e,to:n,text:a}),o.dispatch(b),!0}return!1}new InputRule(/--$/,"—");new InputRule(/\.\.\.$/,"…");new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“");new InputRule(/"$/,"”");new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘");new InputRule(/'$/,"’");const openRefSuggestions=o=>new InputRule(/([#@])$/,(e,n)=>{const a=o.getEditorView();if(!a)return null;const s=a.state.selection.from,l=a.coordsAtPos(s);if(!l)return null;const c={x:l.left,y:l.top},d=f=>{if(f){const p=n[1]=="#",_=o.getSchema().nodes.blockRef_v2.create({toBlockId:f,tag:p}),b=a.state.selection.anchor,v=a.state.tr.replaceRangeWith(b-n[1].length,b,_);a.dispatch(v)}setTimeout(()=>a.focus(),50)},{openRefSuggestions:u}=o.refSuggestionsContext??{};return u?.(c,d),null}),turnToCodeBlock=o=>new InputRule(/^```([a-z]+) $/,(e,n)=>{const a=e.tr.setMeta("",""),s=o.getItemId(),l=o.getBlockTree();if(!s||!l)return a;const c=l.getDi(s);if(!c||!DI_FILTERS.isBlockDi(c))return a;const{blockEditor:d}=o.blocksContext??{};if(!d)return a;const u=useTaskQueue();return setTimeout(()=>{u.addTask(async()=>{d.changeBlockContent({blockId:c.block.id,content:[BLOCK_CONTENT_TYPES.CODE,"",n[1]]}),await l.nextUpdate(),l.focusDi(s)})}),a});class SourceLocation{constructor(e,n,a){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=n,this.end=a}static range(e,n){return n?!e||!e.loc||!n.loc||e.loc.lexer!==n.loc.lexer?null:new SourceLocation(e.loc.lexer,e.loc.start,n.loc.end):e&&e.loc}}class Token{constructor(e,n){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=n}range(e,n){return new Token(n,SourceLocation.range(this,e))}}class ParseError{constructor(e,n){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var a="KaTeX parse error: "+e,s,l,c=n&&n.loc;if(c&&c.start<=c.end){var d=c.lexer.input;s=c.start,l=c.end,s===d.length?a+=" at end of input: ":a+=" at position "+(s+1)+": ";var u=d.slice(s,l).replace(/[^]/g,"$&̲"),f;s>15?f="…"+d.slice(s-15,s):f=d.slice(0,s);var p;l+15<d.length?p=d.slice(l,l+15)+"…":p=d.slice(l),a+=f+u+p}var _=new Error(a);return _.name="ParseError",_.__proto__=ParseError.prototype,_.position=s,s!=null&&l!=null&&(_.length=l-s),_.rawMessage=e,_}}ParseError.prototype.__proto__=Error.prototype;var contains=function o(e,n){return e.indexOf(n)!==-1},deflt=function o(e,n){return e===void 0?n:e},uppercase=/([A-Z])/g,hyphenate=function o(e){return e.replace(uppercase,"-$1").toLowerCase()},ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;function escape$1(o){return String(o).replace(ESCAPE_REGEX,e=>ESCAPE_LOOKUP[e])}var getBaseElem=function o(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?o(e.body[0]):e:e.type==="font"?o(e.body):e},isCharacterBox=function o(e){var n=getBaseElem(e);return n.type==="mathord"||n.type==="textord"||n.type==="atom"},assert=function o(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},protocolFromUrl=function o(e){var n=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return n?n[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(n[1])?null:n[1].toLowerCase():"_relative"},utils={contains,deflt,escape:escape$1,hyphenate,getBaseElem,isCharacterBox,protocolFromUrl},SETTINGS_SCHEMA={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:o=>"#"+o},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(o,e)=>(e.push(o),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:o=>Math.max(0,o),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:o=>Math.max(0,o),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:o=>Math.max(0,o),cli:"-e, --max-expand <n>",cliProcessor:o=>o==="Infinity"?1/0:parseInt(o)},globalGroup:{type:"boolean",cli:!1}};function getDefaultValue(o){if(o.default)return o.default;var e=o.type,n=Array.isArray(e)?e[0]:e;if(typeof n!="string")return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class Settings{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var n in SETTINGS_SCHEMA)if(SETTINGS_SCHEMA.hasOwnProperty(n)){var a=SETTINGS_SCHEMA[n];this[n]=e[n]!==void 0?a.processor?a.processor(e[n]):e[n]:getDefaultValue(a)}}reportNonstrict(e,n,a){var s=this.strict;if(typeof s=="function"&&(s=s(e,n,a)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new ParseError("LaTeX-incompatible input and strict mode is set to 'error': "+(n+" ["+e+"]"),a);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+n+" ["+e+"]"))}}useStrictBehavior(e,n,a){var s=this.strict;if(typeof s=="function")try{s=s(e,n,a)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+n+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var n=utils.protocolFromUrl(e.url);if(n==null)return!1;e.protocol=n}var a=typeof this.trust=="function"?this.trust(e):this.trust;return!!a}}class Style{constructor(e,n,a){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=n,this.cramped=a}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}}var D=0,Dc=1,T=2,Tc=3,S=4,Sc=5,SS=6,SSc=7,styles=[new Style(D,0,!1),new Style(Dc,0,!0),new Style(T,1,!1),new Style(Tc,1,!0),new Style(S,2,!1),new Style(Sc,2,!0),new Style(SS,3,!1),new Style(SSc,3,!0)],sup=[S,Sc,S,Sc,SS,SSc,SS,SSc],sub=[Sc,Sc,Sc,Sc,SSc,SSc,SSc,SSc],fracNum=[T,Tc,S,Sc,SS,SSc,SS,SSc],fracDen=[Tc,Tc,Sc,Sc,SSc,SSc,SSc,SSc],cramp=[Dc,Dc,Tc,Tc,Sc,Sc,SSc,SSc],text$1=[D,Dc,T,Tc,T,Tc,T,Tc],Style$1={DISPLAY:styles[D],TEXT:styles[T],SCRIPT:styles[S],SCRIPTSCRIPT:styles[SS]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function scriptFromCodepoint(o){for(var e=0;e<scriptData.length;e++)for(var n=scriptData[e],a=0;a<n.blocks.length;a++){var s=n.blocks[a];if(o>=s[0]&&o<=s[1])return n.name}return null}var allBlocks=[];scriptData.forEach(o=>o.blocks.forEach(e=>allBlocks.push(...e)));function supportedCodepoint(o){for(var e=0;e<allBlocks.length;e+=2)if(o>=allBlocks[e]&&o<=allBlocks[e+1])return!0;return!1}var hLinePad=80,sqrtMain=function o(e,n){return"M95,"+(622+e+n)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},sqrtSize1=function o(e,n){return"M263,"+(601+e+n)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},sqrtSize2=function o(e,n){return"M983 "+(10+e+n)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},sqrtSize3=function o(e,n){return"M424,"+(2398+e+n)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+n+`
h400000v`+(40+e)+"h-400000z"},sqrtSize4=function o(e,n){return"M473,"+(2713+e+n)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+n+"h400000v"+(40+e)+"H1017.7z"},phasePath=function o(e){var n=e/2;return"M400000 "+e+" H0 L"+n+" 0 l65 45 L145 "+(e-80)+" H400000z"},sqrtTall=function o(e,n,a){var s=a-54-n-e;return"M702 "+(e+n)+"H400000"+(40+e)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+n+"H400000v"+(40+e)+"H742z"},sqrtPath=function o(e,n,a){n=1e3*n;var s="";switch(e){case"sqrtMain":s=sqrtMain(n,hLinePad);break;case"sqrtSize1":s=sqrtSize1(n,hLinePad);break;case"sqrtSize2":s=sqrtSize2(n,hLinePad);break;case"sqrtSize3":s=sqrtSize3(n,hLinePad);break;case"sqrtSize4":s=sqrtSize4(n,hLinePad);break;case"sqrtTall":s=sqrtTall(n,hLinePad,a)}return s},innerPath=function o(e,n){switch(e){case"⎜":return"M291 0 H417 V"+n+" H291z M291 0 H417 V"+n+" H291z";case"∣":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z";case"∥":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z"+("M367 0 H410 V"+n+" H367z M367 0 H410 V"+n+" H367z");case"⎟":return"M457 0 H583 V"+n+" H457z M457 0 H583 V"+n+" H457z";case"⎢":return"M319 0 H403 V"+n+" H319z M319 0 H403 V"+n+" H319z";case"⎥":return"M263 0 H347 V"+n+" H263z M263 0 H347 V"+n+" H263z";case"⎪":return"M384 0 H504 V"+n+" H384z M384 0 H504 V"+n+" H384z";case"⏐":return"M312 0 H355 V"+n+" H312z M312 0 H355 V"+n+" H312z";case"‖":return"M257 0 H300 V"+n+" H257z M257 0 H300 V"+n+" H257z"+("M478 0 H521 V"+n+" H478z M478 0 H521 V"+n+" H478z");default:return""}},path={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tallDelim=function o(e,n){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+n+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+n+" v1759 h84z";case"vert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+" v585 h43z";case"doublevert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+` v585 h43z
M367 15 v585 v`+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+n+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+n+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+n+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v602 h84z
M403 1759 V0 H319 V1759 v`+n+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v602 h84z
M347 1759 V0 h-84 V1759 v`+n+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(n+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(n+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(n+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(n+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};let DocumentFragment$1=class{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return utils.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){for(var e="",n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e}toText(){var e=n=>n.toText();return this.children.map(e).join("")}};var fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sigmasAndXis={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},extraCharacterMap={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function setFontMetrics(o,e){fontMetricsData[o]=e}function getCharacterMetrics(o,e,n){if(!fontMetricsData[e])throw new Error("Font metrics not found for font: "+e+".");var a=o.charCodeAt(0),s=fontMetricsData[e][a];if(!s&&o[0]in extraCharacterMap&&(a=extraCharacterMap[o[0]].charCodeAt(0),s=fontMetricsData[e][a]),!s&&n==="text"&&supportedCodepoint(a)&&(s=fontMetricsData[e][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var fontMetricsBySizeIndex={};function getGlobalMetrics(o){var e;if(o>=5?e=0:o>=3?e=1:e=2,!fontMetricsBySizeIndex[e]){var n=fontMetricsBySizeIndex[e]={cssEmPerMu:sigmasAndXis.quad[e]/18};for(var a in sigmasAndXis)sigmasAndXis.hasOwnProperty(a)&&(n[a]=sigmasAndXis[a][e])}return fontMetricsBySizeIndex[e]}var sizeStyleMap=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],sizeMultipliers=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],sizeAtStyle=function o(e,n){return n.size<2?e:sizeStyleMap[e-1][n.size-1]};class Options{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Options.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=sizeMultipliers[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);return new Options(n)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:sizeAtStyle(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:sizeMultipliers[e-1]})}havingBaseStyle(e){e=e||this.style.text();var n=sizeAtStyle(Options.BASESIZE,e);return this.size===n&&this.textSize===Options.BASESIZE&&this.style===e?this:this.extend({style:e,size:n})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Options.BASESIZE?["sizing","reset-size"+this.size,"size"+Options.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=getGlobalMetrics(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Options.BASESIZE=6;var ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=function o(e){return typeof e!="string"&&(e=e.unit),e in ptPerUnit||e in relativeUnit||e==="ex"},calculateSize=function o(e,n){var a;if(e.unit in ptPerUnit)a=ptPerUnit[e.unit]/n.fontMetrics().ptPerEm/n.sizeMultiplier;else if(e.unit==="mu")a=n.fontMetrics().cssEmPerMu;else{var s;if(n.style.isTight()?s=n.havingStyle(n.style.text()):s=n,e.unit==="ex")a=s.fontMetrics().xHeight;else if(e.unit==="em")a=s.fontMetrics().quad;else throw new ParseError("Invalid unit: '"+e.unit+"'");s!==n&&(a*=s.sizeMultiplier/n.sizeMultiplier)}return Math.min(e.number*a,n.maxSize)},makeEm=function o(e){return+e.toFixed(4)+"em"},createClass=function o(e){return e.filter(n=>n).join(" ")},initNode=function o(e,n,a){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=a||{},n){n.style.isTight()&&this.classes.push("mtight");var s=n.getColor();s&&(this.style.color=s)}},toNode=function o(e){var n=document.createElement(e);n.className=createClass(this.classes);for(var a in this.style)this.style.hasOwnProperty(a)&&(n.style[a]=this.style[a]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&n.setAttribute(s,this.attributes[s]);for(var l=0;l<this.children.length;l++)n.appendChild(this.children[l].toNode());return n},toMarkup=function o(e){var n="<"+e;this.classes.length&&(n+=' class="'+utils.escape(createClass(this.classes))+'"');var a="";for(var s in this.style)this.style.hasOwnProperty(s)&&(a+=utils.hyphenate(s)+":"+this.style[s]+";");a&&(n+=' style="'+utils.escape(a)+'"');for(var l in this.attributes)this.attributes.hasOwnProperty(l)&&(n+=" "+l+'="'+utils.escape(this.attributes[l])+'"');n+=">";for(var c=0;c<this.children.length;c++)n+=this.children[c].toMarkup();return n+="</"+e+">",n};class Span{constructor(e,n,a,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,e,a,s),this.children=n||[]}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}}class Anchor{constructor(e,n,a,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,n,s),this.children=a||[],this.setAttribute("href",e)}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}}class Img{constructor(e,n,a){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=n,this.src=e,this.classes=["mord"],this.style=a}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var n in this.style)this.style.hasOwnProperty(n)&&(e.style[n]=this.style[n]);return e}toMarkup(){var e='<img src="'+utils.escape(this.src)+'"'+(' alt="'+utils.escape(this.alt)+'"'),n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=utils.hyphenate(a)+":"+this.style[a]+";");return n&&(e+=' style="'+utils.escape(n)+'"'),e+="'/>",e}}var iCombinations={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class SymbolNode{constructor(e,n,a,s,l,c,d,u){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=n||0,this.depth=a||0,this.italic=s||0,this.skew=l||0,this.width=c||0,this.classes=d||[],this.style=u||{},this.maxFontSize=0;var f=scriptFromCodepoint(this.text.charCodeAt(0));f&&this.classes.push(f+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),n=null;this.italic>0&&(n=document.createElement("span"),n.style.marginRight=makeEm(this.italic)),this.classes.length>0&&(n=n||document.createElement("span"),n.className=createClass(this.classes));for(var a in this.style)this.style.hasOwnProperty(a)&&(n=n||document.createElement("span"),n.style[a]=this.style[a]);return n?(n.appendChild(e),n):e}toMarkup(){var e=!1,n="<span";this.classes.length&&(e=!0,n+=' class="',n+=utils.escape(createClass(this.classes)),n+='"');var a="";this.italic>0&&(a+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(a+=utils.hyphenate(s)+":"+this.style[s]+";");a&&(e=!0,n+=' style="'+utils.escape(a)+'"');var l=utils.escape(this.text);return e?(n+=">",n+=l,n+="</span>",n):l}}class SvgNode{constructor(e,n){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=n||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&n.setAttribute(a,this.attributes[a]);for(var s=0;s<this.children.length;s++)n.appendChild(this.children[s].toNode());return n}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="'+utils.escape(this.attributes[n])+'"');e+=">";for(var a=0;a<this.children.length;a++)e+=this.children[a].toMarkup();return e+="</svg>",e}}class PathNode{constructor(e,n){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=n}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"path");return this.alternate?n.setAttribute("d",this.alternate):n.setAttribute("d",path[this.pathName]),n}toMarkup(){return this.alternate?'<path d="'+utils.escape(this.alternate)+'"/>':'<path d="'+utils.escape(path[this.pathName])+'"/>'}}class LineNode{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"line");for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&n.setAttribute(a,this.attributes[a]);return n}toMarkup(){var e="<line";for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="'+utils.escape(this.attributes[n])+'"');return e+="/>",e}}function assertSymbolDomNode(o){if(o instanceof SymbolNode)return o;throw new Error("Expected symbolNode but got "+String(o)+".")}function assertSpan(o){if(o instanceof Span)return o;throw new Error("Expected span<HtmlDomNode> but got "+String(o)+".")}var ATOMS={bin:1,close:1,inner:1,open:1,punct:1,rel:1},NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}};function defineSymbol(o,e,n,a,s,l){symbols[o][s]={font:e,group:n,replace:a},l&&a&&(symbols[o][a]=symbols[o][s])}var math="math",text="text",main="main",ams="ams",accent="accent-token",bin="bin",close="close",inner="inner",mathord="mathord",op="op-token",open="open",punct="punct",rel="rel",spacing="spacing",textord="textord";defineSymbol(math,main,rel,"≡","\\equiv",!0);defineSymbol(math,main,rel,"≺","\\prec",!0);defineSymbol(math,main,rel,"≻","\\succ",!0);defineSymbol(math,main,rel,"∼","\\sim",!0);defineSymbol(math,main,rel,"⊥","\\perp");defineSymbol(math,main,rel,"⪯","\\preceq",!0);defineSymbol(math,main,rel,"⪰","\\succeq",!0);defineSymbol(math,main,rel,"≃","\\simeq",!0);defineSymbol(math,main,rel,"∣","\\mid",!0);defineSymbol(math,main,rel,"≪","\\ll",!0);defineSymbol(math,main,rel,"≫","\\gg",!0);defineSymbol(math,main,rel,"≍","\\asymp",!0);defineSymbol(math,main,rel,"∥","\\parallel");defineSymbol(math,main,rel,"⋈","\\bowtie",!0);defineSymbol(math,main,rel,"⌣","\\smile",!0);defineSymbol(math,main,rel,"⊑","\\sqsubseteq",!0);defineSymbol(math,main,rel,"⊒","\\sqsupseteq",!0);defineSymbol(math,main,rel,"≐","\\doteq",!0);defineSymbol(math,main,rel,"⌢","\\frown",!0);defineSymbol(math,main,rel,"∋","\\ni",!0);defineSymbol(math,main,rel,"∝","\\propto",!0);defineSymbol(math,main,rel,"⊢","\\vdash",!0);defineSymbol(math,main,rel,"⊣","\\dashv",!0);defineSymbol(math,main,rel,"∋","\\owns");defineSymbol(math,main,punct,".","\\ldotp");defineSymbol(math,main,punct,"⋅","\\cdotp");defineSymbol(math,main,textord,"#","\\#");defineSymbol(text,main,textord,"#","\\#");defineSymbol(math,main,textord,"&","\\&");defineSymbol(text,main,textord,"&","\\&");defineSymbol(math,main,textord,"ℵ","\\aleph",!0);defineSymbol(math,main,textord,"∀","\\forall",!0);defineSymbol(math,main,textord,"ℏ","\\hbar",!0);defineSymbol(math,main,textord,"∃","\\exists",!0);defineSymbol(math,main,textord,"∇","\\nabla",!0);defineSymbol(math,main,textord,"♭","\\flat",!0);defineSymbol(math,main,textord,"ℓ","\\ell",!0);defineSymbol(math,main,textord,"♮","\\natural",!0);defineSymbol(math,main,textord,"♣","\\clubsuit",!0);defineSymbol(math,main,textord,"℘","\\wp",!0);defineSymbol(math,main,textord,"♯","\\sharp",!0);defineSymbol(math,main,textord,"♢","\\diamondsuit",!0);defineSymbol(math,main,textord,"ℜ","\\Re",!0);defineSymbol(math,main,textord,"♡","\\heartsuit",!0);defineSymbol(math,main,textord,"ℑ","\\Im",!0);defineSymbol(math,main,textord,"♠","\\spadesuit",!0);defineSymbol(math,main,textord,"\xa7","\\S",!0);defineSymbol(text,main,textord,"\xa7","\\S");defineSymbol(math,main,textord,"\xb6","\\P",!0);defineSymbol(text,main,textord,"\xb6","\\P");defineSymbol(math,main,textord,"†","\\dag");defineSymbol(text,main,textord,"†","\\dag");defineSymbol(text,main,textord,"†","\\textdagger");defineSymbol(math,main,textord,"‡","\\ddag");defineSymbol(text,main,textord,"‡","\\ddag");defineSymbol(text,main,textord,"‡","\\textdaggerdbl");defineSymbol(math,main,close,"⎱","\\rmoustache",!0);defineSymbol(math,main,open,"⎰","\\lmoustache",!0);defineSymbol(math,main,close,"⟯","\\rgroup",!0);defineSymbol(math,main,open,"⟮","\\lgroup",!0);defineSymbol(math,main,bin,"∓","\\mp",!0);defineSymbol(math,main,bin,"⊖","\\ominus",!0);defineSymbol(math,main,bin,"⊎","\\uplus",!0);defineSymbol(math,main,bin,"⊓","\\sqcap",!0);defineSymbol(math,main,bin,"∗","\\ast");defineSymbol(math,main,bin,"⊔","\\sqcup",!0);defineSymbol(math,main,bin,"◯","\\bigcirc",!0);defineSymbol(math,main,bin,"∙","\\bullet",!0);defineSymbol(math,main,bin,"‡","\\ddagger");defineSymbol(math,main,bin,"≀","\\wr",!0);defineSymbol(math,main,bin,"⨿","\\amalg");defineSymbol(math,main,bin,"&","\\And");defineSymbol(math,main,rel,"⟵","\\longleftarrow",!0);defineSymbol(math,main,rel,"⇐","\\Leftarrow",!0);defineSymbol(math,main,rel,"⟸","\\Longleftarrow",!0);defineSymbol(math,main,rel,"⟶","\\longrightarrow",!0);defineSymbol(math,main,rel,"⇒","\\Rightarrow",!0);defineSymbol(math,main,rel,"⟹","\\Longrightarrow",!0);defineSymbol(math,main,rel,"↔","\\leftrightarrow",!0);defineSymbol(math,main,rel,"⟷","\\longleftrightarrow",!0);defineSymbol(math,main,rel,"⇔","\\Leftrightarrow",!0);defineSymbol(math,main,rel,"⟺","\\Longleftrightarrow",!0);defineSymbol(math,main,rel,"↦","\\mapsto",!0);defineSymbol(math,main,rel,"⟼","\\longmapsto",!0);defineSymbol(math,main,rel,"↗","\\nearrow",!0);defineSymbol(math,main,rel,"↩","\\hookleftarrow",!0);defineSymbol(math,main,rel,"↪","\\hookrightarrow",!0);defineSymbol(math,main,rel,"↘","\\searrow",!0);defineSymbol(math,main,rel,"↼","\\leftharpoonup",!0);defineSymbol(math,main,rel,"⇀","\\rightharpoonup",!0);defineSymbol(math,main,rel,"↙","\\swarrow",!0);defineSymbol(math,main,rel,"↽","\\leftharpoondown",!0);defineSymbol(math,main,rel,"⇁","\\rightharpoondown",!0);defineSymbol(math,main,rel,"↖","\\nwarrow",!0);defineSymbol(math,main,rel,"⇌","\\rightleftharpoons",!0);defineSymbol(math,ams,rel,"≮","\\nless",!0);defineSymbol(math,ams,rel,"","\\@nleqslant");defineSymbol(math,ams,rel,"","\\@nleqq");defineSymbol(math,ams,rel,"⪇","\\lneq",!0);defineSymbol(math,ams,rel,"≨","\\lneqq",!0);defineSymbol(math,ams,rel,"","\\@lvertneqq");defineSymbol(math,ams,rel,"⋦","\\lnsim",!0);defineSymbol(math,ams,rel,"⪉","\\lnapprox",!0);defineSymbol(math,ams,rel,"⊀","\\nprec",!0);defineSymbol(math,ams,rel,"⋠","\\npreceq",!0);defineSymbol(math,ams,rel,"⋨","\\precnsim",!0);defineSymbol(math,ams,rel,"⪹","\\precnapprox",!0);defineSymbol(math,ams,rel,"≁","\\nsim",!0);defineSymbol(math,ams,rel,"","\\@nshortmid");defineSymbol(math,ams,rel,"∤","\\nmid",!0);defineSymbol(math,ams,rel,"⊬","\\nvdash",!0);defineSymbol(math,ams,rel,"⊭","\\nvDash",!0);defineSymbol(math,ams,rel,"⋪","\\ntriangleleft");defineSymbol(math,ams,rel,"⋬","\\ntrianglelefteq",!0);defineSymbol(math,ams,rel,"⊊","\\subsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneq");defineSymbol(math,ams,rel,"⫋","\\subsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneqq");defineSymbol(math,ams,rel,"≯","\\ngtr",!0);defineSymbol(math,ams,rel,"","\\@ngeqslant");defineSymbol(math,ams,rel,"","\\@ngeqq");defineSymbol(math,ams,rel,"⪈","\\gneq",!0);defineSymbol(math,ams,rel,"≩","\\gneqq",!0);defineSymbol(math,ams,rel,"","\\@gvertneqq");defineSymbol(math,ams,rel,"⋧","\\gnsim",!0);defineSymbol(math,ams,rel,"⪊","\\gnapprox",!0);defineSymbol(math,ams,rel,"⊁","\\nsucc",!0);defineSymbol(math,ams,rel,"⋡","\\nsucceq",!0);defineSymbol(math,ams,rel,"⋩","\\succnsim",!0);defineSymbol(math,ams,rel,"⪺","\\succnapprox",!0);defineSymbol(math,ams,rel,"≆","\\ncong",!0);defineSymbol(math,ams,rel,"","\\@nshortparallel");defineSymbol(math,ams,rel,"∦","\\nparallel",!0);defineSymbol(math,ams,rel,"⊯","\\nVDash",!0);defineSymbol(math,ams,rel,"⋫","\\ntriangleright");defineSymbol(math,ams,rel,"⋭","\\ntrianglerighteq",!0);defineSymbol(math,ams,rel,"","\\@nsupseteqq");defineSymbol(math,ams,rel,"⊋","\\supsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneq");defineSymbol(math,ams,rel,"⫌","\\supsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneqq");defineSymbol(math,ams,rel,"⊮","\\nVdash",!0);defineSymbol(math,ams,rel,"⪵","\\precneqq",!0);defineSymbol(math,ams,rel,"⪶","\\succneqq",!0);defineSymbol(math,ams,rel,"","\\@nsubseteqq");defineSymbol(math,ams,bin,"⊴","\\unlhd");defineSymbol(math,ams,bin,"⊵","\\unrhd");defineSymbol(math,ams,rel,"↚","\\nleftarrow",!0);defineSymbol(math,ams,rel,"↛","\\nrightarrow",!0);defineSymbol(math,ams,rel,"⇍","\\nLeftarrow",!0);defineSymbol(math,ams,rel,"⇏","\\nRightarrow",!0);defineSymbol(math,ams,rel,"↮","\\nleftrightarrow",!0);defineSymbol(math,ams,rel,"⇎","\\nLeftrightarrow",!0);defineSymbol(math,ams,rel,"△","\\vartriangle");defineSymbol(math,ams,textord,"ℏ","\\hslash");defineSymbol(math,ams,textord,"▽","\\triangledown");defineSymbol(math,ams,textord,"◊","\\lozenge");defineSymbol(math,ams,textord,"Ⓢ","\\circledS");defineSymbol(math,ams,textord,"\xae","\\circledR");defineSymbol(text,ams,textord,"\xae","\\circledR");defineSymbol(math,ams,textord,"∡","\\measuredangle",!0);defineSymbol(math,ams,textord,"∄","\\nexists");defineSymbol(math,ams,textord,"℧","\\mho");defineSymbol(math,ams,textord,"Ⅎ","\\Finv",!0);defineSymbol(math,ams,textord,"⅁","\\Game",!0);defineSymbol(math,ams,textord,"‵","\\backprime");defineSymbol(math,ams,textord,"▲","\\blacktriangle");defineSymbol(math,ams,textord,"▼","\\blacktriangledown");defineSymbol(math,ams,textord,"■","\\blacksquare");defineSymbol(math,ams,textord,"⧫","\\blacklozenge");defineSymbol(math,ams,textord,"★","\\bigstar");defineSymbol(math,ams,textord,"∢","\\sphericalangle",!0);defineSymbol(math,ams,textord,"∁","\\complement",!0);defineSymbol(math,ams,textord,"\xf0","\\eth",!0);defineSymbol(text,main,textord,"\xf0","\xf0");defineSymbol(math,ams,textord,"╱","\\diagup");defineSymbol(math,ams,textord,"╲","\\diagdown");defineSymbol(math,ams,textord,"□","\\square");defineSymbol(math,ams,textord,"□","\\Box");defineSymbol(math,ams,textord,"◊","\\Diamond");defineSymbol(math,ams,textord,"\xa5","\\yen",!0);defineSymbol(text,ams,textord,"\xa5","\\yen",!0);defineSymbol(math,ams,textord,"✓","\\checkmark",!0);defineSymbol(text,ams,textord,"✓","\\checkmark");defineSymbol(math,ams,textord,"ℶ","\\beth",!0);defineSymbol(math,ams,textord,"ℸ","\\daleth",!0);defineSymbol(math,ams,textord,"ℷ","\\gimel",!0);defineSymbol(math,ams,textord,"ϝ","\\digamma",!0);defineSymbol(math,ams,textord,"ϰ","\\varkappa");defineSymbol(math,ams,open,"┌","\\@ulcorner",!0);defineSymbol(math,ams,close,"┐","\\@urcorner",!0);defineSymbol(math,ams,open,"└","\\@llcorner",!0);defineSymbol(math,ams,close,"┘","\\@lrcorner",!0);defineSymbol(math,ams,rel,"≦","\\leqq",!0);defineSymbol(math,ams,rel,"⩽","\\leqslant",!0);defineSymbol(math,ams,rel,"⪕","\\eqslantless",!0);defineSymbol(math,ams,rel,"≲","\\lesssim",!0);defineSymbol(math,ams,rel,"⪅","\\lessapprox",!0);defineSymbol(math,ams,rel,"≊","\\approxeq",!0);defineSymbol(math,ams,bin,"⋖","\\lessdot");defineSymbol(math,ams,rel,"⋘","\\lll",!0);defineSymbol(math,ams,rel,"≶","\\lessgtr",!0);defineSymbol(math,ams,rel,"⋚","\\lesseqgtr",!0);defineSymbol(math,ams,rel,"⪋","\\lesseqqgtr",!0);defineSymbol(math,ams,rel,"≑","\\doteqdot");defineSymbol(math,ams,rel,"≓","\\risingdotseq",!0);defineSymbol(math,ams,rel,"≒","\\fallingdotseq",!0);defineSymbol(math,ams,rel,"∽","\\backsim",!0);defineSymbol(math,ams,rel,"⋍","\\backsimeq",!0);defineSymbol(math,ams,rel,"⫅","\\subseteqq",!0);defineSymbol(math,ams,rel,"⋐","\\Subset",!0);defineSymbol(math,ams,rel,"⊏","\\sqsubset",!0);defineSymbol(math,ams,rel,"≼","\\preccurlyeq",!0);defineSymbol(math,ams,rel,"⋞","\\curlyeqprec",!0);defineSymbol(math,ams,rel,"≾","\\precsim",!0);defineSymbol(math,ams,rel,"⪷","\\precapprox",!0);defineSymbol(math,ams,rel,"⊲","\\vartriangleleft");defineSymbol(math,ams,rel,"⊴","\\trianglelefteq");defineSymbol(math,ams,rel,"⊨","\\vDash",!0);defineSymbol(math,ams,rel,"⊪","\\Vvdash",!0);defineSymbol(math,ams,rel,"⌣","\\smallsmile");defineSymbol(math,ams,rel,"⌢","\\smallfrown");defineSymbol(math,ams,rel,"≏","\\bumpeq",!0);defineSymbol(math,ams,rel,"≎","\\Bumpeq",!0);defineSymbol(math,ams,rel,"≧","\\geqq",!0);defineSymbol(math,ams,rel,"⩾","\\geqslant",!0);defineSymbol(math,ams,rel,"⪖","\\eqslantgtr",!0);defineSymbol(math,ams,rel,"≳","\\gtrsim",!0);defineSymbol(math,ams,rel,"⪆","\\gtrapprox",!0);defineSymbol(math,ams,bin,"⋗","\\gtrdot");defineSymbol(math,ams,rel,"⋙","\\ggg",!0);defineSymbol(math,ams,rel,"≷","\\gtrless",!0);defineSymbol(math,ams,rel,"⋛","\\gtreqless",!0);defineSymbol(math,ams,rel,"⪌","\\gtreqqless",!0);defineSymbol(math,ams,rel,"≖","\\eqcirc",!0);defineSymbol(math,ams,rel,"≗","\\circeq",!0);defineSymbol(math,ams,rel,"≜","\\triangleq",!0);defineSymbol(math,ams,rel,"∼","\\thicksim");defineSymbol(math,ams,rel,"≈","\\thickapprox");defineSymbol(math,ams,rel,"⫆","\\supseteqq",!0);defineSymbol(math,ams,rel,"⋑","\\Supset",!0);defineSymbol(math,ams,rel,"⊐","\\sqsupset",!0);defineSymbol(math,ams,rel,"≽","\\succcurlyeq",!0);defineSymbol(math,ams,rel,"⋟","\\curlyeqsucc",!0);defineSymbol(math,ams,rel,"≿","\\succsim",!0);defineSymbol(math,ams,rel,"⪸","\\succapprox",!0);defineSymbol(math,ams,rel,"⊳","\\vartriangleright");defineSymbol(math,ams,rel,"⊵","\\trianglerighteq");defineSymbol(math,ams,rel,"⊩","\\Vdash",!0);defineSymbol(math,ams,rel,"∣","\\shortmid");defineSymbol(math,ams,rel,"∥","\\shortparallel");defineSymbol(math,ams,rel,"≬","\\between",!0);defineSymbol(math,ams,rel,"⋔","\\pitchfork",!0);defineSymbol(math,ams,rel,"∝","\\varpropto");defineSymbol(math,ams,rel,"◀","\\blacktriangleleft");defineSymbol(math,ams,rel,"∴","\\therefore",!0);defineSymbol(math,ams,rel,"∍","\\backepsilon");defineSymbol(math,ams,rel,"▶","\\blacktriangleright");defineSymbol(math,ams,rel,"∵","\\because",!0);defineSymbol(math,ams,rel,"⋘","\\llless");defineSymbol(math,ams,rel,"⋙","\\gggtr");defineSymbol(math,ams,bin,"⊲","\\lhd");defineSymbol(math,ams,bin,"⊳","\\rhd");defineSymbol(math,ams,rel,"≂","\\eqsim",!0);defineSymbol(math,main,rel,"⋈","\\Join");defineSymbol(math,ams,rel,"≑","\\Doteq",!0);defineSymbol(math,ams,bin,"∔","\\dotplus",!0);defineSymbol(math,ams,bin,"∖","\\smallsetminus");defineSymbol(math,ams,bin,"⋒","\\Cap",!0);defineSymbol(math,ams,bin,"⋓","\\Cup",!0);defineSymbol(math,ams,bin,"⩞","\\doublebarwedge",!0);defineSymbol(math,ams,bin,"⊟","\\boxminus",!0);defineSymbol(math,ams,bin,"⊞","\\boxplus",!0);defineSymbol(math,ams,bin,"⋇","\\divideontimes",!0);defineSymbol(math,ams,bin,"⋉","\\ltimes",!0);defineSymbol(math,ams,bin,"⋊","\\rtimes",!0);defineSymbol(math,ams,bin,"⋋","\\leftthreetimes",!0);defineSymbol(math,ams,bin,"⋌","\\rightthreetimes",!0);defineSymbol(math,ams,bin,"⋏","\\curlywedge",!0);defineSymbol(math,ams,bin,"⋎","\\curlyvee",!0);defineSymbol(math,ams,bin,"⊝","\\circleddash",!0);defineSymbol(math,ams,bin,"⊛","\\circledast",!0);defineSymbol(math,ams,bin,"⋅","\\centerdot");defineSymbol(math,ams,bin,"⊺","\\intercal",!0);defineSymbol(math,ams,bin,"⋒","\\doublecap");defineSymbol(math,ams,bin,"⋓","\\doublecup");defineSymbol(math,ams,bin,"⊠","\\boxtimes",!0);defineSymbol(math,ams,rel,"⇢","\\dashrightarrow",!0);defineSymbol(math,ams,rel,"⇠","\\dashleftarrow",!0);defineSymbol(math,ams,rel,"⇇","\\leftleftarrows",!0);defineSymbol(math,ams,rel,"⇆","\\leftrightarrows",!0);defineSymbol(math,ams,rel,"⇚","\\Lleftarrow",!0);defineSymbol(math,ams,rel,"↞","\\twoheadleftarrow",!0);defineSymbol(math,ams,rel,"↢","\\leftarrowtail",!0);defineSymbol(math,ams,rel,"↫","\\looparrowleft",!0);defineSymbol(math,ams,rel,"⇋","\\leftrightharpoons",!0);defineSymbol(math,ams,rel,"↶","\\curvearrowleft",!0);defineSymbol(math,ams,rel,"↺","\\circlearrowleft",!0);defineSymbol(math,ams,rel,"↰","\\Lsh",!0);defineSymbol(math,ams,rel,"⇈","\\upuparrows",!0);defineSymbol(math,ams,rel,"↿","\\upharpoonleft",!0);defineSymbol(math,ams,rel,"⇃","\\downharpoonleft",!0);defineSymbol(math,main,rel,"⊶","\\origof",!0);defineSymbol(math,main,rel,"⊷","\\imageof",!0);defineSymbol(math,ams,rel,"⊸","\\multimap",!0);defineSymbol(math,ams,rel,"↭","\\leftrightsquigarrow",!0);defineSymbol(math,ams,rel,"⇉","\\rightrightarrows",!0);defineSymbol(math,ams,rel,"⇄","\\rightleftarrows",!0);defineSymbol(math,ams,rel,"↠","\\twoheadrightarrow",!0);defineSymbol(math,ams,rel,"↣","\\rightarrowtail",!0);defineSymbol(math,ams,rel,"↬","\\looparrowright",!0);defineSymbol(math,ams,rel,"↷","\\curvearrowright",!0);defineSymbol(math,ams,rel,"↻","\\circlearrowright",!0);defineSymbol(math,ams,rel,"↱","\\Rsh",!0);defineSymbol(math,ams,rel,"⇊","\\downdownarrows",!0);defineSymbol(math,ams,rel,"↾","\\upharpoonright",!0);defineSymbol(math,ams,rel,"⇂","\\downharpoonright",!0);defineSymbol(math,ams,rel,"⇝","\\rightsquigarrow",!0);defineSymbol(math,ams,rel,"⇝","\\leadsto");defineSymbol(math,ams,rel,"⇛","\\Rrightarrow",!0);defineSymbol(math,ams,rel,"↾","\\restriction");defineSymbol(math,main,textord,"‘","`");defineSymbol(math,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\textdollar");defineSymbol(math,main,textord,"%","\\%");defineSymbol(text,main,textord,"%","\\%");defineSymbol(math,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\textunderscore");defineSymbol(math,main,textord,"∠","\\angle",!0);defineSymbol(math,main,textord,"∞","\\infty",!0);defineSymbol(math,main,textord,"′","\\prime");defineSymbol(math,main,textord,"△","\\triangle");defineSymbol(math,main,textord,"Γ","\\Gamma",!0);defineSymbol(math,main,textord,"Δ","\\Delta",!0);defineSymbol(math,main,textord,"Θ","\\Theta",!0);defineSymbol(math,main,textord,"Λ","\\Lambda",!0);defineSymbol(math,main,textord,"Ξ","\\Xi",!0);defineSymbol(math,main,textord,"Π","\\Pi",!0);defineSymbol(math,main,textord,"Σ","\\Sigma",!0);defineSymbol(math,main,textord,"Υ","\\Upsilon",!0);defineSymbol(math,main,textord,"Φ","\\Phi",!0);defineSymbol(math,main,textord,"Ψ","\\Psi",!0);defineSymbol(math,main,textord,"Ω","\\Omega",!0);defineSymbol(math,main,textord,"A","Α");defineSymbol(math,main,textord,"B","Β");defineSymbol(math,main,textord,"E","Ε");defineSymbol(math,main,textord,"Z","Ζ");defineSymbol(math,main,textord,"H","Η");defineSymbol(math,main,textord,"I","Ι");defineSymbol(math,main,textord,"K","Κ");defineSymbol(math,main,textord,"M","Μ");defineSymbol(math,main,textord,"N","Ν");defineSymbol(math,main,textord,"O","Ο");defineSymbol(math,main,textord,"P","Ρ");defineSymbol(math,main,textord,"T","Τ");defineSymbol(math,main,textord,"X","Χ");defineSymbol(math,main,textord,"\xac","\\neg",!0);defineSymbol(math,main,textord,"\xac","\\lnot");defineSymbol(math,main,textord,"⊤","\\top");defineSymbol(math,main,textord,"⊥","\\bot");defineSymbol(math,main,textord,"∅","\\emptyset");defineSymbol(math,ams,textord,"∅","\\varnothing");defineSymbol(math,main,mathord,"α","\\alpha",!0);defineSymbol(math,main,mathord,"β","\\beta",!0);defineSymbol(math,main,mathord,"γ","\\gamma",!0);defineSymbol(math,main,mathord,"δ","\\delta",!0);defineSymbol(math,main,mathord,"ϵ","\\epsilon",!0);defineSymbol(math,main,mathord,"ζ","\\zeta",!0);defineSymbol(math,main,mathord,"η","\\eta",!0);defineSymbol(math,main,mathord,"θ","\\theta",!0);defineSymbol(math,main,mathord,"ι","\\iota",!0);defineSymbol(math,main,mathord,"κ","\\kappa",!0);defineSymbol(math,main,mathord,"λ","\\lambda",!0);defineSymbol(math,main,mathord,"μ","\\mu",!0);defineSymbol(math,main,mathord,"ν","\\nu",!0);defineSymbol(math,main,mathord,"ξ","\\xi",!0);defineSymbol(math,main,mathord,"ο","\\omicron",!0);defineSymbol(math,main,mathord,"π","\\pi",!0);defineSymbol(math,main,mathord,"ρ","\\rho",!0);defineSymbol(math,main,mathord,"σ","\\sigma",!0);defineSymbol(math,main,mathord,"τ","\\tau",!0);defineSymbol(math,main,mathord,"υ","\\upsilon",!0);defineSymbol(math,main,mathord,"ϕ","\\phi",!0);defineSymbol(math,main,mathord,"χ","\\chi",!0);defineSymbol(math,main,mathord,"ψ","\\psi",!0);defineSymbol(math,main,mathord,"ω","\\omega",!0);defineSymbol(math,main,mathord,"ε","\\varepsilon",!0);defineSymbol(math,main,mathord,"ϑ","\\vartheta",!0);defineSymbol(math,main,mathord,"ϖ","\\varpi",!0);defineSymbol(math,main,mathord,"ϱ","\\varrho",!0);defineSymbol(math,main,mathord,"ς","\\varsigma",!0);defineSymbol(math,main,mathord,"φ","\\varphi",!0);defineSymbol(math,main,bin,"∗","*",!0);defineSymbol(math,main,bin,"+","+");defineSymbol(math,main,bin,"−","-",!0);defineSymbol(math,main,bin,"⋅","\\cdot",!0);defineSymbol(math,main,bin,"∘","\\circ",!0);defineSymbol(math,main,bin,"\xf7","\\div",!0);defineSymbol(math,main,bin,"\xb1","\\pm",!0);defineSymbol(math,main,bin,"\xd7","\\times",!0);defineSymbol(math,main,bin,"∩","\\cap",!0);defineSymbol(math,main,bin,"∪","\\cup",!0);defineSymbol(math,main,bin,"∖","\\setminus",!0);defineSymbol(math,main,bin,"∧","\\land");defineSymbol(math,main,bin,"∨","\\lor");defineSymbol(math,main,bin,"∧","\\wedge",!0);defineSymbol(math,main,bin,"∨","\\vee",!0);defineSymbol(math,main,textord,"√","\\surd");defineSymbol(math,main,open,"⟨","\\langle",!0);defineSymbol(math,main,open,"∣","\\lvert");defineSymbol(math,main,open,"∥","\\lVert");defineSymbol(math,main,close,"?","?");defineSymbol(math,main,close,"!","!");defineSymbol(math,main,close,"⟩","\\rangle",!0);defineSymbol(math,main,close,"∣","\\rvert");defineSymbol(math,main,close,"∥","\\rVert");defineSymbol(math,main,rel,"=","=");defineSymbol(math,main,rel,":",":");defineSymbol(math,main,rel,"≈","\\approx",!0);defineSymbol(math,main,rel,"≅","\\cong",!0);defineSymbol(math,main,rel,"≥","\\ge");defineSymbol(math,main,rel,"≥","\\geq",!0);defineSymbol(math,main,rel,"←","\\gets");defineSymbol(math,main,rel,">","\\gt",!0);defineSymbol(math,main,rel,"∈","\\in",!0);defineSymbol(math,main,rel,"","\\@not");defineSymbol(math,main,rel,"⊂","\\subset",!0);defineSymbol(math,main,rel,"⊃","\\supset",!0);defineSymbol(math,main,rel,"⊆","\\subseteq",!0);defineSymbol(math,main,rel,"⊇","\\supseteq",!0);defineSymbol(math,ams,rel,"⊈","\\nsubseteq",!0);defineSymbol(math,ams,rel,"⊉","\\nsupseteq",!0);defineSymbol(math,main,rel,"⊨","\\models");defineSymbol(math,main,rel,"←","\\leftarrow",!0);defineSymbol(math,main,rel,"≤","\\le");defineSymbol(math,main,rel,"≤","\\leq",!0);defineSymbol(math,main,rel,"<","\\lt",!0);defineSymbol(math,main,rel,"→","\\rightarrow",!0);defineSymbol(math,main,rel,"→","\\to");defineSymbol(math,ams,rel,"≱","\\ngeq",!0);defineSymbol(math,ams,rel,"≰","\\nleq",!0);defineSymbol(math,main,spacing,"\xa0","\\ ");defineSymbol(math,main,spacing,"\xa0","\\space");defineSymbol(math,main,spacing,"\xa0","\\nobreakspace");defineSymbol(text,main,spacing,"\xa0","\\ ");defineSymbol(text,main,spacing,"\xa0"," ");defineSymbol(text,main,spacing,"\xa0","\\space");defineSymbol(text,main,spacing,"\xa0","\\nobreakspace");defineSymbol(math,main,spacing,null,"\\nobreak");defineSymbol(math,main,spacing,null,"\\allowbreak");defineSymbol(math,main,punct,",",",");defineSymbol(math,main,punct,";",";");defineSymbol(math,ams,bin,"⊼","\\barwedge",!0);defineSymbol(math,ams,bin,"⊻","\\veebar",!0);defineSymbol(math,main,bin,"⊙","\\odot",!0);defineSymbol(math,main,bin,"⊕","\\oplus",!0);defineSymbol(math,main,bin,"⊗","\\otimes",!0);defineSymbol(math,main,textord,"∂","\\partial",!0);defineSymbol(math,main,bin,"⊘","\\oslash",!0);defineSymbol(math,ams,bin,"⊚","\\circledcirc",!0);defineSymbol(math,ams,bin,"⊡","\\boxdot",!0);defineSymbol(math,main,bin,"△","\\bigtriangleup");defineSymbol(math,main,bin,"▽","\\bigtriangledown");defineSymbol(math,main,bin,"†","\\dagger");defineSymbol(math,main,bin,"⋄","\\diamond");defineSymbol(math,main,bin,"⋆","\\star");defineSymbol(math,main,bin,"◃","\\triangleleft");defineSymbol(math,main,bin,"▹","\\triangleright");defineSymbol(math,main,open,"{","\\{");defineSymbol(text,main,textord,"{","\\{");defineSymbol(text,main,textord,"{","\\textbraceleft");defineSymbol(math,main,close,"}","\\}");defineSymbol(text,main,textord,"}","\\}");defineSymbol(text,main,textord,"}","\\textbraceright");defineSymbol(math,main,open,"{","\\lbrace");defineSymbol(math,main,close,"}","\\rbrace");defineSymbol(math,main,open,"[","\\lbrack",!0);defineSymbol(text,main,textord,"[","\\lbrack",!0);defineSymbol(math,main,close,"]","\\rbrack",!0);defineSymbol(text,main,textord,"]","\\rbrack",!0);defineSymbol(math,main,open,"(","\\lparen",!0);defineSymbol(math,main,close,")","\\rparen",!0);defineSymbol(text,main,textord,"<","\\textless",!0);defineSymbol(text,main,textord,">","\\textgreater",!0);defineSymbol(math,main,open,"⌊","\\lfloor",!0);defineSymbol(math,main,close,"⌋","\\rfloor",!0);defineSymbol(math,main,open,"⌈","\\lceil",!0);defineSymbol(math,main,close,"⌉","\\rceil",!0);defineSymbol(math,main,textord,"\\","\\backslash");defineSymbol(math,main,textord,"∣","|");defineSymbol(math,main,textord,"∣","\\vert");defineSymbol(text,main,textord,"|","\\textbar",!0);defineSymbol(math,main,textord,"∥","\\|");defineSymbol(math,main,textord,"∥","\\Vert");defineSymbol(text,main,textord,"∥","\\textbardbl");defineSymbol(text,main,textord,"~","\\textasciitilde");defineSymbol(text,main,textord,"\\","\\textbackslash");defineSymbol(text,main,textord,"^","\\textasciicircum");defineSymbol(math,main,rel,"↑","\\uparrow",!0);defineSymbol(math,main,rel,"⇑","\\Uparrow",!0);defineSymbol(math,main,rel,"↓","\\downarrow",!0);defineSymbol(math,main,rel,"⇓","\\Downarrow",!0);defineSymbol(math,main,rel,"↕","\\updownarrow",!0);defineSymbol(math,main,rel,"⇕","\\Updownarrow",!0);defineSymbol(math,main,op,"∐","\\coprod");defineSymbol(math,main,op,"⋁","\\bigvee");defineSymbol(math,main,op,"⋀","\\bigwedge");defineSymbol(math,main,op,"⨄","\\biguplus");defineSymbol(math,main,op,"⋂","\\bigcap");defineSymbol(math,main,op,"⋃","\\bigcup");defineSymbol(math,main,op,"∫","\\int");defineSymbol(math,main,op,"∫","\\intop");defineSymbol(math,main,op,"∬","\\iint");defineSymbol(math,main,op,"∭","\\iiint");defineSymbol(math,main,op,"∏","\\prod");defineSymbol(math,main,op,"∑","\\sum");defineSymbol(math,main,op,"⨂","\\bigotimes");defineSymbol(math,main,op,"⨁","\\bigoplus");defineSymbol(math,main,op,"⨀","\\bigodot");defineSymbol(math,main,op,"∮","\\oint");defineSymbol(math,main,op,"∯","\\oiint");defineSymbol(math,main,op,"∰","\\oiiint");defineSymbol(math,main,op,"⨆","\\bigsqcup");defineSymbol(math,main,op,"∫","\\smallint");defineSymbol(text,main,inner,"…","\\textellipsis");defineSymbol(math,main,inner,"…","\\mathellipsis");defineSymbol(text,main,inner,"…","\\ldots",!0);defineSymbol(math,main,inner,"…","\\ldots",!0);defineSymbol(math,main,inner,"⋯","\\@cdots",!0);defineSymbol(math,main,inner,"⋱","\\ddots",!0);defineSymbol(math,main,textord,"⋮","\\varvdots");defineSymbol(text,main,textord,"⋮","\\varvdots");defineSymbol(math,main,accent,"ˊ","\\acute");defineSymbol(math,main,accent,"ˋ","\\grave");defineSymbol(math,main,accent,"\xa8","\\ddot");defineSymbol(math,main,accent,"~","\\tilde");defineSymbol(math,main,accent,"ˉ","\\bar");defineSymbol(math,main,accent,"˘","\\breve");defineSymbol(math,main,accent,"ˇ","\\check");defineSymbol(math,main,accent,"^","\\hat");defineSymbol(math,main,accent,"⃗","\\vec");defineSymbol(math,main,accent,"˙","\\dot");defineSymbol(math,main,accent,"˚","\\mathring");defineSymbol(math,main,mathord,"","\\@imath");defineSymbol(math,main,mathord,"","\\@jmath");defineSymbol(math,main,textord,"ı","ı");defineSymbol(math,main,textord,"ȷ","ȷ");defineSymbol(text,main,textord,"ı","\\i",!0);defineSymbol(text,main,textord,"ȷ","\\j",!0);defineSymbol(text,main,textord,"\xdf","\\ss",!0);defineSymbol(text,main,textord,"\xe6","\\ae",!0);defineSymbol(text,main,textord,"œ","\\oe",!0);defineSymbol(text,main,textord,"\xf8","\\o",!0);defineSymbol(text,main,textord,"\xc6","\\AE",!0);defineSymbol(text,main,textord,"Œ","\\OE",!0);defineSymbol(text,main,textord,"\xd8","\\O",!0);defineSymbol(text,main,accent,"ˊ","\\'");defineSymbol(text,main,accent,"ˋ","\\`");defineSymbol(text,main,accent,"ˆ","\\^");defineSymbol(text,main,accent,"˜","\\~");defineSymbol(text,main,accent,"ˉ","\\=");defineSymbol(text,main,accent,"˘","\\u");defineSymbol(text,main,accent,"˙","\\.");defineSymbol(text,main,accent,"\xb8","\\c");defineSymbol(text,main,accent,"˚","\\r");defineSymbol(text,main,accent,"ˇ","\\v");defineSymbol(text,main,accent,"\xa8",'\\"');defineSymbol(text,main,accent,"˝","\\H");defineSymbol(text,main,accent,"◯","\\textcircled");var ligatures={"--":!0,"---":!0,"``":!0,"''":!0};defineSymbol(text,main,textord,"–","--",!0);defineSymbol(text,main,textord,"–","\\textendash");defineSymbol(text,main,textord,"—","---",!0);defineSymbol(text,main,textord,"—","\\textemdash");defineSymbol(text,main,textord,"‘","`",!0);defineSymbol(text,main,textord,"‘","\\textquoteleft");defineSymbol(text,main,textord,"’","'",!0);defineSymbol(text,main,textord,"’","\\textquoteright");defineSymbol(text,main,textord,"“","``",!0);defineSymbol(text,main,textord,"“","\\textquotedblleft");defineSymbol(text,main,textord,"”","''",!0);defineSymbol(text,main,textord,"”","\\textquotedblright");defineSymbol(math,main,textord,"\xb0","\\degree",!0);defineSymbol(text,main,textord,"\xb0","\\degree");defineSymbol(text,main,textord,"\xb0","\\textdegree",!0);defineSymbol(math,main,textord,"\xa3","\\pounds");defineSymbol(math,main,textord,"\xa3","\\mathsterling",!0);defineSymbol(text,main,textord,"\xa3","\\pounds");defineSymbol(text,main,textord,"\xa3","\\textsterling",!0);defineSymbol(math,ams,textord,"✠","\\maltese");defineSymbol(text,ams,textord,"✠","\\maltese");var mathTextSymbols='0123456789/@."';for(var i=0;i<mathTextSymbols.length;i++){var ch=mathTextSymbols.charAt(i);defineSymbol(math,main,textord,ch,ch)}var textSymbols='0123456789!@*()-=+";:?/.,';for(var _i=0;_i<textSymbols.length;_i++){var _ch=textSymbols.charAt(_i);defineSymbol(text,main,textord,_ch,_ch)}var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var _i2=0;_i2<letters.length;_i2++){var _ch2=letters.charAt(_i2);defineSymbol(math,main,mathord,_ch2,_ch2),defineSymbol(text,main,textord,_ch2,_ch2)}defineSymbol(math,ams,textord,"C","ℂ");defineSymbol(text,ams,textord,"C","ℂ");defineSymbol(math,ams,textord,"H","ℍ");defineSymbol(text,ams,textord,"H","ℍ");defineSymbol(math,ams,textord,"N","ℕ");defineSymbol(text,ams,textord,"N","ℕ");defineSymbol(math,ams,textord,"P","ℙ");defineSymbol(text,ams,textord,"P","ℙ");defineSymbol(math,ams,textord,"Q","ℚ");defineSymbol(text,ams,textord,"Q","ℚ");defineSymbol(math,ams,textord,"R","ℝ");defineSymbol(text,ams,textord,"R","ℝ");defineSymbol(math,ams,textord,"Z","ℤ");defineSymbol(text,ams,textord,"Z","ℤ");defineSymbol(math,main,mathord,"h","ℎ");defineSymbol(text,main,mathord,"h","ℎ");var wideChar="";for(var _i3=0;_i3<letters.length;_i3++){var _ch3=letters.charAt(_i3);wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar))}wideChar="\uD835\uDD5C";defineSymbol(math,main,mathord,"k",wideChar);defineSymbol(text,main,textord,"k",wideChar);for(var _i4=0;_i4<10;_i4++){var _ch4=_i4.toString();wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar)}var extraLatin="\xd0\xde\xfe";for(var _i5=0;_i5<extraLatin.length;_i5++){var _ch5=extraLatin.charAt(_i5);defineSymbol(math,main,mathord,_ch5,_ch5),defineSymbol(text,main,textord,_ch5,_ch5)}var wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=function o(e,n){var a=e.charCodeAt(0),s=e.charCodeAt(1),l=(a-55296)*1024+(s-56320)+65536,c=n==="math"?0:1;if(119808<=l&&l<120484){var d=Math.floor((l-119808)/26);return[wideLatinLetterData[d][2],wideLatinLetterData[d][c]]}else if(120782<=l&&l<=120831){var u=Math.floor((l-120782)/10);return[wideNumeralData[u][2],wideNumeralData[u][c]]}else{if(l===120485||l===120486)return[wideLatinLetterData[0][2],wideLatinLetterData[0][c]];if(120486<l&&l<120782)return["",""];throw new ParseError("Unsupported character: "+e)}},lookupSymbol=function o(e,n,a){return symbols[a][e]&&symbols[a][e].replace&&(e=symbols[a][e].replace),{value:e,metrics:getCharacterMetrics(e,n,a)}},makeSymbol=function o(e,n,a,s,l){var c=lookupSymbol(e,n,a),d=c.metrics;e=c.value;var u;if(d){var f=d.italic;(a==="text"||s&&s.font==="mathit")&&(f=0),u=new SymbolNode(e,d.height,d.depth,f,d.skew,d.width,l)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+n+"' and mode '"+a+"'")),u=new SymbolNode(e,0,0,0,0,0,l);if(s){u.maxFontSize=s.sizeMultiplier,s.style.isTight()&&u.classes.push("mtight");var p=s.getColor();p&&(u.style.color=p)}return u},mathsym=function o(e,n,a,s){return s===void 0&&(s=[]),a.font==="boldsymbol"&&lookupSymbol(e,"Main-Bold",n).metrics?makeSymbol(e,"Main-Bold",n,a,s.concat(["mathbf"])):e==="\\"||symbols[n][e].font==="main"?makeSymbol(e,"Main-Regular",n,a,s):makeSymbol(e,"AMS-Regular",n,a,s.concat(["amsrm"]))},boldsymbol=function o(e,n,a,s,l){return l!=="textord"&&lookupSymbol(e,"Math-BoldItalic",n).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},makeOrd=function o(e,n,a){var s=e.mode,l=e.text,c=["mord"],d=s==="math"||s==="text"&&n.font,u=d?n.font:n.fontFamily,f="",p="";if(l.charCodeAt(0)===55349&&([f,p]=wideCharacterFont(l,s)),f.length>0)return makeSymbol(l,f,s,n,c.concat(p));if(u){var _,b;if(u==="boldsymbol"){var v=boldsymbol(l,s,n,c,a);_=v.fontName,b=[v.fontClass]}else d?(_=fontMap[u].fontName,b=[u]):(_=retrieveTextFontName(u,n.fontWeight,n.fontShape),b=[u,n.fontWeight,n.fontShape]);if(lookupSymbol(l,_,s).metrics)return makeSymbol(l,_,s,n,c.concat(b));if(ligatures.hasOwnProperty(l)&&_.slice(0,10)==="Typewriter"){for(var k=[],x=0;x<l.length;x++)k.push(makeSymbol(l[x],_,s,n,c.concat(b)));return makeFragment(k)}}if(a==="mathord")return makeSymbol(l,"Math-Italic",s,n,c.concat(["mathnormal"]));if(a==="textord"){var M=symbols[s][l]&&symbols[s][l].font;if(M==="ams"){var E=retrieveTextFontName("amsrm",n.fontWeight,n.fontShape);return makeSymbol(l,E,s,n,c.concat("amsrm",n.fontWeight,n.fontShape))}else if(M==="main"||!M){var L=retrieveTextFontName("textrm",n.fontWeight,n.fontShape);return makeSymbol(l,L,s,n,c.concat(n.fontWeight,n.fontShape))}else{var V=retrieveTextFontName(M,n.fontWeight,n.fontShape);return makeSymbol(l,V,s,n,c.concat(V,n.fontWeight,n.fontShape))}}else throw new Error("unexpected type: "+a+" in makeOrd")},canCombine=(o,e)=>{if(createClass(o.classes)!==createClass(e.classes)||o.skew!==e.skew||o.maxFontSize!==e.maxFontSize)return!1;if(o.classes.length===1){var n=o.classes[0];if(n==="mbin"||n==="mord")return!1}for(var a in o.style)if(o.style.hasOwnProperty(a)&&o.style[a]!==e.style[a])return!1;for(var s in e.style)if(e.style.hasOwnProperty(s)&&o.style[s]!==e.style[s])return!1;return!0},tryCombineChars=o=>{for(var e=0;e<o.length-1;e++){var n=o[e],a=o[e+1];n instanceof SymbolNode&&a instanceof SymbolNode&&canCombine(n,a)&&(n.text+=a.text,n.height=Math.max(n.height,a.height),n.depth=Math.max(n.depth,a.depth),n.italic=a.italic,o.splice(e+1,1),e--)}return o},sizeElementFromChildren=function o(e){for(var n=0,a=0,s=0,l=0;l<e.children.length;l++){var c=e.children[l];c.height>n&&(n=c.height),c.depth>a&&(a=c.depth),c.maxFontSize>s&&(s=c.maxFontSize)}e.height=n,e.depth=a,e.maxFontSize=s},makeSpan$2=function o(e,n,a,s){var l=new Span(e,n,a,s);return sizeElementFromChildren(l),l},makeSvgSpan=(o,e,n,a)=>new Span(o,e,n,a),makeLineSpan=function o(e,n,a){var s=makeSpan$2([e],[],n);return s.height=Math.max(a||n.fontMetrics().defaultRuleThickness,n.minRuleThickness),s.style.borderBottomWidth=makeEm(s.height),s.maxFontSize=1,s},makeAnchor=function o(e,n,a,s){var l=new Anchor(e,n,a,s);return sizeElementFromChildren(l),l},makeFragment=function o(e){var n=new DocumentFragment$1(e);return sizeElementFromChildren(n),n},wrapFragment=function o(e,n){return e instanceof DocumentFragment$1?makeSpan$2([],[e],n):e},getVListChildrenAndDepth=function o(e){if(e.positionType==="individualShift"){for(var n=e.children,a=[n[0]],s=-n[0].shift-n[0].elem.depth,l=s,c=1;c<n.length;c++){var d=-n[c].shift-l-n[c].elem.depth,u=d-(n[c-1].elem.height+n[c-1].elem.depth);l=l+d,a.push({type:"kern",size:u}),a.push(n[c])}return{children:a,depth:s}}var f;if(e.positionType==="top"){for(var p=e.positionData,_=0;_<e.children.length;_++){var b=e.children[_];p-=b.type==="kern"?b.size:b.elem.height+b.elem.depth}f=p}else if(e.positionType==="bottom")f=-e.positionData;else{var v=e.children[0];if(v.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")f=-v.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")f=-v.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:f}},makeVList=function o(e,n){for(var{children:a,depth:s}=getVListChildrenAndDepth(e),l=0,c=0;c<a.length;c++){var d=a[c];if(d.type==="elem"){var u=d.elem;l=Math.max(l,u.maxFontSize,u.height)}}l+=2;var f=makeSpan$2(["pstrut"],[]);f.style.height=makeEm(l);for(var p=[],_=s,b=s,v=s,k=0;k<a.length;k++){var x=a[k];if(x.type==="kern")v+=x.size;else{var M=x.elem,E=x.wrapperClasses||[],L=x.wrapperStyle||{},V=makeSpan$2(E,[f,M],void 0,L);V.style.top=makeEm(-l-v-M.depth),x.marginLeft&&(V.style.marginLeft=x.marginLeft),x.marginRight&&(V.style.marginRight=x.marginRight),p.push(V),v+=M.height+M.depth}_=Math.min(_,v),b=Math.max(b,v)}var B=makeSpan$2(["vlist"],p);B.style.height=makeEm(b);var F;if(_<0){var j=makeSpan$2([],[]),I=makeSpan$2(["vlist"],[j]);I.style.height=makeEm(-_);var U=makeSpan$2(["vlist-s"],[new SymbolNode("​")]);F=[makeSpan$2(["vlist-r"],[B,U]),makeSpan$2(["vlist-r"],[I])]}else F=[makeSpan$2(["vlist-r"],[B])];var W=makeSpan$2(["vlist-t"],F);return F.length===2&&W.classes.push("vlist-t2"),W.height=b,W.depth=-_,W},makeGlue=(o,e)=>{var n=makeSpan$2(["mspace"],[],e),a=calculateSize(o,e);return n.style.marginRight=makeEm(a),n},retrieveTextFontName=function o(e,n,a){var s="";switch(e){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=e}var l;return n==="textbf"&&a==="textit"?l="BoldItalic":n==="textbf"?l="Bold":n==="textit"?l="Italic":l="Regular",s+"-"+l},fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=function o(e,n){var[a,s,l]=svgData[e],c=new PathNode(a),d=new SvgNode([c],{width:makeEm(s),height:makeEm(l),style:"width:"+makeEm(s),viewBox:"0 0 "+1e3*s+" "+1e3*l,preserveAspectRatio:"xMinYMin"}),u=makeSvgSpan(["overlay"],[d],n);return u.height=l,u.style.height=makeEm(l),u.style.width=makeEm(s),u},buildCommon={fontMap,makeSymbol,mathsym,makeSpan:makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,makeVList,makeOrd,makeGlue,staticSvg,svgData,tryCombineChars},thinspace={number:3,unit:"mu"},mediumspace={number:4,unit:"mu"},thickspace={number:5,unit:"mu"},spacings={mord:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={};function defineFunction(o){for(var{type:e,names:n,props:a,handler:s,htmlBuilder:l,mathmlBuilder:c}=o,d={type:e,numArgs:a.numArgs,argTypes:a.argTypes,allowedInArgument:!!a.allowedInArgument,allowedInText:!!a.allowedInText,allowedInMath:a.allowedInMath===void 0?!0:a.allowedInMath,numOptionalArgs:a.numOptionalArgs||0,infix:!!a.infix,primitive:!!a.primitive,handler:s},u=0;u<n.length;++u)_functions[n[u]]=d;e&&(l&&(_htmlGroupBuilders[e]=l),c&&(_mathmlGroupBuilders[e]=c))}function defineFunctionBuilders(o){var{type:e,htmlBuilder:n,mathmlBuilder:a}=o;defineFunction({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:a})}var normalizeArgument=function o(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},ordargument=function o(e){return e.type==="ordgroup"?e.body:[e]},makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=function o(e,n,a,s){s===void 0&&(s=[null,null]);for(var l=[],c=0;c<e.length;c++){var d=buildGroup$1(e[c],n);if(d instanceof DocumentFragment$1){var u=d.children;l.push(...u)}else l.push(d)}if(buildCommon.tryCombineChars(l),!a)return l;var f=n;if(e.length===1){var p=e[0];p.type==="sizing"?f=n.havingSize(p.size):p.type==="styling"&&(f=n.havingStyle(styleMap$1[p.style]))}var _=makeSpan$1([s[0]||"leftmost"],[],n),b=makeSpan$1([s[1]||"rightmost"],[],n),v=a==="root";return traverseNonSpaceNodes(l,(k,x)=>{var M=x.classes[0],E=k.classes[0];M==="mbin"&&utils.contains(binRightCanceller,E)?x.classes[0]="mord":E==="mbin"&&utils.contains(binLeftCanceller,M)&&(k.classes[0]="mord")},{node:_},b,v),traverseNonSpaceNodes(l,(k,x)=>{var M=getTypeOfDomTree(x),E=getTypeOfDomTree(k),L=M&&E?k.hasClass("mtight")?tightSpacings[M][E]:spacings[M][E]:null;if(L)return buildCommon.makeGlue(L,f)},{node:_},b,v),l},traverseNonSpaceNodes=function o(e,n,a,s,l){s&&e.push(s);for(var c=0;c<e.length;c++){var d=e[c],u=checkPartialGroup(d);if(u){o(u.children,n,a,null,l);continue}var f=!d.hasClass("mspace");if(f){var p=n(d,a.node);p&&(a.insertAfter?a.insertAfter(p):(e.unshift(p),c++))}f?a.node=d:l&&d.hasClass("newline")&&(a.node=makeSpan$1(["leftmost"])),a.insertAfter=(_=>b=>{e.splice(_+1,0,b),c++})(c)}s&&e.pop()},checkPartialGroup=function o(e){return e instanceof DocumentFragment$1||e instanceof Anchor||e instanceof Span&&e.hasClass("enclosing")?e:null},getOutermostNode=function o(e,n){var a=checkPartialGroup(e);if(a){var s=a.children;if(s.length){if(n==="right")return o(s[s.length-1],"right");if(n==="left")return o(s[0],"left")}}return e},getTypeOfDomTree=function o(e,n){return e?(n&&(e=getOutermostNode(e,n)),DomEnum[e.classes[0]]||null):null},makeNullDelimiter=function o(e,n){var a=["nulldelimiter"].concat(e.baseSizingClasses());return makeSpan$1(n.concat(a))},buildGroup$1=function o(e,n,a){if(!e)return makeSpan$1();if(_htmlGroupBuilders[e.type]){var s=_htmlGroupBuilders[e.type](e,n);if(a&&n.size!==a.size){s=makeSpan$1(n.sizingClasses(a),[s],n);var l=n.sizeMultiplier/a.sizeMultiplier;s.height*=l,s.depth*=l}return s}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildHTMLUnbreakable(o,e){var n=makeSpan$1(["base"],o,e),a=makeSpan$1(["strut"]);return a.style.height=makeEm(n.height+n.depth),n.depth&&(a.style.verticalAlign=makeEm(-n.depth)),n.children.unshift(a),n}function buildHTML(o,e){var n=null;o.length===1&&o[0].type==="tag"&&(n=o[0].tag,o=o[0].body);var a=buildExpression$1(o,e,"root"),s;a.length===2&&a[1].hasClass("tag")&&(s=a.pop());for(var l=[],c=[],d=0;d<a.length;d++)if(c.push(a[d]),a[d].hasClass("mbin")||a[d].hasClass("mrel")||a[d].hasClass("allowbreak")){for(var u=!1;d<a.length-1&&a[d+1].hasClass("mspace")&&!a[d+1].hasClass("newline");)d++,c.push(a[d]),a[d].hasClass("nobreak")&&(u=!0);u||(l.push(buildHTMLUnbreakable(c,e)),c=[])}else a[d].hasClass("newline")&&(c.pop(),c.length>0&&(l.push(buildHTMLUnbreakable(c,e)),c=[]),l.push(a[d]));c.length>0&&l.push(buildHTMLUnbreakable(c,e));var f;n?(f=buildHTMLUnbreakable(buildExpression$1(n,e,!0)),f.classes=["tag"],l.push(f)):s&&l.push(s);var p=makeSpan$1(["katex-html"],l);if(p.setAttribute("aria-hidden","true"),f){var _=f.children[0];_.style.height=makeEm(p.height+p.depth),p.depth&&(_.style.verticalAlign=makeEm(-p.depth))}return p}function newDocumentFragment(o){return new DocumentFragment$1(o)}class MathNode{constructor(e,n,a){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=n||[],this.classes=a||[]}setAttribute(e,n){this.attributes[e]=n}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&e.setAttribute(n,this.attributes[n]);this.classes.length>0&&(e.className=createClass(this.classes));for(var a=0;a<this.children.length;a++)if(this.children[a]instanceof TextNode&&this.children[a+1]instanceof TextNode){for(var s=this.children[a].toText()+this.children[++a].toText();this.children[a+1]instanceof TextNode;)s+=this.children[++a].toText();e.appendChild(new TextNode(s).toNode())}else e.appendChild(this.children[a].toNode());return e}toMarkup(){var e="<"+this.type;for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="',e+=utils.escape(this.attributes[n]),e+='"');this.classes.length>0&&(e+=' class ="'+utils.escape(createClass(this.classes))+'"'),e+=">";for(var a=0;a<this.children.length;a++)e+=this.children[a].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class TextNode{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils.escape(this.toText())}toText(){return this.text}}class SpaceNode{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character=" ":e>=.1666&&e<=.1667?this.character=" ":e>=.2222&&e<=.2223?this.character=" ":e>=.2777&&e<=.2778?this.character="  ":e>=-.05556&&e<=-.05555?this.character=" ⁣":e>=-.1667&&e<=-.1666?this.character=" ⁣":e>=-.2223&&e<=-.2222?this.character=" ⁣":e>=-.2778&&e<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",makeEm(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mathMLTree={MathNode,TextNode,SpaceNode,newDocumentFragment},makeText=function o(e,n,a){return symbols[n][e]&&symbols[n][e].replace&&e.charCodeAt(0)!==55349&&!(ligatures.hasOwnProperty(e)&&a&&(a.fontFamily&&a.fontFamily.slice(4,6)==="tt"||a.font&&a.font.slice(4,6)==="tt"))&&(e=symbols[n][e].replace),new mathMLTree.TextNode(e)},makeRow=function o(e){return e.length===1?e[0]:new mathMLTree.MathNode("mrow",e)},getVariant=function o(e,n){if(n.fontFamily==="texttt")return"monospace";if(n.fontFamily==="textsf")return n.fontShape==="textit"&&n.fontWeight==="textbf"?"sans-serif-bold-italic":n.fontShape==="textit"?"sans-serif-italic":n.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(n.fontShape==="textit"&&n.fontWeight==="textbf")return"bold-italic";if(n.fontShape==="textit")return"italic";if(n.fontWeight==="textbf")return"bold";var a=n.font;if(!a||a==="mathnormal")return null;var s=e.mode;if(a==="mathit")return"italic";if(a==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(a==="mathbf")return"bold";if(a==="mathbb")return"double-struck";if(a==="mathsfit")return"sans-serif-italic";if(a==="mathfrak")return"fraktur";if(a==="mathscr"||a==="mathcal")return"script";if(a==="mathsf")return"sans-serif";if(a==="mathtt")return"monospace";var l=e.text;if(utils.contains(["\\imath","\\jmath"],l))return null;symbols[s][l]&&symbols[s][l].replace&&(l=symbols[s][l].replace);var c=buildCommon.fontMap[a].fontName;return getCharacterMetrics(l,c,s)?buildCommon.fontMap[a].variant:null};function isNumberPunctuation(o){if(!o)return!1;if(o.type==="mi"&&o.children.length===1){var e=o.children[0];return e instanceof TextNode&&e.text==="."}else if(o.type==="mo"&&o.children.length===1&&o.getAttribute("separator")==="true"&&o.getAttribute("lspace")==="0em"&&o.getAttribute("rspace")==="0em"){var n=o.children[0];return n instanceof TextNode&&n.text===","}else return!1}var buildExpression=function o(e,n,a){if(e.length===1){var s=buildGroup(e[0],n);return a&&s instanceof MathNode&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var l=[],c,d=0;d<e.length;d++){var u=buildGroup(e[d],n);if(u instanceof MathNode&&c instanceof MathNode){if(u.type==="mtext"&&c.type==="mtext"&&u.getAttribute("mathvariant")===c.getAttribute("mathvariant")){c.children.push(...u.children);continue}else if(u.type==="mn"&&c.type==="mn"){c.children.push(...u.children);continue}else if(isNumberPunctuation(u)&&c.type==="mn"){c.children.push(...u.children);continue}else if(u.type==="mn"&&isNumberPunctuation(c))u.children=[...c.children,...u.children],l.pop();else if((u.type==="msup"||u.type==="msub")&&u.children.length>=1&&(c.type==="mn"||isNumberPunctuation(c))){var f=u.children[0];f instanceof MathNode&&f.type==="mn"&&(f.children=[...c.children,...f.children],l.pop())}else if(c.type==="mi"&&c.children.length===1){var p=c.children[0];if(p instanceof TextNode&&p.text==="̸"&&(u.type==="mo"||u.type==="mi"||u.type==="mn")){var _=u.children[0];_ instanceof TextNode&&_.text.length>0&&(_.text=_.text.slice(0,1)+"̸"+_.text.slice(1),l.pop())}}}l.push(u),c=u}return l},buildExpressionRow=function o(e,n,a){return makeRow(buildExpression(e,n,a))},buildGroup=function o(e,n){if(!e)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[e.type]){var a=_mathmlGroupBuilders[e.type](e,n);return a}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildMathML(o,e,n,a,s){var l=buildExpression(o,n),c;l.length===1&&l[0]instanceof MathNode&&utils.contains(["mrow","mtable"],l[0].type)?c=l[0]:c=new mathMLTree.MathNode("mrow",l);var d=new mathMLTree.MathNode("annotation",[new mathMLTree.TextNode(e)]);d.setAttribute("encoding","application/x-tex");var u=new mathMLTree.MathNode("semantics",[c,d]),f=new mathMLTree.MathNode("math",[u]);f.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),a&&f.setAttribute("display","block");var p=s?"katex":"katex-mathml";return buildCommon.makeSpan([p],[f])}var optionsFromSettings=function o(e){return new Options({style:e.displayMode?Style$1.DISPLAY:Style$1.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},displayWrap=function o(e,n){if(n.displayMode){var a=["katex-display"];n.leqno&&a.push("leqno"),n.fleqn&&a.push("fleqn"),e=buildCommon.makeSpan(a,[e])}return e},buildTree=function o(e,n,a){var s=optionsFromSettings(a),l;if(a.output==="mathml")return buildMathML(e,n,s,a.displayMode,!0);if(a.output==="html"){var c=buildHTML(e,s);l=buildCommon.makeSpan(["katex"],[c])}else{var d=buildMathML(e,n,s,a.displayMode,!1),u=buildHTML(e,s);l=buildCommon.makeSpan(["katex"],[d,u])}return displayWrap(l,a)},buildHTMLTree=function o(e,n,a){var s=optionsFromSettings(a),l=buildHTML(e,s),c=buildCommon.makeSpan(["katex"],[l]);return displayWrap(c,a)},stretchyCodePoint={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},mathMLnode=function o(e){var n=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[e.replace(/^\\/,"")])]);return n.setAttribute("stretchy","true"),n},katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=function o(e){return e.type==="ordgroup"?e.body.length:1},svgSpan=function o(e,n){function a(){var d=4e5,u=e.label.slice(1);if(utils.contains(["widehat","widecheck","widetilde","utilde"],u)){var f=e,p=groupLength(f.base),_,b,v;if(p>5)u==="widehat"||u==="widecheck"?(_=420,d=2364,v=.42,b=u+"4"):(_=312,d=2340,v=.34,b="tilde4");else{var k=[1,1,2,2,3,3][p];u==="widehat"||u==="widecheck"?(d=[0,1062,2364,2364,2364][k],_=[0,239,300,360,420][k],v=[0,.24,.3,.3,.36,.42][k],b=u+k):(d=[0,600,1033,2339,2340][k],_=[0,260,286,306,312][k],v=[0,.26,.286,.3,.306,.34][k],b="tilde"+k)}var x=new PathNode(b),M=new SvgNode([x],{width:"100%",height:makeEm(v),viewBox:"0 0 "+d+" "+_,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[M],n),minWidth:0,height:v}}else{var E=[],L=katexImagesData[u],[V,B,F]=L,j=F/1e3,I=V.length,U,W;if(I===1){var K=L[3];U=["hide-tail"],W=[K]}else if(I===2)U=["halfarrow-left","halfarrow-right"],W=["xMinYMin","xMaxYMin"];else if(I===3)U=["brace-left","brace-center","brace-right"],W=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+I+" children.");for(var G=0;G<I;G++){var Z=new PathNode(V[G]),oe=new SvgNode([Z],{width:"400em",height:makeEm(j),viewBox:"0 0 "+d+" "+F,preserveAspectRatio:W[G]+" slice"}),Y=buildCommon.makeSvgSpan([U[G]],[oe],n);if(I===1)return{span:Y,minWidth:B,height:j};Y.style.height=makeEm(j),E.push(Y)}return{span:buildCommon.makeSpan(["stretchy"],E,n),minWidth:B,height:j}}}var{span:s,minWidth:l,height:c}=a();return s.height=c,s.style.height=makeEm(c),l>0&&(s.style.minWidth=makeEm(l)),s},encloseSpan=function o(e,n,a,s,l){var c,d=e.height+e.depth+a+s;if(/fbox|color|angl/.test(n)){if(c=buildCommon.makeSpan(["stretchy",n],[],l),n==="fbox"){var u=l.color&&l.getColor();u&&(c.style.borderColor=u)}}else{var f=[];/^[bx]cancel$/.test(n)&&f.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(n)&&f.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new SvgNode(f,{width:"100%",height:makeEm(d)});c=buildCommon.makeSvgSpan([],[p],l)}return c.height=d,c.style.height=makeEm(d),c},stretchy={encloseSpan,mathMLnode,svgSpan};function assertNodeType(o,e){if(!o||o.type!==e)throw new Error("Expected node of type "+e+", but got "+(o?"node of type "+o.type:String(o)));return o}function assertSymbolNodeType(o){var e=checkSymbolNodeType(o);if(!e)throw new Error("Expected node of symbol group type, but got "+(o?"node of type "+o.type:String(o)));return e}function checkSymbolNodeType(o){return o&&(o.type==="atom"||NON_ATOMS.hasOwnProperty(o.type))?o:null}var htmlBuilder$a=(o,e)=>{var n,a,s;o&&o.type==="supsub"?(a=assertNodeType(o.base,"accent"),n=a.base,o.base=n,s=assertSpan(buildGroup$1(o,e)),o.base=a):(a=assertNodeType(o,"accent"),n=a.base);var l=buildGroup$1(n,e.havingCrampedStyle()),c=a.isShifty&&utils.isCharacterBox(n),d=0;if(c){var u=utils.getBaseElem(n),f=buildGroup$1(u,e.havingCrampedStyle());d=assertSymbolDomNode(f).skew}var p=a.label==="\\c",_=p?l.height+l.depth:Math.min(l.height,e.fontMetrics().xHeight),b;if(a.isStretchy)b=stretchy.svgSpan(a,e),b=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"elem",elem:b,wrapperClasses:["svg-align"],wrapperStyle:d>0?{width:"calc(100% - "+makeEm(2*d)+")",marginLeft:makeEm(2*d)}:void 0}]},e);else{var v,k;a.label==="\\vec"?(v=buildCommon.staticSvg("vec",e),k=buildCommon.svgData.vec[1]):(v=buildCommon.makeOrd({mode:a.mode,text:a.label},e,"textord"),v=assertSymbolDomNode(v),v.italic=0,k=v.width,p&&(_+=v.depth)),b=buildCommon.makeSpan(["accent-body"],[v]);var x=a.label==="\\textcircled";x&&(b.classes.push("accent-full"),_=l.height);var M=d;x||(M-=k/2),b.style.left=makeEm(M),a.label==="\\textcircled"&&(b.style.top=".2em"),b=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:-_},{type:"elem",elem:b}]},e)}var E=buildCommon.makeSpan(["mord","accent"],[b],e);return s?(s.children[0]=E,s.height=Math.max(E.height,s.height),s.classes[0]="mord",s):E},mathmlBuilder$9=(o,e)=>{var n=o.isStretchy?stretchy.mathMLnode(o.label):new mathMLTree.MathNode("mo",[makeText(o.label,o.mode)]),a=new mathMLTree.MathNode("mover",[buildGroup(o.base,e),n]);return a.setAttribute("accent","true"),a},NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(o=>"\\"+o).join("|"));defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(o,e)=>{var n=normalizeArgument(e[0]),a=!NON_STRETCHY_ACCENT_REGEX.test(o.funcName),s=!a||o.funcName==="\\widehat"||o.funcName==="\\widetilde"||o.funcName==="\\widecheck";return{type:"accent",mode:o.parser.mode,label:o.funcName,isStretchy:a,isShifty:s,base:n}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(o,e)=>{var n=e[0],a=o.parser.mode;return a==="math"&&(o.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+o.funcName+" works only in text mode"),a="text"),{type:"accent",mode:a,label:o.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=e[0];return{type:"accentUnder",mode:n.mode,label:a,base:s}},htmlBuilder:(o,e)=>{var n=buildGroup$1(o.base,e),a=stretchy.svgSpan(o,e),s=o.label==="\\utilde"?.12:0,l=buildCommon.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:a,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:n}]},e);return buildCommon.makeSpan(["mord","accentunder"],[l],e)},mathmlBuilder:(o,e)=>{var n=stretchy.mathMLnode(o.label),a=new mathMLTree.MathNode("munder",[buildGroup(o.base,e),n]);return a.setAttribute("accentunder","true"),a}});var paddedNode=o=>{var e=new mathMLTree.MathNode("mpadded",o?[o]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(o,e,n){var{parser:a,funcName:s}=o;return{type:"xArrow",mode:a.mode,label:s,body:e[0],below:n[0]}},htmlBuilder(o,e){var n=e.style,a=e.havingStyle(n.sup()),s=buildCommon.wrapFragment(buildGroup$1(o.body,a,e),e),l=o.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(l+"-arrow-pad");var c;o.below&&(a=e.havingStyle(n.sub()),c=buildCommon.wrapFragment(buildGroup$1(o.below,a,e),e),c.classes.push(l+"-arrow-pad"));var d=stretchy.svgSpan(o,e),u=-e.fontMetrics().axisHeight+.5*d.height,f=-e.fontMetrics().axisHeight-.5*d.height-.111;(s.depth>.25||o.label==="\\xleftequilibrium")&&(f-=s.depth);var p;if(c){var _=-e.fontMetrics().axisHeight+c.height+.5*d.height+.111;p=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:f},{type:"elem",elem:d,shift:u},{type:"elem",elem:c,shift:_}]},e)}else p=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:f},{type:"elem",elem:d,shift:u}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(o,e){var n=stretchy.mathMLnode(o.label);n.setAttribute("minsize",o.label.charAt(0)==="x"?"1.75em":"3.0em");var a;if(o.body){var s=paddedNode(buildGroup(o.body,e));if(o.below){var l=paddedNode(buildGroup(o.below,e));a=new mathMLTree.MathNode("munderover",[n,l,s])}else a=new mathMLTree.MathNode("mover",[n,s])}else if(o.below){var c=paddedNode(buildGroup(o.below,e));a=new mathMLTree.MathNode("munder",[n,c])}else a=paddedNode(),a=new mathMLTree.MathNode("mover",[n,a]);return a}});var makeSpan=buildCommon.makeSpan;function htmlBuilder$9(o,e){var n=buildExpression$1(o.body,e,!0);return makeSpan([o.mclass],n,e)}function mathmlBuilder$8(o,e){var n,a=buildExpression(o.body,e);return o.mclass==="minner"?n=new mathMLTree.MathNode("mpadded",a):o.mclass==="mord"?o.isCharacterBox?(n=a[0],n.type="mi"):n=new mathMLTree.MathNode("mi",a):(o.isCharacterBox?(n=a[0],n.type="mo"):n=new mathMLTree.MathNode("mo",a),o.mclass==="mbin"?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):o.mclass==="mpunct"?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):o.mclass==="mopen"||o.mclass==="mclose"?(n.attributes.lspace="0em",n.attributes.rspace="0em"):o.mclass==="minner"&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(o,e){var{parser:n,funcName:a}=o,s=e[0];return{type:"mclass",mode:n.mode,mclass:"m"+a.slice(5),body:ordargument(s),isCharacterBox:utils.isCharacterBox(s)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});var binrelClass=o=>{var e=o.type==="ordgroup"&&o.body.length?o.body[0]:o;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(o,e){var{parser:n}=o;return{type:"mclass",mode:n.mode,mclass:binrelClass(e[0]),body:ordargument(e[1]),isCharacterBox:utils.isCharacterBox(e[1])}}});defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(o,e){var{parser:n,funcName:a}=o,s=e[1],l=e[0],c;a!=="\\stackrel"?c=binrelClass(s):c="mrel";var d={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:a!=="\\stackrel",body:ordargument(s)},u={type:"supsub",mode:l.mode,base:d,sup:a==="\\underset"?null:l,sub:a==="\\underset"?l:null};return{type:"mclass",mode:n.mode,mclass:c,body:[u],isCharacterBox:utils.isCharacterBox(u)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(o,e){var{parser:n}=o;return{type:"pmb",mode:n.mode,mclass:binrelClass(e[0]),body:ordargument(e[0])}},htmlBuilder(o,e){var n=buildExpression$1(o.body,e,!0),a=buildCommon.makeSpan([o.mclass],n,e);return a.style.textShadow="0.02em 0.01em 0.04px",a},mathmlBuilder(o,e){var n=buildExpression(o.body,e),a=new mathMLTree.MathNode("mstyle",n);return a.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),a}});var cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=()=>({type:"styling",body:[],mode:"math",style:"display"}),isStartOfArrow=o=>o.type==="textord"&&o.text==="@",isLabelEnd=(o,e)=>(o.type==="mathord"||o.type==="atom")&&o.text===e;function cdArrow(o,e,n){var a=cdArrowFunctionName[o];switch(a){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(a,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var s=n.callFunction("\\\\cdleft",[e[0]],[]),l={type:"atom",text:a,mode:"math",family:"rel"},c=n.callFunction("\\Big",[l],[]),d=n.callFunction("\\\\cdright",[e[1]],[]),u={type:"ordgroup",mode:"math",body:[s,c,d]};return n.callFunction("\\\\cdparent",[u],[])}case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var f={type:"textord",text:"\\Vert",mode:"math"};return n.callFunction("\\Big",[f],[])}default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(o){var e=[];for(o.gullet.beginGroup(),o.gullet.macros.set("\\cr","\\\\\\relax"),o.gullet.beginGroup();;){e.push(o.parseExpression(!1,"\\\\")),o.gullet.endGroup(),o.gullet.beginGroup();var n=o.fetch().text;if(n==="&"||n==="\\\\")o.consume();else if(n==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ParseError("Expected \\\\ or \\cr or \\end",o.nextToken)}for(var a=[],s=[a],l=0;l<e.length;l++){for(var c=e[l],d=newCell(),u=0;u<c.length;u++)if(!isStartOfArrow(c[u]))d.body.push(c[u]);else{a.push(d),u+=1;var f=assertSymbolNodeType(c[u]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(f)>-1))if("<>AV".indexOf(f)>-1)for(var _=0;_<2;_++){for(var b=!0,v=u+1;v<c.length;v++){if(isLabelEnd(c[v],f)){b=!1,u=v;break}if(isStartOfArrow(c[v]))throw new ParseError("Missing a "+f+" character to complete a CD arrow.",c[v]);p[_].body.push(c[v])}if(b)throw new ParseError("Missing a "+f+" character to complete a CD arrow.",c[u])}else throw new ParseError('Expected one of "<>AV=|." after @',c[u]);var k=cdArrow(f,p,o),x={type:"styling",body:[k],mode:"math",style:"display"};a.push(x),d=newCell()}l%2===0?a.push(d):a.shift(),a=[],s.push(a)}o.gullet.endGroup(),o.gullet.endGroup();var M=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:M,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(o,e){var{parser:n,funcName:a}=o;return{type:"cdlabel",mode:n.mode,side:a.slice(4),label:e[0]}},htmlBuilder(o,e){var n=e.havingStyle(e.style.sup()),a=buildCommon.wrapFragment(buildGroup$1(o.label,n,e),e);return a.classes.push("cd-label-"+o.side),a.style.bottom=makeEm(.8-a.depth),a.height=0,a.depth=0,a},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mrow",[buildGroup(o.label,e)]);return n=new mathMLTree.MathNode("mpadded",[n]),n.setAttribute("width","0"),o.side==="left"&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),n=new mathMLTree.MathNode("mstyle",[n]),n.setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}});defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(o,e){var{parser:n}=o;return{type:"cdlabelparent",mode:n.mode,fragment:e[0]}},htmlBuilder(o,e){var n=buildCommon.wrapFragment(buildGroup$1(o.fragment,e),e);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder(o,e){return new mathMLTree.MathNode("mrow",[buildGroup(o.fragment,e)])}});defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(o,e){for(var{parser:n}=o,a=assertNodeType(e[0],"ordgroup"),s=a.body,l="",c=0;c<s.length;c++){var d=assertNodeType(s[c],"textord");l+=d.text}var u=parseInt(l),f;if(isNaN(u))throw new ParseError("\\@char has non-numeric argument "+l);if(u<0||u>=1114111)throw new ParseError("\\@char with invalid code point "+l);return u<=65535?f=String.fromCharCode(u):(u-=65536,f=String.fromCharCode((u>>10)+55296,(u&1023)+56320)),{type:"textord",mode:n.mode,text:f}}});var htmlBuilder$8=(o,e)=>{var n=buildExpression$1(o.body,e.withColor(o.color),!1);return buildCommon.makeFragment(n)},mathmlBuilder$7=(o,e)=>{var n=buildExpression(o.body,e.withColor(o.color)),a=new mathMLTree.MathNode("mstyle",n);return a.setAttribute("mathcolor",o.color),a};defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(o,e){var{parser:n}=o,a=assertNodeType(e[0],"color-token").color,s=e[1];return{type:"color",mode:n.mode,color:a,body:ordargument(s)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(o,e){var{parser:n,breakOnTokenText:a}=o,s=assertNodeType(e[0],"color-token").color;n.gullet.macros.set("\\current@color",s);var l=n.parseExpression(!0,a);return{type:"color",mode:n.mode,color:s,body:l}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(o,e,n){var{parser:a}=o,s=a.gullet.future().text==="["?a.parseSizeGroup(!0):null,l=!a.settings.displayMode||!a.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:a.mode,newLine:l,size:s&&assertNodeType(s,"size").value}},htmlBuilder(o,e){var n=buildCommon.makeSpan(["mspace"],[],e);return o.newLine&&(n.classes.push("newline"),o.size&&(n.style.marginTop=makeEm(calculateSize(o.size,e)))),n},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mspace");return o.newLine&&(n.setAttribute("linebreak","newline"),o.size&&n.setAttribute("height",makeEm(calculateSize(o.size,e)))),n}});var globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=o=>{var e=o.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ParseError("Expected a control sequence",o);return e},getRHS=o=>{var e=o.gullet.popToken();return e.text==="="&&(e=o.gullet.popToken(),e.text===" "&&(e=o.gullet.popToken())),e},letCommand=(o,e,n,a)=>{var s=o.gullet.macros.get(n.text);s==null&&(n.noexpand=!0,s={tokens:[n],numArgs:0,unexpandable:!o.gullet.isExpandable(n.text)}),o.gullet.macros.set(e,s,a)};defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(o){var{parser:e,funcName:n}=o;e.consumeSpaces();var a=e.fetch();if(globalMap[a.text])return(n==="\\global"||n==="\\\\globallong")&&(a.text=globalMap[a.text]),assertNodeType(e.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",a)}});defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o){var{parser:e,funcName:n}=o,a=e.gullet.popToken(),s=a.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new ParseError("Expected a control sequence",a);for(var l=0,c,d=[[]];e.gullet.future().text!=="{";)if(a=e.gullet.popToken(),a.text==="#"){if(e.gullet.future().text==="{"){c=e.gullet.future(),d[l].push("{");break}if(a=e.gullet.popToken(),!/^[1-9]$/.test(a.text))throw new ParseError('Invalid argument number "'+a.text+'"');if(parseInt(a.text)!==l+1)throw new ParseError('Argument number "'+a.text+'" out of order');l++,d.push([])}else{if(a.text==="EOF")throw new ParseError("Expected a macro definition");d[l].push(a.text)}var{tokens:u}=e.gullet.consumeArg();return c&&u.unshift(c),(n==="\\edef"||n==="\\xdef")&&(u=e.gullet.expandTokens(u),u.reverse()),e.gullet.macros.set(s,{tokens:u,numArgs:l,delimiters:d},n===globalMap[n]),{type:"internal",mode:e.mode}}});defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o){var{parser:e,funcName:n}=o,a=checkControlSequence(e.gullet.popToken());e.gullet.consumeSpaces();var s=getRHS(e);return letCommand(e,a,s,n==="\\\\globallet"),{type:"internal",mode:e.mode}}});defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o){var{parser:e,funcName:n}=o,a=checkControlSequence(e.gullet.popToken()),s=e.gullet.popToken(),l=e.gullet.popToken();return letCommand(e,a,l,n==="\\\\globalfuture"),e.gullet.pushToken(l),e.gullet.pushToken(s),{type:"internal",mode:e.mode}}});var getMetrics=function o(e,n,a){var s=symbols.math[e]&&symbols.math[e].replace,l=getCharacterMetrics(s||e,n,a);if(!l)throw new Error("Unsupported symbol "+e+" and font size "+n+".");return l},styleWrap=function o(e,n,a,s){var l=a.havingBaseStyle(n),c=buildCommon.makeSpan(s.concat(l.sizingClasses(a)),[e],a),d=l.sizeMultiplier/a.sizeMultiplier;return c.height*=d,c.depth*=d,c.maxFontSize=l.sizeMultiplier,c},centerSpan=function o(e,n,a){var s=n.havingBaseStyle(a),l=(1-n.sizeMultiplier/s.sizeMultiplier)*n.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=makeEm(l),e.height-=l,e.depth+=l},makeSmallDelim=function o(e,n,a,s,l,c){var d=buildCommon.makeSymbol(e,"Main-Regular",l,s),u=styleWrap(d,n,s,c);return a&&centerSpan(u,s,n),u},mathrmSize=function o(e,n,a,s){return buildCommon.makeSymbol(e,"Size"+n+"-Regular",a,s)},makeLargeDelim=function o(e,n,a,s,l,c){var d=mathrmSize(e,n,l,s),u=styleWrap(buildCommon.makeSpan(["delimsizing","size"+n],[d],s),Style$1.TEXT,s,c);return a&&centerSpan(u,s,Style$1.TEXT),u},makeGlyphSpan=function o(e,n,a){var s;n==="Size1-Regular"?s="delim-size1":s="delim-size4";var l=buildCommon.makeSpan(["delimsizinginner",s],[buildCommon.makeSpan([],[buildCommon.makeSymbol(e,n,a)])]);return{type:"elem",elem:l}},makeInner=function o(e,n,a){var s=fontMetricsData["Size4-Regular"][e.charCodeAt(0)]?fontMetricsData["Size4-Regular"][e.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][e.charCodeAt(0)][4],l=new PathNode("inner",innerPath(e,Math.round(1e3*n))),c=new SvgNode([l],{width:makeEm(s),height:makeEm(n),style:"width:"+makeEm(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*n),preserveAspectRatio:"xMinYMin"}),d=buildCommon.makeSvgSpan([],[c],a);return d.height=n,d.style.height=makeEm(n),d.style.width=makeEm(s),{type:"elem",elem:d}},lapInEms=.008,lap={type:"kern",size:-1*lapInEms},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=function o(e,n,a,s,l,c){var d,u,f,p,_="",b=0;d=f=p=e,u=null;var v="Size1-Regular";e==="\\uparrow"?f=p="⏐":e==="\\Uparrow"?f=p="‖":e==="\\downarrow"?d=f="⏐":e==="\\Downarrow"?d=f="‖":e==="\\updownarrow"?(d="\\uparrow",f="⏐",p="\\downarrow"):e==="\\Updownarrow"?(d="\\Uparrow",f="‖",p="\\Downarrow"):utils.contains(verts,e)?(f="∣",_="vert",b=333):utils.contains(doubleVerts,e)?(f="∥",_="doublevert",b=556):e==="["||e==="\\lbrack"?(d="⎡",f="⎢",p="⎣",v="Size4-Regular",_="lbrack",b=667):e==="]"||e==="\\rbrack"?(d="⎤",f="⎥",p="⎦",v="Size4-Regular",_="rbrack",b=667):e==="\\lfloor"||e==="⌊"?(f=d="⎢",p="⎣",v="Size4-Regular",_="lfloor",b=667):e==="\\lceil"||e==="⌈"?(d="⎡",f=p="⎢",v="Size4-Regular",_="lceil",b=667):e==="\\rfloor"||e==="⌋"?(f=d="⎥",p="⎦",v="Size4-Regular",_="rfloor",b=667):e==="\\rceil"||e==="⌉"?(d="⎤",f=p="⎥",v="Size4-Regular",_="rceil",b=667):e==="("||e==="\\lparen"?(d="⎛",f="⎜",p="⎝",v="Size4-Regular",_="lparen",b=875):e===")"||e==="\\rparen"?(d="⎞",f="⎟",p="⎠",v="Size4-Regular",_="rparen",b=875):e==="\\{"||e==="\\lbrace"?(d="⎧",u="⎨",p="⎩",f="⎪",v="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(d="⎫",u="⎬",p="⎭",f="⎪",v="Size4-Regular"):e==="\\lgroup"||e==="⟮"?(d="⎧",p="⎩",f="⎪",v="Size4-Regular"):e==="\\rgroup"||e==="⟯"?(d="⎫",p="⎭",f="⎪",v="Size4-Regular"):e==="\\lmoustache"||e==="⎰"?(d="⎧",p="⎭",f="⎪",v="Size4-Regular"):(e==="\\rmoustache"||e==="⎱")&&(d="⎫",p="⎩",f="⎪",v="Size4-Regular");var k=getMetrics(d,v,l),x=k.height+k.depth,M=getMetrics(f,v,l),E=M.height+M.depth,L=getMetrics(p,v,l),V=L.height+L.depth,B=0,F=1;if(u!==null){var j=getMetrics(u,v,l);B=j.height+j.depth,F=2}var I=x+V+B,U=Math.max(0,Math.ceil((n-I)/(F*E))),W=I+U*F*E,K=s.fontMetrics().axisHeight;a&&(K*=s.sizeMultiplier);var G=W/2-K,Z=[];if(_.length>0){var oe=W-x-V,Y=Math.round(W*1e3),se=tallDelim(_,Math.round(oe*1e3)),le=new PathNode(_,se),ce=(b/1e3).toFixed(3)+"em",de=(Y/1e3).toFixed(3)+"em",ge=new SvgNode([le],{width:ce,height:de,viewBox:"0 0 "+b+" "+Y}),qe=buildCommon.makeSvgSpan([],[ge],s);qe.height=Y/1e3,qe.style.width=ce,qe.style.height=de,Z.push({type:"elem",elem:qe})}else{if(Z.push(makeGlyphSpan(p,v,l)),Z.push(lap),u===null){var ke=W-x-V+2*lapInEms;Z.push(makeInner(f,ke,s))}else{var Ee=(W-x-V-B)/2+2*lapInEms;Z.push(makeInner(f,Ee,s)),Z.push(lap),Z.push(makeGlyphSpan(u,v,l)),Z.push(lap),Z.push(makeInner(f,Ee,s))}Z.push(lap),Z.push(makeGlyphSpan(d,v,l))}var Oe=s.havingBaseStyle(Style$1.TEXT),Ve=buildCommon.makeVList({positionType:"bottom",positionData:G,children:Z},Oe);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[Ve],Oe),Style$1.TEXT,s,c)},vbPad=80,emPad=.08,sqrtSvg=function o(e,n,a,s,l){var c=sqrtPath(e,s,a),d=new PathNode(e,c),u=new SvgNode([d],{width:"400em",height:makeEm(n),viewBox:"0 0 400000 "+a,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[u],l)},makeSqrtImage=function o(e,n){var a=n.havingBaseSizing(),s=traverseSequence("\\surd",e*a.sizeMultiplier,stackLargeDelimiterSequence,a),l=a.sizeMultiplier,c=Math.max(0,n.minRuleThickness-n.fontMetrics().sqrtRuleThickness),d,u=0,f=0,p=0,_;return s.type==="small"?(p=1e3+1e3*c+vbPad,e<1?l=1:e<1.4&&(l=.7),u=(1+c+emPad)/l,f=(1+c)/l,d=sqrtSvg("sqrtMain",u,p,c,n),d.style.minWidth="0.853em",_=.833/l):s.type==="large"?(p=(1e3+vbPad)*sizeToMaxHeight[s.size],f=(sizeToMaxHeight[s.size]+c)/l,u=(sizeToMaxHeight[s.size]+c+emPad)/l,d=sqrtSvg("sqrtSize"+s.size,u,p,c,n),d.style.minWidth="1.02em",_=1/l):(u=e+c+emPad,f=e+c,p=Math.floor(1e3*e+c)+vbPad,d=sqrtSvg("sqrtTall",u,p,c,n),d.style.minWidth="0.742em",_=1.056),d.height=f,d.style.height=makeEm(u),{span:d,advanceWidth:_,ruleWidth:(n.fontMetrics().sqrtRuleThickness+c)*l}},stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=function o(e,n,a,s,l){if(e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle"),utils.contains(stackLargeDelimiters,e)||utils.contains(stackNeverDelimiters,e))return makeLargeDelim(e,n,!1,a,s,l);if(utils.contains(stackAlwaysDelimiters,e))return makeStackedDelim(e,sizeToMaxHeight[n],!1,a,s,l);throw new ParseError("Illegal delimiter: '"+e+"'")},stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=function o(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},traverseSequence=function o(e,n,a,s){for(var l=Math.min(2,3-s.style.size),c=l;c<a.length&&a[c].type!=="stack";c++){var d=getMetrics(e,delimTypeToFont(a[c]),"math"),u=d.height+d.depth;if(a[c].type==="small"){var f=s.havingBaseStyle(a[c].style);u*=f.sizeMultiplier}if(u>n)return a[c]}return a[a.length-1]},makeCustomSizedDelim=function o(e,n,a,s,l,c){e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle");var d;utils.contains(stackNeverDelimiters,e)?d=stackNeverDelimiterSequence:utils.contains(stackLargeDelimiters,e)?d=stackLargeDelimiterSequence:d=stackAlwaysDelimiterSequence;var u=traverseSequence(e,n,d,s);return u.type==="small"?makeSmallDelim(e,u.style,a,s,l,c):u.type==="large"?makeLargeDelim(e,u.size,a,s,l,c):makeStackedDelim(e,n,a,s,l,c)},makeLeftRightDelim=function o(e,n,a,s,l,c){var d=s.fontMetrics().axisHeight*s.sizeMultiplier,u=901,f=5/s.fontMetrics().ptPerEm,p=Math.max(n-d,a+d),_=Math.max(p/500*u,2*p-f);return makeCustomSizedDelim(e,_,!0,s,l,c)},delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function checkDelimiter(o,e){var n=checkSymbolNodeType(o);if(n&&utils.contains(delimiters,n.text))return n;throw n?new ParseError("Invalid delimiter '"+n.text+"' after '"+e.funcName+"'",o):new ParseError("Invalid delimiter type '"+o.type+"'",o)}defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(o,e)=>{var n=checkDelimiter(e[0],o);return{type:"delimsizing",mode:o.parser.mode,size:delimiterSizes[o.funcName].size,mclass:delimiterSizes[o.funcName].mclass,delim:n.text}},htmlBuilder:(o,e)=>o.delim==="."?buildCommon.makeSpan([o.mclass]):delimiter.sizedDelim(o.delim,o.size,e,o.mode,[o.mclass]),mathmlBuilder:o=>{var e=[];o.delim!=="."&&e.push(makeText(o.delim,o.mode));var n=new mathMLTree.MathNode("mo",e);o.mclass==="mopen"||o.mclass==="mclose"?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var a=makeEm(delimiter.sizeToMaxHeight[o.size]);return n.setAttribute("minsize",a),n.setAttribute("maxsize",a),n}});function assertParsed(o){if(!o.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(o,e)=>{var n=o.parser.gullet.macros.get("\\current@color");if(n&&typeof n!="string")throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:o.parser.mode,delim:checkDelimiter(e[0],o).text,color:n}}});defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(o,e)=>{var n=checkDelimiter(e[0],o),a=o.parser;++a.leftrightDepth;var s=a.parseExpression(!1);--a.leftrightDepth,a.expect("\\right",!1);var l=assertNodeType(a.parseFunction(),"leftright-right");return{type:"leftright",mode:a.mode,body:s,left:n.text,right:l.delim,rightColor:l.color}},htmlBuilder:(o,e)=>{assertParsed(o);for(var n=buildExpression$1(o.body,e,!0,["mopen","mclose"]),a=0,s=0,l=!1,c=0;c<n.length;c++)n[c].isMiddle?l=!0:(a=Math.max(n[c].height,a),s=Math.max(n[c].depth,s));a*=e.sizeMultiplier,s*=e.sizeMultiplier;var d;if(o.left==="."?d=makeNullDelimiter(e,["mopen"]):d=delimiter.leftRightDelim(o.left,a,s,e,o.mode,["mopen"]),n.unshift(d),l)for(var u=1;u<n.length;u++){var f=n[u],p=f.isMiddle;p&&(n[u]=delimiter.leftRightDelim(p.delim,a,s,p.options,o.mode,[]))}var _;if(o.right===".")_=makeNullDelimiter(e,["mclose"]);else{var b=o.rightColor?e.withColor(o.rightColor):e;_=delimiter.leftRightDelim(o.right,a,s,b,o.mode,["mclose"])}return n.push(_),buildCommon.makeSpan(["minner"],n,e)},mathmlBuilder:(o,e)=>{assertParsed(o);var n=buildExpression(o.body,e);if(o.left!=="."){var a=new mathMLTree.MathNode("mo",[makeText(o.left,o.mode)]);a.setAttribute("fence","true"),n.unshift(a)}if(o.right!=="."){var s=new mathMLTree.MathNode("mo",[makeText(o.right,o.mode)]);s.setAttribute("fence","true"),o.rightColor&&s.setAttribute("mathcolor",o.rightColor),n.push(s)}return makeRow(n)}});defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(o,e)=>{var n=checkDelimiter(e[0],o);if(!o.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",n);return{type:"middle",mode:o.parser.mode,delim:n.text}},htmlBuilder:(o,e)=>{var n;if(o.delim===".")n=makeNullDelimiter(e,[]);else{n=delimiter.sizedDelim(o.delim,1,e,o.mode,[]);var a={delim:o.delim,options:e};n.isMiddle=a}return n},mathmlBuilder:(o,e)=>{var n=o.delim==="\\vert"||o.delim==="|"?makeText("|","text"):makeText(o.delim,o.mode),a=new mathMLTree.MathNode("mo",[n]);return a.setAttribute("fence","true"),a.setAttribute("lspace","0.05em"),a.setAttribute("rspace","0.05em"),a}});var htmlBuilder$7=(o,e)=>{var n=buildCommon.wrapFragment(buildGroup$1(o.body,e),e),a=o.label.slice(1),s=e.sizeMultiplier,l,c=0,d=utils.isCharacterBox(o.body);if(a==="sout")l=buildCommon.makeSpan(["stretchy","sout"]),l.height=e.fontMetrics().defaultRuleThickness/s,c=-.5*e.fontMetrics().xHeight;else if(a==="phase"){var u=calculateSize({number:.6,unit:"pt"},e),f=calculateSize({number:.35,unit:"ex"},e),p=e.havingBaseSizing();s=s/p.sizeMultiplier;var _=n.height+n.depth+u+f;n.style.paddingLeft=makeEm(_/2+u);var b=Math.floor(1e3*_*s),v=phasePath(b),k=new SvgNode([new PathNode("phase",v)],{width:"400em",height:makeEm(b/1e3),viewBox:"0 0 400000 "+b,preserveAspectRatio:"xMinYMin slice"});l=buildCommon.makeSvgSpan(["hide-tail"],[k],e),l.style.height=makeEm(_),c=n.depth+u+f}else{/cancel/.test(a)?d||n.classes.push("cancel-pad"):a==="angl"?n.classes.push("anglpad"):n.classes.push("boxpad");var x=0,M=0,E=0;/box/.test(a)?(E=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),x=e.fontMetrics().fboxsep+(a==="colorbox"?0:E),M=x):a==="angl"?(E=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),x=4*E,M=Math.max(0,.25-n.depth)):(x=d?.2:0,M=x),l=stretchy.encloseSpan(n,a,x,M,e),/fbox|boxed|fcolorbox/.test(a)?(l.style.borderStyle="solid",l.style.borderWidth=makeEm(E)):a==="angl"&&E!==.049&&(l.style.borderTopWidth=makeEm(E),l.style.borderRightWidth=makeEm(E)),c=n.depth+M,o.backgroundColor&&(l.style.backgroundColor=o.backgroundColor,o.borderColor&&(l.style.borderColor=o.borderColor))}var L;if(o.backgroundColor)L=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:c},{type:"elem",elem:n,shift:0}]},e);else{var V=/cancel|phase/.test(a)?["svg-align"]:[];L=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:0},{type:"elem",elem:l,shift:c,wrapperClasses:V}]},e)}return/cancel/.test(a)&&(L.height=n.height,L.depth=n.depth),/cancel/.test(a)&&!d?buildCommon.makeSpan(["mord","cancel-lap"],[L],e):buildCommon.makeSpan(["mord"],[L],e)},mathmlBuilder$6=(o,e)=>{var n=0,a=new mathMLTree.MathNode(o.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup(o.body,e)]);switch(o.label){case"\\cancel":a.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":a.setAttribute("notation","downdiagonalstrike");break;case"\\phase":a.setAttribute("notation","phasorangle");break;case"\\sout":a.setAttribute("notation","horizontalstrike");break;case"\\fbox":a.setAttribute("notation","box");break;case"\\angl":a.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,a.setAttribute("width","+"+2*n+"pt"),a.setAttribute("height","+"+2*n+"pt"),a.setAttribute("lspace",n+"pt"),a.setAttribute("voffset",n+"pt"),o.label==="\\fcolorbox"){var s=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);a.setAttribute("style","border: "+s+"em solid "+String(o.borderColor))}break;case"\\xcancel":a.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return o.backgroundColor&&a.setAttribute("mathbackground",o.backgroundColor),a};defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(o,e,n){var{parser:a,funcName:s}=o,l=assertNodeType(e[0],"color-token").color,c=e[1];return{type:"enclose",mode:a.mode,label:s,backgroundColor:l,body:c}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(o,e,n){var{parser:a,funcName:s}=o,l=assertNodeType(e[0],"color-token").color,c=assertNodeType(e[1],"color-token").color,d=e[2];return{type:"enclose",mode:a.mode,label:s,backgroundColor:c,borderColor:l,body:d}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(o,e){var{parser:n}=o;return{type:"enclose",mode:n.mode,label:"\\fbox",body:e[0]}}});defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(o,e){var{parser:n,funcName:a}=o,s=e[0];return{type:"enclose",mode:n.mode,label:a,body:s}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(o,e){var{parser:n}=o;return{type:"enclose",mode:n.mode,label:"\\angl",body:e[0]}}});var _environments={};function defineEnvironment(o){for(var{type:e,names:n,props:a,handler:s,htmlBuilder:l,mathmlBuilder:c}=o,d={type:e,numArgs:a.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},u=0;u<n.length;++u)_environments[n[u]]=d;l&&(_htmlGroupBuilders[e]=l),c&&(_mathmlGroupBuilders[e]=c)}var _macros={};function defineMacro(o,e){_macros[o]=e}function getHLines(o){var e=[];o.consumeSpaces();var n=o.fetch().text;for(n==="\\relax"&&(o.consume(),o.consumeSpaces(),n=o.fetch().text);n==="\\hline"||n==="\\hdashline";)o.consume(),e.push(n==="\\hdashline"),o.consumeSpaces(),n=o.fetch().text;return e}var validateAmsEnvironmentContext=o=>{var e=o.parser.settings;if(!e.displayMode)throw new ParseError("{"+o.envName+"} can be used only in display mode.")};function getAutoTag(o){if(o.indexOf("ed")===-1)return o.indexOf("*")===-1}function parseArray(o,e,n){var{hskipBeforeAndAfter:a,addJot:s,cols:l,arraystretch:c,colSeparationType:d,autoTag:u,singleRow:f,emptySingleRow:p,maxNumCols:_,leqno:b}=e;if(o.gullet.beginGroup(),f||o.gullet.macros.set("\\cr","\\\\\\relax"),!c){var v=o.gullet.expandMacroAsText("\\arraystretch");if(v==null)c=1;else if(c=parseFloat(v),!c||c<0)throw new ParseError("Invalid \\arraystretch: "+v)}o.gullet.beginGroup();var k=[],x=[k],M=[],E=[],L=u!=null?[]:void 0;function V(){u&&o.gullet.macros.set("\\@eqnsw","1",!0)}function B(){L&&(o.gullet.macros.get("\\df@tag")?(L.push(o.subparse([new Token("\\df@tag")])),o.gullet.macros.set("\\df@tag",void 0,!0)):L.push(!!u&&o.gullet.macros.get("\\@eqnsw")==="1"))}for(V(),E.push(getHLines(o));;){var F=o.parseExpression(!1,f?"\\end":"\\\\");o.gullet.endGroup(),o.gullet.beginGroup(),F={type:"ordgroup",mode:o.mode,body:F},n&&(F={type:"styling",mode:o.mode,style:n,body:[F]}),k.push(F);var j=o.fetch().text;if(j==="&"){if(_&&k.length===_){if(f||d)throw new ParseError("Too many tab characters: &",o.nextToken);o.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}o.consume()}else if(j==="\\end"){B(),k.length===1&&F.type==="styling"&&F.body[0].body.length===0&&(x.length>1||!p)&&x.pop(),E.length<x.length+1&&E.push([]);break}else if(j==="\\\\"){o.consume();var I=void 0;o.gullet.future().text!==" "&&(I=o.parseSizeGroup(!0)),M.push(I?I.value:null),B(),E.push(getHLines(o)),k=[],x.push(k),V()}else throw new ParseError("Expected & or \\\\ or \\cr or \\end",o.nextToken)}return o.gullet.endGroup(),o.gullet.endGroup(),{type:"array",mode:o.mode,addJot:s,arraystretch:c,body:x,cols:l,rowGaps:M,hskipBeforeAndAfter:a,hLinesBeforeRow:E,colSeparationType:d,tags:L,leqno:b}}function dCellStyle(o){return o.slice(0,1)==="d"?"display":"text"}var htmlBuilder$6=function o(e,n){var a,s,l=e.body.length,c=e.hLinesBeforeRow,d=0,u=new Array(l),f=[],p=Math.max(n.fontMetrics().arrayRuleWidth,n.minRuleThickness),_=1/n.fontMetrics().ptPerEm,b=5*_;if(e.colSeparationType&&e.colSeparationType==="small"){var v=n.havingStyle(Style$1.SCRIPT).sizeMultiplier;b=.2778*(v/n.sizeMultiplier)}var k=e.colSeparationType==="CD"?calculateSize({number:3,unit:"ex"},n):12*_,x=3*_,M=e.arraystretch*k,E=.7*M,L=.3*M,V=0;function B(ee){for(var re=0;re<ee.length;++re)re>0&&(V+=.25),f.push({pos:V,isDashed:ee[re]})}for(B(c[0]),a=0;a<e.body.length;++a){var F=e.body[a],j=E,I=L;d<F.length&&(d=F.length);var U=new Array(F.length);for(s=0;s<F.length;++s){var W=buildGroup$1(F[s],n);I<W.depth&&(I=W.depth),j<W.height&&(j=W.height),U[s]=W}var K=e.rowGaps[a],G=0;K&&(G=calculateSize(K,n),G>0&&(G+=L,I<G&&(I=G),G=0)),e.addJot&&(I+=x),U.height=j,U.depth=I,V+=j,U.pos=V,V+=I+G,u[a]=U,B(c[a+1])}var Z=V/2+n.fontMetrics().axisHeight,oe=e.cols||[],Y=[],se,le,ce=[];if(e.tags&&e.tags.some(ee=>ee))for(a=0;a<l;++a){var de=u[a],ge=de.pos-Z,qe=e.tags[a],ke=void 0;qe===!0?ke=buildCommon.makeSpan(["eqn-num"],[],n):qe===!1?ke=buildCommon.makeSpan([],[],n):ke=buildCommon.makeSpan([],buildExpression$1(qe,n,!0),n),ke.depth=de.depth,ke.height=de.height,ce.push({type:"elem",elem:ke,shift:ge})}for(s=0,le=0;s<d||le<oe.length;++s,++le){for(var Ee=oe[le]||{},Oe=!0;Ee.type==="separator";){if(Oe||(se=buildCommon.makeSpan(["arraycolsep"],[]),se.style.width=makeEm(n.fontMetrics().doubleRuleSep),Y.push(se)),Ee.separator==="|"||Ee.separator===":"){var Ve=Ee.separator==="|"?"solid":"dashed",Ne=buildCommon.makeSpan(["vertical-separator"],[],n);Ne.style.height=makeEm(V),Ne.style.borderRightWidth=makeEm(p),Ne.style.borderRightStyle=Ve,Ne.style.margin="0 "+makeEm(-p/2);var dt=V-Z;dt&&(Ne.style.verticalAlign=makeEm(-dt)),Y.push(Ne)}else throw new ParseError("Invalid separator type: "+Ee.separator);le++,Ee=oe[le]||{},Oe=!1}if(!(s>=d)){var pe=void 0;(s>0||e.hskipBeforeAndAfter)&&(pe=utils.deflt(Ee.pregap,b),pe!==0&&(se=buildCommon.makeSpan(["arraycolsep"],[]),se.style.width=makeEm(pe),Y.push(se)));var fe=[];for(a=0;a<l;++a){var me=u[a],te=me[s];if(te){var ue=me.pos-Z;te.depth=me.depth,te.height=me.height,fe.push({type:"elem",elem:te,shift:ue})}}fe=buildCommon.makeVList({positionType:"individualShift",children:fe},n),fe=buildCommon.makeSpan(["col-align-"+(Ee.align||"c")],[fe]),Y.push(fe),(s<d-1||e.hskipBeforeAndAfter)&&(pe=utils.deflt(Ee.postgap,b),pe!==0&&(se=buildCommon.makeSpan(["arraycolsep"],[]),se.style.width=makeEm(pe),Y.push(se)))}}if(u=buildCommon.makeSpan(["mtable"],Y),f.length>0){for(var we=buildCommon.makeLineSpan("hline",n,p),_e=buildCommon.makeLineSpan("hdashline",n,p),Be=[{type:"elem",elem:u,shift:0}];f.length>0;){var Ge=f.pop(),ze=Ge.pos-Z;Ge.isDashed?Be.push({type:"elem",elem:_e,shift:ze}):Be.push({type:"elem",elem:we,shift:ze})}u=buildCommon.makeVList({positionType:"individualShift",children:Be},n)}if(ce.length===0)return buildCommon.makeSpan(["mord"],[u],n);var We=buildCommon.makeVList({positionType:"individualShift",children:ce},n);return We=buildCommon.makeSpan(["tag"],[We],n),buildCommon.makeFragment([u,We])},alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=function o(e,n){for(var a=[],s=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),l=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),c=0;c<e.body.length;c++){for(var d=e.body[c],u=[],f=0;f<d.length;f++)u.push(new mathMLTree.MathNode("mtd",[buildGroup(d[f],n)]));e.tags&&e.tags[c]&&(u.unshift(s),u.push(s),e.leqno?u.unshift(l):u.push(l)),a.push(new mathMLTree.MathNode("mtr",u))}var p=new mathMLTree.MathNode("mtable",a),_=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",makeEm(_));var b="",v="";if(e.cols&&e.cols.length>0){var k=e.cols,x="",M=!1,E=0,L=k.length;k[0].type==="separator"&&(b+="top ",E=1),k[k.length-1].type==="separator"&&(b+="bottom ",L-=1);for(var V=E;V<L;V++)k[V].type==="align"?(v+=alignMap[k[V].align],M&&(x+="none "),M=!0):k[V].type==="separator"&&M&&(x+=k[V].separator==="|"?"solid ":"dashed ",M=!1);p.setAttribute("columnalign",v.trim()),/[sd]/.test(x)&&p.setAttribute("columnlines",x.trim())}if(e.colSeparationType==="align"){for(var B=e.cols||[],F="",j=1;j<B.length;j++)F+=j%2?"0em ":"1em ";p.setAttribute("columnspacing",F.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var I="",U=e.hLinesBeforeRow;b+=U[0].length>0?"left ":"",b+=U[U.length-1].length>0?"right ":"";for(var W=1;W<U.length-1;W++)I+=U[W].length===0?"none ":U[W][0]?"dashed ":"solid ";return/[sd]/.test(I)&&p.setAttribute("rowlines",I.trim()),b!==""&&(p=new mathMLTree.MathNode("menclose",[p]),p.setAttribute("notation",b.trim())),e.arraystretch&&e.arraystretch<1&&(p=new mathMLTree.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},alignedHandler=function o(e,n){e.envName.indexOf("ed")===-1&&validateAmsEnvironmentContext(e);var a=[],s=e.envName.indexOf("at")>-1?"alignat":"align",l=e.envName==="split",c=parseArray(e.parser,{cols:a,addJot:!0,autoTag:l?void 0:getAutoTag(e.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:l?2:void 0,leqno:e.parser.settings.leqno},"display"),d,u=0,f={type:"ordgroup",mode:e.mode,body:[]};if(n[0]&&n[0].type==="ordgroup"){for(var p="",_=0;_<n[0].body.length;_++){var b=assertNodeType(n[0].body[_],"textord");p+=b.text}d=Number(p),u=d*2}var v=!u;c.body.forEach(function(E){for(var L=1;L<E.length;L+=2){var V=assertNodeType(E[L],"styling"),B=assertNodeType(V.body[0],"ordgroup");B.body.unshift(f)}if(v)u<E.length&&(u=E.length);else{var F=E.length/2;if(d<F)throw new ParseError("Too many math in a row: "+("expected "+d+", but got "+F),E[0])}});for(var k=0;k<u;++k){var x="r",M=0;k%2===1?x="l":k>0&&v&&(M=1),a[k]={type:"align",align:x,pregap:M,postgap:0}}return c.colSeparationType=v?"align":"alignat",c};defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(o,e){var n=checkSymbolNodeType(e[0]),a=n?[e[0]]:assertNodeType(e[0],"ordgroup").body,s=a.map(function(c){var d=assertSymbolNodeType(c),u=d.text;if("lcr".indexOf(u)!==-1)return{type:"align",align:u};if(u==="|")return{type:"separator",separator:"|"};if(u===":")return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+u,c)}),l={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return parseArray(o.parser,l,dCellStyle(o.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(o){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[o.envName.replace("*","")],n="c",a={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if(o.envName.charAt(o.envName.length-1)==="*"){var s=o.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),n=s.fetch().text,"lcr".indexOf(n)===-1)throw new ParseError("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),a.cols=[{type:"align",align:n}]}}var l=parseArray(o.parser,a,dCellStyle(o.envName)),c=Math.max(0,...l.body.map(d=>d.length));return l.cols=new Array(c).fill({type:"align",align:n}),e?{type:"leftright",mode:o.mode,body:[l],left:e[0],right:e[1],rightColor:void 0}:l},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(o){var e={arraystretch:.5},n=parseArray(o.parser,e,"script");return n.colSeparationType="small",n},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(o,e){var n=checkSymbolNodeType(e[0]),a=n?[e[0]]:assertNodeType(e[0],"ordgroup").body,s=a.map(function(c){var d=assertSymbolNodeType(c),u=d.text;if("lc".indexOf(u)!==-1)return{type:"align",align:u};throw new ParseError("Unknown column alignment: "+u,c)});if(s.length>1)throw new ParseError("{subarray} can contain only one column");var l={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(l=parseArray(o.parser,l,"script"),l.body.length>0&&l.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return l},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(o){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},n=parseArray(o.parser,e,dCellStyle(o.envName));return{type:"leftright",mode:o.mode,body:[n],left:o.envName.indexOf("r")>-1?".":"\\{",right:o.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(o){utils.contains(["gather","gather*"],o.envName)&&validateAmsEnvironmentContext(o);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(o.envName),emptySingleRow:!0,leqno:o.parser.settings.leqno};return parseArray(o.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(o){validateAmsEnvironmentContext(o);var e={autoTag:getAutoTag(o.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:o.parser.settings.leqno};return parseArray(o.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler(o){return validateAmsEnvironmentContext(o),parseCD(o.parser)},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineMacro("\\nonumber","\\gdef\\@eqnsw{0}");defineMacro("\\notag","\\nonumber");defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(o,e){throw new ParseError(o.funcName+" valid only within array environment")}});var environments=_environments;defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(o,e){var{parser:n,funcName:a}=o,s=e[0];if(s.type!=="ordgroup")throw new ParseError("Invalid environment name",s);for(var l="",c=0;c<s.body.length;++c)l+=assertNodeType(s.body[c],"textord").text;if(a==="\\begin"){if(!environments.hasOwnProperty(l))throw new ParseError("No such environment: "+l,s);var d=environments[l],{args:u,optArgs:f}=n.parseArguments("\\begin{"+l+"}",d),p={mode:n.mode,envName:l,parser:n},_=d.handler(p,u,f);n.expect("\\end",!1);var b=n.nextToken,v=assertNodeType(n.parseFunction(),"environment");if(v.name!==l)throw new ParseError("Mismatch: \\begin{"+l+"} matched by \\end{"+v.name+"}",b);return _}return{type:"environment",mode:n.mode,name:l,nameGroup:s}}});var htmlBuilder$5=(o,e)=>{var n=o.font,a=e.withFont(n);return buildGroup$1(o.body,a)},mathmlBuilder$4=(o,e)=>{var n=o.font,a=e.withFont(n);return buildGroup(o.body,a)},fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=normalizeArgument(e[0]),l=a;return l in fontAliases&&(l=fontAliases[l]),{type:"font",mode:n.mode,font:l.slice(1),body:s}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(o,e)=>{var{parser:n}=o,a=e[0],s=utils.isCharacterBox(a);return{type:"mclass",mode:n.mode,mclass:binrelClass(a),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:a}],isCharacterBox:s}}});defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(o,e)=>{var{parser:n,funcName:a,breakOnTokenText:s}=o,{mode:l}=n,c=n.parseExpression(!0,s),d="math"+a.slice(1);return{type:"font",mode:l,font:d,body:{type:"ordgroup",mode:n.mode,body:c}}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});var adjustStyle=(o,e)=>{var n=e;return o==="display"?n=n.id>=Style$1.SCRIPT.id?n.text():Style$1.DISPLAY:o==="text"&&n.size===Style$1.DISPLAY.size?n=Style$1.TEXT:o==="script"?n=Style$1.SCRIPT:o==="scriptscript"&&(n=Style$1.SCRIPTSCRIPT),n},htmlBuilder$4=(o,e)=>{var n=adjustStyle(o.size,e.style),a=n.fracNum(),s=n.fracDen(),l;l=e.havingStyle(a);var c=buildGroup$1(o.numer,l,e);if(o.continued){var d=8.5/e.fontMetrics().ptPerEm,u=3.5/e.fontMetrics().ptPerEm;c.height=c.height<d?d:c.height,c.depth=c.depth<u?u:c.depth}l=e.havingStyle(s);var f=buildGroup$1(o.denom,l,e),p,_,b;o.hasBarLine?(o.barSize?(_=calculateSize(o.barSize,e),p=buildCommon.makeLineSpan("frac-line",e,_)):p=buildCommon.makeLineSpan("frac-line",e),_=p.height,b=p.height):(p=null,_=0,b=e.fontMetrics().defaultRuleThickness);var v,k,x;n.size===Style$1.DISPLAY.size||o.size==="display"?(v=e.fontMetrics().num1,_>0?k=3*b:k=7*b,x=e.fontMetrics().denom1):(_>0?(v=e.fontMetrics().num2,k=b):(v=e.fontMetrics().num3,k=3*b),x=e.fontMetrics().denom2);var M;if(p){var L=e.fontMetrics().axisHeight;v-c.depth-(L+.5*_)<k&&(v+=k-(v-c.depth-(L+.5*_))),L-.5*_-(f.height-x)<k&&(x+=k-(L-.5*_-(f.height-x)));var V=-(L-.5*_);M=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:x},{type:"elem",elem:p,shift:V},{type:"elem",elem:c,shift:-v}]},e)}else{var E=v-c.depth-(f.height-x);E<k&&(v+=.5*(k-E),x+=.5*(k-E)),M=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:x},{type:"elem",elem:c,shift:-v}]},e)}l=e.havingStyle(n),M.height*=l.sizeMultiplier/e.sizeMultiplier,M.depth*=l.sizeMultiplier/e.sizeMultiplier;var B;n.size===Style$1.DISPLAY.size?B=e.fontMetrics().delim1:n.size===Style$1.SCRIPTSCRIPT.size?B=e.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:B=e.fontMetrics().delim2;var F,j;return o.leftDelim==null?F=makeNullDelimiter(e,["mopen"]):F=delimiter.customSizedDelim(o.leftDelim,B,!0,e.havingStyle(n),o.mode,["mopen"]),o.continued?j=buildCommon.makeSpan([]):o.rightDelim==null?j=makeNullDelimiter(e,["mclose"]):j=delimiter.customSizedDelim(o.rightDelim,B,!0,e.havingStyle(n),o.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(l.sizingClasses(e)),[F,buildCommon.makeSpan(["mfrac"],[M]),j],e)},mathmlBuilder$3=(o,e)=>{var n=new mathMLTree.MathNode("mfrac",[buildGroup(o.numer,e),buildGroup(o.denom,e)]);if(!o.hasBarLine)n.setAttribute("linethickness","0px");else if(o.barSize){var a=calculateSize(o.barSize,e);n.setAttribute("linethickness",makeEm(a))}var s=adjustStyle(o.size,e.style);if(s.size!==e.style.size){n=new mathMLTree.MathNode("mstyle",[n]);var l=s.size===Style$1.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",l),n.setAttribute("scriptlevel","0")}if(o.leftDelim!=null||o.rightDelim!=null){var c=[];if(o.leftDelim!=null){var d=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(o.leftDelim.replace("\\",""))]);d.setAttribute("fence","true"),c.push(d)}if(c.push(n),o.rightDelim!=null){var u=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(o.rightDelim.replace("\\",""))]);u.setAttribute("fence","true"),c.push(u)}return makeRow(c)}return n};defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=e[0],l=e[1],c,d=null,u=null,f="auto";switch(a){case"\\dfrac":case"\\frac":case"\\tfrac":c=!0;break;case"\\\\atopfrac":c=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":c=!1,d="(",u=")";break;case"\\\\bracefrac":c=!1,d="\\{",u="\\}";break;case"\\\\brackfrac":c=!1,d="[",u="]";break;default:throw new Error("Unrecognized genfrac command")}switch(a){case"\\dfrac":case"\\dbinom":f="display";break;case"\\tfrac":case"\\tbinom":f="text";break}return{type:"genfrac",mode:n.mode,continued:!1,numer:s,denom:l,hasBarLine:c,leftDelim:d,rightDelim:u,size:f,barSize:null}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=e[0],l=e[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:s,denom:l,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(o){var{parser:e,funcName:n,token:a}=o,s;switch(n){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:s,token:a}}});var stylArray=["display","text","script","scriptscript"],delimFromValue=function o(e){var n=null;return e.length>0&&(n=e,n=n==="."?null:n),n};defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(o,e){var{parser:n}=o,a=e[4],s=e[5],l=normalizeArgument(e[0]),c=l.type==="atom"&&l.family==="open"?delimFromValue(l.text):null,d=normalizeArgument(e[1]),u=d.type==="atom"&&d.family==="close"?delimFromValue(d.text):null,f=assertNodeType(e[2],"size"),p,_=null;f.isBlank?p=!0:(_=f.value,p=_.number>0);var b="auto",v=e[3];if(v.type==="ordgroup"){if(v.body.length>0){var k=assertNodeType(v.body[0],"textord");b=stylArray[Number(k.text)]}}else v=assertNodeType(v,"textord"),b=stylArray[Number(v.text)];return{type:"genfrac",mode:n.mode,numer:a,denom:s,continued:!1,hasBarLine:p,barSize:_,leftDelim:c,rightDelim:u,size:b}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(o,e){var{parser:n,funcName:a,token:s}=o;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(e[0],"size").value,token:s}}});defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=e[0],l=assert(assertNodeType(e[1],"infix").size),c=e[2],d=l.number>0;return{type:"genfrac",mode:n.mode,numer:s,denom:c,continued:!1,hasBarLine:d,barSize:l,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});var htmlBuilder$3=(o,e)=>{var n=e.style,a,s;o.type==="supsub"?(a=o.sup?buildGroup$1(o.sup,e.havingStyle(n.sup()),e):buildGroup$1(o.sub,e.havingStyle(n.sub()),e),s=assertNodeType(o.base,"horizBrace")):s=assertNodeType(o,"horizBrace");var l=buildGroup$1(s.base,e.havingBaseStyle(Style$1.DISPLAY)),c=stretchy.svgSpan(s,e),d;if(s.isOver?(d=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.1},{type:"elem",elem:c}]},e),d.children[0].children[0].children[1].classes.push("svg-align")):(d=buildCommon.makeVList({positionType:"bottom",positionData:l.depth+.1+c.height,children:[{type:"elem",elem:c},{type:"kern",size:.1},{type:"elem",elem:l}]},e),d.children[0].children[0].children[0].classes.push("svg-align")),a){var u=buildCommon.makeSpan(["mord",s.isOver?"mover":"munder"],[d],e);s.isOver?d=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:u},{type:"kern",size:.2},{type:"elem",elem:a}]},e):d=buildCommon.makeVList({positionType:"bottom",positionData:u.depth+.2+a.height+a.depth,children:[{type:"elem",elem:a},{type:"kern",size:.2},{type:"elem",elem:u}]},e)}return buildCommon.makeSpan(["mord",s.isOver?"mover":"munder"],[d],e)},mathmlBuilder$2=(o,e)=>{var n=stretchy.mathMLnode(o.label);return new mathMLTree.MathNode(o.isOver?"mover":"munder",[buildGroup(o.base,e),n])};defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(o,e){var{parser:n,funcName:a}=o;return{type:"horizBrace",mode:n.mode,label:a,isOver:/^\\over/.test(a),base:e[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2});defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(o,e)=>{var{parser:n}=o,a=e[1],s=assertNodeType(e[0],"url").url;return n.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:n.mode,href:s,body:ordargument(a)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(o,e)=>{var n=buildExpression$1(o.body,e,!1);return buildCommon.makeAnchor(o.href,[],n,e)},mathmlBuilder:(o,e)=>{var n=buildExpressionRow(o.body,e);return n instanceof MathNode||(n=new MathNode("mrow",[n])),n.setAttribute("href",o.href),n}});defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(o,e)=>{var{parser:n}=o,a=assertNodeType(e[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:a}))return n.formatUnsupportedCmd("\\url");for(var s=[],l=0;l<a.length;l++){var c=a[l];c==="~"&&(c="\\textasciitilde"),s.push({type:"textord",mode:"text",text:c})}var d={type:"text",mode:n.mode,font:"\\texttt",body:s};return{type:"href",mode:n.mode,href:a,body:ordargument(d)}}});defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(o,e){var{parser:n}=o;return{type:"hbox",mode:n.mode,body:ordargument(e[0])}},htmlBuilder(o,e){var n=buildExpression$1(o.body,e,!1);return buildCommon.makeFragment(n)},mathmlBuilder(o,e){return new mathMLTree.MathNode("mrow",buildExpression(o.body,e))}});defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(o,e)=>{var{parser:n,funcName:a,token:s}=o,l=assertNodeType(e[0],"raw").string,c=e[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var d,u={};switch(a){case"\\htmlClass":u.class=l,d={command:"\\htmlClass",class:l};break;case"\\htmlId":u.id=l,d={command:"\\htmlId",id:l};break;case"\\htmlStyle":u.style=l,d={command:"\\htmlStyle",style:l};break;case"\\htmlData":{for(var f=l.split(","),p=0;p<f.length;p++){var _=f[p].split("=");if(_.length!==2)throw new ParseError("Error parsing key-value for \\htmlData");u["data-"+_[0].trim()]=_[1].trim()}d={command:"\\htmlData",attributes:u};break}default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(d)?{type:"html",mode:n.mode,attributes:u,body:ordargument(c)}:n.formatUnsupportedCmd(a)},htmlBuilder:(o,e)=>{var n=buildExpression$1(o.body,e,!1),a=["enclosing"];o.attributes.class&&a.push(...o.attributes.class.trim().split(/\s+/));var s=buildCommon.makeSpan(a,n,e);for(var l in o.attributes)l!=="class"&&o.attributes.hasOwnProperty(l)&&s.setAttribute(l,o.attributes[l]);return s},mathmlBuilder:(o,e)=>buildExpressionRow(o.body,e)});defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(o,e)=>{var{parser:n}=o;return{type:"htmlmathml",mode:n.mode,html:ordargument(e[0]),mathml:ordargument(e[1])}},htmlBuilder:(o,e)=>{var n=buildExpression$1(o.html,e,!1);return buildCommon.makeFragment(n)},mathmlBuilder:(o,e)=>buildExpressionRow(o.mathml,e)});var sizeData=function o(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!n)throw new ParseError("Invalid size: '"+e+"' in \\includegraphics");var a={number:+(n[1]+n[2]),unit:n[3]};if(!validUnit(a))throw new ParseError("Invalid unit: '"+a.unit+"' in \\includegraphics.");return a};defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(o,e,n)=>{var{parser:a}=o,s={number:0,unit:"em"},l={number:.9,unit:"em"},c={number:0,unit:"em"},d="";if(n[0])for(var u=assertNodeType(n[0],"raw").string,f=u.split(","),p=0;p<f.length;p++){var _=f[p].split("=");if(_.length===2){var b=_[1].trim();switch(_[0].trim()){case"alt":d=b;break;case"width":s=sizeData(b);break;case"height":l=sizeData(b);break;case"totalheight":c=sizeData(b);break;default:throw new ParseError("Invalid key: '"+_[0]+"' in \\includegraphics.")}}}var v=assertNodeType(e[0],"url").url;return d===""&&(d=v,d=d.replace(/^.*[\\/]/,""),d=d.substring(0,d.lastIndexOf("."))),a.settings.isTrusted({command:"\\includegraphics",url:v})?{type:"includegraphics",mode:a.mode,alt:d,width:s,height:l,totalheight:c,src:v}:a.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(o,e)=>{var n=calculateSize(o.height,e),a=0;o.totalheight.number>0&&(a=calculateSize(o.totalheight,e)-n);var s=0;o.width.number>0&&(s=calculateSize(o.width,e));var l={height:makeEm(n+a)};s>0&&(l.width=makeEm(s)),a>0&&(l.verticalAlign=makeEm(-a));var c=new Img(o.src,o.alt,l);return c.height=n,c.depth=a,c},mathmlBuilder:(o,e)=>{var n=new mathMLTree.MathNode("mglyph",[]);n.setAttribute("alt",o.alt);var a=calculateSize(o.height,e),s=0;if(o.totalheight.number>0&&(s=calculateSize(o.totalheight,e)-a,n.setAttribute("valign",makeEm(-s))),n.setAttribute("height",makeEm(a+s)),o.width.number>0){var l=calculateSize(o.width,e);n.setAttribute("width",makeEm(l))}return n.setAttribute("src",o.src),n}});defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(o,e){var{parser:n,funcName:a}=o,s=assertNodeType(e[0],"size");if(n.settings.strict){var l=a[1]==="m",c=s.value.unit==="mu";l?(c||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" supports only mu units, "+("not "+s.value.unit+" units")),n.mode!=="math"&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" works only in math mode")):c&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:s.value}},htmlBuilder(o,e){return buildCommon.makeGlue(o.dimension,e)},mathmlBuilder(o,e){var n=calculateSize(o.dimension,e);return new mathMLTree.SpaceNode(n)}});defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=e[0];return{type:"lap",mode:n.mode,alignment:a.slice(5),body:s}},htmlBuilder:(o,e)=>{var n;o.alignment==="clap"?(n=buildCommon.makeSpan([],[buildGroup$1(o.body,e)]),n=buildCommon.makeSpan(["inner"],[n],e)):n=buildCommon.makeSpan(["inner"],[buildGroup$1(o.body,e)]);var a=buildCommon.makeSpan(["fix"],[]),s=buildCommon.makeSpan([o.alignment],[n,a],e),l=buildCommon.makeSpan(["strut"]);return l.style.height=makeEm(s.height+s.depth),s.depth&&(l.style.verticalAlign=makeEm(-s.depth)),s.children.unshift(l),s=buildCommon.makeSpan(["thinbox"],[s],e),buildCommon.makeSpan(["mord","vbox"],[s],e)},mathmlBuilder:(o,e)=>{var n=new mathMLTree.MathNode("mpadded",[buildGroup(o.body,e)]);if(o.alignment!=="rlap"){var a=o.alignment==="llap"?"-1":"-0.5";n.setAttribute("lspace",a+"width")}return n.setAttribute("width","0px"),n}});defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(o,e){var{funcName:n,parser:a}=o,s=a.mode;a.switchMode("math");var l=n==="\\("?"\\)":"$",c=a.parseExpression(!1,l);return a.expect(l),a.switchMode(s),{type:"styling",mode:a.mode,style:"text",body:c}}});defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(o,e){throw new ParseError("Mismatched "+o.funcName)}});var chooseMathStyle=(o,e)=>{switch(e.style.size){case Style$1.DISPLAY.size:return o.display;case Style$1.TEXT.size:return o.text;case Style$1.SCRIPT.size:return o.script;case Style$1.SCRIPTSCRIPT.size:return o.scriptscript;default:return o.text}};defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(o,e)=>{var{parser:n}=o;return{type:"mathchoice",mode:n.mode,display:ordargument(e[0]),text:ordargument(e[1]),script:ordargument(e[2]),scriptscript:ordargument(e[3])}},htmlBuilder:(o,e)=>{var n=chooseMathStyle(o,e),a=buildExpression$1(n,e,!1);return buildCommon.makeFragment(a)},mathmlBuilder:(o,e)=>{var n=chooseMathStyle(o,e);return buildExpressionRow(n,e)}});var assembleSupSub=(o,e,n,a,s,l,c)=>{o=buildCommon.makeSpan([],[o]);var d=n&&utils.isCharacterBox(n),u,f;if(e){var p=buildGroup$1(e,a.havingStyle(s.sup()),a);f={elem:p,kern:Math.max(a.fontMetrics().bigOpSpacing1,a.fontMetrics().bigOpSpacing3-p.depth)}}if(n){var _=buildGroup$1(n,a.havingStyle(s.sub()),a);u={elem:_,kern:Math.max(a.fontMetrics().bigOpSpacing2,a.fontMetrics().bigOpSpacing4-_.height)}}var b;if(f&&u){var v=a.fontMetrics().bigOpSpacing5+u.elem.height+u.elem.depth+u.kern+o.depth+c;b=buildCommon.makeVList({positionType:"bottom",positionData:v,children:[{type:"kern",size:a.fontMetrics().bigOpSpacing5},{type:"elem",elem:u.elem,marginLeft:makeEm(-l)},{type:"kern",size:u.kern},{type:"elem",elem:o},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:makeEm(l)},{type:"kern",size:a.fontMetrics().bigOpSpacing5}]},a)}else if(u){var k=o.height-c;b=buildCommon.makeVList({positionType:"top",positionData:k,children:[{type:"kern",size:a.fontMetrics().bigOpSpacing5},{type:"elem",elem:u.elem,marginLeft:makeEm(-l)},{type:"kern",size:u.kern},{type:"elem",elem:o}]},a)}else if(f){var x=o.depth+c;b=buildCommon.makeVList({positionType:"bottom",positionData:x,children:[{type:"elem",elem:o},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:makeEm(l)},{type:"kern",size:a.fontMetrics().bigOpSpacing5}]},a)}else return o;var M=[b];if(u&&l!==0&&!d){var E=buildCommon.makeSpan(["mspace"],[],a);E.style.marginRight=makeEm(l),M.unshift(E)}return buildCommon.makeSpan(["mop","op-limits"],M,a)},noSuccessor=["\\smallint"],htmlBuilder$2=(o,e)=>{var n,a,s=!1,l;o.type==="supsub"?(n=o.sup,a=o.sub,l=assertNodeType(o.base,"op"),s=!0):l=assertNodeType(o,"op");var c=e.style,d=!1;c.size===Style$1.DISPLAY.size&&l.symbol&&!utils.contains(noSuccessor,l.name)&&(d=!0);var u;if(l.symbol){var f=d?"Size2-Regular":"Size1-Regular",p="";if((l.name==="\\oiint"||l.name==="\\oiiint")&&(p=l.name.slice(1),l.name=p==="oiint"?"\\iint":"\\iiint"),u=buildCommon.makeSymbol(l.name,f,"math",e,["mop","op-symbol",d?"large-op":"small-op"]),p.length>0){var _=u.italic,b=buildCommon.staticSvg(p+"Size"+(d?"2":"1"),e);u=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:0},{type:"elem",elem:b,shift:d?.08:0}]},e),l.name="\\"+p,u.classes.unshift("mop"),u.italic=_}}else if(l.body){var v=buildExpression$1(l.body,e,!0);v.length===1&&v[0]instanceof SymbolNode?(u=v[0],u.classes[0]="mop"):u=buildCommon.makeSpan(["mop"],v,e)}else{for(var k=[],x=1;x<l.name.length;x++)k.push(buildCommon.mathsym(l.name[x],l.mode,e));u=buildCommon.makeSpan(["mop"],k,e)}var M=0,E=0;return(u instanceof SymbolNode||l.name==="\\oiint"||l.name==="\\oiiint")&&!l.suppressBaseShift&&(M=(u.height-u.depth)/2-e.fontMetrics().axisHeight,E=u.italic),s?assembleSupSub(u,n,a,e,c,E,M):(M&&(u.style.position="relative",u.style.top=makeEm(M)),u)},mathmlBuilder$1=(o,e)=>{var n;if(o.symbol)n=new MathNode("mo",[makeText(o.name,o.mode)]),utils.contains(noSuccessor,o.name)&&n.setAttribute("largeop","false");else if(o.body)n=new MathNode("mo",buildExpression(o.body,e));else{n=new MathNode("mi",[new TextNode(o.name.slice(1))]);var a=new MathNode("mo",[makeText("⁡","text")]);o.parentIsSupSub?n=new MathNode("mrow",[n,a]):n=newDocumentFragment([n,a])}return n},singleCharBigOps={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=a;return s.length===1&&(s=singleCharBigOps[s]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(o,e)=>{var{parser:n}=o,a=e[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(a)}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var singleCharIntegrals={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(o){var{parser:e,funcName:n}=o;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(o){var{parser:e,funcName:n}=o;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(o){var{parser:e,funcName:n}=o,a=n;return a.length===1&&(a=singleCharIntegrals[a]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var htmlBuilder$1=(o,e)=>{var n,a,s=!1,l;o.type==="supsub"?(n=o.sup,a=o.sub,l=assertNodeType(o.base,"operatorname"),s=!0):l=assertNodeType(o,"operatorname");var c;if(l.body.length>0){for(var d=l.body.map(_=>{var b=_.text;return typeof b=="string"?{type:"textord",mode:_.mode,text:b}:_}),u=buildExpression$1(d,e.withFont("mathrm"),!0),f=0;f<u.length;f++){var p=u[f];p instanceof SymbolNode&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}c=buildCommon.makeSpan(["mop"],u,e)}else c=buildCommon.makeSpan(["mop"],[],e);return s?assembleSupSub(c,n,a,e,e.style,0,0):c},mathmlBuilder=(o,e)=>{for(var n=buildExpression(o.body,e.withFont("mathrm")),a=!0,s=0;s<n.length;s++){var l=n[s];if(!(l instanceof mathMLTree.SpaceNode))if(l instanceof mathMLTree.MathNode)switch(l.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var c=l.children[0];l.children.length===1&&c instanceof mathMLTree.TextNode?c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):a=!1;break}default:a=!1}else a=!1}if(a){var d=n.map(p=>p.toText()).join("");n=[new mathMLTree.TextNode(d)]}var u=new mathMLTree.MathNode("mi",n);u.setAttribute("mathvariant","normal");var f=new mathMLTree.MathNode("mo",[makeText("⁡","text")]);return o.parentIsSupSub?new mathMLTree.MathNode("mrow",[u,f]):mathMLTree.newDocumentFragment([u,f])};defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=e[0];return{type:"operatorname",mode:n.mode,body:ordargument(s),alwaysHandleSupSub:a==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:htmlBuilder$1,mathmlBuilder});defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");defineFunctionBuilders({type:"ordgroup",htmlBuilder(o,e){return o.semisimple?buildCommon.makeFragment(buildExpression$1(o.body,e,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(o.body,e,!0),e)},mathmlBuilder(o,e){return buildExpressionRow(o.body,e,!0)}});defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(o,e){var{parser:n}=o,a=e[0];return{type:"overline",mode:n.mode,body:a}},htmlBuilder(o,e){var n=buildGroup$1(o.body,e.havingCrampedStyle()),a=buildCommon.makeLineSpan("overline-line",e),s=e.fontMetrics().defaultRuleThickness,l=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:a},{type:"kern",size:s}]},e);return buildCommon.makeSpan(["mord","overline"],[l],e)},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("‾")]);n.setAttribute("stretchy","true");var a=new mathMLTree.MathNode("mover",[buildGroup(o.body,e),n]);return a.setAttribute("accent","true"),a}});defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(o,e)=>{var{parser:n}=o,a=e[0];return{type:"phantom",mode:n.mode,body:ordargument(a)}},htmlBuilder:(o,e)=>{var n=buildExpression$1(o.body,e.withPhantom(),!1);return buildCommon.makeFragment(n)},mathmlBuilder:(o,e)=>{var n=buildExpression(o.body,e);return new mathMLTree.MathNode("mphantom",n)}});defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(o,e)=>{var{parser:n}=o,a=e[0];return{type:"hphantom",mode:n.mode,body:a}},htmlBuilder:(o,e)=>{var n=buildCommon.makeSpan([],[buildGroup$1(o.body,e.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var a=0;a<n.children.length;a++)n.children[a].height=0,n.children[a].depth=0;return n=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e),buildCommon.makeSpan(["mord"],[n],e)},mathmlBuilder:(o,e)=>{var n=buildExpression(ordargument(o.body),e),a=new mathMLTree.MathNode("mphantom",n),s=new mathMLTree.MathNode("mpadded",[a]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(o,e)=>{var{parser:n}=o,a=e[0];return{type:"vphantom",mode:n.mode,body:a}},htmlBuilder:(o,e)=>{var n=buildCommon.makeSpan(["inner"],[buildGroup$1(o.body,e.withPhantom())]),a=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[n,a],e)},mathmlBuilder:(o,e)=>{var n=buildExpression(ordargument(o.body),e),a=new mathMLTree.MathNode("mphantom",n),s=new mathMLTree.MathNode("mpadded",[a]);return s.setAttribute("width","0px"),s}});defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(o,e){var{parser:n}=o,a=assertNodeType(e[0],"size").value,s=e[1];return{type:"raisebox",mode:n.mode,dy:a,body:s}},htmlBuilder(o,e){var n=buildGroup$1(o.body,e),a=calculateSize(o.dy,e);return buildCommon.makeVList({positionType:"shift",positionData:-a,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mpadded",[buildGroup(o.body,e)]),a=o.dy.number+o.dy.unit;return n.setAttribute("voffset",a),n}});defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(o){var{parser:e}=o;return{type:"internal",mode:e.mode}}});defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(o,e,n){var{parser:a}=o,s=n[0],l=assertNodeType(e[0],"size"),c=assertNodeType(e[1],"size");return{type:"rule",mode:a.mode,shift:s&&assertNodeType(s,"size").value,width:l.value,height:c.value}},htmlBuilder(o,e){var n=buildCommon.makeSpan(["mord","rule"],[],e),a=calculateSize(o.width,e),s=calculateSize(o.height,e),l=o.shift?calculateSize(o.shift,e):0;return n.style.borderRightWidth=makeEm(a),n.style.borderTopWidth=makeEm(s),n.style.bottom=makeEm(l),n.width=a,n.height=s+l,n.depth=-l,n.maxFontSize=s*1.125*e.sizeMultiplier,n},mathmlBuilder(o,e){var n=calculateSize(o.width,e),a=calculateSize(o.height,e),s=o.shift?calculateSize(o.shift,e):0,l=e.color&&e.getColor()||"black",c=new mathMLTree.MathNode("mspace");c.setAttribute("mathbackground",l),c.setAttribute("width",makeEm(n)),c.setAttribute("height",makeEm(a));var d=new mathMLTree.MathNode("mpadded",[c]);return s>=0?d.setAttribute("height",makeEm(s)):(d.setAttribute("height",makeEm(s)),d.setAttribute("depth",makeEm(-s))),d.setAttribute("voffset",makeEm(s)),d}});function sizingGroup(o,e,n){for(var a=buildExpression$1(o,e,!1),s=e.sizeMultiplier/n.sizeMultiplier,l=0;l<a.length;l++){var c=a[l].classes.indexOf("sizing");c<0?Array.prototype.push.apply(a[l].classes,e.sizingClasses(n)):a[l].classes[c+1]==="reset-size"+e.size&&(a[l].classes[c+1]="reset-size"+n.size),a[l].height*=s,a[l].depth*=s}return buildCommon.makeFragment(a)}var sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder=(o,e)=>{var n=e.havingSize(o.size);return sizingGroup(o.body,n,e)};defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:(o,e)=>{var{breakOnTokenText:n,funcName:a,parser:s}=o,l=s.parseExpression(!1,n);return{type:"sizing",mode:s.mode,size:sizeFuncs.indexOf(a)+1,body:l}},htmlBuilder,mathmlBuilder:(o,e)=>{var n=e.havingSize(o.size),a=buildExpression(o.body,n),s=new mathMLTree.MathNode("mstyle",a);return s.setAttribute("mathsize",makeEm(n.sizeMultiplier)),s}});defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(o,e,n)=>{var{parser:a}=o,s=!1,l=!1,c=n[0]&&assertNodeType(n[0],"ordgroup");if(c)for(var d="",u=0;u<c.body.length;++u){var f=c.body[u];if(d=f.text,d==="t")s=!0;else if(d==="b")l=!0;else{s=!1,l=!1;break}}else s=!0,l=!0;var p=e[0];return{type:"smash",mode:a.mode,body:p,smashHeight:s,smashDepth:l}},htmlBuilder:(o,e)=>{var n=buildCommon.makeSpan([],[buildGroup$1(o.body,e)]);if(!o.smashHeight&&!o.smashDepth)return n;if(o.smashHeight&&(n.height=0,n.children))for(var a=0;a<n.children.length;a++)n.children[a].height=0;if(o.smashDepth&&(n.depth=0,n.children))for(var s=0;s<n.children.length;s++)n.children[s].depth=0;var l=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e);return buildCommon.makeSpan(["mord"],[l],e)},mathmlBuilder:(o,e)=>{var n=new mathMLTree.MathNode("mpadded",[buildGroup(o.body,e)]);return o.smashHeight&&n.setAttribute("height","0px"),o.smashDepth&&n.setAttribute("depth","0px"),n}});defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(o,e,n){var{parser:a}=o,s=n[0],l=e[0];return{type:"sqrt",mode:a.mode,body:l,index:s}},htmlBuilder(o,e){var n=buildGroup$1(o.body,e.havingCrampedStyle());n.height===0&&(n.height=e.fontMetrics().xHeight),n=buildCommon.wrapFragment(n,e);var a=e.fontMetrics(),s=a.defaultRuleThickness,l=s;e.style.id<Style$1.TEXT.id&&(l=e.fontMetrics().xHeight);var c=s+l/4,d=n.height+n.depth+c+s,{span:u,ruleWidth:f,advanceWidth:p}=delimiter.sqrtImage(d,e),_=u.height-f;_>n.height+n.depth+c&&(c=(c+_-n.height-n.depth)/2);var b=u.height-n.height-c-f;n.style.paddingLeft=makeEm(p);var v=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+b)},{type:"elem",elem:u},{type:"kern",size:f}]},e);if(o.index){var k=e.havingStyle(Style$1.SCRIPTSCRIPT),x=buildGroup$1(o.index,k,e),M=.6*(v.height-v.depth),E=buildCommon.makeVList({positionType:"shift",positionData:-M,children:[{type:"elem",elem:x}]},e),L=buildCommon.makeSpan(["root"],[E]);return buildCommon.makeSpan(["mord","sqrt"],[L,v],e)}else return buildCommon.makeSpan(["mord","sqrt"],[v],e)},mathmlBuilder(o,e){var{body:n,index:a}=o;return a?new mathMLTree.MathNode("mroot",[buildGroup(n,e),buildGroup(a,e)]):new mathMLTree.MathNode("msqrt",[buildGroup(n,e)])}});var styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT};defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o,e){var{breakOnTokenText:n,funcName:a,parser:s}=o,l=s.parseExpression(!0,n),c=a.slice(1,a.length-5);return{type:"styling",mode:s.mode,style:c,body:l}},htmlBuilder(o,e){var n=styleMap[o.style],a=e.havingStyle(n).withFont("");return sizingGroup(o.body,a,e)},mathmlBuilder(o,e){var n=styleMap[o.style],a=e.havingStyle(n),s=buildExpression(o.body,a),l=new mathMLTree.MathNode("mstyle",s),c={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},d=c[o.style];return l.setAttribute("scriptlevel",d[0]),l.setAttribute("displaystyle",d[1]),l}});var htmlBuilderDelegate=function o(e,n){var a=e.base;if(a)if(a.type==="op"){var s=a.limits&&(n.style.size===Style$1.DISPLAY.size||a.alwaysHandleSupSub);return s?htmlBuilder$2:null}else if(a.type==="operatorname"){var l=a.alwaysHandleSupSub&&(n.style.size===Style$1.DISPLAY.size||a.limits);return l?htmlBuilder$1:null}else{if(a.type==="accent")return utils.isCharacterBox(a.base)?htmlBuilder$a:null;if(a.type==="horizBrace"){var c=!e.sub;return c===a.isOver?htmlBuilder$3:null}else return null}else return null};defineFunctionBuilders({type:"supsub",htmlBuilder(o,e){var n=htmlBuilderDelegate(o,e);if(n)return n(o,e);var{base:a,sup:s,sub:l}=o,c=buildGroup$1(a,e),d,u,f=e.fontMetrics(),p=0,_=0,b=a&&utils.isCharacterBox(a);if(s){var v=e.havingStyle(e.style.sup());d=buildGroup$1(s,v,e),b||(p=c.height-v.fontMetrics().supDrop*v.sizeMultiplier/e.sizeMultiplier)}if(l){var k=e.havingStyle(e.style.sub());u=buildGroup$1(l,k,e),b||(_=c.depth+k.fontMetrics().subDrop*k.sizeMultiplier/e.sizeMultiplier)}var x;e.style===Style$1.DISPLAY?x=f.sup1:e.style.cramped?x=f.sup3:x=f.sup2;var M=e.sizeMultiplier,E=makeEm(.5/f.ptPerEm/M),L=null;if(u){var V=o.base&&o.base.type==="op"&&o.base.name&&(o.base.name==="\\oiint"||o.base.name==="\\oiiint");(c instanceof SymbolNode||V)&&(L=makeEm(-c.italic))}var B;if(d&&u){p=Math.max(p,x,d.depth+.25*f.xHeight),_=Math.max(_,f.sub2);var F=f.defaultRuleThickness,j=4*F;if(p-d.depth-(u.height-_)<j){_=j-(p-d.depth)+u.height;var I=.8*f.xHeight-(p-d.depth);I>0&&(p+=I,_-=I)}var U=[{type:"elem",elem:u,shift:_,marginRight:E,marginLeft:L},{type:"elem",elem:d,shift:-p,marginRight:E}];B=buildCommon.makeVList({positionType:"individualShift",children:U},e)}else if(u){_=Math.max(_,f.sub1,u.height-.8*f.xHeight);var W=[{type:"elem",elem:u,marginLeft:L,marginRight:E}];B=buildCommon.makeVList({positionType:"shift",positionData:_,children:W},e)}else if(d)p=Math.max(p,x,d.depth+.25*f.xHeight),B=buildCommon.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:d,marginRight:E}]},e);else throw new Error("supsub must have either sup or sub.");var K=getTypeOfDomTree(c,"right")||"mord";return buildCommon.makeSpan([K],[c,buildCommon.makeSpan(["msupsub"],[B])],e)},mathmlBuilder(o,e){var n=!1,a,s;o.base&&o.base.type==="horizBrace"&&(s=!!o.sup,s===o.base.isOver&&(n=!0,a=o.base.isOver)),o.base&&(o.base.type==="op"||o.base.type==="operatorname")&&(o.base.parentIsSupSub=!0);var l=[buildGroup(o.base,e)];o.sub&&l.push(buildGroup(o.sub,e)),o.sup&&l.push(buildGroup(o.sup,e));var c;if(n)c=a?"mover":"munder";else if(o.sub)if(o.sup){var f=o.base;f&&f.type==="op"&&f.limits&&e.style===Style$1.DISPLAY||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(e.style===Style$1.DISPLAY||f.limits)?c="munderover":c="msubsup"}else{var u=o.base;u&&u.type==="op"&&u.limits&&(e.style===Style$1.DISPLAY||u.alwaysHandleSupSub)||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(u.limits||e.style===Style$1.DISPLAY)?c="munder":c="msub"}else{var d=o.base;d&&d.type==="op"&&d.limits&&(e.style===Style$1.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Style$1.DISPLAY)?c="mover":c="msup"}return new mathMLTree.MathNode(c,l)}});defineFunctionBuilders({type:"atom",htmlBuilder(o,e){return buildCommon.mathsym(o.text,o.mode,e,["m"+o.family])},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mo",[makeText(o.text,o.mode)]);if(o.family==="bin"){var a=getVariant(o,e);a==="bold-italic"&&n.setAttribute("mathvariant",a)}else o.family==="punct"?n.setAttribute("separator","true"):(o.family==="open"||o.family==="close")&&n.setAttribute("stretchy","false");return n}});var defaultVariant={mi:"italic",mn:"normal",mtext:"normal"};defineFunctionBuilders({type:"mathord",htmlBuilder(o,e){return buildCommon.makeOrd(o,e,"mathord")},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mi",[makeText(o.text,o.mode,e)]),a=getVariant(o,e)||"italic";return a!==defaultVariant[n.type]&&n.setAttribute("mathvariant",a),n}});defineFunctionBuilders({type:"textord",htmlBuilder(o,e){return buildCommon.makeOrd(o,e,"textord")},mathmlBuilder(o,e){var n=makeText(o.text,o.mode,e),a=getVariant(o,e)||"normal",s;return o.mode==="text"?s=new mathMLTree.MathNode("mtext",[n]):/[0-9]/.test(o.text)?s=new mathMLTree.MathNode("mn",[n]):o.text==="\\prime"?s=new mathMLTree.MathNode("mo",[n]):s=new mathMLTree.MathNode("mi",[n]),a!==defaultVariant[s.type]&&s.setAttribute("mathvariant",a),s}});var cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};defineFunctionBuilders({type:"spacing",htmlBuilder(o,e){if(regularSpace.hasOwnProperty(o.text)){var n=regularSpace[o.text].className||"";if(o.mode==="text"){var a=buildCommon.makeOrd(o,e,"textord");return a.classes.push(n),a}else return buildCommon.makeSpan(["mspace",n],[buildCommon.mathsym(o.text,o.mode,e)],e)}else{if(cssSpace.hasOwnProperty(o.text))return buildCommon.makeSpan(["mspace",cssSpace[o.text]],[],e);throw new ParseError('Unknown type of space "'+o.text+'"')}},mathmlBuilder(o,e){var n;if(regularSpace.hasOwnProperty(o.text))n=new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode("\xa0")]);else{if(cssSpace.hasOwnProperty(o.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+o.text+'"')}return n}});var pad=()=>{var o=new mathMLTree.MathNode("mtd",[]);return o.setAttribute("width","50%"),o};defineFunctionBuilders({type:"tag",mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(o.body,e)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(o.tag,e)])])]);return n.setAttribute("width","100%"),n}});var textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=(o,e)=>{var n=o.font;if(n){if(textFontFamilies[n])return e.withTextFontFamily(textFontFamilies[n]);if(textFontWeights[n])return e.withTextFontWeight(textFontWeights[n]);if(n==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(textFontShapes[n])};defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(o,e){var{parser:n,funcName:a}=o,s=e[0];return{type:"text",mode:n.mode,body:ordargument(s),font:a}},htmlBuilder(o,e){var n=optionsWithFont(o,e),a=buildExpression$1(o.body,n,!0);return buildCommon.makeSpan(["mord","text"],a,n)},mathmlBuilder(o,e){var n=optionsWithFont(o,e);return buildExpressionRow(o.body,n)}});defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(o,e){var{parser:n}=o;return{type:"underline",mode:n.mode,body:e[0]}},htmlBuilder(o,e){var n=buildGroup$1(o.body,e),a=buildCommon.makeLineSpan("underline-line",e),s=e.fontMetrics().defaultRuleThickness,l=buildCommon.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:s},{type:"elem",elem:a},{type:"kern",size:3*s},{type:"elem",elem:n}]},e);return buildCommon.makeSpan(["mord","underline"],[l],e)},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("‾")]);n.setAttribute("stretchy","true");var a=new mathMLTree.MathNode("munder",[buildGroup(o.body,e),n]);return a.setAttribute("accentunder","true"),a}});defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(o,e){var{parser:n}=o;return{type:"vcenter",mode:n.mode,body:e[0]}},htmlBuilder(o,e){var n=buildGroup$1(o.body,e),a=e.fontMetrics().axisHeight,s=.5*(n.height-a-(n.depth+a));return buildCommon.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(o,e){return new mathMLTree.MathNode("mpadded",[buildGroup(o.body,e)],["vcenter"])}});defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(o,e,n){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(o,e){for(var n=makeVerb(o),a=[],s=e.havingStyle(e.style.text()),l=0;l<n.length;l++){var c=n[l];c==="~"&&(c="\\textasciitilde"),a.push(buildCommon.makeSymbol(c,"Typewriter-Regular",o.mode,s,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(s.sizingClasses(e)),buildCommon.tryCombineChars(a),s)},mathmlBuilder(o,e){var n=new mathMLTree.TextNode(makeVerb(o)),a=new mathMLTree.MathNode("mtext",[n]);return a.setAttribute("mathvariant","monospace"),a}});var makeVerb=o=>o.body.replace(/ /g,o.star?"␣":"\xa0"),functions=_functions,spaceRegexString=`[ \r
	]`,controlWordRegexString="\\\\[a-zA-Z@]+",controlSymbolRegexString="\\\\[^\uD800-\uDFFF]",controlWordWhitespaceRegexString="("+controlWordRegexString+")"+spaceRegexString+"*",controlSpaceRegexString=`\\\\(
|[ \r	]+
?)[ \r	]*`,combiningDiacriticalMarkString="[̀-ͯ]",combiningDiacriticalMarksEndRegex=new RegExp(combiningDiacriticalMarkString+"+$"),tokenRegexString="("+spaceRegexString+"+)|"+(controlSpaceRegexString+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(combiningDiacriticalMarkString+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(combiningDiacriticalMarkString+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+controlWordWhitespaceRegexString)+("|"+controlSymbolRegexString+")");class Lexer{constructor(e,n){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=n,this.tokenRegex=new RegExp(tokenRegexString,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,n){this.catcodes[e]=n}lex(){var e=this.input,n=this.tokenRegex.lastIndex;if(n===e.length)return new Token("EOF",new SourceLocation(this,n,n));var a=this.tokenRegex.exec(e);if(a===null||a.index!==n)throw new ParseError("Unexpected character: '"+e[n]+"'",new Token(e[n],new SourceLocation(this,n,n+1)));var s=a[6]||a[3]||(a[2]?"\\ ":" ");if(this.catcodes[s]===14){var l=e.indexOf(`
`,this.tokenRegex.lastIndex);return l===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=l+1,this.lex()}return new Token(s,new SourceLocation(this,n,this.tokenRegex.lastIndex))}}class Namespace{constructor(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=n,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ParseError("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var n in e)e.hasOwnProperty(n)&&(e[n]==null?delete this.current[n]:this.current[n]=e[n])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,n,a){if(a===void 0&&(a=!1),a){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=n)}else{var l=this.undefStack[this.undefStack.length-1];l&&!l.hasOwnProperty(e)&&(l[e]=this.current[e])}n==null?delete this.current[e]:this.current[e]=n}}var macros=_macros;defineMacro("\\noexpand",function(o){var e=o.popToken();return o.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});defineMacro("\\expandafter",function(o){var e=o.popToken();return o.expandOnce(!0),{tokens:[e],numArgs:0}});defineMacro("\\@firstoftwo",function(o){var e=o.consumeArgs(2);return{tokens:e[0],numArgs:0}});defineMacro("\\@secondoftwo",function(o){var e=o.consumeArgs(2);return{tokens:e[1],numArgs:0}});defineMacro("\\@ifnextchar",function(o){var e=o.consumeArgs(3);o.consumeSpaces();var n=o.future();return e[0].length===1&&e[0][0].text===n.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");defineMacro("\\TextOrMath",function(o){var e=o.consumeArgs(2);return o.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};defineMacro("\\char",function(o){var e=o.popToken(),n,a="";if(e.text==="'")n=8,e=o.popToken();else if(e.text==='"')n=16,e=o.popToken();else if(e.text==="`")if(e=o.popToken(),e.text[0]==="\\")a=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ParseError("\\char` missing argument");a=e.text.charCodeAt(0)}else n=10;if(n){if(a=digitToNumber[e.text],a==null||a>=n)throw new ParseError("Invalid base-"+n+" digit "+e.text);for(var s;(s=digitToNumber[o.future().text])!=null&&s<n;)a*=n,a+=s,o.popToken()}return"\\@char{"+a+"}"});var newcommand=(o,e,n)=>{var a=o.consumeArg().tokens;if(a.length!==1)throw new ParseError("\\newcommand's first argument must be a macro name");var s=a[0].text,l=o.isDefined(s);if(l&&!e)throw new ParseError("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!l&&!n)throw new ParseError("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var c=0;if(a=o.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",u=o.expandNextToken();u.text!=="]"&&u.text!=="EOF";)d+=u.text,u=o.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+d);c=parseInt(d),a=o.consumeArg().tokens}return o.macros.set(s,{tokens:a,numArgs:c}),""};defineMacro("\\newcommand",o=>newcommand(o,!1,!0));defineMacro("\\renewcommand",o=>newcommand(o,!0,!1));defineMacro("\\providecommand",o=>newcommand(o,!0,!0));defineMacro("\\message",o=>{var e=o.consumeArgs(1)[0];return console.log(e.reverse().map(n=>n.text).join("")),""});defineMacro("\\errmessage",o=>{var e=o.consumeArgs(1)[0];return console.error(e.reverse().map(n=>n.text).join("")),""});defineMacro("\\show",o=>{var e=o.popToken(),n=e.text;return console.log(e,o.macros.get(n),functions[n],symbols.math[n],symbols.text[n]),""});defineMacro("\\bgroup","{");defineMacro("\\egroup","}");defineMacro("~","\\nobreakspace");defineMacro("\\lq","`");defineMacro("\\rq","'");defineMacro("\\aa","\\r a");defineMacro("\\AA","\\r A");defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`\xa9}");defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xae}");defineMacro("ℬ","\\mathscr{B}");defineMacro("ℰ","\\mathscr{E}");defineMacro("ℱ","\\mathscr{F}");defineMacro("ℋ","\\mathscr{H}");defineMacro("ℐ","\\mathscr{I}");defineMacro("ℒ","\\mathscr{L}");defineMacro("ℳ","\\mathscr{M}");defineMacro("ℛ","\\mathscr{R}");defineMacro("ℭ","\\mathfrak{C}");defineMacro("ℌ","\\mathfrak{H}");defineMacro("ℨ","\\mathfrak{Z}");defineMacro("\\Bbbk","\\Bbb{k}");defineMacro("\xb7","\\cdotp");defineMacro("\\llap","\\mathllap{\\textrm{#1}}");defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}");defineMacro("\\clap","\\mathclap{\\textrm{#1}}");defineMacro("\\mathstrut","\\vphantom{(}");defineMacro("\\underbar","\\underline{\\text{#1}}");defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");defineMacro("\\ne","\\neq");defineMacro("≠","\\neq");defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");defineMacro("∉","\\notin");defineMacro("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");defineMacro("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");defineMacro("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");defineMacro("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");defineMacro("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");defineMacro("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");defineMacro("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");defineMacro("⟂","\\perp");defineMacro("‼","\\mathclose{!\\mkern-0.8mu!}");defineMacro("∌","\\notni");defineMacro("⌜","\\ulcorner");defineMacro("⌝","\\urcorner");defineMacro("⌞","\\llcorner");defineMacro("⌟","\\lrcorner");defineMacro("\xa9","\\copyright");defineMacro("\xae","\\textregistered");defineMacro("️","\\textregistered");defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');defineMacro("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");defineMacro("⋮","\\vdots");defineMacro("\\varGamma","\\mathit{\\Gamma}");defineMacro("\\varDelta","\\mathit{\\Delta}");defineMacro("\\varTheta","\\mathit{\\Theta}");defineMacro("\\varLambda","\\mathit{\\Lambda}");defineMacro("\\varXi","\\mathit{\\Xi}");defineMacro("\\varPi","\\mathit{\\Pi}");defineMacro("\\varSigma","\\mathit{\\Sigma}");defineMacro("\\varUpsilon","\\mathit{\\Upsilon}");defineMacro("\\varPhi","\\mathit{\\Phi}");defineMacro("\\varPsi","\\mathit{\\Psi}");defineMacro("\\varOmega","\\mathit{\\Omega}");defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}");defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}");defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;");defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");defineMacro("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");defineMacro("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};defineMacro("\\dots",function(o){var e="\\dotso",n=o.expandAfterFuture().text;return n in dotsByToken?e=dotsByToken[n]:(n.slice(0,4)==="\\not"||n in symbols.math&&utils.contains(["bin","rel"],symbols.math[n].group))&&(e="\\dotsb"),e});var spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};defineMacro("\\dotso",function(o){var e=o.future().text;return e in spaceAfterDots?"\\ldots\\,":"\\ldots"});defineMacro("\\dotsc",function(o){var e=o.future().text;return e in spaceAfterDots&&e!==","?"\\ldots\\,":"\\ldots"});defineMacro("\\cdots",function(o){var e=o.future().text;return e in spaceAfterDots?"\\@cdots\\,":"\\@cdots"});defineMacro("\\dotsb","\\cdots");defineMacro("\\dotsm","\\cdots");defineMacro("\\dotsi","\\!\\cdots");defineMacro("\\dotsx","\\ldots\\,");defineMacro("\\DOTSI","\\relax");defineMacro("\\DOTSB","\\relax");defineMacro("\\DOTSX","\\relax");defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");defineMacro("\\,","\\tmspace+{3mu}{.1667em}");defineMacro("\\thinspace","\\,");defineMacro("\\>","\\mskip{4mu}");defineMacro("\\:","\\tmspace+{4mu}{.2222em}");defineMacro("\\medspace","\\:");defineMacro("\\;","\\tmspace+{5mu}{.2777em}");defineMacro("\\thickspace","\\;");defineMacro("\\!","\\tmspace-{3mu}{.1667em}");defineMacro("\\negthinspace","\\!");defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}");defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}");defineMacro("\\enspace","\\kern.5em ");defineMacro("\\enskip","\\hskip.5em\\relax");defineMacro("\\quad","\\hskip1em\\relax");defineMacro("\\qquad","\\hskip2em\\relax");defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren");defineMacro("\\tag@paren","\\tag@literal{({#1})}");defineMacro("\\tag@literal",o=>{if(o.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");defineMacro("\\newline","\\\\\\relax");defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var latexRaiseA=makeEm(fontMetricsData["Main-Regular"][84][1]-.7*fontMetricsData["Main-Regular"][65][1]);defineMacro("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");defineMacro("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace");defineMacro("\\@hspace","\\hskip #1\\relax");defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");defineMacro("\\ordinarycolon",":");defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');defineMacro("∷","\\dblcolon");defineMacro("∹","\\eqcolon");defineMacro("≔","\\coloneqq");defineMacro("≕","\\eqqcolon");defineMacro("⩴","\\Coloneqq");defineMacro("\\ratio","\\vcentcolon");defineMacro("\\coloncolon","\\dblcolon");defineMacro("\\colonequals","\\coloneqq");defineMacro("\\coloncolonequals","\\Coloneqq");defineMacro("\\equalscolon","\\eqqcolon");defineMacro("\\equalscoloncolon","\\Eqqcolon");defineMacro("\\colonminus","\\coloneq");defineMacro("\\coloncolonminus","\\Coloneq");defineMacro("\\minuscolon","\\eqcolon");defineMacro("\\minuscoloncolon","\\Eqcolon");defineMacro("\\coloncolonapprox","\\Colonapprox");defineMacro("\\coloncolonsim","\\Colonsim");defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}");defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}");defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}");defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}");defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{≰}");defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}");defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}");defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}");defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}");defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}");defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}");defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}");defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}");defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}");defineMacro("\\imath","\\html@mathml{\\@imath}{ı}");defineMacro("\\jmath","\\html@mathml{\\@jmath}{ȷ}");defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");defineMacro("⟦","\\llbracket");defineMacro("⟧","\\rrbracket");defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");defineMacro("⦃","\\lBrace");defineMacro("⦄","\\rBrace");defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");defineMacro("⦵","\\minuso");defineMacro("\\darr","\\downarrow");defineMacro("\\dArr","\\Downarrow");defineMacro("\\Darr","\\Downarrow");defineMacro("\\lang","\\langle");defineMacro("\\rang","\\rangle");defineMacro("\\uarr","\\uparrow");defineMacro("\\uArr","\\Uparrow");defineMacro("\\Uarr","\\Uparrow");defineMacro("\\N","\\mathbb{N}");defineMacro("\\R","\\mathbb{R}");defineMacro("\\Z","\\mathbb{Z}");defineMacro("\\alef","\\aleph");defineMacro("\\alefsym","\\aleph");defineMacro("\\Alpha","\\mathrm{A}");defineMacro("\\Beta","\\mathrm{B}");defineMacro("\\bull","\\bullet");defineMacro("\\Chi","\\mathrm{X}");defineMacro("\\clubs","\\clubsuit");defineMacro("\\cnums","\\mathbb{C}");defineMacro("\\Complex","\\mathbb{C}");defineMacro("\\Dagger","\\ddagger");defineMacro("\\diamonds","\\diamondsuit");defineMacro("\\empty","\\emptyset");defineMacro("\\Epsilon","\\mathrm{E}");defineMacro("\\Eta","\\mathrm{H}");defineMacro("\\exist","\\exists");defineMacro("\\harr","\\leftrightarrow");defineMacro("\\hArr","\\Leftrightarrow");defineMacro("\\Harr","\\Leftrightarrow");defineMacro("\\hearts","\\heartsuit");defineMacro("\\image","\\Im");defineMacro("\\infin","\\infty");defineMacro("\\Iota","\\mathrm{I}");defineMacro("\\isin","\\in");defineMacro("\\Kappa","\\mathrm{K}");defineMacro("\\larr","\\leftarrow");defineMacro("\\lArr","\\Leftarrow");defineMacro("\\Larr","\\Leftarrow");defineMacro("\\lrarr","\\leftrightarrow");defineMacro("\\lrArr","\\Leftrightarrow");defineMacro("\\Lrarr","\\Leftrightarrow");defineMacro("\\Mu","\\mathrm{M}");defineMacro("\\natnums","\\mathbb{N}");defineMacro("\\Nu","\\mathrm{N}");defineMacro("\\Omicron","\\mathrm{O}");defineMacro("\\plusmn","\\pm");defineMacro("\\rarr","\\rightarrow");defineMacro("\\rArr","\\Rightarrow");defineMacro("\\Rarr","\\Rightarrow");defineMacro("\\real","\\Re");defineMacro("\\reals","\\mathbb{R}");defineMacro("\\Reals","\\mathbb{R}");defineMacro("\\Rho","\\mathrm{P}");defineMacro("\\sdot","\\cdot");defineMacro("\\sect","\\S");defineMacro("\\spades","\\spadesuit");defineMacro("\\sub","\\subset");defineMacro("\\sube","\\subseteq");defineMacro("\\supe","\\supseteq");defineMacro("\\Tau","\\mathrm{T}");defineMacro("\\thetasym","\\vartheta");defineMacro("\\weierp","\\wp");defineMacro("\\Zeta","\\mathrm{Z}");defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");defineMacro("\\bra","\\mathinner{\\langle{#1}|}");defineMacro("\\ket","\\mathinner{|{#1}\\rangle}");defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}");defineMacro("\\Bra","\\left\\langle#1\\right|");defineMacro("\\Ket","\\left|#1\\right\\rangle");var braketHelper=o=>e=>{var n=e.consumeArg().tokens,a=e.consumeArg().tokens,s=e.consumeArg().tokens,l=e.consumeArg().tokens,c=e.macros.get("|"),d=e.macros.get("\\|");e.macros.beginGroup();var u=_=>b=>{o&&(b.macros.set("|",c),s.length&&b.macros.set("\\|",d));var v=_;if(!_&&s.length){var k=b.future();k.text==="|"&&(b.popToken(),v=!0)}return{tokens:v?s:a,numArgs:0}};e.macros.set("|",u(!1)),s.length&&e.macros.set("\\|",u(!0));var f=e.consumeArg().tokens,p=e.expandTokens([...l,...f,...n]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};defineMacro("\\bra@ket",braketHelper(!1));defineMacro("\\bra@set",braketHelper(!0));defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");defineMacro("\\angln","{\\angl n}");defineMacro("\\blue","\\textcolor{##6495ed}{#1}");defineMacro("\\orange","\\textcolor{##ffa500}{#1}");defineMacro("\\pink","\\textcolor{##ff00af}{#1}");defineMacro("\\red","\\textcolor{##df0030}{#1}");defineMacro("\\green","\\textcolor{##28ae7b}{#1}");defineMacro("\\gray","\\textcolor{gray}{#1}");defineMacro("\\purple","\\textcolor{##9d38bd}{#1}");defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}");defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}");defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}");defineMacro("\\blueD","\\textcolor{##11accd}{#1}");defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}");defineMacro("\\tealA","\\textcolor{##94fff5}{#1}");defineMacro("\\tealB","\\textcolor{##26edd5}{#1}");defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}");defineMacro("\\tealD","\\textcolor{##01a995}{#1}");defineMacro("\\tealE","\\textcolor{##208170}{#1}");defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}");defineMacro("\\greenB","\\textcolor{##8af281}{#1}");defineMacro("\\greenC","\\textcolor{##74cf70}{#1}");defineMacro("\\greenD","\\textcolor{##1fab54}{#1}");defineMacro("\\greenE","\\textcolor{##0d923f}{#1}");defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}");defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}");defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}");defineMacro("\\goldD","\\textcolor{##e07d10}{#1}");defineMacro("\\goldE","\\textcolor{##a75a05}{#1}");defineMacro("\\redA","\\textcolor{##fca9a9}{#1}");defineMacro("\\redB","\\textcolor{##ff8482}{#1}");defineMacro("\\redC","\\textcolor{##f9685d}{#1}");defineMacro("\\redD","\\textcolor{##e84d39}{#1}");defineMacro("\\redE","\\textcolor{##bc2612}{#1}");defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}");defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}");defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}");defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}");defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}");defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}");defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}");defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}");defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}");defineMacro("\\purpleE","\\textcolor{##543b78}{#1}");defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}");defineMacro("\\mintB","\\textcolor{##edf2df}{#1}");defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}");defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}");defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}");defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}");defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}");defineMacro("\\grayE","\\textcolor{##babec2}{#1}");defineMacro("\\grayF","\\textcolor{##888d93}{#1}");defineMacro("\\grayG","\\textcolor{##626569}{#1}");defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}");defineMacro("\\grayI","\\textcolor{##21242c}{#1}");defineMacro("\\kaBlue","\\textcolor{##314453}{#1}");defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}");var implicitCommands={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class MacroExpander{constructor(e,n,a){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=n,this.expansionCount=0,this.feed(e),this.macros=new Namespace(macros,n.macros),this.mode=a,this.stack=[]}feed(e){this.lexer=new Lexer(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var n,a,s;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;n=this.popToken(),{tokens:s,end:a}=this.consumeArg(["]"])}else({tokens:s,start:n,end:a}=this.consumeArg());return this.pushToken(new Token("EOF",a.loc)),this.pushTokens(s),n.range(a,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var n=[],a=e&&e.length>0;a||this.consumeSpaces();var s=this.future(),l,c=0,d=0;do{if(l=this.popToken(),n.push(l),l.text==="{")++c;else if(l.text==="}"){if(--c,c===-1)throw new ParseError("Extra }",l)}else if(l.text==="EOF")throw new ParseError("Unexpected end of input in a macro argument, expected '"+(e&&a?e[d]:"}")+"'",l);if(e&&a)if((c===0||c===1&&e[d]==="{")&&l.text===e[d]){if(++d,d===e.length){n.splice(-d,d);break}}else d=0}while(c!==0||a);return s.text==="{"&&n[n.length-1].text==="}"&&(n.pop(),n.shift()),n.reverse(),{tokens:n,start:s,end:l}}consumeArgs(e,n){if(n){if(n.length!==e+1)throw new ParseError("The length of delimiters doesn't match the number of args!");for(var a=n[0],s=0;s<a.length;s++){var l=this.popToken();if(a[s]!==l.text)throw new ParseError("Use of the macro doesn't match its definition",l)}}for(var c=[],d=0;d<e;d++)c.push(this.consumeArg(n&&n[d+1]).tokens);return c}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ParseError("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var n=this.popToken(),a=n.text,s=n.noexpand?null:this._getExpansion(a);if(s==null||e&&s.unexpandable){if(e&&s==null&&a[0]==="\\"&&!this.isDefined(a))throw new ParseError("Undefined control sequence: "+a);return this.pushToken(n),!1}this.countExpansion(1);var l=s.tokens,c=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){l=l.slice();for(var d=l.length-1;d>=0;--d){var u=l[d];if(u.text==="#"){if(d===0)throw new ParseError("Incomplete placeholder at end of macro body",u);if(u=l[--d],u.text==="#")l.splice(d+1,1);else if(/^[1-9]$/.test(u.text))l.splice(d,2,...c[+u.text-1]);else throw new ParseError("Not a valid argument number",u)}}}return this.pushTokens(l),l.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Token(e)]):void 0}expandTokens(e){var n=[],a=this.stack.length;for(this.pushTokens(e);this.stack.length>a;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),n.push(s)}return this.countExpansion(n.length),n}expandMacroAsText(e){var n=this.expandMacro(e);return n&&n.map(a=>a.text).join("")}_getExpansion(e){var n=this.macros.get(e);if(n==null)return n;if(e.length===1){var a=this.lexer.catcodes[e];if(a!=null&&a!==13)return}var s=typeof n=="function"?n(this):n;if(typeof s=="string"){var l=0;if(s.indexOf("#")!==-1)for(var c=s.replace(/##/g,"");c.indexOf("#"+(l+1))!==-1;)++l;for(var d=new Lexer(s,this.settings),u=[],f=d.lex();f.text!=="EOF";)u.push(f),f=d.lex();u.reverse();var p={tokens:u,numArgs:l};return p}return s}isDefined(e){return this.macros.has(e)||functions.hasOwnProperty(e)||symbols.math.hasOwnProperty(e)||symbols.text.hasOwnProperty(e)||implicitCommands.hasOwnProperty(e)}isExpandable(e){var n=this.macros.get(e);return n!=null?typeof n=="string"||typeof n=="function"||!n.unexpandable:functions.hasOwnProperty(e)&&!functions[e].primitive}}var unicodeSubRegEx=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,uSubsAndSups=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","\xb9":"1","\xb2":"2","\xb3":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),unicodeAccents={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},unicodeSymbols={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class Parser{constructor(e,n){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new MacroExpander(e,n,this.mode),this.settings=n,this.leftrightDepth=0}expect(e,n){if(n===void 0&&(n=!0),this.fetch().text!==e)throw new ParseError("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());n&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var n=this.nextToken;this.consume(),this.gullet.pushToken(new Token("}")),this.gullet.pushTokens(e);var a=this.parseExpression(!1);return this.expect("}"),this.nextToken=n,a}parseExpression(e,n){for(var a=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(Parser.endOfExpression.indexOf(s.text)!==-1||n&&s.text===n||e&&functions[s.text]&&functions[s.text].infix)break;var l=this.parseAtom(n);if(l){if(l.type==="internal")continue}else break;a.push(l)}return this.mode==="text"&&this.formLigatures(a),this.handleInfixNodes(a)}handleInfixNodes(e){for(var n=-1,a,s=0;s<e.length;s++)if(e[s].type==="infix"){if(n!==-1)throw new ParseError("only one infix operator per group",e[s].token);n=s,a=e[s].replaceWith}if(n!==-1&&a){var l,c,d=e.slice(0,n),u=e.slice(n+1);d.length===1&&d[0].type==="ordgroup"?l=d[0]:l={type:"ordgroup",mode:this.mode,body:d},u.length===1&&u[0].type==="ordgroup"?c=u[0]:c={type:"ordgroup",mode:this.mode,body:u};var f;return a==="\\\\abovefrac"?f=this.callFunction(a,[l,e[n],c],[]):f=this.callFunction(a,[l,c],[]),[f]}else return e}handleSupSubscript(e){var n=this.fetch(),a=n.text;this.consume(),this.consumeSpaces();var s=this.parseGroup(e);if(!s)throw new ParseError("Expected group after '"+a+"'",n);return s}formatUnsupportedCmd(e){for(var n=[],a=0;a<e.length;a++)n.push({type:"textord",mode:"text",text:e[a]});var s={type:"text",mode:this.mode,body:n},l={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return l}parseAtom(e){var n=this.parseGroup("atom",e);if(this.mode==="text")return n;for(var a,s;;){this.consumeSpaces();var l=this.fetch();if(l.text==="\\limits"||l.text==="\\nolimits"){if(n&&n.type==="op"){var c=l.text==="\\limits";n.limits=c,n.alwaysHandleSupSub=!0}else if(n&&n.type==="operatorname")n.alwaysHandleSupSub&&(n.limits=l.text==="\\limits");else throw new ParseError("Limit controls must follow a math operator",l);this.consume()}else if(l.text==="^"){if(a)throw new ParseError("Double superscript",l);a=this.handleSupSubscript("superscript")}else if(l.text==="_"){if(s)throw new ParseError("Double subscript",l);s=this.handleSupSubscript("subscript")}else if(l.text==="'"){if(a)throw new ParseError("Double superscript",l);var d={type:"textord",mode:this.mode,text:"\\prime"},u=[d];for(this.consume();this.fetch().text==="'";)u.push(d),this.consume();this.fetch().text==="^"&&u.push(this.handleSupSubscript("superscript")),a={type:"ordgroup",mode:this.mode,body:u}}else if(uSubsAndSups[l.text]){var f=unicodeSubRegEx.test(l.text),p=[];for(p.push(new Token(uSubsAndSups[l.text])),this.consume();;){var _=this.fetch().text;if(!uSubsAndSups[_]||unicodeSubRegEx.test(_)!==f)break;p.unshift(new Token(uSubsAndSups[_])),this.consume()}var b=this.subparse(p);f?s={type:"ordgroup",mode:"math",body:b}:a={type:"ordgroup",mode:"math",body:b}}else break}return a||s?{type:"supsub",mode:this.mode,base:n,sup:a,sub:s}:n}parseFunction(e,n){var a=this.fetch(),s=a.text,l=functions[s];if(!l)return null;if(this.consume(),n&&n!=="atom"&&!l.allowedInArgument)throw new ParseError("Got function '"+s+"' with no arguments"+(n?" as "+n:""),a);if(this.mode==="text"&&!l.allowedInText)throw new ParseError("Can't use function '"+s+"' in text mode",a);if(this.mode==="math"&&l.allowedInMath===!1)throw new ParseError("Can't use function '"+s+"' in math mode",a);var{args:c,optArgs:d}=this.parseArguments(s,l);return this.callFunction(s,c,d,a,e)}callFunction(e,n,a,s,l){var c={funcName:e,parser:this,token:s,breakOnTokenText:l},d=functions[e];if(d&&d.handler)return d.handler(c,n,a);throw new ParseError("No function handler for "+e)}parseArguments(e,n){var a=n.numArgs+n.numOptionalArgs;if(a===0)return{args:[],optArgs:[]};for(var s=[],l=[],c=0;c<a;c++){var d=n.argTypes&&n.argTypes[c],u=c<n.numOptionalArgs;(n.primitive&&d==null||n.type==="sqrt"&&c===1&&l[0]==null)&&(d="primitive");var f=this.parseGroupOfType("argument to '"+e+"'",d,u);if(u)l.push(f);else if(f!=null)s.push(f);else throw new ParseError("Null argument, please report this as a bug")}return{args:s,optArgs:l}}parseGroupOfType(e,n,a){switch(n){case"color":return this.parseColorGroup(a);case"size":return this.parseSizeGroup(a);case"url":return this.parseUrlGroup(a);case"math":case"text":return this.parseArgumentGroup(a,n);case"hbox":{var s=this.parseArgumentGroup(a,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var l=this.parseStringGroup("raw",a);return l!=null?{type:"raw",mode:"text",string:l.text}:null}case"primitive":{if(a)throw new ParseError("A primitive argument cannot be optional");var c=this.parseGroup(e);if(c==null)throw new ParseError("Expected group as "+e,this.fetch());return c}case"original":case null:case void 0:return this.parseArgumentGroup(a);default:throw new ParseError("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,n){var a=this.gullet.scanArgument(n);if(a==null)return null;for(var s="",l;(l=this.fetch()).text!=="EOF";)s+=l.text,this.consume();return this.consume(),a.text=s,a}parseRegexGroup(e,n){for(var a=this.fetch(),s=a,l="",c;(c=this.fetch()).text!=="EOF"&&e.test(l+c.text);)s=c,l+=s.text,this.consume();if(l==="")throw new ParseError("Invalid "+n+": '"+a.text+"'",a);return a.range(s,l)}parseColorGroup(e){var n=this.parseStringGroup("color",e);if(n==null)return null;var a=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(n.text);if(!a)throw new ParseError("Invalid color: '"+n.text+"'",n);var s=a[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(e){var n,a=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?n=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):n=this.parseStringGroup("size",e),!n)return null;!e&&n.text.length===0&&(n.text="0pt",a=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(n.text);if(!s)throw new ParseError("Invalid size: '"+n.text+"'",n);var l={number:+(s[1]+s[2]),unit:s[3]};if(!validUnit(l))throw new ParseError("Invalid unit: '"+l.unit+"'",n);return{type:"size",mode:this.mode,value:l,isBlank:a}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var n=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),n==null)return null;var a=n.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:a}}parseArgumentGroup(e,n){var a=this.gullet.scanArgument(e);if(a==null)return null;var s=this.mode;n&&this.switchMode(n),this.gullet.beginGroup();var l=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var c={type:"ordgroup",mode:this.mode,loc:a.loc,body:l};return n&&this.switchMode(s),c}parseGroup(e,n){var a=this.fetch(),s=a.text,l;if(s==="{"||s==="\\begingroup"){this.consume();var c=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var d=this.parseExpression(!1,c),u=this.fetch();this.expect(c),this.gullet.endGroup(),l={type:"ordgroup",mode:this.mode,loc:SourceLocation.range(a,u),body:d,semisimple:s==="\\begingroup"||void 0}}else if(l=this.parseFunction(n,e)||this.parseSymbol(),l==null&&s[0]==="\\"&&!implicitCommands.hasOwnProperty(s)){if(this.settings.throwOnError)throw new ParseError("Undefined control sequence: "+s,a);l=this.formatUnsupportedCmd(s),this.consume()}return l}formLigatures(e){for(var n=e.length-1,a=0;a<n;++a){var s=e[a],l=s.text;l==="-"&&e[a+1].text==="-"&&(a+1<n&&e[a+2].text==="-"?(e.splice(a,3,{type:"textord",mode:"text",loc:SourceLocation.range(s,e[a+2]),text:"---"}),n-=2):(e.splice(a,2,{type:"textord",mode:"text",loc:SourceLocation.range(s,e[a+1]),text:"--"}),n-=1)),(l==="'"||l==="`")&&e[a+1].text===l&&(e.splice(a,2,{type:"textord",mode:"text",loc:SourceLocation.range(s,e[a+1]),text:l+l}),n-=1)}}parseSymbol(){var e=this.fetch(),n=e.text;if(/^\\verb[^a-zA-Z]/.test(n)){this.consume();var a=n.slice(5),s=a.charAt(0)==="*";if(s&&(a=a.slice(1)),a.length<2||a.charAt(0)!==a.slice(-1))throw new ParseError(`\\verb assertion failed --
                    please report what input caused this bug`);return a=a.slice(1,-1),{type:"verb",mode:"text",body:a,star:s}}unicodeSymbols.hasOwnProperty(n[0])&&!symbols[this.mode][n[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+n[0]+'" used in math mode',e),n=unicodeSymbols[n[0]]+n.slice(1));var l=combiningDiacriticalMarksEndRegex.exec(n);l&&(n=n.substring(0,l.index),n==="i"?n="ı":n==="j"&&(n="ȷ"));var c;if(symbols[this.mode][n]){this.settings.strict&&this.mode==="math"&&extraLatin.indexOf(n)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+n[0]+'" used in math mode',e);var d=symbols[this.mode][n].group,u=SourceLocation.range(e),f;if(ATOMS.hasOwnProperty(d)){var p=d;f={type:"atom",mode:this.mode,family:p,loc:u,text:n}}else f={type:d,mode:this.mode,loc:u,text:n};c=f}else if(n.charCodeAt(0)>=128)this.settings.strict&&(supportedCodepoint(n.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+n[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+n[0]+'"'+(" ("+n.charCodeAt(0)+")"),e)),c={type:"textord",mode:"text",loc:SourceLocation.range(e),text:n};else return null;if(this.consume(),l)for(var _=0;_<l[0].length;_++){var b=l[0][_];if(!unicodeAccents[b])throw new ParseError("Unknown accent ' "+b+"'",e);var v=unicodeAccents[b][this.mode]||unicodeAccents[b].text;if(!v)throw new ParseError("Accent "+b+" unsupported in "+this.mode+" mode",e);c={type:"accent",mode:this.mode,loc:SourceLocation.range(e),label:v,isStretchy:!1,isShifty:!0,base:c}}return c}}Parser.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var parseTree=function o(e,n){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var a=new Parser(e,n);delete a.gullet.macros.current["\\df@tag"];var s=a.parse();if(delete a.gullet.macros.current["\\current@color"],delete a.gullet.macros.current["\\color"],a.gullet.macros.get("\\df@tag")){if(!n.displayMode)throw new ParseError("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:a.subparse([new Token("\\df@tag")])}]}return s},render=function o(e,n,a){n.textContent="";var s=renderToDomTree(e,a).toNode();n.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),render=function(){throw new ParseError("KaTeX doesn't work in quirks mode.")});var renderToString=function o(e,n){var a=renderToDomTree(e,n).toMarkup();return a},generateParseTree=function o(e,n){var a=new Settings(n);return parseTree(e,a)},renderError=function o(e,n,a){if(a.throwOnError||!(e instanceof ParseError))throw e;var s=buildCommon.makeSpan(["katex-error"],[new SymbolNode(n)]);return s.setAttribute("title",e.toString()),s.setAttribute("style","color:"+a.errorColor),s},renderToDomTree=function o(e,n){var a=new Settings(n);try{var s=parseTree(e,a);return buildTree(s,e,a)}catch(l){return renderError(l,e,a)}},renderToHTMLTree=function o(e,n){var a=new Settings(n);try{var s=parseTree(e,a);return buildHTMLTree(s,e,a)}catch(l){return renderError(l,e,a)}},version="0.16.19",__domTree={Span,Anchor,SymbolNode,SvgNode,PathNode,LineNode},katex={version,render,renderToString,ParseError,SETTINGS_SCHEMA,__parse:generateParseTree,__renderToDomTree:renderToDomTree,__renderToHTMLTree:renderToHTMLTree,__setFontMetrics:setFontMetrics,__defineSymbol:defineSymbol,__defineFunction:defineFunction,__defineMacro:defineMacro,__domTree};class MathInlineKatex{dom;pmView;getPos;katexContainer;ctx;onBlur=e=>{this.deselect()};src="";static KATEX_RENDER_OPTION={displayMode:!1,throwOnError:!1};static KATEX_CONTAINER_CLASS="math-inline--katex";renderEquation(){this.src.trim().length>0?(katex.render(this.src,this.katexContainer,MathInlineKatex.KATEX_RENDER_OPTION),this.katexContainer.classList.remove("empty")):(this.katexContainer.textContent="EMPTY EQUATION",this.katexContainer.classList.add("empty"))}showMathEditor(){const e=this.pmView.state.doc.nodeAt(this.getPos());if(!e)return;const n=e.attrs.src;this.ctx.openFloatingMathInput(this.katexContainer,n,a=>{this.src=a,this.renderEquation()},()=>this.skipLeft(),()=>this.skipRight(),()=>this.skipRight(),()=>this.deleteThisNode())}syncToProseMirror(){const e=this.getPos(),a=this.pmView.state.schema.nodes.mathInline.create({src:this.src}),s=this.pmView.state.tr.replaceRangeWith(e,e+1,a);return s.setSelection(NodeSelection.create(s.doc,e)),s}skipRight(){const e=this.getPos(),n=this.syncToProseMirror();let a;try{a=TextSelection.create(n.doc,e+1)}catch{a=AllSelection.atEnd(n.doc)}n.setSelection(a),this.pmView.dispatch(n),this.pmView.focus()}skipLeft(){const e=this.getPos(),n=this.syncToProseMirror();let a;try{a=TextSelection.create(n.doc,e-1)}catch{a=AllSelection.atStart(n.doc)}n.setSelection(a),this.pmView.dispatch(n),this.pmView.focus()}deleteThisNode(){const e=this.getPos(),n=NodeSelection.create(this.pmView.state.doc,e),a=this.pmView.state.tr.setSelection(n);a.deleteSelection(),this.pmView.dispatch(a),this.pmView.focus()}constructor(e,n,a,s){this.pmView=n,this.getPos=a,this.dom=document.createElement("span"),this.ctx=s;const l=e.attrs.src;this.src=l,this.katexContainer=document.createElement("span"),this.katexContainer.classList.add(MathInlineKatex.KATEX_CONTAINER_CLASS),this.renderEquation(),this.dom.append(this.katexContainer),this.katexContainer.addEventListener("click",()=>{this.showMathEditor()})}stopEvent(){return!0}ignoreMutation(){return!1}selectNode(){this.showMathEditor()}deselect(){}destroy(){this.katexContainer.innerHTML="",this.katexContainer.remove()}}const mkKeymapPlugin=o=>{const e=o.keymapContext;if(!e)throw new Error("Cannot find keymap context");const n=computed(()=>generateKeydownHandler(e.prosemirrorKeymap.value,a=>[a.state,a.dispatch,a],(a,s)=>s));return new Plugin({props:{handleKeyDown:(a,s)=>{n.value(a,s)}}})},generateImageName=(o,e)=>`${o}__${nanoid()}.${e}`,mkPasteImagePlugin=o=>{const e=useTaskQueue(),n=o.imagesContext,a=o.lastFocusContext,s=o.pathsContext,l=o.blocksContext;return new Plugin({props:{handlePaste(c,d,u){if(!n||!a||!s||!l)return!1;const f=a.lastFocusedBlockTree.value,p=a.lastFocusedDiId.value,_=p?f?.getDi(p):null;if(!f||!p||!_||!DI_FILTERS.isBlockDi(_))return!1;const b=_.block.id;let v=null,k=null;const x=d.clipboardData?.items;if(!(!x||x.length==0)){for(let M=0;M<x.length;M++){const E=x[M],L=E.type.match(/image\/([a-z]+)/);L&&(v=L[1],k=E.getAsFile())}if(v&&k){const M=generateImageName(k.name,v),E=[BLOCK_CONTENT_TYPES.IMAGE,M,"left",null,null,[]];let L=null;c.state.doc.content.size==0?(L=b,e.addTask(()=>{l.blockEditor.changeBlockContent({blockId:b,content:E})})):e.addTask(()=>{const V=l.blockEditor,{newNormalBlockId:B}=V.insertNormalBlock({pos:{baseBlockId:b,offset:1},content:E})??{};L=B??null}),L&&n.uploadImage(k,M)}}}}})},blockTags={ADDRESS:!0,ARTICLE:!0,ASIDE:!0,BLOCKQUOTE:!0,BODY:!0,CANVAS:!0,DD:!0,DIV:!0,DL:!0,FIELDSET:!0,FIGCAPTION:!0,FIGURE:!0,FOOTER:!0,FORM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HEADER:!0,HGROUP:!0,HR:!0,LI:!0,NOSCRIPT:!0,OL:!0,OUTPUT:!0,P:!0,PRE:!0,SECTION:!0,TABLE:!0,TFOOT:!0,UL:!0},ignoreTags={HEAD:!0,NOSCRIPT:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,TITLE:!0};function parseHtml(o,e){const a=new DOMParser().parseFromString(e,"text/html"),s=[],l={},c=DOMParser$1.fromSchema(o);function d(f,p,_){let b=c.parse(f);if(b.content.size===0)return;const v=[],k=linkify(b.content,v),x=Slice.maxOpen(k);b=b.replace(0,b.content.size,x);const M=nanoid();l[M]={id:M,content:[BLOCK_CONTENT_TYPES.TEXT,b.toJSON()],children:[],parentId:_},p.push(l[M])}function u(f,p,_){if(f instanceof HTMLOListElement||f instanceof HTMLUListElement){const b=p.length===0?p:p[p.length-1].children,v=p.length===0?_:p[p.length-1].id;for(const k of f.childNodes)u(k,b,v)}else if(f instanceof HTMLElement&&blockTags[f.tagName]){const b=[...f.childNodes.values()];for(let v=0;v<b.length;v++){let k=v;for(;k<b.length;k++){const x=b[k];if(x instanceof HTMLElement&&blockTags[x.tagName])break}if(k>v){const x=document.createElement("div");x.append(...b.slice(v,k)),d(x,p,_),x.remove()}k<b.length&&u(b[k],p,_),v=k}}else{if(f instanceof HTMLElement&&ignoreTags[f.tagName])return;d(f,p,_)}}return u(a.body,s,void 0),[s,l]}const PingSchema={request:z$1.object({}),result:z$1.object({})},FetchWebpageTitleSchema={request:z$1.object({webpageUrl:z$1.string()}),result:z$1.object({title:z$1.string()})},ping=usePostApi("/ping",PingSchema.request,PingSchema.result),fetchWebpageTitle=usePostApi("/fetch-webpage-title",FetchWebpageTitleSchema.request,FetchWebpageTitleSchema.result),hrefToTitle=(o,e)=>{const n=[];e.state.doc.descendants((a,s)=>{const l=o.marks.link.isInSet(a.marks);l&&n.push(l.attrs.href)});for(const a of n)fetchWebpageTitle({webpageUrl:a}).then(s=>{if(!s.success)return;const l=s.data.title;if(!l||e.isDestroyed)return;let c=null;if(e.state.doc.descendants((p,_)=>{if(c)return!1;const b=o.marks.link.isInSet(p.marks);if(b&&b.attrs.href===a)return c={node:p,pos:_},!1}),!c)return;const d=o.marks.link.create({href:a}),u=o.text(l,[d]),f=e.state.tr.replaceWith(c.pos,c.pos+c.node.nodeSize,u);e.dispatch(f)})},mkPasteTextPlugin=o=>{const e=o.lastFocusContext,n=o.blocksContext?.blocksManager,a=o.blocksContext?.blockEditor;return new Plugin({props:{handlePaste(s,l){if(!e||!n||!a)return!1;l.preventDefault(),l.stopImmediatePropagation();const c=useTaskQueue(),d=e.lastFocusedBlockTree.value,u=e.lastFocusedDiId.value,f=u?d?.getDi(u):null;if(!d||!u||!f||!DI_FILTERS.isBlockDi(f))return!1;const p=s.state.doc.textContent.trim()==="",_=f.block.id,b=o.getSchema(),v=l.clipboardData?.getData("text/html");if(v){const[k,x]=parseHtml(b,v);if(k.length===0)return!1;if(Object.keys(x).length===1){const M=Object.values(x)[0];if(M.content[0]===BLOCK_CONTENT_TYPES.TEXT){const E=Node$1.fromJSON(b,M.content[1]),L=s.state.tr.replaceSelectionWith(E);return s.dispatch(L),hrefToTitle(b,s),!0}}return c.addTask(async()=>{const M=n.createBlockTransaction({type:"ui"});if(Object.values(x).forEach(E=>{E.parentId!=null&&M.addBlock({type:"normalBlock",id:E.id,parentId:E.parentId,childrenIds:E.children.map(L=>L.id),fold:!1,content:E.content,metadata:{}})}),a.insertNormalBlocks({pos:{baseBlockId:_,offset:1},blocks:k.map(E=>({id:E.id,content:E.content,childrenIds:E.children.map(L=>L.id)})),tr:M,commit:!1}),p&&M.deleteBlock(_),M.commit(),d){await d.nextUpdate();const E=k[k.length-1].id;if(E){const L=d.findDi(V=>V.type==="basic-block"&&V.block.id===E);L&&(d.focusDi(L.itemId),d.moveCursorToTheEnd(L.itemId))}}}),hrefToTitle(b,s),!0}else{const k=l.clipboardData?.getData("text/plain");if(!k)return!1;const x=k.split(/\r?\n/).filter(M=>M.trim());return x.length===0?!1:(c.addTask(async()=>{const M=n.createBlockTransaction({type:"ui"});if(x.length===1){const L=plainTextToPmNode(x[0],b),V=s.state.tr.replaceSelectionWith(L);s.dispatch(V),hrefToTitle(b,s);return}const{newNormalBlockIds:E}=a.insertNormalBlocks({pos:{baseBlockId:_,offset:1},blocks:x.map(L=>({content:plainTextToTextContent(L,b)})),tr:M,commit:!1})??{};if(p&&M.deleteBlock(_),M.commit(),d){await d.nextUpdate();const L=E?.[E.length-1];if(L){const V=d.findDi(B=>B.type==="basic-block"&&B.block.id===L);V&&(d.focusDi(V.itemId),d.moveCursorToTheEnd(V.itemId))}}hrefToTitle(b,s)}),!0)}}}})},turnToInlineCode=o=>new InputRule(/`([^`]+)`$/,(e,n)=>{const a=e.selection.anchor,s=o.getSchema(),l=s.marks.code.create({}),c=s.text(n[1],[l]),d=e.tr.replaceRangeWith(a-n[0].length+1,a,c);return d.removeStoredMark(l),d});var _sfc_main$1X=defineComponent({__name:"TextContent",props:{blockTree:{},itemId:{},block:{},readonly:{type:Boolean},highlightTerms:{},highlightRefs:{}},setup(o){const e=o,{blocksManager:n,blockEditor:a}=BlocksContext.useContext(),s=FloatingMathInputContext.useContext(),l=HistoryContext.useContext(),c=useTaskQueue(),d=shallowRef(null),u=ref(null),f={mathInline(v,k,x){return new MathInlineKatex(v,k,x,s)}},p=computed(()=>getPmSchema({pushHistoryItem:l?l.pushHistoryItem:void 0,getMainTree:e.blockTree?()=>e.blockTree:void 0,getBlockRef:n.getBlockRef})),_=({newDoc:v,oldSelection:k,newSelection:x})=>{const M=e.block.id,E=[BLOCK_CONTENT_TYPES.TEXT,v];d.value=v,c.addTask(({mergedTasks:L})=>{const V=L[0],B=n.createBlockTransaction({type:"ui"});a.changeBlockContent({blockId:M,content:E,tr:B,commit:!1}),B.meta.envUndoStrategy="create",B.envInfo.onCreate={...B.envInfo.onCreate,selection:V?.meta?.oldSelection??k},B.commit()},{type:"updateBlockContent"+M,delay:500,debounce:!0,meta:{oldSelection:k,newSelection:x}})},b=v=>e.readonly?[]:[inputRules({rules:[openRefSuggestions(v),turnToCodeBlock(v),turnToInlineCode(v)]}),mkKeymapPlugin(v),mkPasteImagePlugin(v),mkPasteTextPlugin(v)];return watch(()=>e.block.content,v=>{if(v[0]!=BLOCK_CONTENT_TYPES.TEXT)return;const k=e.block.origin;k.type==="ui"&&k.changeSources?.includes(e.block.id)&&d.value!==null||(d.value=v[1])},{immediate:!0}),onMounted(()=>{if(e.itemId){const v=u.value?.getEditorView();v&&e.blockTree?.registerEditorView(e.itemId,v)}}),onUnmounted(()=>{if(e.itemId){const v=u.value?.getEditorView();v&&(e.blockTree?.unregisterEditorView(e.itemId,v),v.destroy())}}),(v,k)=>(openBlock(),createBlock(_sfc_main$1Y,{class:"text-content block-content",ref_key:"pmWrapper",ref:u,doc:d.value,"onUpdate:doc":k[0]||(k[0]=x=>d.value=x),"item-id":v.itemId,"block-tree":v.blockTree,schema:p.value,readonly:v.readonly,"plugins-builder":b,"disable-spellcheck-when-blur":!0,"on-doc-changed":_,"node-views":f,"highlight-terms":v.highlightTerms,"highlight-refs":v.highlightRefs},null,8,["doc","item-id","block-tree","schema","readonly","highlight-terms","highlight-refs"]))}}),_sfc_main$1W=defineComponent({__name:"Popover",props:{defaultOpen:{type:Boolean},open:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const s=xe(o,e);return(l,c)=>(openBlock(),createBlock(unref(ys),normalizeProps(guardReactiveProps(unref(s))),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),_sfc_main$1V=defineComponent({inheritAttrs:!1,__name:"PopoverContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{default:4},align:{default:"center"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=computed(()=>{const{class:c,...d}=n;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(bs),{style:{backgroundColor:"red"}},{default:withCtx(()=>[createVNode(unref(ws),mergeProps({...unref(l),...c.$attrs},{class:unref(cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_sfc_main$1U=defineComponent({__name:"PopoverTrigger",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(gs),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),_sfc_main$1T=defineComponent({__name:"ToastAction",props:{altText:{},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Tg),mergeProps(n.value,{class:unref(cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}});const TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6,actionTypes={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let count=0;function genId(){return count=(count+1)%Number.MAX_VALUE,count.toString()}const toastTimeouts=new Map;function addToRemoveQueue(o){if(toastTimeouts.has(o))return;const e=setTimeout(()=>{toastTimeouts.delete(o),dispatch({type:actionTypes.REMOVE_TOAST,toastId:o})},TOAST_REMOVE_DELAY);toastTimeouts.set(o,e)}const state=ref({toasts:[]});function dispatch(o){switch(o.type){case actionTypes.ADD_TOAST:state.value.toasts=[o.toast,...state.value.toasts].slice(0,TOAST_LIMIT);break;case actionTypes.UPDATE_TOAST:state.value.toasts=state.value.toasts.map(e=>e.id===o.toast.id?{...e,...o.toast}:e);break;case actionTypes.DISMISS_TOAST:{const{toastId:e}=o;e?addToRemoveQueue(e):state.value.toasts.forEach(n=>{addToRemoveQueue(n.id)}),state.value.toasts=state.value.toasts.map(n=>n.id===e||e===void 0?{...n,open:!1}:n);break}case actionTypes.REMOVE_TOAST:o.toastId===void 0?state.value.toasts=[]:state.value.toasts=state.value.toasts.filter(e=>e.id!==o.toastId);break}}const useToast=()=>({toasts:computed(()=>state.value.toasts),toast,dismiss:o=>dispatch({type:actionTypes.DISMISS_TOAST,toastId:o})});function toast(o){const e=genId(),n=s=>dispatch({type:actionTypes.UPDATE_TOAST,toast:{...s,id:e}}),a=()=>dispatch({type:actionTypes.DISMISS_TOAST,toastId:e});return dispatch({type:actionTypes.ADD_TOAST,toast:{...o,id:e,open:!0,onOpenChange:s=>{s||a()}}}),{id:e,dismiss:a,update:n}}const BlockMoverContext=createContext(()=>{const{blocksManager:o,blockEditor:e}=BlocksContext.useContext(),{lastFocusedBlockTree:n,lastFocusedDiId:a}=LastFocusContext.useContext(),{search:s}=IndexContext.useContext(),l=ref(null),c=computed({get:()=>l.value!==null,set:j=>!j&&(l.value=null)}),d=ref(""),u=ref(0),f=ref([]),p=ref(!1),{toast:_}=useToast(),{t:b}=useI18n(),v="block-mover-content";let k=!1;const x=useDebounceFn(()=>{if(!d.value||d.value.trim().length==0){f.value=[];return}const j=s(d.value);f.value=j.slice(0,100).map(I=>o.getBlockRef(I)).filter(I=>{const U=I.value;return U!=null&&U.content[0]===BLOCK_CONTENT_TYPES.TEXT}),u.value=0},100),M=(j,I=500)=>(p.value=!0,setTimeout(()=>p.value=!1,I),j()),E=j=>{if(j==null)return;const I=n.value,U=a.value,W=U?I?.getDi(U):null;if(!I||!U||!W||!DI_FILTERS.isBlockDi(W))return;const K=W.block.id,G=useTaskQueue(),Z={parentId:j,childIndex:"last-space"};G.addTask(async()=>{e!=null&&(k&&e.insertNormalBlock({pos:{baseBlockId:K,offset:0},content:blockRefToTextContent(K)}),e.moveBlock({blockId:K,pos:Z}),_({title:b("kbView.blockMover.moveSuccess",{count:1}),action:h(_sfc_main$1T,{altText:b("kbView.blockMover.focusMovedBlock"),onClick:oe=>{oe.stopPropagation(),I.focusBlock(K,{highlight:!0,expandIfFold:!0})}},{default:()=>b("kbView.blockMover.focusMovedBlock")})}),l.value=null)})},L=(j,I={})=>{d.value=I.initQuery??"",k=I.leaveRef??!1,I.leaveMirror,u.value=0,l.value=j},V=()=>{setTimeout(()=>{const j=document.body.querySelector(`.${v} .focus`);j instanceof HTMLElement&&j.scrollIntoView({block:"nearest"})})},B=generateKeydownHandlerSimple({Escape:{run:j=>j.isComposing||j.keyCode===229?!1:(l.value=null,E(null),!0),preventDefault:!0,stopPropagation:!0},Enter:{run:j=>{if(j.isComposing||j.keyCode===229)return!1;const I=f.value[u.value]?.value?.id;return I!=null&&E(I),!0},preventDefault:!0,stopPropagation:!0},Backspace:{run:j=>j.isComposing||j.keyCode===229?!1:d.value.length==0?(E(null),!0):!1,preventDefault:!0,stopPropagation:!0},ArrowUp:{run:j=>j.isComposing||j.keyCode===229?!1:M(()=>(u.value>0?u.value--:u.value=f.value.length-1,V(),!0)),preventDefault:!0,stopPropagation:!0},ArrowDown:{run:j=>j.isComposing||j.keyCode===229?!1:M(()=>(u.value<f.value.length-1?u.value++:u.value=0,V(),!0)),preventDefault:!0,stopPropagation:!0},Home:{run:j=>j.isComposing||j.keyCode===229?!1:M(()=>(u.value=0,V(),!0)),preventDefault:!0,stopPropagation:!0},End:{run:j=>j.isComposing||j.keyCode===229?!1:M(()=>(u.value=f.value.length-1,V(),!0)),preventDefault:!0,stopPropagation:!0}});return{showPos:l,open:c,query:d,cb:E,focusItemIndex:u,suggestions:f,suppressMouseOver:p,updateSuggestions:x,withScrollSuppressed:M,openBlockMover:L,handleKeydown:B,contentClass:v}}),calcPopoverPos=(o,e,n,a,s={})=>{const l=s.offset??(p=>p),c=s.minMargin??20,d=window.innerWidth,u=window.innerHeight,f=l({leftDown:{x:n-o,y:a},leftUp:{x:n-o,y:a-e},rightDown:{x:n,y:a},rightUp:{x:n,y:a-e}});for(const p of["leftDown","leftUp"])f[p].x<c&&(f[p].x=c);for(const p of["rightDown","rightUp"])f[p].x+o>d-c&&(f[p].x=d-c-o);for(const p of["leftUp","rightUp"])f[p].y<c&&(f[p].y=c);for(const p of["leftDown","rightDown"])f[p].y+e>u-c&&(f[p].y=u-c-e);if(s.avoidColideWith){const p=s.avoidColideWith.getBoundingClientRect(),_=s.minCollisionDist??10;for(const b of["leftDown","leftUp","rightDown","rightUp"]){const v=f[b];v.x<p.right+_&&v.x+o>p.left-_&&v.y<p.bottom+_&&v.y+e>p.top-_&&(v.x<p.left?v.x=Math.max(p.left-_-o,c):v.x=Math.min(p.right+_,d-c-o),v.y<p.top?v.y=Math.max(p.top-_-e,c):v.y=Math.min(p.bottom+_,u-c-e))}}return f},clip=(o,e,n)=>(e>n&&([e,n]=[n,e]),o<e?e:o>n?n:o),_hoisted_1$E={class:"relative px-1"},_hoisted_2$l={class:"my-2 max-h-[240px] overflow-y-auto px-1"},_hoisted_3$h=["onMouseover"],_hoisted_4$e={key:0,class:"text-center"},_hoisted_5$7={class:"text-sm text-muted-foreground"};var _sfc_main$1S=defineComponent({__name:"BlockMover",setup(o){const{showPos:e,open:n,query:a,focusItemIndex:s,suggestions:l,suppressMouseOver:c,updateSuggestions:d,contentClass:u,handleKeydown:f}=BlockMoverContext.useContext(),p=computed(()=>a.value.length==0?[]:hybridTokenize(a.value,!1,1,!1)??[]);return watch(e,async()=>{if(await nextTick(),!e.value||!(document.querySelector("[data-radix-popper-content-wrapper]")instanceof HTMLElement))return;const{x:b,y:v}=e.value,k=calcPopoverPos(300,300,b,v,{offset:x=>(x.leftDown.y+=30,x.rightDown.y+=30,x)});document.body.style.setProperty("--popover-x",`${k.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${k.rightDown.y}px`)}),(_,b)=>(openBlock(),createBlock(unref(_sfc_main$1W),{open:unref(n),"onUpdate:open":b[2]||(b[2]=v=>isRef(n)?n.value=v:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1V),{class:normalizeClass(`${unref(u)} py-2 pb-0 px-1 max-h-[300px] max-w-[300px] overflow-hidden`),"trap-focus":"",tabindex:"-1",onKeydown:unref(f)},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$E,[createVNode(unref(Search),{class:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),createVNode(unref(_sfc_main$1$),{onInput:b[0]||(b[0]=v=>!v.isComposing&&unref(d)()),onCompositionend:unref(d),modelValue:unref(a),"onUpdate:modelValue":b[1]||(b[1]=v=>isRef(a)?a.value=v:null),placeholder:_.$t("kbView.blockMover.inputPlaceholder"),class:"h-[32px] pl-8 rounded-sm focus-visible:outline-none focus-visible:ring-transparent"},null,8,["onCompositionend","modelValue","placeholder"])]),createBaseVNode("div",_hoisted_2$l,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(l),(v,k)=>(openBlock(),createElementBlock("div",{key:v.value.id,class:normalizeClass(["relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 text-sm outline-none [&.focus]:bg-accent [&.focus]:text-accent-foreground",{focus:unref(s)===k}]),onMouseover:x=>!unref(c)&&(s.value=k)},[v.value.content[0]===unref(BLOCK_CONTENT_TYPES).TEXT?(openBlock(),createBlock(_sfc_main$1X,{key:0,block:v.value,readonly:!0,class:"*:cursor-default","highlight-terms":p.value},null,8,["block","highlight-terms"])):createCommentVNode("",!0)],42,_hoisted_3$h))),128)),unref(l).length===0?(openBlock(),createElementBlock("div",_hoisted_4$e,[createBaseVNode("span",_hoisted_5$7,toDisplayString$1(_.$t("kbView.refSuggestions.noSuggestions")),1)])):createCommentVNode("",!0)])]),_:1},8,["class","onKeydown"])]),_:1},8,["open"]))}});const BlockSelectDragContext=createContext(()=>{const o=ref({topLevelOnly:[],allNonFolded:[]}),e=ref(null),n=ref(!1);return{selectedBlockIds:o,draggingDropPos:e,dragging:n}}),generateDisplayItems=o=>{const{rootBlockId:e,rootBlockLevel:n,enlargeRootBlock:a,showBacklinks:s,showPotentialLinks:l,blocksManager:c,expandedBP:d,getBacklinksContext:u,getIndexContext:f}=o,p=[],_=c.getBlock(e);if(!_)return p;a&&p.push({type:"root-block",itemId:`root-block-${e}`,block:_}),c.forDescendantsWithMissingBlock({rootBlockId:e,rootBlockLevel:a?-1:n,nonFoldOnly:!0,includeSelf:!a,onEachBlock:(v,k)=>{p.push({type:"basic-block",itemId:`block-${v.id}`,block:v,level:k})},onMissingBlock:(v,k,x)=>{p.push({type:"missing-block",itemId:`missing-block-${v}-${x}`,blockId:v,parentId:k,level:x})}});let b=[void 0];return s&&addBacklinkItems(e,p,c,b,d,u),l&&addPotentialLinksItems(e,p,c,b,d,u,f),p},addBacklinkItems=(o,e,n,a,s,l)=>{const{getBacklinksConsideringAliases:c}=l()??{};if(!c)return;const d=c(o);if(d.size<=0)return;const u=new Set(d),f=new Set;let p;do{p=u.size;for(const _ of u){if(f.has(_))continue;n.getBlockPath(_).slice(1).some(k=>u.has(k.id)&&!f.has(k.id))&&f.add(_)}for(const _ of f)u.delete(_)}while(u.size!==p);e.push({type:"backlink-header",itemId:`backlink-header-${o}`,blockId:o,backlinks:[...d]});for(const _ of u){const b=n.getBlock(_);b&&(e.push({type:"backlink-block",itemId:`backlink-block-${_}`,block:b,refBlockId:o}),n.forDescendants({rootBlockId:_,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!1,ignore:v=>s[v.id]?"keep-self-and-descendants":"ignore-descendants",onEachBlock:(v,k)=>{e.push({type:"backlink-descendant",itemId:`backlink-descendant-${_}-${v.id}`,block:v,level:k})}}))}a[0]=d},addPotentialLinksItems=(o,e,n,a,s,l,c)=>{const{getBacklinksConsideringAliases:d}=l()??{},{search:u}=c()??{};if(!u||!d)return;const f=a[0]??d(o),p=n.getBlock(o);if(p&&p.content[0]===BLOCK_CONTENT_TYPES.TEXT){const _=u(p.ctext).map(b=>n.getBlock(b)).filter(b=>b!=null).filter(b=>!f.has(b.id)&&b.id!==o).filter(b=>b.content[0]===BLOCK_CONTENT_TYPES.TEXT);if(_.length>0){e.push({type:"potential-links-header",itemId:`potential-links-header-${o}`,blockId:o,potentialLinks:_.map(b=>b.id)});for(const b of _){const v=n.getBlock(b.id);v&&(e.push({type:"potential-links-block",itemId:`potential-links-block-${b.id}`,block:v,refBlockId:o}),n.forDescendants({rootBlockId:b.id,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!1,ignore:k=>s[k.id]?"keep-self-and-descendants":"ignore-descendants",onEachBlock:(k,x)=>{e.push({type:"potential-links-descendant",itemId:`potential-links-descendant-${k.id}`,block:k,level:x})}}))}}}},inViewport=(o,e=60,n=0)=>{const a=o.getBoundingClientRect();return a.top<window.innerHeight-n&&a.bottom>e},getHoveredElementWithClass=(o,e)=>{let n=o,a;for(;n instanceof Node;){if(n instanceof HTMLElement&&n.classList.contains(e)){a=n;break}n=n.parentNode}return a instanceof Element?a:null},mitt=()=>{const o=mitt$1();return Object.assign(o,{once:(e,n)=>{const a=s=>{o.off(e,a),n(s)};o.on(e,a)}})};function vue3h(o,e,n){const{attrs:a,on:s,...l}=e;let c={};return s&&Object.entries(s).forEach(d=>{const[u,f]=d;c[`on${u[0].toUpperCase()+u.slice(1)}`]=f}),h(o,{...a,...c,...l},n)}const _h=vue3h;function vue3hChild(o,e,n){const{attrs:a,on:s,...l}=e;let c={};return s&&Object.entries(s).forEach(d=>{const[u,f]=d;c[`on${u[0].toUpperCase()+u.slice(1)}`]=f}),h(o,{...a,...c,...l},{default:()=>n})}const _hChild=vue3hChild;function vue3getSlot(o,e){var n;return(n=o.$slots)==null?void 0:n[e]}const getSlot=vue3getSlot,useObserverItem=o=>{const e=ref(null);return onMounted(()=>{o.resizeObserver&&e.value&&o.resizeObserver.observe(e.value)}),onBeforeUnmount(()=>{o.resizeObserver&&e.value&&o.resizeObserver.unobserve(e.value)}),{itemRefEl:e}},ObserverItem=defineComponent({name:"ObserverItem",props:{resizeObserver:{type:ResizeObserver,require:!0},id:{type:[String,Number],require:!0}},setup(o){return useObserverItem(o)},render(){var o;const{id:e}=this;return _h("div",{ref:"itemRefEl",attrs:{"data-id":e}},[(o=getSlot(this,"default"))==null?void 0:o()])}}),defaultProps={itemGap:0,fixed:!1,buffer:0,bufferTop:0,bufferBottom:0,scrollDistance:0,horizontal:!1,fixSelection:!1,start:0,offset:0,listStyle:"",listClass:"",itemStyle:"",itemClass:"",headerClass:"",headerStyle:"",footerClass:"",footerStyle:"",stickyHeaderClass:"",stickyHeaderStyle:"",stickyFooterClass:"",stickyFooterStyle:""};function useVirtList(o,e){const n=new Proxy(o,{get(ue,we){var _e;return(_e=Reflect.get(ue,we))!=null?_e:Reflect.get(defaultProps,we)}}),a=ref(null),s=ref(null),l=ref(null),c=ref(null),d=ref(null),u=ref(null),f=new Map,p=ref(0);let _="backward",b=!1,v=!1,k=!1,x=null;const M=shallowReactive({clientSize:0,headerSize:0,footerSize:0,stickyHeaderSize:0,stickyFooterSize:0}),E=shallowReactive({views:0,offset:0,listTotalSize:0,virtualSize:0,inViewBegin:0,inViewEnd:0,renderBegin:0,renderEnd:0,bufferTop:0,bufferBottom:0});function L(){const ue=n.horizontal?"scrollLeft":"scrollTop";return a.value?a.value[ue]:0}function V(){return M.headerSize+M.footerSize+M.stickyHeaderSize+M.stickyFooterSize}function B(){return E.listTotalSize+M.headerSize+M.footerSize+M.stickyHeaderSize+M.stickyFooterSize}function F(ue){var we;return n.fixed?n.minSize+n.itemGap:(we=f.get(String(ue)))!=null?we:n.minSize+n.itemGap}function j(ue,we){f.set(String(ue),we)}function I(ue){f.delete(String(ue))}function U(ue){var we,_e;if(n.fixed)return{top:(n.minSize+n.itemGap)*ue,current:n.minSize+n.itemGap,bottom:(n.minSize+n.itemGap)*(ue+1)};const{itemKey:Be}=n;let Ge=M.headerSize;for(let We=0;We<=ue-1;We+=1){const ee=F((we=n.list[We])==null?void 0:we[Be]);Ge+=ee}const ze=F((_e=n.list[ue])==null?void 0:_e[Be]);return{top:Ge,current:ze,bottom:Ge+ze}}function W(ue){k=!0;const we=n.horizontal?"scrollLeft":"scrollTop";a.value&&(a.value[we]=ue)}async function K(ue){if(ue<0)return;if(ue>=n.list.length-1){oe();return}let{top:we}=U(ue);W(we);const _e=()=>{const{top:Be}=U(ue);if(W(Be),we!==Be){we=Be,x=_e;return}x=null};x=_e}async function G(ue){var we;const{top:_e,bottom:Be}=U(ue),Ge=L(),ze=L()+M.clientSize,We=F((we=n.list[ue])==null?void 0:we[n.itemKey]);if(_e<Ge&&Ge<Be&&We<M.clientSize){W(_e);return}if(_e+M.stickyHeaderSize<ze&&ze<Be+M.stickyHeaderSize&&We<M.clientSize){W(Be-M.clientSize+M.stickyHeaderSize);return}if(_e+M.stickyHeaderSize>=ze){K(ue);return}if(Be<=Ge){K(ue);return}}async function Z(){let ue=0;function we(){ue+=1,W(0),setTimeout(()=>{var _e;if(ue>10)return;const Be=n.horizontal?"scrollLeft":"scrollTop";((_e=a?.value)==null?void 0:_e[Be])!==0&&we()},3)}we()}async function oe(){let ue=0;function we(){ue+=1,W(B()),setTimeout(()=>{ue>10||Math.abs(Math.round(E.offset+M.clientSize)-Math.round(B()))>2&&we()},3)}we()}function Y(ue){var we;ue<E.inViewBegin&&(b=!0),E.inViewBegin=ue,E.inViewEnd=Math.min(ue+E.views,n.list.length-1),(we=e?.rangeUpdate)==null||we.call(e,E.inViewBegin,E.inViewEnd)}function se(){var ue,we;const{views:_e,offset:Be,inViewBegin:Ge}=E,{itemKey:ze}=n,We=Be-M.headerSize;let ee=Ge,re=dt();if(We<0){Y(0);return}if(_==="forward"){if(We>=re)return;for(let Te=ee-1;Te>=0;Te-=1){const Xe=F((ue=n.list[Te])==null?void 0:ue[ze]);if(re-=Xe,re<=We&&We<re+Xe){ee=Te;break}}}if(_==="backward"){if(We<=re)return;for(let Te=ee;Te<=n.list.length-1;Te+=1){const Xe=F((we=n.list[Te])==null?void 0:we[ze]);if(re<=We&&We<re+Xe){ee=Te;break}re+=Xe}b=!1}ee!==E.inViewBegin&&Y(ee)}function le(ue){var we,_e,Be;(we=e?.scroll)==null||we.call(e,ue);const Ge=L();Ge!==E.offset&&(_=Ge<E.offset?"forward":"backward",E.offset=Ge,se(),_==="forward"&&E.offset-n.scrollDistance<=0&&((_e=e?.toTop)==null||_e.call(e,n.list[0])),_==="backward"&&Math.round(E.offset+n.scrollDistance)>=Math.round(E.listTotalSize+V()-M.clientSize)&&((Be=e?.toBottom)==null||Be.call(e,n.list[n.list.length-1])))}function ce(){const ue=Math.ceil(M.clientSize/(n.minSize+n.itemGap))+1;E.views=ue}function de(){ce(),Y(E.inViewBegin)}function ge(){var ue;if(n.fixed){E.listTotalSize=(n.minSize+n.itemGap)*n.list.length;return}const{itemKey:we}=n;let _e=0;for(let Be=0;Be<=n.list.length-1;Be+=1)_e+=F((ue=n.list[Be])==null?void 0:ue[we]);E.listTotalSize=_e}function qe(){E.offset=0,E.listTotalSize=0,E.virtualSize=0,E.inViewBegin=0,E.inViewEnd=0,E.renderBegin=0,E.renderEnd=0,f.clear(),Oe()}function ke(ue){ge();let we=0;ue.forEach(_e=>{we+=F(_e[n.itemKey])}),Ne(),W(E.offset-we),se()}function Ee(ue){ge();let we=0;ue.forEach(_e=>{we+=F(_e[n.itemKey])}),Ne(),W(E.offset+we),v=!0,k=!1,se()}function Oe(){p.value+=1}let Ve;typeof ResizeObserver<"u"&&(Ve=new ResizeObserver(ue=>{var we;let _e=0;for(const Be of ue){const Ge=Be.target.dataset.id;if(Ge){const ze=F(Ge);let We=0;if(Be.borderBoxSize){const ee=Array.isArray(Be.borderBoxSize)?Be.borderBoxSize[0]:Be.borderBoxSize;We=n.horizontal?ee.inlineSize:ee.blockSize}else We=n.horizontal?Be.contentRect.width:Be.contentRect.height;Ge==="client"?(M.clientSize=We,de()):Ge==="header"?M.headerSize=We:Ge==="footer"?M.footerSize=We:Ge==="stickyHeader"?M.stickyHeaderSize=We:Ge==="stickyFooter"?M.stickyFooterSize=We:ze!==We&&(j(Ge,We),_e+=We-ze,(we=e?.itemResize)==null||we.call(e,Ge,We))}}E.listTotalSize+=_e,x&&x(),(b||v)&&_e!==0&&!k&&(b=!1,v=!1,W(E.offset+_e)),k=!1}));const Ne=()=>{var ue;let we=0;const _e=E.renderBegin;for(let Be=0;Be<_e;Be++)we+=F((ue=n.list[Be])==null?void 0:ue[n.itemKey]);E.virtualSize=we};onBeforeMount(()=>{n.bufferTop?E.bufferTop=n.bufferTop:E.bufferTop=n.buffer,n.bufferBottom?E.bufferBottom=n.bufferBottom:E.bufferBottom=n.buffer}),onMounted(()=>{a.value&&(a.value.addEventListener("scroll",le),Ve?.observe(a.value)),d.value&&Ve?.observe(d.value),u.value&&Ve?.observe(u.value),l.value&&Ve?.observe(l.value),c.value&&Ve?.observe(c.value),n.start?K(n.start):n.offset&&W(n.offset)}),onBeforeUnmount(()=>{a.value&&(a.value.removeEventListener("scroll",le),Ve?.unobserve(a.value),M.clientSize=0),d.value&&(Ve?.unobserve(d.value),M.stickyHeaderSize=0),u.value&&(Ve?.unobserve(u.value),M.stickyFooterSize=0),l.value&&(Ve?.unobserve(l.value),M.headerSize=0),c.value&&(Ve?.unobserve(c.value),M.footerSize=0)});function dt(){return E.virtualSize+pe(E.renderBegin,E.inViewBegin)}function pe(ue,we){var _e;const Be=Math.min(ue,we),Ge=Math.max(ue,we);let ze=0;for(let We=Be;We<Ge;We+=1)ze+=F((_e=n.list[We])==null?void 0:_e[n.itemKey]);return ze}function fe(){return E}const me=shallowRef([]);function te(ue,we){const _e=E.renderBegin;E.renderBegin=ue,E.renderEnd=we,ue>_e?E.virtualSize+=pe(ue,_e):E.virtualSize-=pe(ue,_e),me.value=n.list.slice(E.renderBegin,E.renderEnd+1),Ne()}return watch(()=>[E.inViewBegin,E.inViewEnd,p.value],(ue,we)=>{if(ue&&we){const[_e]=ue,Be=E.renderBegin;let Ge=_e,ze=E.inViewEnd;if(Ge=Math.max(0,Ge-E.bufferTop),ze=Math.min(ze+E.bufferBottom,n.list.length-1>0?n.list.length-1:0),n?.renderControl){const{begin:We,end:ee}=n.renderControl(_e,E.inViewEnd);Ge=We,ze=ee}E.renderBegin=Ge,E.renderEnd=ze,Ge>Be?E.virtualSize+=pe(Ge,Be):E.virtualSize-=pe(Ge,Be),me.value=n.list.slice(E.renderBegin,E.renderEnd+1)}},{immediate:!0}),watch(()=>n.list.length,()=>{if(n.list.length<=0){qe();return}ge(),Y(E.inViewBegin),Ne(),Oe()},{immediate:!0}),{props:n,renderList:me,clientRefEl:a,listRefEl:s,headerRefEl:l,footerRefEl:c,stickyHeaderRefEl:d,stickyFooterRefEl:u,reactiveData:E,slotSize:M,sizesMap:f,resizeObserver:Ve,getReactiveData:fe,getOffset:L,getSlotSize:V,reset:qe,scrollToIndex:K,manualRender:te,scrollIntoView:G,scrollToTop:Z,scrollToBottom:oe,scrollToOffset:W,getItemSize:F,deleteItemSize:I,deletedList2Top:ke,addedList2Top:Ee,getItemPosByIndex:U,forceUpdate:Oe}}const VirtList=defineComponent({name:"VirtList",emits:{scroll:o=>o,toTop:o=>o,toBottom:o=>o,itemResize:(o,e)=>!0,rangeUpdate:(o,e)=>!0},props:{list:{type:Array,default:()=>[]},itemKey:{type:[String,Number],required:!0},minSize:{type:Number,default:20,required:!0},itemGap:{type:Number,default:0},renderControl:{type:Function,default:void 0},fixed:{type:Boolean,default:!1},buffer:{type:Number,default:0},bufferTop:{type:Number,default:0},bufferBottom:{type:Number,default:0},scrollDistance:{type:Number,default:0},horizontal:{type:Boolean,default:!1},start:{type:Number,default:0},offset:{type:Number,default:0},listStyle:{type:String,default:""},listClass:{type:String,default:""},itemStyle:{type:String,default:""},itemClass:{type:String,default:""},headerClass:{type:String,default:""},headerStyle:{type:String,default:""},footerClass:{type:String,default:""},footerStyle:{type:String,default:""},stickyHeaderClass:{type:String,default:""},stickyHeaderStyle:{type:String,default:""},stickyFooterClass:{type:String,default:""},stickyFooterStyle:{type:String,default:""}},setup(o,e){return useVirtList(o,{scroll:a=>{e.emit("scroll",a)},toTop:a=>{e.emit("toTop",a)},toBottom:a=>{e.emit("toBottom",a)},itemResize:(a,s)=>{e.emit("itemResize",a,s)},rangeUpdate:(a,s)=>{e.emit("rangeUpdate",a,s)}})},render(){const{renderList:o,reactiveData:e,resizeObserver:n}=this,{itemGap:a,itemKey:s,horizontal:l,listStyle:c,listClass:d,itemStyle:u,itemClass:f,headerClass:p,headerStyle:_,footerClass:b,footerStyle:v,stickyHeaderClass:k,stickyHeaderStyle:x,stickyFooterClass:M,stickyFooterStyle:E}=this.props,L=()=>{var G;return getSlot(this,"stickyHeader")?_h("div",{key:"slot-sticky-header",class:k,style:`position: sticky; z-index: 10; ${l?"left: 0":"top: 0;"} ${x}`,ref:"stickyHeaderRefEl",attrs:{"data-id":"stickyHeader"}},[(G=getSlot(this,"stickyHeader"))==null?void 0:G()]):null},V=()=>{var G;return getSlot(this,"stickyFooter")?_h("div",{key:"slot-sticky-footer",class:M,style:`position: sticky; z-index: 10; ${l?"right: 0":"bottom: 0;"} ${E}`,ref:"stickyFooterRefEl",attrs:{"data-id":"stickyFooter"}},[(G=getSlot(this,"stickyFooter"))==null?void 0:G()]):null},B=()=>{var G;return getSlot(this,"header")?_h("div",{key:"slot-header",class:p,style:_,ref:"headerRefEl",attrs:{"data-id":"header"}},[(G=getSlot(this,"header"))==null?void 0:G()]):null},F=()=>{var G;return getSlot(this,"footer")?_h("div",{key:"slot-footer",class:b,style:v,ref:"footerRefEl",attrs:{"data-id":"footer"}},[(G=getSlot(this,"footer"))==null?void 0:G()]):null},{listTotalSize:j,virtualSize:I,renderBegin:U}=e,W=a>0?`padding: ${a/2}px 0; `:"",K=()=>{var G,Z;const oe=[];for(let le=0;le<o.length;le+=1){const ce=o[le];oe.push(_hChild(ObserverItem,{key:ce[s],class:f,style:`${W}${u}`,attrs:{id:ce[s],resizeObserver:n}},(G=getSlot(this,"default"))==null?void 0:G({itemData:ce,index:U+le})))}if(oe.length===0&&getSlot(this,"empty")){const le=this.slotSize.clientSize-this.getSlotSize();oe.push(_h("div",{key:`slot-empty-${le}`,style:`height: ${le}px`},[(Z=getSlot(this,"empty"))==null?void 0:Z()]))}const Y=l?`will-change: width; min-width: ${j}px; display: flex; ${c}`:`will-change: height; min-height: ${j}px; ${c}`,se=l?`width: ${I}px; will-change: width;`:`height: ${I}px; will-change: height;`;return _h("div",{ref:"listRefEl",class:d,style:Y},[_h("div",{style:se}),oe])};return _h("div",{ref:"clientRefEl",class:"virt-list__client",style:"width: 100%; height: 100%; overflow: auto;",attrs:{"data-id":"client"}},[L(),B(),K(),F(),V()])}}),ThemeContext=createContext(()=>{const o=useColorMode();return{theme:o,toggleTheme:()=>{o.value=o.value==="dark"?"light":"dark"}}});function legacy(o){return new LanguageSupport(StreamLanguage.define(o))}function sql(o){return import("./index-BJQFTA9y.js").then(async m=>{await m.__tla;return m}).then(e=>e.sql({dialect:e[o]}))}const languages=[LanguageDescription.of({name:"C",extensions:["c","h","ino"],load(){return import("./index-Mo-vLLsJ.js").then(async m=>{await m.__tla;return m}).then(o=>o.cpp())}}),LanguageDescription.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load(){return import("./index-Mo-vLLsJ.js").then(async m=>{await m.__tla;return m}).then(o=>o.cpp())}}),LanguageDescription.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load(){return sql("Cassandra")}}),LanguageDescription.of({name:"CSS",extensions:["css"],load(){return import("./index-fwBojWSN.js").then(async m=>{await m.__tla;return m}).then(o=>o.css())}}),LanguageDescription.of({name:"Go",extensions:["go"],load(){return import("./index-BqvXp1O6.js").then(async m=>{await m.__tla;return m}).then(o=>o.go())}}),LanguageDescription.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load(){return import("./index-Ck8pjGQB.js").then(async m=>{await m.__tla;return m}).then(o=>o.html())}}),LanguageDescription.of({name:"Java",extensions:["java"],load(){return import("./index-DlZ4AOCV.js").then(async m=>{await m.__tla;return m}).then(o=>o.java())}}),LanguageDescription.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load(){return import("./index-CWd-EDiP.js").then(async m=>{await m.__tla;return m}).then(o=>o.javascript())}}),LanguageDescription.of({name:"JSON",alias:["json5"],extensions:["json","map"],load(){return import("./index-Byweuwr_.js").then(async m=>{await m.__tla;return m}).then(o=>o.json())}}),LanguageDescription.of({name:"JSX",extensions:["jsx"],load(){return import("./index-CWd-EDiP.js").then(async m=>{await m.__tla;return m}).then(o=>o.javascript({jsx:!0}))}}),LanguageDescription.of({name:"LESS",extensions:["less"],load(){return import("./index-XQEzMVfS.js").then(async m=>{await m.__tla;return m}).then(o=>o.less())}}),LanguageDescription.of({name:"Liquid",extensions:["liquid"],load(){return import("./index-BxJ1Jaqf.js").then(async m=>{await m.__tla;return m}).then(o=>o.liquid())}}),LanguageDescription.of({name:"MariaDB SQL",load(){return sql("MariaSQL")}}),LanguageDescription.of({name:"Markdown",extensions:["md","markdown","mkd"],load(){return import("./index-DB9dWbu_.js").then(async m=>{await m.__tla;return m}).then(o=>o.markdown())}}),LanguageDescription.of({name:"MS SQL",load(){return sql("MSSQL")}}),LanguageDescription.of({name:"MySQL",load(){return sql("MySQL")}}),LanguageDescription.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load(){return import("./index-B-iZAUXt.js").then(async m=>{await m.__tla;return m}).then(o=>o.php())}}),LanguageDescription.of({name:"PLSQL",extensions:["pls"],load(){return sql("PLSQL")}}),LanguageDescription.of({name:"PostgreSQL",load(){return sql("PostgreSQL")}}),LanguageDescription.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load(){return import("./index-DRuu8_e1.js").then(async m=>{await m.__tla;return m}).then(o=>o.python())}}),LanguageDescription.of({name:"Rust",extensions:["rs"],load(){return import("./index-C7TNprDn.js").then(async m=>{await m.__tla;return m}).then(o=>o.rust())}}),LanguageDescription.of({name:"Sass",extensions:["sass"],load(){return import("./index-DYDP2u4f.js").then(async m=>{await m.__tla;return m}).then(o=>o.sass({indented:!0}))}}),LanguageDescription.of({name:"SCSS",extensions:["scss"],load(){return import("./index-DYDP2u4f.js").then(async m=>{await m.__tla;return m}).then(o=>o.sass())}}),LanguageDescription.of({name:"SQL",extensions:["sql"],load(){return sql("StandardSQL")}}),LanguageDescription.of({name:"SQLite",load(){return sql("SQLite")}}),LanguageDescription.of({name:"TSX",extensions:["tsx"],load(){return import("./index-CWd-EDiP.js").then(async m=>{await m.__tla;return m}).then(o=>o.javascript({jsx:!0,typescript:!0}))}}),LanguageDescription.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load(){return import("./index-CWd-EDiP.js").then(async m=>{await m.__tla;return m}).then(o=>o.javascript({typescript:!0}))}}),LanguageDescription.of({name:"WebAssembly",extensions:["wat","wast"],load(){return import("./index-Bboo-TTt.js").then(async m=>{await m.__tla;return m}).then(o=>o.wast())}}),LanguageDescription.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load(){return import("./index-DDJb51HP.js").then(async m=>{await m.__tla;return m}).then(o=>o.xml())}}),LanguageDescription.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load(){return import("./index-D6swgAjy.js").then(async m=>{await m.__tla;return m}).then(o=>o.yaml())}}),LanguageDescription.of({name:"APL",extensions:["dyalog","apl"],load(){return import("./apl-B4CMkyY2.js").then(o=>legacy(o.apl))}}),LanguageDescription.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load(){return import("./asciiarmor-Df11BRmG.js").then(o=>legacy(o.asciiArmor))}}),LanguageDescription.of({name:"ASN.1",extensions:["asn","asn1"],load(){return import("./asn1-CGOzndHr.js").then(o=>legacy(o.asn1({})))}}),LanguageDescription.of({name:"Asterisk",filename:/^extensions\.conf$/i,load(){return import("./asterisk-B-8jnY81.js").then(o=>legacy(o.asterisk))}}),LanguageDescription.of({name:"Brainfuck",extensions:["b","bf"],load(){return import("./brainfuck-C4LP7Hcl.js").then(o=>legacy(o.brainfuck))}}),LanguageDescription.of({name:"Cobol",extensions:["cob","cpy"],load(){return import("./cobol-_hGpxIKP.js").then(o=>legacy(o.cobol))}}),LanguageDescription.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load(){return import("./clike-wD8xDpL-.js").then(o=>legacy(o.csharp))}}),LanguageDescription.of({name:"Clojure",extensions:["clj","cljc","cljx"],load(){return import("./clojure-BMjYHr_A.js").then(o=>legacy(o.clojure))}}),LanguageDescription.of({name:"ClojureScript",extensions:["cljs"],load(){return import("./clojure-BMjYHr_A.js").then(o=>legacy(o.clojure))}}),LanguageDescription.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load(){return import("./css-BnMrqG3P.js").then(o=>legacy(o.gss))}}),LanguageDescription.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load(){return import("./cmake-BQqOBYOt.js").then(o=>legacy(o.cmake))}}),LanguageDescription.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load(){return import("./coffeescript-S37ZYGWr.js").then(o=>legacy(o.coffeeScript))}}),LanguageDescription.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load(){return import("./commonlisp-DBKNyK5s.js").then(o=>legacy(o.commonLisp))}}),LanguageDescription.of({name:"Cypher",extensions:["cyp","cypher"],load(){return import("./cypher-C_CwsFkJ.js").then(o=>legacy(o.cypher))}}),LanguageDescription.of({name:"Cython",extensions:["pyx","pxd","pxi"],load(){return import("./python-BuPzkPfP.js").then(o=>legacy(o.cython))}}),LanguageDescription.of({name:"Crystal",extensions:["cr"],load(){return import("./crystal-SjHAIU92.js").then(o=>legacy(o.crystal))}}),LanguageDescription.of({name:"D",extensions:["d"],load(){return import("./d-pRatUO7H.js").then(o=>legacy(o.d))}}),LanguageDescription.of({name:"Dart",extensions:["dart"],load(){return import("./clike-wD8xDpL-.js").then(o=>legacy(o.dart))}}),LanguageDescription.of({name:"diff",extensions:["diff","patch"],load(){return import("./diff-DbItnlRl.js").then(o=>legacy(o.diff))}}),LanguageDescription.of({name:"Dockerfile",filename:/^Dockerfile$/,load(){return import("./dockerfile-BuNIbK2j.js").then(o=>legacy(o.dockerFile))}}),LanguageDescription.of({name:"DTD",extensions:["dtd"],load(){return import("./dtd-DF_7sFjM.js").then(o=>legacy(o.dtd))}}),LanguageDescription.of({name:"Dylan",extensions:["dylan","dyl","intr"],load(){return import("./dylan-DwRh75JA.js").then(o=>legacy(o.dylan))}}),LanguageDescription.of({name:"EBNF",load(){return import("./ebnf-CDyGwa7X.js").then(o=>legacy(o.ebnf))}}),LanguageDescription.of({name:"ECL",extensions:["ecl"],load(){return import("./ecl-Cabwm37j.js").then(o=>legacy(o.ecl))}}),LanguageDescription.of({name:"edn",extensions:["edn"],load(){return import("./clojure-BMjYHr_A.js").then(o=>legacy(o.clojure))}}),LanguageDescription.of({name:"Eiffel",extensions:["e"],load(){return import("./eiffel-CnydiIhH.js").then(o=>legacy(o.eiffel))}}),LanguageDescription.of({name:"Elm",extensions:["elm"],load(){return import("./elm-vLlmbW-K.js").then(o=>legacy(o.elm))}}),LanguageDescription.of({name:"Erlang",extensions:["erl"],load(){return import("./erlang-BNw1qcRV.js").then(o=>legacy(o.erlang))}}),LanguageDescription.of({name:"Esper",load(){return import("./sql-C4g8LzGK.js").then(o=>legacy(o.esper))}}),LanguageDescription.of({name:"Factor",extensions:["factor"],load(){return import("./factor-D8pE9siL.js").then(o=>legacy(o.factor))}}),LanguageDescription.of({name:"FCL",load(){return import("./fcl-Kvtd6kyn.js").then(o=>legacy(o.fcl))}}),LanguageDescription.of({name:"Forth",extensions:["forth","fth","4th"],load(){return import("./forth-Ffai-XNe.js").then(o=>legacy(o.forth))}}),LanguageDescription.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load(){return import("./fortran-DYz_wnZ1.js").then(o=>legacy(o.fortran))}}),LanguageDescription.of({name:"F#",alias:["fsharp"],extensions:["fs"],load(){return import("./mllike-C_8OmSiT.js").then(o=>legacy(o.fSharp))}}),LanguageDescription.of({name:"Gas",extensions:["s"],load(){return import("./gas-Bneqetm1.js").then(o=>legacy(o.gas))}}),LanguageDescription.of({name:"Gherkin",extensions:["feature"],load(){return import("./gherkin-heZmZLOM.js").then(o=>legacy(o.gherkin))}}),LanguageDescription.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load(){return import("./groovy-D9Dt4D0W.js").then(o=>legacy(o.groovy))}}),LanguageDescription.of({name:"Haskell",extensions:["hs"],load(){return import("./haskell-BWDZoCOh.js").then(o=>legacy(o.haskell))}}),LanguageDescription.of({name:"Haxe",extensions:["hx"],load(){return import("./haxe-pv4rovob.js").then(o=>legacy(o.haxe))}}),LanguageDescription.of({name:"HXML",extensions:["hxml"],load(){return import("./haxe-pv4rovob.js").then(o=>legacy(o.hxml))}}),LanguageDescription.of({name:"HTTP",load(){return import("./http-DBlCnlav.js").then(o=>legacy(o.http))}}),LanguageDescription.of({name:"IDL",extensions:["pro"],load(){return import("./idl-BEugSyMb.js").then(o=>legacy(o.idl))}}),LanguageDescription.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load(){return import("./javascript-iSgyE4tI.js").then(o=>legacy(o.jsonld))}}),LanguageDescription.of({name:"Jinja2",extensions:["j2","jinja","jinja2"],load(){return import("./jinja2-C4DGRd-O.js").then(o=>legacy(o.jinja2))}}),LanguageDescription.of({name:"Julia",extensions:["jl"],load(){return import("./julia-DuME0IfC.js").then(o=>legacy(o.julia))}}),LanguageDescription.of({name:"Kotlin",extensions:["kt","kts"],load(){return import("./clike-wD8xDpL-.js").then(o=>legacy(o.kotlin))}}),LanguageDescription.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load(){return import("./livescript-BwQOo05w.js").then(o=>legacy(o.liveScript))}}),LanguageDescription.of({name:"Lua",extensions:["lua"],load(){return import("./lua-BgMRiT3U.js").then(o=>legacy(o.lua))}}),LanguageDescription.of({name:"mIRC",extensions:["mrc"],load(){return import("./mirc-0pArz5Cm.js").then(o=>legacy(o.mirc))}}),LanguageDescription.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load(){return import("./mathematica-DTrFuWx2.js").then(o=>legacy(o.mathematica))}}),LanguageDescription.of({name:"Modelica",extensions:["mo"],load(){return import("./modelica-Dc1JOy9r.js").then(o=>legacy(o.modelica))}}),LanguageDescription.of({name:"MUMPS",extensions:["mps"],load(){return import("./mumps-BT43cFF4.js").then(o=>legacy(o.mumps))}}),LanguageDescription.of({name:"Mbox",extensions:["mbox"],load(){return import("./mbox-CNhZ1qSd.js").then(o=>legacy(o.mbox))}}),LanguageDescription.of({name:"Nginx",filename:/nginx.*\.conf$/i,load(){return import("./nginx-DdIZxoE0.js").then(o=>legacy(o.nginx))}}),LanguageDescription.of({name:"NSIS",extensions:["nsh","nsi"],load(){return import("./nsis-CEAdamBV.js").then(o=>legacy(o.nsis))}}),LanguageDescription.of({name:"NTriples",extensions:["nt","nq"],load(){return import("./ntriples-BfvgReVJ.js").then(o=>legacy(o.ntriples))}}),LanguageDescription.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load(){return import("./clike-wD8xDpL-.js").then(o=>legacy(o.objectiveC))}}),LanguageDescription.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load(){return import("./clike-wD8xDpL-.js").then(o=>legacy(o.objectiveCpp))}}),LanguageDescription.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load(){return import("./mllike-C_8OmSiT.js").then(o=>legacy(o.oCaml))}}),LanguageDescription.of({name:"Octave",extensions:["m"],load(){return import("./octave-Ck1zUtKM.js").then(o=>legacy(o.octave))}}),LanguageDescription.of({name:"Oz",extensions:["oz"],load(){return import("./oz-BzwKVEFT.js").then(o=>legacy(o.oz))}}),LanguageDescription.of({name:"Pascal",extensions:["p","pas"],load(){return import("./pascal-B1wCu0_E.js").then(o=>legacy(o.pascal))}}),LanguageDescription.of({name:"Perl",extensions:["pl","pm"],load(){return import("./perl-CdXCOZ3F.js").then(o=>legacy(o.perl))}}),LanguageDescription.of({name:"Pig",extensions:["pig"],load(){return import("./pig-DHho59qG.js").then(o=>legacy(o.pig))}}),LanguageDescription.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load(){return import("./powershell-CFHJl5sT.js").then(o=>legacy(o.powerShell))}}),LanguageDescription.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load(){return import("./properties-C78fOPTZ.js").then(o=>legacy(o.properties))}}),LanguageDescription.of({name:"ProtoBuf",extensions:["proto"],load(){return import("./protobuf-ChK-085T.js").then(o=>legacy(o.protobuf))}}),LanguageDescription.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load(){return import("./pug-BmUsPMDj.js").then(o=>legacy(o.pug))}}),LanguageDescription.of({name:"Puppet",extensions:["pp"],load(){return import("./puppet-DMA9R1ak.js").then(o=>legacy(o.puppet))}}),LanguageDescription.of({name:"Q",extensions:["q"],load(){return import("./q-ZnEupP5q.js").then(o=>legacy(o.q))}}),LanguageDescription.of({name:"R",alias:["rscript"],extensions:["r","R"],load(){return import("./r-DUYO_cvP.js").then(o=>legacy(o.r))}}),LanguageDescription.of({name:"RPM Changes",load(){return import("./rpm-CTu-6PCP.js").then(o=>legacy(o.rpmChanges))}}),LanguageDescription.of({name:"RPM Spec",extensions:["spec"],load(){return import("./rpm-CTu-6PCP.js").then(o=>legacy(o.rpmSpec))}}),LanguageDescription.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load(){return import("./ruby-B2Rjki9n.js").then(o=>legacy(o.ruby))}}),LanguageDescription.of({name:"SAS",extensions:["sas"],load(){return import("./sas-B4kiWyti.js").then(o=>legacy(o.sas))}}),LanguageDescription.of({name:"Scala",extensions:["scala"],load(){return import("./clike-wD8xDpL-.js").then(o=>legacy(o.scala))}}),LanguageDescription.of({name:"Scheme",extensions:["scm","ss"],load(){return import("./scheme-w3NHGvyK.js").then(o=>legacy(o.scheme))}}),LanguageDescription.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load(){return import("./shell-CjFT_Tl9.js").then(o=>legacy(o.shell))}}),LanguageDescription.of({name:"Sieve",extensions:["siv","sieve"],load(){return import("./sieve-C3Gn_uJK.js").then(o=>legacy(o.sieve))}}),LanguageDescription.of({name:"Smalltalk",extensions:["st"],load(){return import("./smalltalk-CnHTOXQT.js").then(o=>legacy(o.smalltalk))}}),LanguageDescription.of({name:"Solr",load(){return import("./solr-DehyRSwq.js").then(o=>legacy(o.solr))}}),LanguageDescription.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load(){return import("./mllike-C_8OmSiT.js").then(o=>legacy(o.sml))}}),LanguageDescription.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load(){return import("./sparql-DkYu6x3z.js").then(o=>legacy(o.sparql))}}),LanguageDescription.of({name:"Spreadsheet",alias:["excel","formula"],load(){return import("./spreadsheet-BCZA_wO0.js").then(o=>legacy(o.spreadsheet))}}),LanguageDescription.of({name:"Squirrel",extensions:["nut"],load(){return import("./clike-wD8xDpL-.js").then(o=>legacy(o.squirrel))}}),LanguageDescription.of({name:"Stylus",extensions:["styl"],load(){return import("./stylus-BdAi1jBa.js").then(o=>legacy(o.stylus))}}),LanguageDescription.of({name:"Swift",extensions:["swift"],load(){return import("./swift-BzpIVaGY.js").then(o=>legacy(o.swift))}}),LanguageDescription.of({name:"sTeX",load(){return import("./stex-C3f8Ysf7.js").then(o=>legacy(o.stex))}}),LanguageDescription.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load(){return import("./stex-C3f8Ysf7.js").then(o=>legacy(o.stex))}}),LanguageDescription.of({name:"SystemVerilog",extensions:["v","sv","svh"],load(){return import("./verilog-C6RDOZhf.js").then(o=>legacy(o.verilog))}}),LanguageDescription.of({name:"Tcl",extensions:["tcl"],load(){return import("./tcl-BOR0Rekm.js").then(o=>legacy(o.tcl))}}),LanguageDescription.of({name:"Textile",extensions:["textile"],load(){return import("./textile-CnDTJFAw.js").then(o=>legacy(o.textile))}}),LanguageDescription.of({name:"TiddlyWiki",load(){return import("./tiddlywiki-DO-Gjzrf.js").then(o=>legacy(o.tiddlyWiki))}}),LanguageDescription.of({name:"Tiki wiki",load(){return import("./tiki-DGYXhP31.js").then(o=>legacy(o.tiki))}}),LanguageDescription.of({name:"TOML",extensions:["toml"],load(){return import("./toml-BXUEaScT.js").then(o=>legacy(o.toml))}}),LanguageDescription.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load(){return import("./troff-wAsdV37c.js").then(o=>legacy(o.troff))}}),LanguageDescription.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load(){return import("./ttcn-BSZjDM4v.js").then(o=>legacy(o.ttcn))}}),LanguageDescription.of({name:"TTCN_CFG",extensions:["cfg"],load(){return import("./ttcn-cfg-BIkV9KBc.js").then(o=>legacy(o.ttcnCfg))}}),LanguageDescription.of({name:"Turtle",extensions:["ttl"],load(){return import("./turtle-B1tBg_DP.js").then(o=>legacy(o.turtle))}}),LanguageDescription.of({name:"Web IDL",extensions:["webidl"],load(){return import("./webidl-ZXfAyPTL.js").then(o=>legacy(o.webIDL))}}),LanguageDescription.of({name:"VB.NET",extensions:["vb"],load(){return import("./vb-CmGdzxic.js").then(o=>legacy(o.vb))}}),LanguageDescription.of({name:"VBScript",extensions:["vbs"],load(){return import("./vbscript-BuJXcnF6.js").then(o=>legacy(o.vbScript))}}),LanguageDescription.of({name:"Velocity",extensions:["vtl"],load(){return import("./velocity-Dq6fSHCB.js").then(o=>legacy(o.velocity))}}),LanguageDescription.of({name:"Verilog",extensions:["v"],load(){return import("./verilog-C6RDOZhf.js").then(o=>legacy(o.verilog))}}),LanguageDescription.of({name:"VHDL",extensions:["vhd","vhdl"],load(){return import("./vhdl-lSbBsy5d.js").then(o=>legacy(o.vhdl))}}),LanguageDescription.of({name:"XQuery",extensions:["xy","xquery"],load(){return import("./xquery-WRlm2TX8.js").then(o=>legacy(o.xQuery))}}),LanguageDescription.of({name:"Yacas",extensions:["ys"],load(){return import("./yacas-BJ4BC0dw.js").then(o=>legacy(o.yacas))}}),LanguageDescription.of({name:"Z80",extensions:["z80"],load(){return import("./z80-Hz9HOZM7.js").then(o=>legacy(o.z80))}}),LanguageDescription.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load(){return import("./mscgen-BA5vi2Kp.js").then(o=>legacy(o.mscgen))}}),LanguageDescription.of({name:"X\xf9",extensions:["xu"],load(){return import("./mscgen-BA5vi2Kp.js").then(o=>legacy(o.xu))}}),LanguageDescription.of({name:"MsGenny",extensions:["msgenny"],load(){return import("./mscgen-BA5vi2Kp.js").then(o=>legacy(o.msgenny))}}),LanguageDescription.of({name:"Vue",extensions:["vue"],load(){return import("./index-DBalDwce.js").then(async m=>{await m.__tla;return m}).then(o=>o.vue())}}),LanguageDescription.of({name:"Angular Template",load(){return import("./index-BpXJUwiC.js").then(async m=>{await m.__tla;return m}).then(o=>o.angular())}})],mkContentChangePlugin=(o,e)=>EditorView.updateListener.of(n=>{if(!e()||!n.docChanged)return;const a=n.startState.doc.toString(),s=n.state.doc.toString();o(s,a)}),updateHighlightTermsEffect=StateEffect.define(),highlightMark=Decoration.mark({class:"highlight-keep"}),highlighted=StateField.define({create:()=>Decoration.none,update:(o,e)=>{for(const n of e.effects)if(n.is(updateHighlightTermsEffect)){o=o.update({filter:()=>!1}),o=o.update({add:n.value.ranges.map(({from:a,to:s})=>highlightMark.range(a,s))});break}return o=o.map(e.changes),o},provide:o=>EditorView.decorations.from(o)}),updateHighlightTerms=(o,e)=>{let n=[];for(const{from:s,to:l}of e.visibleRanges){let c;const d=e.state.doc.sliceString(s,l).toLowerCase();for(const u of o)for(c=-1;(c=d.indexOf(u,c+1))!=-1;)n.push({from:s+c,to:s+c+u.length})}n=n.sort((s,l)=>s.from-l.from);const a=[];return e.state.field(highlighted,!1)||a.push(StateEffect.appendConfig.of(highlighted)),a.push(updateHighlightTermsEffect.of({ranges:n})),e.dispatch({effects:a}),!0},base00="#40464a",base01="#DDDDDD",base02="#B9D2FF",base03="#b0b0b0",base05="#e0e0e0",base06="#808080",base07="#000000",base08="#A54543",base09="#fc6d24",base0A="#fda331",base0B="#8abeb7",base0C="#b5bd68",base0D="#6fb3d2",base0E="#cc99cc",base0F="#6987AF",invalid=base09,darkBackground="#292d30",highlightBackground=base02+"30",tooltipBackground=base01,selection=base00,cursor=base01,basicDarkTheme=EditorView.theme({"&":{color:base01,backgroundColor:"transparent"},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:base03},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:base02,outline:`1px solid ${base03}`,color:base07},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:base05,color:base07},".cm-activeLine":{backgroundColor:"transparent"},".cm-selectionMatch":{backgroundColor:highlightBackground},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${base03}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:base02,color:base07},".cm-gutters":{borderRight:"1px solid #ffffff10",color:base06,backgroundColor:darkBackground},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:base02},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:base03}}},{dark:!0}),basicDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:base0A},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:base0C},{tag:[tags.variableName],color:base0D},{tag:[tags.function(tags.variableName)],color:base0A},{tag:[tags.labelName],color:base09},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:base0A},{tag:[tags.definition(tags.name),tags.separator],color:base0E},{tag:[tags.brace],color:base0E},{tag:[tags.annotation],color:invalid},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:base0A},{tag:[tags.typeName,tags.className],color:base0D},{tag:[tags.operator,tags.operatorKeyword],color:base0E},{tag:[tags.tagName],color:base0A},{tag:[tags.squareBracket],color:base0E},{tag:[tags.angleBracket],color:base0E},{tag:[tags.attributeName],color:base0D},{tag:[tags.regexp],color:base0A},{tag:[tags.quote],color:base01},{tag:[tags.string],color:base0C},{tag:tags.link,color:base0F,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:base0B},{tag:[tags.meta],color:base08},{tag:[tags.comment],color:base06,fontStyle:"italic"},{tag:tags.monospace,color:base01},{tag:tags.strong,fontWeight:"bold",color:base0A},{tag:tags.emphasis,fontStyle:"italic",color:base0D},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:base01},{tag:tags.special(tags.heading1),fontWeight:"bold",color:base01},{tag:tags.heading1,fontWeight:"bold",color:base01},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:base01},{tag:[tags.heading5,tags.heading6],color:base01},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:base0B},{tag:[tags.processingInstruction,tags.inserted],color:base0B},{tag:[tags.contentSeparator],color:base0D},{tag:tags.invalid,color:base02,borderBottom:`1px dotted ${invalid}`}]),basicDark=[basicDarkTheme,syntaxHighlighting(basicDarkHighlightStyle)],config={name:"basicLight",dark:!1,background:"transparent",foreground:"#24292f",selection:"var(--selection-bg-color)",cursor:"#24292f",dropdownBackground:"#fff",dropdownBorder:"#e1e4e8",activeLine:"#c6c6c622",matchingBracket:"#34d05840",keyword:"#cf222e",storage:"#d73a49",variable:"#24292f",parameter:"#24292f",function:"#005cc5",string:"#0a3069",constant:"#0550ae",type:"#005cc5",class:"#cf222e",number:"#005cc5",comment:"#929ca6",heading:"#005cc5",invalid:"#cb2431",regexp:"#032f62"},basicLightTheme=EditorView.theme({"&":{color:config.foreground,backgroundColor:config.background},".cm-content":{caretColor:config.cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:config.cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:config.selection},".cm-panels":{backgroundColor:config.dropdownBackground,color:config.foreground},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:config.dropdownBackground,outline:`1px solid ${config.dropdownBorder}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:config.selection},".cm-activeLine":{backgroundColor:config.activeLine},".cm-selectionMatch":{backgroundColor:config.selection},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:config.matchingBracket,outline:"none"},".cm-gutters":{backgroundColor:config.background,color:config.foreground,border:"none"},".cm-activeLineGutter":{backgroundColor:config.background},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:config.foreground},".cm-tooltip":{border:`1px solid ${config.dropdownBorder}`,backgroundColor:config.dropdownBackground,color:config.foreground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:config.foreground,borderBottomColor:config.foreground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{background:config.selection,color:config.foreground}}},{dark:config.dark}),basicLightSyntaxTheme=HighlightStyle.define([{tag:tags.keyword,color:config.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config.variable},{tag:[tags.propertyName],color:config.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config.constant},{tag:[tags.definition(tags.name),tags.separator],color:config.variable},{tag:[tags.className],color:config.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config.number},{tag:[tags.typeName],color:config.type,fontStyle:config.type},{tag:[tags.operator,tags.operatorKeyword],color:config.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config.regexp},{tag:[tags.meta,tags.comment],color:config.comment,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:config.variable},{tag:tags.invalid,color:config.invalid},{tag:tags.strikethrough,textDecoration:"line-through"}]),basicLight=[basicLightTheme,syntaxHighlighting(basicLightSyntaxTheme)];var _sfc_main$1R=defineComponent({__name:"CodeMirror",props:mergeModels({theme:{},readonly:{type:Boolean},lang:{},extensionsBuilder:{type:Function},highlightTerms:{},onSrcChanged:{type:Function},keymap:{}},{src:{},srcModifiers:{}}),emits:["update:src"],setup(o,{expose:e}){const n=o;e({getEditorView:()=>s,getWrapperDom:()=>l.value});const a=useModel(o,"src");let s=null;const l=ref(null),c=new Compartment,d=new Compartment,u=new Compartment,f=ThemeContext.useContext(),p={light:basicLight,dark:basicDark};watch(a,()=>{if(s){if(a.value!=s.state.doc.toString()){const x=s.state.selection.toJSON();s.dispatch({changes:{from:0,to:s.state.doc.length,insert:a.value},selection:EditorSelection.fromJSON(x)})}updateHighlightTerms(n.highlightTerms??[],s)}}),watch(()=>n.highlightTerms,()=>{s&&updateHighlightTerms(n.highlightTerms??[],s)});const _=async x=>{if(!s)return;if(x==""||x=="unknown"){s.dispatch({effects:c.reconfigure([])});return}const M=await LanguageDescription.matchLanguageName(languages,x,!0);if(!M)return;const E=await M.load();s.dispatch({effects:c.reconfigure([E])})};watch(()=>n.lang,_);const b=x=>{if(!s)return;const M=x??f?.theme.value??"dark",E=p[M];E&&s.dispatch({effects:d.reconfigure([E])})};watch(()=>n.theme,b);const v=x=>{if(!s)return;const M=Object.values(x??{});s.dispatch({effects:u.reconfigure(keymap.of(M))})};watch(()=>n.keymap,v);const k=()=>{const x=n.extensionsBuilder?.()??[];return n.readonly?[c.of([]),d.of([]),EditorState.readOnly.of(!0),...x]:[minimalSetup,c.of([]),d.of([]),u.of([]),EditorState.readOnly.of(!1),mkContentChangePlugin((M,E)=>{n.onSrcChanged?n.onSrcChanged(M,E):a.value=M},()=>!0),...x]};return onMounted(()=>{l.value&&(s=new EditorView({doc:a.value??"",extensions:k(),parent:l.value}),_(n.lang??""),b(n.theme),v(n.keymap??{}))}),onUnmounted(()=>{setTimeout(()=>{s&&s.destroy()},1e3)}),(x,M)=>(openBlock(),createElementBlock("div",{class:"code-mirror-wrapper",ref_key:"$wrapper",ref:l},null,512))}}),_sfc_main$1Q=defineComponent({__name:"CodeContent",props:{blockTree:{},itemId:{},block:{},readonly:{type:Boolean}},setup(o){const e=o,{blockEditor:n}=BlocksContext.useContext(),a=useTaskQueue(),s=ref(null),l=ref(null),{codemirrorKeymap:c}=KeymapContext.useContext(),d=()=>e.readonly?[]:[indentOnInput(),bracketMatching(),closeBrackets()],u=f=>{const p=e.block.id,_=[BLOCK_CONTENT_TYPES.CODE,f,e.block.content[2]];a.addTask(()=>{n.changeBlockContent({blockId:p,content:_})},{type:"updateBlockContent"+p,delay:500,debounce:!0})};return watch(()=>e.block.content,f=>{f[0]===BLOCK_CONTENT_TYPES.CODE&&(s.value=f[1])},{immediate:!0}),onMounted(()=>{if(e.itemId){const f=l.value?.getEditorView();f&&e.blockTree?.registerEditorView(e.itemId,f)}}),onUnmounted(()=>{if(e.itemId){const f=l.value?.getEditorView();f&&(e.blockTree?.unregisterEditorView(e.itemId,f),f.destroy())}}),(f,p)=>(openBlock(),createBlock(_sfc_main$1R,{class:"code-content block-content",ref_key:"cmWrapper",ref:l,src:s.value,"onUpdate:src":p[0]||(p[0]=_=>s.value=_),readonly:f.readonly,lang:f.block.content[2],"extensions-builder":d,"on-src-changed":u,keymap:unref(c)},null,8,["src","readonly","lang","keymap"]))}}),_sfc_main$1P=defineComponent({__name:"DropdownMenu",props:{defaultOpen:{type:Boolean},open:{type:Boolean},dir:{},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const s=xe(o,e);return(l,c)=>(openBlock(),createBlock(unref(sh),normalizeProps(guardReactiveProps(unref(s))),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),_sfc_main$1O=defineComponent({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=computed(()=>{const{class:c,...d}=n;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(ih),null,{default:withCtx(()=>[createVNode(unref(uh),mergeProps(unref(l),{class:unref(cn)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_sfc_main$1N=defineComponent({__name:"DropdownMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(fh),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),_sfc_main$1M=defineComponent({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(ch$1),mergeProps(unref(a),{class:unref(cn)("dropdown-menu-item relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s.inset&&"pl-8",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$1L=defineComponent({__name:"DropdownMenuSub",props:{defaultOpen:{type:Boolean},open:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const s=xe(o,e);return(l,c)=>(openBlock(),createBlock(unref(bh),normalizeProps(guardReactiveProps(unref(s))),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),_sfc_main$1K=defineComponent({__name:"DropdownMenuSubContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideOffset:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=computed(()=>{const{class:c,...d}=n;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(Ch),mergeProps(unref(l),{class:unref(cn)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$1J=defineComponent({__name:"DropdownMenuSubTrigger",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(wh),mergeProps(unref(a),{class:unref(cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default"),createVNode(unref(ChevronRight),{class:"ml-auto h-4 w-4"})]),_:3},16,["class"]))}}),_sfc_main$1I=defineComponent({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const n=At(o);return(a,s)=>(openBlock(),createBlock(unref(rh),mergeProps({class:"outline-none"},unref(n)),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}});const _hoisted_1$D=["data-showDropdown","data-path"],_hoisted_2$k={key:0,class:"flex items-center text-muted-foreground"},_hoisted_3$g={class:"image-fit-container relative w-fit bg-background"},_hoisted_4$d=["src"];var _sfc_main$1H=defineComponent({__name:"ImageContent",props:{blockTree:{},block:{},itemId:{}},setup(o){const e=o,{useImage:n}=ImagesContext.useContext(),a=ref(null),s=ref(null),l=useTaskQueue(),{blockEditor:c,blocksManager:d}=BlocksContext.useContext();let u=0;const f=generateKeydownHandlerSimple({Backspace:{run:B=>B.isComposing||B.keyCode===229?!1:(l.addTask(()=>{c.deleteBlock({blockId:e.block.id})}),!0),stopPropagation:!0,preventDefault:!0},Enter:{run:B=>{if(B.isComposing||B.keyCode===229)return!1;const F=e.itemId,j=e.blockTree;return!F||!j?!1:(l.addTask(async()=>{const I={baseBlockId:e.block.id,offset:1},U=getPmSchema({getBlockRef:d.getBlockRef});c.insertNormalBlock({pos:I,content:plainTextToTextContent("",U)});const W=j.getDiBelow(F);await j.nextUpdate(),W&&j.focusDi(W[0].itemId)}),!0)},stopPropagation:!0,preventDefault:!0},ArrowDown:{run:B=>{if(B.isComposing||B.keyCode===229)return!1;const F=e.blockTree;if(!F)return!1;const j=F.getDiBelow(e.itemId);return j&&F.focusDi(j[0].itemId),!0},stopPropagation:!0,preventDefault:!0},ArrowUp:{run:B=>{if(B.isComposing||B.keyCode===229)return!1;const F=e.blockTree;if(!F)return!1;const j=F.getDiAbove(e.itemId);return j&&F.focusDi(j[0].itemId),!0},stopPropagation:!0,preventDefault:!0},ArrowLeft:{run:B=>{if(B.isComposing||B.keyCode===229)return!1;const F=e.blockTree;if(!F)return!1;const j=F.getPredecessorDi(e.itemId);return j&&F.focusDi(j[0].itemId),!0},stopPropagation:!0,preventDefault:!0},ArrowRight:{run:B=>{if(B.isComposing||B.keyCode===229)return!1;const F=e.blockTree;if(!F)return!1;const j=F.getSuccessorDi(e.itemId);return j&&F.focusDi(j[0].itemId),!0},stopPropagation:!0,preventDefault:!0},"*":{run:()=>!0,stopPropagation:!0,preventDefault:!0},Tab:{run:B=>B.isComposing||B.keyCode===229?!1:(l.addTask(()=>{c.promoteBlock({blockId:e.block.id})}),!0),stopPropagation:!0,preventDefault:!0},"Shift-Tab":{run:B=>B.isComposing||B.keyCode===229?!1:(l.addTask(()=>{c.demoteBlock({blockId:e.block.id})}),!0),stopPropagation:!0,preventDefault:!0}}),p=B=>{const F=B.target;F.blur(),F.contentEditable="false",F.innerHTML="",setTimeout(()=>{F.contentEditable="true",F.focus()},0)},_=n(()=>e.block.content[1]),b=ref(!1),v=B=>{l.addTask(()=>{const F=e.block.id,j=[...e.block.content],I=j[5]??[];I.includes(B)?I.splice(I.indexOf(B),1):I.push(B),j[5]=I,c.changeBlockContent({blockId:F,content:j})})},k=B=>(e.block.content[5]??[]).includes(B),x=()=>{l.addTask(()=>{c.deleteBlock({blockId:e.block.id})})},M=B=>{const F=B.clientX-u+3,j=a.value;j&&(j.style.width=Math.min(j.naturalWidth,F)+"px")},E=()=>{const B=a.value;if(!B)return;const F=B.clientWidth;l.addTask(()=>{const j=e.block.id,I=[...e.block.content];I[4]=F,c.changeBlockContent({blockId:j,content:I})}),document.getElementById("cursor-style")?.remove(),document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",E),document.removeEventListener("mouseleave",E)},L=B=>{const j=a.value?.getBoundingClientRect();if(!j)return;u=j.left;const I=document.createElement("style");I.innerHTML="*{cursor: col-resize!important;}",I.id="cursor-style",document.head.appendChild(I),B.preventDefault(),B.stopPropagation(),document.addEventListener("mousemove",M),document.addEventListener("mouseup",E),document.addEventListener("mouseleave",E)},V=async()=>{const B=e.block.content;if(B[0]!==BLOCK_CONTENT_TYPES.IMAGE)return;const F=await fsClearScannedImage({path:B[1]});F.success&&l.addTask(()=>{const j=[...B];j[1]=F.data.path,c.changeBlockContent({blockId:e.block.id,content:j})})};return(B,F)=>B.block.content[0]===unref(BLOCK_CONTENT_TYPES).IMAGE&&unref(_)?(openBlock(),createElementBlock("div",{key:0,class:"block-content image-content relative","data-showDropdown":b.value,"data-path":B.block.content[1]},[unref(_).status==="fetching"?(openBlock(),createElementBlock("div",_hoisted_2$k,[createVNode(unref(LoaderCircle),{class:"size-4 mr-2 animate-spin"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.imageContent.fetchingImage")),1)])):unref(_).status==="synced"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["image-container flex select-none my-2 shrink-0",{imageBlend:e.block.content[5]?.includes("blend"),imageBlendLuminosity:e.block.content[5]?.includes("blendLuminosity"),imageCircle:e.block.content[5]?.includes("circle"),imageInvert:e.block.content[5]?.includes("invert"),imageInvertW:e.block.content[5]?.includes("invertW"),imageOutline:e.block.content[5]?.includes("outline")}]),ref_key:"imageElContainerRef",ref:s},[createBaseVNode("div",_hoisted_3$g,[createBaseVNode("img",{ref_key:"imageElRef",ref:a,class:"rounded",style:normalizeStyle({width:B.block.content[4]?B.block.content[4]+"px":"unset"}),src:unref(_).url},null,12,_hoisted_4$d),createBaseVNode("div",{class:"absolute right-[2px] top-1/2 -translate-y-1/2 h-full max-h-[40px] rounded w-1 bg-muted cursor-col-resize",onMousedown:L},null,32),createVNode(unref(_sfc_main$1P),{open:b.value,"onUpdate:open":F[2]||(F[2]=j=>b.value=j),modal:!1},{default:withCtx(()=>[createVNode(unref(_sfc_main$1I),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"outline",size:"icon",class:"image-actions absolute top-2 right-2"},{default:withCtx(()=>[createVNode(unref(EllipsisVertical),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1O),{class:"w-52 mx-4"},{default:withCtx(()=>[createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(MessageSquareMore),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.imageContent.addCaption")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(Download),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.imageContent.download")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(Info),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.imageContent.metadata")),1)]),_:1}),createVNode(unref(_sfc_main$1M),{onClick:V},{default:withCtx(()=>[createVNode(unref(FileScan),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.imageContent.clearScannedImage")),1)]),_:1}),createVNode(unref(_sfc_main$1L),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1J),null,{default:withCtx(()=>[createVNode(unref(Blend),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.imageContent.filter")),1)]),_:1}),createVNode(unref(ih),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1K),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1M),{class:normalizeClass({active:k("invert")}),onClick:F[0]||(F[0]=j=>v("invert"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(B.$t("kbView.imageContent.invert")),1)]),_:1},8,["class"]),createVNode(unref(_sfc_main$1M),{class:normalizeClass({active:k("invertW")}),onClick:F[1]||(F[1]=j=>v("invertW"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(B.$t("kbView.imageContent.invertW")),1)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1M),{class:"!text-red-500",onClick:x},{default:withCtx(()=>[createVNode(unref(Trash2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.imageContent.deleteImage")),1)]),_:1})]),_:1})]),_:1},8,["open"])]),createBaseVNode("div",{class:"cursor-container flex-grow !outline-none min-w-1",contenteditable:"",onKeydown:F[3]||(F[3]=(...j)=>unref(f)&&unref(f)(...j)),onCompositionstart:p},null,32)],2)):createCommentVNode("",!0)],8,_hoisted_1$D)):createCommentVNode("",!0)}}),_sfc_main$1G=defineComponent({__name:"ScrollBar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(My),mergeProps(n.value,{class:unref(cn)("flex touch-none select-none transition-colors",a.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",a.orientation==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-px",e.class)}),{default:withCtx(()=>[createVNode(unref(Vy),{class:"relative flex-1 rounded-full bg-border"})]),_:1},16,["class"]))}}),_sfc_main$1F=defineComponent({__name:"ScrollArea",props:{type:{},dir:{},scrollHideDelay:{},asChild:{type:Boolean},as:{},class:{},maxHeight:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Oy),mergeProps(n.value,{class:unref(cn)("relative overflow-hidden",e.class)}),{default:withCtx(()=>[createVNode(unref(ky),{class:"h-full w-full rounded-[inherit]",style:normalizeStyle({maxHeight:e.maxHeight})},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["style"]),createVNode(_sfc_main$1G),createVNode(unref(Fy))]),_:3},16,["class"]))}}),_sfc_main$1E=defineComponent({__name:"MathContent",props:{blockTree:{},block:{},readonly:{type:Boolean},itemId:{}},setup(o){const e=o,n=useTaskQueue(),{blockEditor:a}=BlocksContext.useContext(),s=FloatingMathInputContext.useContext(),l=ref(null);let c="";const d={displayMode:!0,throwOnError:!1},u=()=>{const k=l.value;k&&(c.trim().length>0?(katex.render(c,k,d),k.classList.remove("empty")):(k.textContent="EMPTY EQUATION",k.classList.add("empty")))},f=()=>{const k=e.block.content,x=l.value;!x||k[0]!==BLOCK_CONTENT_TYPES.MATH||s.openFloatingMathInput(x,k[1],M=>{c=M,v()},p,_,_,b)},p=()=>{const k=e.blockTree;if(!k)return;const x=k.getDiAbove(e.itemId);x&&k.focusDi(x[0].itemId,{scrollIntoView:!0})},_=()=>{const k=e.blockTree;if(!k)return;const x=k.getDiBelow(e.itemId);x&&k.focusDi(x[0].itemId,{scrollIntoView:!0})},b=()=>{n.addTask(()=>{a.deleteBlock({blockId:e.block.id})})},v=()=>{n.addTask(()=>{a.changeBlockContent({blockId:e.block.id,content:[BLOCK_CONTENT_TYPES.MATH,c]})})};return watch(()=>e.block.content,k=>{k[0]===BLOCK_CONTENT_TYPES.MATH&&(c=k[1],nextTick(()=>{u()}))},{immediate:!0}),(k,x)=>k.block.content[0]===unref(BLOCK_CONTENT_TYPES).MATH?(openBlock(),createElementBlock("div",{key:0,class:"math-content block-content overflow-x-auto [&.empty]:italic [&.empty]:text-muted-foreground [&.empty]:!w-fit",ref_key:"$contentEl",ref:l,onClick:f},null,512)):createCommentVNode("",!0)}}),_sfc_main$1D=defineComponent({__name:"BlockContent",props:{block:{},itemId:{},blockTree:{},readonly:{type:Boolean},highlightTerms:{},highlightRefs:{}},setup(o){return(e,n)=>e.block.content[0]===unref(BLOCK_CONTENT_TYPES).TEXT?(openBlock(),createBlock(_sfc_main$1X,{key:0,block:e.block,"block-tree":e.blockTree,readonly:e.readonly,"highlight-terms":e.highlightTerms,"highlight-refs":e.highlightRefs,"item-id":e.itemId},null,8,["block","block-tree","readonly","highlight-terms","highlight-refs","item-id"])):e.block.content[0]===unref(BLOCK_CONTENT_TYPES).MATH?(openBlock(),createBlock(_sfc_main$1E,{key:1,block:e.block,"block-tree":e.blockTree,readonly:e.readonly,"item-id":e.itemId},null,8,["block","block-tree","readonly","item-id"])):e.block.content[0]===unref(BLOCK_CONTENT_TYPES).CODE?(openBlock(),createBlock(_sfc_main$1Q,{key:2,block:e.block,"block-tree":e.blockTree,readonly:e.readonly,"item-id":e.itemId},null,8,["block","block-tree","readonly","item-id"])):e.block.content[0]===unref(BLOCK_CONTENT_TYPES).IMAGE?(openBlock(),createBlock(_sfc_main$1H,{key:3,block:e.block,"block-tree":e.blockTree,"item-id":e.itemId},null,8,["block","block-tree","item-id"])):createCommentVNode("",!0)}});const FavoriteContext=createContext(()=>{const{blocksManager:o}=BlocksContext.useContext(),{kbPrefix:e}=ServerInfoContext.useContext(),n="favorite.blockIds",a=computed(()=>`${e.value}${n}`),s=useLocalStorage2(a,[]),l=computed({get:()=>s.value.map(c=>o.getBlock(c)).filter(c=>!!c),set:c=>{s.value=c.map(d=>d.id)}});return{favoriteBlockIds:s,favoriteBlocks:l}}),addIndentation$1=(o,e={})=>{const n=e.char||" ",a=e.count||2;let s=0;const l=[];return o.reverse().reduce((c,d)=>{l.length&&s&&l[s]&&l[s]===d.substring(1,l[s].length+1)&&(l.splice(s,1),s--);const f=[`${n.repeat(s?s*a:0)}${d}`,...c];return d.substring(0,2)==="</"&&(s++,l[s]=d.substring(2,d.length-1)),f},[]).join(`
`)};var addIndentation_1=addIndentation$1;const removeEmptyLines=o=>o.trim().replace(/(^(\s|\t)+|(( |\t)+)$)/gm,""),mergeAttributesWithElements$1=o=>{const e=removeEmptyLines(o).split(`
`),n=[];let a="";for(let s=0;s<e.length;s+=1){const l=e[s];if(l.endsWith("/>")){n.push(`${a}${l.slice(0,-2)} />`),a="";continue}if(l.endsWith(">")){n.push(`${a}${l.startsWith(">")||l.startsWith("<")?"":" "}${l}`),a="";continue}a+=a.length?` ${l}`:l}return n};var toLines={mergeAttributesWithElements:mergeAttributesWithElements$1,removeEmptyLines};const addIndentation=addIndentation_1,{mergeAttributesWithElements}=toLines,prettify=(o,e={})=>{const n=mergeAttributesWithElements(o);return addIndentation(n,e)};var src=prettify,prettify$1=getDefaultExportFromCjs(src);const ExporterContext=createContext(()=>{const{blocksManager:o}=BlocksContext.useContext(),e=ref(!1),n=ref(void 0);return{open:e,blockId:n,openExporter:p=>{e.value=!0,n.value=p},closeExporter:()=>{e.value=!1,n.value=void 0},exportSubtreeToPlainText:(p,_={})=>{_.nonFoldOnly??=!1;let b="";return o.forDescendants({onEachBlock:(v,k)=>{b+="  ".repeat(k)+"- "+v.ctext+`
`},rootBlockId:p,rootBlockLevel:0,nonFoldOnly:_.nonFoldOnly,includeSelf:!0}),b},exportSubtreeToHtml:(p,_={})=>{_.nonFoldOnly??=!1;const b=document.createElement("ul"),v=getPmSchema({getBlockRef:o.getBlockRef}),k=DOMSerializer.fromSchema(v),x=(E,L)=>{if(E.fold&&_.nonFoldOnly)return;const V=document.createElement("li");if(E.content[0]===BLOCK_CONTENT_TYPES.TEXT){const F=Node$1.fromJSON(v,E.content[1]),j=k.serializeFragment(F.content);V.appendChild(j)}if(E.childrenRefs.length>0){const F=document.createElement("ul");for(const j of E.childrenRefs)if(j.value&&!j.value.deleted){const I=toRaw(j.value);x(I,F)}V.appendChild(F)}L.appendChild(V)},M=o.getBlock(p);return M?(x(M,b),prettify$1(b.outerHTML)):(console.error("Cannot find root block",p),"")},exportSubtreeToMarkdown:p=>"",exportSubtreeToPdf:p=>""}}),FieldValueInspectorContext=createContext(()=>{const o=ref(!1),e=ref(void 0);return{open:o,blockId:e,openFieldValuesInspector:a=>{o.value=!0,e.value=a}}});var _sfc_main$1C=defineComponent({__name:"BlockContextMenu",props:{blockId:{}},setup(o){const e=useTaskQueue(),{blockEditor:n,blocksManager:a}=BlocksContext.useContext(),{openBlockMover:s}=BlockMoverContext.useContext(),{favoriteBlockIds:l}=FavoriteContext.useContext(),{sidePaneBlockIds:c}=SidebarContext.useContext(),{lastFocusedBlockTree:d}=LastFocusContext.useContext(),{openExporter:u}=ExporterContext.useContext(),{openFieldValuesInspector:f}=FieldValueInspectorContext.useContext(),p=["red","green","blue","yellow","gray","orange","purple"],_=(B,F)=>(!B&&F&&e.addTask(async()=>{await n.deleteBlock({blockId:F})}),!!F),b=(B,F,j)=>{if(!B&&F&&j){const I={x:j.clientX,y:j.clientY};setTimeout(()=>{s(I)},200)}return!!F},v=(B,F,j)=>{if(!B&&F&&j){const I={x:j.clientX,y:j.clientY};setTimeout(()=>{s(I,{leaveRef:!0})},200)}return!!F},k=(B,F)=>{const j=!!F&&!c.value.includes(F);return!B&&j&&c.value.push(F),!!F&&j},x=(B,F)=>{const j=!!F&&!l.value.includes(F);return!B&&j&&l.value.push(F),!!F&&j},M=(B,F)=>(!B&&F&&e.addTask(async()=>{const j={baseBlockId:F,offset:1},I=d.value;if(!I)return;await n.insertMirrorBlock({pos:j,srcBlockId:F});const U=I.getDiBelow(F);U&&I.focusDi(U[0].itemId)}),!!F),E=(B,F,j)=>(!B&&F&&u(F),!!F),L=(B,F)=>(!B&&F&&f(F),!!F),V=B=>(F,j,I)=>(!F&&j&&I&&e.addTask(async()=>{const U=a.getBlock(j);U&&n.setBlockMetadata({blockId:j,metadata:{...U.metadata,blockRefColor:B}})}),!!j);return(B,F)=>(openBlock(),createBlock(unref(_sfc_main$1P),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1I),null,{default:withCtx(()=>[renderSlot(B.$slots,"default")]),_:3}),createVNode(unref(_sfc_main$1O),{class:"min-w-[200px] overflow-y-auto max-h-[var(--radix-dropdown-menu-content-available-height)]"},{default:withCtx(()=>[createVNode(unref(_sfc_main$1M),{class:"!text-red-500",disabled:!_(!0,B.blockId,void 0),onClick:F[0]||(F[0]=j=>_(!1,B.blockId,j))},{default:withCtx(()=>[createVNode(unref(Trash2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.deleteBlock")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1M),{disabled:!L(!0,B.blockId,void 0),onClick:F[1]||(F[1]=j=>L(!1,B.blockId,j))},{default:withCtx(()=>[createVNode(unref(Database),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.openFieldValuesInspector")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(Copy),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.copyBlockReference")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(FlipHorizontal),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.copyBlockMirror")),1)]),_:1}),createVNode(unref(_sfc_main$1M),{disabled:!M(!0,B.blockId,void 0),onClick:F[2]||(F[2]=j=>M(!1,B.blockId,j))},{default:withCtx(()=>[createVNode(unref(FlipHorizontal),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.insertMirrorBelow")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1M),{disabled:!x(!0,B.blockId,void 0),onClick:F[3]||(F[3]=j=>x(!1,B.blockId,j))},{default:withCtx(()=>[createVNode(unref(Bookmark),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.addToFavorite")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1M),{disabled:!k(!0,B.blockId,void 0),onClick:F[4]||(F[4]=j=>k(!1,B.blockId,j))},{default:withCtx(()=>[createVNode(unref(PanelLeft),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.addToSidepane")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1M),{disabled:!b(!0,B.blockId,void 0),onClick:F[5]||(F[5]=j=>b(!1,B.blockId,j))},{default:withCtx(()=>[createVNode(unref(ArrowRight),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.moveBlock")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1M),{disabled:!v(!0,B.blockId,void 0),onClick:F[6]||(F[6]=j=>v(!1,B.blockId,j))},{default:withCtx(()=>[createVNode(unref(ArrowRight),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.moveBlockLeaveRef")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1M),{disabled:!b(!0,B.blockId,void 0),onClick:F[7]||(F[7]=j=>b(!1,B.blockId,j))},{default:withCtx(()=>[createVNode(unref(ArrowRight),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.moveBlockLeaveMirror")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1L),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1J),null,{default:withCtx(()=>[createVNode(unref(ArrowUpNarrowWide),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.sortDirectChildren")),1)]),_:1}),createVNode(unref(_sfc_main$1K),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(ArrowUpAZ),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.sortDictAsc")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(ArrowDownAZ),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.sortDictDesc")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowUp),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.ctimeAsc")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowDown),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.ctimeDesc")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowUp),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.mtimeAsc")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowDown),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.mtimeDesc")),1)]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1L),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1J),null,{default:withCtx(()=>[createVNode(unref(Paintbrush),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.setBlockRefColor")),1)]),_:1}),createVNode(unref(_sfc_main$1K),null,{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(p,j=>createVNode(unref(_sfc_main$1M),{key:j,disabled:!V(j)(!0,B.blockId,void 0),onClick:I=>V(j)(!1,B.blockId,I)},{default:withCtx(()=>[createBaseVNode("div",{class:"size-4 mr-2 rounded-sm",style:normalizeStyle({backgroundColor:`var(--highlight-${j})`})},null,4),createTextVNode(" "+toDisplayString$1(B.$t(`kbView.command.${j}`)),1)]),_:2},1032,["disabled","onClick"])),64))]),_:1})]),_:1}),createVNode(unref(_sfc_main$1M),{disabled:!E(!0,B.blockId,void 0),onClick:F[8]||(F[8]=j=>E(!1,B.blockId,j))},{default:withCtx(()=>[createVNode(unref(Download),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.command.export")),1)]),_:1},8,["disabled"])]),_:1})]),_:3}))}});const fieldValueTypeSchema=z$1.discriminatedUnion("type",[z$1.object({type:z$1.literal("richtext")}),z$1.object({type:z$1.literal("blockRef")}),z$1.object({type:z$1.literal("array"),itemType:z$1.enum(["richtext","blockRef","block"])})]),fieldMetadataSchema=z$1.object({buildIndex:z$1.boolean().optional(),valueType:fieldValueTypeSchema}),FieldsManagerContext=createContext(()=>{const{blocksManager:o}=BlocksContext.useContext(),e=ref(null),n=getPmSchema({getBlockRef:o.getBlockRef}),a=()=>{if(!e.value){e.value=new Set;for(const k of o.loadedBlocks.values()){const x=k.value;x&&x.type==="normalBlock"&&"field"in x.metadata&&e.value.add(x.id)}}},s=k=>(a(),e.value.has(k)),l=(k,x)=>{if(!k)return null;let M=k.firstChild;if(!M||M.type.name!=="blockRef_v2")return null;const E=M.attrs.toBlockId;if(!s(E))return null;if(k=k.cut(M.nodeSize),M=k.firstChild,M&&M.isText){const L=M.text;if(!L||!L.startsWith(":")&&!L.startsWith("："))return null;k=k.cut(1)}return x&&(x.fieldName=E),k},c=(k,x)=>{if(!k)return null;let M=k.firstChild;if(M&&M.isText){const E=M.text;if(!E)return null;const L=E.search(/\S|$/);k=k.cut(L)}return k},d=(k,x)=>{if(!k)return null;let M=k.firstChild;if(!M||M.type.name!=="blockRef_v2")return null;const{toBlockId:E,tag:L}=M.attrs??{};return k=k.cut(M.nodeSize),x&&(x.toBlockId=E),x&&(x.tag=L),k},u=(k,x)=>{if(o.getBlock(k))throw new Error(`Field ${k} already exists`);const E=getPmSchema({getBlockRef:o.getBlockRef});o.addBlock({id:k,type:"normalBlock",content:plainTextToTextContent(k,E),fold:!0,parentId:"root",childrenIds:[],metadata:{field:x}},{type:"ui"}),a(),e.value.add(k)},f=(k,x)=>{const M=o.getBlock(k);if(!M||M.type!=="normalBlock")throw new Error(`Field ${k} not found`);o.updateBlock({...M,metadata:x},{type:"ui"})},p=k=>{const x=o.getBlock(k);if(!x||x.content[0]!==BLOCK_CONTENT_TYPES.TEXT)return null;const M=fieldMetadataSchema.safeParse(x.metadata?.field);return M.success?M.data:null},_=k=>{if(!k||k.type!=="normalBlock"||k.content[0]!==BLOCK_CONTENT_TYPES.TEXT)return;let x=null;try{x=Node$1.fromJSON(n,k.content[1]).content}catch{}if(!x)return;const M={};if(x=l(x,M),!x||!M.fieldName||!s(M.fieldName))return;const E=p(M.fieldName);if(E){if(E.valueType.type==="richtext")return{fieldName:M.fieldName,metadata:E,value:x};if(E.valueType.type==="blockRef"){const L={};return x=l(x),x=c(x),x=d(x,L),x?{fieldName:L.fieldName,metadata:E,value:L.toBlockId}:void 0}else{let L=[];for(const V of k.childrenRefs){const B=V.value;if(!B||B.type!=="normalBlock"||B.content[0]!==BLOCK_CONTENT_TYPES.TEXT)continue;let F=null;try{F=Node$1.fromJSON(n,B.content[1]).content}catch{}if(!F)return;if(E.valueType.itemType==="richtext")L.push(F);else if(E.valueType.itemType==="blockRef"){const j={};if(F=c(F),F=d(F,j),!F)return;L.push(j.toBlockId)}else E.valueType.itemType==="block"&&L.push(B.id)}return{fieldName:M.fieldName,metadata:E,value:L}}}};return{addField:u,setFieldMetadata:f,getFieldMetadata:p,getFieldValues:k=>{const x=o.getSrcBlock(k);if(!x)return null;const M={};for(const E of x.childrenRefs){const L=E.value;if(!L)continue;const V=_(L);if(!V)continue;const{fieldName:B,metadata:F,value:j}=V;M[B]=j}return M}}}),BacklinksContext=createContext(()=>{const{registerSettingGroup:o,registerSettingItem:e}=SettingsContext.useContext(),{blocksManager:n}=BlocksContext.useContext(),{getBacklinks:a}=IndexContext.useContext(),{getFieldValues:s}=FieldsManagerContext.useContext(),{kbPrefix:l}=ServerInfoContext.useContext(),c=L=>L?n.getBlock(L)?void 0:"无效的块 ID":"没有指定块 ID";o({key:"backlinks",label:{en:"Backlinks",zh:"块引用 & 反向链接"}});const d="backlinks.showCounter",u=computed(()=>`${l.value}${d}`),f=!0,p=useLocalStorage2(u,f);e({id:d,groupKey:"backlinks",label:{zh:"块右侧显示反向链接个数"},desc:{zh:"如果开启，则如果一个块有反向链接，则会在块右侧以悬浮胶囊的形式显示反向链接个数。点击即可打开一个悬浮窗口，用于浏览这个块的所有反向链接。"},defaultValue:f,value:useWritableComputedRef(p),componentType:{type:"switch"}});const _="backlinks.putNewBlockAt",b=computed(()=>`${l.value}${_}`),v="",k=useLocalStorage2(b,v);e({id:_,groupKey:"backlinks",label:{zh:"新块插入位置"},desc:{zh:"在引用补全菜单中，选择创建新块时新块插入的位置。如果不指定，默认会插入根块末尾。"},defaultValue:v,value:useWritableComputedRef(k),componentType:{type:"textInput",validator:c}});const x=(L,V=!0)=>{const B=V?[L]:[],F=s(L)??{};if("Alias"in F){const j=F.Alias,I=z$1.array(z$1.string()).safeParse(j);return I.success&&B.push(...I.data),B}{const j=n.getBlock(L);if(!j)return B;const U=j.parentRef.value?.parentRef.value;if(!U)return B;const W=s(U.id)??{};if("Alias"in W){const K=W.Alias,G=z$1.array(z$1.string()).safeParse(K);return G.success&&B.push(...G.data),B}}return B};return{showBacklinksCounter:p,getAllAliases:x,getBacklinksConsideringAliases:(L,V="both")=>{const B=x(L),F=new Set;for(const j of B){const I=a(j,V);for(const U of I??[])F.add(U)}return F}}});var _sfc_main$1B=defineComponent({__name:"Breadcrumb",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("nav",{"aria-label":"breadcrumb",class:normalizeClass(e.class)},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$1A=defineComponent({__name:"BreadcrumbItem",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("li",{class:normalizeClass(unref(cn)("inline-flex items-center gap-1.5",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$1z=defineComponent({__name:"BreadcrumbLink",props:{asChild:{type:Boolean},as:{default:"a"},class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),{as:n.as,"as-child":n.asChild,class:normalizeClass(unref(cn)("transition-colors hover:text-foreground",e.class))},{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),_sfc_main$1y=defineComponent({__name:"BreadcrumbList",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("ol",{class:normalizeClass(unref(cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$1x=defineComponent({__name:"BreadcrumbSeparator",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("li",{role:"presentation","aria-hidden":"true",class:normalizeClass(unref(cn)("[&>svg]:w-3.5 [&>svg]:h-3.5",e.class))},[renderSlot(n.$slots,"default",{},()=>[createVNode(unref(ChevronRight))])],2))}}),_sfc_main$1w=defineComponent({__name:"BlockPath",props:{blockId:{},includeSelf:{type:Boolean}},emits:["click-path-segment"],setup(o,{emit:e}){const n=o,a=e,{blocksManager:s}=BlocksContext.useContext(),l=computed(()=>{const c=[...s.getBlockPath(n.blockId)];return c.reverse(),n.includeSelf||c.pop(),c});return(c,d)=>(openBlock(),createBlock(unref(_sfc_main$1B),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1y),{class:"!gap-x-1 !gap-y-0"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.value,(u,f)=>(openBlock(),createElementBlock(Fragment,{key:u.id},[createVNode(unref(_sfc_main$1A),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1z),{class:"no-underline cursor-pointer",onClick:p=>a("click-path-segment",u.id)},{default:withCtx(()=>[createVNode(_sfc_main$1D,{class:"!max-w-[unset] *:cursor-pointer",block:u,"block-tree":void 0,readonly:!0},null,8,["block"])]),_:2},1032,["onClick"])]),_:2},1024),f!==l.value.length-1?(openBlock(),createBlock(unref(_sfc_main$1x),{key:0},{default:withCtx(()=>d[0]||(d[0]=[createTextVNode(" / ")])),_:1})):createCommentVNode("",!0)],64))),128))]),_:1})]),_:1}))}});const _hoisted_1$C={key:0,class:"rounded-md bg-muted px-1 min-w-5 h-fit flex items-center justify-center text-sm text-muted-foreground select-none cursor-pointer"},_hoisted_2$j={class:"pointer-events-none select-none"};var _sfc_main$1v=defineComponent({__name:"BacklinksCounter",props:{blockId:{}},setup(o){const e=o,{blocksManager:n}=BlocksContext.useContext(),{getBacklinksConsideringAliases:a,getAllAliases:s}=BacklinksContext.useContext(),l=computed(()=>a(e.blockId)),c=computed(()=>s(e.blockId)),d=computed(()=>[...l.value].map(u=>n.getBlock(u)).filter(u=>u!==null));return(u,f)=>(openBlock(),createBlock(unref(_sfc_main$1P),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1I),null,{default:withCtx(()=>[l.value.size>0?(openBlock(),createElementBlock("div",_hoisted_1$C,toDisplayString$1(l.value.size),1)):createCommentVNode("",!0)]),_:1}),createVNode(unref(_sfc_main$1O),{class:"w-[300px] max-h-[300px] overflow-y-auto"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value,p=>(openBlock(),createBlock(unref(_sfc_main$1M),{key:p.id,class:"w-full block"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$j,[createVNode(_sfc_main$1D,{class:"flex-grow !max-w-[unset]",block:p,"block-tree":void 0,readonly:!0,"highlight-refs":c.value},null,8,["block","highlight-refs"]),createVNode(_sfc_main$1w,{class:"*:text-xs mt-1","block-id":p.id},null,8,["block-id"])])]),_:2},1024))),128)),createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",class:"w-full mt-2"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(u.$t("kbView.backlinks.openBacklinksPanel")),1)]),_:1})]),_:1})]),_:1}))}});const _hoisted_1$B=["data-item-type","data-block-id","data-item-id","data-block-level","data-block-ref-color"],_hoisted_2$i={class:"indent-lines"},_hoisted_3$f=["data-level"],_hoisted_4$c={class:"relative block-content-container"},_hoisted_5$6={key:0,class:"block-buttons"},_hoisted_6$3={class:"more-button"};var _sfc_main$1u=defineComponent({__name:"BasicBlockItem",props:{blockTree:{default:void 0},block:{},level:{},hideFoldButton:{type:Boolean,default:!1},hideContextMenu:{type:Boolean,default:!1},hideBullet:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},highlightTerms:{default:()=>[]},highlightRefs:{default:()=>[]},itemType:{default:"basic-block"},itemId:{default:void 0},fold:{type:Boolean,default:void 0},handleClickFoldButton:{type:Function,default:void 0}},setup(o){const e=o,n=useTaskQueue(),{blockEditor:a}=BlocksContext.useContext(),{lastFocusedDiId:s,lastFocusedBlockTree:l}=LastFocusContext.useContext(),{mainRootBlockId:c}=MainTreeContext.useContext(),{selectedBlockIds:d,draggingDropPos:u,dragging:f}=BlockSelectDragContext.useContext(),{getMirrors:p}=IndexContext.useContext(),_=computed(()=>p(e.block.id)),b=computed(()=>_.value.size>0||e.block.type==="mirrorBlock"),v=computed(()=>e.fold??e.block.fold),k=computed(()=>e.block.childrenIds.length>0),x=computed(()=>d.value.allNonFolded.includes(e.block.id)),M=()=>{s.value=e.itemId??null,l.value=e.blockTree??null,f.value||(d.value={topLevelOnly:[],allNonFolded:[]})},E=()=>{if(e.handleClickFoldButton){e.handleClickFoldButton();return}else{const V=e.block.id;n.addTask(()=>a.toggleFold(V))}},L=()=>{c.value=e.block.id};return(V,B)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["block-item",{hasChildren:k.value,fold:v.value,selected:x.value,[V.itemType]:!0}]),"data-item-type":V.itemType,"data-block-id":V.block.id,"data-item-id":V.itemId,"data-block-level":V.level,"data-block-ref-color":V.block.metadata?.blockRefColor,onFocusin:M},[createBaseVNode("div",_hoisted_2$i,[(openBlock(!0),createElementBlock(Fragment,null,renderList(V.level,F=>(openBlock(),createElementBlock("div",{class:"indent-line",key:F,"data-level":F},null,8,_hoisted_3$f))),128))]),createBaseVNode("div",_hoisted_4$c,[V.hideContextMenu?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_5$6,[createVNode(_sfc_main$1C,{"block-id":V.block.id},{default:withCtx(()=>[createBaseVNode("div",_hoisted_6$3,[createVNode(unref(Ellipsis))])]),_:1},8,["block-id"]),V.hideFoldButton?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:"fold-button",onClick:withModifiers(E,["stop"])},[createVNode(unref(Triangle))]))])),V.hideBullet?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:1,class:"bullet shrink-0",onClick:withModifiers(L,["stop"])},[b.value?(openBlock(),createBlock(unref(Diamond),{key:0,class:"diamond"})):(openBlock(),createBlock(unref(Circle),{key:1,class:"circle"}))])),createVNode(_sfc_main$1D,{block:V.block,"item-id":V.itemId,"block-tree":V.blockTree,readonly:V.readonly,"highlight-terms":V.highlightTerms,"highlight-refs":V.highlightRefs},null,8,["block","item-id","block-tree","readonly","highlight-terms","highlight-refs"]),createVNode(_sfc_main$1v,{"block-id":V.block.id},null,8,["block-id"])]),unref(u)?.itemId===V.itemId?(openBlock(),createElementBlock("div",{key:0,class:"absolute bottom-[-2px] left-0 h-[2px] rounded w-[40%] bg-blue-500",style:normalizeStyle({marginLeft:unref(u).relIndent+"px"})},null,4)):createCommentVNode("",!0)],42,_hoisted_1$B))}}),_sfc_main$1t=defineComponent({__name:"BacklinksBlockItem",props:{blockTree:{default:void 0},refBlockId:{},itemId:{default:void 0},block:{},readonly:{type:Boolean,default:!1},highlightTerms:{default:()=>[]},highlightRefs:{default:()=>[]}},setup(o){const e=o,n=computed(()=>{const s=e.blockTree;return s?!s.expandedBP.value[e.block.id]:e.block.fold}),a=()=>{const s=e.blockTree;if(!s)return;const l=s.expandedBP.value;l[e.block.id]?delete l[e.block.id]:l[e.block.id]=!0};return(s,l)=>(openBlock(),createBlock(_sfc_main$1u,mergeProps(s.$props,{"item-type":"backlink-block",level:0,"highlight-refs":[...s.highlightRefs,s.refBlockId],fold:n.value,"item-id":s.itemId,"handle-click-fold-button":a}),null,16,["highlight-refs","fold","item-id"]))}});const _hoisted_1$A={class:"block-item flex items-center ml-6 mt-10 mb-2 text-muted-foreground","data-item-type":"backlink-header"};var _sfc_main$1s=defineComponent({__name:"BacklinksHeaderItem",props:{blockId:{},backlinks:{}},setup(o){return(e,n)=>(openBlock(),createElementBlock("div",_hoisted_1$A,[createVNode(unref(Link),{class:"size-4 mr-2"}),createBaseVNode("div",null,toDisplayString$1(e.$t("kbView.backlinksPanel.nBacklinks",{count:e.backlinks.length})),1),createVNode(unref(_sfc_main$1P),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1I),{"as-child":""},{default:withCtx(()=>[createVNode(unref(Ellipsis),{class:"size-4 ml-2 cursor-pointer hover:text-primary transition-colors"})]),_:1}),createVNode(unref(_sfc_main$1O),{class:"min-w-[200px]"},{default:withCtx(()=>[createVNode(unref(_sfc_main$1N),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(ListTree),{class:"size-4 mr-2"}),n[0]||(n[0]=createTextVNode(" 显示路径 "))]),_:1}),createVNode(unref(_sfc_main$1L),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1J),null,{default:withCtx(()=>[createVNode(unref(PanelsTopLeft),{class:"size-4 mr-2"}),n[1]||(n[1]=createTextVNode(" 切换视图 "))]),_:1}),createVNode(unref(ih),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1K),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(List),{class:"size-4 mr-2"}),n[2]||(n[2]=createTextVNode(" 列表视图 "))]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(Table),{class:"size-4 mr-2"}),n[3]||(n[3]=createTextVNode(" 表格视图 "))]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(Kanban),{class:"size-4 mr-2"}),n[4]||(n[4]=createTextVNode(" 看板视图 "))]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1L),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1J),null,{default:withCtx(()=>[createVNode(unref(ArrowUpNarrowWide),{class:"size-4 mr-2"}),n[5]||(n[5]=createTextVNode(" 排序规则 "))]),_:1}),createVNode(unref(ih),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1K),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(ArrowUpAZ),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(e.$t("kbView.command.sortDictAsc")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(ArrowDownAZ),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(e.$t("kbView.command.sortDictDesc")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowUp),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(e.$t("kbView.command.ctimeAsc")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowDown),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(e.$t("kbView.command.ctimeDesc")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowUp),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(e.$t("kbView.command.mtimeAsc")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowDown),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(e.$t("kbView.command.mtimeDesc")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}}),_sfc_main$1r=defineComponent({__name:"PotentialLinksBlockItem",props:{blockTree:{default:void 0},refBlockId:{},block:{},readonly:{type:Boolean,default:!1},itemId:{default:void 0},highlightTerms:{default:()=>[]},highlightRefs:{default:()=>[]}},setup(o){const e=o,n=computed(()=>{const s=e.blockTree;return s?!s.expandedBP.value[e.block.id]:e.block.fold}),a=()=>{const s=e.blockTree;if(!s)return;const l=s.expandedBP.value;l[e.block.id]?delete l[e.block.id]:l[e.block.id]=!0};return(s,l)=>(openBlock(),createBlock(_sfc_main$1u,mergeProps(s.$props,{"item-type":"potential-links-block",level:0,"highlight-refs":[...s.highlightRefs??[],s.refBlockId],fold:n.value,"item-id":s.itemId,"handle-click-fold-button":a}),null,16,["highlight-refs","fold","item-id"]))}});const _hoisted_1$z={class:"block-item flex items-center ml-6 mt-10 text-muted-foreground mb-2","data-item-type":"potential-links-header"};var _sfc_main$1q=defineComponent({__name:"PotentialLinksHeaderItem",props:{blockId:{},potentialLinks:{}},setup(o){return(e,n)=>(openBlock(),createElementBlock("div",_hoisted_1$z,[createVNode(unref(Link),{class:"size-4 mr-2"}),createBaseVNode("div",null,toDisplayString$1(e.$t("kbView.backlinksPanel.nPotentialLinks",{count:e.potentialLinks.length})),1)]))}}),_sfc_main$1p=defineComponent({__name:"BacklinksDescendantItem",props:{blockTree:{default:void 0},block:{},level:{},itemId:{default:void 0},readonly:{type:Boolean,default:!1},highlightTerms:{default:()=>[]},highlightRefs:{default:()=>[]}},setup(o){const e=o,n=computed(()=>{const s=e.blockTree;return s&&s.expandedBP.value[e.block.id]?!1:e.block.fold}),a=()=>{const s=e.blockTree;if(!s)return;const l=s.expandedBP.value;l[e.block.id]?delete l[e.block.id]:l[e.block.id]=!0};return(s,l)=>(openBlock(),createBlock(_sfc_main$1u,mergeProps(s.$props,{"item-type":"backlink-descendant",fold:n.value,"item-id":s.itemId,"handle-click-fold-button":a}),null,16,["fold","item-id"]))}}),_sfc_main$1o=defineComponent({__name:"PotentialLinksDescendantItem",props:{blockTree:{default:void 0},block:{},level:{},readonly:{type:Boolean,default:!1},itemId:{default:void 0},highlightTerms:{default:()=>[]},highlightRefs:{default:()=>[]}},setup(o){const e=o,n=computed(()=>{const s=e.blockTree;return s&&s.expandedBP.value[e.block.id]?!1:e.block.fold}),a=()=>{const s=e.blockTree;if(!s)return;const l=s.expandedBP.value;l[e.block.id]?delete l[e.block.id]:l[e.block.id]=!0};return(s,l)=>(openBlock(),createBlock(_sfc_main$1u,mergeProps(s.$props,{"item-type":"potential-links-descendant",fold:n.value,"handle-click-fold-button":a,"item-id":s.itemId}),null,16,["fold","item-id"]))}});const _hoisted_1$y=["data-item-type","data-block-id","data-block-level"],_hoisted_2$h={class:"indent-lines"},_hoisted_3$e=["data-level"],_hoisted_4$b={class:"relative block-content-container"},_hoisted_5$5={class:"block-buttons"},_hoisted_6$2={class:"more-button"},_hoisted_7$2={class:"bullet shrink-0"};var _sfc_main$1n=defineComponent({__name:"MissingBlockItem",props:{blockTree:{default:void 0},blockId:{},level:{},hideBullet:{type:Boolean,default:!1},itemType:{default:"missing-block"},itemId:{default:void 0}},setup(o){const e=o,{selectedBlockIds:n,draggingDropPos:a}=BlockSelectDragContext.useContext(),s=computed(()=>n.value.allNonFolded.includes(e.blockId));return(l,c)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["missing-block-item block-item",{selected:s.value,[l.itemType]:!0}]),"data-item-type":l.itemType,"data-block-id":l.blockId,"data-block-level":l.level},[createBaseVNode("div",_hoisted_2$h,[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.level,d=>(openBlock(),createElementBlock("div",{class:"indent-line",key:d,"data-level":d},null,8,_hoisted_3$e))),128))]),createBaseVNode("div",_hoisted_4$b,[createBaseVNode("div",_hoisted_5$5,[createVNode(_sfc_main$1C,{"block-id":l.blockId},{default:withCtx(()=>[createBaseVNode("div",_hoisted_6$2,[createVNode(unref(Ellipsis))])]),_:1},8,["block-id"])]),createBaseVNode("div",_hoisted_7$2,[createVNode(unref(Circle),{class:"circle"})]),c[0]||(c[0]=createBaseVNode("div",{class:"text-red-500"},"Missing Block",-1))]),unref(a)?.itemId===l.itemId?(openBlock(),createElementBlock("div",{key:0,class:"absolute bottom-[-2px] left-0 h-[2px] rounded w-[40%] bg-blue-500",style:normalizeStyle({marginLeft:unref(a).relIndent+"px"})},null,4)):createCommentVNode("",!0)],10,_hoisted_1$y))}}),_sfc_main$1m=defineComponent({__name:"RootBlockItem",props:{blockTree:{default:void 0},itemId:{default:void 0},block:{},readonly:{type:Boolean,default:!1},highlightTerms:{default:()=>[]},highlightRefs:{default:()=>[]}},setup(o){return(e,n)=>(openBlock(),createBlock(_sfc_main$1u,mergeProps(e.$props,{class:"root-block","item-type":"root-block",level:0,"highlight-refs":e.highlightRefs,fold:!1,"item-id":e.itemId,"hide-bullet":!0,"hide-fold-button":!0,"hide-context-menu":!0}),null,16,["highlight-refs","item-id"]))}});const _hoisted_1$x=["block-tree-id"];var _sfc_main$1l=defineComponent({__name:"BlockTree",props:{id:{},virtual:{type:Boolean,default:!0},rootBlockId:{},rootBlockLevel:{},enlargeRootBlock:{type:Boolean,default:!1},showBacklinks:{type:Boolean,default:!0},showPotentialLinks:{type:Boolean,default:!0},paddingBottom:{default:200},paddingTop:{default:0}},setup(o,{expose:e}){const n=o,a=useEventBus(),s=BlockTreeContext.useContext(),l=BacklinksContext.useContext(),c=IndexContext.useContext(),{blocksManager:d,blockEditor:u}=BlocksContext.useContext(),f=BlockSelectDragContext.useContext(),p=ref(null),_=ref(null),b=shallowRef(),v=mitt(),k=a.eventRefs.afterBlocksTrCommit,x=new Map,M=ref({}),E=()=>{const fe=n.id;console.time(`calc displayItems ${fe}`),b.value=generateDisplayItems({rootBlockId:n.rootBlockId,rootBlockLevel:n.rootBlockLevel,enlargeRootBlock:n.enlargeRootBlock,blocksManager:d,showBacklinks:n.showBacklinks??!0,showPotentialLinks:n.showPotentialLinks??!0,expandedBP:M.value,getBacklinksContext:()=>l,getIndexContext:()=>c}),console.timeEnd(`calc displayItems ${fe}`),_.value?.forceUpdate?.(),nextTick(()=>{v.emit("displayItemsUpdated",[b.value])})};watch(M,E,{deep:!0}),watch([()=>n.rootBlockId,k],E,{immediate:!0});const L=fe=>new Promise(me=>{v.once("displayItemsUpdated",()=>{fe&&fe(),me()})}),V=(fe,me)=>{for(let te=0;te<b.value.length;te++)if(b.value[te].itemId===fe){for(let we=te-1;we>=0;we--){const _e=b.value[we];if(!me||me(_e))return[_e,we]}return null}return null},B=(fe,me)=>{for(let te=0;te<b.value.length;te++)if(b.value[te].itemId===fe){for(let we=te+1;we<b.value.length;we++){const _e=b.value[we];if(!me||me(_e))return[_e,we]}return null}return null},F=(fe,me)=>V(fe,me),j=(fe,me)=>B(fe,me),I=fe=>p.value?.querySelector(`[data-id="${fe}"]`)??null,U=fe=>x.get(fe)??null,W=(fe,me)=>{x.set(fe,me)},K=(fe,me)=>{const te=x.get(fe);te===me&&!te.dom.isConnected&&x.delete(fe)},G=fe=>{const me=I(fe);if(me&&inViewport(me))return!0;const te=b.value.findIndex(ue=>ue.itemId==fe);if(te!=null&&te>=0){const ue=_.value?.getItemPosByIndex(te);if(ue){const{top:we}=ue;_.value?.scrollToOffset(we-60)}}return!0},Z=async(fe,me={})=>{let{scrollIntoView:te,highlight:ue}=me;if(te??=!0,ue??=!1,te&&!G(fe))return;await timeout(0);const we=U(fe);we&&we.focus();const _e=I(fe)?.querySelector(".block-item");if(!_e)return;const Be=_e.querySelector(".math-content");Be instanceof HTMLElement&&Be.click();const Ge=_e.querySelector(".cursor-container");Ge instanceof HTMLElement&&Ge.focus(),ue&&(_e.classList.add("highlight-keep"),setTimeout(()=>{_e.classList.add("highlight-fade")},1e3),setTimeout(()=>{_e.classList.remove("highlight-keep"),_e.classList.remove("highlight-fade")},3e3))},oe=async(fe,me={})=>{let{scrollIntoView:te,highlight:ue,expandIfFold:we}=me;te??=!0,ue??=!1,we??=!1,we&&await u.locateBlock(fe,de),await timeout(0);const _e=Y(Be=>Be.type==="basic-block"&&Be.block.id===fe);_e&&await Z(_e.itemId,{scrollIntoView:te,highlight:ue})},Y=fe=>b.value?.find(me=>fe(me))??null,se=fe=>{const me=U(fe);if(me instanceof EditorView$1){const te=me.state.tr,ue=AllSelection.atEnd(me.state.doc);te.setSelection(ue),me.dispatch(te)}else if(me instanceof EditorView){const te=me.state.doc.length;me.dispatch({selection:{anchor:te}})}},le=fe=>{const me=U(fe);if(me instanceof EditorView$1){const te=me.state.tr,ue=AllSelection.atStart(me.state.doc);te.setSelection(ue),me.dispatch(te)}else me instanceof EditorView&&me.dispatch({selection:{anchor:0}})},ce=fe=>b.value?.find(me=>me.itemId===fe)??null,de={getProps:()=>n,getId:()=>n.id,getDom:()=>p.value,getRootBlockId:()=>n.rootBlockId,getDisplayItems:()=>b.value,getDi:ce,findDi:Y,localEventBus:v,expandedBP:M,nextUpdate:L,getEditorViews:()=>x,getEditorView:U,registerEditorView:W,unregisterEditorView:K,getSuccessorDi:B,getPredecessorDi:V,getDiAbove:F,getDiBelow:j,focusDi:Z,focusBlock:oe,getDomOfDi:I,moveCursorToTheEnd:se,moveCursorToBegin:le};e(de);let ge=null,qe=null,ke=!1,Ee=null;const Oe=()=>{if(!Ee){const fe=p.value?.querySelector(".indent-line");if(fe){const me=parseFloat(window.getComputedStyle(fe).marginRight);Ee={width:fe.clientWidth,rightMargin:me}}}return Ee},Ve=fe=>{try{if(ke){const me=useTaskQueue(),te=f.draggingDropPos.value;if(!te)return;const{itemId:ue,absLevel:we}=te,_e=ce(ue);if(!_e||!DI_FILTERS.isBlockDi(_e))return;const Be=f.selectedBlockIds.value,Ge=d.getBlockLevel(_e.block.id);we>Ge?me.addTask(()=>{const ze=u.normalizePos({parentId:_e.block.id,childIndex:"first"});ze&&u.moveBlocks({blockIds:Be.topLevelOnly,pos:ze})}):me.addTask(()=>{const ze=u.normalizePos({baseBlockId:_e.block.id,offset:1});ze&&u.moveBlocks({blockIds:Be.topLevelOnly,pos:ze})})}}finally{ge=null,qe=null,ke=!1,f.dragging.value=!1,f.draggingDropPos.value=null,document.removeEventListener("pointermove",dt),document.removeEventListener("pointerup",Ve),document.removeEventListener("pointerleave",Ve)}},Ne=()=>{f.draggingDropPos.value=null},dt=useThrottleFn(fe=>{if(!(Date.now().valueOf()-(qe??0)<200))if(f.dragging.value=!0,fe.preventDefault(),fe.stopPropagation(),ke){if(f.selectedBlockIds.value.topLevelOnly.length===0){if(!ge||!DI_FILTERS.isBlockDi(ge))return;const ee={topLevelOnly:[ge.block.id],allNonFolded:[]};d.forDescendants({rootBlockId:ge.block.id,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:re=>{ee.allNonFolded.push(re.id)}}),f.selectedBlockIds.value=ee}const te=getHoveredElementWithClass(fe.target,"block-item"),ue=te?.dataset.itemId,we=parseInt(te?.dataset.blockLevel);if(!ue||te.classList.contains("selected"))return Ne();const{width:_e,rightMargin:Be}=Oe(),Ge=Math.floor((fe.x+Be)/(_e+Be)),ze=te.getBoundingClientRect();if(fe.y<ze.y+ze.height/2){const ee=F(ue,DI_FILTERS.isBlockDi);if(!ee||!DI_FILTERS.isBlockDi(ee[0]))return Ne();const re=I(ee[0].itemId)?.querySelector(".block-item");if(!(re instanceof HTMLElement))return Ne();const Te=parseInt(re.dataset.blockLevel),Xe=re.classList.contains("fold"),ht=re.classList.contains("hasChildren"),ft=Xe&&ht?Te:Te+1,Ze=clip(Ge,ft,we);f.draggingDropPos.value={itemId:ee[0].itemId,relIndent:Ze*(_e+Be)+_e,absLevel:Ze+n.rootBlockLevel}}else{let ee;const re=j(ue,DI_FILTERS.isBlockDi),Te=te.classList.contains("fold"),Xe=te.classList.contains("hasChildren");if(re){if(!DI_FILTERS.isBlockDi(re[0]))return Ne();const ht=I(re[0].itemId)?.querySelector(".block-item");if(!(ht instanceof HTMLElement))return Ne();const ft=parseInt(ht.dataset.blockLevel),Ce=Te&&Xe?we:we+1,Ze=ft;ee=clip(Ge,Ce,Ze),console.log(`pointerLevel: ${Ge}, clipFrom: ${Ce}, clipTo: ${Ze}, clippedLevel: ${ee}`)}else{const ht=Te&&Xe?we:we+1;ee=clip(Ge,ht,1)}f.draggingDropPos.value={itemId:ue,relIndent:ee*(_e+Be)+_e,absLevel:ee+n.rootBlockLevel}}}else{const ue=getHoveredElementWithClass(fe.target,"block-item")?.dataset.itemId,we=ue?ce(ue):null;if(!ue||!we||!DI_FILTERS.isBlockDi(we)||ge==null||!DI_FILTERS.isBlockDi(ge))return;if(ge.itemId===ue){f.selectedBlockIds.value={topLevelOnly:[],allNonFolded:[]},Z(ue,{scrollIntoView:!1});return}document.activeElement?.blur(),f.selectedBlockIds.value={topLevelOnly:[],allNonFolded:[]};const _e=d.getBlockPath(ge.block.id).map(We=>We.id),Be=d.getBlockPath(we.block.id).map(We=>We.id);let Ge=-1,ze=-1;for(let We=0;We<_e.length;We++){const ee=Be.indexOf(_e[We]);if(ee!=-1){Ge=We,ze=ee;break}}if(Ge!==-1&&ze!==-1)if(Ge===0||ze===0){const We=_e[Ge],ee={topLevelOnly:[We],allNonFolded:[]};d.forDescendants({rootBlockId:We,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:re=>{ee.allNonFolded.push(re.id)}}),f.selectedBlockIds.value=ee}else{const We=_e[Ge],ee=d.getBlock(We);if(!ee)return;const re=_e[Ge-1],Te=Be[ze-1],Xe=ee.childrenIds.indexOf(re),ht=ee.childrenIds.indexOf(Te),ft=Math.min(Xe,ht),Ce=Math.max(Xe,ht),Ze={topLevelOnly:ee.childrenIds.slice(ft,Ce+1),allNonFolded:[]};for(let pt=ft;pt<=Ce;pt++){const bt=ee.childrenIds[pt];d.forDescendants({rootBlockId:bt,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:St=>{Ze.allNonFolded.push(St.id)}})}f.selectedBlockIds.value=Ze}}},100),pe=fe=>{const me=getHoveredElementWithClass(fe.target,"block-item");if(!me)return;const te=me.dataset.itemId,ue=te?ce(te):null;if(!te||!ue||!DI_FILTERS.isBlockDi(ue))return;ge=ue,qe=Date.now().valueOf(),f.dragging.value=!1,getHoveredElementWithClass(fe.target,"bullet")&&(ke=!0),document.addEventListener("pointermove",dt),document.addEventListener("pointerup",Ve),document.addEventListener("pointerleave",Ve)};return onMounted(()=>{const fe=p.value;fe&&Object.assign(fe,{controller:de}),s.registerBlockTree(de)}),onUnmounted(()=>{s.unregisterBlockTree(n.id)}),(fe,me)=>(openBlock(),createElementBlock("div",{class:"block-tree select-none",ref_key:"$blockTree",ref:p,"block-tree-id":fe.id,style:normalizeStyle({"--padding-bottom":`${fe.paddingBottom}px`,"--padding-top":`${fe.paddingTop}px`}),onPointerdown:pe},[fe.virtual?(openBlock(),createBlock(unref(VirtList),{key:0,itemKey:"itemId",class:"vlist",list:b.value,buffer:10,minSize:24,ref_key:"$vlist",ref:_,itemClass:"block-container"},{header:withCtx(()=>me[0]||(me[0]=[])),default:withCtx(({itemData:te})=>[te.type=="root-block"?(openBlock(),createBlock(_sfc_main$1m,{key:te.itemId,"item-id":te.itemId,"block-tree":de,block:te.block,"highlight-terms":te.highlightTerms,"highlight-refs":te.highlightRefs},null,8,["item-id","block","highlight-terms","highlight-refs"])):createCommentVNode("",!0),te.type=="basic-block"?(openBlock(),createBlock(_sfc_main$1u,{key:te.itemId,"item-id":te.itemId,"block-tree":de,block:te.block,level:te.level,"highlight-terms":te.highlightTerms,"highlight-refs":te.highlightRefs},null,8,["item-id","block","level","highlight-terms","highlight-refs"])):createCommentVNode("",!0),te.type=="backlink-header"?(openBlock(),createBlock(_sfc_main$1s,{key:te.itemId,"block-tree":de,"block-id":te.blockId,backlinks:te.backlinks},null,8,["block-id","backlinks"])):createCommentVNode("",!0),te.type=="backlink-block"?(openBlock(),createBlock(_sfc_main$1t,{key:te.itemId,"item-id":te.itemId,"block-tree":de,block:te.block,"ref-block-id":te.refBlockId,readonly:te.readonly,"highlight-terms":te.highlightTerms,"highlight-refs":te.highlightRefs},null,8,["item-id","block","ref-block-id","readonly","highlight-terms","highlight-refs"])):createCommentVNode("",!0),te.type=="backlink-descendant"?(openBlock(),createBlock(_sfc_main$1p,{key:te.itemId,"item-id":te.itemId,"block-tree":de,block:te.block,level:te.level,readonly:te.readonly,"highlight-terms":te.highlightTerms,"highlight-refs":te.highlightRefs},null,8,["item-id","block","level","readonly","highlight-terms","highlight-refs"])):createCommentVNode("",!0),te.type=="potential-links-header"?(openBlock(),createBlock(_sfc_main$1q,{key:te.itemId,"block-id":te.blockId,"potential-links":te.potentialLinks},null,8,["block-id","potential-links"])):createCommentVNode("",!0),te.type=="potential-links-block"?(openBlock(),createBlock(_sfc_main$1r,{key:te.itemId,"item-id":te.itemId,"block-tree":de,block:te.block,"ref-block-id":te.refBlockId,readonly:te.readonly,"highlight-terms":te.highlightTerms,"highlight-refs":te.highlightRefs},null,8,["item-id","block","ref-block-id","readonly","highlight-terms","highlight-refs"])):createCommentVNode("",!0),te.type=="potential-links-descendant"?(openBlock(),createBlock(_sfc_main$1o,{key:te.itemId,"item-id":te.itemId,"block-tree":de,block:te.block,level:te.level,readonly:te.readonly,"highlight-terms":te.highlightTerms,"highlight-refs":te.highlightRefs},null,8,["item-id","block","level","readonly","highlight-terms","highlight-refs"])):createCommentVNode("",!0),te.type=="missing-block"?(openBlock(),createBlock(_sfc_main$1n,{key:te.itemId,"item-id":te.itemId,"block-id":te.blockId,level:te.level},null,8,["item-id","block-id","level"])):createCommentVNode("",!0)]),footer:withCtx(()=>me[1]||(me[1]=[])),_:1},8,["list"])):createCommentVNode("",!0)],44,_hoisted_1$x))}});function copyAsHtml(o){const e=new Blob([o],{type:"text/html"}),n=[new ClipboardItem({[e.type]:e})];navigator.clipboard.write(n)}function copyAsPlainText(o){navigator.clipboard.writeText(o)}var _sfc_main$1k=defineComponent({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Oh),mergeProps(n.value,{class:unref(cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$1j=defineComponent({__name:"Select",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},dir:{},name:{},autocomplete:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(o,{emit:e}){const s=xe(o,e);return(l,c)=>(openBlock(),createBlock(unref(Ny),normalizeProps(guardReactiveProps(unref(s))),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),_sfc_main$1i=defineComponent({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{default:"popper"},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const n=o,a=e,s=computed(()=>{const{class:c,...d}=n;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(zy),null,{default:withCtx(()=>[createVNode(unref(Ky),mergeProps({...unref(l),...c.$attrs},{class:unref(cn)("relative z-50 max-h-96 min-w-32 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",c.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n.class)}),{default:withCtx(()=>[createVNode(unref(_sfc_main$1e)),createVNode(unref(Xy),{class:normalizeClass(unref(cn)("p-1",c.position==="popper"&&"h-[--radix-select-trigger-height] w-full min-w-[--radix-select-trigger-width]"))},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["class"]),createVNode(unref(_sfc_main$1f))]),_:3},16,["class"])]),_:3}))}}),_sfc_main$1h=defineComponent({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Gy),mergeProps({class:unref(cn)("p-1 w-full",e.class)},n.value),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}});const _hoisted_1$w={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"};var _sfc_main$1g=defineComponent({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(jy),mergeProps(unref(a),{class:unref(cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.class)}),{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$w,[createVNode(unref(Uy),null,{default:withCtx(()=>[createVNode(unref(Check),{class:"h-4 w-4"})]),_:1})]),createVNode(unref(Yy),null,{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3})]),_:3},16,["class"]))}}),_sfc_main$1f=defineComponent({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Jy),mergeProps(unref(a),{class:unref(cn)("flex cursor-default items-center justify-center py-1",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createVNode(unref(ChevronDown),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),_sfc_main$1e=defineComponent({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Zy),mergeProps(unref(a),{class:unref(cn)("flex cursor-default items-center justify-center py-1",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createVNode(unref(ChevronUp),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),_sfc_main$1d=defineComponent({__name:"SelectTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Ly),mergeProps(unref(a),{class:unref(cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default"),createVNode(unref(eg),{"as-child":""},{default:withCtx(()=>[createVNode(unref(ChevronDown),{class:"w-4 h-4 opacity-50 shrink-0"})]),_:1})]),_:3},16,["class"]))}}),_sfc_main$1c=defineComponent({__name:"SelectValue",props:{placeholder:{},asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(Qy),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}});const _hoisted_1$v={class:"flex flex-col gap-4 py-2"},_hoisted_2$g={class:"flex flex-col space-y-2"},_hoisted_3$d={key:0,class:"flex flex-col space-y-2"},_hoisted_4$a={class:"max-h-[30vh] max-w-full overflow-y-auto overflow-x-hidden text-wrap"},_hoisted_5$4={class:"text-wrap"};var _sfc_main$1b=defineComponent({__name:"Exporter",setup(o){const{open:e,blockId:n,closeExporter:a,exportSubtreeToHtml:s,exportSubtreeToMarkdown:l,exportSubtreeToPdf:c,exportSubtreeToPlainText:d}=ExporterContext.useContext(),u=ref("html"),f=computed(()=>{if(!n.value)return"";switch(u.value){case"html":return s(n.value);case"markdown":return l(n.value);case"plainText":return d(n.value);default:return""}});function p(){u.value==="html"?copyAsHtml(f.value):(u.value==="markdown"||u.value==="plainText")&&copyAsPlainText(f.value),a()}function _(){if(u.value!=="pdf"){const b=new Blob([f.value],{type:"text/plain"}),v=URL.createObjectURL(b),k=document.createElement("a");k.href=v;const x=u.value==="html"?"html":u.value==="markdown"?"md":"txt";k.download=`export_${dayjs().format("YYYY-MM-DD-HH-mm-ss")}.${x}`,k.click(),URL.revokeObjectURL(v)}a()}return(b,v)=>(openBlock(),createBlock(unref(_sfc_main$26),{open:unref(e),"onUpdate:open":v[1]||(v[1]=k=>!k&&unref(a)())},{default:withCtx(()=>[createVNode(unref(_sfc_main$25),{class:"max-w-[80vw] w-[500px] flex flex-col gap-4"},{default:withCtx(()=>[createVNode(unref(_sfc_main$22),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$21),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(b.$t("kbView.exporter.title")),1)]),_:1}),createVNode(unref(_sfc_main$24),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(b.$t("kbView.exporter.description")),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$v,[createBaseVNode("div",_hoisted_2$g,[createVNode(unref(_sfc_main$1k),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(b.$t("kbView.exporter.exportFormat")),1)]),_:1}),createVNode(unref(_sfc_main$1j),{modelValue:u.value,"onUpdate:modelValue":v[0]||(v[0]=k=>u.value=k)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1d),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1c))]),_:1}),createVNode(unref(_sfc_main$1i),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1h),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1g),{value:"html"},{default:withCtx(()=>v[2]||(v[2]=[createTextVNode("HTML")])),_:1}),createVNode(unref(_sfc_main$1g),{value:"markdown"},{default:withCtx(()=>v[3]||(v[3]=[createTextVNode("Markdown")])),_:1}),createVNode(unref(_sfc_main$1g),{value:"pdf"},{default:withCtx(()=>v[4]||(v[4]=[createTextVNode("PDF")])),_:1}),createVNode(unref(_sfc_main$1g),{value:"plainText"},{default:withCtx(()=>v[5]||(v[5]=[createTextVNode("Plain Text")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),u.value!=="pdf"?(openBlock(),createElementBlock("div",_hoisted_3$d,[createVNode(unref(_sfc_main$1k),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(b.$t("kbView.exporter.preview")),1)]),_:1}),createBaseVNode("div",_hoisted_4$a,[createBaseVNode("pre",_hoisted_5$4,toDisplayString$1(f.value),1)])])):createCommentVNode("",!0)]),createVNode(unref(_sfc_main$23),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"outline",onClick:unref(a)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(b.$t("kbView.exporter.cancel")),1)]),_:1},8,["onClick"]),createVNode(unref(_sfc_main$2r),{variant:"outline",disabled:u.value==="pdf",onClick:p},{default:withCtx(()=>[createVNode(unref(Clipboard),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(b.$t("kbView.exporter.copyToClipboard")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$2r),{variant:"outline",onClick:_},{default:withCtx(()=>[createVNode(unref(File),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(b.$t("kbView.exporter.exportToFile")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}}),_sfc_main$1a=defineComponent({__name:"FieldValueInspector",setup(o){const{open:e,blockId:n}=FieldValueInspectorContext.useContext(),{getFieldValues:a}=FieldsManagerContext.useContext(),s=computed(()=>n.value?a(n.value):{});return(l,c)=>(openBlock(),createBlock(unref(_sfc_main$26),{open:unref(e),"onUpdate:open":c[0]||(c[0]=d=>isRef(e)?e.value=d:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$25),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$22),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$21),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("kbView.fieldValuesInspector.title")),1)]),_:1}),createVNode(unref(_sfc_main$24),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("kbView.fieldValuesInspector.description")),1)]),_:1}),createBaseVNode("pre",null,toDisplayString$1(JSON.stringify(s.value,null,2)),1)]),_:1})]),_:1})]),_:1},8,["open"]))}});const BasicSettingsContext=createContext(()=>{const{registerSettingGroup:o,registerSettingItem:e}=SettingsContext.useContext(),{kbPrefix:n}=ServerInfoContext.useContext();o({key:"basic",label:{zh:"基本设置"}});const a="basic.textFontFamily",s=computed(()=>`${n.value}${a}`),l="",c=useLocalStorage2(s,l);e({id:a,groupKey:"basic",label:{zh:"正文字体"},desc:{zh:"指定笔记正文的字体。"},defaultValue:l,value:useWritableComputedRef(c),componentType:{type:"fontSelector"}});const d="basic.uiFontFamily",u=computed(()=>`${n.value}${d}`),f="",p=useLocalStorage2(u,f);e({id:d,groupKey:"basic",label:{zh:"界面字体"},desc:{zh:"指定软件界面字体。在不指定其他字体的情况下，该字体将成为软件的基础字体。"},defaultValue:f,value:useWritableComputedRef(p),componentType:{type:"fontSelector"}});const _="basic.monospaceFontFamily",b=computed(()=>`${n.value}${_}`),v="",k=useLocalStorage2(b,v);e({id:_,groupKey:"basic",label:{zh:"代码块字体"},desc:{zh:"指定行内代码、代码块等需要等宽字体的场景使用的字体。"},defaultValue:v,value:useWritableComputedRef(k),componentType:{type:"fontSelector"}});const x="basic.enableFloatingEditor",M=computed(()=>`${n.value}${x}`),E=!1,L=useLocalStorage2(M,E);return e({id:x,groupKey:"basic",label:{zh:"启用浮动编辑器"},desc:{zh:"启用后，在块引用块上按 Ctrl / Command 键时，会弹出浮动编辑器。"},defaultValue:E,value:useWritableComputedRef(L),componentType:{type:"switch"}}),{textFontFamily:c,uiFontFamily:p,monospaceFontFamily:k,enableFloatingEditor:L}}),FloatingEditorContext=createContext(()=>{const o=ref(null),e=ref(!1),n=ref(null),{enableFloatingEditor:a}=BasicSettingsContext.useContext(),s=(u,f)=>{a.value&&(n.value=u,o.value=f)},l=()=>{n.value=null,o.value=null,e.value=!1},c=u=>{u.ctrlKey&&o.value&&(e.value=!0)};return onMounted(()=>{window.addEventListener("keydown",c)}),onUnmounted(()=>{window.removeEventListener("keydown",c)}),{showPos:o,open:e,openedBlockId:n,openFloatingEditor:s,closeFloatingEditor:l}});var _sfc_main$19=defineComponent({__name:"FloatingEditor",setup(o){const{showPos:e,open:n,openedBlockId:a}=FloatingEditorContext.useContext();return watch(n,async()=>{if(await nextTick(),!e.value||!(document.querySelector("[data-radix-popper-content-wrapper]")instanceof HTMLElement))return;const{x:l,y:c}=e.value,d=calcPopoverPos(300,300,l,c,{offset:u=>(u.leftUp.y-=30,u.rightUp.y-=30,u)});document.body.style.setProperty("--popover-x",`${d.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${d.rightDown.y}px`)}),(s,l)=>(openBlock(),createBlock(_sfc_main$1W,{open:unref(n),"onUpdate:open":l[0]||(l[0]=c=>isRef(n)?n.value=c:null)},{default:withCtx(()=>[createVNode(_sfc_main$1U),createVNode(_sfc_main$1V,{class:"floating-editor-content p-2 w-[400px] h-[400px] overflow-hidden"},{default:withCtx(()=>[unref(a)?(openBlock(),createBlock(_sfc_main$1l,{key:0,class:"h-full",id:"floating-editor","root-block-id":unref(a),"root-block-level":0,"padding-bottom":0},null,8,["root-block-id"])):createCommentVNode("",!0)]),_:1})]),_:1},8,["open"]))}});const PasteDialogContext=createContext(()=>{const o=ref(!1),e=ref("waiting"),n=ref(""),a=ref("");return{open:o,status:e,progress:n,content:a,showPasteDialog:d=>{a.value=d,e.value="waiting",n.value="",o.value=!0},closePasteDialog:()=>{o.value=!1,a.value=""}}});var _sfc_main$18=defineComponent({__name:"PasteDialog",setup(o){BlocksContext.useContext(),LastFocusContext.useContext();const{open:e,status:n,content:a,closePasteDialog:s}=PasteDialogContext.useContext(),l=computed(()=>{const d=a.value.split(/\r?\n/).filter(p=>p.trim()),u=a.value.length,f=d.length;return{charCount:u,blockCount:f}}),c=async()=>{};return(d,u)=>(openBlock(),createBlock(unref(_sfc_main$2g),{open:unref(e)},{default:withCtx(()=>[createVNode(unref(_sfc_main$2d),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2a),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$29),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(d.$t("kbView.pasteDialog.title")),1)]),_:1}),createVNode(unref(_sfc_main$2c),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(d.$t("kbView.pasteDialog.description",{blockCount:l.value.blockCount,charCount:l.value.charCount})),1)]),_:1})]),_:1}),createVNode(unref(_sfc_main$2b),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2e),{disabled:unref(n)==="pasting",onClick:unref(s)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(d.$t("kbView.pasteDialog.cancelBtn")),1)]),_:1},8,["disabled","onClick"]),createVNode(unref(_sfc_main$2f),{disabled:unref(n)==="pasting",onClick:c},{default:withCtx(()=>[unref(n)==="waiting"?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(d.$t("kbView.pasteDialog.confirmBtn")),1)],64)):unref(n)==="pasting"?(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(unref(LoaderCircle),{class:"size-4 mr-2 animate-spin"}),createTextVNode(" "+toDisplayString$1(d.$t("kbView.pasteDialog.pasting")),1)],64)):unref(n)==="done"?(openBlock(),createElementBlock(Fragment,{key:2},[createVNode(unref(Check),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(d.$t("kbView.pasteDialog.done")),1)],64)):unref(n)==="failed"?(openBlock(),createElementBlock(Fragment,{key:3},[createVNode(unref(X),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(d.$t("kbView.pasteDialog.failed")),1)],64)):createCommentVNode("",!0)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}});const _hoisted_1$u={class:"relative px-1"},_hoisted_2$f={class:"my-2 max-h-[240px] overflow-y-auto px-1"},_hoisted_3$c=["onMouseover"],_hoisted_4$9={key:0,class:"text-center"},_hoisted_5$3={class:"text-sm text-muted-foreground"};var _sfc_main$17=defineComponent({__name:"RefSuggestions",setup(o){const{showPos:e,open:n,query:a,cb:s,focusItemIndex:l,suggestions:c,suppressMouseOver:d,updateSuggestions:u,withScrollSuppressed:f}=RefSuggestionsContext.useContext(),p=computed(()=>a.value.length==0?[]:hybridTokenize(a.value,!1,1,!1)??[]);watch(e,async()=>{if(await nextTick(),!e.value||!(document.querySelector("[data-radix-popper-content-wrapper]")instanceof HTMLElement))return;const{x:M,y:E}=e.value,L=calcPopoverPos(300,300,M,E,{offset:V=>(V.leftDown.y+=30,V.rightDown.y+=30,V)});document.body.style.setProperty("--popover-x",`${L.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${L.rightDown.y}px`)});const _=x=>{x.isComposing||u()},b=x=>{u()},v=()=>{setTimeout(()=>{const x=document.body.querySelector(".ref-suggestions-content .focus");x instanceof HTMLElement&&x.scrollIntoView({block:"nearest"})})},k=generateKeydownHandlerSimple({Escape:{run:x=>x.isComposing||x.keyCode===229?!1:(s.value?.(null),!0)},Enter:{run:x=>x.isComposing||x.keyCode===229?!1:(s.value?.(c.value[l.value]?.value?.id??null),!0),preventDefault:!0,stopPropagation:!0},Backspace:{run:x=>x.isComposing||x.keyCode===229?!1:a.value.length==0?(e.value=null,s.value?.(null),!0):!1,preventDefault:!0,stopPropagation:!0},ArrowUp:{run:x=>x.isComposing||x.keyCode===229?!1:f(()=>(l.value>0?l.value--:l.value=c.value.length-1,v(),!0)),preventDefault:!0,stopPropagation:!0},ArrowDown:{run:x=>x.isComposing||x.keyCode===229?!1:f(()=>(l.value<c.value.length-1?l.value++:l.value=0,v(),!0)),preventDefault:!0,stopPropagation:!0},Home:{run:x=>x.isComposing||x.keyCode===229?!1:f(()=>(l.value=0,v(),!0))},End:{run:x=>x.isComposing||x.keyCode===229?!1:f(()=>(l.value=c.value.length-1,v(),!0)),preventDefault:!0,stopPropagation:!0}});return(x,M)=>(openBlock(),createBlock(unref(_sfc_main$1W),{open:unref(n),"onUpdate:open":M[2]||(M[2]=E=>isRef(n)?n.value=E:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1V),{class:"ref-suggestions-content py-2 pb-0 px-1 max-h-[300px] max-w-[300px] overflow-hidden","trap-focus":"",tabindex:"-1",onKeydown:unref(k)},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$u,[createVNode(unref(Search),{class:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),createVNode(unref(_sfc_main$1$),{onInput:_,onCompositionend:b,modelValue:unref(a),"onUpdate:modelValue":M[0]||(M[0]=E=>isRef(a)?a.value=E:null),class:"h-[32px] pl-8 rounded-sm focus-visible:outline-none focus-visible:ring-transparent"},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_2$f,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(c),(E,L)=>(openBlock(),createElementBlock("div",{key:E.value.id,class:normalizeClass(["relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 text-sm outline-none [&.focus]:bg-accent [&.focus]:text-accent-foreground",{focus:unref(l)===L}]),onMouseover:V=>!unref(d)&&(l.value=L),onClick:M[1]||(M[1]=V=>unref(s)?.(unref(c)[unref(l)]?.value?.id??null))},[createVNode(_sfc_main$1D,{block:E.value,readonly:!0,class:"*:cursor-default","highlight-terms":p.value},null,8,["block","highlight-terms"])],42,_hoisted_3$c))),128)),unref(c).length===0?(openBlock(),createElementBlock("div",_hoisted_4$9,[createBaseVNode("span",_hoisted_5$3,toDisplayString$1(x.$t("kbView.refSuggestions.noSuggestions")),1)])):createCommentVNode("",!0)])]),_:1},8,["onKeydown"])]),_:1},8,["open"]))}});const SettingsPanelContext=createContext(()=>{const o=SettingsContext.useContext(),e=ref(!1),n=Object.keys(o.settingGroups.value)[0],a=ref(n);return{open:e,activeGroupKey:a}}),getTrans=(o,e)=>o[e]||o.en_US||o.zh||Object.values(o)[0],_hoisted_1$t={class:"italic text-muted-foreground"};var _sfc_main$16=defineComponent({__name:"KeybindingInput",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(o){const e=useModel(o,"modelValue"),n=a=>{const s=[];(a.metaKey||a.ctrlKey)&&s.push("Mod"),a.altKey&&s.push("Alt"),a.shiftKey&&s.push("Shift"),s.push(a.key),e.value=s.join("-")};return(a,s)=>(openBlock(),createBlock(unref(_sfc_main$2r),{variant:"outline",size:"sm",class:"font-normal focus:bg-muted",onKeydown:withModifiers(n,["prevent"]),onClick:s[0]||(s[0]=withModifiers(()=>{},["prevent"]))},{default:withCtx(()=>[e.value?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(e.value)+" ",1),createVNode(unref(X),{class:"ml-2 size-4"})],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("span",_hoisted_1$t,toDisplayString$1(a.$t("kbView.keybindingInput.empty")),1),createVNode(unref(Plus),{class:"ml-2 size-4"})],64))]),_:1}))}}),_sfc_main$15=defineComponent({__name:"Tooltip",props:{defaultOpen:{type:Boolean},open:{type:Boolean},delayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const s=xe(o,e);return(l,c)=>(openBlock(),createBlock(unref(zg),normalizeProps(guardReactiveProps(unref(s))),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),_sfc_main$14=defineComponent({inheritAttrs:!1,__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const n=o,a=e,s=computed(()=>{const{class:c,...d}=n;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(jg),null,{default:withCtx(()=>[createVNode(unref(Hg),mergeProps({...unref(l),...c.$attrs},{class:unref(cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_sfc_main$13=defineComponent({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(Lg),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),_sfc_main$12=defineComponent({__name:"TooltipTrigger",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(Kg),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),_sfc_main$11=defineComponent({__name:"ResetButton",props:{item:{}},setup(o){return(e,n)=>(openBlock(),createBlock(unref(_sfc_main$15),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$12),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"ghost",size:"icon",onClick:n[0]||(n[0]=a=>e.item.value.value=e.item.defaultValue)},{default:withCtx(()=>[createVNode(unref(RefreshCcw),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$14),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(e.$t("kbView.settingsPanel.reset")),1)]),_:1})]),_:1}))}});const _hoisted_1$s={class:"flex items-center gap-2"},_hoisted_2$e={key:0,class:"text-red-500 text-sm mt-2"};var _sfc_main$10=defineComponent({__name:"TextInputComp",props:{item:{}},setup(o){const e=o,n=computed(()=>{const a=e.item.componentType.validator;if(a)return a(e.item.value.value)});return(a,s)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$s,[createVNode(unref(_sfc_main$1$),{modelValue:a.item.value.value,"onUpdate:modelValue":s[0]||(s[0]=l=>a.item.value.value=l)},null,8,["modelValue"]),createVNode(_sfc_main$11,{item:a.item},null,8,["item"])]),n.value?(openBlock(),createElementBlock("div",_hoisted_2$e,toDisplayString$1(n.value),1)):createCommentVNode("",!0)]))}});const _hoisted_1$r={class:"flex items-center gap-2"};var _sfc_main$$=defineComponent({__name:"IntegerInputComp",props:{item:{}},setup(o){return(e,n)=>(openBlock(),createElementBlock("div",_hoisted_1$r,[createVNode(unref(_sfc_main$1$),{modelValue:e.item.value.value,"onUpdate:modelValue":n[0]||(n[0]=a=>e.item.value.value=a),type:"number",min:e.item.componentType.min,max:e.item.componentType.max},null,8,["modelValue","min","max"]),createVNode(_sfc_main$11,{item:e.item},null,8,["item"])]))}});const _hoisted_1$q={class:"relative"},_hoisted_2$d={key:0,class:"text-red-500 text-sm mt-2"},_hoisted_3$b={class:"absolute right-0 top-0 m-2"};var _sfc_main$_=defineComponent({__name:"JsonComp",props:{item:{}},setup(o){const e=o,n=computed(()=>{const a=e.item.componentType.schema;if(a)return a.safeParse(e.item.value.value)});return(a,s)=>(openBlock(),createElementBlock("div",_hoisted_1$q,[createVNode(_sfc_main$1R,{class:"border rounded-md min-h-[100px] p-2 cursor-text",src:a.item.value.value,"onUpdate:src":s[0]||(s[0]=l=>a.item.value.value=l),lang:"json"},null,8,["src"]),n.value&&!n.value.success?(openBlock(),createElementBlock("div",_hoisted_2$d,toDisplayString$1(a.$t("kbView.settingsPanel.invalidJson")),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$b,[createVNode(_sfc_main$11,{item:a.item},null,8,["item"])])]))}});const _hoisted_1$p={class:"flex items-center gap-2"};var _sfc_main$Z=defineComponent({__name:"KeybindingComp",props:{item:{}},setup(o){return(e,n)=>(openBlock(),createElementBlock("div",_hoisted_1$p,[createVNode(_sfc_main$16,{class:"my-2",modelValue:e.item.value.value,"onUpdate:modelValue":n[0]||(n[0]=a=>e.item.value.value=a)},null,8,["modelValue"]),createVNode(_sfc_main$11,{item:e.item},null,8,["item"])]))}});const _hoisted_1$o={class:"flex items-center gap-2"};var _sfc_main$Y=defineComponent({__name:"SelectComp",props:{item:{}},setup(o){const{locale:e}=useI18n();return(n,a)=>(openBlock(),createElementBlock("div",_hoisted_1$o,[createVNode(unref(_sfc_main$1j),{modelValue:n.item.value.value,"onUpdate:modelValue":a[0]||(a[0]=s=>n.item.value.value=s)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1d),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1c))]),_:1}),createVNode(unref(_sfc_main$1i),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.item.componentType.options,s=>(openBlock(),createBlock(unref(_sfc_main$1g),{key:s.value,value:s.value},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(getTrans)(s.label,unref(e))),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),createVNode(_sfc_main$11,{item:n.item},null,8,["item"])]))}}),_sfc_main$X=defineComponent({__name:"Switch",props:{defaultChecked:{type:Boolean},checked:{type:Boolean},disabled:{type:Boolean},required:{type:Boolean},name:{},id:{},value:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:checked"],setup(o,{emit:e}){const n=o,a=e,s=computed(()=>{const{class:c,...d}=n;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(mg),mergeProps(unref(l),{class:unref(cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n.class)}),{default:withCtx(()=>[createVNode(unref(hg),{class:normalizeClass(unref(cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5"))},{default:withCtx(()=>[renderSlot(c.$slots,"thumb")]),_:3},8,["class"])]),_:3},16,["class"]))}});const _hoisted_1$n={class:"flex items-center gap-x-2 pt-2"};var _sfc_main$W=defineComponent({__name:"SwitchComp",props:{item:{}},setup(o){return(e,n)=>(openBlock(),createElementBlock("div",_hoisted_1$n,[createVNode(unref(_sfc_main$X),{checked:e.item.value.value,"onUpdate:checked":n[0]||(n[0]=a=>e.item.value.value=a)},null,8,["checked"]),createVNode(_sfc_main$11,{item:e.item},null,8,["item"])]))}});const checkFontAvailability=o=>{const e=document.createElement("span");e.innerHTML=Array(100).join("wi"),e.style.cssText=["position: absolute","width: auto","font-size: 128px","left: -9999px"].join(" !important;");const n=d=>(e.style.fontFamily=d,e.clientWidth);document.body.appendChild(e);const a=n("monospace"),s=n("sans-serif"),l=n("serif"),c=o.map(d=>a!==n(d+" ,monospace")||s!==n(d+" ,sans-serif")||l!==n(d+" ,serif"));return document.body.removeChild(e),c},_hoisted_1$m={class:"flex items-center gap-2"},_hoisted_2$c={class:"flex items-center"},_hoisted_3$a={key:0,class:"text-muted-foreground ml-2"};var _sfc_main$V=defineComponent({__name:"FontSelector",props:{item:{},fontList:{}},setup(o){const e=["Arial","Helvetica","Times New Roman","Courier New","Verdana","Tahoma","Trebuchet MS","Georgia","Impact","Palatino Linotype","Century Gothic","Gill Sans","Lucida Sans Unicode","Lucida Console","Comic Sans MS","Arial Black","Garamond","Franklin Gothic Medium","Book Antiqua","Calibri","Cambria","Candara","Consolas","Constantia","Corbel","Segoe UI","Segoe Print","Segoe Script","Optima","Rockwell","Baskerville","Didot","Futura","Geneva","Courier","Brush Script MT","Hobo Std","Papyrus","MS Serif","MS Sans Serif","Roboto","Open Sans","Lato","Montserrat","Source Sans Pro","Poppins","Raleway","Merriweather","Nunito","Playfair Display","Ubuntu","Noto Sans","Oswald","PT Sans","PT Serif","Work Sans","Cabin","Quicksand","Josefin Sans","Droid Sans","Inconsolata","Lobster","Pacifico","Indie Flower","Amatic SC","Anton","Abril Fatface","Bitter","Dancing Script","Exo 2","Fjalla One","Karla","Mulish","Righteous","Satisfy","Shadows Into Light","Signika","Slabo 27px","Zilla Slab","Overpass","Microsoft YaHei","SimSun","SimHei","FangSong","NSimSun","STXihei","STKaiti","STSong","STZhongsong","STHupo","STXinwei","STLiti","FangSong_GB2312","YouYuan","FZHei-B01S","FZShuSong-Z01","Source Han Sans","Source Han Serif","Monospace","Cursive"],n=checkFontAvailability(e);return(a,s)=>(openBlock(),createElementBlock("div",_hoisted_1$m,[createVNode(unref(_sfc_main$1j),{modelValue:a.item.value.value,"onUpdate:modelValue":s[0]||(s[0]=l=>a.item.value.value=l)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1d),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1c),{class:"text-muted-foreground",placeholder:a.$t("kbView.fontSelector.notSpecified")},null,8,["placeholder"])]),_:1}),createVNode(unref(_sfc_main$1i),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1h),null,{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(e,(l,c)=>createVNode(unref(_sfc_main$1g),{key:c,value:l,style:normalizeStyle({fontFamily:l})},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$c,[createBaseVNode("div",null,toDisplayString$1(l),1),unref(n)[c]?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_3$a,toDisplayString$1(a.$t("kbView.fontSelector.notAvailable")),1))])]),_:2},1032,["value","style"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"]),createVNode(_sfc_main$11,{item:a.item},null,8,["item"])]))}}),_sfc_main$U=defineComponent({__name:"AutoComplete",props:{onSelectItem:{type:Function}},setup(o){const n=ref({showSuggestions:!1,focusItemEl:void 0,itemEls:new Map,getContentEl:void 0,suppressMouseover:!1,emitInputValue:void 0,onSelectItem:o.onSelectItem});return provide("context",n),watch(()=>n.value.itemEls,()=>{const a=n.value.itemEls.keys().next().value;a&&(n.value.focusItemEl=a,a.scrollIntoView({block:"nearest"}))},{deep:!0}),(a,s)=>(openBlock(),createBlock(unref(_sfc_main$1W),{open:n.value.showSuggestions,"data-width":n.value.width},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["open","data-width"]))}}),_sfc_main$T=defineComponent({__name:"AutoCompleteTrigger",props:{asChild:{type:Boolean},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Ss),mergeProps(unref(a),{class:unref(cn)("",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$S=defineComponent({__name:"AutoCompleteInput",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(o,{emit:e}){const n=inject("context"),a=o,s=e,l=useVModel(a,"modelValue",s,{passive:!0,defaultValue:a.defaultValue});onMounted(()=>{n.value.emitInputValue=d=>{s("update:modelValue",d)}});const c=generateKeydownHandlerSimple({ArrowDown:{run:useThrottleFn(d=>{if(d.isComposing||d.keyCode===229)return!1;const f=n.value.getContentEl()?.querySelectorAll(".AutoCompleteSuggestionItem");if(!f)return!1;const p=[...f].findIndex(b=>b instanceof HTMLElement&&b.dataset.focus==="true");if(p===-1)return!1;const _=p===f.length-1?0:p+1;return n.value.focusItemEl=f[_],n.value.suppressMouseover=!0,f[_].scrollIntoView({block:"nearest"}),setTimeout(()=>{n.value.suppressMouseover=!1},100),!0},100)},ArrowUp:{run:useThrottleFn(d=>{if(d.isComposing||d.keyCode===229)return!1;const f=n.value.getContentEl()?.querySelectorAll(".AutoCompleteSuggestionItem");if(!f)return!1;const p=[...f].findIndex(b=>b instanceof HTMLElement&&b.dataset.focus==="true");if(p===-1)return!1;const _=p===0?f.length-1:p-1;return n.value.focusItemEl=f[_],n.value.suppressMouseover=!0,f[_].scrollIntoView({block:"nearest"}),setTimeout(()=>{n.value.suppressMouseover=!1},100),!0},100)},Enter:{run:d=>{if(d.isComposing||d.keyCode===229)return!1;const u=n.value.focusItemEl,f=n.value.itemEls;if(!u)return!1;const p=f.get(u);return n.value.onSelectItem?n.value.onSelectItem(p):s("update:modelValue",p),!0}}});return(d,u)=>(openBlock(),createBlock(unref(_sfc_main$1$),{modelValue:unref(l),"onUpdate:modelValue":u[0]||(u[0]=f=>isRef(l)?l.value=f:null),onFocus:u[1]||(u[1]=f=>unref(n).showSuggestions=!0),onBlur:u[2]||(u[2]=f=>unref(n).showSuggestions=!1),onKeydown:unref(c),class:normalizeClass(unref(cn)("",a.class))},null,8,["modelValue","onKeydown","class"]))}}),_sfc_main$R=defineComponent({__name:"AutoCompleteContent",props:{class:{}},setup(o){const e=ref(null),n=inject("context"),a=o,s=computed(()=>{const{class:c,...d}=a;return d}),l=At(s);return onMounted(()=>{n.value.getContentEl=()=>e.value}),(c,d)=>(openBlock(),createBlock(unref(_sfc_main$1V),mergeProps(unref(l),{class:unref(cn)("pl-2 pr-1 py-2",a.class),sticky:"always",style:{width:"var(--radix-popover-trigger-width)"}}),{default:withCtx(()=>[createBaseVNode("div",{ref_key:"elRef",ref:e,class:"overflow-y-auto max-h-[50vh] pr-1"},[renderSlot(c.$slots,"default")],512)]),_:3},16,["class"]))}});const _hoisted_1$l=["data-focus"];var _sfc_main$Q=defineComponent({__name:"AutoCompleteSuggestionItem",props:{value:{},class:{}},setup(o){const e=inject("context"),n=ref(null),a=o,s=computed(()=>{const{class:c,...d}=a;return d}),l=At(s);return onMounted(()=>{const c=n.value;c&&e.value.itemEls.set(c,a.value)}),onBeforeUnmount(()=>{const c=n.value;c&&e.value.itemEls.delete(c)}),(c,d)=>(openBlock(),createElementBlock("div",mergeProps(unref(l),{ref_key:"elRef",ref:n,onMouseover:d[0]||(d[0]=()=>!unref(e).suppressMouseover&&(unref(e).focusItemEl=n.value)),"data-focus":unref(e).focusItemEl===n.value,tabindex:"-1",class:unref(cn)("AutoCompleteSuggestionItem flex cursor-default outline-none text-sm transition-colors select-none items-center data-[focus=true]:bg-accent data-[focus=true]:text-accent-foreground rounded-sm px-2 py-1.5",a.class)}),[renderSlot(c.$slots,"default")],16,_hoisted_1$l))}}),_export_sfc=(o,e)=>{const n=o.__vccOpts||o;for(const[a,s]of e)n[a]=s;return n};const _sfc_main$P={},_hoisted_1$k={class:"flex items-center justify-center text-sm text-muted-foreground py-2"};function _sfc_render$6(o,e){return openBlock(),createElementBlock("div",_hoisted_1$k,[renderSlot(o.$slots,"default")])}var AutoCompleteNoResult=_export_sfc(_sfc_main$P,[["render",_sfc_render$6]]);const _hoisted_1$j={class:"flex items-center gap-2"},_hoisted_2$b={key:0,class:"text-red-500 text-sm mt-2"};var _sfc_main$O=defineComponent({__name:"BlockIdInputComp",props:{item:{}},setup(o){const e=o,{blocksManager:n}=BlocksContext.useContext(),{search:a}=IndexContext.useContext(),{t:s}=useI18n(),l=ref([]),c=computed(()=>{const b=e.item.value.value;return b.length==0?[]:hybridTokenize(b,!1,1)??[]}),d=ref(-1),u=ref([!0,!1,!1,!1,!1]),f=computed(()=>{const b=e.item.value.value;if(!(b.trim().length!==0&&n.getBlock(b.trim())))return s("kbView.settingsPanel.invalidBlockId")}),p=()=>{const b=e.item.value.value;if(b.trim().length===0){l.value=[];return}l.value=a(b).map(v=>n.getBlock(v)).filter(v=>v!==null).filter(v=>v.type=="normalBlock"&&u.value[v.content[0]]),d.value=l.value.length>0?0:-1},_=useDebounceFn(b=>{b.isComposing||p()},500);return(b,v)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$j,[createVNode(unref(_sfc_main$U),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$T),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$S),{modelValue:b.item.value.value,"onUpdate:modelValue":v[0]||(v[0]=k=>b.item.value.value=k),onInput:unref(_)},null,8,["modelValue","onInput"])]),_:1}),createVNode(unref(_sfc_main$R),null,{default:withCtx(()=>[l.value.length==0?(openBlock(),createBlock(unref(AutoCompleteNoResult),{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString$1(b.$t("kbView.settingsPanel.noResult")),1)]),_:1})):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(l.value,k=>(openBlock(),createBlock(unref(_sfc_main$Q),{value:k.id,key:k.id},{default:withCtx(()=>[(openBlock(),createBlock(_sfc_main$1D,{key:k.id,readonly:!0,block:k,"highlight-terms":c.value},null,8,["block","highlight-terms"]))]),_:2},1032,["value"]))),128))]),_:1})]),_:1}),createVNode(_sfc_main$11,{item:b.item},null,8,["item"])]),f.value?(openBlock(),createElementBlock("div",_hoisted_2$b,toDisplayString$1(f.value),1)):createCommentVNode("",!0)],64))}});const _hoisted_1$i={class:"left w-[200px] bg-sidebar-bg border-r p-2 pr-1 flex flex-col text-sidebar-fg"},_hoisted_2$a={class:"flex flex-col gap-1"},_hoisted_3$9={class:"right w-0 flex flex-col items-center flex-grow pr-1"},_hoisted_4$8={class:"flex flex-col gap-y-6 w-full overflow-y-auto overflow-x-hidden px-4 py-8"};var _sfc_main$N=defineComponent({__name:"SettingsPanel",setup(o){const{locale:e}=useI18n(),{open:n,activeGroupKey:a}=SettingsPanelContext.useContext(),{settingGroups:s,getAllSettingItemsInGroup:l}=SettingsContext.useContext();return(c,d)=>(openBlock(),createBlock(unref(_sfc_main$26),{open:unref(n),"onUpdate:open":d[0]||(d[0]=u=>isRef(n)?n.value=u:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$25),{class:"flex flex-row gap-0 max-w-[80vw] max-h-[80vh] w-[800px] h-[600px] p-0 !outline-none"},{default:withCtx(()=>[createVNode(unref(_sfc_main$22),{class:"hidden"},{default:withCtx(()=>[createVNode(unref(_sfc_main$21),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(c.$t("kbView.settingsPanel.title")),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$i,[d[1]||(d[1]=createBaseVNode("div",{class:"text-sm text-muted-foreground font-semibold px-4 py-2"},"Settings",-1)),createBaseVNode("div",_hoisted_2$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),u=>(openBlock(),createBlock(unref(_sfc_main$2r),{key:u.key,variant:"ghost","data-active":u.key===unref(a),class:"w-full h-7 justify-start font-normal text-sidebar-fg data-[active=true]:bg-accent",onClick:f=>a.value=u.key},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(getTrans)(u.label,unref(e))),1)]),_:2},1032,["data-active","onClick"]))),128))])]),createBaseVNode("div",_hoisted_3$9,[createBaseVNode("div",_hoisted_4$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(l)(unref(a)),u=>(openBlock(),createElementBlock("div",{class:"flex flex-col",key:u.id},[createVNode(unref(_sfc_main$1k),{class:"mb-2"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(getTrans)(u.label,unref(e))),1)]),_:2},1024),u.desc?(openBlock(),createBlock(unref(_sfc_main$1k),{key:0,class:"text-[.8em] text-muted-foreground mb-2 whitespace-pre-wrap"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(getTrans)(u.desc,unref(e))),1)]),_:2},1024)):createCommentVNode("",!0),u.componentType.type==="textInput"?(openBlock(),createBlock(_sfc_main$10,{key:1,item:u},null,8,["item"])):u.componentType.type==="integerInput"?(openBlock(),createBlock(_sfc_main$$,{key:2,item:u},null,8,["item"])):u.componentType.type==="json"?(openBlock(),createBlock(_sfc_main$_,{key:3,item:u},null,8,["item"])):u.componentType.type==="keybindingInput"?(openBlock(),createBlock(_sfc_main$Z,{key:4,item:u},null,8,["item"])):u.componentType.type==="select"?(openBlock(),createBlock(_sfc_main$Y,{key:5,item:u},null,8,["item"])):u.componentType.type==="switch"?(openBlock(),createBlock(_sfc_main$W,{key:6,item:u},null,8,["item"])):u.componentType.type==="fontSelector"?(openBlock(),createBlock(_sfc_main$V,{key:7,item:u},null,8,["item"])):u.componentType.type==="blockIdInput"?(openBlock(),createBlock(_sfc_main$O,{key:8,item:u},null,8,["item"])):createCommentVNode("",!0)]))),128))])])]),_:1})]),_:1},8,["open"]))}});const createCreateNewTreeDialogContext=createContext(()=>{const o=ref(!1),e=ref("waiting");return{open:o,status:e,openCreateNewTreeDialog:()=>{o.value=!0,e.value="waiting"},closeCreateNewTreeDialog:()=>{o.value=!1,e.value="waiting"}}});var _sfc_main$M=defineComponent({__name:"FloatingMathInput",setup(o){const e=ref(null),n=computed({get:()=>e.value!==null,set:v=>!v&&(e.value=null)}),a=ref(""),s=ref(null),{registerFloatingMathInput:l}=FloatingMathInputContext.useContext();let c=null,d=null,u=null,f=null,p=null,_=null;const b=()=>[EditorView.lineWrapping,keymap.of([{key:"Escape",run:()=>(n.value=!1,p?.(),!0),stopPropagation:!0},{key:"ArrowLeft",run:()=>{const v=s.value?.getEditorView();if(!v)return!1;const k=v.state.selection;return k.ranges.length===1&&k.ranges[0].empty&&k.ranges[0].anchor===0?(n.value=!1,u?.(),!0):!1}},{key:"ArrowRight",run:()=>{const v=s.value?.getEditorView();if(!v)return!1;const k=v.state.selection,x=v.state.doc.length;return k.ranges.length===1&&k.ranges[0].empty&&k.ranges[0].head===x?(n.value=!1,f?.(),!0):!1}},{key:"Backspace",run:()=>{const v=s.value?.getEditorView();return v&&v.state.doc.length===0?(n.value=!1,_?.(),!0):!1}},{key:"Delete",run:()=>{const v=s.value?.getEditorView();return v&&v.state.doc.length===0?(n.value=!1,_?.(),!0):!1}}])];return watch(e,async()=>{if(await nextTick(),!e.value)return;const v=document.querySelector("[data-radix-popper-content-wrapper]");if(!(v instanceof HTMLElement))return;const{x:k,y:x}=e.value,M=v.getBoundingClientRect(),E=c?.getBoundingClientRect()??{height:0},L=calcPopoverPos(M.width,M.height,k,x,{offset:B=>(B.leftUp.y-=E.height+10,B.rightUp.y-=E.height+10,B.leftDown.y+=10,B.rightDown.y+=10,B),avoidColideWith:c,minCollisionDist:10}),V=s.value?.getEditorView();V&&(V.focus(),V.dispatch({selection:{anchor:0,head:V.state.doc.length}}),document.body.style.setProperty("--popover-x",`${L.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${L.rightDown.y}px`))}),onMounted(()=>{l((v,k,x,M,E,L,V)=>{c=v,a.value=k,d=x,u=M,f=E,p=L,_=V;const B=c.getBoundingClientRect();e.value={x:B.left+B.width/2,y:B.bottom}})}),(v,k)=>(openBlock(),createBlock(unref(_sfc_main$1W),{open:n.value,"onUpdate:open":k[2]||(k[2]=x=>n.value=x)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1U)),createVNode(unref(_sfc_main$1V),{class:"ref-suggestions-content p-2 pb-1",onPointerDownOutside:k[1]||(k[1]=()=>unref(p)?.()),"trap-focus":"",tabindex:"-1"},{default:withCtx(()=>[createVNode(_sfc_main$1R,{src:a.value,"onUpdate:src":k[0]||(k[0]=x=>a.value=x),class:"flex-grow",ref_key:"codeMirror",ref:s,lang:"latex",extensionsBuilder:b,"on-src-changed":unref(d)??void 0},null,8,["src","on-src-changed"]),createVNode(_sfc_main$1k,{class:"text-muted-foreground text-[.8em] font-normal text-right mr-2"},{default:withCtx(()=>k[3]||(k[3]=[createTextVNode('Press "Esc" to close')])),_:1})]),_:1})]),_:1},8,["open"]))}}),_sfc_main$L=defineComponent({__name:"Checkbox",props:{defaultChecked:{type:Boolean},checked:{type:[Boolean,String]},disabled:{type:Boolean},required:{type:Boolean},name:{},value:{},id:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:checked"],setup(o,{emit:e}){const n=o,a=e,s=computed(()=>{const{class:c,...d}=n;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(zv),mergeProps(unref(l),{class:unref(cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n.class)}),{default:withCtx(()=>[createVNode(unref(Kv),{class:"flex h-full w-full items-center justify-center text-current"},{default:withCtx(()=>[renderSlot(c.$slots,"default",{},()=>[createVNode(unref(Check),{class:"h-4 w-4"})])]),_:3})]),_:3},16,["class"]))}});const _hoisted_1$h={class:"relative border-b"},_hoisted_2$9={class:"absolute left-3 top-1/2 -translate-y-1/2"},_hoisted_3$8={class:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-x-2"},_hoisted_4$7={class:"text-[.8em] text-muted-foreground mb-1"},_hoisted_5$2={class:"text-[.8em]"},_hoisted_6$1={key:0,class:"max-h-[60vh] overflow-y-auto pt-2 px-2 mr-1"},_hoisted_7$1=["onMouseover"],_hoisted_8$1={key:1,class:"text-center text-sm text-muted-foreground pt-4 pb-2"},_hoisted_9$1={key:1,class:"text-center text-sm text-muted-foreground pt-4 pb-2"},_hoisted_10$1={key:2,class:"text-center text-xs text-muted2-foreground py-2"},_hoisted_11$1={key:3,class:"text-center text-xs text-muted2-foreground py-2"};var _sfc_main$K=defineComponent({__name:"FusionCommand",setup(o){const e=BlockTreeContext.useContext(),{inputText:n,mode:a,blockSearchResult:s,focusIndex:l,contentEl:c,suppressMouseOver:d,open:u,allowedBlockTypes:f,queryTerms:p,updateBlockSearchResult:_}=FusionCommandContext.useContext(),b=useDebounceFn(L=>{L.isComposing||a.value==="searchBlock"&&_()},500),v=()=>{n.value="",s.value=[]},k=()=>{setTimeout(()=>{const L=c.value?.querySelector(".fusion-command-content .focus");L instanceof HTMLElement&&L.scrollIntoView({block:"nearest"})})},x=(L,V=500)=>(d.value=!0,setTimeout(()=>d.value=!1,V),L()),M=()=>{if(l.value===-1)return!1;const L=s.value[l.value];if(!L)return!1;const V=e.getBlockTree("main");if(!V)return!1;u.value=!1,V.focusBlock(L.id,{highlight:!0,expandIfFold:!0})},E=generateKeydownHandlerSimple({ArrowUp:{run:L=>L.isComposing||L.keyCode===229?!1:x(()=>(l.value>0?l.value--:l.value=s.value.length-1,k(),!0)),stopPropagation:!0,preventDefault:!0},ArrowDown:{run:L=>L.isComposing||L.keyCode===229?!1:x(()=>(l.value<s.value.length-1?l.value++:l.value=0,k(),!0)),stopPropagation:!0,preventDefault:!0},Home:{run:L=>L.isComposing||L.keyCode===229?!1:x(()=>(l.value=0,k(),!0)),stopPropagation:!0,preventDefault:!0},End:{run:L=>L.isComposing||L.keyCode===229?!1:x(()=>(l.value=s.value.length-1,k(),!0)),stopPropagation:!0,preventDefault:!0},Enter:{run:L=>L.isComposing||L.keyCode===229?!1:(M(),!0),stopPropagation:!0,preventDefault:!0},"Mod-Enter":{run:L=>!(L.isComposing||L.keyCode===229),stopPropagation:!0,preventDefault:!0},Escape:{run:L=>L.isComposing||L.keyCode===229?!1:(u.value=!1,!0),stopPropagation:!0,preventDefault:!0}});return(L,V)=>(openBlock(),createBlock(unref(_sfc_main$26),{class:"fusion-command",open:unref(u),"onUpdate:open":V[3]||(V[3]=B=>isRef(u)?u.value=B:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$25),{class:"fusion-command-content fixed left-1/2 top-1/2 z-50 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 bg-background border p-0 [&>button]:hidden overflow-hidden gap-y-0"},{default:withCtx(()=>[createVNode(unref(_sfc_main$22),{class:"hidden"},{default:withCtx(()=>[createVNode(unref(_sfc_main$21)),createVNode(unref(_sfc_main$24))]),_:1}),createBaseVNode("div",{ref_key:"contentEl",ref:c,onKeydown:V[2]||(V[2]=(...B)=>unref(E)&&unref(E)(...B))},[createBaseVNode("div",_hoisted_1$h,[createVNode(unref(_sfc_main$1$),{class:"border-none relative focus-visible:ring-0 focus-visible:ring-offset-0 outline-none pl-10 pr-20",modelValue:unref(n),"onUpdate:modelValue":V[0]||(V[0]=B=>isRef(n)?n.value=B:null),placeholder:L.$t("kbView.fusionCommand.searchPlaceholder"),onInputCapture:unref(b),onCompositionend:unref(b)},null,8,["modelValue","placeholder","onInputCapture","onCompositionend"]),createBaseVNode("div",_hoisted_2$9,[unref(a)==="searchBlock"?(openBlock(),createBlock(unref(Search),{key:0,class:"size-4"})):(openBlock(),createBlock(unref(Command),{key:1,class:"size-4"}))]),createBaseVNode("div",_hoisted_3$8,[unref(a)==="searchBlock"?(openBlock(),createBlock(unref(_sfc_main$1W),{key:0},{default:withCtx(()=>[createVNode(unref(_sfc_main$1U),null,{default:withCtx(()=>[createVNode(unref(SlidersHorizontal),{class:"size-4 text-muted-foreground hover:text-foreground transition cursor-pointer"})]),_:1}),createVNode(unref(_sfc_main$1V),{class:"w-40 p-2"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$7,toDisplayString$1(L.$t("kbView.fusionCommand.allowedBlockTypes")),1),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(f),(B,F)=>(openBlock(),createElementBlock("div",{key:F,class:"flex items-center gap-x-1"},[createVNode(_sfc_main$L,{checked:unref(f)[F],class:"size-3 mr-1","onUpdate:checked":j=>unref(f)[F]=j},null,8,["checked","onUpdate:checked"]),createBaseVNode("div",_hoisted_5$2,toDisplayString$1(unref(BLOCK_TYPE_ZH_NAMES)[F]),1)]))),128))]),_:1})]),_:1})):createCommentVNode("",!0),createVNode(unref(Delete),{class:"size-4 text-muted-foreground hover:text-foreground transition cursor-pointer",onClick:v})])]),unref(a)==="searchBlock"?(openBlock(),createElementBlock(Fragment,{key:0},[unref(s).length>0?(openBlock(),createElementBlock("div",_hoisted_6$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),(B,F)=>(openBlock(),createElementBlock("div",{tabindex:"0",class:normalizeClass([{focus:unref(l)===F},"cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors [&.focus]:bg-accent [&.focus]:text-accent-foreground [&_.text-content]:cursor-default *:pointer-events-none"]),onMouseover:j=>!unref(d)&&(l.value=F),onClick:V[1]||(V[1]=j=>M())},[(openBlock(),createBlock(_sfc_main$1D,{key:B.id,readonly:!0,block:B,"highlight-terms":unref(p)},null,8,["block","highlight-terms"]))],42,_hoisted_7$1))),256))])):(openBlock(),createElementBlock("div",_hoisted_8$1,toDisplayString$1(L.$t("kbView.fusionCommand.noResults")),1))],64)):(openBlock(),createElementBlock(Fragment,{key:1},[unref(s).length>0?(openBlock(),createBlock(_sfc_main$1F,{key:0,"max-height":"60vh"},{default:withCtx(()=>V[4]||(V[4]=[createBaseVNode("div",{class:"px-2 py-2"},null,-1)])),_:1})):(openBlock(),createElementBlock("div",_hoisted_9$1,toDisplayString$1(L.$t("kbView.fusionCommand.noCommandResults")),1))],64)),unref(a)==="searchBlock"?(openBlock(),createElementBlock("div",_hoisted_10$1,toDisplayString$1(L.$t("kbView.fusionCommand.searchHelp")),1)):(openBlock(),createElementBlock("div",_hoisted_11$1,toDisplayString$1(L.$t("kbView.fusionCommand.commandHelp")),1))],544)]),_:1})]),_:1},8,["open"]))}});const BlockContentSchema_v1=z$1.discriminatedUnion("type",[z$1.object({type:z$1.literal("text"),docContent:z$1.any()}),z$1.object({type:z$1.literal("image"),path:z$1.string(),uploadStatus:z$1.union([z$1.literal("notUploaded"),z$1.literal("uploading"),z$1.literal("uploaded")]),align:z$1.union([z$1.literal("left"),z$1.literal("center")]),caption:z$1.string().optional(),width:z$1.number().optional()}),z$1.object({type:z$1.literal("code"),code:z$1.string(),lang:z$1.string().optional()}),z$1.object({type:z$1.literal("mathDisplay"),src:z$1.string()})]),NormalBlockSchema_v1=z$1.object({id:z$1.string().uuid(),type:z$1.literal("normalBlock"),parent:z$1.union([z$1.string().uuid(),z$1.literal("null")]),childrenIds:z$1.array(z$1.string().uuid()),fold:z$1.boolean(),content:BlockContentSchema_v1,metadata:z$1.any()}),MirrorBlockSchema_v1=z$1.object({id:z$1.string().uuid(),type:z$1.literal("mirrorBlock"),parent:z$1.string().uuid(),childrenIds:z$1.array(z$1.string().uuid()),fold:z$1.boolean(),src:z$1.string().uuid()}),VirtualBlockSchema_v1=z$1.object({id:z$1.string().uuid(),type:z$1.literal("virtualBlock"),parent:z$1.string().uuid(),childrenIds:z$1.union([z$1.array(z$1.string().uuid()),z$1.literal("null")]),fold:z$1.boolean(),src:z$1.string().uuid()}),BlockSchema_v1=z$1.discriminatedUnion("type",[NormalBlockSchema_v1,MirrorBlockSchema_v1,VirtualBlockSchema_v1]),BackupSchema_v1=z$1.object({blocks:z$1.array(BlockSchema_v1)}),parseV1Backup=o=>{const e=BackupSchema_v1.safeParse(JSON.parse(o));if(!e.success)return console.warn("Invalid backup",e.error),null;const n=s=>({id:s.id,type:s.type,fold:s.fold,parentId:s.parent,childrenIds:s.childrenIds=="null"?[]:s.childrenIds,...s.type==="normalBlock"?{content:s.content.type==="text"?[BLOCK_CONTENT_TYPES.TEXT,s.content.docContent]:s.content.type==="code"?[BLOCK_CONTENT_TYPES.CODE,s.content.code,s.content.lang]:s.content.type=="image"?[BLOCK_CONTENT_TYPES.IMAGE,s.content.path,s.content.align,s.content.caption,s.content.width]:s.content.type=="mathDisplay"?[BLOCK_CONTENT_TYPES.MATH,s.content.src]:void 0,metadata:s.metadata}:{},...s.type==="mirrorBlock"?{src:s.src}:{},...s.type==="virtualBlock"?{src:s.src,childrenCreated:s.childrenIds!="null"}:{}});return e.data.blocks.map(n).filter(s=>!!s)},importBlocks=(o,e)=>{const n=[],a=new Set(o.map(d=>d.id)),s=[];for(const d of o)a.has(d.parentId)||(d.parentId="root",n.push(d)),s.push(d);console.log(n);const l=e.createBlockTransaction({type:"ui"});s.reverse();for(const d of s)l.addBlock(d);const c=e.getBlock("root");c&&(l.updateBlock({...c,childrenIds:[...c.childrenIds,n[0].id]}),l.commit())};var _sfc_main$J=defineComponent({__name:"Importer",props:{open:{type:Boolean},openModifiers:{}},emits:["update:open"],setup(o){const e=ref(null),n=useModel(o,"open"),a=ref("idle"),{blocksManager:s}=BlocksContext.useContext(),l=d=>{const u=d.target;u.files&&(e.value=u.files[0])},c=async()=>{if(a.value==="idle"){if(!e.value)throw new Error("IMPOSSIBLE");a.value="importing";try{const d=await e.value.text(),u=parseV1Backup(d);await importBlocks(u,s),a.value="success"}catch(d){console.error(d),a.value="error"}}else a.value==="error"?a.value="idle":a.value==="success"&&(n.value=!1)};return(d,u)=>(openBlock(),createBlock(unref(_sfc_main$26),{class:"importer",open:n.value,"onUpdate:open":u[1]||(u[1]=f=>n.value=f)},{default:withCtx(()=>[createVNode(unref(_sfc_main$25),{class:"max-w-[340px]"},{default:withCtx(()=>[createVNode(unref(_sfc_main$22),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$21),null,{default:withCtx(()=>u[2]||(u[2]=[createTextVNode("导入")])),_:1})]),_:1}),createVNode(unref(_sfc_main$1$),{type:"file",accept:"application/json",multiple:!1,onChange:l}),createVNode(unref(_sfc_main$23),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",onClick:u[0]||(u[0]=f=>n.value=!1)},{default:withCtx(()=>u[3]||(u[3]=[createTextVNode("取消")])),_:1}),createVNode(unref(_sfc_main$2r),{type:"submit",size:"sm",disabled:!e.value,onClick:c},{default:withCtx(()=>[a.value==="idle"?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(" 导入 ")],64)):a.value==="importing"?(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(unref(LoaderCircle),{class:"size-4 mr-2 animate-spin"}),u[4]||(u[4]=createTextVNode(" 正在导入... "))],64)):a.value==="success"?(openBlock(),createElementBlock(Fragment,{key:2},[createVNode(unref(Check),{class:"size-4 mr-2"}),u[5]||(u[5]=createTextVNode(" 导入成功 "))],64)):(openBlock(),createElementBlock(Fragment,{key:3},[createVNode(unref(X),{class:"size-4 mr-2"}),u[6]||(u[6]=createTextVNode(" 导入失败 "))],64))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}});const AttachmentsManagerContext=createContext(()=>{const{dbBasePath:o,attachmentsBasePath:e,attachmentsFolderName:n}=PathsContext.useContext(),a=ref(!1),s=ref({}),l=ref("idle"),c=ref("idle"),d=ref([]),u=ref(null),f=ref("alphabet"),p=computed(()=>{let v=s.value;for(const k of d.value)if(k in v&&v[k].isDirectory)v=v[k].subDirents;else return{};return v}),_=computed(()=>Object.values(p.value).sort((k,x)=>k.isDirectory&&!x.isDirectory?-1:!k.isDirectory&&x.isDirectory?1:f.value==="alphabet"?k.name.localeCompare(x.name):0));return{open:a,files:s,refetchFiles:async(v,k)=>{l.value="fetching";const x=await fsLs({basePath:v??"",includeHidden:!0,recursive:!0,maxDepth:k??1e3});x.success?(s.value=x.data,l.value="success"):l.value="failed"},attachmentsFolderName:n,fetchFilesStatus:l,uploadStatus:c,currentPathSegments:d,dbBasePath:o,attachmentsBasePath:e,currentFiles:p,activeDirent:u,sortBy:f,orderedFiles:_}});var _sfc_main$I=defineComponent({__name:"CalendarCell",props:{date:{},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Wu),mergeProps({class:unref(cn)("relative h-9 w-9 p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:rounded-md [&:has([data-selected])]:bg-accent [&:has([data-selected][data-outside-view])]:bg-accent/50",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$H=defineComponent({__name:"CalendarCellTrigger",props:{day:{},month:{},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Zu),mergeProps({class:unref(cn)(unref(buttonVariants)({variant:"ghost"}),"h-9 w-9 p-0 font-normal","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selected]:bg-primary data-[selected]:text-primary-foreground data-[selected]:opacity-100 data-[selected]:hover:bg-primary data-[selected]:hover:text-primary-foreground data-[selected]:focus:bg-primary data-[selected]:focus:text-primary-foreground","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through","data-[outside-view]:text-muted-foreground data-[outside-view]:opacity-50 [&[data-outside-view][data-selected]]:bg-accent/50 [&[data-outside-view][data-selected]]:text-muted-foreground [&[data-outside-view][data-selected]]:opacity-30",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$G=defineComponent({__name:"CalendarGrid",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Hu),mergeProps({class:unref(cn)("w-full border-collapse space-y-1",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$F=defineComponent({__name:"CalendarGridBody",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(Yu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),_sfc_main$E=defineComponent({__name:"CalendarGridHead",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(qu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),_sfc_main$D=defineComponent({__name:"CalendarGridRow",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Xu),mergeProps({class:unref(cn)("flex",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$C=defineComponent({__name:"CalendarHeadCell",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(ju),mergeProps({class:unref(cn)("w-9 rounded-md text-[0.8rem] font-normal text-muted-foreground",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$B=defineComponent({__name:"CalendarHeader",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(zu),mergeProps({class:unref(cn)("relative flex w-full items-center justify-between pt-1",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$A=defineComponent({__name:"CalendarHeading",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Ku),mergeProps({class:unref(cn)("text-sm font-medium",e.class)},unref(a)),{default:withCtx(c=>[renderSlot(s.$slots,"default",{headingValue:c.headingValue},()=>[createTextVNode(toDisplayString$1(c.headingValue),1)])]),_:3},16,["class"]))}}),_sfc_main$z=defineComponent({__name:"CalendarNextButton",props:{step:{},nextPage:{type:Function},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Uu),mergeProps({class:unref(cn)(unref(buttonVariants)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createVNode(unref(ChevronRight),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),_sfc_main$y=defineComponent({__name:"CalendarPrevButton",props:{step:{},prevPage:{type:Function},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:s,...l}=e;return l}),a=At(n);return(s,l)=>(openBlock(),createBlock(unref(Gu),mergeProps({class:unref(cn)(unref(buttonVariants)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createVNode(unref(ChevronLeft),{class:"h-4 w-4"})])]),_:3},16,["class"]))}});const DAILY_NOTE_TAG="day",DailyNoteContext=createContext(()=>{const{registerSettingGroup:o,registerSettingItem:e}=SettingsContext.useContext(),{getBacklinks:n}=IndexContext.useContext(),{blocksManager:a,blockEditor:s,synced:l}=BlocksContext.useContext(),{toast:c}=useToast(),{t:d}=useI18n(),u=useTaskQueue(),{getBlockTree:f}=BlockTreeContext.useContext(),{kbPrefix:p}=ServerInfoContext.useContext();watch(l,(I,U)=>{if(!U&&I){const W=getPmSchema({getBlockRef:a.getBlockRef});if(a.getBlock("day"))return;const G=a.createBlockTransaction({type:"ui"});G.addBlock({id:"day",type:"normalBlock",fold:!1,parentId:INTERNAL_BLOCK_PARENT_ID,childrenIds:[],content:plainTextToTextContent("Day",W),metadata:{}}),G.commit()}},{immediate:!0}),o({key:"dailynote",label:{zh:"每日笔记"}});const _="dailynote.defaultDateFormat",b=computed(()=>`${p.value}${_}`),v="YYYY-MM-DD",k=useLocalStorage2(b,v);e({id:_,groupKey:"dailynote",defaultValue:v,label:{zh:"默认日期格式"},desc:{zh:"创建新的每日笔记时，默认使用的日期格式"},value:useWritableComputedRef(k),componentType:{type:"textInput"}});const x="dailynote.parentBlockOfNewDailyNote",M=computed(()=>`${p.value}${x}`),E="",L=useLocalStorage2(M,E);e({id:x,groupKey:"dailynote",defaultValue:E,label:{zh:"每日笔记的存放位置"},desc:{zh:"创建的新每日笔记将会放到这个块下（作为子块）"},value:useWritableComputedRef(L),componentType:{type:"blockIdInput"}});const V=()=>[...n(DAILY_NOTE_TAG,"tag")],B=()=>{const I=V(),U={};for(const W of I){const K=a.getBlock(W);if(!K)continue;const G=dayjs(K.ctext).format("YYYY-MM-DD");U[G]=W}return U};return{defaultDateFormat:k,parentBlockOfNewDailyNote:L,getAllDailyNotes:V,getDateToDailyNote:B,createDailyNote:I=>{const U=f("main");if(!U)return;const W=B(),K=dayjs(I).format("YYYY-MM-DD"),G=getPmSchema({getBlockRef:a.getBlockRef});if(!W[K]){if(!L.value){c({title:d("kbView.dailynoteNavigator.dontKnowWhereToCreate.title"),description:d("kbView.dailynoteNavigator.dontKnowWhereToCreate.desc")});return}u.addTask(async()=>{const{newNormalBlockId:Z}=s.insertNormalBlock({pos:{parentId:L.value,childIndex:"first"},content:contentNodesToPmNode([G.text(K+" "),G.nodes.blockRef_v2.create({toBlockId:"day",tag:!0})])})??{};Z&&(await U.nextUpdate(),U.focusBlock(Z,{highlight:!0,expandIfFold:!0}))})}}}}),_hoisted_1$g={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"};var _sfc_main$x=defineComponent({__name:"DailynoteNavigator",setup(o){const{getDateToDailyNote:e,createDailyNote:n}=DailyNoteContext.useContext(),{getBlockTree:a}=BlockTreeContext.useContext(),s=ref(!1),l=computed(()=>e()),c=u=>{const f=dayjs(u).format("YYYY-MM-DD");return l.value[f]!==void 0},d=u=>{const f=dayjs(u).format("YYYY-MM-DD"),p=l.value[f],_=a("main");_&&(p?_.focusBlock(p):n(u))};return(u,f)=>(openBlock(),createBlock(unref(_sfc_main$1W),{open:s.value,"onUpdate:open":f[0]||(f[0]=p=>s.value=p)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1U),null,{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3}),createVNode(unref(_sfc_main$1V),{class:"p-0"},{default:withCtx(()=>[createVNode(unref(Lu),{class:"p-3"},{default:withCtx(({grid:p,weekDays:_})=>[createVNode(unref(_sfc_main$B),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$y)),createVNode(unref(_sfc_main$A)),createVNode(unref(_sfc_main$z))]),_:1}),createBaseVNode("div",_hoisted_1$g,[(openBlock(!0),createElementBlock(Fragment,null,renderList(p,b=>(openBlock(),createBlock(unref(_sfc_main$G),{key:b.value.toString()},{default:withCtx(()=>[createVNode(unref(_sfc_main$E),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$D),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(_,v=>(openBlock(),createBlock(unref(_sfc_main$C),{key:v},{default:withCtx(()=>[createTextVNode(toDisplayString$1(v),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),createVNode(unref(_sfc_main$F),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(b.rows,(v,k)=>(openBlock(),createBlock(unref(_sfc_main$D),{key:`weekDate-${k}`,class:"mt-2 w-full"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(v,x=>(openBlock(),createBlock(unref(_sfc_main$I),{key:x.toString(),date:x},{default:withCtx(()=>[createVNode(unref(_sfc_main$15),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$12),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$H),{day:x,month:b.value,"data-disabled":c(x)?void 0:!0,onClickCapture:withModifiers(M=>d(x.toDate()),["prevent","stop"])},null,8,["day","month","data-disabled","onClickCapture"])]),_:2},1024),createVNode(unref(_sfc_main$14),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(c(x)?u.$t("kbView.dailynoteNavigator.gotoDailyNote"):u.$t("kbView.dailynoteNavigator.noDailyNote")),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1})]),_:3},8,["open"]))}});const _hoisted_1$f={key:1,class:"flex items-center"};var _sfc_main$w=defineComponent({__name:"HeaderBarItem",props:{item:{},iconOnly:{type:Boolean},iconClass:{},labelClass:{}},setup(o){return(e,n)=>"itemComp"in e.item?(openBlock(),createBlock(resolveDynamicComponent(e.item.itemComp),{key:0})):(openBlock(),createElementBlock("div",_hoisted_1$f,[(openBlock(),createBlock(resolveDynamicComponent(e.item.icon),{class:normalizeClass(["size-5 stroke-[1.8]",e.iconClass+` ${e.iconOnly?"":"mr-3"}`])},null,8,["class"])),e.iconOnly?createCommentVNode("",!0):(openBlock(),createBlock(resolveDynamicComponent(e.item.label),{key:0,class:normalizeClass(e.labelClass)},null,8,["class"]))]))}}),_sfc_main$v=defineComponent({__name:"ContextMenu",props:{dir:{},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const s=xe(o,e);return(l,c)=>(openBlock(),createBlock(unref(om),normalizeProps(guardReactiveProps(unref(s))),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),_sfc_main$u=defineComponent({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},sticky:{},hideWhenDetached:{type:Boolean},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=computed(()=>{const{class:c,...d}=n;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(sm),null,{default:withCtx(()=>[createVNode(unref(rm),mergeProps(unref(l),{class:unref(cn)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_sfc_main$t=defineComponent({__name:"ContextMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const n=At(o);return(a,s)=>(openBlock(),createBlock(unref(lm),normalizeProps(guardReactiveProps(unref(n))),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),_sfc_main$s=defineComponent({__name:"LeftButtons",setup(o){const{currentIndex:e,historyItems:n,goPrev:a,goNext:s}=HistoryContext.useContext(),l=computed(()=>e.value<=0),c=computed(()=>e.value>=n.value.length);return(d,u)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(unref(_sfc_main$v),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$13),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$15),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$t),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$12),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"ghost",size:"icon",disabled:l.value,onClick:unref(a)},{default:withCtx(()=>[createVNode(unref(ArrowLeft),{class:"size-5"})]),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),createVNode(unref(_sfc_main$14),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(d.$t("kbView.history.goToPrev")),1)]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$u))]),_:1}),createVNode(unref(_sfc_main$v),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$13),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$15),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$t),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$12),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"ghost",size:"icon",disabled:c.value,onClick:unref(s)},{default:withCtx(()=>[createVNode(unref(ArrowRight),{class:"size-5"})]),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),createVNode(unref(_sfc_main$14),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(d.$t("kbView.history.goToNext")),1)]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$u))]),_:1})],64))}});const _hoisted_1$e={class:"left-part"},_hoisted_2$8={class:"left-buttons"},_hoisted_3$7={class:"right-part flex flex-row items-center"},_hoisted_4$6={class:"right-buttons"};var _sfc_main$r=defineComponent({__name:"HeaderBar",setup(o){const{sidePaneOpen:e,sidePaneDir:n,sidePaneWidth:a,enableSidePaneAnimation:s}=SidebarContext.useContext(),{open:l}=SettingsPanelContext.useContext(),{open:c}=AttachmentsManagerContext.useContext(),{theme:d,toggleTheme:u}=ThemeContext.useContext(),{focusModeEnabled:f}=FocusModeContext.useContext(),{timeMachineOpen:p}=TimeMachineContext.useContext(),{openFusionCommand:_}=FusionCommandContext.useContext(),{synced:b}=BlocksContext.useContext(),{mainRootBlockId:v}=MainTreeContext.useContext(),{logout:k}=ServerInfoContext.useContext(),x=ref(!1),{t:M}=useI18n(),{goPrev:E,goNext:L,canGoPrev:V,canGoNext:B}=HistoryContext.useContext(),{openKeybindings:F}=KeymapContext.useContext(),j=Z=>{v.value=Z},I=computed(()=>e.value&&n.value==="right"?`${a.value}px`:"0px"),U=computed(()=>s.value?"padding 500ms var(--tf), opacity 500ms var(--tf)":"opacity 500ms var(--tf)"),W=Z=>{Z.target?.blur()};computed(()=>!V.value),computed(()=>!B.value);const K=[{icon:()=>createVNode(_sfc_main$x,null,{default:()=>[createVNode(CalendarDays,{class:"size-5 stroke-[1.8]"},null)]}),label:()=>M("kbView.headerBar.dailynoteNavigator"),onClick:()=>{}},{icon:()=>createVNode(Search,{class:"size-5 stroke-[1.8]"},null),label:()=>createVNode(Fragment,null,[M("kbView.headerBar.search")]),onClick:()=>_("")},{icon:()=>createVNode("div",null,[d.value==="dark"?createVNode(Moon,{class:"size-5 stroke-[1.8]"},null):createVNode(Sun,{class:"size-5 stroke-[1.8]"},null)]),label:()=>d.value==="dark"?M("kbView.headerBar.switchLightTheme"):M("kbView.headerBar.switchDarkTheme"),onClick:u},{icon:()=>createVNode(Bell,{class:"size-5 stroke-[1.8]"},null),label:()=>M("kbView.headerBar.notifications"),onClick:()=>{}},{icon:PanelRight,label:()=>e.value?M("kbView.headerBar.closeSidepane"):M("kbView.headerBar.openSidepane"),onClick:()=>e.value=!e.value,active:e}],G=[{icon:Download,label:()=>M("kbView.headerBar.export"),onClick:()=>{}},{icon:FolderInput,label:()=>M("kbView.headerBar.import"),onClick:()=>{console.log("open importer"),x.value=!0}},{icon:Focus,label:()=>f.value?M("kbView.headerBar.exitFocusMode"):M("kbView.headerBar.enterFocusMode"),onClick:()=>f.value=!f.value},{icon:FolderClosed,label:()=>M("kbView.headerBar.attachmentsManager"),onClick:()=>c.value=!0},{icon:History,label:()=>M("kbView.headerBar.timeMachine"),onClick:()=>p.value=!0},{icon:Settings$1,label:()=>M("kbView.headerBar.settings"),onClick:()=>l.value=!0},{icon:Keyboard,label:()=>M("kbView.headerBar.keybindings"),onClick:()=>F.value=!0},{icon:CircleHelp,label:()=>M("kbView.headerBar.help"),onClick:()=>{}},{icon:LogOut,label:()=>M("kbView.headerBar.exit"),onClick:k}];return(Z,oe)=>(openBlock(),createElementBlock("div",{class:"header-bar fixed top-0 left-0 flex flex-row justify-between items-center w-[calc(100vw-16px)] px-[8px] py-[10px] z-10 bg-background",style:normalizeStyle({paddingRight:I.value,transition:U.value})},[createBaseVNode("div",_hoisted_1$e,[createBaseVNode("div",_hoisted_2$8,[createVNode(_sfc_main$s)])]),createVNode(_sfc_main$1w,{"block-id":unref(v),onClickPathSegment:j},null,8,["block-id"]),createBaseVNode("div",_hoisted_3$7,[createVNode(unref(_sfc_main$15),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$12),null,{default:withCtx(()=>[createVNode(unref(Dot),{class:normalizeClass(["size-8",unref(b)?"stroke-green-500":"stroke-red-500"])},null,8,["class"])]),_:1}),createVNode(unref(_sfc_main$14),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(M)(`kbView.syncStatus.${unref(b)?"synced":"disconnected"}`)),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_4$6,[(openBlock(),createElementBlock(Fragment,null,renderList(K,(Y,se)=>createVNode(unref(_sfc_main$15),{key:se},{default:withCtx(()=>[createVNode(unref(_sfc_main$12),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"ghost",size:"icon",class:normalizeClass(Y.active?.value?"bg-muted":"w-fit min-w-8"),onFocus:W,onClick:Y.onClick},{default:withCtx(()=>[createVNode(_sfc_main$w,{item:Y,iconOnly:""},null,8,["item"])]),_:2},1032,["class","onClick"])]),_:2},1024),createVNode(unref(_sfc_main$14),null,{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Y.label)))]),_:2},1024)]),_:2},1024)),64))]),createVNode(unref(_sfc_main$1P),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1I),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$15),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$12),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"ghost",size:"icon",onFocus:W},{default:withCtx(()=>[createVNode(unref(EllipsisVertical),{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$14),null,{default:withCtx(()=>oe[1]||(oe[1]=[createTextVNode(" 更多选项 ")])),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1O),{class:"mr-2"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(G,(Y,se)=>createVNode(unref(_sfc_main$1M),{key:se,onClick:Y.onClick},{default:withCtx(()=>[createVNode(_sfc_main$w,{item:Y,iconClass:"!size-4"},null,8,["item"])]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),(openBlock(),createBlock(Teleport,{to:"body"},[createVNode(_sfc_main$J,{open:x.value,"onUpdate:open":oe[0]||(oe[0]=Y=>x.value=Y)},null,8,["open"])]))],4))}});const _hoisted_1$d={class:"right-pane z-20 overflow-hidden flex flex-col"},_hoisted_2$7={class:"flex items-center justify-center gap-x-2 mt-2 mb-2"},_hoisted_3$6={class:"h-0 flex-grow overflow-y-hidden overflow-x-hidden"},_hoisted_4$5={class:"absolute z-10 top-2.5 right-2"};var _sfc_main$q=defineComponent({__name:"SidePane",setup(o){const{sidePaneDir:e,sidePaneOpen:n,sidePaneWidth:a,sidePaneHeight:s,enableSidePaneAnimation:l,sidePaneBlocks:c,sidePaneCurrentBlockId:d,hasPrev:u,hasNext:f,goPrev:p,goNext:_,dir:b}=SidebarContext.useContext(),v=[{icon:()=>createVNode("div",null,[e.value==="right"?createVNode(ArrowDownFromLine,{class:"size-4 stroke-[1.8]"},null):createVNode(ArrowRightFromLine,{class:"size-4 stroke-[1.8]"},null)]),label:()=>e.value==="right"?"侧栏移动到底部":"侧栏移动到右侧",onClick:()=>e.value=e.value==="right"?"bottom":"right"},{icon:X,label:()=>"关闭侧栏",onClick:()=>n.value=!1}],k=V=>{e.value==="right"?a.value=window.innerWidth-V.x:s.value=window.innerHeight-V.y},x=()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",x),document.removeEventListener("mouseleave",x),l.value=!0},M=V=>{V.preventDefault(),V.stopPropagation(),l.value=!1,document.addEventListener("mousemove",k),document.addEventListener("mouseup",x),document.addEventListener("mouseleave",x)},E=(V,B)=>{const F=V.animate([{opacity:1,transform:"translateX(0)"},{opacity:0,transform:b.value==="right"?"translateX(-100%)":"translateX(100%)"}],{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});F.onfinish=B},L=(V,B)=>{if(!(V instanceof HTMLElement))return;const F=V.animate([{opacity:0,transform:b.value==="right"?"translateX(100%)":"translateX(-100%)"},{opacity:1,transform:"translateX(0)"}],{duration:300,delay:100,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});F.onfinish=()=>{B()}};return(V,B)=>(openBlock(),createElementBlock("div",_hoisted_1$d,[createBaseVNode("div",_hoisted_2$7,[createVNode(unref(_sfc_main$2r),{disabled:!unref(u),variant:"outline",size:"icon",onClick:unref(p)},{default:withCtx(()=>[createVNode(unref(ChevronLeft),{class:"size-4 stroke-muted-foreground"})]),_:1},8,["disabled","onClick"]),createVNode(unref(_sfc_main$1P),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1I),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",class:"h-8 min-w-[200px]"},{default:withCtx(()=>[createVNode(_sfc_main$1w,{class:"pointer-events-none","include-self":!0,"block-id":unref(d)},null,8,["block-id"])]),_:1})]),_:1}),createVNode(unref(_sfc_main$1O),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1N),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(c),F=>(openBlock(),createBlock(unref(_sfc_main$1M),{key:F.id,onClick:()=>d.value=F.id},{default:withCtx(()=>[createVNode(_sfc_main$1w,{class:"pointer-events-none","include-self":!0,"block-id":F.id},null,8,["block-id"])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$2r),{disabled:!unref(f),variant:"outline",size:"icon",onClick:unref(_)},{default:withCtx(()=>[createVNode(unref(ChevronRight),{class:"size-4 stroke-muted-foreground"})]),_:1},8,["disabled","onClick"])]),createBaseVNode("div",_hoisted_3$6,[createVNode(Transition,{onLeave:E,onEnter:L,css:!1},{default:withCtx(()=>[unref(d)?(openBlock(),createBlock(_sfc_main$1l,{class:"h-full mr-1",key:unref(d),id:`side-pane-${unref(d)}`,"root-block-id":unref(d),"root-block-level":0,paddingBottom:20},null,8,["id","root-block-id"])):createCommentVNode("",!0)]),_:1})]),createBaseVNode("div",_hoisted_4$5,[(openBlock(),createElementBlock(Fragment,null,renderList(v,(F,j)=>createVNode(unref(_sfc_main$15),{key:j},{default:withCtx(()=>[createVNode(unref(_sfc_main$12),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"ghost",class:"size-7 p-0",onClick:F.onClick},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(F.icon),{class:"size-4 stroke-[1.8]"}))]),_:2},1032,["onClick"])]),_:2},1024),createVNode(unref(_sfc_main$14),null,{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(F.label)))]),_:2},1024)]),_:2},1024)),64))]),unref(e)==="bottom"?(openBlock(),createElementBlock("div",{key:0,class:"absolute top-0 z-10 left-0 w-full h-1 cursor-row-resize",onMousedown:M},null,32)):createCommentVNode("",!0),unref(e)==="right"?(openBlock(),createElementBlock("div",{key:1,class:"absolute top-0 z-10 left-0 w-1 h-full cursor-col-resize",onMousedown:M},null,32)):createCommentVNode("",!0)]))}}),_sfc_main$p=defineComponent({__name:"Collapsible",props:{defaultOpen:{type:Boolean},open:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:open"],setup(o,{emit:e}){const s=xe(o,e);return(l,c)=>(openBlock(),createBlock(unref(ji),normalizeProps(guardReactiveProps(unref(s))),{default:withCtx(({open:d})=>[renderSlot(l.$slots,"default",{open:d})]),_:3},16))}}),_sfc_main$o=defineComponent({__name:"CollapsibleContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(qi),mergeProps(e,{class:"overflow-hidden transition-all data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down"}),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),_sfc_main$n=defineComponent({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(Ui),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}});const _hoisted_1$c=["data-active"],_hoisted_2$6={class:"whitespace-nowrap overflow-hidden text-ellipsis"};var _sfc_main$m=defineComponent({__name:"FileTreeItem",props:{dirent:{},path:{}},setup(o){const e=ref(!1),{activeDirent:n}=AttachmentsManagerContext.useContext(),a=(s,l)=>{n.value={path:l,isDirectory:s.isDirectory,isPreview:!1}};return(s,l)=>{const c=resolveComponent("FileTreeItem",!0);return openBlock(),createBlock(unref(_sfc_main$p),{open:e.value,"onUpdate:open":l[1]||(l[1]=d=>e.value=d)},{default:withCtx(()=>[createVNode(unref(_sfc_main$n),{"as-child":""},{default:withCtx(()=>[createBaseVNode("div",{"data-active":s.path===unref(n)?.path,onClick:l[0]||(l[0]=d=>a(s.dirent,s.path)),class:"flex items-center px-2 py-1 my-0.5 cursor-default select-none hover:bg-muted rounded-sm text-sm data-[active=true]:bg-muted"},[s.dirent.isDirectory?(openBlock(),createBlock(unref(ChevronDown),{key:0,class:normalizeClass(["size-4 mr-2 flex-shrink-0 transition-transform duration-50",{"-rotate-90":!e.value}])},null,8,["class"])):(openBlock(),createBlock(unref(File),{key:1,class:"size-4 mr-2 flex-shrink-0"})),createBaseVNode("span",_hoisted_2$6,toDisplayString$1(s.dirent.name),1)],8,_hoisted_1$c)]),_:1}),s.dirent.isDirectory?(openBlock(),createBlock(unref(_sfc_main$o),{key:0,class:"ml-6"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.dirent.subDirents,d=>(openBlock(),createBlock(c,{key:d.name,dirent:d,path:unref(joinPathSegments)([s.path,d.name])},null,8,["dirent","path"]))),128))]),_:1})):createCommentVNode("",!0)]),_:1},8,["open"])}}});const _hoisted_1$b={class:"flex-1 overflow-auto pr-1 mb-2"},_hoisted_2$5={key:0,class:"text-center text-sm text-muted-foreground py-8"},_hoisted_3$5={class:"mr-1 flex gap-x-1"};var _sfc_main$l=defineComponent({__name:"FileTree",setup(o){const{attachmentsFolderName:e,attachmentsBasePath:n,currentPathSegments:a,orderedFiles:s,refetchFiles:l}=AttachmentsManagerContext.useContext(),c=ref("idle");async function d(){c.value="loading",await Promise.all([l(),timeout(1e3)]),c.value="updated",await timeout(1e3),c.value="idle"}return(u,f)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["w-[250px] bg-sidebar-bg border-r p-2 pr-1 flex flex-col justify-between text-sidebar-fg",{"opacity-50":c.value==="loading"}])},[createVNode(unref(_sfc_main$1B),{class:"bg-sidebar-accent w-fit px-2 py-1.5 mr-1 mb-2 rounded overflow-hidden"},{default:withCtx(()=>[createVNode(unref(_sfc_main$1y),{class:"flex-nowrap w-fit gap-1 sm:gap-1 overflow-hidden"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList([unref(e),...unref(a)],(p,_)=>(openBlock(),createElementBlock(Fragment,{key:p},[createVNode(unref(_sfc_main$1A),{class:"cursor-pointer select-none hover:text-sidebar-fg transition-colors duration-50"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(p),1)]),_:2},1024),_!==unref(a).length?(openBlock(),createBlock(unref(_sfc_main$1x),{key:0,class:"size-3"})):createCommentVNode("",!0)],64))),128))]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$b,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),p=>(openBlock(),createBlock(_sfc_main$m,{key:p.name,dirent:p,path:unref(joinPathSegments)([unref(n),...unref(a),p.name])},null,8,["dirent","path"]))),128)),Object.keys(unref(s)).length===0?(openBlock(),createElementBlock("div",_hoisted_2$5,toDisplayString$1(u.$t("kbView.attachmentsManager.noFiles")),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_3$5,[createVNode(unref(_sfc_main$2r),{variant:"outline",class:"size-9 flex-shrink-0 p-0",disabled:c.value==="loading",onClick:d},{default:withCtx(()=>[createVNode(unref(RefreshCw),{class:normalizeClass(["size-4",{"animate-spin":c.value==="loading"}])},null,8,["class"])]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",class:"w-full"},{default:withCtx(()=>[createVNode(unref(Upload),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(u.$t("kbView.attachmentsManager.upload")),1)]),_:1})])],2))}});const _sfc_main$k={},_hoisted_1$a={t:"1730332855813",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2264",width:"200",height:"200"};function _sfc_render$5(o,e){return openBlock(),createElementBlock("svg",_hoisted_1$a,e[0]||(e[0]=[createBaseVNode("path",{d:"M912 217.142857q16 16 27.428571 43.428571t11.428571 50.285714l0 658.285714q0 22.857143-16 38.857143t-38.857143 16l-768 0q-22.857143 0-38.857143-16t-16-38.857143l0-914.285714q0-22.857143 16-38.857143t38.857143-16l512 0q22.857143 0 50.285714 11.428571t43.428571 27.428571zm-253.714286-139.428571l0 214.857143 214.857143 0q-5.714286-16.571429-12.571429-23.428571l-178.857143-178.857143q-6.857143-6.857143-23.428571-12.571429zm219.428571 873.142857l0-585.142857-237.714286 0q-22.857143 0-38.857143-16t-16-38.857143l0-237.714286-438.857143 0 0 877.714286 731.428571 0zm-450.285714-465.142857q11.428571 4.571429 11.428571 17.142857l0 310.857143q0 12.571429-11.428571 17.142857-4.571429 1.142857-6.857143 1.142857-6.857143 0-13.142857-5.142857l-94.857143-95.428571-74.857143 0q-8 0-13.142857-5.142857t-5.142857-13.142857l0-109.714286q0-8 5.142857-13.142857t13.142857-5.142857l74.857143 0 94.857143-95.428571q9.142857-8.571429 20-4zm238.285714 393.714286q17.714286 0 28.571429-13.714286 73.714286-90.857143 73.714286-207.428571t-73.714286-207.428571q-9.142857-12-24.571429-13.714286t-26.857143 8q-12 9.714286-13.428571 24.857143t8.285714 27.142857q57.142857 70.285714 57.142857 161.142857t-57.142857 161.142857q-9.714286 12-8.285714 27.142857t13.428571 24.285714q10.285714 8.571429 22.857143 8.571429zm-120.571429-84.571429q15.428571 0 26.857143-11.428571 49.714286-53.142857 49.714286-125.142857t-49.714286-125.142857q-10.285714-10.857143-25.714286-11.428571t-26.285714 9.714286-11.428571 25.428571 10.285714 26.571429q29.714286 32.571429 29.714286 74.857143t-29.714286 74.857143q-10.857143 11.428571-10.285714 26.571429t11.428571 25.428571q11.428571 9.714286 25.142857 9.714286z",fill:"currentColor","p-id":"2265"},null,-1)]))}var Audio=_export_sfc(_sfc_main$k,[["render",_sfc_render$5]]);const _sfc_main$j={},_hoisted_1$9={t:"1730332795021",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1970",width:"200",height:"200"};function _sfc_render$4(o,e){return openBlock(),createElementBlock("svg",_hoisted_1$9,e[0]||(e[0]=[createBaseVNode("path",{d:"M917.8112 229.0688c-22.20032-30.28992-53.16608-65.69984-87.18336-99.69664s-69.40672-64.96256-99.69664-87.18336c-51.56864-37.82656-76.5952-42.1888-90.9312-42.1888l-496.00512 0c-44.11392 0-79.99488 35.88096-79.99488 79.99488l0 864.01024c0 44.11392 35.88096 79.99488 79.99488 79.99488l736.01024 0c44.11392 0 79.99488-35.88096 79.99488-79.99488l0-624.00512c0-14.336-4.36224-39.34208-42.1888-90.9312l0 0 0 0zM785.36704 174.63296c30.69952 30.69952 54.80448 58.38848 72.58112 81.36704l-153.94816 0 0-153.94816c22.97856 17.77664 50.688 41.8816 81.36704 72.58112l0 0 0 0zM896 944.00512c0 8.66304-7.33184 15.99488-15.99488 15.99488l-736.01024 0c-8.66304 0-15.99488-7.33184-15.99488-15.99488l0-864.01024c0-8.66304 7.33184-15.99488 15.99488-15.99488 0 0 495.96416 0 496.00512 0l0 224.01024c0 17.67424 14.31552 32.01024 32.01024 32.01024l224.01024 0 0 624.00512zM256 64l128 0 0 64-128 0 0-64zM384 128l128 0 0 64-128 0 0-64zM256 192l128 0 0 64-128 0 0-64zM384 256l128 0 0 64-128 0 0-64zM256 320l128 0 0 64-128 0 0-64zM384 384l128 0 0 64-128 0 0-64zM256 448l128 0 0 64-128 0 0-64zM384 512l128 0 0 64-128 0 0-64zM256 847.99488c0 26.39872 21.6064 48.00512 48.00512 48.00512l160.01024 0c26.39872 0 48.00512-21.6064 48.00512-48.00512l0-160.01024c0-26.39872-21.6064-48.00512-48.00512-48.00512l-79.99488 0 0-64-128 0 0 271.99488zM448 768l0 64-128 0 0-64 128 0z",fill:"currentColor","p-id":"1971"},null,-1)]))}var Compressed=_export_sfc(_sfc_main$j,[["render",_sfc_render$4]]);const _sfc_main$i={},_hoisted_1$8={t:"1730332732861",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1676",width:"200",height:"200"};function _sfc_render$3(o,e){return openBlock(),createElementBlock("svg",_hoisted_1$8,e[0]||(e[0]=[createBaseVNode("path",{d:"M832 896l-640 0 0-128 192-320 263.00416 320 184.99584-128 0 256zM832 480.01024c0 53.02272-42.98752 96.01024-96.01024 96.01024s-96.01024-42.98752-96.01024-96.01024 42.98752-96.01024 96.01024-96.01024c53.02272 0 96.01024 42.98752 96.01024 96.01024zM917.8112 229.0688c-22.2208-30.28992-53.16608-65.69984-87.18336-99.69664s-69.40672-64.96256-99.69664-87.18336c-51.56864-37.82656-76.5952-42.1888-90.9312-42.1888l-496.00512 0c-44.11392 0-79.99488 35.88096-79.99488 79.99488l0 864.01024c0 44.11392 35.88096 79.99488 79.99488 79.99488l736.01024 0c44.11392 0 79.99488-35.88096 79.99488-79.99488l0-624.00512c0-14.336-4.36224-39.34208-42.1888-90.9312zM785.36704 174.63296c30.69952 30.69952 54.80448 58.38848 72.58112 81.36704l-153.94816 0 0-153.94816c22.97856 17.77664 50.688 41.8816 81.36704 72.58112zM896 944.00512c0 8.66304-7.33184 15.99488-15.99488 15.99488l-736.01024 0c-8.66304 0-15.99488-7.33184-15.99488-15.99488l0-864.01024c0-8.66304 7.33184-15.99488 15.99488-15.99488 0 0 495.96416 0 496.00512 0l0 224.01024c0 17.67424 14.336 32.01024 32.01024 32.01024l224.01024 0 0 624.00512z",fill:"currentColor","p-id":"1677"},null,-1)]))}var Image=_export_sfc(_sfc_main$i,[["render",_sfc_render$3]]);const _sfc_main$h={},_hoisted_1$7={t:"1730332828563",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2117",width:"200",height:"200"};function _sfc_render$2(o,e){return openBlock(),createElementBlock("svg",_hoisted_1$7,e[0]||(e[0]=[createBaseVNode("path",{d:"M842.01472 589.47584c-13.63968-13.45536-43.90912-20.56192-89.96864-21.17632-31.17056-0.34816-68.7104 2.39616-108.17536 7.92576-17.67424-10.19904-35.90144-21.2992-50.19648-34.65216-38.46144-35.92192-70.57408-85.77024-90.58304-140.5952 1.31072-5.12 2.41664-9.6256 3.44064-14.21312 0 0 21.66784-123.06432 15.93344-164.6592-0.79872-5.71392-1.26976-7.35232-2.80576-11.79648l-1.88416-4.83328c-5.89824-13.59872-17.44896-27.99616-35.57376-27.21792l-10.91584-0.34816c-20.19328 0-36.6592 10.32192-40.98048 25.76384-13.14816 48.4352 0.4096 120.89344 24.9856 214.7328l-6.28736 15.27808c-17.59232 42.88512-39.6288 86.05696-59.0848 124.14976l-2.51904 4.95616c-20.45952 40.0384-39.03488 74.0352-55.84896 102.83008l-17.36704 9.19552c-1.26976 0.67584-31.04768 16.42496-38.03136 20.64384-59.24864 35.38944-98.52928 75.55072-105.04192 107.4176-2.06848 10.17856-0.53248 23.18336 10.01472 29.20448l16.81408 8.45824c7.29088 3.64544 14.97088 5.50912 22.85568 5.50912 42.20928 0 91.19744-52.57216 158.69952-170.37312 77.9264-25.37472 166.64576-46.44864 244.40832-58.08128 59.24864 33.36192 132.13696 56.54528 178.13504 56.54528 8.17152 0 15.21664-0.77824 20.93056-2.29376 8.82688-2.33472 16.26112-7.3728 20.7872-14.19264 8.92928-13.43488 10.73152-31.92832 8.31488-50.87232-0.7168-5.632-5.20192-12.57472-10.07616-17.32608zM211.64032 814.03904c7.70048-21.03296 38.15424-62.64832 83.21024-99.55328 2.82624-2.29376 9.80992-8.82688 16.19968-14.90944-47.104 75.12064-78.6432 105.0624-99.40992 114.46272zM478.43328 199.68c13.55776 0 21.27872 34.2016 21.93408 66.2528s-6.8608 54.55872-16.15872 71.20896c-7.70048-24.65792-11.42784-63.50848-11.42784-88.90368 0 0-0.57344-48.55808 5.65248-48.55808l0 0zM398.848 637.50144c9.44128-16.91648 19.29216-34.75456 29.32736-53.67808 24.49408-46.32576 39.95648-82.55488 51.48672-112.35328 22.91712 41.6768 51.44576 77.12768 84.992 105.51296 4.17792 3.54304 8.62208 7.10656 13.27104 10.6496-68.21888 13.49632-127.16032 29.9008-179.07712 49.8688l0 0zM828.90752 633.6512c-4.15744 2.60096-16.05632 4.096-23.71584 4.096-24.69888 0-55.27552-11.28448-98.11968-29.67552 16.46592-1.20832 31.55968-1.8432 45.09696-1.8432 24.7808 0 32.11264-0.1024 56.34048 6.06208s24.53504 18.7392 20.3776 21.34016l0 0zM917.8112 229.0688c-22.20032-30.28992-53.16608-65.69984-87.18336-99.69664s-69.40672-64.96256-99.69664-87.18336c-51.56864-37.82656-76.5952-42.1888-90.9312-42.1888l-496.00512 0c-44.11392 0-79.99488 35.88096-79.99488 79.99488l0 864.01024c0 44.11392 35.88096 79.99488 79.99488 79.99488l736.01024 0c44.11392 0 79.99488-35.88096 79.99488-79.99488l0-624.00512c0-14.336-4.36224-39.34208-42.1888-90.9312l0 0zM785.36704 174.63296c30.69952 30.69952 54.80448 58.38848 72.58112 81.36704l-153.94816 0 0-153.94816c22.97856 17.77664 50.688 41.8816 81.36704 72.58112l0 0zM896 944.00512c0 8.66304-7.33184 15.99488-15.99488 15.99488l-736.01024 0c-8.66304 0-15.99488-7.33184-15.99488-15.99488l0-864.01024c0-8.66304 7.33184-15.99488 15.99488-15.99488 0 0 495.96416 0 496.00512 0l0 224.01024c0 17.67424 14.31552 32.01024 32.01024 32.01024l224.01024 0 0 624.00512z",fill:"currentColor","p-id":"2118"},null,-1)]))}var Pdf=_export_sfc(_sfc_main$h,[["render",_sfc_render$2]]);const _sfc_main$g={},_hoisted_1$6={t:"1730332771789",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1823",width:"200",height:"200"};function _sfc_render$1(o,e){return openBlock(),createElementBlock("svg",_hoisted_1$6,e[0]||(e[0]=[createBaseVNode("path",{d:"M639.77472 475.89376l44.21632 0-51.01568 226.18112-66.31424-318.01344-106.55744 0-77.1072 318.01344-57.81504-318.01344-111.39072 0 113.09056 511.87712 108.83072 0 76.288-302.71488 68.25984 302.71488 100.33152 0 129.61792-511.87712-170.45504 0 0 91.83232zM917.8112 229.0688c-22.20032-30.28992-53.16608-65.69984-87.18336-99.69664s-69.40672-64.96256-99.69664-87.18336c-51.56864-37.82656-76.5952-42.1888-90.9312-42.1888l-496.00512 0c-44.11392 0-79.99488 35.88096-79.99488 79.99488l0 864.01024c0 44.11392 35.88096 79.99488 79.99488 79.99488l736.01024 0c44.11392 0 79.99488-35.88096 79.99488-79.99488l0-624.00512c0-14.336-4.36224-39.34208-42.1888-90.9312l0 0zM785.36704 174.63296c30.69952 30.69952 54.80448 58.38848 72.58112 81.36704l-153.94816 0 0-153.94816c22.97856 17.77664 50.688 41.8816 81.36704 72.58112l0 0zM896 944.00512c0 8.66304-7.33184 15.99488-15.99488 15.99488l-736.01024 0c-8.66304 0-15.99488-7.33184-15.99488-15.99488l0-864.01024c0-8.66304 7.33184-15.99488 15.99488-15.99488 0 0 495.96416 0 496.00512 0l0 224.01024c0 17.67424 14.31552 32.01024 32.01024 32.01024l224.01024 0 0 624.00512z",fill:"currentColor","p-id":"1824"},null,-1)]))}var Word=_export_sfc(_sfc_main$g,[["render",_sfc_render$1]]);const _hoisted_1$5={key:0,class:"flex items-center"},_hoisted_2$4={key:1,class:"flex flex-col items-center gap-y-4"},_hoisted_3$4=["src"],_hoisted_4$4={class:"flex items-center gap-x-2"},_hoisted_5$1={key:2};var _sfc_main$f=defineComponent({__name:"ImagePreviewPane",props:{image:{}},emits:["close","insertImage","download","reference","delete"],setup(o,{emit:e}){return(n,a)=>n.image.status==="fetching"?(openBlock(),createElementBlock("div",_hoisted_1$5,[createVNode(unref(LoaderCircle),{class:"size-4 mr-2 animate-spin"}),createTextVNode(" "+toDisplayString$1(n.$t("kbView.attachmentsManager.previewPane.fetchingImage")),1)])):n.image.status==="synced"?(openBlock(),createElementBlock("div",_hoisted_2$4,[createBaseVNode("img",{src:n.image.url,class:"max-w-full max-h-full"},null,8,_hoisted_3$4),createBaseVNode("div",_hoisted_4$4,[createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",onClick:a[0]||(a[0]=s=>n.$emit("close"))},{default:withCtx(()=>[createVNode(unref(X),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(n.$t("kbView.attachmentsManager.previewPane.closePreview")),1)]),_:1}),createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",onClick:a[1]||(a[1]=s=>n.$emit("insertImage"))},{default:withCtx(()=>[createVNode(unref(Image$1),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(n.$t("kbView.attachmentsManager.previewPane.insertImage")),1)]),_:1}),createVNode(unref(_sfc_main$1P),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1I),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",class:"size-9 p-0"},{default:withCtx(()=>[createVNode(unref(Ellipsis),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1O),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1M),{onClick:a[2]||(a[2]=s=>n.$emit("download"))},{default:withCtx(()=>[createVNode(unref(Download),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(n.$t("kbView.attachmentsManager.previewPane.download")),1)]),_:1}),createVNode(unref(_sfc_main$1M),{onClick:a[3]||(a[3]=s=>n.$emit("reference"))},{default:withCtx(()=>[createVNode(unref(Link2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(n.$t("kbView.attachmentsManager.previewPane.reference")),1)]),_:1}),createVNode(unref(_sfc_main$1M),{class:"!text-red-500",onClick:a[4]||(a[4]=s=>n.$emit("delete"))},{default:withCtx(()=>[createVNode(unref(Trash2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(n.$t("kbView.attachmentsManager.previewPane.delete")),1)]),_:1})]),_:1})]),_:1})])])):n.image.status==="fetchError"?(openBlock(),createElementBlock("div",_hoisted_5$1,toDisplayString$1(n.$t("kbView.attachmentsManager.previewPane.fetchImageError")),1)):createCommentVNode("",!0)}});const imageExtnames=["png","jpg","jpeg","gif","bmp","webp"],audioExtnames=["mp3","wav","m4a"],videoExtnames=["mp4","webm","ogg"];function isImage(o){return imageExtnames.includes(o)}function isAudio(o){return audioExtnames.includes(o)}function isVideo(o){return videoExtnames.includes(o)}const _hoisted_1$4={class:"flex items-center justify-center flex-grow"},_hoisted_2$3={key:0,class:"flex flex-col items-center text-muted-foreground gap-y-6"},_hoisted_3$3={class:"text-sm break-all px-8"},_hoisted_4$3={class:"flex items-center justify-center flex-wrap gap-2"};var _sfc_main$e=defineComponent({__name:"PreviewPane",setup(o){const{blockEditor:e}=BlocksContext.useContext(),n=useTaskQueue(),{serverUrl:a}=ServerInfoContext.useContext(),{useImage:s}=ImagesContext.useContext(),{attachmentsBasePath:l,activeDirent:c,open:d}=AttachmentsManagerContext.useContext(),{lastFocusedBlockTree:u,lastFocusedDiId:f}=LastFocusContext.useContext(),{blocksManager:p}=BlocksContext.useContext(),_=computed(()=>{const B=l.value;if(!c.value)return null;const F=c.value.path,j=getSeperator(),I=c.value.isDirectory?void 0:c.value.path.split(".").pop(),U=c.value.isDirectory?void 0:F.split(j).pop();return{isDirectory:c.value.isDirectory,isPreview:c.value.isPreview,absolutePath:F,relativePath:F.slice(B.length+1),extname:I,fileNameAndExtname:U,isImage:I&&isImage(I),isAudio:I&&isAudio(I),isVideo:I&&isVideo(I)}}),b=s(()=>_.value?.isImage?_.value.relativePath:null),v=computed(()=>{if(!c.value)return null;if(c.value.isDirectory)return Folder;const B=c.value.path.split(".").pop();return B==="mp3"||B==="wav"||B==="m4a"?Audio:B==="zip"||B==="rar"||B==="7z"?Compressed:B==="png"||B==="jpg"||B==="jpeg"||B==="gif"||B==="bmp"||B==="webp"?Image:B==="pdf"?Pdf:B==="doc"||B==="docx"?Word:File}),k=computed(()=>!_.value||!_.value.extname?!1:_.value.isAudio||_.value.isVideo||_.value.isImage||["pdf","doc","docx"].includes(_.value.extname)),x=()=>{c.value&&(c.value.isPreview=!c.value.isPreview)},M=B=>{const F=u.value,j=f.value;if(!F||!j)return;const I=F.getDi(j),U=F.getEditorView(j);if(!I||!DI_FILTERS.isBlockDi(I)||!(U instanceof EditorView$1||U instanceof EditorView))return;const W=I.block.id;if(!W)return;const K=[BLOCK_CONTENT_TYPES.IMAGE,B,"left",null,null,[]],G=U instanceof EditorView$1&&U.state.doc.content.size===0,Z=U instanceof EditorView&&U.state.doc.length===0;G||Z?n.addTask(()=>{e.changeBlockContent({blockId:W,content:K}),d.value=!1}):n.addTask(()=>{const oe={baseBlockId:W,offset:1};e.insertNormalBlock({pos:oe,content:K})})},E=async B=>{const F=await fsGetAttachmentSignedUrl({path:B});if(!F.success)return;const j=F.data.signedUrl,I=document.createElement("a");I.href=`http://${a.value}${j}`,I.download=B,I.click()},L=async B=>{},V=B=>{const F=u.value,j=f.value;if(!F||!j)return;const I=F.getEditorView(j);if(!B||!(I instanceof EditorView$1))return;const U={getBlockRef:p.getBlockRef},K=getPmSchema(U).nodes.pathRef.create({path:B}),G=I.state.tr.replaceSelectionWith(K);I.dispatch(G)};return(B,F)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[unref(c)?(openBlock(),createElementBlock("div",_hoisted_2$3,[_.value&&_.value.isPreview?(openBlock(),createElementBlock(Fragment,{key:0},[_.value.isImage&&unref(b)?(openBlock(),createBlock(_sfc_main$f,{key:0,image:unref(b),onClose:x,onInsertImage:F[0]||(F[0]=j=>M(_.value.relativePath)),onDownload:F[1]||(F[1]=j=>E(_.value.absolutePath)),onReference:F[2]||(F[2]=j=>V(_.value.relativePath)),onDelete:F[3]||(F[3]=j=>L(_.value.absolutePath))},null,8,["image"])):createCommentVNode("",!0)],64)):_.value?(openBlock(),createElementBlock(Fragment,{key:1},[(openBlock(),createBlock(resolveDynamicComponent(v.value),{class:"size-20"})),createBaseVNode("div",_hoisted_3$3,toDisplayString$1(_.value.fileNameAndExtname),1),createBaseVNode("div",_hoisted_4$3,[_.value.isImage?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",onClick:x},{default:withCtx(()=>[createVNode(unref(Eye),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.openPreview")),1)]),_:1}),createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",onClick:F[4]||(F[4]=j=>M(_.value.relativePath))},{default:withCtx(()=>[createVNode(unref(Image$1),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.insertImage")),1)]),_:1}),createVNode(unref(_sfc_main$1P),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1I),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",class:"size-9 p-0"},{default:withCtx(()=>[createVNode(unref(Ellipsis),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1O),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(Info),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.info")),1)]),_:1}),createVNode(unref(_sfc_main$1M),{onClick:F[5]||(F[5]=j=>E(unref(c).path))},{default:withCtx(()=>[createVNode(unref(Download),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.download")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(Link2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.reference")),1)]),_:1}),createVNode(unref(_sfc_main$1M),{class:"!text-red-500",onClick:F[6]||(F[6]=j=>L(unref(c).path))},{default:withCtx(()=>[createVNode(unref(Trash2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.delete")),1)]),_:1})]),_:1})]),_:1})],64)):k.value?(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",onClick:x},{default:withCtx(()=>[createVNode(unref(Eye),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.openPreview")),1)]),_:1}),createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",onClick:F[7]||(F[7]=j=>E(unref(c).path))},{default:withCtx(()=>[createVNode(unref(Download),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.download")),1)]),_:1}),createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",onClick:F[8]||(F[8]=j=>V(_.value.relativePath))},{default:withCtx(()=>[createVNode(unref(Link2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.pathReference")),1)]),_:1}),createVNode(unref(_sfc_main$1P),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1I),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"outline",size:"sm",class:"size-9 p-0"},{default:withCtx(()=>[createVNode(unref(Ellipsis),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1O),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(Info),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.info")),1)]),_:1}),createVNode(unref(_sfc_main$1M),{onClick:F[9]||(F[9]=j=>E(unref(c).path))},{default:withCtx(()=>[createVNode(unref(Link2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.reference")),1)]),_:1}),createVNode(unref(_sfc_main$1M),{class:"!text-red-500",onClick:F[10]||(F[10]=j=>L(unref(c).path))},{default:withCtx(()=>[createVNode(unref(Trash2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.delete")),1)]),_:1})]),_:1})]),_:1})],64)):(openBlock(),createBlock(unref(_sfc_main$2r),{key:2,variant:"outline",size:"sm",onClick:F[11]||(F[11]=j=>V(_.value.relativePath))},{default:withCtx(()=>[createVNode(unref(Link2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(B.$t("kbView.attachmentsManager.previewPane.pathReference")),1)]),_:1}))])],64)):createCommentVNode("",!0)])):createCommentVNode("",!0)]))}}),_sfc_main$d=defineComponent({__name:"AttachmentsManager",setup(o){const{open:e,files:n,refetchFiles:a,fetchFilesStatus:s,uploadStatus:l,currentPathSegments:c,dbBasePath:d}=AttachmentsManagerContext.useContext();return ref([]),onMounted(async()=>{await fsEnsureAttachmentsDir({}),await a()}),(u,f)=>(openBlock(),createBlock(unref(_sfc_main$26),{open:unref(e),"onUpdate:open":f[0]||(f[0]=p=>isRef(e)?e.value=p:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$25),{class:"flex flex-row max-w-[80vw] max-h-[80vh] w-[800px] h-[600px] p-0 !outline-none"},{default:withCtx(()=>[createVNode(unref(_sfc_main$22),{class:"hidden"},{default:withCtx(()=>[createVNode(unref(_sfc_main$21),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(u.$t("kbView.attachmentsManager.title")),1)]),_:1})]),_:1}),createVNode(_sfc_main$l),createVNode(_sfc_main$e)]),_:1})]),_:1},8,["open"]))}});(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode('[vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32,.72,0,1)}[vaul-drawer][vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[vaul-drawer][vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[vaul-drawer][vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[vaul-drawer][vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}.vaul-dragging .vaul-scrollable [vault-drawer-direction=top],.vaul-dragging .vaul-scrollable [vault-drawer-direction=bottom]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=left],.vaul-dragging .vaul-scrollable [vault-drawer-direction=right]{overflow-x:hidden!important}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=top],[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height, 0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=left],[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height, 0),0,0)}[vaul-overlay]{opacity:0;transition:opacity .5s cubic-bezier(.32,.72,0,1)}[vaul-overlay][vaul-drawer-visible=true]{opacity:1}[vaul-drawer]:after{content:"";position:absolute;background:inherit;background-color:inherit}[vaul-drawer][vaul-drawer-direction=top]:after{top:initial;bottom:100%;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=bottom]:after{top:100%;bottom:initial;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=left]:after{left:initial;right:100%;top:0;bottom:0;width:200%}[vaul-drawer][vaul-drawer-direction=right]:after{left:100%;right:initial;top:0;bottom:0;width:200%}[vaul-overlay][vaul-snap-points=true]:not([vaul-snap-points-overlay=true]):not([data-state=closed]){opacity:0}[vaul-overlay][vaul-snap-points-overlay=true]:not([vaul-drawer-visible=false]){opacity:1}@keyframes fake-animation{}@media (hover: hover) and (pointer: fine){[vaul-drawer]{-webkit-user-select:none;user-select:none}}')),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Fe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const et=o=>typeof o<"u";function tt(o){return JSON.parse(JSON.stringify(o))}function ye(o,e,n,a={}){var s,l,c;const{clone:d=!1,passive:u=!1,eventName:f,deep:p=!1,defaultValue:_,shouldEmit:b}=a,v=getCurrentInstance(),k=n||v?.emit||((s=v?.$emit)==null?void 0:s.bind(v))||((c=(l=v?.proxy)==null?void 0:l.$emit)==null?void 0:c.bind(v?.proxy));let x=f;e||(e="modelValue"),x=x||`update:${e.toString()}`;const M=V=>d?typeof d=="function"?d(V):tt(V):V,E=()=>et(o[e])?M(o[e]):_,L=V=>{b?b(V)&&k(x,V):k(x,V)};if(u){const V=E(),B=ref(V);let F=!1;return watch(()=>o[e],j=>{F||(F=!0,B.value=M(j),nextTick(()=>F=!1))}),watch(B,j=>{!F&&(j!==o[e]||p)&&L(j)},{deep:p}),B}else return computed({get(){return E()},set(V){L(V)}})}const[ve,nt]=Q$1("DrawerRoot"),Pe=new WeakMap;function $(o,e,n=!1){if(!o||!(o instanceof HTMLElement)||!e)return;const a={};Object.entries(e).forEach(([s,l])=>{if(s.startsWith("--")){o.style.setProperty(s,l);return}a[s]=o.style[s],o.style[s]=l}),!n&&Pe.set(o,a)}function ne(o,e){if(!o||!(o instanceof HTMLElement))return;const n=Pe.get(o);n&&(e?o.style[e]=n[e]:Object.entries(n).forEach(([a,s])=>{o.style[a]=s}))}function ae(o,e){const n=window.getComputedStyle(o),a=n.transform||n.webkitTransform||n.mozTransform;let s=a.match(/^matrix3d\((.+)\)$/);return s?Number.parseFloat(s[1].split(", ")[N(e)?13:12]):(s=a.match(/^matrix\((.+)\)$/),s?Number.parseFloat(s[1].split(", ")[N(e)?5:4]):null)}function at(o){return 8*(Math.log(o+1)-2)}function N(o){switch(o){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return o}}const g={DURATION:.5,EASE:[.32,.72,0,1]},Re=.4;function lt({activeSnapPoint:o,snapPoints:e,drawerRef:n,overlayRef:a,fadeFromIndex:s,onSnapPointChange:l,direction:c}){const d=computed(()=>(e.value&&o.value===e.value[e.value.length-1])??null),u=computed(()=>e.value&&e.value.length>0&&(s?.value||s?.value===0)&&!Number.isNaN(s?.value)&&e.value[s?.value??-1]===o.value||!e.value),f=computed(()=>{var M;return((M=e.value)==null?void 0:M.findIndex(E=>E===o.value))??null}),p=computed(()=>{var M;return((M=e.value)==null?void 0:M.map(E=>{const L=typeof window<"u",V=typeof E=="string";let B=0;if(V&&(B=Number.parseInt(E,10)),N(c.value)){const j=V?B:L?E*window.innerHeight:0;return L?c.value==="bottom"?window.innerHeight-j:-window.innerHeight+j:j}const F=V?B:L?E*window.innerWidth:0;return L?c.value==="right"?window.innerWidth-F:-window.innerWidth+F:F}))??[]}),_=computed(()=>{var M;return f.value!==null?(M=p.value)==null?void 0:M[f.value]:null}),b=M=>{var E,L,V,B;const F=((E=p.value)==null?void 0:E.findIndex(j=>j===M))??null;nextTick(()=>{var j;l(F,p.value),$((j=n.value)==null?void 0:j.$el,{transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,transform:N(c.value)?`translate3d(0, ${M}px, 0)`:`translate3d(${M}px, 0, 0)`})}),p.value&&F!==p.value.length-1&&F!==s?.value?$((L=a.value)==null?void 0:L.$el,{transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,opacity:"0"}):$((V=a.value)==null?void 0:V.$el,{transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,opacity:"1"}),o.value=F!==null?((B=e.value)==null?void 0:B[F])??null:null};watch([o,p,e],()=>{var M;if(o.value){const E=((M=e.value)==null?void 0:M.findIndex(L=>L===o.value))??-1;p.value&&E!==-1&&typeof p.value[E]=="number"&&b(p.value[E])}},{immediate:!0});function v({draggedDistance:M,closeDrawer:E,velocity:L,dismissible:V}){var B,F,j;if(s===void 0)return;const I=c.value==="bottom"||c.value==="right"?(_.value??0)-M:(_.value??0)+M,U=f.value===(s.value??0)-1,W=f.value===0,K=M>0;if(U&&$((B=a.value)==null?void 0:B.$el,{transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`}),L>2&&!K){V?E():b(p.value[0]);return}if(L>2&&K&&p&&e.value){b(p.value[e.value.length-1]);return}const G=(F=p.value)==null?void 0:F.reduce((oe,Y)=>typeof oe!="number"||typeof Y!="number"?oe:Math.abs(Y-I)<Math.abs(oe-I)?Y:oe),Z=N(c.value)?window.innerHeight:window.innerWidth;if(L>Re&&Math.abs(M)<Z*.4){const oe=K?1:-1;if(oe>0&&d){b(p.value[(((j=e.value)==null?void 0:j.length)??0)-1]);return}if(W&&oe<0&&V&&E(),f.value===null)return;b(p.value[f.value+oe]);return}b(G)}function k({draggedDistance:M}){var E;if(_.value===null)return;const L=c.value==="bottom"||c.value==="right"?(_.value??0)-M:(_.value??0)+M;(c.value==="bottom"||c.value==="right")&&L<p.value[p.value.length-1]||(c.value==="top"||c.value==="left")&&L>p.value[p.value.length-1]||$((E=n.value)==null?void 0:E.$el,{transform:N(c.value)?`translate3d(0, ${L}px, 0)`:`translate3d(${L}px, 0, 0)`})}function x(M,E){if(!e||typeof f.value!="number"||!p.value||s===void 0)return null;const L=f.value===(s.value??0)-1;if(f.value>=(s.value??0)&&E)return 0;if(L&&!E)return 1;if(!u.value&&!L)return null;const V=L?f.value+1:f.value-1,B=L?p.value[V]-p.value[V-1]:p.value[V+1]-p.value[V],F=M/Math.abs(B);return L?1-F:F}return{isLastSnapPoint:d,shouldFade:u,getPercentageDragged:x,activeSnapPointIndex:f,onRelease:v,onDrag:k,snapPointsOffset:p}}let Q=null;function ot(o){const{isOpen:e,modal:n,nested:a,hasBeenOpened:s}=o,l=ref(typeof window<"u"?window.location.href:""),c=ref(0);function d(){if(Q===null&&e.value){Q={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height};const{scrollX:f,innerHeight:p}=window;document.body.style.position="fixed",document.body.style.top=`-${c.value}px`,document.body.style.left=`-${f}px`,document.body.style.right="0px",document.body.style.height="auto",setTimeout(()=>{requestAnimationFrame(()=>{const _=p-window.innerHeight;_&&c.value>=p&&(document.body.style.top=`-${c.value+_}px`)})},300)}}function u(){if(Q!==null){const f=-Number.parseInt(document.body.style.top,10),p=-Number.parseInt(document.body.style.left,10);Object.assign(document.body.style,Q),requestAnimationFrame(()=>{if(l.value!==window.location.href){l.value=window.location.href;return}window.scrollTo(p,f)}),Q=null}}return onMounted(()=>{function f(){c.value=window.scrollY}f(),window.addEventListener("scroll",f),onUnmounted(()=>{window.removeEventListener("scroll",f)})}),watch([e,s,l],()=>{a.value||!s.value||(e.value?(!window.matchMedia("(display-mode: standalone)").matches&&d(),n.value||setTimeout(()=>{u()},500)):u())}),{restorePositionSetting:u}}const it=.25,rt=100,De=8,q=16,ut=26,Se="vaul-dragging";function st(o,e){return o&&o.value?o:e}function ct(o){const{emitDrag:e,emitRelease:n,emitClose:a,emitOpenChange:s,open:l,dismissible:c,nested:d,fixed:u,modal:f,shouldScaleBackground:p,scrollLockTimeout:_,closeThreshold:b,activeSnapPoint:v,fadeFromIndex:k,direction:x}=o,M=ref(l.value??!1),E=ref(!1),L=ref(!1),V=ref(!1),B=ref(!1),F=ref(null),j=ref(null),I=ref(null),U=ref(null),W=ref(null),K=ref(!0),G=ref(null),Z=ref(0),oe=ref(!1);ref(0);const Y=ref(null);ref(0);const se=computed(()=>{var ze;return((ze=Y.value)==null?void 0:ze.$el.getBoundingClientRect().height)||0}),le=st(o.snapPoints,ref(void 0)),{activeSnapPointIndex:ce,onRelease:de,snapPointsOffset:ge,onDrag:qe,shouldFade:ke,getPercentageDragged:Ee}=lt({snapPoints:le,activeSnapPoint:v,drawerRef:Y,fadeFromIndex:k,overlayRef:F,onSnapPointChange:Oe,direction:x});function Oe(ze,We){le.value&&ze===We.length-1&&(j.value=new Date)}const{restorePositionSetting:Ve}=ot({isOpen:M,modal:f,nested:d,hasBeenOpened:E});function Ne(){return(window.innerWidth-ut)/window.innerWidth}function dt(ze,We){var ee;if(!ze)return!1;let re=ze;const Te=(ee=window.getSelection())==null?void 0:ee.toString(),Xe=Y.value?ae(Y.value.$el,x.value):null,ht=new Date;if(re.hasAttribute("data-vaul-no-drag")||re.closest("[data-vaul-no-drag]"))return!1;if(x.value==="right"||x.value==="left")return!0;if(j.value&&ht.getTime()-j.value.getTime()<500)return!1;if(Xe!==null&&(x.value==="bottom"?Xe>0:Xe<0))return!0;if(Te&&Te.length>0)return!1;if(W.value&&ht.getTime()-W.value.getTime()<_.value&&Xe===0||We)return W.value=ht,!1;for(;re;){if(re.scrollHeight>re.clientHeight){if(re.scrollTop!==0)return W.value=new Date,!1;if(re.getAttribute("role")==="dialog")return!0}re=re.parentNode}return!0}function pe(ze){!c.value&&!le.value||Y.value&&!Y.value.$el.contains(ze.target)||(V.value=!0,I.value=new Date,ze.target.setPointerCapture(ze.pointerId),Z.value=N(x.value)?ze.clientY:ze.clientX)}function fe(ze){var We,ee,re,Te,Xe,ht;if(Y.value&&V.value){const ft=x.value==="bottom"||x.value==="right"?1:-1,Ce=(Z.value-(N(x.value)?ze.clientY:ze.clientX))*ft,Ze=Ce>0,pt=le.value&&!c.value&&!Ze;if(pt&&ce.value===0)return;const bt=Math.abs(Ce),St=document.querySelector("[vaul-drawer-wrapper]");let Ct=bt/se.value;const $t=Ee(bt,Ze);if($t!==null&&(Ct=$t),pt&&Ct>=1||!K.value&&!dt(ze.target,Ze))return;if((We=Y?.value)==null||We.$el.classList.add(Se),K.value=!0,$((ee=Y.value)==null?void 0:ee.$el,{transition:"none"}),$((re=F.value)==null?void 0:re.$el,{transition:"none"}),le.value&&qe({draggedDistance:Ce}),Ze&&!le.value){const Et=at(Ce),Ut=Math.min(Et*-1,0)*ft;$((Te=Y.value)==null?void 0:Te.$el,{transform:N(x.value)?`translate3d(0, ${Ut}px, 0)`:`translate3d(${Ut}px, 0, 0)`});return}const Kt=1-Ct;if((ke.value||k.value&&ce.value===k.value-1)&&(e(Ct),$((Xe=F.value)==null?void 0:Xe.$el,{opacity:`${Kt}`,transition:"none"},!0)),St&&F.value&&p.value){const Et=Math.min(Ne()+Ct*(1-Ne()),1),Ut=8-Ct*8,tn=Math.max(0,14-Ct*14);$(St,{borderRadius:`${Ut}px`,transform:N(x.value)?`scale(${Et}) translate3d(0, ${tn}px, 0)`:`scale(${Et}) translate3d(${tn}px, 0, 0)`,transition:"none"},!0)}if(!le.value){const Et=bt*ft;$((ht=Y.value)==null?void 0:ht.$el,{transform:N(x.value)?`translate3d(0, ${Et}px, 0)`:`translate3d(${Et}px, 0, 0)`})}}}function me(){var ze;if(!Y.value)return;const We=document.querySelector("[vaul-drawer-wrapper]"),ee=ae(Y.value.$el,x.value);$(Y.value.$el,{transform:"translate3d(0, 0, 0)",transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`}),$((ze=F.value)==null?void 0:ze.$el,{transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,opacity:"1"}),p.value&&ee&&ee>0&&M.value&&$(We,{borderRadius:`${De}px`,overflow:"hidden",...N(x.value)?{transform:`scale(${Ne()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ne()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${g.DURATION}s`,transitionTimingFunction:`cubic-bezier(${g.EASE.join(",")})`},!0)}function te(){var ze;Y.value&&($(Y.value.$el,{transform:N(x.value)?`translate3d(0, ${x.value==="bottom"?"100%":"-100%"}, 0)`:`translate3d(${x.value==="right"?"100%":"-100%"}, 0, 0)`,transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`}),$((ze=F.value)==null?void 0:ze.$el,{opacity:"0",transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`}),we(!1),window.setTimeout(()=>{L.value=!1,M.value=!1},300),window.setTimeout(()=>{le.value&&(v.value=le.value[0])},g.DURATION*1e3))}watchEffect(()=>{if(!M.value&&p.value&&Fe){const ze=setTimeout(()=>{ne(document.body)},200);return()=>clearTimeout(ze)}}),onUnmounted(()=>{we(!1),Ve()});function ue(ze){if(!V.value||!Y.value)return;Y.value.$el.classList.remove(Se),K.value=!1,V.value=!1,U.value=new Date;const We=ae(Y.value.$el,x.value);if(!dt(ze.target,!1)||!We||Number.isNaN(We)||I.value===null)return;const ee=U.value.getTime()-I.value.getTime(),re=Z.value-(N(x.value)?ze.clientY:ze.clientX),Te=Math.abs(re)/ee;if(Te>.05&&(B.value=!0,window.setTimeout(()=>{B.value=!1},200)),le.value){const ht=x.value==="bottom"||x.value==="right"?1:-1;de({draggedDistance:re*ht,closeDrawer:te,velocity:Te,dismissible:c.value}),n(!0);return}if(x.value==="bottom"||x.value==="right"?re>0:re<0){me(),n(!0);return}if(Te>Re){te(),n(!1);return}const Xe=Math.min(Y.value.$el.getBoundingClientRect().height??0,window.innerHeight);if(We>=Xe*b.value){te(),n(!1);return}n(!0),me()}watch(M,ze=>{ze&&(j.value=new Date,we(!0)),s(ze)},{immediate:!0}),watch(l,ze=>{ze?(M.value=ze,E.value=!0):te()},{immediate:!0});function we(ze){const We=document.querySelector("[vaul-drawer-wrapper]");!We||!p.value||(ze?($(document.body,{background:document.body.style.backgroundColor||document.body.style.background}),$(document.body,{background:"black"},!0),$(We,{borderRadius:`${De}px`,overflow:"hidden",...N(x.value)?{transform:`scale(${Ne()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ne()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${g.DURATION}s`,transitionTimingFunction:`cubic-bezier(${g.EASE.join(",")})`})):(ne(We,"overflow"),ne(We,"transform"),ne(We,"borderRadius"),$(We,{transitionProperty:"transform, border-radius",transitionDuration:`${g.DURATION}s`,transitionTimingFunction:`cubic-bezier(${g.EASE.join(",")})`})))}function _e(ze){var We,ee;const re=ze?(window.innerWidth-q)/window.innerWidth:1,Te=ze?-16:0;G.value&&window.clearTimeout(G.value),$((We=Y.value)==null?void 0:We.$el,{transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,transform:`scale(${re}) translate3d(0, ${Te}px, 0)`}),!ze&&(ee=Y.value)!=null&&ee.$el&&(G.value=window.setTimeout(()=>{var Xe,ht;const ft=ae((Xe=Y.value)==null?void 0:Xe.$el,x.value);$((ht=Y.value)==null?void 0:ht.$el,{transition:"none",transform:N(x.value)?`translate3d(0, ${ft}px, 0)`:`translate3d(${ft}px, 0, 0)`})},500))}function Be(ze){var We;if(ze<0)return;const ee=N(x.value)?window.innerHeight:window.innerWidth,re=(ee-q)/ee,Te=re+ze*(1-re),Xe=-16+ze*q;$((We=Y.value)==null?void 0:We.$el,{transform:N(x.value)?`scale(${Te}) translate3d(0, ${Xe}px, 0)`:`scale(${Te}) translate3d(${Xe}px, 0, 0)`,transition:"none"})}function Ge(ze){var We;const ee=N(x.value)?window.innerHeight:window.innerWidth,re=ze?(ee-q)/ee:1,Te=ze?-16:0;ze&&$((We=Y.value)==null?void 0:We.$el,{transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,transform:N(x.value)?`scale(${re}) translate3d(0, ${Te}px, 0)`:`scale(${re}) translate3d(${Te}px, 0, 0)`})}return{open:l,isOpen:M,modal:f,keyboardIsOpen:oe,hasBeenOpened:E,isVisible:L,drawerRef:Y,drawerHeightRef:se,overlayRef:F,isDragging:V,dragStartTime:I,isAllowedToDrag:K,snapPoints:le,activeSnapPoint:v,pointerStart:Z,dismissible:c,snapPointsOffset:ge,direction:x,shouldFade:ke,fadeFromIndex:k,shouldScaleBackground:p,onPress:pe,onDrag:fe,onRelease:ue,closeDrawer:te,onNestedDrag:Be,onNestedRelease:Ge,onNestedOpenChange:_e,emitClose:a,emitDrag:e,emitRelease:n,emitOpenChange:s,nested:d}}const vt=defineComponent({__name:"DrawerRoot",props:{activeSnapPoint:{default:void 0},closeThreshold:{default:it},shouldScaleBackground:{type:Boolean,default:void 0},scrollLockTimeout:{default:rt},fixed:{type:Boolean,default:void 0},dismissible:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:void 0},nested:{type:Boolean,default:!1},direction:{default:"bottom"},snapPoints:{default:void 0},fadeFromIndex:{default:void 0}},emits:["drag","release","close","update:open","update:activeSnapPoint"],setup(o,{expose:e,emit:n}){const a=o,s=n;useSlots();const l=computed(()=>a.fadeFromIndex??(a.snapPoints&&a.snapPoints.length-1)),c=ye(a,"open",s,{defaultValue:a.defaultOpen,passive:a.open===void 0}),d=ye(a,"activeSnapPoint",s,{passive:a.activeSnapPoint===void 0}),u={emitDrag:k=>s("drag",k),emitRelease:k=>s("release",k),emitClose:()=>s("close"),emitOpenChange:k=>{s("update:open",k)}},{closeDrawer:f,hasBeenOpened:p,modal:_,isOpen:b}=nt(ct({...u,...toRefs(a),activeSnapPoint:d,fadeFromIndex:l,open:c}));function v(k){if(c.value!==void 0){u.emitOpenChange(k);return}k?(p.value=!0,b.value=k):f()}return e({open:b}),(k,x)=>(openBlock(),createBlock(unref(eu),{open:unref(b),modal:unref(_),"onUpdate:open":v},{default:withCtx(()=>[renderSlot(k.$slots,"default",{open:unref(b)})]),_:3},8,["open","modal"]))}}),mt=defineComponent({__name:"DrawerOverlay",setup(o){const{overlayRef:e,snapPoints:n,isVisible:a,isOpen:s,shouldFade:l}=ve(),c=computed(()=>{var d;return n&&(((d=n.value)==null?void 0:d.length)??0)>0});return(d,u)=>(openBlock(),createBlock(unref(Eu),{ref_key:"overlayRef",ref:e,"vaul-drawer-visible":unref(a)?"true":"false","vaul-overlay":"","vaul-snap-points":unref(s)&&c.value?"true":"false","vaul-snap-points-overlay":unref(s)&&unref(l)?"true":"false"},null,8,["vaul-drawer-visible","vaul-snap-points","vaul-snap-points-overlay"]))}}),gt=defineComponent({__name:"DrawerContent",setup(o){const{open:e,isOpen:n,isVisible:a,snapPointsOffset:s,drawerRef:l,onPress:c,onDrag:d,onRelease:u,modal:f,emitOpenChange:p,dismissible:_,keyboardIsOpen:b,closeDrawer:v,direction:k}=ve(),x=computed(()=>s.value&&s.value.length>0?`${s.value[0]}px`:"0");function M(E){if(!f.value||E.defaultPrevented){E.preventDefault();return}b.value&&(b.value=!1),E.preventDefault(),_.value&&p(!1),!(!_.value||e.value!==void 0)&&v()}return watch(n,E=>{E&&setTimeout(()=>{a.value=!0},1)},{immediate:!0}),(E,L)=>(openBlock(),createBlock(unref(xu),{ref_key:"drawerRef",ref:l,"vaul-drawer":"","vaul-drawer-direction":unref(k),"vaul-drawer-visible":unref(a)?"true":"false",style:normalizeStyle({"--snap-point-height":x.value}),onPointerdown:unref(c),onPointermove:unref(d),onPointerup:unref(u),onPointerDownOutside:M,onEscapeKeyDown:L[0]||(L[0]=V=>{unref(_)||V.preventDefault()})},{default:withCtx(()=>[renderSlot(E.$slots,"default")]),_:3},8,["vaul-drawer-direction","vaul-drawer-visible","style","onPointerdown","onPointermove","onPointerup"]))}});var _sfc_main$c=defineComponent({__name:"Drawer",props:{activeSnapPoint:{},closeThreshold:{},shouldScaleBackground:{type:Boolean,default:!0},scrollLockTimeout:{},fixed:{type:Boolean},dismissible:{type:Boolean},modal:{type:Boolean},open:{type:Boolean},defaultOpen:{type:Boolean},nested:{type:Boolean},direction:{},snapPoints:{},fadeFromIndex:{}},emits:["drag","release","close","update:open","update:activeSnapPoint"],setup(o,{emit:e}){const s=xe(o,e);return(l,c)=>(openBlock(),createBlock(unref(vt),normalizeProps(guardReactiveProps(unref(s))),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),_sfc_main$b=defineComponent({__name:"DrawerOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(mt),mergeProps(n.value,{class:unref(cn)("fixed inset-0 z-50 bg-black/80",e.class)}),null,16,["class"]))}}),_sfc_main$a=defineComponent({__name:"DrawerContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,s=xe(n,e);return(l,c)=>(openBlock(),createBlock(unref(Dv),null,{default:withCtx(()=>[createVNode(_sfc_main$b),createVNode(unref(gt),mergeProps(unref(s),{class:unref(cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",n.class)}),{default:withCtx(()=>[c[0]||(c[0]=createBaseVNode("div",{class:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"},null,-1)),renderSlot(l.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_sfc_main$9=defineComponent({__name:"DrawerDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Du),mergeProps(n.value,{class:unref(cn)("text-sm text-muted-foreground",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$8=defineComponent({__name:"DrawerFooter",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("mt-auto flex flex-col gap-2 p-4",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$7=defineComponent({__name:"DrawerHeader",props:{class:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("grid gap-1.5 p-4 text-center sm:text-left",e.class))},[renderSlot(n.$slots,"default")],2))}}),_sfc_main$6=defineComponent({__name:"DrawerTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,n=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Pu),mergeProps(n.value,{class:unref(cn)("text-lg font-semibold leading-none tracking-tight",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}});const _hoisted_1$3={class:"p-4 space-y-4 max-h-[calc(90vh-150px)] overflow-y-auto"},_hoisted_2$2={class:"font-medium text-muted-foreground text-sm"},_hoisted_3$2={class:"space-y-1"},_hoisted_4$2={class:"px-2 py-1 bg-muted rounded"};var _sfc_main$5=defineComponent({__name:"KeyBindings",setup(o){const{openKeybindings:e}=KeymapContext.useContext(),{t:n}=useI18n(),a={[n("kbView.keybindings.normal.groupName")]:[{key:"Alt/Option + ↑",description:n("kbView.keybindings.normal.swapUp")},{key:"Alt/Option + ↓",description:n("kbView.keybindings.normal.swapDown")},{key:"Command/Ctrl + ↓",description:n("kbView.keybindings.normal.expand")},{key:"Command/Ctrl + ↑",description:n("kbView.keybindings.normal.collapse")},{key:"Tab",description:n("kbView.keybindings.normal.indent")},{key:"Shift + Tab",description:n("kbView.keybindings.normal.outdent")},{key:"@",description:n("kbView.keybindings.normal.insertBlockRef")},{key:"#",description:n("kbView.keybindings.normal.insertTag")},{key:"Command/Ctrl + m",description:n("kbView.keybindings.normal.insertInlineMath")},{key:"Command/Ctrl + Shift + m",description:n("kbView.keybindings.normal.insertBlockMath")},{key:"Command/Ctrl + b",description:n("kbView.keybindings.normal.bold")},{key:"Command/Ctrl + i",description:n("kbView.keybindings.normal.italic")},{key:"Command/Ctrl + `",description:n("kbView.keybindings.normal.code")},{key:"Command/Ctrl + =",description:n("kbView.keybindings.normal.highlight")}]};return(s,l)=>(openBlock(),createBlock(unref(_sfc_main$c),{open:unref(e),"onUpdate:open":l[0]||(l[0]=c=>isRef(e)?e.value=c:null)},{default:withCtx(()=>[createVNode(unref(tu),null,{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3}),createVNode(unref(_sfc_main$a),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$7),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$6),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(s.$t("kbView.keybindings.title")),1)]),_:1}),createVNode(unref(_sfc_main$9),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(s.$t("kbView.keybindings.description")),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$3,[(openBlock(),createElementBlock(Fragment,null,renderList(a,(c,d)=>createBaseVNode("div",{key:d,class:"space-y-2"},[createBaseVNode("h3",_hoisted_2$2,toDisplayString$1(d),1),createBaseVNode("div",_hoisted_3$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c,(u,f)=>(openBlock(),createElementBlock("div",{key:f,class:"flex justify-between items-center text-sm"},[createBaseVNode("span",null,toDisplayString$1(u.description),1),createBaseVNode("kbd",_hoisted_4$2,toDisplayString$1(u.key),1)]))),128))])])),64))]),createVNode(unref(_sfc_main$8),null,{default:withCtx(()=>[createVNode(unref(Gl),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2r),{variant:"ghost"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(s.$t("kbView.keybindings.close")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["open"]))}}),_sfc_main$4=defineComponent({__name:"KbViewContent",setup(o){const{sidePaneOpen:e,sidePaneDir:n,sidePaneWidth:a,sidePaneHeight:s,enableSidePaneAnimation:l}=SidebarContext.useContext(),{synced:c,blocksManager:d}=BlocksContext.useContext(),{mainRootBlockId:u}=MainTreeContext.useContext(),f=d.getBlockRef("root");createCreateNewTreeDialogContext.useContext(),watch(c,(k,x)=>{!x&&k&&(d.getRootBlockRef().value==null?d.createNewTree():d.createBlockTransaction({type:"ui"}).commit())});const p=(k,x)=>{if(!(k instanceof HTMLElement))return;const M=k.animate([{opacity:1,transform:"translateX(0)"},{opacity:0,transform:"translateX(100%)"}],{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});M.onfinish=()=>{x()}},_=(k,x)=>{if(!(k instanceof HTMLElement))return;const M=k.animate([{opacity:0,transform:"translateX(100%)"},{opacity:1,transform:"translateX(0)"}],{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});M.onfinish=()=>{x()}},b=(k,x)=>{if(!(k instanceof HTMLElement))return;const M=k.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(100%)"}],{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});M.onfinish=()=>{x()}},v=(k,x)=>{if(!(k instanceof HTMLElement))return;const M=k.animate([{opacity:0,transform:"translateY(100%)"},{opacity:1,transform:"translateY(0)"}],{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});M.onfinish=()=>{x()}};return(k,x)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(_sfc_main$r),unref(c)&&unref(f)?(openBlock(),createBlock(_sfc_main$1l,{key:0,class:"h-[100vh] mr-1 ml-4",id:"main",style:normalizeStyle({paddingRight:unref(e)&&unref(n)==="right"?`${unref(a)}px`:"0px",paddingBottom:unref(e)&&unref(n)==="bottom"?`${unref(s)}px`:"0px",transition:unref(l)?"padding 500ms var(--tf)":"none"}),"root-block-id":unref(u),"root-block-level":0,"padding-top":60,"enlarge-root-block":!0},null,8,["style","root-block-id"])):(openBlock(),createElementBlock("div",{key:1,class:"h-[100vh] mr-1 flex justify-center items-center text-muted-foreground",style:normalizeStyle({paddingRight:unref(e)&&unref(n)==="right"?`${unref(a)}px`:"0px",paddingBottom:unref(e)&&unref(n)==="bottom"?`${unref(s)}px`:"0px",transition:unref(l)?"padding 500ms var(--tf)":"none"})},[createVNode(unref(LoaderCircle),{class:"animate-spin mr-2"}),createTextVNode(" "+toDisplayString$1(k.$t("kbView.loadingKb")),1)],4)),createVNode(Transition,{onLeave:p,onEnter:_},{default:withCtx(()=>[unref(e)&&unref(n)==="right"?(openBlock(),createBlock(_sfc_main$q,{key:0,class:"absolute right-0 top-0 h-full border-l",style:normalizeStyle({width:`${unref(a)}px`})},null,8,["style"])):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{onLeave:b,onEnter:v},{default:withCtx(()=>[unref(e)&&unref(n)==="bottom"?(openBlock(),createBlock(_sfc_main$q,{key:0,class:"absolute bottom-0 left-0 w-[100vw] border-t",style:normalizeStyle({height:`${unref(s)}px`})},null,8,["style"])):createCommentVNode("",!0)]),_:1}),createVNode(_sfc_main$M),createVNode(_sfc_main$K),createVNode(_sfc_main$17),createVNode(_sfc_main$d),createVNode(_sfc_main$N),createVNode(_sfc_main$1S),createVNode(_sfc_main$18),createVNode(_sfc_main$19),createVNode(_sfc_main$1b),createVNode(_sfc_main$1a),createVNode(_sfc_main$5)],64))}});const ImageEditorContext=createContext(()=>{const o=ref(!0),e=ref("https://letsenhance.io/static/8f5e523ee6b2479e26ecc91b9c25261e/1015f/MainAfter.jpg"),n=ref(!1);return{open:o,imageUrl:e,deleteOriginal:n}}),MenubarContext=createContext(()=>({menuPaneOpen:ref(!1)}));var _sfc_main$3=defineComponent({__name:"KbView",setup(o){return(e,n)=>(openBlock(),createBlock(unref(kbViewRegistry).Provider,null,{default:withCtx(()=>[createVNode(unref(MainTreeContext).Provider,null,{default:withCtx(()=>[createVNode(unref(MenubarContext).Provider,null,{default:withCtx(()=>[createVNode(unref(ImageEditorContext).Provider,null,{default:withCtx(()=>[createVNode(unref(SettingsContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BasicSettingsContext).Provider,null,{default:withCtx(()=>[createVNode(unref(PathsContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BlockTreeContext).Provider,null,{default:withCtx(()=>[createVNode(unref(PasteDialogContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FocusModeContext).Provider,null,{default:withCtx(()=>[createVNode(unref(TimeMachineContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FloatingMathInputContext).Provider,null,{default:withCtx(()=>[createVNode(unref(LastFocusContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BlocksContext).Provider,null,{default:withCtx(()=>[createVNode(unref(ExporterContext).Provider,null,{default:withCtx(()=>[createVNode(unref(createCreateNewTreeDialogContext).Provider,null,{default:withCtx(()=>[createVNode(unref(IndexContext).Provider,null,{default:withCtx(()=>[createVNode(unref(AttachmentsManagerContext).Provider,null,{default:withCtx(()=>[createVNode(unref(ImagesContext).Provider,null,{default:withCtx(()=>[createVNode(unref(SidebarContext).Provider,null,{default:withCtx(()=>[createVNode(unref(KeymapContext).Provider,null,{default:withCtx(()=>[createVNode(unref(RefSuggestionsContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BlockMoverContext).Provider,null,{default:withCtx(()=>[createVNode(unref(HistoryContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BlockSelectDragContext).Provider,null,{default:withCtx(()=>[createVNode(unref(SettingsPanelContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FavoriteContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FieldsManagerContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BacklinksContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FloatingEditorContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FieldValueInspectorContext).Provider,null,{default:withCtx(()=>[createVNode(unref(DailyNoteContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FusionCommandContext).Provider,null,{default:withCtx(()=>[createVNode(_sfc_main$4)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});const AdminLoginSchema={request:z$1.object({serverUrl:z$1.string(),password:z$1.string()}),result:z$1.object({token:z$1.string()})},KbEditorLoginSchema={request:z$1.object({serverUrl:z$1.string(),location:z$1.string(),password:z$1.string()}),result:z$1.object({token:z$1.string()})},adminLogin=usePostApi("/login/admin",AdminLoginSchema.request,AdminLoginSchema.result),kbEditorLogin=usePostApi("/login/kb-editor",KbEditorLoginSchema.request,KbEditorLoginSchema.result),_hoisted_1$2={class:"grid items-center w-full gap-4"},_hoisted_2$1={class:"flex flex-col space-y-3"},_hoisted_3$1={class:"flex flex-col space-y-2"},_hoisted_4$1={key:0,class:"text-red-500 flex items-center text-sm mt-2"};var _sfc_main$2=defineComponent({__name:"AdminLoginView",setup(o){const{serverUrl:e,token:n}=ServerInfoContext.useContext(),a=ref(""),{t:s}=useI18n(),l=ref("idle"),c=computed(()=>["idle","loggingIn","loginSuccess"].includes(l.value)?null:s(`login.adminLogin.errMsg.${l.value}`)),d=async()=>{l.value="loggingIn";const u=e.value,p=z$1.string().url().safeParse(u);if(!p.success){console.log("URL 格式不正确, err=",p.error),l.value="invalidServerUrl";return}const[_]=await Promise.all([adminLogin({serverUrl:u,password:a.value}),timeout(2e3)]);_.success?(l.value="loginSuccess",n.value=_.data.token,setTimeout(()=>{const b=encodeURIComponent(u);router.push(`/admin-dashboard/${b}`)},2e3)):_.code===RESP_CODES.PASSWORD_INCORRECT?l.value="invalidPassword":_.code===RESP_CODES.EXCEED_MAX_ATTEMPTS?l.value="maxAttempts":l.value="cannotConnectToServer"};return(u,f)=>{const p=resolveComponent("router-link");return openBlock(),createBlock(unref(_sfc_main$2q),{class:"w-[400px]"},{default:withCtx(()=>[createVNode(unref(_sfc_main$2m),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2l),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(u.$t("login.adminLogin.title")),1)]),_:1}),createVNode(unref(_sfc_main$2o))]),_:1}),createVNode(unref(_sfc_main$2p),null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$1,[createVNode(unref(_sfc_main$1k),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(u.$t("login.adminLogin.serverUrlLabel")),1)]),_:1}),createVNode(unref(_sfc_main$1$),{modelValue:unref(e),"onUpdate:modelValue":f[0]||(f[0]=_=>isRef(e)?e.value=_:null),placeholder:u.$t("login.adminLogin.serverUrlPlaceholder")},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_3$1,[createVNode(unref(_sfc_main$1k),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(u.$t("login.adminLogin.passwordLabel")),1)]),_:1}),createVNode(unref(_sfc_main$1$),{modelValue:a.value,"onUpdate:modelValue":f[1]||(f[1]=_=>a.value=_),type:"password"},null,8,["modelValue"])])]),c.value?(openBlock(),createElementBlock("div",_hoisted_4$1,[createVNode(unref(X),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(c.value),1)])):createCommentVNode("",!0)]),_:1}),createVNode(unref(_sfc_main$2n),{class:"flex justify-center gap-8"},{default:withCtx(()=>[createVNode(p,{to:"/login/kb-editor",class:"text-sm text-muted-foreground hover:text-foreground transition-colors duration-300"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(u.$t("login.adminLogin.kbEditorLoginBtn")),1)]),_:1}),createVNode(unref(_sfc_main$2r),{class:"min-w-[100px]",onClick:d,disabled:l.value==="loggingIn"},{default:withCtx(()=>[l.value==="loggingIn"?(openBlock(),createBlock(unref(LoaderCircle),{key:0,class:"size-4 mr-2 animate-spin"})):l.value==="loginSuccess"?(openBlock(),createBlock(unref(Check),{key:1,class:"size-4 mr-2"})):l.value!=="idle"?(openBlock(),createBlock(unref(X),{key:2,class:"size-4 mr-2"})):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(u.$t(`login.adminLogin.loginBtn.${l.value}`)??u.$t("login.adminLogin.loginBtn.loginFailed")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})}}});const _hoisted_1$1={class:"grid items-center w-full gap-4"},_hoisted_2={class:"flex flex-col space-y-3"},_hoisted_3={class:"relative"},_hoisted_4={class:"absolute right-3 top-3"},_hoisted_5={key:0,class:"flex items-center text-red-500 text-sm"},_hoisted_6=["innerHTML"],_hoisted_7={class:"flex flex-col space-y-2"},_hoisted_8={class:"flex items-center gap-2"},_hoisted_9={class:"text-xs text-gray-500"},_hoisted_10={class:"flex flex-col space-y-2"},_hoisted_11={key:0,class:"text-red-500 text-sm flex items-center"};var _sfc_main$1=defineComponent({__name:"KbEditorLoginView",setup(o){const{serverUrl:e,buildTokenKey:n}=ServerInfoContext.useContext(),a=ref(""),s=ref(void 0),{kbs:l,refreshKbList:c}=KbInfoContext.useContext(),d=ref("invalidURL"),u=ref("idle"),{toast:f}=useToast(),p=useDebounceFn(async()=>{const v=e.value;if(!z$1.string().url().safeParse(e.value).success){console.log("URL 格式不正确"),d.value="invalidURL";return}d.value="connecting";const M=await ping({});v===e.value&&(M.success?(d.value="connSuccess",_()):d.value="connFailed")}),_=(v=!1)=>{const k=e.value;c(k,()=>{if(k===e.value&&(Object.keys(l.value).length>0?s.value=Object.keys(l.value)[0]:d.value="noKbServer",v)){const x=Object.keys(l.value).length;f({title:"刷新知识库列表成功",description:`服务器 ${e.value} 上有 ${x} 个知识库`})}},()=>{d.value="connFailed"})},b=async()=>{if(!s.value)return;u.value="loggingIn";const v=await kbEditorLogin({location:s.value,password:a.value,serverUrl:e.value});if(v.success){u.value="loginSuccess";const k=n(e.value,s.value);localStorage.setItem(k,v.data.token),console.log("tokenKey",k,v.data.token,localStorage.getItem(k)),setTimeout(()=>{const x=encodeURIComponent(e.value),M=encodeURIComponent(s.value);router.push(`/kb/${x}/${M}`)},1e3)}else u.value=v.code===RESP_CODES.PASSWORD_INCORRECT?"loginFailed_InvalidPassword":"loginFailed_Unknown"};return(v,k)=>{const x=resolveComponent("router-link");return openBlock(),createBlock(unref(_sfc_main$2q),{class:"w-[400px] z-10"},{default:withCtx(()=>[createVNode(unref(_sfc_main$2m),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2l),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(v.$t("login.kbEditorLogin.title")),1)]),_:1}),createVNode(unref(_sfc_main$2o))]),_:1}),createVNode(unref(_sfc_main$2p),null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2,[createVNode(unref(_sfc_main$1k),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(v.$t("login.kbEditorLogin.serverUrlLabel")),1)]),_:1}),createBaseVNode("div",_hoisted_3,[createVNode(unref(_sfc_main$1$),{modelValue:unref(e),"onUpdate:modelValue":k[0]||(k[0]=M=>isRef(e)?e.value=M:null),placeholder:v.$t("login.kbEditorLogin.serverUrlPlaceholder"),onInput:unref(p)},null,8,["modelValue","placeholder","onInput"]),createBaseVNode("div",_hoisted_4,[["connSuccess","noKbServer"].includes(d.value)?(openBlock(),createBlock(unref(CircleCheck),{key:0,class:"size-4 text-green-600"})):d.value==="connecting"?(openBlock(),createBlock(unref(LoaderCircle),{key:1,class:"size-4 animate-spin text-gray-500"})):createCommentVNode("",!0)])]),unref(e).length>0&&!["connSuccess","connecting","noKbServer"].includes(d.value)?(openBlock(),createElementBlock("div",_hoisted_5,[createVNode(unref(X),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(v.$t(`login.kbEditorLogin.serverStatus.${d.value}`)),1)])):createCommentVNode("",!0),d.value==="noKbServer"?(openBlock(),createElementBlock("span",{key:1,class:"text-blue-500 text-sm",innerHTML:v.$t("login.kbEditorLogin.noKbServerMsg")},null,8,_hoisted_6)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_7,[createVNode(unref(_sfc_main$1k),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(v.$t("login.kbEditorLogin.kbLocationLabel")),1)]),_:1}),createBaseVNode("div",_hoisted_8,[createVNode(unref(_sfc_main$1j),{disabled:d.value!=="connSuccess","model-value":s.value,"onUpdate:modelValue":k[1]||(k[1]=M=>s.value=M)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1d),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(s.value?unref(l)[s.value].name:"-"),1)]),_:1}),createVNode(unref(_sfc_main$1i),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.values(unref(l)),M=>(openBlock(),createBlock(unref(_sfc_main$1g),{key:M.location,value:M.location},{default:withCtx(()=>[createBaseVNode("div",null,[createTextVNode(toDisplayString$1(M.name)+" ",1),createBaseVNode("div",_hoisted_9,toDisplayString$1(M.location),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["disabled","model-value"]),createVNode(unref(_sfc_main$2r),{variant:"outline",disabled:d.value!=="connSuccess",onClick:k[2]||(k[2]=M=>_(!0)),class:"size-10 p-2",tooltip:v.$t("login.kbEditorLogin.refreshKbListTooltip")},{default:withCtx(()=>[createVNode(unref(RefreshCcw),{class:"size-4"})]),_:1},8,["disabled","tooltip"])])]),createBaseVNode("div",_hoisted_10,[createVNode(unref(_sfc_main$1k),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(v.$t("login.kbEditorLogin.passwordLabel")),1)]),_:1}),createVNode(unref(_sfc_main$1$),{modelValue:a.value,"onUpdate:modelValue":k[3]||(k[3]=M=>a.value=M),type:"password",disabled:d.value!=="connSuccess"||!s.value,onInput:k[4]||(k[4]=M=>u.value="idle")},null,8,["modelValue","disabled"]),u.value==="loginFailed_InvalidPassword"||u.value==="loginFailed_Unknown"?(openBlock(),createElementBlock("div",_hoisted_11,[createVNode(unref(X),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(v.$t(`login.kbEditorLogin.loginStatus.${u.value}`)),1)])):createCommentVNode("",!0)])])]),_:1}),createVNode(unref(_sfc_main$2n),{class:"flex justify-center gap-8"},{default:withCtx(()=>[createVNode(x,{to:"/login/admin",class:"text-sm text-muted-foreground hover:text-foreground transition-colors duration-300"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(v.$t("login.kbEditorLogin.adminLoginBtn")),1)]),_:1}),createVNode(unref(_sfc_main$2r),{class:"min-w-[100px]",onClick:b,disabled:d.value!=="connSuccess"||!s.value},{default:withCtx(()=>[u.value==="loggingIn"?(openBlock(),createBlock(unref(LoaderCircle),{key:0,class:"size-4 mr-2 animate-spin"})):u.value==="loginSuccess"?(openBlock(),createBlock(unref(Check),{key:1,class:"size-4 mr-2"})):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(v.$t(`login.kbEditorLogin.loginBtn.${u.value}`)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})}}});const _sfc_main={},_hoisted_1={class:"absolute w-full h-full flex items-center justify-center"};function _sfc_render(o,e){const n=resolveComponent("router-view");return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(n)])}var LoginView=_export_sfc(_sfc_main,[["render",_sfc_render]]);const router=createRouter({history:createWebHashHistory(),routes:[{path:"/",redirect:"/login/kb-editor"},{path:"/login",component:LoginView,children:[{path:"kb-editor",component:_sfc_main$1},{path:"admin",component:_sfc_main$2}]},{path:"/admin-dashboard/:serverUrl",component:_sfc_main$1Z,beforeEnter:(o,e,n)=>{const a=globalThis.getServerInfoContext(),s=a?.tokenPayload?.value,l=o.params.serverUrl;!s||s.role!=="admin"||s.serverUrl!==l?(a?.logout(),n({path:"/login/admin"})):n()}},{path:"/kb/:serverUrl/:location/:rootBlockId?/:focusedBlockId?",component:_sfc_main$3,beforeEnter:(o,e,n)=>{const{extractTokenPayload:a,buildTokenKey:s,logout:l}=globalThis.getServerInfoContext(),c=o.params.serverUrl,d=o.params.location,u=s(c,d),f=localStorage.getItem(u),p=f?a(f):null;!p||p.role!=="kb-editor"||p.serverUrl!==c||p.location!==d?(l(),n({path:"/login/kb-editor"})):n()}}]}),normalizeServerUrl=o=>!o.startsWith("http://")&&!o.startsWith("https://")?`https://${o}`:o,ServerInfoContext=createContext(()=>{const o=ref(""),e=useRoute(),n=useRouterParams(),a=computed(()=>{const v=n.value?.serverUrl,k=n.value?.location;return!v||!k?null:`${v}-${k}-`}),s=(v,k)=>`${v}-${k}-token`,l=computed(()=>s(n.value.serverUrl,n.value.location)),c=useLocalStorage2(l,""),d=v=>{const x=v.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),M=decodeURIComponent(window.atob(x).split("").map(function(L){return"%"+("00"+L.charCodeAt(0).toString(16)).slice(-2)}).join("")),E=z$1.string().transform(L=>{try{return JSON.parse(L)}catch{return null}}).pipe(JwtPayloadSchema).safeParse(M);return E.success?E.data:null},u=computed(()=>c.value?d(c.value):null),f=()=>{c.value="",o.value="",router.replace("/login/admin")};watch(()=>e.params.serverUrl,v=>{v!=null?o.value=v:o.value=""},{immediate:!0});const p=computed(()=>axios.create({baseURL:normalizeServerUrl(o.value),timeout:1e4,headers:{Authorization:c.value}})),_=()=>p.value,b={token:c,buildTokenKey:s,tokenPayload:u,extractTokenPayload:d,kbPrefix:a,serverUrl:o,getAxios:_,logout:f};return globalThis.getAxios=_,globalThis.getServerInfoContext=()=>b,b}),MainTreeContext=createContext(()=>{const{kbPrefix:o}=ServerInfoContext.useContext(),e="main.rootBlockId",n=computed(()=>`${o.value}${e}`);return{mainRootBlockId:useLocalStorage2(n,"root")}}),INTERNAL_BLOCK_PARENT_ID="_internal";z$1.any().pipe(z$1.union([z$1.object({type:z$1.literal("ui"),changeSources:z$1.array(z$1.string()).optional()}),z$1.object({type:z$1.literal("local")}),z$1.object({type:z$1.literal("remote")})]));const cloneBlock=o=>o?{type:o.type,id:o.id,parentId:o.parentId,parentRef:o.parentRef,childrenIds:[...o.childrenIds],childrenRefs:[...o.childrenRefs],fold:o.fold,deleted:o.deleted,content:JSON.parse(JSON.stringify(o.content)),ctext:o.ctext,metadata:JSON.parse(JSON.stringify(o.metadata)),mtext:o.mtext,olinks:[...o.olinks],boosting:o.boosting,acturalSrc:o.acturalSrc,...o.type=="normalBlock"?{docId:o.docId}:{},...o.type=="mirrorBlock"?{src:o.src}:{},...o.type=="virtualBlock"?{src:o.src,childrenCreated:o.childrenCreated}:{},origin:o.origin}:null,createBlocksManager=o=>{const e=useEventBus(),n=new Map,a=new Map,s=new Map,l=new Map,c=new Set,{lastFocusedBlockTree:d,lastFocusedDiId:u}=LastFocusContext.useContext(),{mainRootBlockId:f}=MainTreeContext.useContext(),{getBlockTree:p}=BlockTreeContext.useContext(),_=ref(!1),b=ref(new Map);o.on("docSynced",({docId:ke,hasSyncEvent:Ee})=>{Ee?b.value.set(ke,"waitForEventProcessing"):(b.value.set(ke,"synced"),_.value==!1&&ke==BLOCK_INFO_DOC_NAME&&(_.value=!0))}),o.on("disconnected",()=>{for(const ke of b.value.keys())b.value.set(ke,"disconnected");_.value=!1});const v={getBlockInfo:new Map,getBlockData:new Map},k=ke=>{let Ee=n.get(ke);return Ee||(Ee=shallowRef(null),n.set(ke,Ee)),Ee},x=(ke,Ee=!0)=>{const Oe=k(ke);return Oe.value?Ee?cloneBlock(Oe.value):Oe.value:null},M=ke=>{const Ee=x(ke);if(!Ee||Ee.parentId=="null")return null;const Oe=x(Ee.acturalSrc);return Oe||null},E=ke=>{let Ee=k(ke);if(!Ee)return[];const Oe=[];for(;Ee.value&&(Oe.push(Ee.value),Ee.value.id!="root");){const Ve=Ee.value.parentRef;Ve.value?Ee=Ve:Ee=k(Ee.value.parentId)}return Oe},L=ke=>E(ke).length-1,V=({onEachBlock:ke,onMissingBlock:Ee,rootBlockId:Oe,afterLeavingChildrens:Ve,rootBlockLevel:Ne,nonFoldOnly:dt,includeSelf:pe,ignore:fe})=>{if(dt??=!0,pe??=!0,Ne==null){const ue=E(Oe);if(!ue){console.error("[blocksManager] cannot get path of ",Oe);return}Ne=ue.length-1}const me=(ue,we)=>{const _e=fe?.(ue,we);if(_e!=="ignore-self-and-descendants"&&((pe||ue.id!=Oe)&&ke(ue,we),_e!=="ignore-descendants"&&!(_e!=="keep-self-and-descendants"&&dt&&ue.fold)&&typeof ue.childrenIds!="string")){for(let Be=0;Be<ue.childrenIds.length;Be++){const Ge=ue.childrenIds[Be],ze=ue.childrenRefs[Be];if(ze.value){const We=toRaw(ze.value);me(We,we+1)}else a.set(Ge,ue.id),Ee?.(Ge,ue.id,we+1)}Ve&&Ve(ue,we)}},te=x(Oe);if(!te){console.error("[blocksManager] Cannot find root block",Oe);return}me(te,Ne)},B=({onEachBlock:ke,rootBlockId:Ee,afterLeavingChildrens:Oe,rootBlockLevel:Ve,nonFoldOnly:Ne,includeSelf:dt,ignore:pe})=>{if(Ne??=!0,dt??=!0,Ve==null){const te=E(Ee);if(!te){console.error("[blocksManager] cannot get path of ",Ee);return}Ve=te.length-1}const fe=(te,ue)=>{const we=pe?.(te,ue);if(we!=="ignore-self-and-descendants"&&((dt||te.id!=Ee)&&ke(te,ue),we!=="ignore-descendants"&&!(we!=="keep-self-and-descendants"&&Ne&&te.fold)&&typeof te.childrenIds!="string")){for(const _e of te.childrenRefs)if(_e.value&&!_e.value.deleted){const Be=toRaw(_e.value);fe(Be,ue+1)}Oe&&Oe(te,ue)}},me=x(Ee);if(!me){console.error("[blocksManager] Cannot find root block",Ee);return}fe(me,Ve)},F=(ke,Ee)=>{if(ke[0]===BLOCK_CONTENT_TYPES.TEXT){const Ve=getPmSchema({getBlockRef:k}),Ne=Node$1.fromJSON(Ve,ke[1]),dt=[];return Ne.descendants(pe=>{!Ee&&pe.type.name=="blockRef_v2"&&pe.attrs.tag||dt.push(pe.textContent)}),dt.join("")}else return ke[0]==BLOCK_CONTENT_TYPES.CODE?`${ke[1]} (${ke[2]})`:ke[0]==BLOCK_CONTENT_TYPES.MATH?ke[1]:(console.warn("[blocksManager] unsupported block content type"),"")},j=ke=>{const Ee=Ne=>/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(Ne),Oe=[],Ve=["specs","status","no","ncols","paragraph"];for(const[Ne,dt]of Object.entries(ke??{})){if(Ve.includes(Ne))continue;Oe.push(Ne),Oe.push(": ");let pe;if(typeof dt=="string")pe=[dt];else if(Array.isArray(dt))pe=dt;else continue;for(const fe of pe){if(Ee(fe)){const me=x(fe);if(!me)continue;const te=F(me.content);Oe.push(te)}else Oe.push(fe);Oe.push(", ")}Oe.pop(),Oe.push("; ")}return Oe.pop(),Oe.join("")},I=(ke,Ee="both")=>{const Ve=getPmSchema({getBlockRef:k}),Ne=Node$1.fromJSON(Ve,ke),dt=[];return Ne.descendants(pe=>{pe.isAtom&&pe.type.name=="blockRef_v2"&&(Ee==="blockRef"&&!pe.attrs.tag||Ee==="tag"&&pe.attrs.tag||Ee==="both")&&dt.push(pe.attrs.toBlockId)}),dt},U=async ke=>{const Ee=v.getBlockInfo.get(ke);Ee&&await Ee.promise;let Oe=s.get(ke)??null;if(!Oe){let Ve,Ne;const dt=new Promise((pe,fe)=>{Ve=pe,Ne=fe});v.getBlockInfo.set(ke,{promise:dt,resolve:Ve,reject:Ne,desc:"getBlockInfo of "+ke}),await dt}return Oe=s.get(ke)??null,Oe},W=async(ke,Ee)=>{const Oe=v.getBlockData.get(ke);Oe&&await Oe.promise;let Ve;const Ne=x(ke);if(Ne?Ve=[Ne.content,Ne.metadata]:Ve=l.get(ke)??null,!Ve){c.has(Ee)||(o.loadDataDoc(Ee),c.add(Ee));let dt,pe;const fe=new Promise((me,te)=>{dt=me,pe=te});v.getBlockData.set(ke,{promise:fe,resolve:dt,reject:pe,desc:"getBlockData of "+ke}),await fe}return Ve=l.get(ke)??null,Ve};o.on("blockDataMapChange",({docId:ke,origin:Ee,changes:Oe})=>{const Ve=oe(Ee);if(Ee.type!="ui"){console.debug("[blocksManager] in app, blockDataMapChange",dayjs().valueOf(),Oe);for(const Ne of Oe)if(Ne.op=="upsert"){if(Ne.value==null){console.log("[blocksManager] invalid change (no value), ignored!");continue}l.set(Ne.key,Ne.value);const dt=v.getBlockData.get(Ne.key);dt&&(dt.resolve(Ne.value),v.getBlockData.delete(Ne.key));const pe=k(Ne.key);if(pe.value!=null&&pe.value.type==="normalBlock"){const[fe,me]=Ne.value;if(fe==null){console.error("[blocksManager] blockDataMap changed, but normal block doesn't have content",Ne.key);continue}Ve.updateBlock({...pe.value,content:fe,metadata:me})}}else Ne.op=="delete"&&l.delete(Ne.key);Ve.patches.length>0&&Ve.commit(),b.value.set(`${BLOCK_DATA_DOC_NAME_PREFIX}${ke}`,"synced")}}),o.on("blockInfoMapChange",({origin:ke,changes:Ee})=>{const Oe=oe(ke);if(ke.type==="ui")return;console.debug("[blocksManager] in app, blockInfoMapChange",dayjs().valueOf(),Ee);const Ve=[];for(const Ne of Ee)if(Ne.op=="delete")s.delete(Ne.key),n.get(Ne.key)&&(console.debug("[blocksManager] Deleting block from loadedBlocks:",Ne.key),Oe.deleteBlock(Ne.key));else if(Ne.op=="upsert"){if(Ne.value==null){console.log("[blocksManager] invalid change (no value), ignored!");continue}const[dt,pe,fe,me,te]=Ne.value,{type:ue,fold:we}=extractBlockStatus(dt);if(s.set(Ne.key,Ne.value),ue=="normalBlock"){if(me==null||!Ne.value)continue;const _e=(async()=>{const Be=await W(Ne.key,me);if(!Be){console.error("[blocksManager] Cannot find block data for block",Ne.key);return}Oe.addBlock({type:"normalBlock",id:Ne.key,parentId:pe,childrenIds:fe,fold:we,content:Be[0],metadata:Be[1],docId:me})})();Ve.push(_e)}else{if(!te||!Ne.value)continue;const _e=(async()=>{const Be=await U(te);if(!Be){console.error("[blocksManager] Cannot find block info for block",te);return}const[Ge,ze,We,ee]=Be,{type:re,fold:Te}=extractBlockStatus(Ge);if(re=="normalBlock"){if(ee==null){console.error("[blocksManager] Src doc id is null, this should not happen",Ne.key);return}if(console.debug("[blocksManager] getBlockDataOrWait",te,ee),!await W(te,ee)){console.error("[blocksManager] Cannot find block data for block",te);return}Oe.addBlock({type:ue,id:Ne.key,parentId:pe,childrenIds:fe,fold:we,src:te,...ue==="virtualBlock"?{childrenCreated:We.length==fe.length}:{}})}else{console.error("[blocksManager] Src type must be normalBlock, but got",re);return}})();Ve.push(_e)}}Promise.all(Ve).then(()=>{console.debug("[blocksManager] in app, all resolved",dayjs().valueOf()),Oe.commit(),b.value.set(BLOCK_INFO_DOC_NAME,"synced"),_.value=!0,console.debug("[blocksManager] in app, transaction commit",dayjs().valueOf())})});const K=async()=>{const ke=nanoid(),Ee=getPmSchema({getBlockRef:k});oe({type:"ui"}).addBlock({type:"normalBlock",id:ke,fold:!1,parentId:"root",childrenIds:[],content:plainTextToTextContent("This is a test block",Ee),metadata:{}}).addBlock({type:"normalBlock",id:"root",fold:!1,parentId:"root",childrenIds:[ke],content:plainTextToTextContent("\uD83D\uDC4B Welcome to Next Outliner!",Ee),metadata:{}}).commit()},G=()=>k("root"),Z=()=>{n.clear(),v.getBlockInfo.clear(),v.getBlockData.clear(),e.emit("blocksDestroy")},{createBlockTransaction:oe,addBlock:Y,updateBlock:se,deleteBlock:le}=useBlockTransaction({blocks:n,yjsLayer:o,latestBlockInfos:s,latestBlockDatas:l,getBlockRef:k,getCtext:F,getMtext:j,getOlinks:I,mainRootBlockId:f,lastFocusedBlockTree:d,lastFocusedDiId:u}),{undo:ce,redo:de,addUndoPoint:ge,clearUndoRedoHistory:qe}=createUndoManager({createBlockTransaction:oe,mainRootBlockId:f,getBlockTree:p});return{loadedBlocks:n,latestBlockInfos:s,latestBlockDatas:l,pendingTasks:v,missingBlockParents:a,synced:_,getBlock:x,getBlockRef:k,getRootBlockRef:G,getBlockPath:E,getBlockLevel:L,forDescendants:B,forDescendantsWithMissingBlock:V,createBlockTransaction:oe,addBlock:Y,updateBlock:se,deleteBlock:le,destroy:Z,undo:ce,redo:de,getCtext:F,getMtext:j,getOlinks:I,getSrcBlock:M,createNewTree:K,addUndoPoint:ge,clearUndoRedoHistory:qe}},map=(o,e)=>{const n=[];for(const a in o)n.push(e(o[a],a));return n},encodeQueryParams=o=>map(o,(e,n)=>`${encodeURIComponent(n)}=${encodeURIComponent(e)}`).join("&");class WebsocketClientConnection{ws;constructor(e){this.ws=e}send(e){try{this.ws.send(e)}catch{this.close()}}close(){this.ws.close()}onMessage(e){this.ws.onmessage=n=>{n.data.arrayBuffer().then(a=>{e(new Uint8Array(a))})}}onClose(e){this.ws.onclose=e}onError(e){this.ws.onerror=e}onOpen(e){this.ws.onopen=e}}class WebsocketClientNetwork{params;protocol;constructor(e,n){this.params=e,this.protocol=n}connect(e,n){const a=encodeQueryParams(this.params),s=e+(a.length===0?"":"?"+a),l=new WebSocket(s,this.protocol);return new WebsocketClientConnection(l)}}const floor=Math.floor,min=(o,e)=>o<e?o:e,max=(o,e)=>o>e?o:e,BIT8=128,BITS7=127,MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER,_encodeUtf8Polyfill=o=>{const e=unescape(encodeURIComponent(o)),n=e.length,a=new Uint8Array(n);for(let s=0;s<n;s++)a[s]=e.codePointAt(s);return a},utf8TextEncoder=typeof TextEncoder<"u"?new TextEncoder:null,_encodeUtf8Native=o=>utf8TextEncoder.encode(o),encodeUtf8=utf8TextEncoder?_encodeUtf8Native:_encodeUtf8Polyfill;let utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});utf8TextDecoder&&utf8TextDecoder.decode(new Uint8Array).length===1&&(utf8TextDecoder=null);class Encoder{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const createEncoder=()=>new Encoder,length=o=>{let e=o.cpos;for(let n=0;n<o.bufs.length;n++)e+=o.bufs[n].length;return e},toUint8Array=o=>{const e=new Uint8Array(length(o));let n=0;for(let a=0;a<o.bufs.length;a++){const s=o.bufs[a];e.set(s,n),n+=s.length}return e.set(new Uint8Array(o.cbuf.buffer,0,o.cpos),n),e},write=(o,e)=>{const n=o.cbuf.length;o.cpos===n&&(o.bufs.push(o.cbuf),o.cbuf=new Uint8Array(n*2),o.cpos=0),o.cbuf[o.cpos++]=e},writeUint8=write,writeVarUint=(o,e)=>{for(;e>BITS7;)write(o,BIT8|BITS7&e),e=floor(e/128);write(o,BITS7&e)},_strBuffer=new Uint8Array(3e4),_maxStrBSize=_strBuffer.length/3,_writeVarStringNative=(o,e)=>{if(e.length<_maxStrBSize){const n=utf8TextEncoder.encodeInto(e,_strBuffer).written||0;writeVarUint(o,n);for(let a=0;a<n;a++)write(o,_strBuffer[a])}else writeVarUint8Array(o,encodeUtf8(e))},_writeVarStringPolyfill=(o,e)=>{const n=unescape(encodeURIComponent(e)),a=n.length;writeVarUint(o,a);for(let s=0;s<a;s++)write(o,n.codePointAt(s))},writeVarString=utf8TextEncoder&&utf8TextEncoder.encodeInto?_writeVarStringNative:_writeVarStringPolyfill,writeUint8Array=(o,e)=>{const n=o.cbuf.length,a=o.cpos,s=min(n-a,e.length),l=e.length-s;o.cbuf.set(e.subarray(0,s),a),o.cpos+=s,l>0&&(o.bufs.push(o.cbuf),o.cbuf=new Uint8Array(max(n*2,l)),o.cbuf.set(e.subarray(s)),o.cpos=l)},writeVarUint8Array=(o,e)=>{writeVarUint(o,e.byteLength),writeUint8Array(o,e)},create=o=>new Error(o),errorUnexpectedEndOfArray=create("Unexpected end of array"),errorIntegerOutOfRange=create("Integer out of Range");class Decoder{constructor(e){this.arr=e,this.pos=0}}const createDecoder=o=>new Decoder(o),readUint8Array=(o,e)=>{const n=new Uint8Array(o.arr.buffer,o.pos+o.arr.byteOffset,e);return o.pos+=e,n},readVarUint8Array=o=>readUint8Array(o,readVarUint(o)),readUint8=o=>o.arr[o.pos++],readVarUint=o=>{let e=0,n=1;const a=o.arr.length;for(;o.pos<a;){const s=o.arr[o.pos++];if(e=e+(s&BITS7)*n,n*=128,s<BIT8)return e;if(e>MAX_SAFE_INTEGER)throw errorIntegerOutOfRange}throw errorUnexpectedEndOfArray},_readVarStringPolyfill=o=>{let e=readVarUint(o);if(e===0)return"";{let n=String.fromCodePoint(readUint8(o));if(--e<100)for(;e--;)n+=String.fromCodePoint(readUint8(o));else for(;e>0;){const a=e<1e4?e:1e4,s=o.arr.subarray(o.pos,o.pos+a);o.pos+=a,n+=String.fromCodePoint.apply(null,s),e-=a}return decodeURIComponent(escape(n))}},_readVarStringNative=o=>utf8TextDecoder.decode(readVarUint8Array(o)),readVarString=utf8TextDecoder?_readVarStringNative:_readVarStringPolyfill,MessageTypes={canSync:0,startSync:1,postConflict:2,postUpdate:3},writeCanSyncMessage=(o,e)=>{const n=e.export({mode:"snapshot"}),a=createEncoder();return writeUint8(a,MessageTypes.canSync),writeVarString(a,o),writeVarUint8Array(a,n),toUint8Array(a)},readCanSyncMessage=o=>{const e=readVarString(o),n=readVarUint8Array(o);return{type:MessageTypes.canSync,docId:e,snapshot:n}},readStartSyncMessage=o=>{const e=readVarString(o),n=readVarUint8Array(o),a=readVarUint8Array(o);return{type:MessageTypes.startSync,docId:e,vv:n,updates:a}},readPostConflictMessage=o=>{const e=readVarString(o),n=readVarUint8Array(o);return{type:MessageTypes.postConflict,docId:e,snapshot:n}},writePostUpdateMessage=(o,e)=>{const n=createEncoder();return writeUint8(n,MessageTypes.postUpdate),writeVarString(n,o),writeVarUint8Array(n,e),toUint8Array(n)},readPostUpdateMessage=o=>{const e=readVarString(o),n=readVarUint8Array(o);return{type:MessageTypes.postUpdate,docId:e,updates:n}},messageHandlers={[MessageTypes.canSync]:readCanSyncMessage,[MessageTypes.startSync]:readStartSyncMessage,[MessageTypes.postConflict]:readPostConflictMessage,[MessageTypes.postUpdate]:readPostUpdateMessage},readMessage=o=>{const e=createDecoder(o),n=readUint8(e),a=messageHandlers[n];if(!a)throw new Error(`Unknown message type: ${n}`);return a(e)};class LoroWebsocketSynchronizer{connection;url;protocol;network;wsConnected;wsConnecting;docs;shouldReconnect;unsuccessfulReconnects;maxBackoffTime;whenReady;whenReadyResolve;eventBus;constructor(e,n,a){this.connection=null,this.url=e,this.protocol=a,this.network=n,this.docs=new Map,this.wsConnected=!1,this.wsConnecting=!1,this.shouldReconnect=!1,this.unsuccessfulReconnects=0,this.maxBackoffTime=2500;const{promise:s,resolve:l}=createPromise();this.whenReady=s,this.whenReadyResolve=l,this.eventBus=mitt$1()}_handleStartSyncMessage=(e,n)=>{console.info(`[wsSynchronizer] Received startSyncMessage, docId: ${e.docId}`);const a=e.doc;a.import(n.updates),console.info(`[wsSynchronizer] Doc ${e.docId} after import updates:`,a.toJSON());const s=VersionVector.decode(n.vv);e.lastSentVersion=s;const l=a.export({mode:"update",from:s});if(l.length>0){const c=writePostUpdateMessage(n.docId,l);this._sendMessage(c),console.info(`[wsSynchronizer] Replied with postUpdateMessage, docId: ${e.docId}`)}e.lastEB=null,queueMicrotask(()=>{const c=e.lastEB!==null;this.eventBus.emit("docSynced",{docId:e.docId,hasSyncEvent:c})})};_handlePostConflictMessage=(e,n)=>{throw new Error("PostConflictMessage handling not implemented")};_handlePostUpdateMessage=(e,n)=>{const a=n.doc;console.info(`[wsSynchronizer] Received postUpdateMessage, docId: ${n.docId}`),a.import(e.updates),console.info(`[wsSynchronizer] Received postUpdateMessage, doc ${n.docId} after import updates:`,a.toJSON()),n.lastEB=null,queueMicrotask(()=>{const s=n.lastEB!==null;this.eventBus.emit("docSynced",{docId:n.docId,hasSyncEvent:s})})};_freeDocs(){for(const e of this.docs.values())e.doc.free();this.docs.clear()}_setupConnection(){this.shouldReconnect&&this.connection===null&&(this.connection=this.network.connect(this.url,this.protocol),this.connection.onOpen(()=>{console.info("[wsSynchronizer] Connection opened"),this.wsConnecting=!1,this.wsConnected=!0,this.unsuccessfulReconnects=0,this.whenReadyResolve()}),this.connection.onMessage(e=>{try{const n=readMessage(e),a=this.docs.get(n.docId);if(!a){console.error(`[wsSynchronizer] Doc not found: ${n.docId}`);return}n.type===MessageTypes.startSync?this._handleStartSyncMessage(a,n):n.type===MessageTypes.postConflict?this._handlePostConflictMessage(n,a):n.type===MessageTypes.postUpdate?this._handlePostUpdateMessage(n,a):console.error(`[wsSynchronizer] Unknown message type: ${n.type}`)}catch(n){console.error("[wsSynchronizer] Error handling message:",n)}}),this.connection.onError(e=>{console.error("[wsSynchronizer] Connection error:",e)}),this.connection.onClose(()=>{if(console.info("[wsSynchronizer] Connection closed"),this.eventBus.emit("disconnected"),this.connection=null,this.wsConnecting=!1,this.wsConnected){this.wsConnected=!1,this._freeDocs();const{promise:e,resolve:n}=createPromise();this.whenReady=e,this.whenReadyResolve=n}else this.unsuccessfulReconnects++;setTimeout(()=>this._setupConnection(),Math.min(Math.pow(2,this.unsuccessfulReconnects)*100,this.maxBackoffTime))}),this.wsConnecting=!0,this.wsConnected=!1,this._freeDocs())}_sendMessage(e){const n=this.connection;if(!n){console.error("[wsSynchronizer] Connection not established, cannot send message");return}n.send(e)}_sendNewUpdatesToServer(e){const n=this.docs.get(e);if(!n){console.error(`[wsSynchronizer] Doc ${e} not found`);return}const a=n.doc.export({mode:"update",from:n.lastSentVersion});if(a.length===0)return;n.lastSentVersion=n.doc.version();const s=writePostUpdateMessage(e,a);this._sendMessage(s),console.info(`[wsSynchronizer] Sent postUpdateMessage, docId: ${e}`)}connect(){this.shouldReconnect=!0,!this.wsConnected&&this.connection===null&&this._setupConnection()}disconnect(){this.shouldReconnect=!1,this.connection!==null&&(this.connection.close(),this.connection=null)}destroy(){this.disconnect()}async addLoroDoc(e,n){if(this.docs.has(e)){console.error(`[wsSynchronizer] Doc already added, do nothing, docId: ${e}`);return}console.info(`[wsSynchronizer] Add new doc, docId: ${e}`);const a={docId:e,doc:n,lastSentVersion:void 0,lastEB:null,subscriptions:[]},s=n.subscribe(l=>{console.info(`[wsSynchronizer] New event on doc ${e}:`,l),l.by==="local"&&this._sendNewUpdatesToServer(e),a.lastEB=l});a.subscriptions.push(s),this.docs.set(e,a),this.whenReady.then(()=>{const l=this.docs.get(e)?.doc;if(!l)return;const c=writeCanSyncMessage(e,l);this._sendMessage(c),console.info(`[wsSynchronizer] Sent canSyncMessage, docId: ${e}`)})}on(e,n){this.eventBus.on(e,n)}off(e,n){this.eventBus.off(e,n)}}const postTypedMessage=o=>{postMessage(o)};let serverUrl,location$1,token,wsSynchronizer,baseDoc,blockInfoMap,blockDataDocs;const normalizeWsUrl=o=>o.startsWith("ws://")||o.startsWith("wss://")?o:`wss://${o}`;addEventListener("message",o=>{const e=o.data;switch(e.type){case"connect":connect(e.serverUrl,e.location,e.token);break;case"disconnect":disconnect();break;case"loadDataDoc":loadDataDoc(e.docId);break;case"unloadDataDoc":unloadDataDoc(e.docId);break;case"postYjsLayerTransaction":postSyncLayerTransaction(e.transaction);break;case"_printBlockInfo":console.debug("[syncWorker] _printBlockInfo",blockInfoMap?.get(e.blockId));break;case"_printBlockData":const a=blockDataDocs?.get(0)?.getMap(DATA_MAP_NAME);console.debug("[syncWorker] _printBlockData",a?.get(e.blockId));break}});const disconnect=()=>{wsSynchronizer?.disconnect(),wsSynchronizer?.destroy(),baseDoc=void 0,blockInfoMap=void 0,blockDataDocs=void 0,wsSynchronizer=void 0},connect=(o,e,n)=>{disconnect(),console.debug("[syncWorker] connect",o,e,n),serverUrl=o,location$1=e,token=n,baseDoc=new LoroDoc,blockInfoMap=baseDoc.getMap(DATA_MAP_NAME),blockDataDocs=new Map,blockInfoMap.subscribe(a=>{const s={type:a.by==="local"?"ui":"remote"},l=[];for(const c of a.events)if(c.diff.type==="map")for(const[d,u]of Object.entries(c.diff.updated))u==null?l.push({op:"delete",key:d}):l.push({op:"upsert",key:d,value:u});postTypedMessage({type:"blockInfoMapChange",origin:s,changes:l})}),(async()=>{const a=new WebsocketClientNetwork({location:location$1,authorization:token});wsSynchronizer=new LoroWebsocketSynchronizer(normalizeWsUrl(serverUrl),a),wsSynchronizer.connect(),wsSynchronizer.addLoroDoc(BLOCK_INFO_DOC_NAME,baseDoc),wsSynchronizer.on("docSynced",({docId:s,hasSyncEvent:l})=>{console.info("[syncWorker] wsSynchronizer docSynced, docId:",s,"hasSyncEvent:",l),postTypedMessage({type:"docSynced",docId:s,hasSyncEvent:l})}),wsSynchronizer.on("disconnected",()=>{console.info("[syncWorker] wsSynchronizer disconnected"),postTypedMessage({type:"disconnected"})})})()},loadDataDoc=o=>{if(!blockDataDocs){console.error("[syncWorker] 数据文档未初始化，先 connect 以初始化");return}if(blockDataDocs.has(o))return blockDataDocs.get(o);const e=new LoroDoc,n=e.getMap(DATA_MAP_NAME);return blockDataDocs.set(o,e),postTypedMessage({type:"dataDocCreated",dataDocId:o}),n.subscribe(a=>{const s={type:a.by==="local"?"ui":"remote"},l=[];for(const c of a.events)if(c.diff.type==="map")for(const[d,u]of Object.entries(c.diff.updated))u==null?l.push({op:"delete",key:d}):l.push({op:"upsert",key:d,value:u});postTypedMessage({type:"blockDataMapChange",dataDocId:o,origin:s,changes:l})}),(async()=>(console.debug("[syncWorker] dataDoc 加入 wsSynchronizer，开始同步"),await timeout(1e3),wsSynchronizer?.addLoroDoc(BLOCK_DATA_DOC_NAME_PREFIX+o,e)))(),e},unloadDataDoc=o=>{console.error("[syncWorker] Not implemented")},postSyncLayerTransaction=o=>{if(!baseDoc||!blockInfoMap){console.error("[syncWorker] baseDoc or blockInfoMap is null, cannot commit");return}if(!blockInfoMap)return;for(const n of o.patches)n.op==="upsertBlockInfo"?blockInfoMap.set(n.blockId,n.blockInfo):n.op==="deleteBlockInfo"&&blockInfoMap.delete(n.blockId);console.log("[syncWorker] Commit blockInfoMap transaction"),baseDoc.commit();const e=new Map;for(const n of o.patches)if(n.op==="upsertBlockData"||n.op==="deleteBlockData"){const a=e.get(n.docId);a?a.push(n):e.set(n.docId,[n])}for(const[n,a]of e.entries()){const s=loadDataDoc(n);if(!s)continue;const l=s.getMap(DATA_MAP_NAME);for(const c of a)c.op==="upsertBlockData"?l.set(c.blockId,c.blockData):c.op==="deleteBlockData"&&l.delete(c.blockId);console.log("[syncWorker] Commit blockDataMap transaction, docId:",n),s.commit()}};postTypedMessage({type:"init"})})();export{languageDataProp as A,foldService as B,CompletionContext as C,LanguageDescription as D,EditorView as E,ParseContext as F,bracketMatchingHandle as G,DefaultBufferLength as H,IterMode as I,sublanguageProp as J,LRLanguage as L,NodeWeakMap as N,Parser$1 as P,Tag as T,LanguageSupport as a,ifNotIn as b,continuedIndent as c,completeFromList as d,syntaxTree as e,foldNodeProp as f,flatIndent as g,delimitedIndent as h,indentNodeProp as i,foldInside as j,snippetCompletion as k,EditorSelection as l,NodeType as m,NodeProp as n,NodeSet as o,parseMixed as p,Tree as q,countColumn as r,styleTags as s,tags as t,Prec as u,keymap as v,EditorState as w,Language as x,indentUnit as y,defineLanguageFacet as z,__tla};