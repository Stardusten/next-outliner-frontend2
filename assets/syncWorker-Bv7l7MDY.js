self.document={currentScript:{src:self.location.href}},function(){"use strict";var Wt=typeof document<"u"?document.currentScript:null;(async()=>{function ns(n){return new Promise(e=>setTimeout(e,n))}var rs=""+new URL("loro_wasm_bg-DV_qIX0O.wasm",Wt&&Wt.tagName.toUpperCase()==="SCRIPT"&&Wt.src||new URL("assets/syncWorker-Bv7l7MDY.js",document.baseURI).href).href,os=async(n={},e)=>{let t;if(e.startsWith("data:")){const o=e.replace(/^data:.*?base64,/,"");let r;if(typeof Buffer=="function"&&typeof Buffer.from=="function")r=Buffer.from(o,"base64");else if(typeof atob=="function"){const a=atob(o);r=new Uint8Array(a.length);for(let _=0;_<a.length;_++)r[_]=a.charCodeAt(_)}else throw new Error("Cannot decode base64-encoded data URL");t=await WebAssembly.instantiate(r,n)}else{const o=await fetch(e),r=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))t=await WebAssembly.instantiateStreaming(o,n);else{const a=await o.arrayBuffer();t=await WebAssembly.instantiate(a,n)}}return t.instance.exports};let s;function Jt(n){s=n}const F=new Array(128).fill(void 0);F.push(void 0,null,!0,!1);function f(n){return F[n]}let Ye=F.length;function ss(n){n<132||(F[n]=Ye,Ye=n)}function l(n){const e=f(n);return ss(n),e}const as=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let dn=new as("utf-8",{ignoreBOM:!0,fatal:!0});dn.decode();let St=null;function Fe(){return(St===null||St.byteLength===0)&&(St=new Uint8Array(s.memory.buffer)),St}function V(n,e){return n=n>>>0,dn.decode(Fe().subarray(n,n+e))}function p(n){Ye===F.length&&F.push(F.length+1);const e=Ye;return Ye=F[e],F[e]=n,e}let I=0;const is=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let Ct=new is("utf-8");const _s=typeof Ct.encodeInto=="function"?function(n,e){return Ct.encodeInto(n,e)}:function(n,e){const t=Ct.encode(n);return e.set(t),{read:n.length,written:t.length}};function L(n,e,t){if(t===void 0){const c=Ct.encode(n),u=e(c.length,1)>>>0;return Fe().subarray(u,u+c.length).set(c),I=c.length,u}let o=n.length,r=e(o,1)>>>0;const a=Fe();let _=0;for(;_<o;_++){const c=n.charCodeAt(_);if(c>127)break;a[r+_]=c}if(_!==o){_!==0&&(n=n.slice(_)),r=t(r,o,o=_+n.length*3,1)>>>0;const c=Fe().subarray(r+_,r+o),u=_s(n,c);_+=u.written,r=t(r,o,_,1)>>>0}return I=_,r}function Y(n){return n==null}let At=null;function i(){return(At===null||At.byteLength===0)&&(At=new Int32Array(s.memory.buffer)),At}let Ot=null;function cn(){return(Ot===null||Ot.byteLength===0)&&(Ot=new Float64Array(s.memory.buffer)),Ot}let Tt=null;function ds(){return(Tt===null||Tt.byteLength===0)&&(Tt=new BigInt64Array(s.memory.buffer)),Tt}function Kt(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const r=n.description;return r==null?"Symbol":`Symbol(${r})`}if(e=="function"){const r=n.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(n)){const r=n.length;let a="[";r>0&&(a+=Kt(n[0]));for(let _=1;_<r;_++)a+=", "+Kt(n[_]);return a+="]",a}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let o;if(t.length>1)o=t[1];else return toString.call(n);if(o=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:o}const ln=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>{s.__wbindgen_export_2.get(n.dtor)(n.a,n.b)});function un(n,e,t,o){const r={a:n,b:e,cnt:1,dtor:t},a=(..._)=>{r.cnt++;const c=r.a;r.a=0;try{return o(c,r.b,..._)}finally{--r.cnt===0?(s.__wbindgen_export_2.get(r.dtor)(c,r.b),ln.unregister(r)):r.a=c}};return a.original=r,ln.register(a,r,r),a}function cs(n,e,t){s.__wbindgen_export_3(n,e,p(t))}function ls(n,e){s.__wbindgen_export_4(n,e)}function be(n,e){return n=n>>>0,Fe().subarray(n/1,n/1+e)}function Te(n,e){const t=e(n.length*1,1)>>>0;return Fe().set(n,t/1),I=n.length,t}let It=null;function pn(){return(It===null||It.byteLength===0)&&(It=new Uint32Array(s.memory.buffer)),It}function oe(n,e){n=n>>>0;const t=pn().subarray(n/4,n/4+e),o=[];for(let r=0;r<t.length;r++)o.push(l(t[r]));return o}function us(){s.run()}function me(n,e){const t=e(n.length*4,4)>>>0,o=pn();for(let r=0;r<n.length;r++)o[t/4+r]=p(n[r]);return I=n.length,t}function ps(n){try{const _=s.__wbindgen_add_to_stack_pointer(-16),c=me(n,s.__wbindgen_export_0),u=I;s.encodeFrontiers(_,c,u);var e=i()[_/4+0],t=i()[_/4+1],o=i()[_/4+2],r=i()[_/4+3];if(r)throw l(o);var a=be(e,t).slice();return s.__wbindgen_export_5(e,t*1,1),a}finally{s.__wbindgen_add_to_stack_pointer(16)}}function gs(n){try{const r=s.__wbindgen_add_to_stack_pointer(-16),a=Te(n,s.__wbindgen_export_0),_=I;s.decodeFrontiers(r,a,_);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}function hs(){s.setDebug()}let W=128;function X(n){if(W==1)throw new Error("out of js stack");return F[--W]=n,W}function Ie(n,e){if(!(n instanceof e))throw new Error(`expected instance of ${e.name}`);return n.ptr}function fs(n,e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=Te(n,s.__wbindgen_export_0),c=I;s.decodeImportBlobMeta(a,_,c,e);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}function J(n,e){try{return n.apply(this,e)}catch(t){s.__wbindgen_export_6(p(t))}}function ws(n){return()=>{throw new Error(`${n} is not defined`)}}const bs=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_awarenesswasm_free(n>>>0));class ms{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,bs.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_awarenesswasm_free(e)}constructor(e,t){const o=s.awarenesswasm_new(p(e),t);return this.__wbg_ptr=o>>>0,this}encode(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.awarenesswasm_encode(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=be(t,o).slice();return s.__wbindgen_export_5(t,o*1,1),r}finally{s.__wbindgen_add_to_stack_pointer(16)}}encodeAll(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.awarenesswasm_encodeAll(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=be(e,t).slice();return s.__wbindgen_export_5(e,t*1,1),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}apply(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=Te(e,s.__wbindgen_export_0),c=I;s.awarenesswasm_apply(a,this.__wbg_ptr,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}setLocalState(e){s.awarenesswasm_setLocalState(this.__wbg_ptr,p(e))}peer(){const e=s.awarenesswasm_peer(this.__wbg_ptr);return l(e)}getAllStates(){const e=s.awarenesswasm_getAllStates(this.__wbg_ptr);return l(e)}getState(e){const t=s.awarenesswasm_getState(this.__wbg_ptr,p(e));return l(t)}getTimestamp(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.awarenesswasm_getTimestamp(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=cn()[r/8+1];return t===0?void 0:o}finally{s.__wbindgen_add_to_stack_pointer(16)}}removeOutdated(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.awarenesswasm_removeOutdated(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}length(){return s.awarenesswasm_length(this.__wbg_ptr)}isEmpty(){return s.awarenesswasm_isEmpty(this.__wbg_ptr)!==0}peers(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.awarenesswasm_peers(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}}const gn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_cursor_free(n>>>0));class ge{static __wrap(e){e=e>>>0;const t=Object.create(ge.prototype);return t.__wbg_ptr=e,gn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,gn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_cursor_free(e)}containerId(){const e=s.cursor_containerId(this.__wbg_ptr);return l(e)}pos(){const e=s.cursor_pos(this.__wbg_ptr);return l(e)}side(){const e=s.cursor_side(this.__wbg_ptr);return l(e)}encode(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.cursor_encode(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=be(e,t).slice();return s.__wbindgen_export_5(e,t*1,1),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}static decode(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=Te(e,s.__wbindgen_export_0),c=I;s.cursor_decode(a,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return ge.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}kind(){const e=s.cursor_kind(this.__wbg_ptr);return l(e)}}const hn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_lorocounter_free(n>>>0));class Xe{static __wrap(e){e=e>>>0;const t=Object.create(Xe.prototype);return t.__wbg_ptr=e,hn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,hn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_lorocounter_free(e)}constructor(){const e=s.lorocounter_new();return this.__wbg_ptr=e>>>0,this}increment(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorocounter_increment(r,this.__wbg_ptr,e);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}decrement(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorocounter_decrement(r,this.__wbg_ptr,e);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get value(){return s.lorocounter_value(this.__wbg_ptr)}subscribe(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorocounter_subscribe(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}parent(){const e=s.lorocounter_parent(this.__wbg_ptr);return l(e)}isAttached(){return s.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=s.lorocounter_getAttached(this.__wbg_ptr);return l(e)}getShallowValue(){return s.lorocounter_getShallowValue(this.__wbg_ptr)}}const fn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_lorodoc_free(n>>>0));class se{static __wrap(e){e=e>>>0;const t=Object.create(se.prototype);return t.__wbg_ptr=e,fn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,fn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_lorodoc_free(e)}constructor(){const e=s.lorodoc_new();return this.__wbg_ptr=e>>>0,this}setDetachedEditing(e){s.lorodoc_setDetachedEditing(this.__wbg_ptr,e)}isDetachedEditingEnabled(){return s.lorodoc_isDetachedEditingEnabled(this.__wbg_ptr)!==0}setRecordTimestamp(e){s.lorodoc_setRecordTimestamp(this.__wbg_ptr,e)}setChangeMergeInterval(e){s.lorodoc_setChangeMergeInterval(this.__wbg_ptr,e)}configTextStyle(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_configTextStyle(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}static fromSnapshot(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=Te(e,s.__wbindgen_export_0),c=I;s.lorodoc_fromSnapshot(a,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return se.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}attach(){s.lorodoc_attach(this.__wbg_ptr)}isDetached(){return s.lorodoc_isDetached(this.__wbg_ptr)!==0}detach(){s.lorodoc_detach(this.__wbg_ptr)}fork(){const e=s.lorodoc_fork(this.__wbg_ptr);return se.__wrap(e)}forkAt(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=me(e,s.__wbindgen_export_0),c=I;s.lorodoc_forkAt(a,this.__wbg_ptr,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return se.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}checkoutToLatest(){try{const o=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_checkoutToLatest(o,this.__wbg_ptr);var e=i()[o/4+0],t=i()[o/4+1];if(t)throw l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}travelChangeAncestors(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=me(e,s.__wbindgen_export_0),c=I;s.lorodoc_travelChangeAncestors(a,this.__wbg_ptr,_,c,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}checkout(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16),a=me(e,s.__wbindgen_export_0),_=I;s.lorodoc_checkout(r,this.__wbg_ptr,a,_);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get peerId(){const e=s.lorodoc_peerId(this.__wbg_ptr);return BigInt.asUintN(64,e)}get peerIdStr(){const e=s.lorodoc_peerIdStr(this.__wbg_ptr);return l(e)}setPeerId(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_setPeerId(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}commit(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_commit(r,this.__wbg_ptr,Y(e)?0:p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getPendingTxnLength(){return s.lorodoc_getPendingTxnLength(this.__wbg_ptr)>>>0}getText(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getText(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return et.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getMap(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getMap(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return Le.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getList(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getList(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return Qe.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getMovableList(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getMovableList(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return Ge.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getCounter(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getCounter(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return Xe.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getTree(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getTree(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return tt.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getContainerById(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getContainerById(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}setNextCommitMessage(e){const t=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),o=I;s.lorodoc_setNextCommitMessage(this.__wbg_ptr,t,o)}getDeepValueWithID(){const e=s.lorodoc_getDeepValueWithID(this.__wbg_ptr);return l(e)}getPathToContainer(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getPathToContainer(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}JSONPath(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.lorodoc_JSONPath(a,this.__wbg_ptr,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}version(){const e=s.lorodoc_version(this.__wbg_ptr);return G.__wrap(e)}shallowSinceVV(){const e=s.lorodoc_shallowSinceVV(this.__wbg_ptr);return G.__wrap(e)}isShallow(){return s.lorodoc_isShallow(this.__wbg_ptr)!==0}shallowSinceFrontiers(){const e=s.lorodoc_shallowSinceFrontiers(this.__wbg_ptr);return l(e)}oplogVersion(){const e=s.lorodoc_oplogVersion(this.__wbg_ptr);return G.__wrap(e)}frontiers(){const e=s.lorodoc_frontiers(this.__wbg_ptr);return l(e)}oplogFrontiers(){const e=s.lorodoc_oplogFrontiers(this.__wbg_ptr);return l(e)}cmpWithFrontiers(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=me(e,s.__wbindgen_export_0),c=I;s.lorodoc_cmpWithFrontiers(a,this.__wbg_ptr,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return t}finally{s.__wbindgen_add_to_stack_pointer(16)}}cmpFrontiers(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16),c=me(e,s.__wbindgen_export_0),u=I,h=me(t,s.__wbindgen_export_0),O=I;s.lorodoc_cmpFrontiers(_,this.__wbg_ptr,c,u,h,O);var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}exportSnapshot(){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_exportSnapshot(_,this.__wbg_ptr);var e=i()[_/4+0],t=i()[_/4+1],o=i()[_/4+2],r=i()[_/4+3];if(r)throw l(o);var a=be(e,t).slice();return s.__wbindgen_export_5(e,t*1,1),a}finally{s.__wbindgen_add_to_stack_pointer(16)}}exportFrom(e){try{const c=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_exportFrom(c,this.__wbg_ptr,p(e));var t=i()[c/4+0],o=i()[c/4+1],r=i()[c/4+2],a=i()[c/4+3];if(a)throw l(r);var _=be(t,o).slice();return s.__wbindgen_export_5(t,o*1,1),_}finally{s.__wbindgen_add_to_stack_pointer(16)}}export(e){try{const c=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_export(c,this.__wbg_ptr,p(e));var t=i()[c/4+0],o=i()[c/4+1],r=i()[c/4+2],a=i()[c/4+3];if(a)throw l(r);var _=be(t,o).slice();return s.__wbindgen_export_5(t,o*1,1),_}finally{s.__wbindgen_add_to_stack_pointer(16)}}exportJsonUpdates(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_exportJsonUpdates(_,this.__wbg_ptr,p(e),p(t));var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}importJsonUpdates(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_importJsonUpdates(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}import(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=Te(e,s.__wbindgen_export_0),c=I;s.lorodoc_import(a,this.__wbg_ptr,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}importUpdateBatch(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_importUpdateBatch(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}importBatch(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_importBatch(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getShallowValue(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getShallowValue(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}toJSON(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_toJSON(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){const t=s.lorodoc_subscribe(this.__wbg_ptr,p(e));return l(t)}subscribeLocalUpdates(e){const t=s.lorodoc_subscribeLocalUpdates(this.__wbg_ptr,p(e));return l(t)}debugHistory(){s.lorodoc_debugHistory(this.__wbg_ptr)}changeCount(){return s.lorodoc_changeCount(this.__wbg_ptr)>>>0}opCount(){return s.lorodoc_opCount(this.__wbg_ptr)>>>0}getAllChanges(){const e=s.lorodoc_getAllChanges(this.__wbg_ptr);return l(e)}getChangeAt(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getChangeAt(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getChangeAtLamport(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16),c=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),u=I;s.lorodoc_getChangeAtLamport(_,this.__wbg_ptr,c,u,t);var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getOpsInChange(e){try{const c=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getOpsInChange(c,this.__wbg_ptr,p(e));var t=i()[c/4+0],o=i()[c/4+1],r=i()[c/4+2],a=i()[c/4+3];if(a)throw l(r);var _=oe(t,o).slice();return s.__wbindgen_export_5(t,o*4,4),_}finally{s.__wbindgen_add_to_stack_pointer(16)}}frontiersToVV(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=me(e,s.__wbindgen_export_0),c=I;s.lorodoc_frontiersToVV(a,this.__wbg_ptr,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return G.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}vvToFrontiers(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);Ie(e,G),s.lorodoc_vvToFrontiers(a,this.__wbg_ptr,e.__wbg_ptr);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getByPath(e){const t=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),o=I,r=s.lorodoc_getByPath(this.__wbg_ptr,t,o);return l(r)}getCursorPos(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);Ie(e,ge),s.lorodoc_getCursorPos(a,this.__wbg_ptr,e.__wbg_ptr);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getChangedContainersIn(e,t){try{const u=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getChangedContainersIn(u,this.__wbg_ptr,p(e),t);var o=i()[u/4+0],r=i()[u/4+1],a=i()[u/4+2],_=i()[u/4+3];if(_)throw l(a);var c=oe(o,r).slice();return s.__wbindgen_export_5(o,r*4,4),c}finally{s.__wbindgen_add_to_stack_pointer(16)}}}const wn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_lorolist_free(n>>>0));class Qe{static __wrap(e){e=e>>>0;const t=Object.create(Qe.prototype);return t.__wbg_ptr=e,wn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,wn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_lorolist_free(e)}constructor(){const e=s.lorolist_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=s.lorolist_kind(this.__wbg_ptr);return l(e)}insert(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_insert(a,this.__wbg_ptr,e,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}delete(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_delete(a,this.__wbg_ptr,e,t);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get(e){const t=s.lorolist_get(this.__wbg_ptr,e);return l(t)}get id(){const e=s.lorolist_id(this.__wbg_ptr);return l(e)}toArray(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_toArray(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=s.lorolist_toJSON(this.__wbg_ptr);return l(e)}insertContainer(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_insertContainer(_,this.__wbg_ptr,e,p(t));var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}pushContainer(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_pushContainer(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_subscribe(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get length(){return s.lorolist_length(this.__wbg_ptr)>>>0}parent(){const e=s.lorolist_parent(this.__wbg_ptr);return l(e)}isAttached(){return s.lorolist_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=s.lorolist_getAttached(this.__wbg_ptr);return l(e)}getCursor(e,t){const o=s.lorolist_getCursor(this.__wbg_ptr,e,p(t));return o===0?void 0:ge.__wrap(o)}push(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_push(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}pop(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_pop(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}clear(){try{const o=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_clear(o,this.__wbg_ptr);var e=i()[o/4+0],t=i()[o/4+1];if(t)throw l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getIdAt(e){const t=s.lorolist_getIdAt(this.__wbg_ptr,e);return l(t)}isDeleted(){return s.lorolist_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=s.lorolist_getShallowValue(this.__wbg_ptr);return l(e)}}const bn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_loromap_free(n>>>0));class Le{static __wrap(e){e=e>>>0;const t=Object.create(Le.prototype);return t.__wbg_ptr=e,bn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,bn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_loromap_free(e)}constructor(){const e=s.loromap_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=s.loromap_kind(this.__wbg_ptr);return l(e)}set(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.loromap_set(a,this.__wbg_ptr,_,c,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}delete(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16),a=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),_=I;s.loromap_delete(r,this.__wbg_ptr,a,_);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get(e){const t=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),o=I,r=s.loromap_get(this.__wbg_ptr,t,o);return l(r)}getOrCreateContainer(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16),c=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),u=I;s.loromap_getOrCreateContainer(_,this.__wbg_ptr,c,u,p(t));var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}keys(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.loromap_keys(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}values(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.loromap_values(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}entries(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.loromap_entries(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}get id(){const e=s.loromap_id(this.__wbg_ptr);return l(e)}toJSON(){const e=s.loromap_toJSON(this.__wbg_ptr);return l(e)}setContainer(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16),c=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),u=I;s.loromap_setContainer(_,this.__wbg_ptr,c,u,p(t));var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromap_subscribe(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get size(){return s.loromap_size(this.__wbg_ptr)>>>0}parent(){const e=s.loromap_parent(this.__wbg_ptr);return l(e)}isAttached(){return s.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=s.loromap_getAttached(this.__wbg_ptr);return l(e)}clear(){try{const o=s.__wbindgen_add_to_stack_pointer(-16);s.loromap_clear(o,this.__wbg_ptr);var e=i()[o/4+0],t=i()[o/4+1];if(t)throw l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getLastEditor(e){const t=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),o=I,r=s.loromap_getLastEditor(this.__wbg_ptr,t,o);return l(r)}isDeleted(){return s.loromap_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=s.loromap_getShallowValue(this.__wbg_ptr);return l(e)}}const mn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_loromovablelist_free(n>>>0));class Ge{static __wrap(e){e=e>>>0;const t=Object.create(Ge.prototype);return t.__wbg_ptr=e,mn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,mn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_loromovablelist_free(e)}constructor(){const e=s.loromovablelist_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=s.loromovablelist_kind(this.__wbg_ptr);return l(e)}insert(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_insert(a,this.__wbg_ptr,e,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}delete(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_delete(a,this.__wbg_ptr,e,t);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get(e){const t=s.loromovablelist_get(this.__wbg_ptr,e);return l(t)}get id(){const e=s.loromovablelist_id(this.__wbg_ptr);return l(e)}toArray(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_toArray(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=s.loromovablelist_toJSON(this.__wbg_ptr);return l(e)}insertContainer(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_insertContainer(_,this.__wbg_ptr,e,p(t));var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}pushContainer(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_pushContainer(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_subscribe(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get length(){return s.loromovablelist_length(this.__wbg_ptr)>>>0}parent(){const e=s.loromap_parent(this.__wbg_ptr);return l(e)}isAttached(){return s.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=s.loromovablelist_getAttached(this.__wbg_ptr);return l(e)}getCursor(e,t){const o=s.loromovablelist_getCursor(this.__wbg_ptr,e,p(t));return o===0?void 0:ge.__wrap(o)}move(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_move(a,this.__wbg_ptr,e,t);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}set(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_set(a,this.__wbg_ptr,e,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}setContainer(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_setContainer(_,this.__wbg_ptr,e,p(t));var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}push(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_push(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}pop(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_pop(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}clear(){try{const o=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_clear(o,this.__wbg_ptr);var e=i()[o/4+0],t=i()[o/4+1];if(t)throw l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getCreatorAt(e){const t=s.loromovablelist_getCreatorAt(this.__wbg_ptr,e);return l(t)}getLastMoverAt(e){const t=s.loromovablelist_getLastMoverAt(this.__wbg_ptr,e);return l(t)}getLastEditorAt(e){const t=s.loromovablelist_getLastEditorAt(this.__wbg_ptr,e);return l(t)}isDeleted(){return s.loromovablelist_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=s.loromovablelist_getShallowValue(this.__wbg_ptr);return l(e)}}const yn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_lorotext_free(n>>>0));class et{static __wrap(e){e=e>>>0;const t=Object.create(et.prototype);return t.__wbg_ptr=e,yn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,yn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_lorotext_free(e)}constructor(){const e=s.lorotext_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=s.lorotext_kind(this.__wbg_ptr);return l(e)}iter(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_iter(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}update(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.lorotext_update(a,this.__wbg_ptr,_,c,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}updateByLine(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.lorotext_updateByLine(a,this.__wbg_ptr,_,c,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}insert(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.lorotext_insert(a,this.__wbg_ptr,e,_,c);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}slice(e,t){let o,r;try{const $=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_slice($,this.__wbg_ptr,e,t);var a=i()[$/4+0],_=i()[$/4+1],c=i()[$/4+2],u=i()[$/4+3],h=a,O=_;if(u)throw h=0,O=0,l(c);return o=h,r=O,V(h,O)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_export_5(o,r,1)}}charAt(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_charAt(a,this.__wbg_ptr,e);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return String.fromCodePoint(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}splice(e,t,o){let r,a;try{const ne=s.__wbindgen_add_to_stack_pointer(-16),pe=L(o,s.__wbindgen_export_0,s.__wbindgen_export_1),Ae=I;s.lorotext_splice(ne,this.__wbg_ptr,e,t,pe,Ae);var _=i()[ne/4+0],c=i()[ne/4+1],u=i()[ne/4+2],h=i()[ne/4+3],O=_,$=c;if(h)throw O=0,$=0,l(u);return r=O,a=$,V(O,$)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_export_5(r,a,1)}}insertUtf8(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.lorotext_insertUtf8(a,this.__wbg_ptr,e,_,c);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}delete(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_delete(a,this.__wbg_ptr,e,t);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}deleteUtf8(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_deleteUtf8(a,this.__wbg_ptr,e,t);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}mark(e,t,o){try{const _=s.__wbindgen_add_to_stack_pointer(-16),c=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),u=I;s.lorotext_mark(_,this.__wbg_ptr,p(e),c,u,p(o));var r=i()[_/4+0],a=i()[_/4+1];if(a)throw l(r)}finally{s.__wbindgen_add_to_stack_pointer(16)}}unmark(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.lorotext_unmark(a,this.__wbg_ptr,p(e),_,c);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}toString(){let e,t;try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_toString(a,this.__wbg_ptr);var o=i()[a/4+0],r=i()[a/4+1];return e=o,t=r,V(o,r)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_export_5(e,t,1)}}toDelta(){const e=s.lorotext_toDelta(this.__wbg_ptr);return l(e)}get id(){const e=s.lorotext_id(this.__wbg_ptr);return l(e)}get length(){return s.lorotext_length(this.__wbg_ptr)>>>0}subscribe(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_subscribe(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}applyDelta(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_applyDelta(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}parent(){const e=s.lorotext_parent(this.__wbg_ptr);return l(e)}isAttached(){return s.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=s.lorotext_getAttached(this.__wbg_ptr);return l(e)}getCursor(e,t){const o=s.lorotext_getCursor(this.__wbg_ptr,e,p(t));return o===0?void 0:ge.__wrap(o)}push(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16),a=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),_=I;s.lorotext_push(r,this.__wbg_ptr,a,_);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getEditorOf(e){const t=s.lorotext_getEditorOf(this.__wbg_ptr,e);return l(t)}isDeleted(){return s.lorotext_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){let e,t;try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_getShallowValue(a,this.__wbg_ptr);var o=i()[a/4+0],r=i()[a/4+1];return e=o,t=r,V(o,r)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_export_5(e,t,1)}}}const vn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_lorotree_free(n>>>0));class tt{static __wrap(e){e=e>>>0;const t=Object.create(tt.prototype);return t.__wbg_ptr=e,vn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,vn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_lorotree_free(e)}constructor(){const e=s.lorotree_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=s.lorotree_kind(this.__wbg_ptr);return l(e)}createNode(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_createNode(_,this.__wbg_ptr,X(e),!Y(t),Y(t)?0:t);var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return de.__wrap(o)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}move(e,t,o){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_move(_,this.__wbg_ptr,X(e),X(t),!Y(o),Y(o)?0:o);var r=i()[_/4+0],a=i()[_/4+1];if(a)throw l(r)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0,F[W++]=void 0}}delete(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_delete(r,this.__wbg_ptr,X(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getNodeByID(e){try{const t=s.lorotree_getNodeByID(this.__wbg_ptr,X(e));return t===0?void 0:de.__wrap(t)}finally{F[W++]=void 0}}get id(){const e=s.lorotree_id(this.__wbg_ptr);return l(e)}has(e){try{return s.lorotree_has(this.__wbg_ptr,X(e))!==0}finally{F[W++]=void 0}}isNodeDeleted(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_isNodeDeleted(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return t!==0}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}toArray(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_toArray(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getNodes(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_getNodes(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=s.lorotree_toJSON(this.__wbg_ptr);return l(e)}nodes(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_nodes(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}roots(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_roots(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_subscribe(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}parent(){const e=s.lorotree_parent(this.__wbg_ptr);return l(e)}isAttached(){return s.lorotree_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=s.lorotree_getAttached(this.__wbg_ptr);return l(e)}enableFractionalIndex(e){s.lorotree_enableFractionalIndex(this.__wbg_ptr,e)}disableFractionalIndex(){s.lorotree_disableFractionalIndex(this.__wbg_ptr)}isFractionalIndexEnabled(){return s.lorotree_isFractionalIndexEnabled(this.__wbg_ptr)!==0}isDeleted(){return s.lorotree_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=s.lorotree_getShallowValue(this.__wbg_ptr);return l(e)}}const kn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_lorotreenode_free(n>>>0));class de{static __wrap(e){e=e>>>0;const t=Object.create(de.prototype);return t.__wbg_ptr=e,kn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,kn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_lorotreenode_free(e)}__getClassname(){let e,t;try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode___getClassname(a,this.__wbg_ptr);var o=i()[a/4+0],r=i()[a/4+1];return e=o,t=r,V(o,r)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_export_5(e,t,1)}}get id(){const e=s.lorotreenode_id(this.__wbg_ptr);return l(e)}createNode(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_createNode(a,this.__wbg_ptr,!Y(e),Y(e)?0:e);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return de.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}move(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_move(a,this.__wbg_ptr,X(e),!Y(t),Y(t)?0:t);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}moveAfter(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);Ie(e,de),s.lorotreenode_moveAfter(r,this.__wbg_ptr,e.__wbg_ptr);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}moveBefore(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);Ie(e,de),s.lorotreenode_moveBefore(r,this.__wbg_ptr,e.__wbg_ptr);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}index(){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_index(a,this.__wbg_ptr);var e=i()[a/4+0],t=i()[a/4+1],o=i()[a/4+2],r=i()[a/4+3];if(r)throw l(o);return e===0?void 0:t>>>0}finally{s.__wbindgen_add_to_stack_pointer(16)}}fractionalIndex(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_fractionalIndex(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get data(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_data(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return Le.__wrap(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}toJSON(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_toJSON(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}parent(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_parent(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return e===0?void 0:de.__wrap(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}children(){const e=s.lorotreenode_children(this.__wbg_ptr);return l(e)}isDeleted(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_isDeleted(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return e!==0}finally{s.__wbindgen_add_to_stack_pointer(16)}}getLastMoveId(){const e=s.lorotreenode_getLastMoveId(this.__wbg_ptr);return l(e)}creationId(){const e=s.lorotreenode_creationId(this.__wbg_ptr);return l(e)}creator(){const e=s.lorotreenode_creator(this.__wbg_ptr);return l(e)}}const ys=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_undomanager_free(n>>>0));class vs{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ys.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_undomanager_free(e)}constructor(e,t){Ie(e,se);const o=s.undomanager_new(e.__wbg_ptr,p(t));return this.__wbg_ptr=o>>>0,this}undo(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.undomanager_undo(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return e!==0}finally{s.__wbindgen_add_to_stack_pointer(16)}}redo(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.undomanager_redo(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return e!==0}finally{s.__wbindgen_add_to_stack_pointer(16)}}canUndo(){return s.undomanager_canUndo(this.__wbg_ptr)!==0}canRedo(){return s.undomanager_canRedo(this.__wbg_ptr)!==0}setMaxUndoSteps(e){s.undomanager_setMaxUndoSteps(this.__wbg_ptr,e)}setMergeInterval(e){s.undomanager_setMergeInterval(this.__wbg_ptr,e)}addExcludeOriginPrefix(e){const t=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),o=I;s.undomanager_addExcludeOriginPrefix(this.__wbg_ptr,t,o)}checkBinding(e){return Ie(e,se),s.undomanager_checkBinding(this.__wbg_ptr,e.__wbg_ptr)!==0}setOnPush(e){s.undomanager_setOnPush(this.__wbg_ptr,p(e))}setOnPop(e){s.undomanager_setOnPop(this.__wbg_ptr,p(e))}clear(){s.undomanager_clear(this.__wbg_ptr)}}const xn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_versionvector_free(n>>>0));class G{static __wrap(e){e=e>>>0;const t=Object.create(G.prototype);return t.__wbg_ptr=e,xn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,xn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_versionvector_free(e)}constructor(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_new(a,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return this.__wbg_ptr=t>>>0,this}finally{s.__wbindgen_add_to_stack_pointer(16)}}static parseJSON(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_parseJSON(a,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return G.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=s.versionvector_toJSON(this.__wbg_ptr);return l(e)}encode(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_encode(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=be(e,t).slice();return s.__wbindgen_export_5(e,t*1,1),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}static decode(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=Te(e,s.__wbindgen_export_0),c=I;s.versionvector_decode(a,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return G.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get(e){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_get(_,this.__wbg_ptr,p(e));var t=i()[_/4+0],o=i()[_/4+1],r=i()[_/4+2],a=i()[_/4+3];if(a)throw l(r);return t===0?void 0:o}finally{s.__wbindgen_add_to_stack_pointer(16)}}compare(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);Ie(e,G),s.versionvector_compare(r,this.__wbg_ptr,e.__wbg_ptr);var t=i()[r/4+0],o=i()[r/4+1];return t===0?void 0:o}finally{s.__wbindgen_add_to_stack_pointer(16)}}setEnd(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_setEnd(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}setLast(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_setLast(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}remove(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_remove(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}length(){return s.versionvector_length(this.__wbg_ptr)>>>0}}function Sn(n){l(n)}function Cn(n){const e=Le.__wrap(n);return p(e)}function An(n){const e=et.__wrap(n);return p(e)}function On(n){const e=Qe.__wrap(n);return p(e)}function Tn(n){const e=tt.__wrap(n);return p(e)}function In(n){const e=ge.__wrap(n);return p(e)}function En(n){const e=Ge.__wrap(n);return p(e)}function Nn(n){const e=Xe.__wrap(n);return p(e)}function Dn(n){const e=de.__wrap(n);return p(e)}function Mn(n){const e=G.__wrap(n);return p(e)}function Rn(n){return typeof f(n)=="function"}function $n(n,e){const t=V(n,e);return p(t)}function Zn(n){const e=f(n);return typeof e=="boolean"?e?1:0:2}function jn(n,e){const t=new Error(V(n,e));return p(t)}function Fn(n){const e=f(n);return p(e)}function Ln(n,e){const t=f(e),o=typeof t=="string"?t:void 0;var r=Y(o)?0:L(o,s.__wbindgen_export_0,s.__wbindgen_export_1),a=I;i()[n/4+1]=a,i()[n/4+0]=r}function Pn(n){return f(n)===void 0}function Un(n,e){return f(n)in f(e)}function Vn(n){return typeof f(n)=="bigint"}function zn(n,e){const t=f(e),o=typeof t=="number"?t:void 0;cn()[n/8+1]=Y(o)?0:o,i()[n/4+0]=!Y(o)}function Bn(n){return p(n)}function Wn(n,e){return f(n)===f(e)}function Jn(n){const e=f(n);return typeof e=="object"&&e!==null}function Kn(n){const e=BigInt.asUintN(64,n);return p(e)}function qn(n){const e=l(n).original;return e.cnt--==1?(e.a=0,!0):!1}function Hn(n){return+f(n)}function Yn(n){return typeof f(n)=="string"}function Xn(n){return f(n)===null}function Qn(n){return p(n)}function Gn(n){const e=typeof f(n);return p(e)}function er(n,e){console.error(V(n,e))}function tr(n,e){console.log(V(n,e))}function nr(n){return!f(n)}function rr(n,e){return f(n)==f(e)}function or(n,e){const t=String(f(e)),o=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),r=I;i()[n/4+1]=r,i()[n/4+0]=o}function sr(n,e){const t=f(n)[f(e)];return p(t)}function ar(n,e,t){f(n)[l(e)]=l(t)}function ir(n,e){let t,o;try{t=n,o=e,console.log(V(n,e))}finally{s.__wbindgen_export_5(t,o,1)}}function _r(n,e,t,o,r,a,_,c){let u,h;try{u=n,h=e,console.log(V(n,e),V(t,o),V(r,a),V(_,c))}finally{s.__wbindgen_export_5(u,h,1)}}function dr(n,e){performance.mark(V(n,e))}function cr(){return J(function(n,e,t,o){let r,a,_,c;try{r=n,a=e,_=t,c=o,performance.measure(V(n,e),V(t,o))}finally{s.__wbindgen_export_5(r,a,1),s.__wbindgen_export_5(_,c,1)}},arguments)}function lr(){const n=new Error;return p(n)}function ur(n,e){const t=f(e).stack,o=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),r=I;i()[n/4+1]=r,i()[n/4+0]=o}function pr(n,e){let t,o;try{t=n,o=e,console.error(V(n,e))}finally{s.__wbindgen_export_5(t,o,1)}}const gr=typeof Date.now=="function"?Date.now:ws("Date.now");function hr(n){const e=f(n).crypto;return p(e)}function fr(n){const e=f(n).process;return p(e)}function wr(n){const e=f(n).versions;return p(e)}function br(n){const e=f(n).node;return p(e)}function mr(){return J(function(){const n=module.require;return p(n)},arguments)}function yr(n){const e=f(n).msCrypto;return p(e)}function vr(){return J(function(n,e){f(n).getRandomValues(f(e))},arguments)}function kr(){return J(function(n,e){f(n).randomFillSync(l(e))},arguments)}function xr(){return J(function(){const n=self.self;return p(n)},arguments)}function Sr(){return J(function(){const n=window.window;return p(n)},arguments)}function Cr(){return J(function(){const n=globalThis.globalThis;return p(n)},arguments)}function Ar(){return J(function(){const n=global.global;return p(n)},arguments)}function Or(n,e){const t=new Function(V(n,e));return p(t)}function Tr(){return J(function(n,e){const t=f(n).call(f(e));return p(t)},arguments)}function Ir(n,e){const t=f(n)[e>>>0];return p(t)}function Er(n){return f(n).length}function Nr(){const n=new Array;return p(n)}function Dr(){return p(new Map)}function Mr(n){const e=f(n).next;return p(e)}function Rr(){return J(function(n){const e=f(n).next();return p(e)},arguments)}function $r(n){return f(n).done}function Zr(n){const e=f(n).value;return p(e)}function jr(){return p(Symbol.iterator)}function Fr(){return J(function(n,e){const t=Reflect.get(f(n),f(e));return p(t)},arguments)}function Lr(){const n=new Object;return p(n)}function Pr(n){const e=new Array(n>>>0);return p(e)}function Ur(n,e,t){f(n)[e>>>0]=l(t)}function Vr(n){return Array.isArray(f(n))}function zr(n,e){return f(n).push(f(e))}function Br(n){let e;try{e=f(n)instanceof ArrayBuffer}catch{e=!1}return e}function Wr(){return J(function(n,e,t){const o=f(n).call(f(e),f(t));return p(o)},arguments)}function Jr(){return J(function(n,e,t,o){const r=f(n).call(f(e),f(t),f(o));return p(r)},arguments)}function Kr(){return J(function(n,e,t,o,r){const a=f(n).call(f(e),f(t),f(o),f(r));return p(a)},arguments)}function qr(n){let e;try{e=f(n)instanceof Map}catch{e=!1}return e}function Hr(n,e,t){const o=f(n).set(f(e),f(t));return p(o)}function Yr(n){const e=f(n).entries();return p(e)}function Xr(n){return Number.isSafeInteger(f(n))}function Qr(n){let e;try{e=f(n)instanceof Object}catch{e=!1}return e}function Gr(n){const e=Object.entries(f(n));return p(e)}function eo(){return J(function(n,e,t){const o=Reflect.apply(f(n),f(e),f(t));return p(o)},arguments)}function to(){return J(function(n){const e=Reflect.ownKeys(f(n));return p(e)},arguments)}function no(){return J(function(n,e,t){return Reflect.set(f(n),f(e),f(t))},arguments)}function ro(n){const e=f(n).buffer;return p(e)}function oo(n){const e=Promise.resolve(f(n));return p(e)}function so(n,e){const t=f(n).then(f(e));return p(t)}function ao(n,e,t){const o=new Uint8Array(f(n),e>>>0,t>>>0);return p(o)}function io(n){const e=new Uint8Array(f(n));return p(e)}function _o(n,e,t){f(n).set(f(e),t>>>0)}function co(n){return f(n).length}function lo(n){let e;try{e=f(n)instanceof Uint8Array}catch{e=!1}return e}function uo(n){const e=new Uint8Array(n>>>0);return p(e)}function po(n,e,t){const o=f(n).subarray(e>>>0,t>>>0);return p(o)}function go(n,e){return f(n)[e>>>0]}function ho(n,e,t){f(n)[e>>>0]=t}function fo(n,e){const t=f(e),o=typeof t=="bigint"?t:void 0;ds()[n/8+1]=Y(o)?BigInt(0):o,i()[n/4+0]=!Y(o)}function wo(n,e){const t=Kt(f(e)),o=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),r=I;i()[n/4+1]=r,i()[n/4+0]=o}function bo(n,e){throw new Error(V(n,e))}function mo(n){throw l(n)}function yo(){const n=s.memory;return p(n)}function vo(n,e,t){const o=un(n,e,9,cs);return p(o)}function ko(n,e,t){const o=un(n,e,11,ls);return p(o)}var ks=Object.freeze({__proto__:null,AwarenessWasm:ms,Cursor:ge,LoroCounter:Xe,LoroDoc:se,LoroList:Qe,LoroMap:Le,LoroMovableList:Ge,LoroText:et,LoroTree:tt,LoroTreeNode:de,UndoManager:vs,VersionVector:G,__wbg_String_b9412f8799faab3e:or,__wbg_apply_0a5aa603881e6d79:eo,__wbg_buffer_12d079cc21e14bdb:ro,__wbg_call_27c0f87801dedf93:Tr,__wbg_call_8e7cb608789c2528:Jr,__wbg_call_938992c832f74314:Kr,__wbg_call_b3ca7c6051f9bec1:Wr,__wbg_crypto_1d1f22824a6a080c:hr,__wbg_cursor_new:In,__wbg_done_298b57d23c0fc80c:$r,__wbg_entries_95cc2c823b285a09:Gr,__wbg_entries_ce844941d0c51880:Yr,__wbg_error_c8c2cca30a630316:er,__wbg_error_f851667af71bcfc6:pr,__wbg_getRandomValues_3aa56aa6edec874c:vr,__wbg_get_bd8e338fbd5f5cc8:Ir,__wbg_get_e3c254076557e348:Fr,__wbg_getindex_03d06b4e7ea3475e:go,__wbg_getwithrefkey_edc2c8960f0f1191:sr,__wbg_globalThis_d1e6af4856ba331b:Cr,__wbg_global_207b558942527489:Ar,__wbg_instanceof_ArrayBuffer_836825be07d4c9d2:Br,__wbg_instanceof_Map_87917e0a7aaf4012:qr,__wbg_instanceof_Object_71ca3c0a59266746:Qr,__wbg_instanceof_Uint8Array_2b3bbecd033d19f6:lo,__wbg_isArray_2ab64d95e09ea0ae:Vr,__wbg_isSafeInteger_f7b04ef02296c4d2:Xr,__wbg_iterator_2cee6dadfd956dfa:jr,__wbg_length_c20a40f15020d68a:co,__wbg_length_cd7af8117672b8b8:Er,__wbg_log_aba5996d9bde071f:_r,__wbg_log_c9486ca5d8e2cbe8:ir,__wbg_log_d8fdbde28117925d:tr,__wbg_lorocounter_new:Nn,__wbg_lorolist_new:On,__wbg_loromap_new:Cn,__wbg_loromovablelist_new:En,__wbg_lorotext_new:An,__wbg_lorotree_new:Tn,__wbg_lorotreenode_new:Dn,__wbg_mark_40e050a77cc39fea:dr,__wbg_measure_aa7a73f17813f708:cr,__wbg_msCrypto_eb05e62b530a1508:yr,__wbg_new_16b304a2cfa7ff4a:Nr,__wbg_new_63b92bc8671ed464:io,__wbg_new_72fb9a18b5ae2624:Lr,__wbg_new_abda76e883ba8a5f:lr,__wbg_new_d9bc3a0147634640:Dr,__wbg_newnoargs_e258087cd0daa0ea:Or,__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb:ao,__wbg_newwithlength_66ae46612e7f0234:Pr,__wbg_newwithlength_e9b4878cebadb3d3:uo,__wbg_next_196c84450b364254:Rr,__wbg_next_40fc327bfc8770e6:Mr,__wbg_node_104a2ff8d6ea03a2:br,__wbg_now_11683c634f92ae89:gr,__wbg_ownKeys_658942b7f28d1fe9:to,__wbg_process_4a72847cc503995b:fr,__wbg_push_a5b05aedc7234f9f:zr,__wbg_randomFillSync_5c9c955aa56b6049:kr,__wbg_require_cca90b1a94a0255b:mr,__wbg_resolve_b0083a7967828ec8:oo,__wbg_self_ce0dbfc45cf2f5be:xr,__wbg_set_1f9b04f170055d33:no,__wbg_set_8417257aaedc936b:Hr,__wbg_set_a47bac70306a19a7:_o,__wbg_set_d4638f722068f043:Ur,__wbg_set_f975102236d3c502:ar,__wbg_set_wasm:Jt,__wbg_setindex_0b7ede192dc5eca8:ho,__wbg_stack_658279fe44541cf6:ur,__wbg_subarray_a1f73cd4b5b42fe1:po,__wbg_then_0c86a60e8fcfe9f6:so,__wbg_value_d93c65011f51a456:Zr,__wbg_versions_f686565e586dd935:wr,__wbg_versionvector_new:Mn,__wbg_window_c6fb939a7f436783:Sr,__wbindgen_as_number:Hn,__wbindgen_bigint_from_i64:Bn,__wbindgen_bigint_from_u64:Kn,__wbindgen_bigint_get_as_i64:fo,__wbindgen_boolean_get:Zn,__wbindgen_cb_drop:qn,__wbindgen_closure_wrapper487:vo,__wbindgen_closure_wrapper489:ko,__wbindgen_debug_string:wo,__wbindgen_error_new:jn,__wbindgen_in:Un,__wbindgen_is_bigint:Vn,__wbindgen_is_falsy:nr,__wbindgen_is_function:Rn,__wbindgen_is_null:Xn,__wbindgen_is_object:Jn,__wbindgen_is_string:Yn,__wbindgen_is_undefined:Pn,__wbindgen_jsval_eq:Wn,__wbindgen_jsval_loose_eq:rr,__wbindgen_memory:yo,__wbindgen_number_get:zn,__wbindgen_number_new:Qn,__wbindgen_object_clone_ref:Fn,__wbindgen_object_drop_ref:Sn,__wbindgen_rethrow:mo,__wbindgen_string_get:Ln,__wbindgen_string_new:$n,__wbindgen_throw:bo,__wbindgen_typeof:Gn,decodeFrontiers:gs,decodeImportBlobMeta:fs,encodeFrontiers:ps,run:us,setDebug:hs});URL=globalThis.URL;const d=await os({"./loro_wasm_bg.js":{__wbindgen_object_drop_ref:Sn,__wbg_loromap_new:Cn,__wbg_lorotext_new:An,__wbg_lorolist_new:On,__wbg_lorotree_new:Tn,__wbg_cursor_new:In,__wbg_loromovablelist_new:En,__wbg_lorocounter_new:Nn,__wbg_lorotreenode_new:Dn,__wbg_versionvector_new:Mn,__wbindgen_is_function:Rn,__wbindgen_string_new:$n,__wbindgen_boolean_get:Zn,__wbindgen_error_new:jn,__wbindgen_object_clone_ref:Fn,__wbindgen_string_get:Ln,__wbindgen_is_undefined:Pn,__wbindgen_in:Un,__wbindgen_is_bigint:Vn,__wbindgen_number_get:zn,__wbindgen_bigint_from_i64:Bn,__wbindgen_jsval_eq:Wn,__wbindgen_is_object:Jn,__wbindgen_bigint_from_u64:Kn,__wbindgen_cb_drop:qn,__wbindgen_as_number:Hn,__wbindgen_is_string:Yn,__wbindgen_is_null:Xn,__wbindgen_number_new:Qn,__wbindgen_typeof:Gn,__wbg_error_c8c2cca30a630316:er,__wbg_log_d8fdbde28117925d:tr,__wbindgen_is_falsy:nr,__wbindgen_jsval_loose_eq:rr,__wbg_String_b9412f8799faab3e:or,__wbg_getwithrefkey_edc2c8960f0f1191:sr,__wbg_set_f975102236d3c502:ar,__wbg_log_c9486ca5d8e2cbe8:ir,__wbg_log_aba5996d9bde071f:_r,__wbg_mark_40e050a77cc39fea:dr,__wbg_measure_aa7a73f17813f708:cr,__wbg_new_abda76e883ba8a5f:lr,__wbg_stack_658279fe44541cf6:ur,__wbg_error_f851667af71bcfc6:pr,__wbg_now_11683c634f92ae89:gr,__wbg_crypto_1d1f22824a6a080c:hr,__wbg_process_4a72847cc503995b:fr,__wbg_versions_f686565e586dd935:wr,__wbg_node_104a2ff8d6ea03a2:br,__wbg_require_cca90b1a94a0255b:mr,__wbg_msCrypto_eb05e62b530a1508:yr,__wbg_getRandomValues_3aa56aa6edec874c:vr,__wbg_randomFillSync_5c9c955aa56b6049:kr,__wbg_self_ce0dbfc45cf2f5be:xr,__wbg_window_c6fb939a7f436783:Sr,__wbg_globalThis_d1e6af4856ba331b:Cr,__wbg_global_207b558942527489:Ar,__wbg_newnoargs_e258087cd0daa0ea:Or,__wbg_call_27c0f87801dedf93:Tr,__wbg_get_bd8e338fbd5f5cc8:Ir,__wbg_length_cd7af8117672b8b8:Er,__wbg_new_16b304a2cfa7ff4a:Nr,__wbg_new_d9bc3a0147634640:Dr,__wbg_next_40fc327bfc8770e6:Mr,__wbg_next_196c84450b364254:Rr,__wbg_done_298b57d23c0fc80c:$r,__wbg_value_d93c65011f51a456:Zr,__wbg_iterator_2cee6dadfd956dfa:jr,__wbg_get_e3c254076557e348:Fr,__wbg_new_72fb9a18b5ae2624:Lr,__wbg_newwithlength_66ae46612e7f0234:Pr,__wbg_set_d4638f722068f043:Ur,__wbg_isArray_2ab64d95e09ea0ae:Vr,__wbg_push_a5b05aedc7234f9f:zr,__wbg_instanceof_ArrayBuffer_836825be07d4c9d2:Br,__wbg_call_b3ca7c6051f9bec1:Wr,__wbg_call_8e7cb608789c2528:Jr,__wbg_call_938992c832f74314:Kr,__wbg_instanceof_Map_87917e0a7aaf4012:qr,__wbg_set_8417257aaedc936b:Hr,__wbg_entries_ce844941d0c51880:Yr,__wbg_isSafeInteger_f7b04ef02296c4d2:Xr,__wbg_instanceof_Object_71ca3c0a59266746:Qr,__wbg_entries_95cc2c823b285a09:Gr,__wbg_apply_0a5aa603881e6d79:eo,__wbg_ownKeys_658942b7f28d1fe9:to,__wbg_set_1f9b04f170055d33:no,__wbg_buffer_12d079cc21e14bdb:ro,__wbg_resolve_b0083a7967828ec8:oo,__wbg_then_0c86a60e8fcfe9f6:so,__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb:ao,__wbg_new_63b92bc8671ed464:io,__wbg_set_a47bac70306a19a7:_o,__wbg_length_c20a40f15020d68a:co,__wbg_instanceof_Uint8Array_2b3bbecd033d19f6:lo,__wbg_newwithlength_e9b4878cebadb3d3:uo,__wbg_subarray_a1f73cd4b5b42fe1:po,__wbg_getindex_03d06b4e7ea3475e:go,__wbg_setindex_0b7ede192dc5eca8:ho,__wbindgen_bigint_get_as_i64:fo,__wbindgen_debug_string:wo,__wbindgen_throw:bo,__wbindgen_rethrow:mo,__wbindgen_memory:yo,__wbindgen_closure_wrapper487:vo,__wbindgen_closure_wrapper489:ko}},rs),xs=d.memory,Ss=d.__wbg_lorocounter_free,Cs=d.lorocounter_new,As=d.lorocounter_increment,Os=d.lorocounter_decrement,Ts=d.lorocounter_value,Is=d.lorocounter_subscribe,Es=d.lorocounter_parent,Ns=d.lorocounter_isAttached,Ds=d.lorocounter_getAttached,Ms=d.lorocounter_getShallowValue,Rs=d.__wbg_awarenesswasm_free,$s=d.awarenesswasm_new,Zs=d.awarenesswasm_encode,js=d.awarenesswasm_encodeAll,Fs=d.awarenesswasm_apply,Ls=d.awarenesswasm_setLocalState,Ps=d.awarenesswasm_peer,Us=d.awarenesswasm_getAllStates,Vs=d.awarenesswasm_getState,zs=d.awarenesswasm_getTimestamp,Bs=d.awarenesswasm_removeOutdated,Ws=d.awarenesswasm_length,Js=d.awarenesswasm_isEmpty,Ks=d.awarenesswasm_peers,qs=d.run,Hs=d.encodeFrontiers,Ys=d.decodeFrontiers,Xs=d.setDebug,Qs=d.__wbg_lorodoc_free,Gs=d.lorodoc_new,ea=d.lorodoc_setDetachedEditing,ta=d.lorodoc_isDetachedEditingEnabled,na=d.lorodoc_setRecordTimestamp,ra=d.lorodoc_setChangeMergeInterval,oa=d.lorodoc_configTextStyle,sa=d.lorodoc_fromSnapshot,aa=d.lorodoc_attach,ia=d.lorodoc_isDetached,_a=d.lorodoc_detach,da=d.lorodoc_fork,ca=d.lorodoc_forkAt,la=d.lorodoc_checkoutToLatest,ua=d.lorodoc_travelChangeAncestors,pa=d.lorodoc_checkout,ga=d.lorodoc_peerId,ha=d.lorodoc_peerIdStr,fa=d.lorodoc_setPeerId,wa=d.lorodoc_commit,ba=d.lorodoc_getPendingTxnLength,ma=d.lorodoc_getText,ya=d.lorodoc_getMap,va=d.lorodoc_getList,ka=d.lorodoc_getMovableList,xa=d.lorodoc_getCounter,Sa=d.lorodoc_getTree,Ca=d.lorodoc_getContainerById,Aa=d.lorodoc_setNextCommitMessage,Oa=d.lorodoc_getDeepValueWithID,Ta=d.lorodoc_getPathToContainer,Ia=d.lorodoc_JSONPath,Ea=d.lorodoc_version,Na=d.lorodoc_shallowSinceVV,Da=d.lorodoc_isShallow,Ma=d.lorodoc_shallowSinceFrontiers,Ra=d.lorodoc_oplogVersion,$a=d.lorodoc_frontiers,Za=d.lorodoc_oplogFrontiers,ja=d.lorodoc_cmpWithFrontiers,Fa=d.lorodoc_cmpFrontiers,La=d.lorodoc_exportSnapshot,Pa=d.lorodoc_exportFrom,Ua=d.lorodoc_export,Va=d.lorodoc_exportJsonUpdates,za=d.lorodoc_importJsonUpdates,Ba=d.lorodoc_import,Wa=d.lorodoc_importUpdateBatch,Ja=d.lorodoc_importBatch,Ka=d.lorodoc_getShallowValue,qa=d.lorodoc_toJSON,Ha=d.lorodoc_subscribe,Ya=d.lorodoc_subscribeLocalUpdates,Xa=d.lorodoc_debugHistory,Qa=d.lorodoc_changeCount,Ga=d.lorodoc_opCount,ei=d.lorodoc_getAllChanges,ti=d.lorodoc_getChangeAt,ni=d.lorodoc_getChangeAtLamport,ri=d.lorodoc_getOpsInChange,oi=d.lorodoc_frontiersToVV,si=d.lorodoc_vvToFrontiers,ai=d.lorodoc_getByPath,ii=d.lorodoc_getCursorPos,_i=d.lorodoc_getChangedContainersIn,di=d.__wbg_lorotext_free,ci=d.lorotext_new,li=d.lorotext_kind,ui=d.lorotext_iter,pi=d.lorotext_update,gi=d.lorotext_updateByLine,hi=d.lorotext_insert,fi=d.lorotext_slice,wi=d.lorotext_charAt,bi=d.lorotext_splice,mi=d.lorotext_insertUtf8,yi=d.lorotext_delete,vi=d.lorotext_deleteUtf8,ki=d.lorotext_mark,xi=d.lorotext_unmark,Si=d.lorotext_toString,Ci=d.lorotext_toDelta,Ai=d.lorotext_id,Oi=d.lorotext_length,Ti=d.lorotext_subscribe,Ii=d.lorotext_applyDelta,Ei=d.lorotext_parent,Ni=d.lorotext_getAttached,Di=d.lorotext_getCursor,Mi=d.lorotext_push,Ri=d.lorotext_getEditorOf,$i=d.lorotext_isDeleted,Zi=d.lorotext_getShallowValue,ji=d.__wbg_loromap_free,Fi=d.loromap_new,Li=d.loromap_kind,Pi=d.loromap_set,Ui=d.loromap_delete,Vi=d.loromap_get,zi=d.loromap_getOrCreateContainer,Bi=d.loromap_keys,Wi=d.loromap_values,Ji=d.loromap_entries,Ki=d.loromap_id,qi=d.loromap_toJSON,Hi=d.loromap_setContainer,Yi=d.loromap_subscribe,Xi=d.loromap_size,Qi=d.loromap_parent,Gi=d.loromap_getAttached,e_=d.loromap_clear,t_=d.loromap_getLastEditor,n_=d.loromap_isDeleted,r_=d.loromap_getShallowValue,o_=d.__wbg_lorolist_free,s_=d.lorolist_new,a_=d.lorolist_kind,i_=d.lorolist_insert,__=d.lorolist_delete,d_=d.lorolist_get,c_=d.lorolist_id,l_=d.lorolist_toArray,u_=d.lorolist_toJSON,p_=d.lorolist_insertContainer,g_=d.lorolist_pushContainer,h_=d.lorolist_subscribe,f_=d.lorolist_length,w_=d.lorolist_parent,b_=d.lorolist_isAttached,m_=d.lorolist_getAttached,y_=d.lorolist_getCursor,v_=d.lorolist_push,k_=d.lorolist_pop,x_=d.lorolist_clear,S_=d.lorolist_getIdAt,C_=d.lorolist_isDeleted,A_=d.lorolist_getShallowValue,O_=d.loromovablelist_new,T_=d.loromovablelist_kind,I_=d.loromovablelist_insert,E_=d.loromovablelist_delete,N_=d.loromovablelist_get,D_=d.loromovablelist_id,M_=d.loromovablelist_toArray,R_=d.loromovablelist_toJSON,$_=d.loromovablelist_insertContainer,Z_=d.loromovablelist_pushContainer,j_=d.loromovablelist_subscribe,F_=d.loromovablelist_length,L_=d.loromovablelist_getAttached,P_=d.loromovablelist_getCursor,U_=d.loromovablelist_move,V_=d.loromovablelist_set,z_=d.loromovablelist_setContainer,B_=d.loromovablelist_push,W_=d.loromovablelist_pop,J_=d.loromovablelist_clear,K_=d.loromovablelist_getCreatorAt,q_=d.loromovablelist_getLastMoverAt,H_=d.loromovablelist_getLastEditorAt,Y_=d.loromovablelist_isDeleted,X_=d.loromovablelist_getShallowValue,Q_=d.__wbg_lorotree_free,G_=d.lorotreenode___getClassname,ed=d.__wbg_lorotreenode_free,td=d.lorotreenode_id,nd=d.lorotreenode_createNode,rd=d.lorotreenode_move,od=d.lorotreenode_moveAfter,sd=d.lorotreenode_moveBefore,ad=d.lorotreenode_index,id=d.lorotreenode_fractionalIndex,_d=d.lorotreenode_data,dd=d.lorotreenode_toJSON,cd=d.lorotreenode_parent,ld=d.lorotreenode_children,ud=d.lorotreenode_isDeleted,pd=d.lorotreenode_getLastMoveId,gd=d.lorotreenode_creationId,hd=d.lorotreenode_creator,fd=d.lorotree_new,wd=d.lorotree_kind,bd=d.lorotree_createNode,md=d.lorotree_move,yd=d.lorotree_delete,vd=d.lorotree_getNodeByID,kd=d.lorotree_id,xd=d.lorotree_has,Sd=d.lorotree_isNodeDeleted,Cd=d.lorotree_toArray,Ad=d.lorotree_getNodes,Od=d.lorotree_toJSON,Td=d.lorotree_nodes,Id=d.lorotree_roots,Ed=d.lorotree_subscribe,Nd=d.lorotree_parent,Dd=d.lorotree_isAttached,Md=d.lorotree_getAttached,Rd=d.lorotree_enableFractionalIndex,$d=d.lorotree_disableFractionalIndex,Zd=d.lorotree_isFractionalIndexEnabled,jd=d.lorotree_isDeleted,Fd=d.lorotree_getShallowValue,Ld=d.__wbg_cursor_free,Pd=d.cursor_containerId,Ud=d.cursor_pos,Vd=d.cursor_side,zd=d.cursor_encode,Bd=d.cursor_decode,Wd=d.cursor_kind,Jd=d.__wbg_undomanager_free,Kd=d.undomanager_new,qd=d.undomanager_undo,Hd=d.undomanager_redo,Yd=d.undomanager_canUndo,Xd=d.undomanager_canRedo,Qd=d.undomanager_setMaxUndoSteps,Gd=d.undomanager_setMergeInterval,ec=d.undomanager_addExcludeOriginPrefix,tc=d.undomanager_checkBinding,nc=d.undomanager_setOnPush,rc=d.undomanager_setOnPop,oc=d.undomanager_clear,sc=d.__wbg_versionvector_free,ac=d.versionvector_new,ic=d.versionvector_parseJSON,_c=d.versionvector_toJSON,dc=d.versionvector_encode,cc=d.versionvector_decode,lc=d.versionvector_get,uc=d.versionvector_compare,pc=d.versionvector_setEnd,gc=d.versionvector_setLast,hc=d.versionvector_remove,fc=d.versionvector_length,wc=d.decodeImportBlobMeta,bc=d.__wbg_loromovablelist_free,mc=d.loromovablelist_parent,yc=d.lorotext_isAttached,vc=d.loromap_isAttached,kc=d.loromovablelist_isAttached,xc=d.__wbindgen_export_0,Sc=d.__wbindgen_export_1,Cc=d.__wbindgen_export_2,Ac=d.__wbindgen_export_3,Oc=d.__wbindgen_export_4,Tc=d.__wbindgen_add_to_stack_pointer,Ic=d.__wbindgen_export_5,Ec=d.__wbindgen_export_6,qt=d.__wbindgen_start;var xo=Object.freeze({__proto__:null,__wbg_awarenesswasm_free:Rs,__wbg_cursor_free:Ld,__wbg_lorocounter_free:Ss,__wbg_lorodoc_free:Qs,__wbg_lorolist_free:o_,__wbg_loromap_free:ji,__wbg_loromovablelist_free:bc,__wbg_lorotext_free:di,__wbg_lorotree_free:Q_,__wbg_lorotreenode_free:ed,__wbg_undomanager_free:Jd,__wbg_versionvector_free:sc,__wbindgen_add_to_stack_pointer:Tc,__wbindgen_export_0:xc,__wbindgen_export_1:Sc,__wbindgen_export_2:Cc,__wbindgen_export_3:Ac,__wbindgen_export_4:Oc,__wbindgen_export_5:Ic,__wbindgen_export_6:Ec,__wbindgen_start:qt,awarenesswasm_apply:Fs,awarenesswasm_encode:Zs,awarenesswasm_encodeAll:js,awarenesswasm_getAllStates:Us,awarenesswasm_getState:Vs,awarenesswasm_getTimestamp:zs,awarenesswasm_isEmpty:Js,awarenesswasm_length:Ws,awarenesswasm_new:$s,awarenesswasm_peer:Ps,awarenesswasm_peers:Ks,awarenesswasm_removeOutdated:Bs,awarenesswasm_setLocalState:Ls,cursor_containerId:Pd,cursor_decode:Bd,cursor_encode:zd,cursor_kind:Wd,cursor_pos:Ud,cursor_side:Vd,decodeFrontiers:Ys,decodeImportBlobMeta:wc,encodeFrontiers:Hs,lorocounter_decrement:Os,lorocounter_getAttached:Ds,lorocounter_getShallowValue:Ms,lorocounter_increment:As,lorocounter_isAttached:Ns,lorocounter_new:Cs,lorocounter_parent:Es,lorocounter_subscribe:Is,lorocounter_value:Ts,lorodoc_JSONPath:Ia,lorodoc_attach:aa,lorodoc_changeCount:Qa,lorodoc_checkout:pa,lorodoc_checkoutToLatest:la,lorodoc_cmpFrontiers:Fa,lorodoc_cmpWithFrontiers:ja,lorodoc_commit:wa,lorodoc_configTextStyle:oa,lorodoc_debugHistory:Xa,lorodoc_detach:_a,lorodoc_export:Ua,lorodoc_exportFrom:Pa,lorodoc_exportJsonUpdates:Va,lorodoc_exportSnapshot:La,lorodoc_fork:da,lorodoc_forkAt:ca,lorodoc_fromSnapshot:sa,lorodoc_frontiers:$a,lorodoc_frontiersToVV:oi,lorodoc_getAllChanges:ei,lorodoc_getByPath:ai,lorodoc_getChangeAt:ti,lorodoc_getChangeAtLamport:ni,lorodoc_getChangedContainersIn:_i,lorodoc_getContainerById:Ca,lorodoc_getCounter:xa,lorodoc_getCursorPos:ii,lorodoc_getDeepValueWithID:Oa,lorodoc_getList:va,lorodoc_getMap:ya,lorodoc_getMovableList:ka,lorodoc_getOpsInChange:ri,lorodoc_getPathToContainer:Ta,lorodoc_getPendingTxnLength:ba,lorodoc_getShallowValue:Ka,lorodoc_getText:ma,lorodoc_getTree:Sa,lorodoc_import:Ba,lorodoc_importBatch:Ja,lorodoc_importJsonUpdates:za,lorodoc_importUpdateBatch:Wa,lorodoc_isDetached:ia,lorodoc_isDetachedEditingEnabled:ta,lorodoc_isShallow:Da,lorodoc_new:Gs,lorodoc_opCount:Ga,lorodoc_oplogFrontiers:Za,lorodoc_oplogVersion:Ra,lorodoc_peerId:ga,lorodoc_peerIdStr:ha,lorodoc_setChangeMergeInterval:ra,lorodoc_setDetachedEditing:ea,lorodoc_setNextCommitMessage:Aa,lorodoc_setPeerId:fa,lorodoc_setRecordTimestamp:na,lorodoc_shallowSinceFrontiers:Ma,lorodoc_shallowSinceVV:Na,lorodoc_subscribe:Ha,lorodoc_subscribeLocalUpdates:Ya,lorodoc_toJSON:qa,lorodoc_travelChangeAncestors:ua,lorodoc_version:Ea,lorodoc_vvToFrontiers:si,lorolist_clear:x_,lorolist_delete:__,lorolist_get:d_,lorolist_getAttached:m_,lorolist_getCursor:y_,lorolist_getIdAt:S_,lorolist_getShallowValue:A_,lorolist_id:c_,lorolist_insert:i_,lorolist_insertContainer:p_,lorolist_isAttached:b_,lorolist_isDeleted:C_,lorolist_kind:a_,lorolist_length:f_,lorolist_new:s_,lorolist_parent:w_,lorolist_pop:k_,lorolist_push:v_,lorolist_pushContainer:g_,lorolist_subscribe:h_,lorolist_toArray:l_,lorolist_toJSON:u_,loromap_clear:e_,loromap_delete:Ui,loromap_entries:Ji,loromap_get:Vi,loromap_getAttached:Gi,loromap_getLastEditor:t_,loromap_getOrCreateContainer:zi,loromap_getShallowValue:r_,loromap_id:Ki,loromap_isAttached:vc,loromap_isDeleted:n_,loromap_keys:Bi,loromap_kind:Li,loromap_new:Fi,loromap_parent:Qi,loromap_set:Pi,loromap_setContainer:Hi,loromap_size:Xi,loromap_subscribe:Yi,loromap_toJSON:qi,loromap_values:Wi,loromovablelist_clear:J_,loromovablelist_delete:E_,loromovablelist_get:N_,loromovablelist_getAttached:L_,loromovablelist_getCreatorAt:K_,loromovablelist_getCursor:P_,loromovablelist_getLastEditorAt:H_,loromovablelist_getLastMoverAt:q_,loromovablelist_getShallowValue:X_,loromovablelist_id:D_,loromovablelist_insert:I_,loromovablelist_insertContainer:$_,loromovablelist_isAttached:kc,loromovablelist_isDeleted:Y_,loromovablelist_kind:T_,loromovablelist_length:F_,loromovablelist_move:U_,loromovablelist_new:O_,loromovablelist_parent:mc,loromovablelist_pop:W_,loromovablelist_push:B_,loromovablelist_pushContainer:Z_,loromovablelist_set:V_,loromovablelist_setContainer:z_,loromovablelist_subscribe:j_,loromovablelist_toArray:M_,loromovablelist_toJSON:R_,lorotext_applyDelta:Ii,lorotext_charAt:wi,lorotext_delete:yi,lorotext_deleteUtf8:vi,lorotext_getAttached:Ni,lorotext_getCursor:Di,lorotext_getEditorOf:Ri,lorotext_getShallowValue:Zi,lorotext_id:Ai,lorotext_insert:hi,lorotext_insertUtf8:mi,lorotext_isAttached:yc,lorotext_isDeleted:$i,lorotext_iter:ui,lorotext_kind:li,lorotext_length:Oi,lorotext_mark:ki,lorotext_new:ci,lorotext_parent:Ei,lorotext_push:Mi,lorotext_slice:fi,lorotext_splice:bi,lorotext_subscribe:Ti,lorotext_toDelta:Ci,lorotext_toString:Si,lorotext_unmark:xi,lorotext_update:pi,lorotext_updateByLine:gi,lorotree_createNode:bd,lorotree_delete:yd,lorotree_disableFractionalIndex:$d,lorotree_enableFractionalIndex:Rd,lorotree_getAttached:Md,lorotree_getNodeByID:vd,lorotree_getNodes:Ad,lorotree_getShallowValue:Fd,lorotree_has:xd,lorotree_id:kd,lorotree_isAttached:Dd,lorotree_isDeleted:jd,lorotree_isFractionalIndexEnabled:Zd,lorotree_isNodeDeleted:Sd,lorotree_kind:wd,lorotree_move:md,lorotree_new:fd,lorotree_nodes:Td,lorotree_parent:Nd,lorotree_roots:Id,lorotree_subscribe:Ed,lorotree_toArray:Cd,lorotree_toJSON:Od,lorotreenode___getClassname:G_,lorotreenode_children:ld,lorotreenode_createNode:nd,lorotreenode_creationId:gd,lorotreenode_creator:hd,lorotreenode_data:_d,lorotreenode_fractionalIndex:id,lorotreenode_getLastMoveId:pd,lorotreenode_id:td,lorotreenode_index:ad,lorotreenode_isDeleted:ud,lorotreenode_move:rd,lorotreenode_moveAfter:od,lorotreenode_moveBefore:sd,lorotreenode_parent:cd,lorotreenode_toJSON:dd,memory:xs,run:qs,setDebug:Xs,undomanager_addExcludeOriginPrefix:ec,undomanager_canRedo:Xd,undomanager_canUndo:Yd,undomanager_checkBinding:tc,undomanager_clear:oc,undomanager_new:Kd,undomanager_redo:Hd,undomanager_setMaxUndoSteps:Qd,undomanager_setMergeInterval:Gd,undomanager_setOnPop:rc,undomanager_setOnPush:nc,undomanager_undo:qd,versionvector_compare:uc,versionvector_decode:cc,versionvector_encode:dc,versionvector_get:lc,versionvector_length:fc,versionvector_new:ac,versionvector_parseJSON:ic,versionvector_remove:hc,versionvector_setEnd:pc,versionvector_setLast:gc,versionvector_toJSON:_c});if(qt)Jt(xo),qt();else{const n=await Promise.resolve().then(function(){return xo}),e=new WebAssembly.Instance(n.default,{"./loro_wasm_bg.js":ks});Jt(e.exports)}const Nc=["Map","Text","List","Tree","MovableList","Counter"];function Dc(n){return n.startsWith("cid:")}function So(n){if(typeof n!="object"||n==null)return!1;const e=Object.getPrototypeOf(n);return e==null||typeof e!="object"||typeof e.kind!="function"?!1:Nc.includes(n.kind())}se.prototype.toJsonWithReplacer=function(n){const e=this,t=(a,_)=>{if(typeof _=="string"&&Dc(_)){const u=e.getContainerById(_);if(u==null)throw new Error(`ContainerID not found: ${_}`);const h=n(a,u);if(h===u){const O=u.getShallowValue();return typeof O=="object"?o(O):O}if(So(h))throw new Error("Using new container is not allowed in toJsonWithReplacer");return h}const c=n(a,_);if(So(c))throw new Error("Using new container is not allowed in toJsonWithReplacer");return c},o=a=>{if(Array.isArray(a))return a.map((c,u)=>t(u,c)).filter(c=>c!==void 0);const _={};for(const[c,u]of Object.entries(a)){const h=t(c,u);h!==void 0&&(_[c]=h)}return _},r=this.getShallowValue();return o(r)};var R;(function(n){n.assertEqual=r=>r;function e(r){}n.assertIs=e;function t(r){throw new Error}n.assertNever=t,n.arrayToEnum=r=>{const a={};for(const _ of r)a[_]=_;return a},n.getValidEnumValues=r=>{const a=n.objectKeys(r).filter(c=>typeof r[r[c]]!="number"),_={};for(const c of a)_[c]=r[c];return n.objectValues(_)},n.objectValues=r=>n.objectKeys(r).map(function(a){return r[a]}),n.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const a=[];for(const _ in r)Object.prototype.hasOwnProperty.call(r,_)&&a.push(_);return a},n.find=(r,a)=>{for(const _ of r)if(a(_))return _},n.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function o(r,a=" | "){return r.map(_=>typeof _=="string"?`'${_}'`:_).join(a)}n.joinValues=o,n.jsonStringifyReplacer=(r,a)=>typeof a=="bigint"?a.toString():a})(R||(R={}));var Ht;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Ht||(Ht={}));const m=R.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),he=n=>{switch(typeof n){case"undefined":return m.undefined;case"string":return m.string;case"number":return isNaN(n)?m.nan:m.number;case"boolean":return m.boolean;case"function":return m.function;case"bigint":return m.bigint;case"symbol":return m.symbol;case"object":return Array.isArray(n)?m.array:n===null?m.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?m.promise:typeof Map<"u"&&n instanceof Map?m.map:typeof Set<"u"&&n instanceof Set?m.set:typeof Date<"u"&&n instanceof Date?m.date:m.object;default:return m.unknown}},g=R.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Mc=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class ee extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},o={_errors:[]},r=a=>{for(const _ of a.issues)if(_.code==="invalid_union")_.unionErrors.map(r);else if(_.code==="invalid_return_type")r(_.returnTypeError);else if(_.code==="invalid_arguments")r(_.argumentsError);else if(_.path.length===0)o._errors.push(t(_));else{let c=o,u=0;for(;u<_.path.length;){const h=_.path[u];u===_.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(t(_))):c[h]=c[h]||{_errors:[]},c=c[h],u++}}};return r(this),o}static assert(e){if(!(e instanceof ee))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,R.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},o=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):o.push(e(r));return{formErrors:o,fieldErrors:t}}get formErrors(){return this.flatten()}}ee.create=n=>new ee(n);const Pe=(n,e)=>{let t;switch(n.code){case g.invalid_type:n.received===m.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case g.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,R.jsonStringifyReplacer)}`;break;case g.unrecognized_keys:t=`Unrecognized key(s) in object: ${R.joinValues(n.keys,", ")}`;break;case g.invalid_union:t="Invalid input";break;case g.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${R.joinValues(n.options)}`;break;case g.invalid_enum_value:t=`Invalid enum value. Expected ${R.joinValues(n.options)}, received '${n.received}'`;break;case g.invalid_arguments:t="Invalid function arguments";break;case g.invalid_return_type:t="Invalid function return type";break;case g.invalid_date:t="Invalid date";break;case g.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:R.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case g.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case g.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case g.custom:t="Invalid input";break;case g.invalid_intersection_types:t="Intersection results could not be merged";break;case g.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case g.not_finite:t="Number must be finite";break;default:t=e.defaultError,R.assertNever(n)}return{message:t}};let Co=Pe;function Rc(n){Co=n}function Et(){return Co}const Nt=n=>{const{data:e,path:t,errorMaps:o,issueData:r}=n,a=[...t,...r.path||[]],_={...r,path:a};if(r.message!==void 0)return{...r,path:a,message:r.message};let c="";const u=o.filter(h=>!!h).slice().reverse();for(const h of u)c=h(_,{data:e,defaultError:c}).message;return{...r,path:a,message:c}},$c=[];function w(n,e){const t=Et(),o=Nt({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Pe?void 0:Pe].filter(r=>!!r)});n.common.issues.push(o)}class K{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const o=[];for(const r of t){if(r.status==="aborted")return A;r.status==="dirty"&&e.dirty(),o.push(r.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,t){const o=[];for(const r of t){const a=await r.key,_=await r.value;o.push({key:a,value:_})}return K.mergeObjectSync(e,o)}static mergeObjectSync(e,t){const o={};for(const r of t){const{key:a,value:_}=r;if(a.status==="aborted"||_.status==="aborted")return A;a.status==="dirty"&&e.dirty(),_.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof _.value<"u"||r.alwaysSet)&&(o[a.value]=_.value)}return{status:e.value,value:o}}}const A=Object.freeze({status:"aborted"}),Dt=n=>({status:"dirty",value:n}),H=n=>({status:"valid",value:n}),Yt=n=>n.status==="aborted",Xt=n=>n.status==="dirty",Ee=n=>n.status==="valid",nt=n=>typeof Promise<"u"&&n instanceof Promise;function Mt(n,e,t,o){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function Ao(n,e,t,o,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var k;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e?.message})(k||(k={}));var rt,ot;class ce{constructor(e,t,o,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=o,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Oo=(n,e)=>{if(Ee(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ee(n.common.issues);return this._error=t,this._error}}};function E(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:o,description:r}=n;if(e&&(t||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(a,_)=>{var c,u;const{message:h}=n;return a.code==="invalid_enum_value"?{message:h??_.defaultError}:typeof _.data>"u"?{message:(c=h??o)!==null&&c!==void 0?c:_.defaultError}:a.code!=="invalid_type"?{message:_.defaultError}:{message:(u=h??t)!==null&&u!==void 0?u:_.defaultError}},description:r}}class M{get description(){return this._def.description}_getType(e){return he(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:he(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new K,ctx:{common:e.parent.common,data:e.data,parsedType:he(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(nt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const o=this.safeParse(e,t);if(o.success)return o.data;throw o.error}safeParse(e,t){var o;const r={common:{issues:[],async:(o=t?.async)!==null&&o!==void 0?o:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:he(e)},a=this._parseSync({data:e,path:r.path,parent:r});return Oo(r,a)}"~validate"(e){var t,o;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:he(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:r});return Ee(a)?{value:a.value}:{issues:r.common.issues}}catch(a){!((o=(t=a?.message)===null||t===void 0?void 0:t.toLowerCase())===null||o===void 0)&&o.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(a=>Ee(a)?{value:a.value}:{issues:r.common.issues})}async parseAsync(e,t){const o=await this.safeParseAsync(e,t);if(o.success)return o.data;throw o.error}async safeParseAsync(e,t){const o={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:he(e)},r=this._parse({data:e,path:o.path,parent:o}),a=await(nt(r)?r:Promise.resolve(r));return Oo(o,a)}refine(e,t){const o=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,a)=>{const _=e(r),c=()=>a.addIssue({code:g.custom,...o(r)});return typeof Promise<"u"&&_ instanceof Promise?_.then(u=>u?!0:(c(),!1)):_?!0:(c(),!1)})}refinement(e,t){return this._refinement((o,r)=>e(o)?!0:(r.addIssue(typeof t=="function"?t(o,r):t),!1))}_refinement(e){return new _e({schema:this,typeName:C.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ue.create(this,this._def)}nullable(){return Se.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ie.create(this)}promise(){return Be.create(this,this._def)}or(e){return _t.create([this,e],this._def)}and(e){return dt.create(this,e,this._def)}transform(e){return new _e({...E(this._def),schema:this,typeName:C.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new gt({...E(this._def),innerType:this,defaultValue:t,typeName:C.ZodDefault})}brand(){return new en({typeName:C.ZodBranded,type:this,...E(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new ht({...E(this._def),innerType:this,catchValue:t,typeName:C.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return ft.create(this,e)}readonly(){return wt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Zc=/^c[^\s-]{8,}$/i,jc=/^[0-9a-z]+$/,Fc=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Lc=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Pc=/^[a-z0-9_-]{21}$/i,Uc=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Vc=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zc=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Bc="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Qt;const Wc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Jc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Kc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,qc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Hc=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Yc=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,To="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Xc=new RegExp(`^${To}$`);function Io(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Qc(n){return new RegExp(`^${Io(n)}$`)}function Eo(n){let e=`${To}T${Io(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Gc(n,e){return!!((e==="v4"||!e)&&Wc.test(n)||(e==="v6"||!e)&&Kc.test(n))}function el(n,e){if(!Uc.test(n))return!1;try{const[t]=n.split("."),o=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(o));return!(typeof r!="object"||r===null||!r.typ||!r.alg||e&&r.alg!==e)}catch{return!1}}function tl(n,e){return!!((e==="v4"||!e)&&Jc.test(n)||(e==="v6"||!e)&&qc.test(n))}class ae extends M{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==m.string){const r=this._getOrReturnCtx(e);return w(r,{code:g.invalid_type,expected:m.string,received:r.parsedType}),A}const t=new K;let o;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(o=this._getOrReturnCtx(e,o),w(o,{code:g.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if(r.kind==="max")e.data.length>r.value&&(o=this._getOrReturnCtx(e,o),w(o,{code:g.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if(r.kind==="length"){const a=e.data.length>r.value,_=e.data.length<r.value;(a||_)&&(o=this._getOrReturnCtx(e,o),a?w(o,{code:g.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):_&&w(o,{code:g.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if(r.kind==="email")zc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"email",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="emoji")Qt||(Qt=new RegExp(Bc,"u")),Qt.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"emoji",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="uuid")Lc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"uuid",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="nanoid")Pc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"nanoid",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="cuid")Zc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"cuid",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="cuid2")jc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"cuid2",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="ulid")Fc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"ulid",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),w(o,{validation:"url",code:g.invalid_string,message:r.message}),t.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"regex",code:g.invalid_string,message:r.message}),t.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(o=this._getOrReturnCtx(e,o),w(o,{code:g.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(o=this._getOrReturnCtx(e,o),w(o,{code:g.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(o=this._getOrReturnCtx(e,o),w(o,{code:g.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty()):r.kind==="datetime"?Eo(r).test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{code:g.invalid_string,validation:"datetime",message:r.message}),t.dirty()):r.kind==="date"?Xc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{code:g.invalid_string,validation:"date",message:r.message}),t.dirty()):r.kind==="time"?Qc(r).test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{code:g.invalid_string,validation:"time",message:r.message}),t.dirty()):r.kind==="duration"?Vc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"duration",code:g.invalid_string,message:r.message}),t.dirty()):r.kind==="ip"?Gc(e.data,r.version)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"ip",code:g.invalid_string,message:r.message}),t.dirty()):r.kind==="jwt"?el(e.data,r.alg)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"jwt",code:g.invalid_string,message:r.message}),t.dirty()):r.kind==="cidr"?tl(e.data,r.version)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"cidr",code:g.invalid_string,message:r.message}),t.dirty()):r.kind==="base64"?Hc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"base64",code:g.invalid_string,message:r.message}),t.dirty()):r.kind==="base64url"?Yc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"base64url",code:g.invalid_string,message:r.message}),t.dirty()):R.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,o){return this.refinement(r=>e.test(r),{validation:t,code:g.invalid_string,...k.errToObj(o)})}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...k.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...k.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...k.errToObj(e)})}datetime(e){var t,o;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(o=e?.local)!==null&&o!==void 0?o:!1,...k.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...k.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...k.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...k.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...k.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...k.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...k.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...k.errToObj(t)})}nonempty(e){return this.min(1,k.errToObj(e))}trim(){return new ae({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ae({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ae({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ae.create=n=>{var e;return new ae({checks:[],typeName:C.ZodString,coerce:(e=n?.coerce)!==null&&e!==void 0?e:!1,...E(n)})};function nl(n,e){const t=(n.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,r=t>o?t:o,a=parseInt(n.toFixed(r).replace(".","")),_=parseInt(e.toFixed(r).replace(".",""));return a%_/Math.pow(10,r)}class ye extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==m.number){const r=this._getOrReturnCtx(e);return w(r,{code:g.invalid_type,expected:m.number,received:r.parsedType}),A}let t;const o=new K;for(const r of this._def.checks)r.kind==="int"?R.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),w(t,{code:g.invalid_type,expected:"integer",received:"float",message:r.message}),o.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),w(t,{code:g.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),o.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),w(t,{code:g.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),o.dirty()):r.kind==="multipleOf"?nl(e.data,r.value)!==0&&(t=this._getOrReturnCtx(e,t),w(t,{code:g.not_multiple_of,multipleOf:r.value,message:r.message}),o.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),w(t,{code:g.not_finite,message:r.message}),o.dirty()):R.assertNever(r);return{status:o.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,k.toString(t))}gt(e,t){return this.setLimit("min",e,!1,k.toString(t))}lte(e,t){return this.setLimit("max",e,!0,k.toString(t))}lt(e,t){return this.setLimit("max",e,!1,k.toString(t))}setLimit(e,t,o,r){return new ye({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:o,message:k.toString(r)}]})}_addCheck(e){return new ye({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&R.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(t===null||o.value>t)&&(t=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ye.create=n=>new ye({checks:[],typeName:C.ZodNumber,coerce:n?.coerce||!1,...E(n)});class ve extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==m.bigint)return this._getInvalidInput(e);let t;const o=new K;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),w(t,{code:g.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),o.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),w(t,{code:g.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),o.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),w(t,{code:g.not_multiple_of,multipleOf:r.value,message:r.message}),o.dirty()):R.assertNever(r);return{status:o.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.bigint,received:t.parsedType}),A}gte(e,t){return this.setLimit("min",e,!0,k.toString(t))}gt(e,t){return this.setLimit("min",e,!1,k.toString(t))}lte(e,t){return this.setLimit("max",e,!0,k.toString(t))}lt(e,t){return this.setLimit("max",e,!1,k.toString(t))}setLimit(e,t,o,r){return new ve({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:o,message:k.toString(r)}]})}_addCheck(e){return new ve({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ve.create=n=>{var e;return new ve({checks:[],typeName:C.ZodBigInt,coerce:(e=n?.coerce)!==null&&e!==void 0?e:!1,...E(n)})};class st extends M{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==m.boolean){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.boolean,received:t.parsedType}),A}return H(e.data)}}st.create=n=>new st({typeName:C.ZodBoolean,coerce:n?.coerce||!1,...E(n)});class Ne extends M{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==m.date){const r=this._getOrReturnCtx(e);return w(r,{code:g.invalid_type,expected:m.date,received:r.parsedType}),A}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return w(r,{code:g.invalid_date}),A}const t=new K;let o;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(o=this._getOrReturnCtx(e,o),w(o,{code:g.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(o=this._getOrReturnCtx(e,o),w(o,{code:g.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):R.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ne({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ne.create=n=>new Ne({checks:[],coerce:n?.coerce||!1,typeName:C.ZodDate,...E(n)});class Rt extends M{_parse(e){if(this._getType(e)!==m.symbol){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.symbol,received:t.parsedType}),A}return H(e.data)}}Rt.create=n=>new Rt({typeName:C.ZodSymbol,...E(n)});class at extends M{_parse(e){if(this._getType(e)!==m.undefined){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.undefined,received:t.parsedType}),A}return H(e.data)}}at.create=n=>new at({typeName:C.ZodUndefined,...E(n)});class it extends M{_parse(e){if(this._getType(e)!==m.null){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.null,received:t.parsedType}),A}return H(e.data)}}it.create=n=>new it({typeName:C.ZodNull,...E(n)});class Ue extends M{constructor(){super(...arguments),this._any=!0}_parse(e){return H(e.data)}}Ue.create=n=>new Ue({typeName:C.ZodAny,...E(n)});class De extends M{constructor(){super(...arguments),this._unknown=!0}_parse(e){return H(e.data)}}De.create=n=>new De({typeName:C.ZodUnknown,...E(n)});class fe extends M{_parse(e){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.never,received:t.parsedType}),A}}fe.create=n=>new fe({typeName:C.ZodNever,...E(n)});class $t extends M{_parse(e){if(this._getType(e)!==m.undefined){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.void,received:t.parsedType}),A}return H(e.data)}}$t.create=n=>new $t({typeName:C.ZodVoid,...E(n)});class ie extends M{_parse(e){const{ctx:t,status:o}=this._processInputParams(e),r=this._def;if(t.parsedType!==m.array)return w(t,{code:g.invalid_type,expected:m.array,received:t.parsedType}),A;if(r.exactLength!==null){const _=t.data.length>r.exactLength.value,c=t.data.length<r.exactLength.value;(_||c)&&(w(t,{code:_?g.too_big:g.too_small,minimum:c?r.exactLength.value:void 0,maximum:_?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),o.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(w(t,{code:g.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),o.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(w(t,{code:g.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),o.dirty()),t.common.async)return Promise.all([...t.data].map((_,c)=>r.type._parseAsync(new ce(t,_,t.path,c)))).then(_=>K.mergeArray(o,_));const a=[...t.data].map((_,c)=>r.type._parseSync(new ce(t,_,t.path,c)));return K.mergeArray(o,a)}get element(){return this._def.type}min(e,t){return new ie({...this._def,minLength:{value:e,message:k.toString(t)}})}max(e,t){return new ie({...this._def,maxLength:{value:e,message:k.toString(t)}})}length(e,t){return new ie({...this._def,exactLength:{value:e,message:k.toString(t)}})}nonempty(e){return this.min(1,e)}}ie.create=(n,e)=>new ie({type:n,minLength:null,maxLength:null,exactLength:null,typeName:C.ZodArray,...E(e)});function Ve(n){if(n instanceof P){const e={};for(const t in n.shape){const o=n.shape[t];e[t]=ue.create(Ve(o))}return new P({...n._def,shape:()=>e})}else return n instanceof ie?new ie({...n._def,type:Ve(n.element)}):n instanceof ue?ue.create(Ve(n.unwrap())):n instanceof Se?Se.create(Ve(n.unwrap())):n instanceof le?le.create(n.items.map(e=>Ve(e))):n}class P extends M{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=R.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==m.object){const u=this._getOrReturnCtx(e);return w(u,{code:g.invalid_type,expected:m.object,received:u.parsedType}),A}const{status:t,ctx:o}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),_=[];if(!(this._def.catchall instanceof fe&&this._def.unknownKeys==="strip"))for(const u in o.data)a.includes(u)||_.push(u);const c=[];for(const u of a){const h=r[u],O=o.data[u];c.push({key:{status:"valid",value:u},value:h._parse(new ce(o,O,o.path,u)),alwaysSet:u in o.data})}if(this._def.catchall instanceof fe){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of _)c.push({key:{status:"valid",value:h},value:{status:"valid",value:o.data[h]}});else if(u==="strict")_.length>0&&(w(o,{code:g.unrecognized_keys,keys:_}),t.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of _){const O=o.data[h];c.push({key:{status:"valid",value:h},value:u._parse(new ce(o,O,o.path,h)),alwaysSet:h in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const u=[];for(const h of c){const O=await h.key,$=await h.value;u.push({key:O,value:$,alwaysSet:h.alwaysSet})}return u}).then(u=>K.mergeObjectSync(t,u)):K.mergeObjectSync(t,c)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new P({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,o)=>{var r,a,_,c;const u=(_=(a=(r=this._def).errorMap)===null||a===void 0?void 0:a.call(r,t,o).message)!==null&&_!==void 0?_:o.defaultError;return t.code==="unrecognized_keys"?{message:(c=k.errToObj(e).message)!==null&&c!==void 0?c:u}:{message:u}}}:{}})}strip(){return new P({...this._def,unknownKeys:"strip"})}passthrough(){return new P({...this._def,unknownKeys:"passthrough"})}extend(e){return new P({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new P({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:C.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new P({...this._def,catchall:e})}pick(e){const t={};return R.objectKeys(e).forEach(o=>{e[o]&&this.shape[o]&&(t[o]=this.shape[o])}),new P({...this._def,shape:()=>t})}omit(e){const t={};return R.objectKeys(this.shape).forEach(o=>{e[o]||(t[o]=this.shape[o])}),new P({...this._def,shape:()=>t})}deepPartial(){return Ve(this)}partial(e){const t={};return R.objectKeys(this.shape).forEach(o=>{const r=this.shape[o];e&&!e[o]?t[o]=r:t[o]=r.optional()}),new P({...this._def,shape:()=>t})}required(e){const t={};return R.objectKeys(this.shape).forEach(o=>{if(e&&!e[o])t[o]=this.shape[o];else{let r=this.shape[o];for(;r instanceof ue;)r=r._def.innerType;t[o]=r}}),new P({...this._def,shape:()=>t})}keyof(){return No(R.objectKeys(this.shape))}}P.create=(n,e)=>new P({shape:()=>n,unknownKeys:"strip",catchall:fe.create(),typeName:C.ZodObject,...E(e)}),P.strictCreate=(n,e)=>new P({shape:()=>n,unknownKeys:"strict",catchall:fe.create(),typeName:C.ZodObject,...E(e)}),P.lazycreate=(n,e)=>new P({shape:n,unknownKeys:"strip",catchall:fe.create(),typeName:C.ZodObject,...E(e)});class _t extends M{_parse(e){const{ctx:t}=this._processInputParams(e),o=this._def.options;function r(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const _=a.map(c=>new ee(c.ctx.common.issues));return w(t,{code:g.invalid_union,unionErrors:_}),A}if(t.common.async)return Promise.all(o.map(async a=>{const _={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:_}),ctx:_}})).then(r);{let a;const _=[];for(const u of o){const h={...t,common:{...t.common,issues:[]},parent:null},O=u._parseSync({data:t.data,path:t.path,parent:h});if(O.status==="valid")return O;O.status==="dirty"&&!a&&(a={result:O,ctx:h}),h.common.issues.length&&_.push(h.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const c=_.map(u=>new ee(u));return w(t,{code:g.invalid_union,unionErrors:c}),A}}get options(){return this._def.options}}_t.create=(n,e)=>new _t({options:n,typeName:C.ZodUnion,...E(e)});const ke=n=>n instanceof lt?ke(n.schema):n instanceof _e?ke(n.innerType()):n instanceof ut?[n.value]:n instanceof xe?n.options:n instanceof pt?R.objectValues(n.enum):n instanceof gt?ke(n._def.innerType):n instanceof at?[void 0]:n instanceof it?[null]:n instanceof ue?[void 0,...ke(n.unwrap())]:n instanceof Se?[null,...ke(n.unwrap())]:n instanceof en||n instanceof wt?ke(n.unwrap()):n instanceof ht?ke(n._def.innerType):[];class Zt extends M{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.object)return w(t,{code:g.invalid_type,expected:m.object,received:t.parsedType}),A;const o=this.discriminator,r=t.data[o],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(w(t,{code:g.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),A)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,o){const r=new Map;for(const a of t){const _=ke(a.shape[e]);if(!_.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of _){if(r.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);r.set(c,a)}}return new Zt({typeName:C.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...E(o)})}}function Gt(n,e){const t=he(n),o=he(e);if(n===e)return{valid:!0,data:n};if(t===m.object&&o===m.object){const r=R.objectKeys(e),a=R.objectKeys(n).filter(c=>r.indexOf(c)!==-1),_={...n,...e};for(const c of a){const u=Gt(n[c],e[c]);if(!u.valid)return{valid:!1};_[c]=u.data}return{valid:!0,data:_}}else if(t===m.array&&o===m.array){if(n.length!==e.length)return{valid:!1};const r=[];for(let a=0;a<n.length;a++){const _=n[a],c=e[a],u=Gt(_,c);if(!u.valid)return{valid:!1};r.push(u.data)}return{valid:!0,data:r}}else return t===m.date&&o===m.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class dt extends M{_parse(e){const{status:t,ctx:o}=this._processInputParams(e),r=(a,_)=>{if(Yt(a)||Yt(_))return A;const c=Gt(a.value,_.value);return c.valid?((Xt(a)||Xt(_))&&t.dirty(),{status:t.value,value:c.data}):(w(o,{code:g.invalid_intersection_types}),A)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([a,_])=>r(a,_)):r(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}dt.create=(n,e,t)=>new dt({left:n,right:e,typeName:C.ZodIntersection,...E(t)});class le extends M{_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.parsedType!==m.array)return w(o,{code:g.invalid_type,expected:m.array,received:o.parsedType}),A;if(o.data.length<this._def.items.length)return w(o,{code:g.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),A;!this._def.rest&&o.data.length>this._def.items.length&&(w(o,{code:g.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...o.data].map((a,_)=>{const c=this._def.items[_]||this._def.rest;return c?c._parse(new ce(o,a,o.path,_)):null}).filter(a=>!!a);return o.common.async?Promise.all(r).then(a=>K.mergeArray(t,a)):K.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new le({...this._def,rest:e})}}le.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new le({items:n,typeName:C.ZodTuple,rest:null,...E(e)})};class ct extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.parsedType!==m.object)return w(o,{code:g.invalid_type,expected:m.object,received:o.parsedType}),A;const r=[],a=this._def.keyType,_=this._def.valueType;for(const c in o.data)r.push({key:a._parse(new ce(o,c,o.path,c)),value:_._parse(new ce(o,o.data[c],o.path,c)),alwaysSet:c in o.data});return o.common.async?K.mergeObjectAsync(t,r):K.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,o){return t instanceof M?new ct({keyType:e,valueType:t,typeName:C.ZodRecord,...E(o)}):new ct({keyType:ae.create(),valueType:e,typeName:C.ZodRecord,...E(t)})}}class jt extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.parsedType!==m.map)return w(o,{code:g.invalid_type,expected:m.map,received:o.parsedType}),A;const r=this._def.keyType,a=this._def.valueType,_=[...o.data.entries()].map(([c,u],h)=>({key:r._parse(new ce(o,c,o.path,[h,"key"])),value:a._parse(new ce(o,u,o.path,[h,"value"]))}));if(o.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of _){const h=await u.key,O=await u.value;if(h.status==="aborted"||O.status==="aborted")return A;(h.status==="dirty"||O.status==="dirty")&&t.dirty(),c.set(h.value,O.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const u of _){const h=u.key,O=u.value;if(h.status==="aborted"||O.status==="aborted")return A;(h.status==="dirty"||O.status==="dirty")&&t.dirty(),c.set(h.value,O.value)}return{status:t.value,value:c}}}}jt.create=(n,e,t)=>new jt({valueType:e,keyType:n,typeName:C.ZodMap,...E(t)});class Me extends M{_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.parsedType!==m.set)return w(o,{code:g.invalid_type,expected:m.set,received:o.parsedType}),A;const r=this._def;r.minSize!==null&&o.data.size<r.minSize.value&&(w(o,{code:g.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&o.data.size>r.maxSize.value&&(w(o,{code:g.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function _(u){const h=new Set;for(const O of u){if(O.status==="aborted")return A;O.status==="dirty"&&t.dirty(),h.add(O.value)}return{status:t.value,value:h}}const c=[...o.data.values()].map((u,h)=>a._parse(new ce(o,u,o.path,h)));return o.common.async?Promise.all(c).then(u=>_(u)):_(c)}min(e,t){return new Me({...this._def,minSize:{value:e,message:k.toString(t)}})}max(e,t){return new Me({...this._def,maxSize:{value:e,message:k.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Me.create=(n,e)=>new Me({valueType:n,minSize:null,maxSize:null,typeName:C.ZodSet,...E(e)});class ze extends M{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.function)return w(t,{code:g.invalid_type,expected:m.function,received:t.parsedType}),A;function o(c,u){return Nt({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Et(),Pe].filter(h=>!!h),issueData:{code:g.invalid_arguments,argumentsError:u}})}function r(c,u){return Nt({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Et(),Pe].filter(h=>!!h),issueData:{code:g.invalid_return_type,returnTypeError:u}})}const a={errorMap:t.common.contextualErrorMap},_=t.data;if(this._def.returns instanceof Be){const c=this;return H(async function(...u){const h=new ee([]),O=await c._def.args.parseAsync(u,a).catch(ne=>{throw h.addIssue(o(u,ne)),h}),$=await Reflect.apply(_,this,O);return await c._def.returns._def.type.parseAsync($,a).catch(ne=>{throw h.addIssue(r($,ne)),h})})}else{const c=this;return H(function(...u){const h=c._def.args.safeParse(u,a);if(!h.success)throw new ee([o(u,h.error)]);const O=Reflect.apply(_,this,h.data),$=c._def.returns.safeParse(O,a);if(!$.success)throw new ee([r(O,$.error)]);return $.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ze({...this._def,args:le.create(e).rest(De.create())})}returns(e){return new ze({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,o){return new ze({args:e||le.create([]).rest(De.create()),returns:t||De.create(),typeName:C.ZodFunction,...E(o)})}}class lt extends M{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}lt.create=(n,e)=>new lt({getter:n,typeName:C.ZodLazy,...E(e)});class ut extends M{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return w(t,{received:t.data,code:g.invalid_literal,expected:this._def.value}),A}return{status:"valid",value:e.data}}get value(){return this._def.value}}ut.create=(n,e)=>new ut({value:n,typeName:C.ZodLiteral,...E(e)});function No(n,e){return new xe({values:n,typeName:C.ZodEnum,...E(e)})}class xe extends M{constructor(){super(...arguments),rt.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),o=this._def.values;return w(t,{expected:R.joinValues(o),received:t.parsedType,code:g.invalid_type}),A}if(Mt(this,rt)||Ao(this,rt,new Set(this._def.values)),!Mt(this,rt).has(e.data)){const t=this._getOrReturnCtx(e),o=this._def.values;return w(t,{received:t.data,code:g.invalid_enum_value,options:o}),A}return H(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return xe.create(e,{...this._def,...t})}exclude(e,t=this._def){return xe.create(this.options.filter(o=>!e.includes(o)),{...this._def,...t})}}rt=new WeakMap,xe.create=No;class pt extends M{constructor(){super(...arguments),ot.set(this,void 0)}_parse(e){const t=R.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==m.string&&o.parsedType!==m.number){const r=R.objectValues(t);return w(o,{expected:R.joinValues(r),received:o.parsedType,code:g.invalid_type}),A}if(Mt(this,ot)||Ao(this,ot,new Set(R.getValidEnumValues(this._def.values))),!Mt(this,ot).has(e.data)){const r=R.objectValues(t);return w(o,{received:o.data,code:g.invalid_enum_value,options:r}),A}return H(e.data)}get enum(){return this._def.values}}ot=new WeakMap,pt.create=(n,e)=>new pt({values:n,typeName:C.ZodNativeEnum,...E(e)});class Be extends M{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.promise&&t.common.async===!1)return w(t,{code:g.invalid_type,expected:m.promise,received:t.parsedType}),A;const o=t.parsedType===m.promise?t.data:Promise.resolve(t.data);return H(o.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Be.create=(n,e)=>new Be({type:n,typeName:C.ZodPromise,...E(e)});class _e extends M{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===C.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:o}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:_=>{w(o,_),_.fatal?t.abort():t.dirty()},get path(){return o.path}};if(a.addIssue=a.addIssue.bind(a),r.type==="preprocess"){const _=r.transform(o.data,a);if(o.common.async)return Promise.resolve(_).then(async c=>{if(t.value==="aborted")return A;const u=await this._def.schema._parseAsync({data:c,path:o.path,parent:o});return u.status==="aborted"?A:u.status==="dirty"||t.value==="dirty"?Dt(u.value):u});{if(t.value==="aborted")return A;const c=this._def.schema._parseSync({data:_,path:o.path,parent:o});return c.status==="aborted"?A:c.status==="dirty"||t.value==="dirty"?Dt(c.value):c}}if(r.type==="refinement"){const _=c=>{const u=r.refinement(c,a);if(o.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(o.common.async===!1){const c=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return c.status==="aborted"?A:(c.status==="dirty"&&t.dirty(),_(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(c=>c.status==="aborted"?A:(c.status==="dirty"&&t.dirty(),_(c.value).then(()=>({status:t.value,value:c.value}))))}if(r.type==="transform")if(o.common.async===!1){const _=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!Ee(_))return _;const c=r.transform(_.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(_=>Ee(_)?Promise.resolve(r.transform(_.value,a)).then(c=>({status:t.value,value:c})):_);R.assertNever(r)}}_e.create=(n,e,t)=>new _e({schema:n,typeName:C.ZodEffects,effect:e,...E(t)}),_e.createWithPreprocess=(n,e,t)=>new _e({schema:e,effect:{type:"preprocess",transform:n},typeName:C.ZodEffects,...E(t)});class ue extends M{_parse(e){return this._getType(e)===m.undefined?H(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ue.create=(n,e)=>new ue({innerType:n,typeName:C.ZodOptional,...E(e)});class Se extends M{_parse(e){return this._getType(e)===m.null?H(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Se.create=(n,e)=>new Se({innerType:n,typeName:C.ZodNullable,...E(e)});class gt extends M{_parse(e){const{ctx:t}=this._processInputParams(e);let o=t.data;return t.parsedType===m.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}gt.create=(n,e)=>new gt({innerType:n,typeName:C.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...E(e)});class ht extends M{_parse(e){const{ctx:t}=this._processInputParams(e),o={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return nt(r)?r.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ee(o.common.issues)},input:o.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new ee(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}ht.create=(n,e)=>new ht({innerType:n,typeName:C.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...E(e)});class Ft extends M{_parse(e){if(this._getType(e)!==m.nan){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.nan,received:t.parsedType}),A}return{status:"valid",value:e.data}}}Ft.create=n=>new Ft({typeName:C.ZodNaN,...E(n)});const rl=Symbol("zod_brand");class en extends M{_parse(e){const{ctx:t}=this._processInputParams(e),o=t.data;return this._def.type._parse({data:o,path:t.path,parent:t})}unwrap(){return this._def.type}}class ft extends M{_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return r.status==="aborted"?A:r.status==="dirty"?(t.dirty(),Dt(r.value)):this._def.out._parseAsync({data:r.value,path:o.path,parent:o})})();{const r=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return r.status==="aborted"?A:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:o.path,parent:o})}}static create(e,t){return new ft({in:e,out:t,typeName:C.ZodPipeline})}}class wt extends M{_parse(e){const t=this._def.innerType._parse(e),o=r=>(Ee(r)&&(r.value=Object.freeze(r.value)),r);return nt(t)?t.then(r=>o(r)):o(t)}unwrap(){return this._def.innerType}}wt.create=(n,e)=>new wt({innerType:n,typeName:C.ZodReadonly,...E(e)});function Do(n,e={},t){return n?Ue.create().superRefine((o,r)=>{var a,_;if(!n(o)){const c=typeof e=="function"?e(o):typeof e=="string"?{message:e}:e,u=(_=(a=c.fatal)!==null&&a!==void 0?a:t)!==null&&_!==void 0?_:!0,h=typeof c=="string"?{message:c}:c;r.addIssue({code:"custom",...h,fatal:u})}}):Ue.create()}const ol={object:P.lazycreate};var C;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(C||(C={}));const sl=(n,e={message:`Input not instance of ${n.name}`})=>Do(t=>t instanceof n,e),Mo=ae.create,Ro=ye.create,al=Ft.create,il=ve.create,$o=st.create,_l=Ne.create,dl=Rt.create,cl=at.create,ll=it.create,ul=Ue.create,pl=De.create,gl=fe.create,hl=$t.create,fl=ie.create,wl=P.create,bl=P.strictCreate,ml=_t.create,yl=Zt.create,vl=dt.create,kl=le.create,xl=ct.create,Sl=jt.create,Cl=Me.create,Al=ze.create,Ol=lt.create,Tl=ut.create,Il=xe.create,El=pt.create,Nl=Be.create,Zo=_e.create,Dl=ue.create,Ml=Se.create,Rl=_e.createWithPreprocess,$l=ft.create;var S=Object.freeze({__proto__:null,defaultErrorMap:Pe,setErrorMap:Rc,getErrorMap:Et,makeIssue:Nt,EMPTY_PATH:$c,addIssueToContext:w,ParseStatus:K,INVALID:A,DIRTY:Dt,OK:H,isAborted:Yt,isDirty:Xt,isValid:Ee,isAsync:nt,get util(){return R},get objectUtil(){return Ht},ZodParsedType:m,getParsedType:he,ZodType:M,datetimeRegex:Eo,ZodString:ae,ZodNumber:ye,ZodBigInt:ve,ZodBoolean:st,ZodDate:Ne,ZodSymbol:Rt,ZodUndefined:at,ZodNull:it,ZodAny:Ue,ZodUnknown:De,ZodNever:fe,ZodVoid:$t,ZodArray:ie,ZodObject:P,ZodUnion:_t,ZodDiscriminatedUnion:Zt,ZodIntersection:dt,ZodTuple:le,ZodRecord:ct,ZodMap:jt,ZodSet:Me,ZodFunction:ze,ZodLazy:lt,ZodLiteral:ut,ZodEnum:xe,ZodNativeEnum:pt,ZodPromise:Be,ZodEffects:_e,ZodTransformer:_e,ZodOptional:ue,ZodNullable:Se,ZodDefault:gt,ZodCatch:ht,ZodNaN:Ft,BRAND:rl,ZodBranded:en,ZodPipeline:ft,ZodReadonly:wt,custom:Do,Schema:M,ZodSchema:M,late:ol,get ZodFirstPartyTypeKind(){return C},coerce:{string:n=>ae.create({...n,coerce:!0}),number:n=>ye.create({...n,coerce:!0}),boolean:n=>st.create({...n,coerce:!0}),bigint:n=>ve.create({...n,coerce:!0}),date:n=>Ne.create({...n,coerce:!0})},any:ul,array:fl,bigint:il,boolean:$o,date:_l,discriminatedUnion:yl,effect:Zo,enum:Il,function:Al,instanceof:sl,intersection:vl,lazy:Ol,literal:Tl,map:Sl,nan:al,nativeEnum:El,never:gl,null:ll,nullable:Ml,number:Ro,object:wl,oboolean:()=>$o().optional(),onumber:()=>Ro().optional(),optional:Dl,ostring:()=>Mo().optional(),pipeline:$l,preprocess:Rl,promise:Nl,record:xl,set:Cl,strictObject:bl,string:Mo,symbol:dl,transformer:Zo,tuple:kl,undefined:cl,union:ml,unknown:pl,void:hl,NEVER:A,ZodIssueCode:g,quotelessJson:Mc,ZodError:ee});const We={TEXT:0,IMAGE:1,CODE:2,MATH:3,QUERY:4,CAROUSEL:5},jo={SUCCESS:0,INVALID_REQUEST:1,PASSWORD_INCORRECT:2,EXCEED_MAX_ATTEMPTS:3,NO_AUTHORIZATION:4,UNKNOWN_ERROR:5,TARGET_NOT_FOUND:6,INVALID_RESPONSE:7,NO_AXIOS:8,FILE_EXISTS:9,DIR_NOT_FOUND:10,TOKEN_EXPIRED:11,PATH_NOT_FOUND:12,PATH_EXISTS_AND_NOT_EMPTY:13,PATH_CANNOT_ACCESS:14},Zl=Object.fromEntries(Object.entries(jo).map(([n,e])=>[e,n]));({...jo,...Zl});const jl="blockInfo",Fl="blockData_",Lt="data",Ll=S.tuple([S.literal(We.TEXT),S.any()]),Fo=S.enum(["blend","circle","invert","invertW","outline","blendLuminosity"]),Pl=S.tuple([S.literal(We.IMAGE),S.string(),S.enum(["left","center"]),S.string().nullable(),S.number().nullable(),S.array(Fo).nullable()]);S.tuple([S.literal(We.CAROUSEL),S.array(S.string()),S.string().nullable(),S.number().nullable(),S.array(Fo).nullable()]);const Ul=S.tuple([S.literal(We.CODE),S.string(),S.string()]),Vl=S.tuple([S.literal(We.MATH),S.string()]),zl=S.tuple([S.literal(We.QUERY),S.any(),S.string(),S.boolean(),S.boolean()]),Bl=S.union([Ll,Pl,Ul,Vl,zl]);S.tuple([Bl.nullable(),S.record(S.any())]);const tn=S.string(),Wl=S.number().min(0).max(5);S.tuple([Wl,tn,S.array(tn),S.number().nullable(),tn.nullable()]);function Jl(n){return{all:n=n||new Map,on:function(e,t){var o=n.get(e);o?o.push(t):n.set(e,[t])},off:function(e,t){var o=n.get(e);o&&(t?o.splice(o.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var o=n.get(e);o&&o.slice().map(function(r){r(t)}),(o=n.get("*"))&&o.slice().map(function(r){r(e,t)})}}}var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ql={exports:{}};(function(n,e){(function(t,o){n.exports=o()})(Kl,function(){var t=1e3,o=6e4,r=36e5,a="millisecond",_="second",c="minute",u="hour",h="day",O="week",$="month",ne="quarter",pe="year",Ae="date",Go="Invalid Date",Eu=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Nu=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Du={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(T){var v=["th","st","nd","rd"],b=T%100;return"["+T+(v[(b-20)%10]||v[b]||v[0])+"]"}},an=function(T,v,b){var x=String(T);return!x||x.length>=v?T:""+Array(v+1-x.length).join(b)+T},Mu={s:an,z:function(T){var v=-T.utcOffset(),b=Math.abs(v),x=Math.floor(b/60),y=b%60;return(v<=0?"+":"-")+an(x,2,"0")+":"+an(y,2,"0")},m:function T(v,b){if(v.date()<b.date())return-T(b,v);var x=12*(b.year()-v.year())+(b.month()-v.month()),y=v.clone().add(x,$),N=b-y<0,D=v.clone().add(x+(N?-1:1),$);return+(-(x+(b-y)/(N?y-D:D-y))||0)},a:function(T){return T<0?Math.ceil(T)||0:Math.floor(T)},p:function(T){return{M:$,y:pe,w:O,d:h,D:Ae,h:u,m:c,s:_,ms:a,Q:ne}[T]||String(T||"").toLowerCase().replace(/s$/,"")},u:function(T){return T===void 0}},vt="en",$e={};$e[vt]=Du;var es="$isDayjsObject",_n=function(T){return T instanceof zt||!(!T||!T[es])},Vt=function T(v,b,x){var y;if(!v)return vt;if(typeof v=="string"){var N=v.toLowerCase();$e[N]&&(y=N),b&&($e[N]=b,y=N);var D=v.split("-");if(!y&&D.length>1)return T(D[0])}else{var j=v.name;$e[j]=v,y=j}return!x&&y&&(vt=y),y||!x&&vt},z=function(T,v){if(_n(T))return T.clone();var b=typeof v=="object"?v:{};return b.date=T,b.args=arguments,new zt(b)},Z=Mu;Z.l=Vt,Z.i=_n,Z.w=function(T,v){return z(T,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var zt=function(){function T(b){this.$L=Vt(b.locale,null,!0),this.parse(b),this.$x=this.$x||b.x||{},this[es]=!0}var v=T.prototype;return v.parse=function(b){this.$d=function(x){var y=x.date,N=x.utc;if(y===null)return new Date(NaN);if(Z.u(y))return new Date;if(y instanceof Date)return new Date(y);if(typeof y=="string"&&!/Z$/i.test(y)){var D=y.match(Eu);if(D){var j=D[2]-1||0,U=(D[7]||"0").substring(0,3);return N?new Date(Date.UTC(D[1],j,D[3]||1,D[4]||0,D[5]||0,D[6]||0,U)):new Date(D[1],j,D[3]||1,D[4]||0,D[5]||0,D[6]||0,U)}}return new Date(y)}(b),this.init()},v.init=function(){var b=this.$d;this.$y=b.getFullYear(),this.$M=b.getMonth(),this.$D=b.getDate(),this.$W=b.getDay(),this.$H=b.getHours(),this.$m=b.getMinutes(),this.$s=b.getSeconds(),this.$ms=b.getMilliseconds()},v.$utils=function(){return Z},v.isValid=function(){return this.$d.toString()!==Go},v.isSame=function(b,x){var y=z(b);return this.startOf(x)<=y&&y<=this.endOf(x)},v.isAfter=function(b,x){return z(b)<this.startOf(x)},v.isBefore=function(b,x){return this.endOf(x)<z(b)},v.$g=function(b,x,y){return Z.u(b)?this[x]:this.set(y,b)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(b,x){var y=this,N=!!Z.u(x)||x,D=Z.p(b),j=function(je,Q){var Oe=Z.w(y.$u?Date.UTC(y.$y,Q,je):new Date(y.$y,Q,je),y);return N?Oe:Oe.endOf(h)},U=function(je,Q){return Z.w(y.toDate()[je].apply(y.toDate("s"),(N?[0,0,0,0]:[23,59,59,999]).slice(Q)),y)},B=this.$W,q=this.$M,re=this.$D,He="set"+(this.$u?"UTC":"");switch(D){case pe:return N?j(1,0):j(31,11);case $:return N?j(1,q):j(0,q+1);case O:var Ze=this.$locale().weekStart||0,kt=(B<Ze?B+7:B)-Ze;return j(N?re-kt:re+(6-kt),q);case h:case Ae:return U(He+"Hours",0);case u:return U(He+"Minutes",1);case c:return U(He+"Seconds",2);case _:return U(He+"Milliseconds",3);default:return this.clone()}},v.endOf=function(b){return this.startOf(b,!1)},v.$set=function(b,x){var y,N=Z.p(b),D="set"+(this.$u?"UTC":""),j=(y={},y[h]=D+"Date",y[Ae]=D+"Date",y[$]=D+"Month",y[pe]=D+"FullYear",y[u]=D+"Hours",y[c]=D+"Minutes",y[_]=D+"Seconds",y[a]=D+"Milliseconds",y)[N],U=N===h?this.$D+(x-this.$W):x;if(N===$||N===pe){var B=this.clone().set(Ae,1);B.$d[j](U),B.init(),this.$d=B.set(Ae,Math.min(this.$D,B.daysInMonth())).$d}else j&&this.$d[j](U);return this.init(),this},v.set=function(b,x){return this.clone().$set(b,x)},v.get=function(b){return this[Z.p(b)]()},v.add=function(b,x){var y,N=this;b=Number(b);var D=Z.p(x),j=function(q){var re=z(N);return Z.w(re.date(re.date()+Math.round(q*b)),N)};if(D===$)return this.set($,this.$M+b);if(D===pe)return this.set(pe,this.$y+b);if(D===h)return j(1);if(D===O)return j(7);var U=(y={},y[c]=o,y[u]=r,y[_]=t,y)[D]||1,B=this.$d.getTime()+b*U;return Z.w(B,this)},v.subtract=function(b,x){return this.add(-1*b,x)},v.format=function(b){var x=this,y=this.$locale();if(!this.isValid())return y.invalidDate||Go;var N=b||"YYYY-MM-DDTHH:mm:ssZ",D=Z.z(this),j=this.$H,U=this.$m,B=this.$M,q=y.weekdays,re=y.months,He=y.meridiem,Ze=function(Q,Oe,xt,Bt){return Q&&(Q[Oe]||Q(x,N))||xt[Oe].slice(0,Bt)},kt=function(Q){return Z.s(j%12||12,Q,"0")},je=He||function(Q,Oe,xt){var Bt=Q<12?"AM":"PM";return xt?Bt.toLowerCase():Bt};return N.replace(Nu,function(Q,Oe){return Oe||function(xt){switch(xt){case"YY":return String(x.$y).slice(-2);case"YYYY":return Z.s(x.$y,4,"0");case"M":return B+1;case"MM":return Z.s(B+1,2,"0");case"MMM":return Ze(y.monthsShort,B,re,3);case"MMMM":return Ze(re,B);case"D":return x.$D;case"DD":return Z.s(x.$D,2,"0");case"d":return String(x.$W);case"dd":return Ze(y.weekdaysMin,x.$W,q,2);case"ddd":return Ze(y.weekdaysShort,x.$W,q,3);case"dddd":return q[x.$W];case"H":return String(j);case"HH":return Z.s(j,2,"0");case"h":return kt(1);case"hh":return kt(2);case"a":return je(j,U,!0);case"A":return je(j,U,!1);case"m":return String(U);case"mm":return Z.s(U,2,"0");case"s":return String(x.$s);case"ss":return Z.s(x.$s,2,"0");case"SSS":return Z.s(x.$ms,3,"0");case"Z":return D}return null}(Q)||D.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(b,x,y){var N,D=this,j=Z.p(x),U=z(b),B=(U.utcOffset()-this.utcOffset())*o,q=this-U,re=function(){return Z.m(D,U)};switch(j){case pe:N=re()/12;break;case $:N=re();break;case ne:N=re()/3;break;case O:N=(q-B)/6048e5;break;case h:N=(q-B)/864e5;break;case u:N=q/r;break;case c:N=q/o;break;case _:N=q/t;break;default:N=q}return y?N:Z.a(N)},v.daysInMonth=function(){return this.endOf($).$D},v.$locale=function(){return $e[this.$L]},v.locale=function(b,x){if(!b)return this.$L;var y=this.clone(),N=Vt(b,x,!0);return N&&(y.$L=N),y},v.clone=function(){return Z.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},T}(),ts=zt.prototype;return z.prototype=ts,[["$ms",a],["$s",_],["$m",c],["$H",u],["$W",h],["$M",$],["$y",pe],["$D",Ae]].forEach(function(T){ts[T[1]]=function(v){return this.$g(v,T[0],T[1])}}),z.extend=function(T,v){return T.$i||(T(v,zt,z),T.$i=!0),z},z.locale=Vt,z.isDayjs=_n,z.unix=function(T){return z(1e3*T)},z.en=$e[vt],z.Ls=$e,z.p={},z})})(ql),S.any().pipe(S.union([S.object({type:S.literal("ui"),changeSources:S.array(S.string()).optional()}),S.object({type:S.literal("local")}),S.object({type:S.literal("remote")})]));const Hl=(n,e)=>{const t=[];for(const o in n)t.push(e(n[o],o));return t},Yl=n=>Hl(n,(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&");class Xl{ws;constructor(e){this.ws=e}send(e){try{this.ws.send(e)}catch{this.close()}}close(){this.ws.close()}onMessage(e){this.ws.onmessage=t=>{t.data.arrayBuffer().then(o=>{e(new Uint8Array(o))})}}onClose(e){this.ws.onclose=e}onError(e){this.ws.onerror=e}onOpen(e){this.ws.onopen=e}}class Ql{params;protocol;constructor(e,t){this.params=e,this.protocol=t}connect(e,t){const o=Yl(this.params),r=e+(o.length===0?"":"?"+o),a=new WebSocket(r,this.protocol);return new Xl(a)}}const Gl=Math.floor,eu=(n,e)=>n<e?n:e,tu=(n,e)=>n>e?n:e,Lo=128,Pt=127,nu=Number.MAX_SAFE_INTEGER,ru=n=>{const e=unescape(encodeURIComponent(n)),t=e.length,o=new Uint8Array(t);for(let r=0;r<t;r++)o[r]=e.codePointAt(r);return o},bt=typeof TextEncoder<"u"?new TextEncoder:null,ou=n=>bt.encode(n),su=bt?ou:ru;let mt=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});mt&&mt.decode(new Uint8Array).length===1&&(mt=null);class au{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Po=()=>new au,iu=n=>{let e=n.cpos;for(let t=0;t<n.bufs.length;t++)e+=n.bufs[t].length;return e},Uo=n=>{const e=new Uint8Array(iu(n));let t=0;for(let o=0;o<n.bufs.length;o++){const r=n.bufs[o];e.set(r,t),t+=r.length}return e.set(new Uint8Array(n.cbuf.buffer,0,n.cpos),t),e},yt=(n,e)=>{const t=n.cbuf.length;n.cpos===t&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(t*2),n.cpos=0),n.cbuf[n.cpos++]=e},Vo=yt,nn=(n,e)=>{for(;e>Pt;)yt(n,Lo|Pt&e),e=Gl(e/128);yt(n,Pt&e)},rn=new Uint8Array(3e4),_u=rn.length/3,du=(n,e)=>{if(e.length<_u){const t=bt.encodeInto(e,rn).written||0;nn(n,t);for(let o=0;o<t;o++)yt(n,rn[o])}else on(n,su(e))},cu=(n,e)=>{const t=unescape(encodeURIComponent(e)),o=t.length;nn(n,o);for(let r=0;r<o;r++)yt(n,t.codePointAt(r))},zo=bt&&bt.encodeInto?du:cu,lu=(n,e)=>{const t=n.cbuf.length,o=n.cpos,r=eu(t-o,e.length),a=e.length-r;n.cbuf.set(e.subarray(0,r),o),n.cpos+=r,a>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(tu(t*2,a)),n.cbuf.set(e.subarray(r)),n.cpos=a)},on=(n,e)=>{nn(n,e.byteLength),lu(n,e)},Bo=n=>new Error(n),uu=Bo("Unexpected end of array"),pu=Bo("Integer out of Range");class gu{constructor(e){this.arr=e,this.pos=0}}const hu=n=>new gu(n),fu=(n,e)=>{const t=new Uint8Array(n.arr.buffer,n.pos+n.arr.byteOffset,e);return n.pos+=e,t},Je=n=>fu(n,Wo(n)),sn=n=>n.arr[n.pos++],Wo=n=>{let e=0,t=1;const o=n.arr.length;for(;n.pos<o;){const r=n.arr[n.pos++];if(e=e+(r&Pt)*t,t*=128,r<Lo)return e;if(e>nu)throw pu}throw uu},wu=n=>{let e=Wo(n);if(e===0)return"";{let t=String.fromCodePoint(sn(n));if(--e<100)for(;e--;)t+=String.fromCodePoint(sn(n));else for(;e>0;){const o=e<1e4?e:1e4,r=n.arr.subarray(n.pos,n.pos+o);n.pos+=o,t+=String.fromCodePoint.apply(null,r),e-=o}return decodeURIComponent(escape(t))}},bu=n=>mt.decode(Je(n)),Ut=mt?bu:wu,te={canSync:0,startSync:1,postConflict:2,postUpdate:3},mu=(n,e)=>{const t=e.export({mode:"snapshot"}),o=Po();return Vo(o,te.canSync),zo(o,n),on(o,t),Uo(o)},yu=n=>{const e=Ut(n),t=Je(n);return{type:te.canSync,docId:e,snapshot:t}},vu=n=>{const e=Ut(n),t=Je(n),o=Je(n);return{type:te.startSync,docId:e,vv:t,updates:o}},ku=n=>{const e=Ut(n),t=Je(n);return{type:te.postConflict,docId:e,snapshot:t}},Jo=(n,e)=>{const t=Po();return Vo(t,te.postUpdate),zo(t,n),on(t,e),Uo(t)},xu=n=>{const e=Ut(n),t=Je(n);return{type:te.postUpdate,docId:e,updates:t}},Su={[te.canSync]:yu,[te.startSync]:vu,[te.postConflict]:ku,[te.postUpdate]:xu},Cu=n=>{const e=hu(n),t=sn(e),o=Su[t];if(!o)throw new Error(`Unknown message type: ${t}`);return o(e)},Ko=()=>{let n;return{promise:new Promise(e=>{n=e}),resolve:n}};class Au{connection;url;protocol;network;wsConnected;wsConnecting;docs;shouldReconnect;unsuccessfulReconnects;maxBackoffTime;whenReady;whenReadyResolve;eventBus;constructor(e,t,o){this.connection=null,this.url=e,this.protocol=o,this.network=t,this.docs=new Map,this.wsConnected=!1,this.wsConnecting=!1,this.shouldReconnect=!1,this.unsuccessfulReconnects=0,this.maxBackoffTime=2500;const{promise:r,resolve:a}=Ko();this.whenReady=r,this.whenReadyResolve=a,this.eventBus=Jl()}_handleStartSyncMessage=(e,t)=>{console.info(`[wsSynchronizer] Received startSyncMessage, docId: ${e.docId}`);const o=e.doc;o.import(t.updates),console.info(`[wsSynchronizer] Doc ${e.docId} after import updates:`,o.toJSON());const r=G.decode(t.vv);e.lastSentVersion=r;const a=o.export({mode:"update",from:r});if(a.length>0){const _=Jo(t.docId,a);this._sendMessage(_),console.info(`[wsSynchronizer] Replied with postUpdateMessage, docId: ${e.docId}`)}e.lastEB=null,queueMicrotask(()=>{const _=e.lastEB!==null;this.eventBus.emit("docSynced",{docId:e.docId,hasSyncEvent:_})})};_handlePostConflictMessage=(e,t)=>{throw new Error("PostConflictMessage handling not implemented")};_handlePostUpdateMessage=(e,t)=>{const o=t.doc;console.info(`[wsSynchronizer] Received postUpdateMessage, docId: ${t.docId}`),o.import(e.updates),console.info(`[wsSynchronizer] Received postUpdateMessage, doc ${t.docId} after import updates:`,o.toJSON()),t.lastEB=null,queueMicrotask(()=>{const r=t.lastEB!==null;this.eventBus.emit("docSynced",{docId:t.docId,hasSyncEvent:r})})};_freeDocs(){for(const e of this.docs.values())e.doc.free();this.docs.clear()}_setupConnection(){this.shouldReconnect&&this.connection===null&&(this.connection=this.network.connect(this.url,this.protocol),this.connection.onOpen(()=>{console.info("[wsSynchronizer] Connection opened"),this.wsConnecting=!1,this.wsConnected=!0,this.unsuccessfulReconnects=0,this.whenReadyResolve()}),this.connection.onMessage(e=>{try{const t=Cu(e),o=this.docs.get(t.docId);if(!o){console.error(`[wsSynchronizer] Doc not found: ${t.docId}`);return}t.type===te.startSync?this._handleStartSyncMessage(o,t):t.type===te.postConflict?this._handlePostConflictMessage(t,o):t.type===te.postUpdate?this._handlePostUpdateMessage(t,o):console.error(`[wsSynchronizer] Unknown message type: ${t.type}`)}catch(t){console.error("[wsSynchronizer] Error handling message:",t)}}),this.connection.onError(e=>{console.error("[wsSynchronizer] Connection error:",e)}),this.connection.onClose(()=>{if(console.info("[wsSynchronizer] Connection closed"),this.eventBus.emit("disconnected"),this.connection=null,this.wsConnecting=!1,this.wsConnected){this.wsConnected=!1,this._freeDocs();const{promise:e,resolve:t}=Ko();this.whenReady=e,this.whenReadyResolve=t}else this.unsuccessfulReconnects++;setTimeout(()=>this._setupConnection(),Math.min(Math.pow(2,this.unsuccessfulReconnects)*100,this.maxBackoffTime))}),this.wsConnecting=!0,this.wsConnected=!1,this._freeDocs())}_sendMessage(e){const t=this.connection;if(!t){console.error("[wsSynchronizer] Connection not established, cannot send message");return}t.send(e)}_sendNewUpdatesToServer(e){const t=this.docs.get(e);if(!t){console.error(`[wsSynchronizer] Doc ${e} not found`);return}const o=t.doc.export({mode:"update",from:t.lastSentVersion});if(o.length===0)return;t.lastSentVersion=t.doc.version();const r=Jo(e,o);this._sendMessage(r),console.info(`[wsSynchronizer] Sent postUpdateMessage, docId: ${e}`)}connect(){this.shouldReconnect=!0,!this.wsConnected&&this.connection===null&&this._setupConnection()}disconnect(){this.shouldReconnect=!1,this.connection!==null&&(this.connection.close(),this.connection=null)}destroy(){this.disconnect()}async addLoroDoc(e,t){if(this.docs.has(e)){console.error(`[wsSynchronizer] Doc already added, do nothing, docId: ${e}`);return}console.info(`[wsSynchronizer] Add new doc, docId: ${e}`);const o={docId:e,doc:t,lastSentVersion:void 0,lastEB:null,subscriptions:[]},r=t.subscribe(a=>{console.info(`[wsSynchronizer] New event on doc ${e}:`,a),a.by==="local"&&this._sendNewUpdatesToServer(e),o.lastEB=a});o.subscriptions.push(r),this.docs.set(e,o),this.whenReady.then(()=>{const a=this.docs.get(e)?.doc;if(!a)return;const _=mu(e,a);this._sendMessage(_),console.info(`[wsSynchronizer] Sent canSyncMessage, docId: ${e}`)})}on(e,t){this.eventBus.on(e,t)}off(e,t){this.eventBus.off(e,t)}}const Ke=n=>{postMessage(n)};let qo,Ho,Yo,we,qe,Ce,Re;addEventListener("message",n=>{const e=n.data;switch(e.type){case"connect":Ou(e.serverUrl,e.location,e.token);break;case"disconnect":Xo();break;case"loadDataDoc":Qo(e.docId);break;case"unloadDataDoc":Tu(e.docId);break;case"postYjsLayerTransaction":Iu(e.transaction);break;case"_printBlockInfo":console.debug("[syncWorker] _printBlockInfo",Ce?.get(e.blockId));break;case"_printBlockData":const t=Re?.get(0)?.getMap(Lt);console.debug("[syncWorker] _printBlockData",t?.get(e.blockId));break}});const Xo=()=>{we?.disconnect(),we?.destroy(),qe=void 0,Ce=void 0,Re=void 0,we=void 0},Ou=(n,e,t)=>{Xo(),console.debug("[syncWorker] connect",n,e,t),qo=n,Ho=e,Yo=t,qe=new se,Ce=qe.getMap(Lt),Re=new Map,Ce.subscribe(o=>{const r={type:o.by==="local"?"ui":"remote"},a=[];for(const _ of o.events)if(_.diff.type==="map")for(const[c,u]of Object.entries(_.diff.updated))u==null?a.push({op:"delete",key:c}):a.push({op:"upsert",key:c,value:u});Ke({type:"blockInfoMapChange",origin:r,changes:a})}),(async()=>{const o=new Ql({location:Ho,authorization:Yo});we=new Au(`ws://${qo}`,o),we.connect(),we.addLoroDoc(jl,qe),we.on("docSynced",({docId:r,hasSyncEvent:a})=>{console.info("[syncWorker] wsSynchronizer docSynced, docId:",r,"hasSyncEvent:",a),Ke({type:"docSynced",docId:r,hasSyncEvent:a})}),we.on("disconnected",()=>{console.info("[syncWorker] wsSynchronizer disconnected"),Ke({type:"disconnected"})})})()},Qo=n=>{if(!Re){console.error("[syncWorker] \u6570\u636E\u6587\u6863\u672A\u521D\u59CB\u5316\uFF0C\u5148 connect \u4EE5\u521D\u59CB\u5316");return}if(Re.has(n))return Re.get(n);const e=new se,t=e.getMap(Lt);return Re.set(n,e),Ke({type:"dataDocCreated",dataDocId:n}),t.subscribe(o=>{const r={type:o.by==="local"?"ui":"remote"},a=[];for(const _ of o.events)if(_.diff.type==="map")for(const[c,u]of Object.entries(_.diff.updated))u==null?a.push({op:"delete",key:c}):a.push({op:"upsert",key:c,value:u});Ke({type:"blockDataMapChange",dataDocId:n,origin:r,changes:a})}),(async()=>(console.debug("[syncWorker] dataDoc \u52A0\u5165 wsSynchronizer\uFF0C\u5F00\u59CB\u540C\u6B65"),await ns(1e3),we?.addLoroDoc(Fl+n,e)))(),e},Tu=n=>{console.error("[syncWorker] Not implemented")},Iu=n=>{if(!qe||!Ce){console.error("[syncWorker] baseDoc or blockInfoMap is null, cannot commit");return}if(!Ce)return;for(const t of n.patches)t.op==="upsertBlockInfo"?Ce.set(t.blockId,t.blockInfo):t.op==="deleteBlockInfo"&&Ce.delete(t.blockId);console.log("[syncWorker] Commit blockInfoMap transaction"),qe.commit();const e=new Map;for(const t of n.patches)if(t.op==="upsertBlockData"||t.op==="deleteBlockData"){const o=e.get(t.docId);o?o.push(t):e.set(t.docId,[t])}for(const[t,o]of e.entries()){const r=Qo(t);if(!r)continue;const a=r.getMap(Lt);for(const _ of o)_.op==="upsertBlockData"?a.set(_.blockId,_.blockData):_.op==="deleteBlockData"&&a.delete(_.blockId);console.log("[syncWorker] Commit blockDataMap transaction, docId:",t),r.commit()}};Ke({type:"init"})})()}();
