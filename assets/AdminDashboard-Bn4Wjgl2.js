import{_ as $,a as g,L as B,C as T}from"./Input.vue_vue_type_script_setup_true_lang-BOCkrBAx.js";import{d as j,b as P,_ as U,a as I,c as N}from"./CardTitle.vue_vue_type_script_setup_true_lang-D1dSeukn.js";import{b as q,d as p,B as G,o as c,f as b,w as l,x as h,C as w,D as M,g as e,E as H,q as K,G as C,A as z,H as J,I as O,J as R,i as o,L as E,M as Q,e as D,a,h as r,t as i,X as V,k as L,N as X,O as W,P as Y,Q as Z,c as A,S as ee,K as ae,F as le,l as se}from"./index-BaJCbjHG.js";import{_ as te,a as ne,b as ie,c as de,d as oe,e as ue,f as ce,g as re,h as me,i as be,j as fe,k as pe,l as ve,L as ge,P as he,T as ke}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Cm-3BSRc.js";import{R as _e}from"./refresh-ccw-Bu83yCEm.js";/**
* @license lucide-vue-next v0.452.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const De=q("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),ye=p({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(m,{emit:n}){const d=G(m,n);return(s,u)=>(c(),b(e(H),w(M(e(d))),{default:l(()=>[h(s.$slots,"default")]),_:3},16))}}),F=p({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(m){const n=m,d=K(()=>{const{class:s,...u}=n;return u});return(s,u)=>(c(),b(e(J),C({class:e(z)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n.class)},d.value),{default:l(()=>[h(s.$slots,"default")]),_:3},16,["class"]))}}),xe=p({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(m){const n=m,d=K(()=>{const{class:s,...u}=n;return u});return(s,u)=>(c(),b(e(O),C(d.value,{class:e(z)("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n.class)}),{default:l(()=>[h(s.$slots,"default")]),_:3},16,["class"]))}}),$e={class:"truncate"},S=p({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(m){const n=m,d=K(()=>{const{class:u,...t}=n;return t}),s=R(d);return(u,t)=>(c(),b(e(E),C(e(s),{class:e(z)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n.class)}),{default:l(()=>[o("span",$e,[h(u.$slots,"default")])]),_:3},16,["class"]))}}),we=p({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(m){const n=m;return(d,s)=>(c(),b(e(Q),w(M(n)),{default:l(()=>[h(d.$slots,"default")]),_:3},16))}}),Me={class:"grid gap-4 py-4"},Ke={class:"grid grid-cols-4 items-center gap-4"},Ce={for:"name",class:"text-right"},ze={class:"grid grid-cols-4 items-center gap-4"},Ae={for:"location",class:"text-right"},Be={class:"grid grid-cols-4 items-center gap-4"},Te={for:"password",class:"text-right"},Ve=p({__name:"NewKbDialog",setup(m){const n=D(!1),d=D(""),s=D(""),u=D(""),t=D("idle"),k=()=>{d.value="",s.value="",u.value="",t.value="idle"};async function y(){if(t.value!=="creating"){if(t.value==="createSuccess"||t.value==="createFailed"){t.value="idle";return}t.value="creating",(await X({name:d.value,location:s.value,password:u.value})).success?(t.value="createSuccess",setTimeout(()=>{k(),n.value=!1},1e3)):(t.value="createFailed",setTimeout(()=>{k(),n.value=!1},1e3))}}function x(){k(),n.value=!1}return(f,v)=>(c(),b(e(ue),{open:n.value,"onUpdate:open":v[3]||(v[3]=_=>n.value=_)},{default:l(()=>[a(e(we),{asChild:""},{default:l(()=>[h(f.$slots,"default")]),_:3}),a(e(oe),{class:"sm:max-w-[425px]"},{default:l(()=>[a(e(te),null,{default:l(()=>[a(e(ne),null,{default:l(()=>[r(i(f.$t("adminDashboard.kbManagement.newKbDialog.title")),1)]),_:1}),a(e(ie),null,{default:l(()=>[r(i(f.$t("adminDashboard.kbManagement.newKbDialog.description")),1)]),_:1})]),_:1}),o("div",Me,[o("div",Ke,[o("label",Ce,i(f.$t("adminDashboard.kbManagement.newKbDialog.nameLabel")),1),a(e($),{id:"name",modelValue:d.value,"onUpdate:modelValue":v[0]||(v[0]=_=>d.value=_),class:"col-span-3",placeholder:f.$t("adminDashboard.kbManagement.newKbDialog.namePlaceholder")},null,8,["modelValue","placeholder"])]),o("div",ze,[o("label",Ae,i(f.$t("adminDashboard.kbManagement.newKbDialog.locationLabel")),1),a(e($),{id:"location",modelValue:s.value,"onUpdate:modelValue":v[1]||(v[1]=_=>s.value=_),class:"col-span-3",placeholder:f.$t("adminDashboard.kbManagement.newKbDialog.locationPlaceholder")},null,8,["modelValue","placeholder"])]),o("div",Be,[o("label",Te,i(f.$t("adminDashboard.kbManagement.newKbDialog.passwordLabel")),1),a(e($),{id:"password",modelValue:u.value,"onUpdate:modelValue":v[2]||(v[2]=_=>u.value=_),type:"password",class:"col-span-3",placeholder:f.$t("adminDashboard.kbManagement.newKbDialog.passwordPlaceholder")},null,8,["modelValue","placeholder"])])]),a(e(de),{class:"flex gap-2"},{default:l(()=>[a(e(g),{variant:"outline",onClick:x},{default:l(()=>[r(i(f.$t("adminDashboard.kbManagement.newKbDialog.cancelBtn")),1)]),_:1}),a(e(g),{type:"submit",onClick:y,disabled:t.value==="creating"},{default:l(()=>[t.value==="creating"?(c(),b(e(B),{key:0,class:"size-4 mr-2 animate-spin"})):t.value==="createSuccess"?(c(),b(e(T),{key:1,class:"size-4 mr-2"})):t.value==="createFailed"?(c(),b(e(V),{key:2,class:"size-4 mr-2"})):L("",!0),r(" "+i(f.$t(`adminDashboard.kbManagement.newKbDialog.createBtn.${t.value}`)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["open"]))}}),Le=p({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(m){const n=m;return(d,s)=>(c(),b(e(W),w(M(n)),{default:l(()=>[h(d.$slots,"default")]),_:3},16))}}),Fe=p({__name:"DeleteKbDialog",props:{location:{},name:{}},setup(m){const n=m,d=D(!1),s=D("idle");async function u(){if(s.value!=="deleting"){if(s.value==="deleteSuccess"||s.value==="deleteFailed"){s.value="idle";return}s.value="deleting",(await Y({location:n.location})).success?(s.value="deleteSuccess",setTimeout(()=>{s.value="idle",d.value=!1},1e3)):(s.value="deleteFailed",setTimeout(()=>{s.value="idle",d.value=!1},1e3))}}return(t,k)=>(c(),b(e(ve),{open:d.value,"onUpdate:open":k[0]||(k[0]=y=>d.value=y)},{default:l(()=>[a(e(Le),{asChild:""},{default:l(()=>[h(t.$slots,"default")]),_:3}),a(e(ce),null,{default:l(()=>[a(e(re),null,{default:l(()=>[a(e(me),null,{default:l(()=>[r(i(t.$t("adminDashboard.kbManagement.deleteKbDialog.title")),1)]),_:1}),a(e(be),null,{default:l(()=>[r(i(t.$t("adminDashboard.kbManagement.deleteKbDialog.description",{location:n.location,name:n.name})),1)]),_:1})]),_:1}),a(e(fe),null,{default:l(()=>[a(e(pe),{disabled:s.value==="deleting"},{default:l(()=>[r(i(t.$t("adminDashboard.kbManagement.deleteKbDialog.cancelBtn")),1)]),_:1},8,["disabled"]),a(e(g),{variant:"destructive",disabled:s.value==="deleting",onClick:u},{default:l(()=>[s.value==="deleting"?(c(),b(e(B),{key:0,class:"size-4 mr-2 animate-spin"})):s.value==="deleteSuccess"?(c(),b(e(T),{key:1,class:"size-4 mr-2"})):s.value==="deleteFailed"?(c(),b(e(V),{key:2,class:"size-4 mr-2"})):L("",!0),r(" "+i(t.$t(`adminDashboard.kbManagement.deleteKbDialog.status.${s.value}`)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["open"]))}}),Se={class:"flex-1 space-y-4 p-8 pt-6"},je={class:"flex items-center justify-between space-y-2"},Pe={class:"flex items-baseline"},Ue={class:"text-3xl font-bold tracking-tight"},Ie={class:"text-muted-foreground ml-4"},Ne={class:"flex items-center space-x-2"},qe={class:"flex flex-col space-y-2"},Ge={class:"flex items-center space-x-2"},He={class:"space-y-2"},Je={class:"space-y-1"},Oe={class:"font-medium"},Re={class:"text-sm text-muted-foreground"},Ee={class:"flex space-x-2"},Qe=p({__name:"AdminDashboard",setup(m){const{serverUrl:n,logout:d}=ee.useContext(),{kbs:s,refreshKbList:u}=ae.useContext();return Z(n,()=>{u(n.value)},{immediate:!0}),(t,k)=>(c(),A("div",Se,[o("div",je,[o("div",Pe,[o("h2",Ue,i(t.$t("adminDashboard.title")),1),o("div",Ie,i(e(n)),1)]),o("div",Ne,[a(e(g),{variant:"outline",onClick:e(d)},{default:l(()=>[a(e(ge),{class:"size-4 mr-2"}),r(" "+i(t.$t("adminDashboard.logout")),1)]),_:1},8,["onClick"])])]),a(e(ye),{"default-value":"kbManagement",class:"space-y-4"},{default:l(()=>[a(e(xe),null,{default:l(()=>[a(e(S),{value:"kbManagement"},{default:l(()=>[r(i(t.$t("adminDashboard.tabs.kbManagement")),1)]),_:1}),a(e(S),{value:"logsAndAnalytics"},{default:l(()=>[r(i(t.$t("adminDashboard.tabs.logsAndAnalytics")),1)]),_:1})]),_:1}),a(e(F),{value:"kbManagement",class:"space-y-4"},{default:l(()=>[a(e(j),null,{default:l(()=>[a(e(P),{class:"flex flex-row items-center justify-between"},{default:l(()=>[o("div",qe,[a(e(U),null,{default:l(()=>[r(i(t.$t("adminDashboard.kbManagement.allKbs")),1)]),_:1}),a(e(I),null,{default:l(()=>[r(i(t.$t("adminDashboard.kbManagement.allKbsDescription")),1)]),_:1})]),o("div",Ge,[a(e(g),{size:"sm",variant:"outline",onClick:e(u)},{default:l(()=>[a(e(_e),{class:"size-4 mr-2"}),r(" "+i(t.$t("adminDashboard.kbManagement.kbActions.refreshKbList")),1)]),_:1},8,["onClick"]),a(Ve,null,{default:l(()=>[a(e(g),{size:"sm"},{default:l(()=>[a(e(he),{class:"size-4 mr-2"}),r(" "+i(t.$t("adminDashboard.kbManagement.kbActions.addKb")),1)]),_:1})]),_:1})])]),_:1}),a(e(N),null,{default:l(()=>[o("div",He,[(c(!0),A(le,null,se(e(s),(y,x)=>(c(),A("div",{key:x,class:"flex items-center justify-between p-4 border rounded-lg"},[o("div",Je,[o("h4",Oe,i(y.name),1),o("p",Re,i(x),1)]),o("div",Ee,[a(e(g),{variant:"outline",size:"sm"},{default:l(()=>[a(e(De),{class:"size-4 mr-2"}),r(" "+i(t.$t("adminDashboard.kbManagement.kbActions.edit")),1)]),_:1}),a(Fe,{location:x,name:y.name},{default:l(()=>[a(e(g),{variant:"destructive",size:"sm"},{default:l(()=>[a(e(ke),{class:"size-4 mr-2"}),r(" "+i(t.$t("adminDashboard.kbManagement.kbActions.delete")),1)]),_:1})]),_:2},1032,["location","name"])])]))),128))])]),_:1})]),_:1})]),_:1}),a(e(F),{value:"logsAndAnalytics",class:"space-y-4"})]),_:1})]))}});export{Qe as default};
