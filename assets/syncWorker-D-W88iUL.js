(async()=>{function ss(r){return new Promise(e=>setTimeout(e,r))}var _s=""+new URL("loro_wasm_bg-DV_qIX0O.wasm",import.meta.url).href,as=async(r={},e)=>{let t;if(e.startsWith("data:")){const n=e.replace(/^data:.*?base64,/,"");let o;if(typeof Buffer=="function"&&typeof Buffer.from=="function")o=Buffer.from(n,"base64");else if(typeof atob=="function"){const s=atob(n);o=new Uint8Array(s.length);for(let i=0;i<s.length;i++)o[i]=s.charCodeAt(i)}else throw new Error("Cannot decode base64-encoded data URL");t=await WebAssembly.instantiate(o,r)}else{const n=await fetch(e),o=n.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&o.startsWith("application/wasm"))t=await WebAssembly.instantiateStreaming(n,r);else{const s=await n.arrayBuffer();t=await WebAssembly.instantiate(s,r)}}return t.instance.exports};let _;function Yt(r){_=r}const U=new Array(128).fill(void 0);U.push(void 0,null,!0,!1);function h(r){return U[r]}let rt=U.length;function is(r){r<132||(U[r]=rt,rt=r)}function l(r){const e=h(r);return is(r),e}const cs=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let Mr=new cs("utf-8",{ignoreBOM:!0,fatal:!0});Mr.decode();let Ot=null;function Fe(){return(Ot===null||Ot.byteLength===0)&&(Ot=new Uint8Array(_.memory.buffer)),Ot}function P(r,e){return r=r>>>0,Mr.decode(Fe().subarray(r,r+e))}function u(r){rt===U.length&&U.push(U.length+1);const e=rt;return rt=U[e],U[e]=r,e}let I=0;const ds=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let Dt=new ds("utf-8");const ls=typeof Dt.encodeInto=="function"?function(r,e){return Dt.encodeInto(r,e)}:function(r,e){const t=Dt.encode(r);return e.set(t),{read:r.length,written:t.length}};function V(r,e,t){if(t===void 0){const d=Dt.encode(r),p=e(d.length,1)>>>0;return Fe().subarray(p,p+d.length).set(d),I=d.length,p}let n=r.length,o=e(n,1)>>>0;const s=Fe();let i=0;for(;i<n;i++){const d=r.charCodeAt(i);if(d>127)break;s[o+i]=d}if(i!==n){i!==0&&(r=r.slice(i)),o=t(o,n,n=i+r.length*3,1)>>>0;const d=Fe().subarray(o+i,o+n),p=ls(r,d);i+=p.written,o=t(o,n,i,1)>>>0}return I=i,o}function Q(r){return r==null}let It=null;function a(){return(It===null||It.byteLength===0)&&(It=new Int32Array(_.memory.buffer)),It}let Mt=null;function Er(){return(Mt===null||Mt.byteLength===0)&&(Mt=new Float64Array(_.memory.buffer)),Mt}let Et=null;function us(){return(Et===null||Et.byteLength===0)&&(Et=new BigInt64Array(_.memory.buffer)),Et}function Xt(r){const e=typeof r;if(e=="number"||e=="boolean"||r==null)return`${r}`;if(e=="string")return`"${r}"`;if(e=="symbol"){const o=r.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=r.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(r)){const o=r.length;let s="[";o>0&&(s+=Xt(r[0]));for(let i=1;i<o;i++)s+=", "+Xt(r[i]);return s+="]",s}const t=/\[object ([^\]]+)\]/.exec(toString.call(r));let n;if(t.length>1)n=t[1];else return toString.call(r);if(n=="Object")try{return"Object("+JSON.stringify(r)+")"}catch{return"Object"}return r instanceof Error?`${r.name}: ${r.message}
${r.stack}`:n}const dr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>{_.__wbindgen_export_2.get(r.dtor)(r.a,r.b)});function Nr(r,e,t,n){const o={a:r,b:e,cnt:1,dtor:t},s=(...i)=>{o.cnt++;const d=o.a;o.a=0;try{return n(d,o.b,...i)}finally{--o.cnt===0?(_.__wbindgen_export_2.get(o.dtor)(d,o.b),dr.unregister(o)):o.a=d}};return s.original=o,dr.register(s,o,o),s}function ps(r,e,t){_.__wbindgen_export_3(r,e,u(t))}function gs(r,e){_.__wbindgen_export_4(r,e)}function xe(r,e){return r=r>>>0,Fe().subarray(r/1,r/1+e)}function De(r,e){const t=e(r.length*1,1)>>>0;return Fe().set(r,t/1),I=r.length,t}let Nt=null;function Dr(){return(Nt===null||Nt.byteLength===0)&&(Nt=new Uint32Array(_.memory.buffer)),Nt}function ae(r,e){r=r>>>0;const n=Dr().subarray(r/4,r/4+e),o=[];for(let s=0;s<n.length;s++)o.push(l(n[s]));return o}function fs(){_.run()}function ve(r,e){const t=e(r.length*4,4)>>>0,n=Dr();for(let o=0;o<r.length;o++)n[t/4+o]=u(r[o]);return I=r.length,t}function hs(r){try{const i=_.__wbindgen_add_to_stack_pointer(-16),d=ve(r,_.__wbindgen_export_0),p=I;_.encodeFrontiers(i,d,p);var e=a()[i/4+0],t=a()[i/4+1],n=a()[i/4+2],o=a()[i/4+3];if(o)throw l(n);var s=xe(e,t).slice();return _.__wbindgen_export_5(e,t*1,1),s}finally{_.__wbindgen_add_to_stack_pointer(16)}}function bs(r){try{const o=_.__wbindgen_add_to_stack_pointer(-16),s=De(r,_.__wbindgen_export_0),i=I;_.decodeFrontiers(o,s,i);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return l(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}function ws(){_.setDebug()}let W=128;function K(r){if(W==1)throw new Error("out of js stack");return U[--W]=r,W}function Re(r,e){if(!(r instanceof e))throw new Error(`expected instance of ${e.name}`);return r.ptr}function ms(r,e){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=De(r,_.__wbindgen_export_0),d=I;_.decodeImportBlobMeta(s,i,d,e);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}function J(r,e){try{return r.apply(this,e)}catch(t){_.__wbindgen_export_6(u(t))}}function ys(r){return()=>{throw new Error(`${r} is not defined`)}}const vs=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>_.__wbg_awarenesswasm_free(r>>>0));class ks{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,vs.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_awarenesswasm_free(e)}constructor(e,t){const n=_.awarenesswasm_new(u(e),t);return this.__wbg_ptr=n>>>0,this}encode(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.awarenesswasm_encode(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=xe(t,n).slice();return _.__wbindgen_export_5(t,n*1,1),o}finally{_.__wbindgen_add_to_stack_pointer(16)}}encodeAll(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.awarenesswasm_encodeAll(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=xe(e,t).slice();return _.__wbindgen_export_5(e,t*1,1),n}finally{_.__wbindgen_add_to_stack_pointer(16)}}apply(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=De(e,_.__wbindgen_export_0),d=I;_.awarenesswasm_apply(s,this.__wbg_ptr,i,d);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}setLocalState(e){_.awarenesswasm_setLocalState(this.__wbg_ptr,u(e))}peer(){const e=_.awarenesswasm_peer(this.__wbg_ptr);return l(e)}getAllStates(){const e=_.awarenesswasm_getAllStates(this.__wbg_ptr);return l(e)}getState(e){const t=_.awarenesswasm_getState(this.__wbg_ptr,u(e));return l(t)}getTimestamp(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.awarenesswasm_getTimestamp(o,this.__wbg_ptr,u(e));var t=a()[o/4+0],n=Er()[o/8+1];return t===0?void 0:n}finally{_.__wbindgen_add_to_stack_pointer(16)}}removeOutdated(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.awarenesswasm_removeOutdated(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=ae(e,t).slice();return _.__wbindgen_export_5(e,t*4,4),n}finally{_.__wbindgen_add_to_stack_pointer(16)}}length(){return _.awarenesswasm_length(this.__wbg_ptr)}isEmpty(){return _.awarenesswasm_isEmpty(this.__wbg_ptr)!==0}peers(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.awarenesswasm_peers(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=ae(e,t).slice();return _.__wbindgen_export_5(e,t*4,4),n}finally{_.__wbindgen_add_to_stack_pointer(16)}}}const lr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>_.__wbg_cursor_free(r>>>0));class be{static __wrap(e){e=e>>>0;const t=Object.create(be.prototype);return t.__wbg_ptr=e,lr.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,lr.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_cursor_free(e)}containerId(){const e=_.cursor_containerId(this.__wbg_ptr);return l(e)}pos(){const e=_.cursor_pos(this.__wbg_ptr);return l(e)}side(){const e=_.cursor_side(this.__wbg_ptr);return l(e)}encode(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.cursor_encode(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=xe(e,t).slice();return _.__wbindgen_export_5(e,t*1,1),n}finally{_.__wbindgen_add_to_stack_pointer(16)}}static decode(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=De(e,_.__wbindgen_export_0),d=I;_.cursor_decode(s,i,d);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return be.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}kind(){const e=_.cursor_kind(this.__wbg_ptr);return l(e)}}const ur=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>_.__wbg_lorocounter_free(r>>>0));class mt{static __wrap(e){e=e>>>0;const t=Object.create(mt.prototype);return t.__wbg_ptr=e,ur.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ur.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_lorocounter_free(e)}constructor(){const e=_.lorocounter_new();return this.__wbg_ptr=e>>>0,this}increment(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorocounter_increment(o,this.__wbg_ptr,e);var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}decrement(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorocounter_decrement(o,this.__wbg_ptr,e);var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get value(){return _.lorocounter_value(this.__wbg_ptr)}subscribe(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorocounter_subscribe(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}parent(){const e=_.lorocounter_parent(this.__wbg_ptr);return l(e)}isAttached(){return _.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=_.lorocounter_getAttached(this.__wbg_ptr);return l(e)}getShallowValue(){return _.lorocounter_getShallowValue(this.__wbg_ptr)}}const pr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>_.__wbg_lorodoc_free(r>>>0));class se{static __wrap(e){e=e>>>0;const t=Object.create(se.prototype);return t.__wbg_ptr=e,pr.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,pr.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_lorodoc_free(e)}constructor(){const e=_.lorodoc_new();return this.__wbg_ptr=e>>>0,this}setDetachedEditing(e){_.lorodoc_setDetachedEditing(this.__wbg_ptr,e)}isDetachedEditingEnabled(){return _.lorodoc_isDetachedEditingEnabled(this.__wbg_ptr)!==0}setRecordTimestamp(e){_.lorodoc_setRecordTimestamp(this.__wbg_ptr,e)}setChangeMergeInterval(e){_.lorodoc_setChangeMergeInterval(this.__wbg_ptr,e)}configTextStyle(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_configTextStyle(o,this.__wbg_ptr,u(e));var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}static fromSnapshot(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=De(e,_.__wbindgen_export_0),d=I;_.lorodoc_fromSnapshot(s,i,d);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return se.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}attach(){_.lorodoc_attach(this.__wbg_ptr)}isDetached(){return _.lorodoc_isDetached(this.__wbg_ptr)!==0}detach(){_.lorodoc_detach(this.__wbg_ptr)}fork(){const e=_.lorodoc_fork(this.__wbg_ptr);return se.__wrap(e)}forkAt(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=ve(e,_.__wbindgen_export_0),d=I;_.lorodoc_forkAt(s,this.__wbg_ptr,i,d);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return se.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}checkoutToLatest(){try{const n=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_checkoutToLatest(n,this.__wbg_ptr);var e=a()[n/4+0],t=a()[n/4+1];if(t)throw l(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}travelChangeAncestors(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=ve(e,_.__wbindgen_export_0),d=I;_.lorodoc_travelChangeAncestors(s,this.__wbg_ptr,i,d,u(t));var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}checkout(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16),s=ve(e,_.__wbindgen_export_0),i=I;_.lorodoc_checkout(o,this.__wbg_ptr,s,i);var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get peerId(){const e=_.lorodoc_peerId(this.__wbg_ptr);return BigInt.asUintN(64,e)}get peerIdStr(){const e=_.lorodoc_peerIdStr(this.__wbg_ptr);return l(e)}setPeerId(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_setPeerId(o,this.__wbg_ptr,u(e));var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}commit(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_commit(o,this.__wbg_ptr,Q(e)?0:u(e));var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}getPendingTxnLength(){return _.lorodoc_getPendingTxnLength(this.__wbg_ptr)>>>0}getText(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_getText(s,this.__wbg_ptr,K(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return kt.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16),U[W++]=void 0}}getMap(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_getMap(s,this.__wbg_ptr,K(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return Ye.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16),U[W++]=void 0}}getList(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_getList(s,this.__wbg_ptr,K(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return yt.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16),U[W++]=void 0}}getMovableList(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_getMovableList(s,this.__wbg_ptr,K(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return vt.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16),U[W++]=void 0}}getCounter(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_getCounter(s,this.__wbg_ptr,K(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return mt.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16),U[W++]=void 0}}getTree(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_getTree(s,this.__wbg_ptr,K(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return xt.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16),U[W++]=void 0}}getContainerById(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_getContainerById(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}setNextCommitMessage(e){const t=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),n=I;_.lorodoc_setNextCommitMessage(this.__wbg_ptr,t,n)}getDeepValueWithID(){const e=_.lorodoc_getDeepValueWithID(this.__wbg_ptr);return l(e)}getPathToContainer(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_getPathToContainer(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}JSONPath(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),d=I;_.lorodoc_JSONPath(s,this.__wbg_ptr,i,d);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}version(){const e=_.lorodoc_version(this.__wbg_ptr);return ee.__wrap(e)}shallowSinceVV(){const e=_.lorodoc_shallowSinceVV(this.__wbg_ptr);return ee.__wrap(e)}isShallow(){return _.lorodoc_isShallow(this.__wbg_ptr)!==0}shallowSinceFrontiers(){const e=_.lorodoc_shallowSinceFrontiers(this.__wbg_ptr);return l(e)}oplogVersion(){const e=_.lorodoc_oplogVersion(this.__wbg_ptr);return ee.__wrap(e)}frontiers(){const e=_.lorodoc_frontiers(this.__wbg_ptr);return l(e)}oplogFrontiers(){const e=_.lorodoc_oplogFrontiers(this.__wbg_ptr);return l(e)}cmpWithFrontiers(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=ve(e,_.__wbindgen_export_0),d=I;_.lorodoc_cmpWithFrontiers(s,this.__wbg_ptr,i,d);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return t}finally{_.__wbindgen_add_to_stack_pointer(16)}}cmpFrontiers(e,t){try{const i=_.__wbindgen_add_to_stack_pointer(-16),d=ve(e,_.__wbindgen_export_0),p=I,g=ve(t,_.__wbindgen_export_0),v=I;_.lorodoc_cmpFrontiers(i,this.__wbg_ptr,d,p,g,v);var n=a()[i/4+0],o=a()[i/4+1],s=a()[i/4+2];if(s)throw l(o);return l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}exportSnapshot(){try{const i=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_exportSnapshot(i,this.__wbg_ptr);var e=a()[i/4+0],t=a()[i/4+1],n=a()[i/4+2],o=a()[i/4+3];if(o)throw l(n);var s=xe(e,t).slice();return _.__wbindgen_export_5(e,t*1,1),s}finally{_.__wbindgen_add_to_stack_pointer(16)}}exportFrom(e){try{const d=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_exportFrom(d,this.__wbg_ptr,u(e));var t=a()[d/4+0],n=a()[d/4+1],o=a()[d/4+2],s=a()[d/4+3];if(s)throw l(o);var i=xe(t,n).slice();return _.__wbindgen_export_5(t,n*1,1),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}export(e){try{const d=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_export(d,this.__wbg_ptr,u(e));var t=a()[d/4+0],n=a()[d/4+1],o=a()[d/4+2],s=a()[d/4+3];if(s)throw l(o);var i=xe(t,n).slice();return _.__wbindgen_export_5(t,n*1,1),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}exportJsonUpdates(e,t){try{const i=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_exportJsonUpdates(i,this.__wbg_ptr,u(e),u(t));var n=a()[i/4+0],o=a()[i/4+1],s=a()[i/4+2];if(s)throw l(o);return l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}importJsonUpdates(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_importJsonUpdates(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}import(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=De(e,_.__wbindgen_export_0),d=I;_.lorodoc_import(s,this.__wbg_ptr,i,d);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}importUpdateBatch(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_importUpdateBatch(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}importBatch(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_importBatch(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}getShallowValue(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_getShallowValue(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return l(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}toJSON(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_toJSON(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return l(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){const t=_.lorodoc_subscribe(this.__wbg_ptr,u(e));return l(t)}subscribeLocalUpdates(e){const t=_.lorodoc_subscribeLocalUpdates(this.__wbg_ptr,u(e));return l(t)}debugHistory(){_.lorodoc_debugHistory(this.__wbg_ptr)}changeCount(){return _.lorodoc_changeCount(this.__wbg_ptr)>>>0}opCount(){return _.lorodoc_opCount(this.__wbg_ptr)>>>0}getAllChanges(){const e=_.lorodoc_getAllChanges(this.__wbg_ptr);return l(e)}getChangeAt(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_getChangeAt(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}getChangeAtLamport(e,t){try{const i=_.__wbindgen_add_to_stack_pointer(-16),d=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),p=I;_.lorodoc_getChangeAtLamport(i,this.__wbg_ptr,d,p,t);var n=a()[i/4+0],o=a()[i/4+1],s=a()[i/4+2];if(s)throw l(o);return l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}getOpsInChange(e){try{const d=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_getOpsInChange(d,this.__wbg_ptr,u(e));var t=a()[d/4+0],n=a()[d/4+1],o=a()[d/4+2],s=a()[d/4+3];if(s)throw l(o);var i=ae(t,n).slice();return _.__wbindgen_export_5(t,n*4,4),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}frontiersToVV(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=ve(e,_.__wbindgen_export_0),d=I;_.lorodoc_frontiersToVV(s,this.__wbg_ptr,i,d);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return ee.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}vvToFrontiers(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);Re(e,ee),_.lorodoc_vvToFrontiers(s,this.__wbg_ptr,e.__wbg_ptr);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}getByPath(e){const t=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),n=I,o=_.lorodoc_getByPath(this.__wbg_ptr,t,n);return l(o)}getCursorPos(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);Re(e,be),_.lorodoc_getCursorPos(s,this.__wbg_ptr,e.__wbg_ptr);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}getChangedContainersIn(e,t){try{const p=_.__wbindgen_add_to_stack_pointer(-16);_.lorodoc_getChangedContainersIn(p,this.__wbg_ptr,u(e),t);var n=a()[p/4+0],o=a()[p/4+1],s=a()[p/4+2],i=a()[p/4+3];if(i)throw l(s);var d=ae(n,o).slice();return _.__wbindgen_export_5(n,o*4,4),d}finally{_.__wbindgen_add_to_stack_pointer(16)}}}const gr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>_.__wbg_lorolist_free(r>>>0));class yt{static __wrap(e){e=e>>>0;const t=Object.create(yt.prototype);return t.__wbg_ptr=e,gr.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,gr.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_lorolist_free(e)}constructor(){const e=_.lorolist_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=_.lorolist_kind(this.__wbg_ptr);return l(e)}insert(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorolist_insert(s,this.__wbg_ptr,e,u(t));var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}delete(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorolist_delete(s,this.__wbg_ptr,e,t);var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get(e){const t=_.lorolist_get(this.__wbg_ptr,e);return l(t)}get id(){const e=_.lorolist_id(this.__wbg_ptr);return l(e)}toArray(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorolist_toArray(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=ae(e,t).slice();return _.__wbindgen_export_5(e,t*4,4),n}finally{_.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=_.lorolist_toJSON(this.__wbg_ptr);return l(e)}insertContainer(e,t){try{const i=_.__wbindgen_add_to_stack_pointer(-16);_.lorolist_insertContainer(i,this.__wbg_ptr,e,u(t));var n=a()[i/4+0],o=a()[i/4+1],s=a()[i/4+2];if(s)throw l(o);return l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}pushContainer(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorolist_pushContainer(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorolist_subscribe(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get length(){return _.lorolist_length(this.__wbg_ptr)>>>0}parent(){const e=_.lorolist_parent(this.__wbg_ptr);return l(e)}isAttached(){return _.lorolist_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=_.lorolist_getAttached(this.__wbg_ptr);return l(e)}getCursor(e,t){const n=_.lorolist_getCursor(this.__wbg_ptr,e,u(t));return n===0?void 0:be.__wrap(n)}push(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorolist_push(o,this.__wbg_ptr,u(e));var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}pop(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorolist_pop(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return l(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}clear(){try{const n=_.__wbindgen_add_to_stack_pointer(-16);_.lorolist_clear(n,this.__wbg_ptr);var e=a()[n/4+0],t=a()[n/4+1];if(t)throw l(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}getIdAt(e){const t=_.lorolist_getIdAt(this.__wbg_ptr,e);return l(t)}isDeleted(){return _.lorolist_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=_.lorolist_getShallowValue(this.__wbg_ptr);return l(e)}}const fr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>_.__wbg_loromap_free(r>>>0));class Ye{static __wrap(e){e=e>>>0;const t=Object.create(Ye.prototype);return t.__wbg_ptr=e,fr.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,fr.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_loromap_free(e)}constructor(){const e=_.loromap_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=_.loromap_kind(this.__wbg_ptr);return l(e)}set(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),d=I;_.loromap_set(s,this.__wbg_ptr,i,d,u(t));var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}delete(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16),s=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),i=I;_.loromap_delete(o,this.__wbg_ptr,s,i);var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get(e){const t=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),n=I,o=_.loromap_get(this.__wbg_ptr,t,n);return l(o)}getOrCreateContainer(e,t){try{const i=_.__wbindgen_add_to_stack_pointer(-16),d=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),p=I;_.loromap_getOrCreateContainer(i,this.__wbg_ptr,d,p,u(t));var n=a()[i/4+0],o=a()[i/4+1],s=a()[i/4+2];if(s)throw l(o);return l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}keys(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.loromap_keys(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=ae(e,t).slice();return _.__wbindgen_export_5(e,t*4,4),n}finally{_.__wbindgen_add_to_stack_pointer(16)}}values(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.loromap_values(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=ae(e,t).slice();return _.__wbindgen_export_5(e,t*4,4),n}finally{_.__wbindgen_add_to_stack_pointer(16)}}entries(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.loromap_entries(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=ae(e,t).slice();return _.__wbindgen_export_5(e,t*4,4),n}finally{_.__wbindgen_add_to_stack_pointer(16)}}get id(){const e=_.loromap_id(this.__wbg_ptr);return l(e)}toJSON(){const e=_.loromap_toJSON(this.__wbg_ptr);return l(e)}setContainer(e,t){try{const i=_.__wbindgen_add_to_stack_pointer(-16),d=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),p=I;_.loromap_setContainer(i,this.__wbg_ptr,d,p,u(t));var n=a()[i/4+0],o=a()[i/4+1],s=a()[i/4+2];if(s)throw l(o);return l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.loromap_subscribe(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get size(){return _.loromap_size(this.__wbg_ptr)>>>0}parent(){const e=_.loromap_parent(this.__wbg_ptr);return l(e)}isAttached(){return _.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=_.loromap_getAttached(this.__wbg_ptr);return l(e)}clear(){try{const n=_.__wbindgen_add_to_stack_pointer(-16);_.loromap_clear(n,this.__wbg_ptr);var e=a()[n/4+0],t=a()[n/4+1];if(t)throw l(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}getLastEditor(e){const t=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),n=I,o=_.loromap_getLastEditor(this.__wbg_ptr,t,n);return l(o)}isDeleted(){return _.loromap_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=_.loromap_getShallowValue(this.__wbg_ptr);return l(e)}}const hr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>_.__wbg_loromovablelist_free(r>>>0));class vt{static __wrap(e){e=e>>>0;const t=Object.create(vt.prototype);return t.__wbg_ptr=e,hr.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,hr.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_loromovablelist_free(e)}constructor(){const e=_.loromovablelist_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=_.loromovablelist_kind(this.__wbg_ptr);return l(e)}insert(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.loromovablelist_insert(s,this.__wbg_ptr,e,u(t));var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}delete(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.loromovablelist_delete(s,this.__wbg_ptr,e,t);var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get(e){const t=_.loromovablelist_get(this.__wbg_ptr,e);return l(t)}get id(){const e=_.loromovablelist_id(this.__wbg_ptr);return l(e)}toArray(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.loromovablelist_toArray(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=ae(e,t).slice();return _.__wbindgen_export_5(e,t*4,4),n}finally{_.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=_.loromovablelist_toJSON(this.__wbg_ptr);return l(e)}insertContainer(e,t){try{const i=_.__wbindgen_add_to_stack_pointer(-16);_.loromovablelist_insertContainer(i,this.__wbg_ptr,e,u(t));var n=a()[i/4+0],o=a()[i/4+1],s=a()[i/4+2];if(s)throw l(o);return l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}pushContainer(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.loromovablelist_pushContainer(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.loromovablelist_subscribe(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get length(){return _.loromovablelist_length(this.__wbg_ptr)>>>0}parent(){const e=_.loromap_parent(this.__wbg_ptr);return l(e)}isAttached(){return _.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=_.loromovablelist_getAttached(this.__wbg_ptr);return l(e)}getCursor(e,t){const n=_.loromovablelist_getCursor(this.__wbg_ptr,e,u(t));return n===0?void 0:be.__wrap(n)}move(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.loromovablelist_move(s,this.__wbg_ptr,e,t);var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}set(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.loromovablelist_set(s,this.__wbg_ptr,e,u(t));var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}setContainer(e,t){try{const i=_.__wbindgen_add_to_stack_pointer(-16);_.loromovablelist_setContainer(i,this.__wbg_ptr,e,u(t));var n=a()[i/4+0],o=a()[i/4+1],s=a()[i/4+2];if(s)throw l(o);return l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}push(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.loromovablelist_push(o,this.__wbg_ptr,u(e));var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}pop(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.loromovablelist_pop(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return l(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}clear(){try{const n=_.__wbindgen_add_to_stack_pointer(-16);_.loromovablelist_clear(n,this.__wbg_ptr);var e=a()[n/4+0],t=a()[n/4+1];if(t)throw l(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}getCreatorAt(e){const t=_.loromovablelist_getCreatorAt(this.__wbg_ptr,e);return l(t)}getLastMoverAt(e){const t=_.loromovablelist_getLastMoverAt(this.__wbg_ptr,e);return l(t)}getLastEditorAt(e){const t=_.loromovablelist_getLastEditorAt(this.__wbg_ptr,e);return l(t)}isDeleted(){return _.loromovablelist_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=_.loromovablelist_getShallowValue(this.__wbg_ptr);return l(e)}}const br=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>_.__wbg_lorotext_free(r>>>0));class kt{static __wrap(e){e=e>>>0;const t=Object.create(kt.prototype);return t.__wbg_ptr=e,br.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,br.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_lorotext_free(e)}constructor(){const e=_.lorotext_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=_.lorotext_kind(this.__wbg_ptr);return l(e)}iter(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorotext_iter(o,this.__wbg_ptr,u(e));var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}update(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),d=I;_.lorotext_update(s,this.__wbg_ptr,i,d,u(t));var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}updateByLine(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),d=I;_.lorotext_updateByLine(s,this.__wbg_ptr,i,d,u(t));var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}insert(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=V(t,_.__wbindgen_export_0,_.__wbindgen_export_1),d=I;_.lorotext_insert(s,this.__wbg_ptr,e,i,d);var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}slice(e,t){let n,o;try{const R=_.__wbindgen_add_to_stack_pointer(-16);_.lorotext_slice(R,this.__wbg_ptr,e,t);var s=a()[R/4+0],i=a()[R/4+1],d=a()[R/4+2],p=a()[R/4+3],g=s,v=i;if(p)throw g=0,v=0,l(d);return n=g,o=v,P(g,v)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_5(n,o,1)}}charAt(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotext_charAt(s,this.__wbg_ptr,e);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return String.fromCodePoint(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}splice(e,t,n){let o,s;try{const oe=_.__wbindgen_add_to_stack_pointer(-16),X=V(n,_.__wbindgen_export_0,_.__wbindgen_export_1),me=I;_.lorotext_splice(oe,this.__wbg_ptr,e,t,X,me);var i=a()[oe/4+0],d=a()[oe/4+1],p=a()[oe/4+2],g=a()[oe/4+3],v=i,R=d;if(g)throw v=0,R=0,l(p);return o=v,s=R,P(v,R)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_5(o,s,1)}}insertUtf8(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=V(t,_.__wbindgen_export_0,_.__wbindgen_export_1),d=I;_.lorotext_insertUtf8(s,this.__wbg_ptr,e,i,d);var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}delete(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotext_delete(s,this.__wbg_ptr,e,t);var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}deleteUtf8(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotext_deleteUtf8(s,this.__wbg_ptr,e,t);var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}mark(e,t,n){try{const i=_.__wbindgen_add_to_stack_pointer(-16),d=V(t,_.__wbindgen_export_0,_.__wbindgen_export_1),p=I;_.lorotext_mark(i,this.__wbg_ptr,u(e),d,p,u(n));var o=a()[i/4+0],s=a()[i/4+1];if(s)throw l(o)}finally{_.__wbindgen_add_to_stack_pointer(16)}}unmark(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=V(t,_.__wbindgen_export_0,_.__wbindgen_export_1),d=I;_.lorotext_unmark(s,this.__wbg_ptr,u(e),i,d);var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}toString(){let e,t;try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotext_toString(s,this.__wbg_ptr);var n=a()[s/4+0],o=a()[s/4+1];return e=n,t=o,P(n,o)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_5(e,t,1)}}toDelta(){const e=_.lorotext_toDelta(this.__wbg_ptr);return l(e)}get id(){const e=_.lorotext_id(this.__wbg_ptr);return l(e)}get length(){return _.lorotext_length(this.__wbg_ptr)>>>0}subscribe(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotext_subscribe(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}applyDelta(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorotext_applyDelta(o,this.__wbg_ptr,u(e));var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}parent(){const e=_.lorotext_parent(this.__wbg_ptr);return l(e)}isAttached(){return _.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=_.lorotext_getAttached(this.__wbg_ptr);return l(e)}getCursor(e,t){const n=_.lorotext_getCursor(this.__wbg_ptr,e,u(t));return n===0?void 0:be.__wrap(n)}push(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16),s=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),i=I;_.lorotext_push(o,this.__wbg_ptr,s,i);var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}getEditorOf(e){const t=_.lorotext_getEditorOf(this.__wbg_ptr,e);return l(t)}isDeleted(){return _.lorotext_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){let e,t;try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotext_getShallowValue(s,this.__wbg_ptr);var n=a()[s/4+0],o=a()[s/4+1];return e=n,t=o,P(n,o)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_5(e,t,1)}}}const wr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>_.__wbg_lorotree_free(r>>>0));class xt{static __wrap(e){e=e>>>0;const t=Object.create(xt.prototype);return t.__wbg_ptr=e,wr.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,wr.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_lorotree_free(e)}constructor(){const e=_.lorotree_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=_.lorotree_kind(this.__wbg_ptr);return l(e)}createNode(e,t){try{const i=_.__wbindgen_add_to_stack_pointer(-16);_.lorotree_createNode(i,this.__wbg_ptr,K(e),!Q(t),Q(t)?0:t);var n=a()[i/4+0],o=a()[i/4+1],s=a()[i/4+2];if(s)throw l(o);return de.__wrap(n)}finally{_.__wbindgen_add_to_stack_pointer(16),U[W++]=void 0}}move(e,t,n){try{const i=_.__wbindgen_add_to_stack_pointer(-16);_.lorotree_move(i,this.__wbg_ptr,K(e),K(t),!Q(n),Q(n)?0:n);var o=a()[i/4+0],s=a()[i/4+1];if(s)throw l(o)}finally{_.__wbindgen_add_to_stack_pointer(16),U[W++]=void 0,U[W++]=void 0}}delete(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorotree_delete(o,this.__wbg_ptr,K(e));var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16),U[W++]=void 0}}getNodeByID(e){try{const t=_.lorotree_getNodeByID(this.__wbg_ptr,K(e));return t===0?void 0:de.__wrap(t)}finally{U[W++]=void 0}}get id(){const e=_.lorotree_id(this.__wbg_ptr);return l(e)}has(e){try{return _.lorotree_has(this.__wbg_ptr,K(e))!==0}finally{U[W++]=void 0}}isNodeDeleted(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotree_isNodeDeleted(s,this.__wbg_ptr,K(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return t!==0}finally{_.__wbindgen_add_to_stack_pointer(16),U[W++]=void 0}}toArray(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorotree_toArray(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return l(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}getNodes(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotree_getNodes(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=_.lorotree_toJSON(this.__wbg_ptr);return l(e)}nodes(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorotree_nodes(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=ae(e,t).slice();return _.__wbindgen_export_5(e,t*4,4),n}finally{_.__wbindgen_add_to_stack_pointer(16)}}roots(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorotree_roots(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=ae(e,t).slice();return _.__wbindgen_export_5(e,t*4,4),n}finally{_.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotree_subscribe(s,this.__wbg_ptr,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}parent(){const e=_.lorotree_parent(this.__wbg_ptr);return l(e)}isAttached(){return _.lorotree_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=_.lorotree_getAttached(this.__wbg_ptr);return l(e)}enableFractionalIndex(e){_.lorotree_enableFractionalIndex(this.__wbg_ptr,e)}disableFractionalIndex(){_.lorotree_disableFractionalIndex(this.__wbg_ptr)}isFractionalIndexEnabled(){return _.lorotree_isFractionalIndexEnabled(this.__wbg_ptr)!==0}isDeleted(){return _.lorotree_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=_.lorotree_getShallowValue(this.__wbg_ptr);return l(e)}}const mr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>_.__wbg_lorotreenode_free(r>>>0));class de{static __wrap(e){e=e>>>0;const t=Object.create(de.prototype);return t.__wbg_ptr=e,mr.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,mr.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_lorotreenode_free(e)}__getClassname(){let e,t;try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotreenode___getClassname(s,this.__wbg_ptr);var n=a()[s/4+0],o=a()[s/4+1];return e=n,t=o,P(n,o)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_5(e,t,1)}}get id(){const e=_.lorotreenode_id(this.__wbg_ptr);return l(e)}createNode(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotreenode_createNode(s,this.__wbg_ptr,!Q(e),Q(e)?0:e);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return de.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}move(e,t){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotreenode_move(s,this.__wbg_ptr,K(e),!Q(t),Q(t)?0:t);var n=a()[s/4+0],o=a()[s/4+1];if(o)throw l(n)}finally{_.__wbindgen_add_to_stack_pointer(16),U[W++]=void 0}}moveAfter(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);Re(e,de),_.lorotreenode_moveAfter(o,this.__wbg_ptr,e.__wbg_ptr);var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}moveBefore(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);Re(e,de),_.lorotreenode_moveBefore(o,this.__wbg_ptr,e.__wbg_ptr);var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}index(){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.lorotreenode_index(s,this.__wbg_ptr);var e=a()[s/4+0],t=a()[s/4+1],n=a()[s/4+2],o=a()[s/4+3];if(o)throw l(n);return e===0?void 0:t>>>0}finally{_.__wbindgen_add_to_stack_pointer(16)}}fractionalIndex(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorotreenode_fractionalIndex(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return l(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get data(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorotreenode_data(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return Ye.__wrap(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}toJSON(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorotreenode_toJSON(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return l(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}parent(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorotreenode_parent(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return e===0?void 0:de.__wrap(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}children(){const e=_.lorotreenode_children(this.__wbg_ptr);return l(e)}isDeleted(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.lorotreenode_isDeleted(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return e!==0}finally{_.__wbindgen_add_to_stack_pointer(16)}}getLastMoveId(){const e=_.lorotreenode_getLastMoveId(this.__wbg_ptr);return l(e)}creationId(){const e=_.lorotreenode_creationId(this.__wbg_ptr);return l(e)}creator(){const e=_.lorotreenode_creator(this.__wbg_ptr);return l(e)}}const xs=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>_.__wbg_undomanager_free(r>>>0));class Ss{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,xs.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_undomanager_free(e)}constructor(e,t){Re(e,se);const n=_.undomanager_new(e.__wbg_ptr,u(t));return this.__wbg_ptr=n>>>0,this}undo(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.undomanager_undo(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return e!==0}finally{_.__wbindgen_add_to_stack_pointer(16)}}redo(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.undomanager_redo(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=a()[o/4+2];if(n)throw l(t);return e!==0}finally{_.__wbindgen_add_to_stack_pointer(16)}}canUndo(){return _.undomanager_canUndo(this.__wbg_ptr)!==0}canRedo(){return _.undomanager_canRedo(this.__wbg_ptr)!==0}setMaxUndoSteps(e){_.undomanager_setMaxUndoSteps(this.__wbg_ptr,e)}setMergeInterval(e){_.undomanager_setMergeInterval(this.__wbg_ptr,e)}addExcludeOriginPrefix(e){const t=V(e,_.__wbindgen_export_0,_.__wbindgen_export_1),n=I;_.undomanager_addExcludeOriginPrefix(this.__wbg_ptr,t,n)}checkBinding(e){return Re(e,se),_.undomanager_checkBinding(this.__wbg_ptr,e.__wbg_ptr)!==0}setOnPush(e){_.undomanager_setOnPush(this.__wbg_ptr,u(e))}setOnPop(e){_.undomanager_setOnPop(this.__wbg_ptr,u(e))}clear(){_.undomanager_clear(this.__wbg_ptr)}}const yr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>_.__wbg_versionvector_free(r>>>0));class ee{static __wrap(e){e=e>>>0;const t=Object.create(ee.prototype);return t.__wbg_ptr=e,yr.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,yr.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_versionvector_free(e)}constructor(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.versionvector_new(s,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return this.__wbg_ptr=t>>>0,this}finally{_.__wbindgen_add_to_stack_pointer(16)}}static parseJSON(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.versionvector_parseJSON(s,u(e));var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return ee.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=_.versionvector_toJSON(this.__wbg_ptr);return l(e)}encode(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.versionvector_encode(o,this.__wbg_ptr);var e=a()[o/4+0],t=a()[o/4+1],n=xe(e,t).slice();return _.__wbindgen_export_5(e,t*1,1),n}finally{_.__wbindgen_add_to_stack_pointer(16)}}static decode(e){try{const s=_.__wbindgen_add_to_stack_pointer(-16),i=De(e,_.__wbindgen_export_0),d=I;_.versionvector_decode(s,i,d);var t=a()[s/4+0],n=a()[s/4+1],o=a()[s/4+2];if(o)throw l(n);return ee.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get(e){try{const i=_.__wbindgen_add_to_stack_pointer(-16);_.versionvector_get(i,this.__wbg_ptr,u(e));var t=a()[i/4+0],n=a()[i/4+1],o=a()[i/4+2],s=a()[i/4+3];if(s)throw l(o);return t===0?void 0:n}finally{_.__wbindgen_add_to_stack_pointer(16)}}compare(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);Re(e,ee),_.versionvector_compare(o,this.__wbg_ptr,e.__wbg_ptr);var t=a()[o/4+0],n=a()[o/4+1];return t===0?void 0:n}finally{_.__wbindgen_add_to_stack_pointer(16)}}setEnd(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.versionvector_setEnd(o,this.__wbg_ptr,u(e));var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}setLast(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.versionvector_setLast(o,this.__wbg_ptr,u(e));var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}remove(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.versionvector_remove(o,this.__wbg_ptr,u(e));var t=a()[o/4+0],n=a()[o/4+1];if(n)throw l(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}length(){return _.versionvector_length(this.__wbg_ptr)>>>0}}function Rr(r){l(r)}function $r(r){const e=Ye.__wrap(r);return u(e)}function jr(r){const e=kt.__wrap(r);return u(e)}function Lr(r){const e=yt.__wrap(r);return u(e)}function Ur(r){const e=xt.__wrap(r);return u(e)}function Zr(r){const e=be.__wrap(r);return u(e)}function Vr(r){const e=vt.__wrap(r);return u(e)}function Fr(r){const e=mt.__wrap(r);return u(e)}function Pr(r){const e=de.__wrap(r);return u(e)}function Br(r){const e=ee.__wrap(r);return u(e)}function zr(r){return typeof h(r)=="function"}function Wr(r,e){const t=P(r,e);return u(t)}function Jr(r){const e=h(r);return typeof e=="boolean"?e?1:0:2}function qr(r,e){const t=new Error(P(r,e));return u(t)}function Hr(r){const e=h(r);return u(e)}function Yr(r,e){const t=h(e),n=typeof t=="string"?t:void 0;var o=Q(n)?0:V(n,_.__wbindgen_export_0,_.__wbindgen_export_1),s=I;a()[r/4+1]=s,a()[r/4+0]=o}function Xr(r){return h(r)===void 0}function Gr(r,e){return h(r)in h(e)}function Kr(r){return typeof h(r)=="bigint"}function Qr(r,e){const t=h(e),n=typeof t=="number"?t:void 0;Er()[r/8+1]=Q(n)?0:n,a()[r/4+0]=!Q(n)}function en(r){return u(r)}function tn(r,e){return h(r)===h(e)}function rn(r){const e=h(r);return typeof e=="object"&&e!==null}function nn(r){const e=BigInt.asUintN(64,r);return u(e)}function on(r){const e=l(r).original;return e.cnt--==1?(e.a=0,!0):!1}function sn(r){return+h(r)}function _n(r){return typeof h(r)=="string"}function an(r){return h(r)===null}function cn(r){return u(r)}function dn(r){const e=typeof h(r);return u(e)}function ln(r,e){console.error(P(r,e))}function un(r,e){console.log(P(r,e))}function pn(r){return!h(r)}function gn(r,e){return h(r)==h(e)}function fn(r,e){const t=String(h(e)),n=V(t,_.__wbindgen_export_0,_.__wbindgen_export_1),o=I;a()[r/4+1]=o,a()[r/4+0]=n}function hn(r,e){const t=h(r)[h(e)];return u(t)}function bn(r,e,t){h(r)[l(e)]=l(t)}function wn(r,e){let t,n;try{t=r,n=e,console.log(P(r,e))}finally{_.__wbindgen_export_5(t,n,1)}}function mn(r,e,t,n,o,s,i,d){let p,g;try{p=r,g=e,console.log(P(r,e),P(t,n),P(o,s),P(i,d))}finally{_.__wbindgen_export_5(p,g,1)}}function yn(r,e){performance.mark(P(r,e))}function vn(){return J(function(r,e,t,n){let o,s,i,d;try{o=r,s=e,i=t,d=n,performance.measure(P(r,e),P(t,n))}finally{_.__wbindgen_export_5(o,s,1),_.__wbindgen_export_5(i,d,1)}},arguments)}function kn(){const r=new Error;return u(r)}function xn(r,e){const t=h(e).stack,n=V(t,_.__wbindgen_export_0,_.__wbindgen_export_1),o=I;a()[r/4+1]=o,a()[r/4+0]=n}function Sn(r,e){let t,n;try{t=r,n=e,console.error(P(r,e))}finally{_.__wbindgen_export_5(t,n,1)}}const Cn=typeof Date.now=="function"?Date.now:ys("Date.now");function An(r){const e=h(r).crypto;return u(e)}function Tn(r){const e=h(r).process;return u(e)}function On(r){const e=h(r).versions;return u(e)}function In(r){const e=h(r).node;return u(e)}function Mn(){return J(function(){const r=module.require;return u(r)},arguments)}function En(r){const e=h(r).msCrypto;return u(e)}function Nn(){return J(function(r,e){h(r).getRandomValues(h(e))},arguments)}function Dn(){return J(function(r,e){h(r).randomFillSync(l(e))},arguments)}function Rn(){return J(function(){const r=self.self;return u(r)},arguments)}function $n(){return J(function(){const r=window.window;return u(r)},arguments)}function jn(){return J(function(){const r=globalThis.globalThis;return u(r)},arguments)}function Ln(){return J(function(){const r=global.global;return u(r)},arguments)}function Un(r,e){const t=new Function(P(r,e));return u(t)}function Zn(){return J(function(r,e){const t=h(r).call(h(e));return u(t)},arguments)}function Vn(r,e){const t=h(r)[e>>>0];return u(t)}function Fn(r){return h(r).length}function Pn(){const r=new Array;return u(r)}function Bn(){return u(new Map)}function zn(r){const e=h(r).next;return u(e)}function Wn(){return J(function(r){const e=h(r).next();return u(e)},arguments)}function Jn(r){return h(r).done}function qn(r){const e=h(r).value;return u(e)}function Hn(){return u(Symbol.iterator)}function Yn(){return J(function(r,e){const t=Reflect.get(h(r),h(e));return u(t)},arguments)}function Xn(){const r=new Object;return u(r)}function Gn(r){const e=new Array(r>>>0);return u(e)}function Kn(r,e,t){h(r)[e>>>0]=l(t)}function Qn(r){return Array.isArray(h(r))}function eo(r,e){return h(r).push(h(e))}function to(r){let e;try{e=h(r)instanceof ArrayBuffer}catch{e=!1}return e}function ro(){return J(function(r,e,t){const n=h(r).call(h(e),h(t));return u(n)},arguments)}function no(){return J(function(r,e,t,n){const o=h(r).call(h(e),h(t),h(n));return u(o)},arguments)}function oo(){return J(function(r,e,t,n,o){const s=h(r).call(h(e),h(t),h(n),h(o));return u(s)},arguments)}function so(r){let e;try{e=h(r)instanceof Map}catch{e=!1}return e}function _o(r,e,t){const n=h(r).set(h(e),h(t));return u(n)}function ao(r){const e=h(r).entries();return u(e)}function io(r){return Number.isSafeInteger(h(r))}function co(r){let e;try{e=h(r)instanceof Object}catch{e=!1}return e}function lo(r){const e=Object.entries(h(r));return u(e)}function uo(){return J(function(r,e,t){const n=Reflect.apply(h(r),h(e),h(t));return u(n)},arguments)}function po(){return J(function(r){const e=Reflect.ownKeys(h(r));return u(e)},arguments)}function go(){return J(function(r,e,t){return Reflect.set(h(r),h(e),h(t))},arguments)}function fo(r){const e=h(r).buffer;return u(e)}function ho(r){const e=Promise.resolve(h(r));return u(e)}function bo(r,e){const t=h(r).then(h(e));return u(t)}function wo(r,e,t){const n=new Uint8Array(h(r),e>>>0,t>>>0);return u(n)}function mo(r){const e=new Uint8Array(h(r));return u(e)}function yo(r,e,t){h(r).set(h(e),t>>>0)}function vo(r){return h(r).length}function ko(r){let e;try{e=h(r)instanceof Uint8Array}catch{e=!1}return e}function xo(r){const e=new Uint8Array(r>>>0);return u(e)}function So(r,e,t){const n=h(r).subarray(e>>>0,t>>>0);return u(n)}function Co(r,e){return h(r)[e>>>0]}function Ao(r,e,t){h(r)[e>>>0]=t}function To(r,e){const t=h(e),n=typeof t=="bigint"?t:void 0;us()[r/8+1]=Q(n)?BigInt(0):n,a()[r/4+0]=!Q(n)}function Oo(r,e){const t=Xt(h(e)),n=V(t,_.__wbindgen_export_0,_.__wbindgen_export_1),o=I;a()[r/4+1]=o,a()[r/4+0]=n}function Io(r,e){throw new Error(P(r,e))}function Mo(r){throw l(r)}function Eo(){const r=_.memory;return u(r)}function No(r,e,t){const n=Nr(r,e,9,ps);return u(n)}function Do(r,e,t){const n=Nr(r,e,11,gs);return u(n)}var Cs=Object.freeze({__proto__:null,AwarenessWasm:ks,Cursor:be,LoroCounter:mt,LoroDoc:se,LoroList:yt,LoroMap:Ye,LoroMovableList:vt,LoroText:kt,LoroTree:xt,LoroTreeNode:de,UndoManager:Ss,VersionVector:ee,__wbg_String_b9412f8799faab3e:fn,__wbg_apply_0a5aa603881e6d79:uo,__wbg_buffer_12d079cc21e14bdb:fo,__wbg_call_27c0f87801dedf93:Zn,__wbg_call_8e7cb608789c2528:no,__wbg_call_938992c832f74314:oo,__wbg_call_b3ca7c6051f9bec1:ro,__wbg_crypto_1d1f22824a6a080c:An,__wbg_cursor_new:Zr,__wbg_done_298b57d23c0fc80c:Jn,__wbg_entries_95cc2c823b285a09:lo,__wbg_entries_ce844941d0c51880:ao,__wbg_error_c8c2cca30a630316:ln,__wbg_error_f851667af71bcfc6:Sn,__wbg_getRandomValues_3aa56aa6edec874c:Nn,__wbg_get_bd8e338fbd5f5cc8:Vn,__wbg_get_e3c254076557e348:Yn,__wbg_getindex_03d06b4e7ea3475e:Co,__wbg_getwithrefkey_edc2c8960f0f1191:hn,__wbg_globalThis_d1e6af4856ba331b:jn,__wbg_global_207b558942527489:Ln,__wbg_instanceof_ArrayBuffer_836825be07d4c9d2:to,__wbg_instanceof_Map_87917e0a7aaf4012:so,__wbg_instanceof_Object_71ca3c0a59266746:co,__wbg_instanceof_Uint8Array_2b3bbecd033d19f6:ko,__wbg_isArray_2ab64d95e09ea0ae:Qn,__wbg_isSafeInteger_f7b04ef02296c4d2:io,__wbg_iterator_2cee6dadfd956dfa:Hn,__wbg_length_c20a40f15020d68a:vo,__wbg_length_cd7af8117672b8b8:Fn,__wbg_log_aba5996d9bde071f:mn,__wbg_log_c9486ca5d8e2cbe8:wn,__wbg_log_d8fdbde28117925d:un,__wbg_lorocounter_new:Fr,__wbg_lorolist_new:Lr,__wbg_loromap_new:$r,__wbg_loromovablelist_new:Vr,__wbg_lorotext_new:jr,__wbg_lorotree_new:Ur,__wbg_lorotreenode_new:Pr,__wbg_mark_40e050a77cc39fea:yn,__wbg_measure_aa7a73f17813f708:vn,__wbg_msCrypto_eb05e62b530a1508:En,__wbg_new_16b304a2cfa7ff4a:Pn,__wbg_new_63b92bc8671ed464:mo,__wbg_new_72fb9a18b5ae2624:Xn,__wbg_new_abda76e883ba8a5f:kn,__wbg_new_d9bc3a0147634640:Bn,__wbg_newnoargs_e258087cd0daa0ea:Un,__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb:wo,__wbg_newwithlength_66ae46612e7f0234:Gn,__wbg_newwithlength_e9b4878cebadb3d3:xo,__wbg_next_196c84450b364254:Wn,__wbg_next_40fc327bfc8770e6:zn,__wbg_node_104a2ff8d6ea03a2:In,__wbg_now_11683c634f92ae89:Cn,__wbg_ownKeys_658942b7f28d1fe9:po,__wbg_process_4a72847cc503995b:Tn,__wbg_push_a5b05aedc7234f9f:eo,__wbg_randomFillSync_5c9c955aa56b6049:Dn,__wbg_require_cca90b1a94a0255b:Mn,__wbg_resolve_b0083a7967828ec8:ho,__wbg_self_ce0dbfc45cf2f5be:Rn,__wbg_set_1f9b04f170055d33:go,__wbg_set_8417257aaedc936b:_o,__wbg_set_a47bac70306a19a7:yo,__wbg_set_d4638f722068f043:Kn,__wbg_set_f975102236d3c502:bn,__wbg_set_wasm:Yt,__wbg_setindex_0b7ede192dc5eca8:Ao,__wbg_stack_658279fe44541cf6:xn,__wbg_subarray_a1f73cd4b5b42fe1:So,__wbg_then_0c86a60e8fcfe9f6:bo,__wbg_value_d93c65011f51a456:qn,__wbg_versions_f686565e586dd935:On,__wbg_versionvector_new:Br,__wbg_window_c6fb939a7f436783:$n,__wbindgen_as_number:sn,__wbindgen_bigint_from_i64:en,__wbindgen_bigint_from_u64:nn,__wbindgen_bigint_get_as_i64:To,__wbindgen_boolean_get:Jr,__wbindgen_cb_drop:on,__wbindgen_closure_wrapper487:No,__wbindgen_closure_wrapper489:Do,__wbindgen_debug_string:Oo,__wbindgen_error_new:qr,__wbindgen_in:Gr,__wbindgen_is_bigint:Kr,__wbindgen_is_falsy:pn,__wbindgen_is_function:zr,__wbindgen_is_null:an,__wbindgen_is_object:rn,__wbindgen_is_string:_n,__wbindgen_is_undefined:Xr,__wbindgen_jsval_eq:tn,__wbindgen_jsval_loose_eq:gn,__wbindgen_memory:Eo,__wbindgen_number_get:Qr,__wbindgen_number_new:cn,__wbindgen_object_clone_ref:Hr,__wbindgen_object_drop_ref:Rr,__wbindgen_rethrow:Mo,__wbindgen_string_get:Yr,__wbindgen_string_new:Wr,__wbindgen_throw:Io,__wbindgen_typeof:dn,decodeFrontiers:bs,decodeImportBlobMeta:ms,encodeFrontiers:hs,run:fs,setDebug:ws});URL=globalThis.URL;const c=await as({"./loro_wasm_bg.js":{__wbindgen_object_drop_ref:Rr,__wbg_loromap_new:$r,__wbg_lorotext_new:jr,__wbg_lorolist_new:Lr,__wbg_lorotree_new:Ur,__wbg_cursor_new:Zr,__wbg_loromovablelist_new:Vr,__wbg_lorocounter_new:Fr,__wbg_lorotreenode_new:Pr,__wbg_versionvector_new:Br,__wbindgen_is_function:zr,__wbindgen_string_new:Wr,__wbindgen_boolean_get:Jr,__wbindgen_error_new:qr,__wbindgen_object_clone_ref:Hr,__wbindgen_string_get:Yr,__wbindgen_is_undefined:Xr,__wbindgen_in:Gr,__wbindgen_is_bigint:Kr,__wbindgen_number_get:Qr,__wbindgen_bigint_from_i64:en,__wbindgen_jsval_eq:tn,__wbindgen_is_object:rn,__wbindgen_bigint_from_u64:nn,__wbindgen_cb_drop:on,__wbindgen_as_number:sn,__wbindgen_is_string:_n,__wbindgen_is_null:an,__wbindgen_number_new:cn,__wbindgen_typeof:dn,__wbg_error_c8c2cca30a630316:ln,__wbg_log_d8fdbde28117925d:un,__wbindgen_is_falsy:pn,__wbindgen_jsval_loose_eq:gn,__wbg_String_b9412f8799faab3e:fn,__wbg_getwithrefkey_edc2c8960f0f1191:hn,__wbg_set_f975102236d3c502:bn,__wbg_log_c9486ca5d8e2cbe8:wn,__wbg_log_aba5996d9bde071f:mn,__wbg_mark_40e050a77cc39fea:yn,__wbg_measure_aa7a73f17813f708:vn,__wbg_new_abda76e883ba8a5f:kn,__wbg_stack_658279fe44541cf6:xn,__wbg_error_f851667af71bcfc6:Sn,__wbg_now_11683c634f92ae89:Cn,__wbg_crypto_1d1f22824a6a080c:An,__wbg_process_4a72847cc503995b:Tn,__wbg_versions_f686565e586dd935:On,__wbg_node_104a2ff8d6ea03a2:In,__wbg_require_cca90b1a94a0255b:Mn,__wbg_msCrypto_eb05e62b530a1508:En,__wbg_getRandomValues_3aa56aa6edec874c:Nn,__wbg_randomFillSync_5c9c955aa56b6049:Dn,__wbg_self_ce0dbfc45cf2f5be:Rn,__wbg_window_c6fb939a7f436783:$n,__wbg_globalThis_d1e6af4856ba331b:jn,__wbg_global_207b558942527489:Ln,__wbg_newnoargs_e258087cd0daa0ea:Un,__wbg_call_27c0f87801dedf93:Zn,__wbg_get_bd8e338fbd5f5cc8:Vn,__wbg_length_cd7af8117672b8b8:Fn,__wbg_new_16b304a2cfa7ff4a:Pn,__wbg_new_d9bc3a0147634640:Bn,__wbg_next_40fc327bfc8770e6:zn,__wbg_next_196c84450b364254:Wn,__wbg_done_298b57d23c0fc80c:Jn,__wbg_value_d93c65011f51a456:qn,__wbg_iterator_2cee6dadfd956dfa:Hn,__wbg_get_e3c254076557e348:Yn,__wbg_new_72fb9a18b5ae2624:Xn,__wbg_newwithlength_66ae46612e7f0234:Gn,__wbg_set_d4638f722068f043:Kn,__wbg_isArray_2ab64d95e09ea0ae:Qn,__wbg_push_a5b05aedc7234f9f:eo,__wbg_instanceof_ArrayBuffer_836825be07d4c9d2:to,__wbg_call_b3ca7c6051f9bec1:ro,__wbg_call_8e7cb608789c2528:no,__wbg_call_938992c832f74314:oo,__wbg_instanceof_Map_87917e0a7aaf4012:so,__wbg_set_8417257aaedc936b:_o,__wbg_entries_ce844941d0c51880:ao,__wbg_isSafeInteger_f7b04ef02296c4d2:io,__wbg_instanceof_Object_71ca3c0a59266746:co,__wbg_entries_95cc2c823b285a09:lo,__wbg_apply_0a5aa603881e6d79:uo,__wbg_ownKeys_658942b7f28d1fe9:po,__wbg_set_1f9b04f170055d33:go,__wbg_buffer_12d079cc21e14bdb:fo,__wbg_resolve_b0083a7967828ec8:ho,__wbg_then_0c86a60e8fcfe9f6:bo,__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb:wo,__wbg_new_63b92bc8671ed464:mo,__wbg_set_a47bac70306a19a7:yo,__wbg_length_c20a40f15020d68a:vo,__wbg_instanceof_Uint8Array_2b3bbecd033d19f6:ko,__wbg_newwithlength_e9b4878cebadb3d3:xo,__wbg_subarray_a1f73cd4b5b42fe1:So,__wbg_getindex_03d06b4e7ea3475e:Co,__wbg_setindex_0b7ede192dc5eca8:Ao,__wbindgen_bigint_get_as_i64:To,__wbindgen_debug_string:Oo,__wbindgen_throw:Io,__wbindgen_rethrow:Mo,__wbindgen_memory:Eo,__wbindgen_closure_wrapper487:No,__wbindgen_closure_wrapper489:Do}},_s),As=c.memory,Ts=c.__wbg_lorocounter_free,Os=c.lorocounter_new,Is=c.lorocounter_increment,Ms=c.lorocounter_decrement,Es=c.lorocounter_value,Ns=c.lorocounter_subscribe,Ds=c.lorocounter_parent,Rs=c.lorocounter_isAttached,$s=c.lorocounter_getAttached,js=c.lorocounter_getShallowValue,Ls=c.__wbg_awarenesswasm_free,Us=c.awarenesswasm_new,Zs=c.awarenesswasm_encode,Vs=c.awarenesswasm_encodeAll,Fs=c.awarenesswasm_apply,Ps=c.awarenesswasm_setLocalState,Bs=c.awarenesswasm_peer,zs=c.awarenesswasm_getAllStates,Ws=c.awarenesswasm_getState,Js=c.awarenesswasm_getTimestamp,qs=c.awarenesswasm_removeOutdated,Hs=c.awarenesswasm_length,Ys=c.awarenesswasm_isEmpty,Xs=c.awarenesswasm_peers,Gs=c.run,Ks=c.encodeFrontiers,Qs=c.decodeFrontiers,e_=c.setDebug,t_=c.__wbg_lorodoc_free,r_=c.lorodoc_new,n_=c.lorodoc_setDetachedEditing,o_=c.lorodoc_isDetachedEditingEnabled,s_=c.lorodoc_setRecordTimestamp,__=c.lorodoc_setChangeMergeInterval,a_=c.lorodoc_configTextStyle,i_=c.lorodoc_fromSnapshot,c_=c.lorodoc_attach,d_=c.lorodoc_isDetached,l_=c.lorodoc_detach,u_=c.lorodoc_fork,p_=c.lorodoc_forkAt,g_=c.lorodoc_checkoutToLatest,f_=c.lorodoc_travelChangeAncestors,h_=c.lorodoc_checkout,b_=c.lorodoc_peerId,w_=c.lorodoc_peerIdStr,m_=c.lorodoc_setPeerId,y_=c.lorodoc_commit,v_=c.lorodoc_getPendingTxnLength,k_=c.lorodoc_getText,x_=c.lorodoc_getMap,S_=c.lorodoc_getList,C_=c.lorodoc_getMovableList,A_=c.lorodoc_getCounter,T_=c.lorodoc_getTree,O_=c.lorodoc_getContainerById,I_=c.lorodoc_setNextCommitMessage,M_=c.lorodoc_getDeepValueWithID,E_=c.lorodoc_getPathToContainer,N_=c.lorodoc_JSONPath,D_=c.lorodoc_version,R_=c.lorodoc_shallowSinceVV,$_=c.lorodoc_isShallow,j_=c.lorodoc_shallowSinceFrontiers,L_=c.lorodoc_oplogVersion,U_=c.lorodoc_frontiers,Z_=c.lorodoc_oplogFrontiers,V_=c.lorodoc_cmpWithFrontiers,F_=c.lorodoc_cmpFrontiers,P_=c.lorodoc_exportSnapshot,B_=c.lorodoc_exportFrom,z_=c.lorodoc_export,W_=c.lorodoc_exportJsonUpdates,J_=c.lorodoc_importJsonUpdates,q_=c.lorodoc_import,H_=c.lorodoc_importUpdateBatch,Y_=c.lorodoc_importBatch,X_=c.lorodoc_getShallowValue,G_=c.lorodoc_toJSON,K_=c.lorodoc_subscribe,Q_=c.lorodoc_subscribeLocalUpdates,ea=c.lorodoc_debugHistory,ta=c.lorodoc_changeCount,ra=c.lorodoc_opCount,na=c.lorodoc_getAllChanges,oa=c.lorodoc_getChangeAt,sa=c.lorodoc_getChangeAtLamport,_a=c.lorodoc_getOpsInChange,aa=c.lorodoc_frontiersToVV,ia=c.lorodoc_vvToFrontiers,ca=c.lorodoc_getByPath,da=c.lorodoc_getCursorPos,la=c.lorodoc_getChangedContainersIn,ua=c.__wbg_lorotext_free,pa=c.lorotext_new,ga=c.lorotext_kind,fa=c.lorotext_iter,ha=c.lorotext_update,ba=c.lorotext_updateByLine,wa=c.lorotext_insert,ma=c.lorotext_slice,ya=c.lorotext_charAt,va=c.lorotext_splice,ka=c.lorotext_insertUtf8,xa=c.lorotext_delete,Sa=c.lorotext_deleteUtf8,Ca=c.lorotext_mark,Aa=c.lorotext_unmark,Ta=c.lorotext_toString,Oa=c.lorotext_toDelta,Ia=c.lorotext_id,Ma=c.lorotext_length,Ea=c.lorotext_subscribe,Na=c.lorotext_applyDelta,Da=c.lorotext_parent,Ra=c.lorotext_getAttached,$a=c.lorotext_getCursor,ja=c.lorotext_push,La=c.lorotext_getEditorOf,Ua=c.lorotext_isDeleted,Za=c.lorotext_getShallowValue,Va=c.__wbg_loromap_free,Fa=c.loromap_new,Pa=c.loromap_kind,Ba=c.loromap_set,za=c.loromap_delete,Wa=c.loromap_get,Ja=c.loromap_getOrCreateContainer,qa=c.loromap_keys,Ha=c.loromap_values,Ya=c.loromap_entries,Xa=c.loromap_id,Ga=c.loromap_toJSON,Ka=c.loromap_setContainer,Qa=c.loromap_subscribe,ei=c.loromap_size,ti=c.loromap_parent,ri=c.loromap_getAttached,ni=c.loromap_clear,oi=c.loromap_getLastEditor,si=c.loromap_isDeleted,_i=c.loromap_getShallowValue,ai=c.__wbg_lorolist_free,ii=c.lorolist_new,ci=c.lorolist_kind,di=c.lorolist_insert,li=c.lorolist_delete,ui=c.lorolist_get,pi=c.lorolist_id,gi=c.lorolist_toArray,fi=c.lorolist_toJSON,hi=c.lorolist_insertContainer,bi=c.lorolist_pushContainer,wi=c.lorolist_subscribe,mi=c.lorolist_length,yi=c.lorolist_parent,vi=c.lorolist_isAttached,ki=c.lorolist_getAttached,xi=c.lorolist_getCursor,Si=c.lorolist_push,Ci=c.lorolist_pop,Ai=c.lorolist_clear,Ti=c.lorolist_getIdAt,Oi=c.lorolist_isDeleted,Ii=c.lorolist_getShallowValue,Mi=c.loromovablelist_new,Ei=c.loromovablelist_kind,Ni=c.loromovablelist_insert,Di=c.loromovablelist_delete,Ri=c.loromovablelist_get,$i=c.loromovablelist_id,ji=c.loromovablelist_toArray,Li=c.loromovablelist_toJSON,Ui=c.loromovablelist_insertContainer,Zi=c.loromovablelist_pushContainer,Vi=c.loromovablelist_subscribe,Fi=c.loromovablelist_length,Pi=c.loromovablelist_getAttached,Bi=c.loromovablelist_getCursor,zi=c.loromovablelist_move,Wi=c.loromovablelist_set,Ji=c.loromovablelist_setContainer,qi=c.loromovablelist_push,Hi=c.loromovablelist_pop,Yi=c.loromovablelist_clear,Xi=c.loromovablelist_getCreatorAt,Gi=c.loromovablelist_getLastMoverAt,Ki=c.loromovablelist_getLastEditorAt,Qi=c.loromovablelist_isDeleted,ec=c.loromovablelist_getShallowValue,tc=c.__wbg_lorotree_free,rc=c.lorotreenode___getClassname,nc=c.__wbg_lorotreenode_free,oc=c.lorotreenode_id,sc=c.lorotreenode_createNode,_c=c.lorotreenode_move,ac=c.lorotreenode_moveAfter,ic=c.lorotreenode_moveBefore,cc=c.lorotreenode_index,dc=c.lorotreenode_fractionalIndex,lc=c.lorotreenode_data,uc=c.lorotreenode_toJSON,pc=c.lorotreenode_parent,gc=c.lorotreenode_children,fc=c.lorotreenode_isDeleted,hc=c.lorotreenode_getLastMoveId,bc=c.lorotreenode_creationId,wc=c.lorotreenode_creator,mc=c.lorotree_new,yc=c.lorotree_kind,vc=c.lorotree_createNode,kc=c.lorotree_move,xc=c.lorotree_delete,Sc=c.lorotree_getNodeByID,Cc=c.lorotree_id,Ac=c.lorotree_has,Tc=c.lorotree_isNodeDeleted,Oc=c.lorotree_toArray,Ic=c.lorotree_getNodes,Mc=c.lorotree_toJSON,Ec=c.lorotree_nodes,Nc=c.lorotree_roots,Dc=c.lorotree_subscribe,Rc=c.lorotree_parent,$c=c.lorotree_isAttached,jc=c.lorotree_getAttached,Lc=c.lorotree_enableFractionalIndex,Uc=c.lorotree_disableFractionalIndex,Zc=c.lorotree_isFractionalIndexEnabled,Vc=c.lorotree_isDeleted,Fc=c.lorotree_getShallowValue,Pc=c.__wbg_cursor_free,Bc=c.cursor_containerId,zc=c.cursor_pos,Wc=c.cursor_side,Jc=c.cursor_encode,qc=c.cursor_decode,Hc=c.cursor_kind,Yc=c.__wbg_undomanager_free,Xc=c.undomanager_new,Gc=c.undomanager_undo,Kc=c.undomanager_redo,Qc=c.undomanager_canUndo,ed=c.undomanager_canRedo,td=c.undomanager_setMaxUndoSteps,rd=c.undomanager_setMergeInterval,nd=c.undomanager_addExcludeOriginPrefix,od=c.undomanager_checkBinding,sd=c.undomanager_setOnPush,_d=c.undomanager_setOnPop,ad=c.undomanager_clear,id=c.__wbg_versionvector_free,cd=c.versionvector_new,dd=c.versionvector_parseJSON,ld=c.versionvector_toJSON,ud=c.versionvector_encode,pd=c.versionvector_decode,gd=c.versionvector_get,fd=c.versionvector_compare,hd=c.versionvector_setEnd,bd=c.versionvector_setLast,wd=c.versionvector_remove,md=c.versionvector_length,yd=c.decodeImportBlobMeta,vd=c.__wbg_loromovablelist_free,kd=c.loromovablelist_parent,xd=c.lorotext_isAttached,Sd=c.loromap_isAttached,Cd=c.loromovablelist_isAttached,Ad=c.__wbindgen_export_0,Td=c.__wbindgen_export_1,Od=c.__wbindgen_export_2,Id=c.__wbindgen_export_3,Md=c.__wbindgen_export_4,Ed=c.__wbindgen_add_to_stack_pointer,Nd=c.__wbindgen_export_5,Dd=c.__wbindgen_export_6,Gt=c.__wbindgen_start;var vr=Object.freeze({__proto__:null,__wbg_awarenesswasm_free:Ls,__wbg_cursor_free:Pc,__wbg_lorocounter_free:Ts,__wbg_lorodoc_free:t_,__wbg_lorolist_free:ai,__wbg_loromap_free:Va,__wbg_loromovablelist_free:vd,__wbg_lorotext_free:ua,__wbg_lorotree_free:tc,__wbg_lorotreenode_free:nc,__wbg_undomanager_free:Yc,__wbg_versionvector_free:id,__wbindgen_add_to_stack_pointer:Ed,__wbindgen_export_0:Ad,__wbindgen_export_1:Td,__wbindgen_export_2:Od,__wbindgen_export_3:Id,__wbindgen_export_4:Md,__wbindgen_export_5:Nd,__wbindgen_export_6:Dd,__wbindgen_start:Gt,awarenesswasm_apply:Fs,awarenesswasm_encode:Zs,awarenesswasm_encodeAll:Vs,awarenesswasm_getAllStates:zs,awarenesswasm_getState:Ws,awarenesswasm_getTimestamp:Js,awarenesswasm_isEmpty:Ys,awarenesswasm_length:Hs,awarenesswasm_new:Us,awarenesswasm_peer:Bs,awarenesswasm_peers:Xs,awarenesswasm_removeOutdated:qs,awarenesswasm_setLocalState:Ps,cursor_containerId:Bc,cursor_decode:qc,cursor_encode:Jc,cursor_kind:Hc,cursor_pos:zc,cursor_side:Wc,decodeFrontiers:Qs,decodeImportBlobMeta:yd,encodeFrontiers:Ks,lorocounter_decrement:Ms,lorocounter_getAttached:$s,lorocounter_getShallowValue:js,lorocounter_increment:Is,lorocounter_isAttached:Rs,lorocounter_new:Os,lorocounter_parent:Ds,lorocounter_subscribe:Ns,lorocounter_value:Es,lorodoc_JSONPath:N_,lorodoc_attach:c_,lorodoc_changeCount:ta,lorodoc_checkout:h_,lorodoc_checkoutToLatest:g_,lorodoc_cmpFrontiers:F_,lorodoc_cmpWithFrontiers:V_,lorodoc_commit:y_,lorodoc_configTextStyle:a_,lorodoc_debugHistory:ea,lorodoc_detach:l_,lorodoc_export:z_,lorodoc_exportFrom:B_,lorodoc_exportJsonUpdates:W_,lorodoc_exportSnapshot:P_,lorodoc_fork:u_,lorodoc_forkAt:p_,lorodoc_fromSnapshot:i_,lorodoc_frontiers:U_,lorodoc_frontiersToVV:aa,lorodoc_getAllChanges:na,lorodoc_getByPath:ca,lorodoc_getChangeAt:oa,lorodoc_getChangeAtLamport:sa,lorodoc_getChangedContainersIn:la,lorodoc_getContainerById:O_,lorodoc_getCounter:A_,lorodoc_getCursorPos:da,lorodoc_getDeepValueWithID:M_,lorodoc_getList:S_,lorodoc_getMap:x_,lorodoc_getMovableList:C_,lorodoc_getOpsInChange:_a,lorodoc_getPathToContainer:E_,lorodoc_getPendingTxnLength:v_,lorodoc_getShallowValue:X_,lorodoc_getText:k_,lorodoc_getTree:T_,lorodoc_import:q_,lorodoc_importBatch:Y_,lorodoc_importJsonUpdates:J_,lorodoc_importUpdateBatch:H_,lorodoc_isDetached:d_,lorodoc_isDetachedEditingEnabled:o_,lorodoc_isShallow:$_,lorodoc_new:r_,lorodoc_opCount:ra,lorodoc_oplogFrontiers:Z_,lorodoc_oplogVersion:L_,lorodoc_peerId:b_,lorodoc_peerIdStr:w_,lorodoc_setChangeMergeInterval:__,lorodoc_setDetachedEditing:n_,lorodoc_setNextCommitMessage:I_,lorodoc_setPeerId:m_,lorodoc_setRecordTimestamp:s_,lorodoc_shallowSinceFrontiers:j_,lorodoc_shallowSinceVV:R_,lorodoc_subscribe:K_,lorodoc_subscribeLocalUpdates:Q_,lorodoc_toJSON:G_,lorodoc_travelChangeAncestors:f_,lorodoc_version:D_,lorodoc_vvToFrontiers:ia,lorolist_clear:Ai,lorolist_delete:li,lorolist_get:ui,lorolist_getAttached:ki,lorolist_getCursor:xi,lorolist_getIdAt:Ti,lorolist_getShallowValue:Ii,lorolist_id:pi,lorolist_insert:di,lorolist_insertContainer:hi,lorolist_isAttached:vi,lorolist_isDeleted:Oi,lorolist_kind:ci,lorolist_length:mi,lorolist_new:ii,lorolist_parent:yi,lorolist_pop:Ci,lorolist_push:Si,lorolist_pushContainer:bi,lorolist_subscribe:wi,lorolist_toArray:gi,lorolist_toJSON:fi,loromap_clear:ni,loromap_delete:za,loromap_entries:Ya,loromap_get:Wa,loromap_getAttached:ri,loromap_getLastEditor:oi,loromap_getOrCreateContainer:Ja,loromap_getShallowValue:_i,loromap_id:Xa,loromap_isAttached:Sd,loromap_isDeleted:si,loromap_keys:qa,loromap_kind:Pa,loromap_new:Fa,loromap_parent:ti,loromap_set:Ba,loromap_setContainer:Ka,loromap_size:ei,loromap_subscribe:Qa,loromap_toJSON:Ga,loromap_values:Ha,loromovablelist_clear:Yi,loromovablelist_delete:Di,loromovablelist_get:Ri,loromovablelist_getAttached:Pi,loromovablelist_getCreatorAt:Xi,loromovablelist_getCursor:Bi,loromovablelist_getLastEditorAt:Ki,loromovablelist_getLastMoverAt:Gi,loromovablelist_getShallowValue:ec,loromovablelist_id:$i,loromovablelist_insert:Ni,loromovablelist_insertContainer:Ui,loromovablelist_isAttached:Cd,loromovablelist_isDeleted:Qi,loromovablelist_kind:Ei,loromovablelist_length:Fi,loromovablelist_move:zi,loromovablelist_new:Mi,loromovablelist_parent:kd,loromovablelist_pop:Hi,loromovablelist_push:qi,loromovablelist_pushContainer:Zi,loromovablelist_set:Wi,loromovablelist_setContainer:Ji,loromovablelist_subscribe:Vi,loromovablelist_toArray:ji,loromovablelist_toJSON:Li,lorotext_applyDelta:Na,lorotext_charAt:ya,lorotext_delete:xa,lorotext_deleteUtf8:Sa,lorotext_getAttached:Ra,lorotext_getCursor:$a,lorotext_getEditorOf:La,lorotext_getShallowValue:Za,lorotext_id:Ia,lorotext_insert:wa,lorotext_insertUtf8:ka,lorotext_isAttached:xd,lorotext_isDeleted:Ua,lorotext_iter:fa,lorotext_kind:ga,lorotext_length:Ma,lorotext_mark:Ca,lorotext_new:pa,lorotext_parent:Da,lorotext_push:ja,lorotext_slice:ma,lorotext_splice:va,lorotext_subscribe:Ea,lorotext_toDelta:Oa,lorotext_toString:Ta,lorotext_unmark:Aa,lorotext_update:ha,lorotext_updateByLine:ba,lorotree_createNode:vc,lorotree_delete:xc,lorotree_disableFractionalIndex:Uc,lorotree_enableFractionalIndex:Lc,lorotree_getAttached:jc,lorotree_getNodeByID:Sc,lorotree_getNodes:Ic,lorotree_getShallowValue:Fc,lorotree_has:Ac,lorotree_id:Cc,lorotree_isAttached:$c,lorotree_isDeleted:Vc,lorotree_isFractionalIndexEnabled:Zc,lorotree_isNodeDeleted:Tc,lorotree_kind:yc,lorotree_move:kc,lorotree_new:mc,lorotree_nodes:Ec,lorotree_parent:Rc,lorotree_roots:Nc,lorotree_subscribe:Dc,lorotree_toArray:Oc,lorotree_toJSON:Mc,lorotreenode___getClassname:rc,lorotreenode_children:gc,lorotreenode_createNode:sc,lorotreenode_creationId:bc,lorotreenode_creator:wc,lorotreenode_data:lc,lorotreenode_fractionalIndex:dc,lorotreenode_getLastMoveId:hc,lorotreenode_id:oc,lorotreenode_index:cc,lorotreenode_isDeleted:fc,lorotreenode_move:_c,lorotreenode_moveAfter:ac,lorotreenode_moveBefore:ic,lorotreenode_parent:pc,lorotreenode_toJSON:uc,memory:As,run:Gs,setDebug:e_,undomanager_addExcludeOriginPrefix:nd,undomanager_canRedo:ed,undomanager_canUndo:Qc,undomanager_checkBinding:od,undomanager_clear:ad,undomanager_new:Xc,undomanager_redo:Kc,undomanager_setMaxUndoSteps:td,undomanager_setMergeInterval:rd,undomanager_setOnPop:_d,undomanager_setOnPush:sd,undomanager_undo:Gc,versionvector_compare:fd,versionvector_decode:pd,versionvector_encode:ud,versionvector_get:gd,versionvector_length:md,versionvector_new:cd,versionvector_parseJSON:dd,versionvector_remove:wd,versionvector_setEnd:hd,versionvector_setLast:bd,versionvector_toJSON:ld});if(Gt)Yt(vr),Gt();else{const r=await Promise.resolve().then(function(){return vr}),e=new WebAssembly.Instance(r.default,{"./loro_wasm_bg.js":Cs});Yt(e.exports)}const Rd=["Map","Text","List","Tree","MovableList","Counter"];function $d(r){return r.startsWith("cid:")}function kr(r){if(typeof r!="object"||r==null)return!1;const e=Object.getPrototypeOf(r);return e==null||typeof e!="object"||typeof e.kind!="function"?!1:Rd.includes(r.kind())}se.prototype.toJsonWithReplacer=function(r){const e=this,t=(s,i)=>{if(typeof i=="string"&&$d(i)){const p=e.getContainerById(i);if(p==null)throw new Error(`ContainerID not found: ${i}`);const g=r(s,p);if(g===p){const v=p.getShallowValue();return typeof v=="object"?n(v):v}if(kr(g))throw new Error("Using new container is not allowed in toJsonWithReplacer");return g}const d=r(s,i);if(kr(d))throw new Error("Using new container is not allowed in toJsonWithReplacer");return d},n=s=>{if(Array.isArray(s))return s.map((d,p)=>t(p,d)).filter(d=>d!==void 0);const i={};for(const[d,p]of Object.entries(s)){const g=t(d,p);g!==void 0&&(i[d]=g)}return i},o=this.getShallowValue();return n(o)};var $;(function(r){r.assertEqual=o=>o;function e(o){}r.assertIs=e;function t(o){throw new Error}r.assertNever=t,r.arrayToEnum=o=>{const s={};for(const i of o)s[i]=i;return s},r.getValidEnumValues=o=>{const s=r.objectKeys(o).filter(d=>typeof o[o[d]]!="number"),i={};for(const d of s)i[d]=o[d];return r.objectValues(i)},r.objectValues=o=>r.objectKeys(o).map(function(s){return o[s]}),r.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const s=[];for(const i in o)Object.prototype.hasOwnProperty.call(o,i)&&s.push(i);return s},r.find=(o,s)=>{for(const i of o)if(s(i))return i},r.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function n(o,s=" | "){return o.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}r.joinValues=n,r.jsonStringifyReplacer=(o,s)=>typeof s=="bigint"?s.toString():s})($||($={}));var Kt;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Kt||(Kt={}));const m=$.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),fe=r=>{switch(typeof r){case"undefined":return m.undefined;case"string":return m.string;case"number":return isNaN(r)?m.nan:m.number;case"boolean":return m.boolean;case"function":return m.function;case"bigint":return m.bigint;case"symbol":return m.symbol;case"object":return Array.isArray(r)?m.array:r===null?m.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?m.promise:typeof Map<"u"&&r instanceof Map?m.map:typeof Set<"u"&&r instanceof Set?m.set:typeof Date<"u"&&r instanceof Date?m.date:m.object;default:return m.unknown}},f=$.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),jd=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class re extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(s){return s.message},n={_errors:[]},o=s=>{for(const i of s.issues)if(i.code==="invalid_union")i.unionErrors.map(o);else if(i.code==="invalid_return_type")o(i.returnTypeError);else if(i.code==="invalid_arguments")o(i.argumentsError);else if(i.path.length===0)n._errors.push(t(i));else{let d=n,p=0;for(;p<i.path.length;){const g=i.path[p];p===i.path.length-1?(d[g]=d[g]||{_errors:[]},d[g]._errors.push(t(i))):d[g]=d[g]||{_errors:[]},d=d[g],p++}}};return o(this),n}static assert(e){if(!(e instanceof re))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,$.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const o of this.issues)o.path.length>0?(t[o.path[0]]=t[o.path[0]]||[],t[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}re.create=r=>new re(r);const We=(r,e)=>{let t;switch(r.code){case f.invalid_type:r.received===m.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case f.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,$.jsonStringifyReplacer)}`;break;case f.unrecognized_keys:t=`Unrecognized key(s) in object: ${$.joinValues(r.keys,", ")}`;break;case f.invalid_union:t="Invalid input";break;case f.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${$.joinValues(r.options)}`;break;case f.invalid_enum_value:t=`Invalid enum value. Expected ${$.joinValues(r.options)}, received '${r.received}'`;break;case f.invalid_arguments:t="Invalid function arguments";break;case f.invalid_return_type:t="Invalid function return type";break;case f.invalid_date:t="Invalid date";break;case f.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:$.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case f.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case f.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case f.custom:t="Invalid input";break;case f.invalid_intersection_types:t="Intersection results could not be merged";break;case f.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case f.not_finite:t="Number must be finite";break;default:t=e.defaultError,$.assertNever(r)}return{message:t}};let Ro=We;function Ld(r){Ro=r}function $t(){return Ro}const jt=r=>{const{data:e,path:t,errorMaps:n,issueData:o}=r,s=[...t,...o.path||[]],i={...o,path:s};if(o.message!==void 0)return{...o,path:s,message:o.message};let d="";const p=n.filter(g=>!!g).slice().reverse();for(const g of p)d=g(i,{data:e,defaultError:d}).message;return{...o,path:s,message:d}},Ud=[];function b(r,e){const t=$t(),n=jt({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===We?void 0:We].filter(o=>!!o)});r.common.issues.push(n)}class H{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const o of t){if(o.status==="aborted")return T;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const o of t){const s=await o.key,i=await o.value;n.push({key:s,value:i})}return H.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const o of t){const{key:s,value:i}=o;if(s.status==="aborted"||i.status==="aborted")return T;s.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof i.value<"u"||o.alwaysSet)&&(n[s.value]=i.value)}return{status:e.value,value:n}}}const T=Object.freeze({status:"aborted"}),Ve=r=>({status:"dirty",value:r}),Y=r=>({status:"valid",value:r}),Qt=r=>r.status==="aborted",er=r=>r.status==="dirty",$e=r=>r.status==="valid",ot=r=>typeof Promise<"u"&&r instanceof Promise;function Lt(r,e,t,n){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(r)}function $o(r,e,t,n,o){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var x;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(x||(x={}));var et,tt;class ue{constructor(e,t,n,o){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xr=(r,e)=>{if($e(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new re(r.common.issues);return this._error=t,this._error}}};function M(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:o}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(i,d)=>{var p,g;const{message:v}=r;return i.code==="invalid_enum_value"?{message:v??d.defaultError}:typeof d.data>"u"?{message:(p=v??n)!==null&&p!==void 0?p:d.defaultError}:i.code!=="invalid_type"?{message:d.defaultError}:{message:(g=v??t)!==null&&g!==void 0?g:d.defaultError}},description:o}}class D{get description(){return this._def.description}_getType(e){return fe(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:fe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new H,ctx:{common:e.parent.common,data:e.data,parsedType:fe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(ot(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const o={common:{issues:[],async:(n=t?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fe(e)},s=this._parseSync({data:e,path:o.path,parent:o});return xr(o,s)}"~validate"(e){var t,n;const o={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fe(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:o});return $e(s)?{value:s.value}:{issues:o.common.issues}}catch(s){!((n=(t=s?.message)===null||t===void 0?void 0:t.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),o.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:o}).then(s=>$e(s)?{value:s.value}:{issues:o.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fe(e)},o=this._parse({data:e,path:n.path,parent:n}),s=await (ot(o)?o:Promise.resolve(o));return xr(n,s)}refine(e,t){const n=o=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(o):t;return this._refinement((o,s)=>{const i=e(o),d=()=>s.addIssue({code:f.custom,...n(o)});return typeof Promise<"u"&&i instanceof Promise?i.then(p=>p?!0:(d(),!1)):i?!0:(d(),!1)})}refinement(e,t){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof t=="function"?t(n,o):t),!1))}_refinement(e){return new ce({schema:this,typeName:A.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return le.create(this,this._def)}nullable(){return Te.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ie.create(this)}promise(){return qe.create(this,this._def)}or(e){return it.create([this,e],this._def)}and(e){return ct.create(this,e,this._def)}transform(e){return new ce({...M(this._def),schema:this,typeName:A.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new gt({...M(this._def),innerType:this,defaultValue:t,typeName:A.ZodDefault})}brand(){return new or({typeName:A.ZodBranded,type:this,...M(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new ft({...M(this._def),innerType:this,catchValue:t,typeName:A.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return St.create(this,e)}readonly(){return ht.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Zd=/^c[^\s-]{8,}$/i,Vd=/^[0-9a-z]+$/,Fd=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Pd=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Bd=/^[a-z0-9_-]{21}$/i,zd=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Wd=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Jd=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,qd="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let qt;const Hd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Yd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Xd=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Gd=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Kd=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Qd=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,jo="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",el=new RegExp(`^${jo}$`);function Lo(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function tl(r){return new RegExp(`^${Lo(r)}$`)}function Uo(r){let e=`${jo}T${Lo(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function rl(r,e){return!!((e==="v4"||!e)&&Hd.test(r)||(e==="v6"||!e)&&Xd.test(r))}function nl(r,e){if(!zd.test(r))return!1;try{const[t]=r.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||!o.typ||!o.alg||e&&o.alg!==e)}catch{return!1}}function ol(r,e){return!!((e==="v4"||!e)&&Yd.test(r)||(e==="v6"||!e)&&Gd.test(r))}class _e extends D{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==m.string){const s=this._getOrReturnCtx(e);return b(s,{code:f.invalid_type,expected:m.string,received:s.parsedType}),T}const n=new H;let o;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(o=this._getOrReturnCtx(e,o),b(o,{code:f.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(o=this._getOrReturnCtx(e,o),b(o,{code:f.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const i=e.data.length>s.value,d=e.data.length<s.value;(i||d)&&(o=this._getOrReturnCtx(e,o),i?b(o,{code:f.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):d&&b(o,{code:f.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")Jd.test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"email",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")qt||(qt=new RegExp(qd,"u")),qt.test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"emoji",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")Pd.test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"uuid",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")Bd.test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"nanoid",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")Zd.test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"cuid",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")Vd.test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"cuid2",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")Fd.test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"ulid",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),b(o,{validation:"url",code:f.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"regex",code:f.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(o=this._getOrReturnCtx(e,o),b(o,{code:f.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(o=this._getOrReturnCtx(e,o),b(o,{code:f.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(o=this._getOrReturnCtx(e,o),b(o,{code:f.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?Uo(s).test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{code:f.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?el.test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{code:f.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?tl(s).test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{code:f.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?Wd.test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"duration",code:f.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?rl(e.data,s.version)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"ip",code:f.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?nl(e.data,s.alg)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"jwt",code:f.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?ol(e.data,s.version)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"cidr",code:f.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?Kd.test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"base64",code:f.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?Qd.test(e.data)||(o=this._getOrReturnCtx(e,o),b(o,{validation:"base64url",code:f.invalid_string,message:s.message}),n.dirty()):$.assertNever(s);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(o=>e.test(o),{validation:t,code:f.invalid_string,...x.errToObj(n)})}_addCheck(e){return new _e({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...x.errToObj(e)})}url(e){return this._addCheck({kind:"url",...x.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...x.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...x.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...x.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...x.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...x.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...x.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...x.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...x.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...x.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...x.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...x.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...x.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...x.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...x.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...x.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...x.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...x.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...x.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...x.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...x.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...x.errToObj(t)})}nonempty(e){return this.min(1,x.errToObj(e))}trim(){return new _e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}_e.create=r=>{var e;return new _e({checks:[],typeName:A.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...M(r)})};function sl(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=t>n?t:n,s=parseInt(r.toFixed(o).replace(".","")),i=parseInt(e.toFixed(o).replace(".",""));return s%i/Math.pow(10,o)}class Se extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==m.number){const s=this._getOrReturnCtx(e);return b(s,{code:f.invalid_type,expected:m.number,received:s.parsedType}),T}let n;const o=new H;for(const s of this._def.checks)s.kind==="int"?$.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{code:f.invalid_type,expected:"integer",received:"float",message:s.message}),o.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),b(n,{code:f.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),b(n,{code:f.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="multipleOf"?sl(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),b(n,{code:f.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{code:f.not_finite,message:s.message}),o.dirty()):$.assertNever(s);return{status:o.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,x.toString(t))}gt(e,t){return this.setLimit("min",e,!1,x.toString(t))}lte(e,t){return this.setLimit("max",e,!0,x.toString(t))}lt(e,t){return this.setLimit("max",e,!1,x.toString(t))}setLimit(e,t,n,o){return new Se({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:x.toString(o)}]})}_addCheck(e){return new Se({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:x.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:x.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:x.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:x.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:x.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:x.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:x.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:x.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:x.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&$.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Se.create=r=>new Se({checks:[],typeName:A.ZodNumber,coerce:r?.coerce||!1,...M(r)});class Ce extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==m.bigint)return this._getInvalidInput(e);let n;const o=new H;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),b(n,{code:f.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),b(n,{code:f.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),b(n,{code:f.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):$.assertNever(s);return{status:o.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:m.bigint,received:t.parsedType}),T}gte(e,t){return this.setLimit("min",e,!0,x.toString(t))}gt(e,t){return this.setLimit("min",e,!1,x.toString(t))}lte(e,t){return this.setLimit("max",e,!0,x.toString(t))}lt(e,t){return this.setLimit("max",e,!1,x.toString(t))}setLimit(e,t,n,o){return new Ce({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:x.toString(o)}]})}_addCheck(e){return new Ce({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:x.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:x.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:x.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:x.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:x.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ce.create=r=>{var e;return new Ce({checks:[],typeName:A.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...M(r)})};class st extends D{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==m.boolean){const n=this._getOrReturnCtx(e);return b(n,{code:f.invalid_type,expected:m.boolean,received:n.parsedType}),T}return Y(e.data)}}st.create=r=>new st({typeName:A.ZodBoolean,coerce:r?.coerce||!1,...M(r)});class je extends D{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==m.date){const s=this._getOrReturnCtx(e);return b(s,{code:f.invalid_type,expected:m.date,received:s.parsedType}),T}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return b(s,{code:f.invalid_date}),T}const n=new H;let o;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(o=this._getOrReturnCtx(e,o),b(o,{code:f.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(o=this._getOrReturnCtx(e,o),b(o,{code:f.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):$.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new je({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:x.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:x.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}je.create=r=>new je({checks:[],coerce:r?.coerce||!1,typeName:A.ZodDate,...M(r)});class Ut extends D{_parse(e){if(this._getType(e)!==m.symbol){const n=this._getOrReturnCtx(e);return b(n,{code:f.invalid_type,expected:m.symbol,received:n.parsedType}),T}return Y(e.data)}}Ut.create=r=>new Ut({typeName:A.ZodSymbol,...M(r)});class _t extends D{_parse(e){if(this._getType(e)!==m.undefined){const n=this._getOrReturnCtx(e);return b(n,{code:f.invalid_type,expected:m.undefined,received:n.parsedType}),T}return Y(e.data)}}_t.create=r=>new _t({typeName:A.ZodUndefined,...M(r)});class at extends D{_parse(e){if(this._getType(e)!==m.null){const n=this._getOrReturnCtx(e);return b(n,{code:f.invalid_type,expected:m.null,received:n.parsedType}),T}return Y(e.data)}}at.create=r=>new at({typeName:A.ZodNull,...M(r)});class Je extends D{constructor(){super(...arguments),this._any=!0}_parse(e){return Y(e.data)}}Je.create=r=>new Je({typeName:A.ZodAny,...M(r)});class Ne extends D{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Y(e.data)}}Ne.create=r=>new Ne({typeName:A.ZodUnknown,...M(r)});class we extends D{_parse(e){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:m.never,received:t.parsedType}),T}}we.create=r=>new we({typeName:A.ZodNever,...M(r)});class Zt extends D{_parse(e){if(this._getType(e)!==m.undefined){const n=this._getOrReturnCtx(e);return b(n,{code:f.invalid_type,expected:m.void,received:n.parsedType}),T}return Y(e.data)}}Zt.create=r=>new Zt({typeName:A.ZodVoid,...M(r)});class ie extends D{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),o=this._def;if(t.parsedType!==m.array)return b(t,{code:f.invalid_type,expected:m.array,received:t.parsedType}),T;if(o.exactLength!==null){const i=t.data.length>o.exactLength.value,d=t.data.length<o.exactLength.value;(i||d)&&(b(t,{code:i?f.too_big:f.too_small,minimum:d?o.exactLength.value:void 0,maximum:i?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&t.data.length<o.minLength.value&&(b(t,{code:f.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&t.data.length>o.maxLength.value&&(b(t,{code:f.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((i,d)=>o.type._parseAsync(new ue(t,i,t.path,d)))).then(i=>H.mergeArray(n,i));const s=[...t.data].map((i,d)=>o.type._parseSync(new ue(t,i,t.path,d)));return H.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new ie({...this._def,minLength:{value:e,message:x.toString(t)}})}max(e,t){return new ie({...this._def,maxLength:{value:e,message:x.toString(t)}})}length(e,t){return new ie({...this._def,exactLength:{value:e,message:x.toString(t)}})}nonempty(e){return this.min(1,e)}}ie.create=(r,e)=>new ie({type:r,minLength:null,maxLength:null,exactLength:null,typeName:A.ZodArray,...M(e)});function Ze(r){if(r instanceof Z){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=le.create(Ze(n))}return new Z({...r._def,shape:()=>e})}else return r instanceof ie?new ie({...r._def,type:Ze(r.element)}):r instanceof le?le.create(Ze(r.unwrap())):r instanceof Te?Te.create(Ze(r.unwrap())):r instanceof pe?pe.create(r.items.map(e=>Ze(e))):r}class Z extends D{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=$.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==m.object){const g=this._getOrReturnCtx(e);return b(g,{code:f.invalid_type,expected:m.object,received:g.parsedType}),T}const{status:n,ctx:o}=this._processInputParams(e),{shape:s,keys:i}=this._getCached(),d=[];if(!(this._def.catchall instanceof we&&this._def.unknownKeys==="strip"))for(const g in o.data)i.includes(g)||d.push(g);const p=[];for(const g of i){const v=s[g],R=o.data[g];p.push({key:{status:"valid",value:g},value:v._parse(new ue(o,R,o.path,g)),alwaysSet:g in o.data})}if(this._def.catchall instanceof we){const g=this._def.unknownKeys;if(g==="passthrough")for(const v of d)p.push({key:{status:"valid",value:v},value:{status:"valid",value:o.data[v]}});else if(g==="strict")d.length>0&&(b(o,{code:f.unrecognized_keys,keys:d}),n.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const g=this._def.catchall;for(const v of d){const R=o.data[v];p.push({key:{status:"valid",value:v},value:g._parse(new ue(o,R,o.path,v)),alwaysSet:v in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const g=[];for(const v of p){const R=await v.key,oe=await v.value;g.push({key:R,value:oe,alwaysSet:v.alwaysSet})}return g}).then(g=>H.mergeObjectSync(n,g)):H.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return x.errToObj,new Z({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var o,s,i,d;const p=(i=(s=(o=this._def).errorMap)===null||s===void 0?void 0:s.call(o,t,n).message)!==null&&i!==void 0?i:n.defaultError;return t.code==="unrecognized_keys"?{message:(d=x.errToObj(e).message)!==null&&d!==void 0?d:p}:{message:p}}}:{}})}strip(){return new Z({...this._def,unknownKeys:"strip"})}passthrough(){return new Z({...this._def,unknownKeys:"passthrough"})}extend(e){return new Z({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Z({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:A.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Z({...this._def,catchall:e})}pick(e){const t={};return $.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new Z({...this._def,shape:()=>t})}omit(e){const t={};return $.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new Z({...this._def,shape:()=>t})}deepPartial(){return Ze(this)}partial(e){const t={};return $.objectKeys(this.shape).forEach(n=>{const o=this.shape[n];e&&!e[n]?t[n]=o:t[n]=o.optional()}),new Z({...this._def,shape:()=>t})}required(e){const t={};return $.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof le;)s=s._def.innerType;t[n]=s}}),new Z({...this._def,shape:()=>t})}keyof(){return Zo($.objectKeys(this.shape))}}Z.create=(r,e)=>new Z({shape:()=>r,unknownKeys:"strip",catchall:we.create(),typeName:A.ZodObject,...M(e)});Z.strictCreate=(r,e)=>new Z({shape:()=>r,unknownKeys:"strict",catchall:we.create(),typeName:A.ZodObject,...M(e)});Z.lazycreate=(r,e)=>new Z({shape:r,unknownKeys:"strip",catchall:we.create(),typeName:A.ZodObject,...M(e)});class it extends D{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function o(s){for(const d of s)if(d.result.status==="valid")return d.result;for(const d of s)if(d.result.status==="dirty")return t.common.issues.push(...d.ctx.common.issues),d.result;const i=s.map(d=>new re(d.ctx.common.issues));return b(t,{code:f.invalid_union,unionErrors:i}),T}if(t.common.async)return Promise.all(n.map(async s=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(o);{let s;const i=[];for(const p of n){const g={...t,common:{...t.common,issues:[]},parent:null},v=p._parseSync({data:t.data,path:t.path,parent:g});if(v.status==="valid")return v;v.status==="dirty"&&!s&&(s={result:v,ctx:g}),g.common.issues.length&&i.push(g.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const d=i.map(p=>new re(p));return b(t,{code:f.invalid_union,unionErrors:d}),T}}get options(){return this._def.options}}it.create=(r,e)=>new it({options:r,typeName:A.ZodUnion,...M(e)});const ge=r=>r instanceof lt?ge(r.schema):r instanceof ce?ge(r.innerType()):r instanceof ut?[r.value]:r instanceof Ae?r.options:r instanceof pt?$.objectValues(r.enum):r instanceof gt?ge(r._def.innerType):r instanceof _t?[void 0]:r instanceof at?[null]:r instanceof le?[void 0,...ge(r.unwrap())]:r instanceof Te?[null,...ge(r.unwrap())]:r instanceof or||r instanceof ht?ge(r.unwrap()):r instanceof ft?ge(r._def.innerType):[];class Pt extends D{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.object)return b(t,{code:f.invalid_type,expected:m.object,received:t.parsedType}),T;const n=this.discriminator,o=t.data[n],s=this.optionsMap.get(o);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(b(t,{code:f.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),T)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const o=new Map;for(const s of t){const i=ge(s.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const d of i){if(o.has(d))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(d)}`);o.set(d,s)}}return new Pt({typeName:A.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:o,...M(n)})}}function tr(r,e){const t=fe(r),n=fe(e);if(r===e)return{valid:!0,data:r};if(t===m.object&&n===m.object){const o=$.objectKeys(e),s=$.objectKeys(r).filter(d=>o.indexOf(d)!==-1),i={...r,...e};for(const d of s){const p=tr(r[d],e[d]);if(!p.valid)return{valid:!1};i[d]=p.data}return{valid:!0,data:i}}else if(t===m.array&&n===m.array){if(r.length!==e.length)return{valid:!1};const o=[];for(let s=0;s<r.length;s++){const i=r[s],d=e[s],p=tr(i,d);if(!p.valid)return{valid:!1};o.push(p.data)}return{valid:!0,data:o}}else return t===m.date&&n===m.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class ct extends D{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=(s,i)=>{if(Qt(s)||Qt(i))return T;const d=tr(s.value,i.value);return d.valid?((er(s)||er(i))&&t.dirty(),{status:t.value,value:d.data}):(b(n,{code:f.invalid_intersection_types}),T)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,i])=>o(s,i)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ct.create=(r,e,t)=>new ct({left:r,right:e,typeName:A.ZodIntersection,...M(t)});class pe extends D{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==m.array)return b(n,{code:f.invalid_type,expected:m.array,received:n.parsedType}),T;if(n.data.length<this._def.items.length)return b(n,{code:f.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),T;!this._def.rest&&n.data.length>this._def.items.length&&(b(n,{code:f.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...n.data].map((i,d)=>{const p=this._def.items[d]||this._def.rest;return p?p._parse(new ue(n,i,n.path,d)):null}).filter(i=>!!i);return n.common.async?Promise.all(s).then(i=>H.mergeArray(t,i)):H.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new pe({...this._def,rest:e})}}pe.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pe({items:r,typeName:A.ZodTuple,rest:null,...M(e)})};class dt extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==m.object)return b(n,{code:f.invalid_type,expected:m.object,received:n.parsedType}),T;const o=[],s=this._def.keyType,i=this._def.valueType;for(const d in n.data)o.push({key:s._parse(new ue(n,d,n.path,d)),value:i._parse(new ue(n,n.data[d],n.path,d)),alwaysSet:d in n.data});return n.common.async?H.mergeObjectAsync(t,o):H.mergeObjectSync(t,o)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof D?new dt({keyType:e,valueType:t,typeName:A.ZodRecord,...M(n)}):new dt({keyType:_e.create(),valueType:e,typeName:A.ZodRecord,...M(t)})}}class Vt extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==m.map)return b(n,{code:f.invalid_type,expected:m.map,received:n.parsedType}),T;const o=this._def.keyType,s=this._def.valueType,i=[...n.data.entries()].map(([d,p],g)=>({key:o._parse(new ue(n,d,n.path,[g,"key"])),value:s._parse(new ue(n,p,n.path,[g,"value"]))}));if(n.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const p of i){const g=await p.key,v=await p.value;if(g.status==="aborted"||v.status==="aborted")return T;(g.status==="dirty"||v.status==="dirty")&&t.dirty(),d.set(g.value,v.value)}return{status:t.value,value:d}})}else{const d=new Map;for(const p of i){const g=p.key,v=p.value;if(g.status==="aborted"||v.status==="aborted")return T;(g.status==="dirty"||v.status==="dirty")&&t.dirty(),d.set(g.value,v.value)}return{status:t.value,value:d}}}}Vt.create=(r,e,t)=>new Vt({valueType:e,keyType:r,typeName:A.ZodMap,...M(t)});class Le extends D{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==m.set)return b(n,{code:f.invalid_type,expected:m.set,received:n.parsedType}),T;const o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(b(n,{code:f.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),t.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(b(n,{code:f.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),t.dirty());const s=this._def.valueType;function i(p){const g=new Set;for(const v of p){if(v.status==="aborted")return T;v.status==="dirty"&&t.dirty(),g.add(v.value)}return{status:t.value,value:g}}const d=[...n.data.values()].map((p,g)=>s._parse(new ue(n,p,n.path,g)));return n.common.async?Promise.all(d).then(p=>i(p)):i(d)}min(e,t){return new Le({...this._def,minSize:{value:e,message:x.toString(t)}})}max(e,t){return new Le({...this._def,maxSize:{value:e,message:x.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Le.create=(r,e)=>new Le({valueType:r,minSize:null,maxSize:null,typeName:A.ZodSet,...M(e)});class Pe extends D{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.function)return b(t,{code:f.invalid_type,expected:m.function,received:t.parsedType}),T;function n(d,p){return jt({data:d,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,$t(),We].filter(g=>!!g),issueData:{code:f.invalid_arguments,argumentsError:p}})}function o(d,p){return jt({data:d,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,$t(),We].filter(g=>!!g),issueData:{code:f.invalid_return_type,returnTypeError:p}})}const s={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof qe){const d=this;return Y(async function(...p){const g=new re([]),v=await d._def.args.parseAsync(p,s).catch(X=>{throw g.addIssue(n(p,X)),g}),R=await Reflect.apply(i,this,v);return await d._def.returns._def.type.parseAsync(R,s).catch(X=>{throw g.addIssue(o(R,X)),g})})}else{const d=this;return Y(function(...p){const g=d._def.args.safeParse(p,s);if(!g.success)throw new re([n(p,g.error)]);const v=Reflect.apply(i,this,g.data),R=d._def.returns.safeParse(v,s);if(!R.success)throw new re([o(v,R.error)]);return R.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Pe({...this._def,args:pe.create(e).rest(Ne.create())})}returns(e){return new Pe({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Pe({args:e||pe.create([]).rest(Ne.create()),returns:t||Ne.create(),typeName:A.ZodFunction,...M(n)})}}class lt extends D{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}lt.create=(r,e)=>new lt({getter:r,typeName:A.ZodLazy,...M(e)});class ut extends D{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return b(t,{received:t.data,code:f.invalid_literal,expected:this._def.value}),T}return{status:"valid",value:e.data}}get value(){return this._def.value}}ut.create=(r,e)=>new ut({value:r,typeName:A.ZodLiteral,...M(e)});function Zo(r,e){return new Ae({values:r,typeName:A.ZodEnum,...M(e)})}class Ae extends D{constructor(){super(...arguments),et.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return b(t,{expected:$.joinValues(n),received:t.parsedType,code:f.invalid_type}),T}if(Lt(this,et)||$o(this,et,new Set(this._def.values)),!Lt(this,et).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return b(t,{received:t.data,code:f.invalid_enum_value,options:n}),T}return Y(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ae.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ae.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}et=new WeakMap;Ae.create=Zo;class pt extends D{constructor(){super(...arguments),tt.set(this,void 0)}_parse(e){const t=$.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==m.string&&n.parsedType!==m.number){const o=$.objectValues(t);return b(n,{expected:$.joinValues(o),received:n.parsedType,code:f.invalid_type}),T}if(Lt(this,tt)||$o(this,tt,new Set($.getValidEnumValues(this._def.values))),!Lt(this,tt).has(e.data)){const o=$.objectValues(t);return b(n,{received:n.data,code:f.invalid_enum_value,options:o}),T}return Y(e.data)}get enum(){return this._def.values}}tt=new WeakMap;pt.create=(r,e)=>new pt({values:r,typeName:A.ZodNativeEnum,...M(e)});class qe extends D{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.promise&&t.common.async===!1)return b(t,{code:f.invalid_type,expected:m.promise,received:t.parsedType}),T;const n=t.parsedType===m.promise?t.data:Promise.resolve(t.data);return Y(n.then(o=>this._def.type.parseAsync(o,{path:t.path,errorMap:t.common.contextualErrorMap})))}}qe.create=(r,e)=>new qe({type:r,typeName:A.ZodPromise,...M(e)});class ce extends D{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===A.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=this._def.effect||null,s={addIssue:i=>{b(n,i),i.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),o.type==="preprocess"){const i=o.transform(n.data,s);if(n.common.async)return Promise.resolve(i).then(async d=>{if(t.value==="aborted")return T;const p=await this._def.schema._parseAsync({data:d,path:n.path,parent:n});return p.status==="aborted"?T:p.status==="dirty"||t.value==="dirty"?Ve(p.value):p});{if(t.value==="aborted")return T;const d=this._def.schema._parseSync({data:i,path:n.path,parent:n});return d.status==="aborted"?T:d.status==="dirty"||t.value==="dirty"?Ve(d.value):d}}if(o.type==="refinement"){const i=d=>{const p=o.refinement(d,s);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(n.common.async===!1){const d=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return d.status==="aborted"?T:(d.status==="dirty"&&t.dirty(),i(d.value),{status:t.value,value:d.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(d=>d.status==="aborted"?T:(d.status==="dirty"&&t.dirty(),i(d.value).then(()=>({status:t.value,value:d.value}))))}if(o.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!$e(i))return i;const d=o.transform(i.value,s);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:d}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>$e(i)?Promise.resolve(o.transform(i.value,s)).then(d=>({status:t.value,value:d})):i);$.assertNever(o)}}ce.create=(r,e,t)=>new ce({schema:r,typeName:A.ZodEffects,effect:e,...M(t)});ce.createWithPreprocess=(r,e,t)=>new ce({schema:e,effect:{type:"preprocess",transform:r},typeName:A.ZodEffects,...M(t)});class le extends D{_parse(e){return this._getType(e)===m.undefined?Y(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}le.create=(r,e)=>new le({innerType:r,typeName:A.ZodOptional,...M(e)});class Te extends D{_parse(e){return this._getType(e)===m.null?Y(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Te.create=(r,e)=>new Te({innerType:r,typeName:A.ZodNullable,...M(e)});class gt extends D{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===m.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}gt.create=(r,e)=>new gt({innerType:r,typeName:A.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...M(e)});class ft extends D{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ot(o)?o.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new re(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new re(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ft.create=(r,e)=>new ft({innerType:r,typeName:A.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...M(e)});class Ft extends D{_parse(e){if(this._getType(e)!==m.nan){const n=this._getOrReturnCtx(e);return b(n,{code:f.invalid_type,expected:m.nan,received:n.parsedType}),T}return{status:"valid",value:e.data}}}Ft.create=r=>new Ft({typeName:A.ZodNaN,...M(r)});const _l=Symbol("zod_brand");class or extends D{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class St extends D{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?T:s.status==="dirty"?(t.dirty(),Ve(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?T:o.status==="dirty"?(t.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,t){return new St({in:e,out:t,typeName:A.ZodPipeline})}}class ht extends D{_parse(e){const t=this._def.innerType._parse(e),n=o=>($e(o)&&(o.value=Object.freeze(o.value)),o);return ot(t)?t.then(o=>n(o)):n(t)}unwrap(){return this._def.innerType}}ht.create=(r,e)=>new ht({innerType:r,typeName:A.ZodReadonly,...M(e)});function Vo(r,e={},t){return r?Je.create().superRefine((n,o)=>{var s,i;if(!r(n)){const d=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(i=(s=d.fatal)!==null&&s!==void 0?s:t)!==null&&i!==void 0?i:!0,g=typeof d=="string"?{message:d}:d;o.addIssue({code:"custom",...g,fatal:p})}}):Je.create()}const al={object:Z.lazycreate};var A;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(A||(A={}));const il=(r,e={message:`Input not instance of ${r.name}`})=>Vo(t=>t instanceof r,e),Fo=_e.create,Po=Se.create,cl=Ft.create,dl=Ce.create,Bo=st.create,ll=je.create,ul=Ut.create,pl=_t.create,gl=at.create,fl=Je.create,hl=Ne.create,bl=we.create,wl=Zt.create,ml=ie.create,yl=Z.create,vl=Z.strictCreate,kl=it.create,xl=Pt.create,Sl=ct.create,Cl=pe.create,Al=dt.create,Tl=Vt.create,Ol=Le.create,Il=Pe.create,Ml=lt.create,El=ut.create,Nl=Ae.create,Dl=pt.create,Rl=qe.create,Sr=ce.create,$l=le.create,jl=Te.create,Ll=ce.createWithPreprocess,Ul=St.create,Zl=()=>Fo().optional(),Vl=()=>Po().optional(),Fl=()=>Bo().optional(),Pl={string:r=>_e.create({...r,coerce:!0}),number:r=>Se.create({...r,coerce:!0}),boolean:r=>st.create({...r,coerce:!0}),bigint:r=>Ce.create({...r,coerce:!0}),date:r=>je.create({...r,coerce:!0})},Bl=T;var C=Object.freeze({__proto__:null,defaultErrorMap:We,setErrorMap:Ld,getErrorMap:$t,makeIssue:jt,EMPTY_PATH:Ud,addIssueToContext:b,ParseStatus:H,INVALID:T,DIRTY:Ve,OK:Y,isAborted:Qt,isDirty:er,isValid:$e,isAsync:ot,get util(){return $},get objectUtil(){return Kt},ZodParsedType:m,getParsedType:fe,ZodType:D,datetimeRegex:Uo,ZodString:_e,ZodNumber:Se,ZodBigInt:Ce,ZodBoolean:st,ZodDate:je,ZodSymbol:Ut,ZodUndefined:_t,ZodNull:at,ZodAny:Je,ZodUnknown:Ne,ZodNever:we,ZodVoid:Zt,ZodArray:ie,ZodObject:Z,ZodUnion:it,ZodDiscriminatedUnion:Pt,ZodIntersection:ct,ZodTuple:pe,ZodRecord:dt,ZodMap:Vt,ZodSet:Le,ZodFunction:Pe,ZodLazy:lt,ZodLiteral:ut,ZodEnum:Ae,ZodNativeEnum:pt,ZodPromise:qe,ZodEffects:ce,ZodTransformer:ce,ZodOptional:le,ZodNullable:Te,ZodDefault:gt,ZodCatch:ft,ZodNaN:Ft,BRAND:_l,ZodBranded:or,ZodPipeline:St,ZodReadonly:ht,custom:Vo,Schema:D,ZodSchema:D,late:al,get ZodFirstPartyTypeKind(){return A},coerce:Pl,any:fl,array:ml,bigint:dl,boolean:Bo,date:ll,discriminatedUnion:xl,effect:Sr,enum:Nl,function:Il,instanceof:il,intersection:Sl,lazy:Ml,literal:El,map:Tl,nan:cl,nativeEnum:Dl,never:bl,null:gl,nullable:jl,number:Po,object:yl,oboolean:Fl,onumber:Vl,optional:$l,ostring:Zl,pipeline:Ul,preprocess:Ll,promise:Rl,record:Al,set:Ol,strictObject:vl,string:Fo,symbol:ul,transformer:Sr,tuple:Cl,undefined:pl,union:kl,unknown:hl,void:wl,NEVER:Bl,ZodIssueCode:f,quotelessJson:jd,ZodError:re});const Xe={TEXT:0,IMAGE:1,CODE:2,MATH:3,QUERY:4,CAROUSEL:5},zo={SUCCESS:0,INVALID_REQUEST:1,PASSWORD_INCORRECT:2,EXCEED_MAX_ATTEMPTS:3,NO_AUTHORIZATION:4,UNKNOWN_ERROR:5,TARGET_NOT_FOUND:6,INVALID_RESPONSE:7,NO_AXIOS:8,FILE_EXISTS:9,DIR_NOT_FOUND:10,TOKEN_EXPIRED:11,PATH_NOT_FOUND:12,PATH_EXISTS_AND_NOT_EMPTY:13,PATH_CANNOT_ACCESS:14},zl=Object.fromEntries(Object.entries(zo).map(([r,e])=>[e,r]));({...zo,...zl});const Wl="blockInfo",Jl="blockData_",Bt="data",ql=C.tuple([C.literal(Xe.TEXT),C.any()]),Wo=C.enum(["blend","circle","invert","invertW","outline","blendLuminosity"]),Hl=C.tuple([C.literal(Xe.IMAGE),C.string(),C.enum(["left","center"]),C.string().nullable(),C.number().nullable(),C.array(Wo).nullable()]);C.tuple([C.literal(Xe.CAROUSEL),C.array(C.string()),C.string().nullable(),C.number().nullable(),C.array(Wo).nullable()]);const Yl=C.tuple([C.literal(Xe.CODE),C.string(),C.string()]),Xl=C.tuple([C.literal(Xe.MATH),C.string()]),Gl=C.tuple([C.literal(Xe.QUERY),C.any(),C.string(),C.boolean(),C.boolean()]),Kl=C.union([ql,Hl,Yl,Xl,Gl]);C.tuple([Kl.nullable(),C.record(C.any())]);const Ht=C.string(),Ql=C.number().min(0).max(5);C.tuple([Ql,Ht,C.array(Ht),C.number().nullable(),Ht.nullable()]);function eu(r){return{all:r=r||new Map,on:function(e,t){var n=r.get(e);n?n.push(t):r.set(e,[t])},off:function(e,t){var n=r.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):r.set(e,[]))},emit:function(e,t){var n=r.get(e);n&&n.slice().map(function(o){o(t)}),(n=r.get("*"))&&n.slice().map(function(o){o(e,t)})}}}var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ru={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(tu,function(){var t=1e3,n=6e4,o=36e5,s="millisecond",i="second",d="minute",p="hour",g="day",v="week",R="month",oe="quarter",X="year",me="date",ar="Invalid Date",ts=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,rs=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ns={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var k=["th","st","nd","rd"],w=O%100;return"["+O+(k[(w-20)%10]||k[w]||k[0])+"]"}},Wt=function(O,k,w){var S=String(O);return!S||S.length>=k?O:""+Array(k+1-S.length).join(w)+O},os={s:Wt,z:function(O){var k=-O.utcOffset(),w=Math.abs(k),S=Math.floor(w/60),y=w%60;return(k<=0?"+":"-")+Wt(S,2,"0")+":"+Wt(y,2,"0")},m:function O(k,w){if(k.date()<w.date())return-O(w,k);var S=12*(w.year()-k.year())+(w.month()-k.month()),y=k.clone().add(S,R),E=w-y<0,N=k.clone().add(S+(E?-1:1),R);return+(-(S+(w-y)/(E?y-N:N-y))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:R,y:X,w:v,d:g,D:me,h:p,m:d,s:i,ms:s,Q:oe}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},Ge="en",Oe={};Oe[Ge]=ns;var ir="$isDayjsObject",Jt=function(O){return O instanceof At||!(!O||!O[ir])},Ct=function O(k,w,S){var y;if(!k)return Ge;if(typeof k=="string"){var E=k.toLowerCase();Oe[E]&&(y=E),w&&(Oe[E]=w,y=E);var N=k.split("-");if(!y&&N.length>1)return O(N[0])}else{var L=k.name;Oe[L]=k,y=L}return!S&&y&&(Ge=y),y||!S&&Ge},B=function(O,k){if(Jt(O))return O.clone();var w=typeof k=="object"?k:{};return w.date=O,w.args=arguments,new At(w)},j=os;j.l=Ct,j.i=Jt,j.w=function(O,k){return B(O,{locale:k.$L,utc:k.$u,x:k.$x,$offset:k.$offset})};var At=function(){function O(w){this.$L=Ct(w.locale,null,!0),this.parse(w),this.$x=this.$x||w.x||{},this[ir]=!0}var k=O.prototype;return k.parse=function(w){this.$d=function(S){var y=S.date,E=S.utc;if(y===null)return new Date(NaN);if(j.u(y))return new Date;if(y instanceof Date)return new Date(y);if(typeof y=="string"&&!/Z$/i.test(y)){var N=y.match(ts);if(N){var L=N[2]-1||0,F=(N[7]||"0").substring(0,3);return E?new Date(Date.UTC(N[1],L,N[3]||1,N[4]||0,N[5]||0,N[6]||0,F)):new Date(N[1],L,N[3]||1,N[4]||0,N[5]||0,N[6]||0,F)}}return new Date(y)}(w),this.init()},k.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},k.$utils=function(){return j},k.isValid=function(){return this.$d.toString()!==ar},k.isSame=function(w,S){var y=B(w);return this.startOf(S)<=y&&y<=this.endOf(S)},k.isAfter=function(w,S){return B(w)<this.startOf(S)},k.isBefore=function(w,S){return this.endOf(S)<B(w)},k.$g=function(w,S,y){return j.u(w)?this[S]:this.set(y,w)},k.unix=function(){return Math.floor(this.valueOf()/1e3)},k.valueOf=function(){return this.$d.getTime()},k.startOf=function(w,S){var y=this,E=!!j.u(S)||S,N=j.p(w),L=function(Me,G){var ye=j.w(y.$u?Date.UTC(y.$y,G,Me):new Date(y.$y,G,Me),y);return E?ye:ye.endOf(g)},F=function(Me,G){return j.w(y.toDate()[Me].apply(y.toDate("s"),(E?[0,0,0,0]:[23,59,59,999]).slice(G)),y)},z=this.$W,q=this.$M,ne=this.$D,Ue="set"+(this.$u?"UTC":"");switch(N){case X:return E?L(1,0):L(31,11);case R:return E?L(1,q):L(0,q+1);case v:var Ie=this.$locale().weekStart||0,Ke=(z<Ie?z+7:z)-Ie;return L(E?ne-Ke:ne+(6-Ke),q);case g:case me:return F(Ue+"Hours",0);case p:return F(Ue+"Minutes",1);case d:return F(Ue+"Seconds",2);case i:return F(Ue+"Milliseconds",3);default:return this.clone()}},k.endOf=function(w){return this.startOf(w,!1)},k.$set=function(w,S){var y,E=j.p(w),N="set"+(this.$u?"UTC":""),L=(y={},y[g]=N+"Date",y[me]=N+"Date",y[R]=N+"Month",y[X]=N+"FullYear",y[p]=N+"Hours",y[d]=N+"Minutes",y[i]=N+"Seconds",y[s]=N+"Milliseconds",y)[E],F=E===g?this.$D+(S-this.$W):S;if(E===R||E===X){var z=this.clone().set(me,1);z.$d[L](F),z.init(),this.$d=z.set(me,Math.min(this.$D,z.daysInMonth())).$d}else L&&this.$d[L](F);return this.init(),this},k.set=function(w,S){return this.clone().$set(w,S)},k.get=function(w){return this[j.p(w)]()},k.add=function(w,S){var y,E=this;w=Number(w);var N=j.p(S),L=function(q){var ne=B(E);return j.w(ne.date(ne.date()+Math.round(q*w)),E)};if(N===R)return this.set(R,this.$M+w);if(N===X)return this.set(X,this.$y+w);if(N===g)return L(1);if(N===v)return L(7);var F=(y={},y[d]=n,y[p]=o,y[i]=t,y)[N]||1,z=this.$d.getTime()+w*F;return j.w(z,this)},k.subtract=function(w,S){return this.add(-1*w,S)},k.format=function(w){var S=this,y=this.$locale();if(!this.isValid())return y.invalidDate||ar;var E=w||"YYYY-MM-DDTHH:mm:ssZ",N=j.z(this),L=this.$H,F=this.$m,z=this.$M,q=y.weekdays,ne=y.months,Ue=y.meridiem,Ie=function(G,ye,Qe,Tt){return G&&(G[ye]||G(S,E))||Qe[ye].slice(0,Tt)},Ke=function(G){return j.s(L%12||12,G,"0")},Me=Ue||function(G,ye,Qe){var Tt=G<12?"AM":"PM";return Qe?Tt.toLowerCase():Tt};return E.replace(rs,function(G,ye){return ye||function(Qe){switch(Qe){case"YY":return String(S.$y).slice(-2);case"YYYY":return j.s(S.$y,4,"0");case"M":return z+1;case"MM":return j.s(z+1,2,"0");case"MMM":return Ie(y.monthsShort,z,ne,3);case"MMMM":return Ie(ne,z);case"D":return S.$D;case"DD":return j.s(S.$D,2,"0");case"d":return String(S.$W);case"dd":return Ie(y.weekdaysMin,S.$W,q,2);case"ddd":return Ie(y.weekdaysShort,S.$W,q,3);case"dddd":return q[S.$W];case"H":return String(L);case"HH":return j.s(L,2,"0");case"h":return Ke(1);case"hh":return Ke(2);case"a":return Me(L,F,!0);case"A":return Me(L,F,!1);case"m":return String(F);case"mm":return j.s(F,2,"0");case"s":return String(S.$s);case"ss":return j.s(S.$s,2,"0");case"SSS":return j.s(S.$ms,3,"0");case"Z":return N}return null}(G)||N.replace(":","")})},k.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},k.diff=function(w,S,y){var E,N=this,L=j.p(S),F=B(w),z=(F.utcOffset()-this.utcOffset())*n,q=this-F,ne=function(){return j.m(N,F)};switch(L){case X:E=ne()/12;break;case R:E=ne();break;case oe:E=ne()/3;break;case v:E=(q-z)/6048e5;break;case g:E=(q-z)/864e5;break;case p:E=q/o;break;case d:E=q/n;break;case i:E=q/t;break;default:E=q}return y?E:j.a(E)},k.daysInMonth=function(){return this.endOf(R).$D},k.$locale=function(){return Oe[this.$L]},k.locale=function(w,S){if(!w)return this.$L;var y=this.clone(),E=Ct(w,S,!0);return E&&(y.$L=E),y},k.clone=function(){return j.w(this.$d,this)},k.toDate=function(){return new Date(this.valueOf())},k.toJSON=function(){return this.isValid()?this.toISOString():null},k.toISOString=function(){return this.$d.toISOString()},k.toString=function(){return this.$d.toUTCString()},O}(),cr=At.prototype;return B.prototype=cr,[["$ms",s],["$s",i],["$m",d],["$H",p],["$W",g],["$M",R],["$y",X],["$D",me]].forEach(function(O){cr[O[1]]=function(k){return this.$g(k,O[0],O[1])}}),B.extend=function(O,k){return O.$i||(O(k,At,B),O.$i=!0),B},B.locale=Ct,B.isDayjs=Jt,B.unix=function(O){return B(1e3*O)},B.en=Oe[Ge],B.Ls=Oe,B.p={},B})})(ru);C.any().pipe(C.union([C.object({type:C.literal("ui"),changeSources:C.array(C.string()).optional()}),C.object({type:C.literal("local")}),C.object({type:C.literal("remote")})]));const nu=(r,e)=>{const t=[];for(const n in r)t.push(e(r[n],n));return t},ou=r=>nu(r,(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&");class su{ws;constructor(e){this.ws=e}send(e){try{this.ws.send(e)}catch{this.close()}}close(){this.ws.close()}onMessage(e){this.ws.onmessage=t=>{t.data.arrayBuffer().then(n=>{e(new Uint8Array(n))})}}onClose(e){this.ws.onclose=e}onError(e){this.ws.onerror=e}onOpen(e){this.ws.onopen=e}}class _u{params;protocol;constructor(e,t){this.params=e,this.protocol=t}connect(e,t){const n=ou(this.params),o=e+(n.length===0?"":"?"+n),s=new WebSocket(o,this.protocol);return new su(s)}}const au=Math.floor,iu=(r,e)=>r<e?r:e,cu=(r,e)=>r>e?r:e,Jo=128,Rt=127,du=Number.MAX_SAFE_INTEGER,lu=r=>{const e=unescape(encodeURIComponent(r)),t=e.length,n=new Uint8Array(t);for(let o=0;o<t;o++)n[o]=e.codePointAt(o);return n},bt=typeof TextEncoder<"u"?new TextEncoder:null,uu=r=>bt.encode(r),pu=bt?uu:lu;let nt=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});nt&&nt.decode(new Uint8Array).length===1&&(nt=null);class gu{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const qo=()=>new gu,fu=r=>{let e=r.cpos;for(let t=0;t<r.bufs.length;t++)e+=r.bufs[t].length;return e},Ho=r=>{const e=new Uint8Array(fu(r));let t=0;for(let n=0;n<r.bufs.length;n++){const o=r.bufs[n];e.set(o,t),t+=o.length}return e.set(new Uint8Array(r.cbuf.buffer,0,r.cpos),t),e},wt=(r,e)=>{const t=r.cbuf.length;r.cpos===t&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(t*2),r.cpos=0),r.cbuf[r.cpos++]=e},Yo=wt,sr=(r,e)=>{for(;e>Rt;)wt(r,Jo|Rt&e),e=au(e/128);wt(r,Rt&e)},rr=new Uint8Array(3e4),hu=rr.length/3,bu=(r,e)=>{if(e.length<hu){const t=bt.encodeInto(e,rr).written||0;sr(r,t);for(let n=0;n<t;n++)wt(r,rr[n])}else _r(r,pu(e))},wu=(r,e)=>{const t=unescape(encodeURIComponent(e)),n=t.length;sr(r,n);for(let o=0;o<n;o++)wt(r,t.codePointAt(o))},Xo=bt&&bt.encodeInto?bu:wu,mu=(r,e)=>{const t=r.cbuf.length,n=r.cpos,o=iu(t-n,e.length),s=e.length-o;r.cbuf.set(e.subarray(0,o),n),r.cpos+=o,s>0&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(cu(t*2,s)),r.cbuf.set(e.subarray(o)),r.cpos=s)},_r=(r,e)=>{sr(r,e.byteLength),mu(r,e)},Go=r=>new Error(r),yu=Go("Unexpected end of array"),vu=Go("Integer out of Range");class ku{constructor(e){this.arr=e,this.pos=0}}const xu=r=>new ku(r),Su=(r,e)=>{const t=new Uint8Array(r.arr.buffer,r.pos+r.arr.byteOffset,e);return r.pos+=e,t},He=r=>Su(r,Ko(r)),nr=r=>r.arr[r.pos++],Ko=r=>{let e=0,t=1;const n=r.arr.length;for(;r.pos<n;){const o=r.arr[r.pos++];if(e=e+(o&Rt)*t,t*=128,o<Jo)return e;if(e>du)throw vu}throw yu},Cu=r=>{let e=Ko(r);if(e===0)return"";{let t=String.fromCodePoint(nr(r));if(--e<100)for(;e--;)t+=String.fromCodePoint(nr(r));else for(;e>0;){const n=e<1e4?e:1e4,o=r.arr.subarray(r.pos,r.pos+n);r.pos+=n,t+=String.fromCodePoint.apply(null,o),e-=n}return decodeURIComponent(escape(t))}},Au=r=>nt.decode(He(r)),zt=nt?Au:Cu,te={canSync:0,startSync:1,postConflict:2,postUpdate:3},Tu=(r,e)=>{const t=e.export({mode:"snapshot"}),n=qo();return Yo(n,te.canSync),Xo(n,r),_r(n,t),Ho(n)},Ou=r=>{const e=zt(r),t=He(r);return{type:te.canSync,docId:e,snapshot:t}},Iu=r=>{const e=zt(r),t=He(r),n=He(r);return{type:te.startSync,docId:e,vv:t,updates:n}},Mu=r=>{const e=zt(r),t=He(r);return{type:te.postConflict,docId:e,snapshot:t}},Cr=(r,e)=>{const t=qo();return Yo(t,te.postUpdate),Xo(t,r),_r(t,e),Ho(t)},Eu=r=>{const e=zt(r),t=He(r);return{type:te.postUpdate,docId:e,updates:t}},Nu={[te.canSync]:Ou,[te.startSync]:Iu,[te.postConflict]:Mu,[te.postUpdate]:Eu},Du=r=>{const e=xu(r),t=nr(e),n=Nu[t];if(!n)throw new Error(`Unknown message type: ${t}`);return n(e)},Ar=()=>{let r;return{promise:new Promise(t=>{r=t}),resolve:r}};class Ru{connection;url;protocol;network;wsConnected;wsConnecting;docs;shouldReconnect;unsuccessfulReconnects;maxBackoffTime;whenReady;whenReadyResolve;eventBus;constructor(e,t,n){this.connection=null,this.url=e,this.protocol=n,this.network=t,this.docs=new Map,this.wsConnected=!1,this.wsConnecting=!1,this.shouldReconnect=!1,this.unsuccessfulReconnects=0,this.maxBackoffTime=2500;const{promise:o,resolve:s}=Ar();this.whenReady=o,this.whenReadyResolve=s,this.eventBus=eu()}_handleStartSyncMessage=(e,t)=>{console.info(`[wsSynchronizer] Received startSyncMessage, docId: ${e.docId}`);const n=e.doc;n.import(t.updates),console.info(`[wsSynchronizer] Doc ${e.docId} after import updates:`,n.toJSON());const o=ee.decode(t.vv);e.lastSentVersion=o;const s=n.export({mode:"update",from:o});if(s.length>0){const i=Cr(t.docId,s);this._sendMessage(i),console.info(`[wsSynchronizer] Replied with postUpdateMessage, docId: ${e.docId}`)}e.lastEB=null,queueMicrotask(()=>{const i=e.lastEB!==null;this.eventBus.emit("docSynced",{docId:e.docId,hasSyncEvent:i})})};_handlePostConflictMessage=(e,t)=>{throw new Error("PostConflictMessage handling not implemented")};_handlePostUpdateMessage=(e,t)=>{const n=t.doc;console.info(`[wsSynchronizer] Received postUpdateMessage, docId: ${t.docId}`),n.import(e.updates),console.info(`[wsSynchronizer] Received postUpdateMessage, doc ${t.docId} after import updates:`,n.toJSON()),t.lastEB=null,queueMicrotask(()=>{const o=t.lastEB!==null;this.eventBus.emit("docSynced",{docId:t.docId,hasSyncEvent:o})})};_freeDocs(){for(const e of this.docs.values())e.doc.free();this.docs.clear()}_setupConnection(){this.shouldReconnect&&this.connection===null&&(this.connection=this.network.connect(this.url,this.protocol),this.connection.onOpen(()=>{console.info("[wsSynchronizer] Connection opened"),this.wsConnecting=!1,this.wsConnected=!0,this.unsuccessfulReconnects=0,this.whenReadyResolve()}),this.connection.onMessage(e=>{try{const t=Du(e),n=this.docs.get(t.docId);if(!n){console.error(`[wsSynchronizer] Doc not found: ${t.docId}`);return}t.type===te.startSync?this._handleStartSyncMessage(n,t):t.type===te.postConflict?this._handlePostConflictMessage(t,n):t.type===te.postUpdate?this._handlePostUpdateMessage(t,n):console.error(`[wsSynchronizer] Unknown message type: ${t.type}`)}catch(t){console.error("[wsSynchronizer] Error handling message:",t)}}),this.connection.onError(e=>{console.error("[wsSynchronizer] Connection error:",e)}),this.connection.onClose(()=>{if(console.info("[wsSynchronizer] Connection closed"),this.eventBus.emit("disconnected"),this.connection=null,this.wsConnecting=!1,this.wsConnected){this.wsConnected=!1,this._freeDocs();const{promise:e,resolve:t}=Ar();this.whenReady=e,this.whenReadyResolve=t}else this.unsuccessfulReconnects++;setTimeout(()=>this._setupConnection(),Math.min(Math.pow(2,this.unsuccessfulReconnects)*100,this.maxBackoffTime))}),this.wsConnecting=!0,this.wsConnected=!1,this._freeDocs())}_sendMessage(e){const t=this.connection;if(!t){console.error("[wsSynchronizer] Connection not established, cannot send message");return}t.send(e)}_sendNewUpdatesToServer(e){const t=this.docs.get(e);if(!t){console.error(`[wsSynchronizer] Doc ${e} not found`);return}const n=t.doc.export({mode:"update",from:t.lastSentVersion});if(n.length===0)return;t.lastSentVersion=t.doc.version();const o=Cr(e,n);this._sendMessage(o),console.info(`[wsSynchronizer] Sent postUpdateMessage, docId: ${e}`)}connect(){this.shouldReconnect=!0,!this.wsConnected&&this.connection===null&&this._setupConnection()}disconnect(){this.shouldReconnect=!1,this.connection!==null&&(this.connection.close(),this.connection=null)}destroy(){this.disconnect()}async addLoroDoc(e,t){if(this.docs.has(e)){console.error(`[wsSynchronizer] Doc already added, do nothing, docId: ${e}`);return}console.info(`[wsSynchronizer] Add new doc, docId: ${e}`);const n={docId:e,doc:t,lastSentVersion:void 0,lastEB:null,subscriptions:[]},o=t.subscribe(s=>{console.info(`[wsSynchronizer] New event on doc ${e}:`,s),s.by==="local"&&this._sendNewUpdatesToServer(e),n.lastEB=s});n.subscriptions.push(o),this.docs.set(e,n),this.whenReady.then(()=>{const s=this.docs.get(e)?.doc;if(!s)return;const i=Tu(e,s);this._sendMessage(i),console.info(`[wsSynchronizer] Sent canSyncMessage, docId: ${e}`)})}on(e,t){this.eventBus.on(e,t)}off(e,t){this.eventBus.off(e,t)}}const Be=r=>{postMessage(r)};let Tr,Or,Ir,he,ze,ke,Ee;const $u=r=>r.startsWith("ws://")||r.startsWith("wss://")?r:`wss://${r}`;addEventListener("message",r=>{const e=r.data;switch(e.type){case"connect":ju(e.serverUrl,e.location,e.token);break;case"disconnect":Qo();break;case"loadDataDoc":es(e.docId);break;case"unloadDataDoc":Lu(e.docId);break;case"postYjsLayerTransaction":Uu(e.transaction);break;case"_printBlockInfo":console.debug("[syncWorker] _printBlockInfo",ke?.get(e.blockId));break;case"_printBlockData":const n=Ee?.get(0)?.getMap(Bt);console.debug("[syncWorker] _printBlockData",n?.get(e.blockId));break}});const Qo=()=>{he?.disconnect(),he?.destroy(),ze=void 0,ke=void 0,Ee=void 0,he=void 0},ju=(r,e,t)=>{Qo(),console.debug("[syncWorker] connect",r,e,t),Tr=r,Or=e,Ir=t,ze=new se,ke=ze.getMap(Bt),Ee=new Map,ke.subscribe(n=>{const o={type:n.by==="local"?"ui":"remote"},s=[];for(const i of n.events)if(i.diff.type==="map")for(const[d,p]of Object.entries(i.diff.updated))p==null?s.push({op:"delete",key:d}):s.push({op:"upsert",key:d,value:p});Be({type:"blockInfoMapChange",origin:o,changes:s})}),(async()=>{const n=new _u({location:Or,authorization:Ir});he=new Ru($u(Tr),n),he.connect(),he.addLoroDoc(Wl,ze),he.on("docSynced",({docId:o,hasSyncEvent:s})=>{console.info("[syncWorker] wsSynchronizer docSynced, docId:",o,"hasSyncEvent:",s),Be({type:"docSynced",docId:o,hasSyncEvent:s})}),he.on("disconnected",()=>{console.info("[syncWorker] wsSynchronizer disconnected"),Be({type:"disconnected"})})})()},es=r=>{if(!Ee){console.error("[syncWorker] 数据文档未初始化，先 connect 以初始化");return}if(Ee.has(r))return Ee.get(r);const e=new se,t=e.getMap(Bt);return Ee.set(r,e),Be({type:"dataDocCreated",dataDocId:r}),t.subscribe(n=>{const o={type:n.by==="local"?"ui":"remote"},s=[];for(const i of n.events)if(i.diff.type==="map")for(const[d,p]of Object.entries(i.diff.updated))p==null?s.push({op:"delete",key:d}):s.push({op:"upsert",key:d,value:p});Be({type:"blockDataMapChange",dataDocId:r,origin:o,changes:s})}),(async()=>(console.debug("[syncWorker] dataDoc 加入 wsSynchronizer，开始同步"),await ss(1e3),he?.addLoroDoc(Jl+r,e)))(),e},Lu=r=>{console.error("[syncWorker] Not implemented")},Uu=r=>{if(!ze||!ke){console.error("[syncWorker] baseDoc or blockInfoMap is null, cannot commit");return}if(!ke)return;for(const t of r.patches)t.op==="upsertBlockInfo"?ke.set(t.blockId,t.blockInfo):t.op==="deleteBlockInfo"&&ke.delete(t.blockId);console.log("[syncWorker] Commit blockInfoMap transaction"),ze.commit();const e=new Map;for(const t of r.patches)if(t.op==="upsertBlockData"||t.op==="deleteBlockData"){const n=e.get(t.docId);n?n.push(t):e.set(t.docId,[t])}for(const[t,n]of e.entries()){const o=es(t);if(!o)continue;const s=o.getMap(Bt);for(const i of n)i.op==="upsertBlockData"?s.set(i.blockId,i.blockData):i.op==="deleteBlockData"&&s.delete(i.blockId);console.log("[syncWorker] Commit blockDataMap transaction, docId:",t),o.commit()}};Be({type:"init"})})();