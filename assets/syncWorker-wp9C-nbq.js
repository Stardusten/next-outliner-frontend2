self.document={currentScript:{src:self.location.href}},function(){"use strict";(async()=>{function ts(n){return new Promise(e=>setTimeout(e,n))}var ns="/assets/loro_wasm_bg-DV_qIX0O.wasm",rs=async(n={},e)=>{let t;if(e.startsWith("data:")){const o=e.replace(/^data:.*?base64,/,"");let r;if(typeof Buffer=="function"&&typeof Buffer.from=="function")r=Buffer.from(o,"base64");else if(typeof atob=="function"){const a=atob(o);r=new Uint8Array(a.length);for(let _=0;_<a.length;_++)r[_]=a.charCodeAt(_)}else throw new Error("Cannot decode base64-encoded data URL");t=await WebAssembly.instantiate(r,n)}else{const o=await fetch(e),r=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))t=await WebAssembly.instantiateStreaming(o,n);else{const a=await o.arrayBuffer();t=await WebAssembly.instantiate(a,n)}}return t.instance.exports};let s;function Wt(n){s=n}const F=new Array(128).fill(void 0);F.push(void 0,null,!0,!1);function f(n){return F[n]}let Ye=F.length;function os(n){n<132||(F[n]=Ye,Ye=n)}function l(n){const e=f(n);return os(n),e}const ss=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let _n=new ss("utf-8",{ignoreBOM:!0,fatal:!0});_n.decode();let St=null;function Fe(){return(St===null||St.byteLength===0)&&(St=new Uint8Array(s.memory.buffer)),St}function V(n,e){return n=n>>>0,_n.decode(Fe().subarray(n,n+e))}function p(n){Ye===F.length&&F.push(F.length+1);const e=Ye;return Ye=F[e],F[e]=n,e}let I=0;const as=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let Ct=new as("utf-8");const is=typeof Ct.encodeInto=="function"?function(n,e){return Ct.encodeInto(n,e)}:function(n,e){const t=Ct.encode(n);return e.set(t),{read:n.length,written:t.length}};function L(n,e,t){if(t===void 0){const c=Ct.encode(n),u=e(c.length,1)>>>0;return Fe().subarray(u,u+c.length).set(c),I=c.length,u}let o=n.length,r=e(o,1)>>>0;const a=Fe();let _=0;for(;_<o;_++){const c=n.charCodeAt(_);if(c>127)break;a[r+_]=c}if(_!==o){_!==0&&(n=n.slice(_)),r=t(r,o,o=_+n.length*3,1)>>>0;const c=Fe().subarray(r+_,r+o),u=is(n,c);_+=u.written,r=t(r,o,_,1)>>>0}return I=_,r}function Y(n){return n==null}let At=null;function i(){return(At===null||At.byteLength===0)&&(At=new Int32Array(s.memory.buffer)),At}let Ot=null;function dn(){return(Ot===null||Ot.byteLength===0)&&(Ot=new Float64Array(s.memory.buffer)),Ot}let Tt=null;function _s(){return(Tt===null||Tt.byteLength===0)&&(Tt=new BigInt64Array(s.memory.buffer)),Tt}function Jt(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const r=n.description;return r==null?"Symbol":`Symbol(${r})`}if(e=="function"){const r=n.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(n)){const r=n.length;let a="[";r>0&&(a+=Jt(n[0]));for(let _=1;_<r;_++)a+=", "+Jt(n[_]);return a+="]",a}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let o;if(t.length>1)o=t[1];else return toString.call(n);if(o=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:o}const cn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>{s.__wbindgen_export_2.get(n.dtor)(n.a,n.b)});function ln(n,e,t,o){const r={a:n,b:e,cnt:1,dtor:t},a=(..._)=>{r.cnt++;const c=r.a;r.a=0;try{return o(c,r.b,..._)}finally{--r.cnt===0?(s.__wbindgen_export_2.get(r.dtor)(c,r.b),cn.unregister(r)):r.a=c}};return a.original=r,cn.register(a,r,r),a}function ds(n,e,t){s.__wbindgen_export_3(n,e,p(t))}function cs(n,e){s.__wbindgen_export_4(n,e)}function be(n,e){return n=n>>>0,Fe().subarray(n/1,n/1+e)}function Te(n,e){const t=e(n.length*1,1)>>>0;return Fe().set(n,t/1),I=n.length,t}let It=null;function un(){return(It===null||It.byteLength===0)&&(It=new Uint32Array(s.memory.buffer)),It}function oe(n,e){n=n>>>0;const t=un().subarray(n/4,n/4+e),o=[];for(let r=0;r<t.length;r++)o.push(l(t[r]));return o}function ls(){s.run()}function me(n,e){const t=e(n.length*4,4)>>>0,o=un();for(let r=0;r<n.length;r++)o[t/4+r]=p(n[r]);return I=n.length,t}function us(n){try{const _=s.__wbindgen_add_to_stack_pointer(-16),c=me(n,s.__wbindgen_export_0),u=I;s.encodeFrontiers(_,c,u);var e=i()[_/4+0],t=i()[_/4+1],o=i()[_/4+2],r=i()[_/4+3];if(r)throw l(o);var a=be(e,t).slice();return s.__wbindgen_export_5(e,t*1,1),a}finally{s.__wbindgen_add_to_stack_pointer(16)}}function ps(n){try{const r=s.__wbindgen_add_to_stack_pointer(-16),a=Te(n,s.__wbindgen_export_0),_=I;s.decodeFrontiers(r,a,_);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}function gs(){s.setDebug()}let W=128;function X(n){if(W==1)throw new Error("out of js stack");return F[--W]=n,W}function Ie(n,e){if(!(n instanceof e))throw new Error(`expected instance of ${e.name}`);return n.ptr}function hs(n,e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=Te(n,s.__wbindgen_export_0),c=I;s.decodeImportBlobMeta(a,_,c,e);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}function J(n,e){try{return n.apply(this,e)}catch(t){s.__wbindgen_export_6(p(t))}}function fs(n){return()=>{throw new Error(`${n} is not defined`)}}const ws=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_awarenesswasm_free(n>>>0));class bs{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ws.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_awarenesswasm_free(e)}constructor(e,t){const o=s.awarenesswasm_new(p(e),t);return this.__wbg_ptr=o>>>0,this}encode(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.awarenesswasm_encode(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=be(t,o).slice();return s.__wbindgen_export_5(t,o*1,1),r}finally{s.__wbindgen_add_to_stack_pointer(16)}}encodeAll(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.awarenesswasm_encodeAll(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=be(e,t).slice();return s.__wbindgen_export_5(e,t*1,1),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}apply(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=Te(e,s.__wbindgen_export_0),c=I;s.awarenesswasm_apply(a,this.__wbg_ptr,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}setLocalState(e){s.awarenesswasm_setLocalState(this.__wbg_ptr,p(e))}peer(){const e=s.awarenesswasm_peer(this.__wbg_ptr);return l(e)}getAllStates(){const e=s.awarenesswasm_getAllStates(this.__wbg_ptr);return l(e)}getState(e){const t=s.awarenesswasm_getState(this.__wbg_ptr,p(e));return l(t)}getTimestamp(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.awarenesswasm_getTimestamp(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=dn()[r/8+1];return t===0?void 0:o}finally{s.__wbindgen_add_to_stack_pointer(16)}}removeOutdated(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.awarenesswasm_removeOutdated(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}length(){return s.awarenesswasm_length(this.__wbg_ptr)}isEmpty(){return s.awarenesswasm_isEmpty(this.__wbg_ptr)!==0}peers(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.awarenesswasm_peers(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}}const pn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_cursor_free(n>>>0));class ge{static __wrap(e){e=e>>>0;const t=Object.create(ge.prototype);return t.__wbg_ptr=e,pn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,pn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_cursor_free(e)}containerId(){const e=s.cursor_containerId(this.__wbg_ptr);return l(e)}pos(){const e=s.cursor_pos(this.__wbg_ptr);return l(e)}side(){const e=s.cursor_side(this.__wbg_ptr);return l(e)}encode(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.cursor_encode(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=be(e,t).slice();return s.__wbindgen_export_5(e,t*1,1),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}static decode(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=Te(e,s.__wbindgen_export_0),c=I;s.cursor_decode(a,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return ge.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}kind(){const e=s.cursor_kind(this.__wbg_ptr);return l(e)}}const gn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_lorocounter_free(n>>>0));class Xe{static __wrap(e){e=e>>>0;const t=Object.create(Xe.prototype);return t.__wbg_ptr=e,gn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,gn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_lorocounter_free(e)}constructor(){const e=s.lorocounter_new();return this.__wbg_ptr=e>>>0,this}increment(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorocounter_increment(r,this.__wbg_ptr,e);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}decrement(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorocounter_decrement(r,this.__wbg_ptr,e);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get value(){return s.lorocounter_value(this.__wbg_ptr)}subscribe(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorocounter_subscribe(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}parent(){const e=s.lorocounter_parent(this.__wbg_ptr);return l(e)}isAttached(){return s.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=s.lorocounter_getAttached(this.__wbg_ptr);return l(e)}getShallowValue(){return s.lorocounter_getShallowValue(this.__wbg_ptr)}}const hn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_lorodoc_free(n>>>0));class se{static __wrap(e){e=e>>>0;const t=Object.create(se.prototype);return t.__wbg_ptr=e,hn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,hn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_lorodoc_free(e)}constructor(){const e=s.lorodoc_new();return this.__wbg_ptr=e>>>0,this}setDetachedEditing(e){s.lorodoc_setDetachedEditing(this.__wbg_ptr,e)}isDetachedEditingEnabled(){return s.lorodoc_isDetachedEditingEnabled(this.__wbg_ptr)!==0}setRecordTimestamp(e){s.lorodoc_setRecordTimestamp(this.__wbg_ptr,e)}setChangeMergeInterval(e){s.lorodoc_setChangeMergeInterval(this.__wbg_ptr,e)}configTextStyle(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_configTextStyle(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}static fromSnapshot(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=Te(e,s.__wbindgen_export_0),c=I;s.lorodoc_fromSnapshot(a,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return se.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}attach(){s.lorodoc_attach(this.__wbg_ptr)}isDetached(){return s.lorodoc_isDetached(this.__wbg_ptr)!==0}detach(){s.lorodoc_detach(this.__wbg_ptr)}fork(){const e=s.lorodoc_fork(this.__wbg_ptr);return se.__wrap(e)}forkAt(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=me(e,s.__wbindgen_export_0),c=I;s.lorodoc_forkAt(a,this.__wbg_ptr,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return se.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}checkoutToLatest(){try{const o=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_checkoutToLatest(o,this.__wbg_ptr);var e=i()[o/4+0],t=i()[o/4+1];if(t)throw l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}travelChangeAncestors(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=me(e,s.__wbindgen_export_0),c=I;s.lorodoc_travelChangeAncestors(a,this.__wbg_ptr,_,c,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}checkout(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16),a=me(e,s.__wbindgen_export_0),_=I;s.lorodoc_checkout(r,this.__wbg_ptr,a,_);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get peerId(){const e=s.lorodoc_peerId(this.__wbg_ptr);return BigInt.asUintN(64,e)}get peerIdStr(){const e=s.lorodoc_peerIdStr(this.__wbg_ptr);return l(e)}setPeerId(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_setPeerId(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}commit(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_commit(r,this.__wbg_ptr,Y(e)?0:p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getPendingTxnLength(){return s.lorodoc_getPendingTxnLength(this.__wbg_ptr)>>>0}getText(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getText(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return et.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getMap(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getMap(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return Le.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getList(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getList(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return Qe.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getMovableList(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getMovableList(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return Ge.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getCounter(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getCounter(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return Xe.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getTree(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getTree(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return tt.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getContainerById(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getContainerById(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}setNextCommitMessage(e){const t=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),o=I;s.lorodoc_setNextCommitMessage(this.__wbg_ptr,t,o)}getDeepValueWithID(){const e=s.lorodoc_getDeepValueWithID(this.__wbg_ptr);return l(e)}getPathToContainer(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getPathToContainer(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}JSONPath(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.lorodoc_JSONPath(a,this.__wbg_ptr,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}version(){const e=s.lorodoc_version(this.__wbg_ptr);return G.__wrap(e)}shallowSinceVV(){const e=s.lorodoc_shallowSinceVV(this.__wbg_ptr);return G.__wrap(e)}isShallow(){return s.lorodoc_isShallow(this.__wbg_ptr)!==0}shallowSinceFrontiers(){const e=s.lorodoc_shallowSinceFrontiers(this.__wbg_ptr);return l(e)}oplogVersion(){const e=s.lorodoc_oplogVersion(this.__wbg_ptr);return G.__wrap(e)}frontiers(){const e=s.lorodoc_frontiers(this.__wbg_ptr);return l(e)}oplogFrontiers(){const e=s.lorodoc_oplogFrontiers(this.__wbg_ptr);return l(e)}cmpWithFrontiers(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=me(e,s.__wbindgen_export_0),c=I;s.lorodoc_cmpWithFrontiers(a,this.__wbg_ptr,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return t}finally{s.__wbindgen_add_to_stack_pointer(16)}}cmpFrontiers(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16),c=me(e,s.__wbindgen_export_0),u=I,h=me(t,s.__wbindgen_export_0),O=I;s.lorodoc_cmpFrontiers(_,this.__wbg_ptr,c,u,h,O);var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}exportSnapshot(){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_exportSnapshot(_,this.__wbg_ptr);var e=i()[_/4+0],t=i()[_/4+1],o=i()[_/4+2],r=i()[_/4+3];if(r)throw l(o);var a=be(e,t).slice();return s.__wbindgen_export_5(e,t*1,1),a}finally{s.__wbindgen_add_to_stack_pointer(16)}}exportFrom(e){try{const c=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_exportFrom(c,this.__wbg_ptr,p(e));var t=i()[c/4+0],o=i()[c/4+1],r=i()[c/4+2],a=i()[c/4+3];if(a)throw l(r);var _=be(t,o).slice();return s.__wbindgen_export_5(t,o*1,1),_}finally{s.__wbindgen_add_to_stack_pointer(16)}}export(e){try{const c=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_export(c,this.__wbg_ptr,p(e));var t=i()[c/4+0],o=i()[c/4+1],r=i()[c/4+2],a=i()[c/4+3];if(a)throw l(r);var _=be(t,o).slice();return s.__wbindgen_export_5(t,o*1,1),_}finally{s.__wbindgen_add_to_stack_pointer(16)}}exportJsonUpdates(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_exportJsonUpdates(_,this.__wbg_ptr,p(e),p(t));var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}importJsonUpdates(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_importJsonUpdates(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}import(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=Te(e,s.__wbindgen_export_0),c=I;s.lorodoc_import(a,this.__wbg_ptr,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}importUpdateBatch(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_importUpdateBatch(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}importBatch(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_importBatch(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getShallowValue(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getShallowValue(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}toJSON(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_toJSON(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){const t=s.lorodoc_subscribe(this.__wbg_ptr,p(e));return l(t)}subscribeLocalUpdates(e){const t=s.lorodoc_subscribeLocalUpdates(this.__wbg_ptr,p(e));return l(t)}debugHistory(){s.lorodoc_debugHistory(this.__wbg_ptr)}changeCount(){return s.lorodoc_changeCount(this.__wbg_ptr)>>>0}opCount(){return s.lorodoc_opCount(this.__wbg_ptr)>>>0}getAllChanges(){const e=s.lorodoc_getAllChanges(this.__wbg_ptr);return l(e)}getChangeAt(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getChangeAt(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getChangeAtLamport(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16),c=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),u=I;s.lorodoc_getChangeAtLamport(_,this.__wbg_ptr,c,u,t);var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getOpsInChange(e){try{const c=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getOpsInChange(c,this.__wbg_ptr,p(e));var t=i()[c/4+0],o=i()[c/4+1],r=i()[c/4+2],a=i()[c/4+3];if(a)throw l(r);var _=oe(t,o).slice();return s.__wbindgen_export_5(t,o*4,4),_}finally{s.__wbindgen_add_to_stack_pointer(16)}}frontiersToVV(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=me(e,s.__wbindgen_export_0),c=I;s.lorodoc_frontiersToVV(a,this.__wbg_ptr,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return G.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}vvToFrontiers(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);Ie(e,G),s.lorodoc_vvToFrontiers(a,this.__wbg_ptr,e.__wbg_ptr);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getByPath(e){const t=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),o=I,r=s.lorodoc_getByPath(this.__wbg_ptr,t,o);return l(r)}getCursorPos(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);Ie(e,ge),s.lorodoc_getCursorPos(a,this.__wbg_ptr,e.__wbg_ptr);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getChangedContainersIn(e,t){try{const u=s.__wbindgen_add_to_stack_pointer(-16);s.lorodoc_getChangedContainersIn(u,this.__wbg_ptr,p(e),t);var o=i()[u/4+0],r=i()[u/4+1],a=i()[u/4+2],_=i()[u/4+3];if(_)throw l(a);var c=oe(o,r).slice();return s.__wbindgen_export_5(o,r*4,4),c}finally{s.__wbindgen_add_to_stack_pointer(16)}}}const fn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_lorolist_free(n>>>0));class Qe{static __wrap(e){e=e>>>0;const t=Object.create(Qe.prototype);return t.__wbg_ptr=e,fn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,fn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_lorolist_free(e)}constructor(){const e=s.lorolist_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=s.lorolist_kind(this.__wbg_ptr);return l(e)}insert(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_insert(a,this.__wbg_ptr,e,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}delete(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_delete(a,this.__wbg_ptr,e,t);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get(e){const t=s.lorolist_get(this.__wbg_ptr,e);return l(t)}get id(){const e=s.lorolist_id(this.__wbg_ptr);return l(e)}toArray(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_toArray(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=s.lorolist_toJSON(this.__wbg_ptr);return l(e)}insertContainer(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_insertContainer(_,this.__wbg_ptr,e,p(t));var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}pushContainer(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_pushContainer(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_subscribe(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get length(){return s.lorolist_length(this.__wbg_ptr)>>>0}parent(){const e=s.lorolist_parent(this.__wbg_ptr);return l(e)}isAttached(){return s.lorolist_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=s.lorolist_getAttached(this.__wbg_ptr);return l(e)}getCursor(e,t){const o=s.lorolist_getCursor(this.__wbg_ptr,e,p(t));return o===0?void 0:ge.__wrap(o)}push(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_push(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}pop(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_pop(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}clear(){try{const o=s.__wbindgen_add_to_stack_pointer(-16);s.lorolist_clear(o,this.__wbg_ptr);var e=i()[o/4+0],t=i()[o/4+1];if(t)throw l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getIdAt(e){const t=s.lorolist_getIdAt(this.__wbg_ptr,e);return l(t)}isDeleted(){return s.lorolist_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=s.lorolist_getShallowValue(this.__wbg_ptr);return l(e)}}const wn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_loromap_free(n>>>0));class Le{static __wrap(e){e=e>>>0;const t=Object.create(Le.prototype);return t.__wbg_ptr=e,wn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,wn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_loromap_free(e)}constructor(){const e=s.loromap_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=s.loromap_kind(this.__wbg_ptr);return l(e)}set(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.loromap_set(a,this.__wbg_ptr,_,c,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}delete(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16),a=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),_=I;s.loromap_delete(r,this.__wbg_ptr,a,_);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get(e){const t=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),o=I,r=s.loromap_get(this.__wbg_ptr,t,o);return l(r)}getOrCreateContainer(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16),c=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),u=I;s.loromap_getOrCreateContainer(_,this.__wbg_ptr,c,u,p(t));var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}keys(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.loromap_keys(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}values(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.loromap_values(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}entries(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.loromap_entries(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}get id(){const e=s.loromap_id(this.__wbg_ptr);return l(e)}toJSON(){const e=s.loromap_toJSON(this.__wbg_ptr);return l(e)}setContainer(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16),c=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),u=I;s.loromap_setContainer(_,this.__wbg_ptr,c,u,p(t));var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromap_subscribe(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get size(){return s.loromap_size(this.__wbg_ptr)>>>0}parent(){const e=s.loromap_parent(this.__wbg_ptr);return l(e)}isAttached(){return s.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=s.loromap_getAttached(this.__wbg_ptr);return l(e)}clear(){try{const o=s.__wbindgen_add_to_stack_pointer(-16);s.loromap_clear(o,this.__wbg_ptr);var e=i()[o/4+0],t=i()[o/4+1];if(t)throw l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getLastEditor(e){const t=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),o=I,r=s.loromap_getLastEditor(this.__wbg_ptr,t,o);return l(r)}isDeleted(){return s.loromap_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=s.loromap_getShallowValue(this.__wbg_ptr);return l(e)}}const bn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_loromovablelist_free(n>>>0));class Ge{static __wrap(e){e=e>>>0;const t=Object.create(Ge.prototype);return t.__wbg_ptr=e,bn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,bn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_loromovablelist_free(e)}constructor(){const e=s.loromovablelist_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=s.loromovablelist_kind(this.__wbg_ptr);return l(e)}insert(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_insert(a,this.__wbg_ptr,e,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}delete(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_delete(a,this.__wbg_ptr,e,t);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get(e){const t=s.loromovablelist_get(this.__wbg_ptr,e);return l(t)}get id(){const e=s.loromovablelist_id(this.__wbg_ptr);return l(e)}toArray(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_toArray(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=s.loromovablelist_toJSON(this.__wbg_ptr);return l(e)}insertContainer(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_insertContainer(_,this.__wbg_ptr,e,p(t));var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}pushContainer(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_pushContainer(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_subscribe(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get length(){return s.loromovablelist_length(this.__wbg_ptr)>>>0}parent(){const e=s.loromap_parent(this.__wbg_ptr);return l(e)}isAttached(){return s.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=s.loromovablelist_getAttached(this.__wbg_ptr);return l(e)}getCursor(e,t){const o=s.loromovablelist_getCursor(this.__wbg_ptr,e,p(t));return o===0?void 0:ge.__wrap(o)}move(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_move(a,this.__wbg_ptr,e,t);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}set(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_set(a,this.__wbg_ptr,e,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}setContainer(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_setContainer(_,this.__wbg_ptr,e,p(t));var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}push(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_push(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}pop(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_pop(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}clear(){try{const o=s.__wbindgen_add_to_stack_pointer(-16);s.loromovablelist_clear(o,this.__wbg_ptr);var e=i()[o/4+0],t=i()[o/4+1];if(t)throw l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getCreatorAt(e){const t=s.loromovablelist_getCreatorAt(this.__wbg_ptr,e);return l(t)}getLastMoverAt(e){const t=s.loromovablelist_getLastMoverAt(this.__wbg_ptr,e);return l(t)}getLastEditorAt(e){const t=s.loromovablelist_getLastEditorAt(this.__wbg_ptr,e);return l(t)}isDeleted(){return s.loromovablelist_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=s.loromovablelist_getShallowValue(this.__wbg_ptr);return l(e)}}const mn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_lorotext_free(n>>>0));class et{static __wrap(e){e=e>>>0;const t=Object.create(et.prototype);return t.__wbg_ptr=e,mn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,mn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_lorotext_free(e)}constructor(){const e=s.lorotext_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=s.lorotext_kind(this.__wbg_ptr);return l(e)}iter(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_iter(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}update(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.lorotext_update(a,this.__wbg_ptr,_,c,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}updateByLine(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.lorotext_updateByLine(a,this.__wbg_ptr,_,c,p(t));var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}insert(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.lorotext_insert(a,this.__wbg_ptr,e,_,c);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}slice(e,t){let o,r;try{const $=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_slice($,this.__wbg_ptr,e,t);var a=i()[$/4+0],_=i()[$/4+1],c=i()[$/4+2],u=i()[$/4+3],h=a,O=_;if(u)throw h=0,O=0,l(c);return o=h,r=O,V(h,O)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_export_5(o,r,1)}}charAt(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_charAt(a,this.__wbg_ptr,e);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return String.fromCodePoint(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}splice(e,t,o){let r,a;try{const ne=s.__wbindgen_add_to_stack_pointer(-16),pe=L(o,s.__wbindgen_export_0,s.__wbindgen_export_1),Ae=I;s.lorotext_splice(ne,this.__wbg_ptr,e,t,pe,Ae);var _=i()[ne/4+0],c=i()[ne/4+1],u=i()[ne/4+2],h=i()[ne/4+3],O=_,$=c;if(h)throw O=0,$=0,l(u);return r=O,a=$,V(O,$)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_export_5(r,a,1)}}insertUtf8(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.lorotext_insertUtf8(a,this.__wbg_ptr,e,_,c);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}delete(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_delete(a,this.__wbg_ptr,e,t);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}deleteUtf8(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_deleteUtf8(a,this.__wbg_ptr,e,t);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}mark(e,t,o){try{const _=s.__wbindgen_add_to_stack_pointer(-16),c=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),u=I;s.lorotext_mark(_,this.__wbg_ptr,p(e),c,u,p(o));var r=i()[_/4+0],a=i()[_/4+1];if(a)throw l(r)}finally{s.__wbindgen_add_to_stack_pointer(16)}}unmark(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),c=I;s.lorotext_unmark(a,this.__wbg_ptr,p(e),_,c);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}toString(){let e,t;try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_toString(a,this.__wbg_ptr);var o=i()[a/4+0],r=i()[a/4+1];return e=o,t=r,V(o,r)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_export_5(e,t,1)}}toDelta(){const e=s.lorotext_toDelta(this.__wbg_ptr);return l(e)}get id(){const e=s.lorotext_id(this.__wbg_ptr);return l(e)}get length(){return s.lorotext_length(this.__wbg_ptr)>>>0}subscribe(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_subscribe(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}applyDelta(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_applyDelta(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}parent(){const e=s.lorotext_parent(this.__wbg_ptr);return l(e)}isAttached(){return s.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=s.lorotext_getAttached(this.__wbg_ptr);return l(e)}getCursor(e,t){const o=s.lorotext_getCursor(this.__wbg_ptr,e,p(t));return o===0?void 0:ge.__wrap(o)}push(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16),a=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),_=I;s.lorotext_push(r,this.__wbg_ptr,a,_);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getEditorOf(e){const t=s.lorotext_getEditorOf(this.__wbg_ptr,e);return l(t)}isDeleted(){return s.lorotext_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){let e,t;try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotext_getShallowValue(a,this.__wbg_ptr);var o=i()[a/4+0],r=i()[a/4+1];return e=o,t=r,V(o,r)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_export_5(e,t,1)}}}const yn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_lorotree_free(n>>>0));class tt{static __wrap(e){e=e>>>0;const t=Object.create(tt.prototype);return t.__wbg_ptr=e,yn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,yn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_lorotree_free(e)}constructor(){const e=s.lorotree_new();return this.__wbg_ptr=e>>>0,this}kind(){const e=s.lorotree_kind(this.__wbg_ptr);return l(e)}createNode(e,t){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_createNode(_,this.__wbg_ptr,X(e),!Y(t),Y(t)?0:t);var o=i()[_/4+0],r=i()[_/4+1],a=i()[_/4+2];if(a)throw l(r);return de.__wrap(o)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}move(e,t,o){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_move(_,this.__wbg_ptr,X(e),X(t),!Y(o),Y(o)?0:o);var r=i()[_/4+0],a=i()[_/4+1];if(a)throw l(r)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0,F[W++]=void 0}}delete(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_delete(r,this.__wbg_ptr,X(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}getNodeByID(e){try{const t=s.lorotree_getNodeByID(this.__wbg_ptr,X(e));return t===0?void 0:de.__wrap(t)}finally{F[W++]=void 0}}get id(){const e=s.lorotree_id(this.__wbg_ptr);return l(e)}has(e){try{return s.lorotree_has(this.__wbg_ptr,X(e))!==0}finally{F[W++]=void 0}}isNodeDeleted(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_isNodeDeleted(a,this.__wbg_ptr,X(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return t!==0}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}toArray(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_toArray(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}getNodes(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_getNodes(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=s.lorotree_toJSON(this.__wbg_ptr);return l(e)}nodes(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_nodes(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}roots(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_roots(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=oe(e,t).slice();return s.__wbindgen_export_5(e,t*4,4),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotree_subscribe(a,this.__wbg_ptr,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}parent(){const e=s.lorotree_parent(this.__wbg_ptr);return l(e)}isAttached(){return s.lorotree_isAttached(this.__wbg_ptr)!==0}getAttached(){const e=s.lorotree_getAttached(this.__wbg_ptr);return l(e)}enableFractionalIndex(e){s.lorotree_enableFractionalIndex(this.__wbg_ptr,e)}disableFractionalIndex(){s.lorotree_disableFractionalIndex(this.__wbg_ptr)}isFractionalIndexEnabled(){return s.lorotree_isFractionalIndexEnabled(this.__wbg_ptr)!==0}isDeleted(){return s.lorotree_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){const e=s.lorotree_getShallowValue(this.__wbg_ptr);return l(e)}}const vn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_lorotreenode_free(n>>>0));class de{static __wrap(e){e=e>>>0;const t=Object.create(de.prototype);return t.__wbg_ptr=e,vn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,vn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_lorotreenode_free(e)}__getClassname(){let e,t;try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode___getClassname(a,this.__wbg_ptr);var o=i()[a/4+0],r=i()[a/4+1];return e=o,t=r,V(o,r)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_export_5(e,t,1)}}get id(){const e=s.lorotreenode_id(this.__wbg_ptr);return l(e)}createNode(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_createNode(a,this.__wbg_ptr,!Y(e),Y(e)?0:e);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return de.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}move(e,t){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_move(a,this.__wbg_ptr,X(e),!Y(t),Y(t)?0:t);var o=i()[a/4+0],r=i()[a/4+1];if(r)throw l(o)}finally{s.__wbindgen_add_to_stack_pointer(16),F[W++]=void 0}}moveAfter(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);Ie(e,de),s.lorotreenode_moveAfter(r,this.__wbg_ptr,e.__wbg_ptr);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}moveBefore(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);Ie(e,de),s.lorotreenode_moveBefore(r,this.__wbg_ptr,e.__wbg_ptr);var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}index(){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_index(a,this.__wbg_ptr);var e=i()[a/4+0],t=i()[a/4+1],o=i()[a/4+2],r=i()[a/4+3];if(r)throw l(o);return e===0?void 0:t>>>0}finally{s.__wbindgen_add_to_stack_pointer(16)}}fractionalIndex(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_fractionalIndex(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get data(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_data(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return Le.__wrap(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}toJSON(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_toJSON(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return l(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}parent(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_parent(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return e===0?void 0:de.__wrap(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}children(){const e=s.lorotreenode_children(this.__wbg_ptr);return l(e)}isDeleted(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.lorotreenode_isDeleted(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return e!==0}finally{s.__wbindgen_add_to_stack_pointer(16)}}getLastMoveId(){const e=s.lorotreenode_getLastMoveId(this.__wbg_ptr);return l(e)}creationId(){const e=s.lorotreenode_creationId(this.__wbg_ptr);return l(e)}creator(){const e=s.lorotreenode_creator(this.__wbg_ptr);return l(e)}}const ms=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_undomanager_free(n>>>0));class ys{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ms.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_undomanager_free(e)}constructor(e,t){Ie(e,se);const o=s.undomanager_new(e.__wbg_ptr,p(t));return this.__wbg_ptr=o>>>0,this}undo(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.undomanager_undo(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return e!==0}finally{s.__wbindgen_add_to_stack_pointer(16)}}redo(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.undomanager_redo(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=i()[r/4+2];if(o)throw l(t);return e!==0}finally{s.__wbindgen_add_to_stack_pointer(16)}}canUndo(){return s.undomanager_canUndo(this.__wbg_ptr)!==0}canRedo(){return s.undomanager_canRedo(this.__wbg_ptr)!==0}setMaxUndoSteps(e){s.undomanager_setMaxUndoSteps(this.__wbg_ptr,e)}setMergeInterval(e){s.undomanager_setMergeInterval(this.__wbg_ptr,e)}addExcludeOriginPrefix(e){const t=L(e,s.__wbindgen_export_0,s.__wbindgen_export_1),o=I;s.undomanager_addExcludeOriginPrefix(this.__wbg_ptr,t,o)}checkBinding(e){return Ie(e,se),s.undomanager_checkBinding(this.__wbg_ptr,e.__wbg_ptr)!==0}setOnPush(e){s.undomanager_setOnPush(this.__wbg_ptr,p(e))}setOnPop(e){s.undomanager_setOnPop(this.__wbg_ptr,p(e))}clear(){s.undomanager_clear(this.__wbg_ptr)}}const kn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>s.__wbg_versionvector_free(n>>>0));class G{static __wrap(e){e=e>>>0;const t=Object.create(G.prototype);return t.__wbg_ptr=e,kn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,kn.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_versionvector_free(e)}constructor(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_new(a,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return this.__wbg_ptr=t>>>0,this}finally{s.__wbindgen_add_to_stack_pointer(16)}}static parseJSON(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_parseJSON(a,p(e));var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return G.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}toJSON(){const e=s.versionvector_toJSON(this.__wbg_ptr);return l(e)}encode(){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_encode(r,this.__wbg_ptr);var e=i()[r/4+0],t=i()[r/4+1],o=be(e,t).slice();return s.__wbindgen_export_5(e,t*1,1),o}finally{s.__wbindgen_add_to_stack_pointer(16)}}static decode(e){try{const a=s.__wbindgen_add_to_stack_pointer(-16),_=Te(e,s.__wbindgen_export_0),c=I;s.versionvector_decode(a,_,c);var t=i()[a/4+0],o=i()[a/4+1],r=i()[a/4+2];if(r)throw l(o);return G.__wrap(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}get(e){try{const _=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_get(_,this.__wbg_ptr,p(e));var t=i()[_/4+0],o=i()[_/4+1],r=i()[_/4+2],a=i()[_/4+3];if(a)throw l(r);return t===0?void 0:o}finally{s.__wbindgen_add_to_stack_pointer(16)}}compare(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);Ie(e,G),s.versionvector_compare(r,this.__wbg_ptr,e.__wbg_ptr);var t=i()[r/4+0],o=i()[r/4+1];return t===0?void 0:o}finally{s.__wbindgen_add_to_stack_pointer(16)}}setEnd(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_setEnd(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}setLast(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_setLast(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}remove(e){try{const r=s.__wbindgen_add_to_stack_pointer(-16);s.versionvector_remove(r,this.__wbg_ptr,p(e));var t=i()[r/4+0],o=i()[r/4+1];if(o)throw l(t)}finally{s.__wbindgen_add_to_stack_pointer(16)}}length(){return s.versionvector_length(this.__wbg_ptr)>>>0}}function xn(n){l(n)}function Sn(n){const e=Le.__wrap(n);return p(e)}function Cn(n){const e=et.__wrap(n);return p(e)}function An(n){const e=Qe.__wrap(n);return p(e)}function On(n){const e=tt.__wrap(n);return p(e)}function Tn(n){const e=ge.__wrap(n);return p(e)}function In(n){const e=Ge.__wrap(n);return p(e)}function En(n){const e=Xe.__wrap(n);return p(e)}function Nn(n){const e=de.__wrap(n);return p(e)}function Dn(n){const e=G.__wrap(n);return p(e)}function Mn(n){return typeof f(n)=="function"}function Rn(n,e){const t=V(n,e);return p(t)}function $n(n){const e=f(n);return typeof e=="boolean"?e?1:0:2}function Zn(n,e){const t=new Error(V(n,e));return p(t)}function jn(n){const e=f(n);return p(e)}function Fn(n,e){const t=f(e),o=typeof t=="string"?t:void 0;var r=Y(o)?0:L(o,s.__wbindgen_export_0,s.__wbindgen_export_1),a=I;i()[n/4+1]=a,i()[n/4+0]=r}function Ln(n){return f(n)===void 0}function Pn(n,e){return f(n)in f(e)}function Un(n){return typeof f(n)=="bigint"}function Vn(n,e){const t=f(e),o=typeof t=="number"?t:void 0;dn()[n/8+1]=Y(o)?0:o,i()[n/4+0]=!Y(o)}function zn(n){return p(n)}function Bn(n,e){return f(n)===f(e)}function Wn(n){const e=f(n);return typeof e=="object"&&e!==null}function Jn(n){const e=BigInt.asUintN(64,n);return p(e)}function Kn(n){const e=l(n).original;return e.cnt--==1?(e.a=0,!0):!1}function qn(n){return+f(n)}function Hn(n){return typeof f(n)=="string"}function Yn(n){return f(n)===null}function Xn(n){return p(n)}function Qn(n){const e=typeof f(n);return p(e)}function Gn(n,e){console.error(V(n,e))}function er(n,e){console.log(V(n,e))}function tr(n){return!f(n)}function nr(n,e){return f(n)==f(e)}function rr(n,e){const t=String(f(e)),o=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),r=I;i()[n/4+1]=r,i()[n/4+0]=o}function or(n,e){const t=f(n)[f(e)];return p(t)}function sr(n,e,t){f(n)[l(e)]=l(t)}function ar(n,e){let t,o;try{t=n,o=e,console.log(V(n,e))}finally{s.__wbindgen_export_5(t,o,1)}}function ir(n,e,t,o,r,a,_,c){let u,h;try{u=n,h=e,console.log(V(n,e),V(t,o),V(r,a),V(_,c))}finally{s.__wbindgen_export_5(u,h,1)}}function _r(n,e){performance.mark(V(n,e))}function dr(){return J(function(n,e,t,o){let r,a,_,c;try{r=n,a=e,_=t,c=o,performance.measure(V(n,e),V(t,o))}finally{s.__wbindgen_export_5(r,a,1),s.__wbindgen_export_5(_,c,1)}},arguments)}function cr(){const n=new Error;return p(n)}function lr(n,e){const t=f(e).stack,o=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),r=I;i()[n/4+1]=r,i()[n/4+0]=o}function ur(n,e){let t,o;try{t=n,o=e,console.error(V(n,e))}finally{s.__wbindgen_export_5(t,o,1)}}const pr=typeof Date.now=="function"?Date.now:fs("Date.now");function gr(n){const e=f(n).crypto;return p(e)}function hr(n){const e=f(n).process;return p(e)}function fr(n){const e=f(n).versions;return p(e)}function wr(n){const e=f(n).node;return p(e)}function br(){return J(function(){const n=module.require;return p(n)},arguments)}function mr(n){const e=f(n).msCrypto;return p(e)}function yr(){return J(function(n,e){f(n).getRandomValues(f(e))},arguments)}function vr(){return J(function(n,e){f(n).randomFillSync(l(e))},arguments)}function kr(){return J(function(){const n=self.self;return p(n)},arguments)}function xr(){return J(function(){const n=window.window;return p(n)},arguments)}function Sr(){return J(function(){const n=globalThis.globalThis;return p(n)},arguments)}function Cr(){return J(function(){const n=global.global;return p(n)},arguments)}function Ar(n,e){const t=new Function(V(n,e));return p(t)}function Or(){return J(function(n,e){const t=f(n).call(f(e));return p(t)},arguments)}function Tr(n,e){const t=f(n)[e>>>0];return p(t)}function Ir(n){return f(n).length}function Er(){const n=new Array;return p(n)}function Nr(){return p(new Map)}function Dr(n){const e=f(n).next;return p(e)}function Mr(){return J(function(n){const e=f(n).next();return p(e)},arguments)}function Rr(n){return f(n).done}function $r(n){const e=f(n).value;return p(e)}function Zr(){return p(Symbol.iterator)}function jr(){return J(function(n,e){const t=Reflect.get(f(n),f(e));return p(t)},arguments)}function Fr(){const n=new Object;return p(n)}function Lr(n){const e=new Array(n>>>0);return p(e)}function Pr(n,e,t){f(n)[e>>>0]=l(t)}function Ur(n){return Array.isArray(f(n))}function Vr(n,e){return f(n).push(f(e))}function zr(n){let e;try{e=f(n)instanceof ArrayBuffer}catch{e=!1}return e}function Br(){return J(function(n,e,t){const o=f(n).call(f(e),f(t));return p(o)},arguments)}function Wr(){return J(function(n,e,t,o){const r=f(n).call(f(e),f(t),f(o));return p(r)},arguments)}function Jr(){return J(function(n,e,t,o,r){const a=f(n).call(f(e),f(t),f(o),f(r));return p(a)},arguments)}function Kr(n){let e;try{e=f(n)instanceof Map}catch{e=!1}return e}function qr(n,e,t){const o=f(n).set(f(e),f(t));return p(o)}function Hr(n){const e=f(n).entries();return p(e)}function Yr(n){return Number.isSafeInteger(f(n))}function Xr(n){let e;try{e=f(n)instanceof Object}catch{e=!1}return e}function Qr(n){const e=Object.entries(f(n));return p(e)}function Gr(){return J(function(n,e,t){const o=Reflect.apply(f(n),f(e),f(t));return p(o)},arguments)}function eo(){return J(function(n){const e=Reflect.ownKeys(f(n));return p(e)},arguments)}function to(){return J(function(n,e,t){return Reflect.set(f(n),f(e),f(t))},arguments)}function no(n){const e=f(n).buffer;return p(e)}function ro(n){const e=Promise.resolve(f(n));return p(e)}function oo(n,e){const t=f(n).then(f(e));return p(t)}function so(n,e,t){const o=new Uint8Array(f(n),e>>>0,t>>>0);return p(o)}function ao(n){const e=new Uint8Array(f(n));return p(e)}function io(n,e,t){f(n).set(f(e),t>>>0)}function _o(n){return f(n).length}function co(n){let e;try{e=f(n)instanceof Uint8Array}catch{e=!1}return e}function lo(n){const e=new Uint8Array(n>>>0);return p(e)}function uo(n,e,t){const o=f(n).subarray(e>>>0,t>>>0);return p(o)}function po(n,e){return f(n)[e>>>0]}function go(n,e,t){f(n)[e>>>0]=t}function ho(n,e){const t=f(e),o=typeof t=="bigint"?t:void 0;_s()[n/8+1]=Y(o)?BigInt(0):o,i()[n/4+0]=!Y(o)}function fo(n,e){const t=Jt(f(e)),o=L(t,s.__wbindgen_export_0,s.__wbindgen_export_1),r=I;i()[n/4+1]=r,i()[n/4+0]=o}function wo(n,e){throw new Error(V(n,e))}function bo(n){throw l(n)}function mo(){const n=s.memory;return p(n)}function yo(n,e,t){const o=ln(n,e,9,ds);return p(o)}function vo(n,e,t){const o=ln(n,e,11,cs);return p(o)}var vs=Object.freeze({__proto__:null,AwarenessWasm:bs,Cursor:ge,LoroCounter:Xe,LoroDoc:se,LoroList:Qe,LoroMap:Le,LoroMovableList:Ge,LoroText:et,LoroTree:tt,LoroTreeNode:de,UndoManager:ys,VersionVector:G,__wbg_String_b9412f8799faab3e:rr,__wbg_apply_0a5aa603881e6d79:Gr,__wbg_buffer_12d079cc21e14bdb:no,__wbg_call_27c0f87801dedf93:Or,__wbg_call_8e7cb608789c2528:Wr,__wbg_call_938992c832f74314:Jr,__wbg_call_b3ca7c6051f9bec1:Br,__wbg_crypto_1d1f22824a6a080c:gr,__wbg_cursor_new:Tn,__wbg_done_298b57d23c0fc80c:Rr,__wbg_entries_95cc2c823b285a09:Qr,__wbg_entries_ce844941d0c51880:Hr,__wbg_error_c8c2cca30a630316:Gn,__wbg_error_f851667af71bcfc6:ur,__wbg_getRandomValues_3aa56aa6edec874c:yr,__wbg_get_bd8e338fbd5f5cc8:Tr,__wbg_get_e3c254076557e348:jr,__wbg_getindex_03d06b4e7ea3475e:po,__wbg_getwithrefkey_edc2c8960f0f1191:or,__wbg_globalThis_d1e6af4856ba331b:Sr,__wbg_global_207b558942527489:Cr,__wbg_instanceof_ArrayBuffer_836825be07d4c9d2:zr,__wbg_instanceof_Map_87917e0a7aaf4012:Kr,__wbg_instanceof_Object_71ca3c0a59266746:Xr,__wbg_instanceof_Uint8Array_2b3bbecd033d19f6:co,__wbg_isArray_2ab64d95e09ea0ae:Ur,__wbg_isSafeInteger_f7b04ef02296c4d2:Yr,__wbg_iterator_2cee6dadfd956dfa:Zr,__wbg_length_c20a40f15020d68a:_o,__wbg_length_cd7af8117672b8b8:Ir,__wbg_log_aba5996d9bde071f:ir,__wbg_log_c9486ca5d8e2cbe8:ar,__wbg_log_d8fdbde28117925d:er,__wbg_lorocounter_new:En,__wbg_lorolist_new:An,__wbg_loromap_new:Sn,__wbg_loromovablelist_new:In,__wbg_lorotext_new:Cn,__wbg_lorotree_new:On,__wbg_lorotreenode_new:Nn,__wbg_mark_40e050a77cc39fea:_r,__wbg_measure_aa7a73f17813f708:dr,__wbg_msCrypto_eb05e62b530a1508:mr,__wbg_new_16b304a2cfa7ff4a:Er,__wbg_new_63b92bc8671ed464:ao,__wbg_new_72fb9a18b5ae2624:Fr,__wbg_new_abda76e883ba8a5f:cr,__wbg_new_d9bc3a0147634640:Nr,__wbg_newnoargs_e258087cd0daa0ea:Ar,__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb:so,__wbg_newwithlength_66ae46612e7f0234:Lr,__wbg_newwithlength_e9b4878cebadb3d3:lo,__wbg_next_196c84450b364254:Mr,__wbg_next_40fc327bfc8770e6:Dr,__wbg_node_104a2ff8d6ea03a2:wr,__wbg_now_11683c634f92ae89:pr,__wbg_ownKeys_658942b7f28d1fe9:eo,__wbg_process_4a72847cc503995b:hr,__wbg_push_a5b05aedc7234f9f:Vr,__wbg_randomFillSync_5c9c955aa56b6049:vr,__wbg_require_cca90b1a94a0255b:br,__wbg_resolve_b0083a7967828ec8:ro,__wbg_self_ce0dbfc45cf2f5be:kr,__wbg_set_1f9b04f170055d33:to,__wbg_set_8417257aaedc936b:qr,__wbg_set_a47bac70306a19a7:io,__wbg_set_d4638f722068f043:Pr,__wbg_set_f975102236d3c502:sr,__wbg_set_wasm:Wt,__wbg_setindex_0b7ede192dc5eca8:go,__wbg_stack_658279fe44541cf6:lr,__wbg_subarray_a1f73cd4b5b42fe1:uo,__wbg_then_0c86a60e8fcfe9f6:oo,__wbg_value_d93c65011f51a456:$r,__wbg_versions_f686565e586dd935:fr,__wbg_versionvector_new:Dn,__wbg_window_c6fb939a7f436783:xr,__wbindgen_as_number:qn,__wbindgen_bigint_from_i64:zn,__wbindgen_bigint_from_u64:Jn,__wbindgen_bigint_get_as_i64:ho,__wbindgen_boolean_get:$n,__wbindgen_cb_drop:Kn,__wbindgen_closure_wrapper487:yo,__wbindgen_closure_wrapper489:vo,__wbindgen_debug_string:fo,__wbindgen_error_new:Zn,__wbindgen_in:Pn,__wbindgen_is_bigint:Un,__wbindgen_is_falsy:tr,__wbindgen_is_function:Mn,__wbindgen_is_null:Yn,__wbindgen_is_object:Wn,__wbindgen_is_string:Hn,__wbindgen_is_undefined:Ln,__wbindgen_jsval_eq:Bn,__wbindgen_jsval_loose_eq:nr,__wbindgen_memory:mo,__wbindgen_number_get:Vn,__wbindgen_number_new:Xn,__wbindgen_object_clone_ref:jn,__wbindgen_object_drop_ref:xn,__wbindgen_rethrow:bo,__wbindgen_string_get:Fn,__wbindgen_string_new:Rn,__wbindgen_throw:wo,__wbindgen_typeof:Qn,decodeFrontiers:ps,decodeImportBlobMeta:hs,encodeFrontiers:us,run:ls,setDebug:gs});URL=globalThis.URL;const d=await rs({"./loro_wasm_bg.js":{__wbindgen_object_drop_ref:xn,__wbg_loromap_new:Sn,__wbg_lorotext_new:Cn,__wbg_lorolist_new:An,__wbg_lorotree_new:On,__wbg_cursor_new:Tn,__wbg_loromovablelist_new:In,__wbg_lorocounter_new:En,__wbg_lorotreenode_new:Nn,__wbg_versionvector_new:Dn,__wbindgen_is_function:Mn,__wbindgen_string_new:Rn,__wbindgen_boolean_get:$n,__wbindgen_error_new:Zn,__wbindgen_object_clone_ref:jn,__wbindgen_string_get:Fn,__wbindgen_is_undefined:Ln,__wbindgen_in:Pn,__wbindgen_is_bigint:Un,__wbindgen_number_get:Vn,__wbindgen_bigint_from_i64:zn,__wbindgen_jsval_eq:Bn,__wbindgen_is_object:Wn,__wbindgen_bigint_from_u64:Jn,__wbindgen_cb_drop:Kn,__wbindgen_as_number:qn,__wbindgen_is_string:Hn,__wbindgen_is_null:Yn,__wbindgen_number_new:Xn,__wbindgen_typeof:Qn,__wbg_error_c8c2cca30a630316:Gn,__wbg_log_d8fdbde28117925d:er,__wbindgen_is_falsy:tr,__wbindgen_jsval_loose_eq:nr,__wbg_String_b9412f8799faab3e:rr,__wbg_getwithrefkey_edc2c8960f0f1191:or,__wbg_set_f975102236d3c502:sr,__wbg_log_c9486ca5d8e2cbe8:ar,__wbg_log_aba5996d9bde071f:ir,__wbg_mark_40e050a77cc39fea:_r,__wbg_measure_aa7a73f17813f708:dr,__wbg_new_abda76e883ba8a5f:cr,__wbg_stack_658279fe44541cf6:lr,__wbg_error_f851667af71bcfc6:ur,__wbg_now_11683c634f92ae89:pr,__wbg_crypto_1d1f22824a6a080c:gr,__wbg_process_4a72847cc503995b:hr,__wbg_versions_f686565e586dd935:fr,__wbg_node_104a2ff8d6ea03a2:wr,__wbg_require_cca90b1a94a0255b:br,__wbg_msCrypto_eb05e62b530a1508:mr,__wbg_getRandomValues_3aa56aa6edec874c:yr,__wbg_randomFillSync_5c9c955aa56b6049:vr,__wbg_self_ce0dbfc45cf2f5be:kr,__wbg_window_c6fb939a7f436783:xr,__wbg_globalThis_d1e6af4856ba331b:Sr,__wbg_global_207b558942527489:Cr,__wbg_newnoargs_e258087cd0daa0ea:Ar,__wbg_call_27c0f87801dedf93:Or,__wbg_get_bd8e338fbd5f5cc8:Tr,__wbg_length_cd7af8117672b8b8:Ir,__wbg_new_16b304a2cfa7ff4a:Er,__wbg_new_d9bc3a0147634640:Nr,__wbg_next_40fc327bfc8770e6:Dr,__wbg_next_196c84450b364254:Mr,__wbg_done_298b57d23c0fc80c:Rr,__wbg_value_d93c65011f51a456:$r,__wbg_iterator_2cee6dadfd956dfa:Zr,__wbg_get_e3c254076557e348:jr,__wbg_new_72fb9a18b5ae2624:Fr,__wbg_newwithlength_66ae46612e7f0234:Lr,__wbg_set_d4638f722068f043:Pr,__wbg_isArray_2ab64d95e09ea0ae:Ur,__wbg_push_a5b05aedc7234f9f:Vr,__wbg_instanceof_ArrayBuffer_836825be07d4c9d2:zr,__wbg_call_b3ca7c6051f9bec1:Br,__wbg_call_8e7cb608789c2528:Wr,__wbg_call_938992c832f74314:Jr,__wbg_instanceof_Map_87917e0a7aaf4012:Kr,__wbg_set_8417257aaedc936b:qr,__wbg_entries_ce844941d0c51880:Hr,__wbg_isSafeInteger_f7b04ef02296c4d2:Yr,__wbg_instanceof_Object_71ca3c0a59266746:Xr,__wbg_entries_95cc2c823b285a09:Qr,__wbg_apply_0a5aa603881e6d79:Gr,__wbg_ownKeys_658942b7f28d1fe9:eo,__wbg_set_1f9b04f170055d33:to,__wbg_buffer_12d079cc21e14bdb:no,__wbg_resolve_b0083a7967828ec8:ro,__wbg_then_0c86a60e8fcfe9f6:oo,__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb:so,__wbg_new_63b92bc8671ed464:ao,__wbg_set_a47bac70306a19a7:io,__wbg_length_c20a40f15020d68a:_o,__wbg_instanceof_Uint8Array_2b3bbecd033d19f6:co,__wbg_newwithlength_e9b4878cebadb3d3:lo,__wbg_subarray_a1f73cd4b5b42fe1:uo,__wbg_getindex_03d06b4e7ea3475e:po,__wbg_setindex_0b7ede192dc5eca8:go,__wbindgen_bigint_get_as_i64:ho,__wbindgen_debug_string:fo,__wbindgen_throw:wo,__wbindgen_rethrow:bo,__wbindgen_memory:mo,__wbindgen_closure_wrapper487:yo,__wbindgen_closure_wrapper489:vo}},ns),ks=d.memory,xs=d.__wbg_lorocounter_free,Ss=d.lorocounter_new,Cs=d.lorocounter_increment,As=d.lorocounter_decrement,Os=d.lorocounter_value,Ts=d.lorocounter_subscribe,Is=d.lorocounter_parent,Es=d.lorocounter_isAttached,Ns=d.lorocounter_getAttached,Ds=d.lorocounter_getShallowValue,Ms=d.__wbg_awarenesswasm_free,Rs=d.awarenesswasm_new,$s=d.awarenesswasm_encode,Zs=d.awarenesswasm_encodeAll,js=d.awarenesswasm_apply,Fs=d.awarenesswasm_setLocalState,Ls=d.awarenesswasm_peer,Ps=d.awarenesswasm_getAllStates,Us=d.awarenesswasm_getState,Vs=d.awarenesswasm_getTimestamp,zs=d.awarenesswasm_removeOutdated,Bs=d.awarenesswasm_length,Ws=d.awarenesswasm_isEmpty,Js=d.awarenesswasm_peers,Ks=d.run,qs=d.encodeFrontiers,Hs=d.decodeFrontiers,Ys=d.setDebug,Xs=d.__wbg_lorodoc_free,Qs=d.lorodoc_new,Gs=d.lorodoc_setDetachedEditing,ea=d.lorodoc_isDetachedEditingEnabled,ta=d.lorodoc_setRecordTimestamp,na=d.lorodoc_setChangeMergeInterval,ra=d.lorodoc_configTextStyle,oa=d.lorodoc_fromSnapshot,sa=d.lorodoc_attach,aa=d.lorodoc_isDetached,ia=d.lorodoc_detach,_a=d.lorodoc_fork,da=d.lorodoc_forkAt,ca=d.lorodoc_checkoutToLatest,la=d.lorodoc_travelChangeAncestors,ua=d.lorodoc_checkout,pa=d.lorodoc_peerId,ga=d.lorodoc_peerIdStr,ha=d.lorodoc_setPeerId,fa=d.lorodoc_commit,wa=d.lorodoc_getPendingTxnLength,ba=d.lorodoc_getText,ma=d.lorodoc_getMap,ya=d.lorodoc_getList,va=d.lorodoc_getMovableList,ka=d.lorodoc_getCounter,xa=d.lorodoc_getTree,Sa=d.lorodoc_getContainerById,Ca=d.lorodoc_setNextCommitMessage,Aa=d.lorodoc_getDeepValueWithID,Oa=d.lorodoc_getPathToContainer,Ta=d.lorodoc_JSONPath,Ia=d.lorodoc_version,Ea=d.lorodoc_shallowSinceVV,Na=d.lorodoc_isShallow,Da=d.lorodoc_shallowSinceFrontiers,Ma=d.lorodoc_oplogVersion,Ra=d.lorodoc_frontiers,$a=d.lorodoc_oplogFrontiers,Za=d.lorodoc_cmpWithFrontiers,ja=d.lorodoc_cmpFrontiers,Fa=d.lorodoc_exportSnapshot,La=d.lorodoc_exportFrom,Pa=d.lorodoc_export,Ua=d.lorodoc_exportJsonUpdates,Va=d.lorodoc_importJsonUpdates,za=d.lorodoc_import,Ba=d.lorodoc_importUpdateBatch,Wa=d.lorodoc_importBatch,Ja=d.lorodoc_getShallowValue,Ka=d.lorodoc_toJSON,qa=d.lorodoc_subscribe,Ha=d.lorodoc_subscribeLocalUpdates,Ya=d.lorodoc_debugHistory,Xa=d.lorodoc_changeCount,Qa=d.lorodoc_opCount,Ga=d.lorodoc_getAllChanges,ei=d.lorodoc_getChangeAt,ti=d.lorodoc_getChangeAtLamport,ni=d.lorodoc_getOpsInChange,ri=d.lorodoc_frontiersToVV,oi=d.lorodoc_vvToFrontiers,si=d.lorodoc_getByPath,ai=d.lorodoc_getCursorPos,ii=d.lorodoc_getChangedContainersIn,_i=d.__wbg_lorotext_free,di=d.lorotext_new,ci=d.lorotext_kind,li=d.lorotext_iter,ui=d.lorotext_update,pi=d.lorotext_updateByLine,gi=d.lorotext_insert,hi=d.lorotext_slice,fi=d.lorotext_charAt,wi=d.lorotext_splice,bi=d.lorotext_insertUtf8,mi=d.lorotext_delete,yi=d.lorotext_deleteUtf8,vi=d.lorotext_mark,ki=d.lorotext_unmark,xi=d.lorotext_toString,Si=d.lorotext_toDelta,Ci=d.lorotext_id,Ai=d.lorotext_length,Oi=d.lorotext_subscribe,Ti=d.lorotext_applyDelta,Ii=d.lorotext_parent,Ei=d.lorotext_getAttached,Ni=d.lorotext_getCursor,Di=d.lorotext_push,Mi=d.lorotext_getEditorOf,Ri=d.lorotext_isDeleted,$i=d.lorotext_getShallowValue,Zi=d.__wbg_loromap_free,ji=d.loromap_new,Fi=d.loromap_kind,Li=d.loromap_set,Pi=d.loromap_delete,Ui=d.loromap_get,Vi=d.loromap_getOrCreateContainer,zi=d.loromap_keys,Bi=d.loromap_values,Wi=d.loromap_entries,Ji=d.loromap_id,Ki=d.loromap_toJSON,qi=d.loromap_setContainer,Hi=d.loromap_subscribe,Yi=d.loromap_size,Xi=d.loromap_parent,Qi=d.loromap_getAttached,Gi=d.loromap_clear,e_=d.loromap_getLastEditor,t_=d.loromap_isDeleted,n_=d.loromap_getShallowValue,r_=d.__wbg_lorolist_free,o_=d.lorolist_new,s_=d.lorolist_kind,a_=d.lorolist_insert,i_=d.lorolist_delete,__=d.lorolist_get,d_=d.lorolist_id,c_=d.lorolist_toArray,l_=d.lorolist_toJSON,u_=d.lorolist_insertContainer,p_=d.lorolist_pushContainer,g_=d.lorolist_subscribe,h_=d.lorolist_length,f_=d.lorolist_parent,w_=d.lorolist_isAttached,b_=d.lorolist_getAttached,m_=d.lorolist_getCursor,y_=d.lorolist_push,v_=d.lorolist_pop,k_=d.lorolist_clear,x_=d.lorolist_getIdAt,S_=d.lorolist_isDeleted,C_=d.lorolist_getShallowValue,A_=d.loromovablelist_new,O_=d.loromovablelist_kind,T_=d.loromovablelist_insert,I_=d.loromovablelist_delete,E_=d.loromovablelist_get,N_=d.loromovablelist_id,D_=d.loromovablelist_toArray,M_=d.loromovablelist_toJSON,R_=d.loromovablelist_insertContainer,$_=d.loromovablelist_pushContainer,Z_=d.loromovablelist_subscribe,j_=d.loromovablelist_length,F_=d.loromovablelist_getAttached,L_=d.loromovablelist_getCursor,P_=d.loromovablelist_move,U_=d.loromovablelist_set,V_=d.loromovablelist_setContainer,z_=d.loromovablelist_push,B_=d.loromovablelist_pop,W_=d.loromovablelist_clear,J_=d.loromovablelist_getCreatorAt,K_=d.loromovablelist_getLastMoverAt,q_=d.loromovablelist_getLastEditorAt,H_=d.loromovablelist_isDeleted,Y_=d.loromovablelist_getShallowValue,X_=d.__wbg_lorotree_free,Q_=d.lorotreenode___getClassname,G_=d.__wbg_lorotreenode_free,ed=d.lorotreenode_id,td=d.lorotreenode_createNode,nd=d.lorotreenode_move,rd=d.lorotreenode_moveAfter,od=d.lorotreenode_moveBefore,sd=d.lorotreenode_index,ad=d.lorotreenode_fractionalIndex,id=d.lorotreenode_data,_d=d.lorotreenode_toJSON,dd=d.lorotreenode_parent,cd=d.lorotreenode_children,ld=d.lorotreenode_isDeleted,ud=d.lorotreenode_getLastMoveId,pd=d.lorotreenode_creationId,gd=d.lorotreenode_creator,hd=d.lorotree_new,fd=d.lorotree_kind,wd=d.lorotree_createNode,bd=d.lorotree_move,md=d.lorotree_delete,yd=d.lorotree_getNodeByID,vd=d.lorotree_id,kd=d.lorotree_has,xd=d.lorotree_isNodeDeleted,Sd=d.lorotree_toArray,Cd=d.lorotree_getNodes,Ad=d.lorotree_toJSON,Od=d.lorotree_nodes,Td=d.lorotree_roots,Id=d.lorotree_subscribe,Ed=d.lorotree_parent,Nd=d.lorotree_isAttached,Dd=d.lorotree_getAttached,Md=d.lorotree_enableFractionalIndex,Rd=d.lorotree_disableFractionalIndex,$d=d.lorotree_isFractionalIndexEnabled,Zd=d.lorotree_isDeleted,jd=d.lorotree_getShallowValue,Fd=d.__wbg_cursor_free,Ld=d.cursor_containerId,Pd=d.cursor_pos,Ud=d.cursor_side,Vd=d.cursor_encode,zd=d.cursor_decode,Bd=d.cursor_kind,Wd=d.__wbg_undomanager_free,Jd=d.undomanager_new,Kd=d.undomanager_undo,qd=d.undomanager_redo,Hd=d.undomanager_canUndo,Yd=d.undomanager_canRedo,Xd=d.undomanager_setMaxUndoSteps,Qd=d.undomanager_setMergeInterval,Gd=d.undomanager_addExcludeOriginPrefix,ec=d.undomanager_checkBinding,tc=d.undomanager_setOnPush,nc=d.undomanager_setOnPop,rc=d.undomanager_clear,oc=d.__wbg_versionvector_free,sc=d.versionvector_new,ac=d.versionvector_parseJSON,ic=d.versionvector_toJSON,_c=d.versionvector_encode,dc=d.versionvector_decode,cc=d.versionvector_get,lc=d.versionvector_compare,uc=d.versionvector_setEnd,pc=d.versionvector_setLast,gc=d.versionvector_remove,hc=d.versionvector_length,fc=d.decodeImportBlobMeta,wc=d.__wbg_loromovablelist_free,bc=d.loromovablelist_parent,mc=d.lorotext_isAttached,yc=d.loromap_isAttached,vc=d.loromovablelist_isAttached,kc=d.__wbindgen_export_0,xc=d.__wbindgen_export_1,Sc=d.__wbindgen_export_2,Cc=d.__wbindgen_export_3,Ac=d.__wbindgen_export_4,Oc=d.__wbindgen_add_to_stack_pointer,Tc=d.__wbindgen_export_5,Ic=d.__wbindgen_export_6,Kt=d.__wbindgen_start;var ko=Object.freeze({__proto__:null,__wbg_awarenesswasm_free:Ms,__wbg_cursor_free:Fd,__wbg_lorocounter_free:xs,__wbg_lorodoc_free:Xs,__wbg_lorolist_free:r_,__wbg_loromap_free:Zi,__wbg_loromovablelist_free:wc,__wbg_lorotext_free:_i,__wbg_lorotree_free:X_,__wbg_lorotreenode_free:G_,__wbg_undomanager_free:Wd,__wbg_versionvector_free:oc,__wbindgen_add_to_stack_pointer:Oc,__wbindgen_export_0:kc,__wbindgen_export_1:xc,__wbindgen_export_2:Sc,__wbindgen_export_3:Cc,__wbindgen_export_4:Ac,__wbindgen_export_5:Tc,__wbindgen_export_6:Ic,__wbindgen_start:Kt,awarenesswasm_apply:js,awarenesswasm_encode:$s,awarenesswasm_encodeAll:Zs,awarenesswasm_getAllStates:Ps,awarenesswasm_getState:Us,awarenesswasm_getTimestamp:Vs,awarenesswasm_isEmpty:Ws,awarenesswasm_length:Bs,awarenesswasm_new:Rs,awarenesswasm_peer:Ls,awarenesswasm_peers:Js,awarenesswasm_removeOutdated:zs,awarenesswasm_setLocalState:Fs,cursor_containerId:Ld,cursor_decode:zd,cursor_encode:Vd,cursor_kind:Bd,cursor_pos:Pd,cursor_side:Ud,decodeFrontiers:Hs,decodeImportBlobMeta:fc,encodeFrontiers:qs,lorocounter_decrement:As,lorocounter_getAttached:Ns,lorocounter_getShallowValue:Ds,lorocounter_increment:Cs,lorocounter_isAttached:Es,lorocounter_new:Ss,lorocounter_parent:Is,lorocounter_subscribe:Ts,lorocounter_value:Os,lorodoc_JSONPath:Ta,lorodoc_attach:sa,lorodoc_changeCount:Xa,lorodoc_checkout:ua,lorodoc_checkoutToLatest:ca,lorodoc_cmpFrontiers:ja,lorodoc_cmpWithFrontiers:Za,lorodoc_commit:fa,lorodoc_configTextStyle:ra,lorodoc_debugHistory:Ya,lorodoc_detach:ia,lorodoc_export:Pa,lorodoc_exportFrom:La,lorodoc_exportJsonUpdates:Ua,lorodoc_exportSnapshot:Fa,lorodoc_fork:_a,lorodoc_forkAt:da,lorodoc_fromSnapshot:oa,lorodoc_frontiers:Ra,lorodoc_frontiersToVV:ri,lorodoc_getAllChanges:Ga,lorodoc_getByPath:si,lorodoc_getChangeAt:ei,lorodoc_getChangeAtLamport:ti,lorodoc_getChangedContainersIn:ii,lorodoc_getContainerById:Sa,lorodoc_getCounter:ka,lorodoc_getCursorPos:ai,lorodoc_getDeepValueWithID:Aa,lorodoc_getList:ya,lorodoc_getMap:ma,lorodoc_getMovableList:va,lorodoc_getOpsInChange:ni,lorodoc_getPathToContainer:Oa,lorodoc_getPendingTxnLength:wa,lorodoc_getShallowValue:Ja,lorodoc_getText:ba,lorodoc_getTree:xa,lorodoc_import:za,lorodoc_importBatch:Wa,lorodoc_importJsonUpdates:Va,lorodoc_importUpdateBatch:Ba,lorodoc_isDetached:aa,lorodoc_isDetachedEditingEnabled:ea,lorodoc_isShallow:Na,lorodoc_new:Qs,lorodoc_opCount:Qa,lorodoc_oplogFrontiers:$a,lorodoc_oplogVersion:Ma,lorodoc_peerId:pa,lorodoc_peerIdStr:ga,lorodoc_setChangeMergeInterval:na,lorodoc_setDetachedEditing:Gs,lorodoc_setNextCommitMessage:Ca,lorodoc_setPeerId:ha,lorodoc_setRecordTimestamp:ta,lorodoc_shallowSinceFrontiers:Da,lorodoc_shallowSinceVV:Ea,lorodoc_subscribe:qa,lorodoc_subscribeLocalUpdates:Ha,lorodoc_toJSON:Ka,lorodoc_travelChangeAncestors:la,lorodoc_version:Ia,lorodoc_vvToFrontiers:oi,lorolist_clear:k_,lorolist_delete:i_,lorolist_get:__,lorolist_getAttached:b_,lorolist_getCursor:m_,lorolist_getIdAt:x_,lorolist_getShallowValue:C_,lorolist_id:d_,lorolist_insert:a_,lorolist_insertContainer:u_,lorolist_isAttached:w_,lorolist_isDeleted:S_,lorolist_kind:s_,lorolist_length:h_,lorolist_new:o_,lorolist_parent:f_,lorolist_pop:v_,lorolist_push:y_,lorolist_pushContainer:p_,lorolist_subscribe:g_,lorolist_toArray:c_,lorolist_toJSON:l_,loromap_clear:Gi,loromap_delete:Pi,loromap_entries:Wi,loromap_get:Ui,loromap_getAttached:Qi,loromap_getLastEditor:e_,loromap_getOrCreateContainer:Vi,loromap_getShallowValue:n_,loromap_id:Ji,loromap_isAttached:yc,loromap_isDeleted:t_,loromap_keys:zi,loromap_kind:Fi,loromap_new:ji,loromap_parent:Xi,loromap_set:Li,loromap_setContainer:qi,loromap_size:Yi,loromap_subscribe:Hi,loromap_toJSON:Ki,loromap_values:Bi,loromovablelist_clear:W_,loromovablelist_delete:I_,loromovablelist_get:E_,loromovablelist_getAttached:F_,loromovablelist_getCreatorAt:J_,loromovablelist_getCursor:L_,loromovablelist_getLastEditorAt:q_,loromovablelist_getLastMoverAt:K_,loromovablelist_getShallowValue:Y_,loromovablelist_id:N_,loromovablelist_insert:T_,loromovablelist_insertContainer:R_,loromovablelist_isAttached:vc,loromovablelist_isDeleted:H_,loromovablelist_kind:O_,loromovablelist_length:j_,loromovablelist_move:P_,loromovablelist_new:A_,loromovablelist_parent:bc,loromovablelist_pop:B_,loromovablelist_push:z_,loromovablelist_pushContainer:$_,loromovablelist_set:U_,loromovablelist_setContainer:V_,loromovablelist_subscribe:Z_,loromovablelist_toArray:D_,loromovablelist_toJSON:M_,lorotext_applyDelta:Ti,lorotext_charAt:fi,lorotext_delete:mi,lorotext_deleteUtf8:yi,lorotext_getAttached:Ei,lorotext_getCursor:Ni,lorotext_getEditorOf:Mi,lorotext_getShallowValue:$i,lorotext_id:Ci,lorotext_insert:gi,lorotext_insertUtf8:bi,lorotext_isAttached:mc,lorotext_isDeleted:Ri,lorotext_iter:li,lorotext_kind:ci,lorotext_length:Ai,lorotext_mark:vi,lorotext_new:di,lorotext_parent:Ii,lorotext_push:Di,lorotext_slice:hi,lorotext_splice:wi,lorotext_subscribe:Oi,lorotext_toDelta:Si,lorotext_toString:xi,lorotext_unmark:ki,lorotext_update:ui,lorotext_updateByLine:pi,lorotree_createNode:wd,lorotree_delete:md,lorotree_disableFractionalIndex:Rd,lorotree_enableFractionalIndex:Md,lorotree_getAttached:Dd,lorotree_getNodeByID:yd,lorotree_getNodes:Cd,lorotree_getShallowValue:jd,lorotree_has:kd,lorotree_id:vd,lorotree_isAttached:Nd,lorotree_isDeleted:Zd,lorotree_isFractionalIndexEnabled:$d,lorotree_isNodeDeleted:xd,lorotree_kind:fd,lorotree_move:bd,lorotree_new:hd,lorotree_nodes:Od,lorotree_parent:Ed,lorotree_roots:Td,lorotree_subscribe:Id,lorotree_toArray:Sd,lorotree_toJSON:Ad,lorotreenode___getClassname:Q_,lorotreenode_children:cd,lorotreenode_createNode:td,lorotreenode_creationId:pd,lorotreenode_creator:gd,lorotreenode_data:id,lorotreenode_fractionalIndex:ad,lorotreenode_getLastMoveId:ud,lorotreenode_id:ed,lorotreenode_index:sd,lorotreenode_isDeleted:ld,lorotreenode_move:nd,lorotreenode_moveAfter:rd,lorotreenode_moveBefore:od,lorotreenode_parent:dd,lorotreenode_toJSON:_d,memory:ks,run:Ks,setDebug:Ys,undomanager_addExcludeOriginPrefix:Gd,undomanager_canRedo:Yd,undomanager_canUndo:Hd,undomanager_checkBinding:ec,undomanager_clear:rc,undomanager_new:Jd,undomanager_redo:qd,undomanager_setMaxUndoSteps:Xd,undomanager_setMergeInterval:Qd,undomanager_setOnPop:nc,undomanager_setOnPush:tc,undomanager_undo:Kd,versionvector_compare:lc,versionvector_decode:dc,versionvector_encode:_c,versionvector_get:cc,versionvector_length:hc,versionvector_new:sc,versionvector_parseJSON:ac,versionvector_remove:gc,versionvector_setEnd:uc,versionvector_setLast:pc,versionvector_toJSON:ic});if(Kt)Wt(ko),Kt();else{const n=await Promise.resolve().then(function(){return ko}),e=new WebAssembly.Instance(n.default,{"./loro_wasm_bg.js":vs});Wt(e.exports)}const Ec=["Map","Text","List","Tree","MovableList","Counter"];function Nc(n){return n.startsWith("cid:")}function xo(n){if(typeof n!="object"||n==null)return!1;const e=Object.getPrototypeOf(n);return e==null||typeof e!="object"||typeof e.kind!="function"?!1:Ec.includes(n.kind())}se.prototype.toJsonWithReplacer=function(n){const e=this,t=(a,_)=>{if(typeof _=="string"&&Nc(_)){const u=e.getContainerById(_);if(u==null)throw new Error(`ContainerID not found: ${_}`);const h=n(a,u);if(h===u){const O=u.getShallowValue();return typeof O=="object"?o(O):O}if(xo(h))throw new Error("Using new container is not allowed in toJsonWithReplacer");return h}const c=n(a,_);if(xo(c))throw new Error("Using new container is not allowed in toJsonWithReplacer");return c},o=a=>{if(Array.isArray(a))return a.map((c,u)=>t(u,c)).filter(c=>c!==void 0);const _={};for(const[c,u]of Object.entries(a)){const h=t(c,u);h!==void 0&&(_[c]=h)}return _},r=this.getShallowValue();return o(r)};var R;(function(n){n.assertEqual=r=>r;function e(r){}n.assertIs=e;function t(r){throw new Error}n.assertNever=t,n.arrayToEnum=r=>{const a={};for(const _ of r)a[_]=_;return a},n.getValidEnumValues=r=>{const a=n.objectKeys(r).filter(c=>typeof r[r[c]]!="number"),_={};for(const c of a)_[c]=r[c];return n.objectValues(_)},n.objectValues=r=>n.objectKeys(r).map(function(a){return r[a]}),n.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const a=[];for(const _ in r)Object.prototype.hasOwnProperty.call(r,_)&&a.push(_);return a},n.find=(r,a)=>{for(const _ of r)if(a(_))return _},n.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function o(r,a=" | "){return r.map(_=>typeof _=="string"?`'${_}'`:_).join(a)}n.joinValues=o,n.jsonStringifyReplacer=(r,a)=>typeof a=="bigint"?a.toString():a})(R||(R={}));var qt;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(qt||(qt={}));const m=R.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),he=n=>{switch(typeof n){case"undefined":return m.undefined;case"string":return m.string;case"number":return isNaN(n)?m.nan:m.number;case"boolean":return m.boolean;case"function":return m.function;case"bigint":return m.bigint;case"symbol":return m.symbol;case"object":return Array.isArray(n)?m.array:n===null?m.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?m.promise:typeof Map<"u"&&n instanceof Map?m.map:typeof Set<"u"&&n instanceof Set?m.set:typeof Date<"u"&&n instanceof Date?m.date:m.object;default:return m.unknown}},g=R.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Dc=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class ee extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},o={_errors:[]},r=a=>{for(const _ of a.issues)if(_.code==="invalid_union")_.unionErrors.map(r);else if(_.code==="invalid_return_type")r(_.returnTypeError);else if(_.code==="invalid_arguments")r(_.argumentsError);else if(_.path.length===0)o._errors.push(t(_));else{let c=o,u=0;for(;u<_.path.length;){const h=_.path[u];u===_.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(t(_))):c[h]=c[h]||{_errors:[]},c=c[h],u++}}};return r(this),o}static assert(e){if(!(e instanceof ee))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,R.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},o=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):o.push(e(r));return{formErrors:o,fieldErrors:t}}get formErrors(){return this.flatten()}}ee.create=n=>new ee(n);const Pe=(n,e)=>{let t;switch(n.code){case g.invalid_type:n.received===m.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case g.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,R.jsonStringifyReplacer)}`;break;case g.unrecognized_keys:t=`Unrecognized key(s) in object: ${R.joinValues(n.keys,", ")}`;break;case g.invalid_union:t="Invalid input";break;case g.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${R.joinValues(n.options)}`;break;case g.invalid_enum_value:t=`Invalid enum value. Expected ${R.joinValues(n.options)}, received '${n.received}'`;break;case g.invalid_arguments:t="Invalid function arguments";break;case g.invalid_return_type:t="Invalid function return type";break;case g.invalid_date:t="Invalid date";break;case g.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:R.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case g.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case g.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case g.custom:t="Invalid input";break;case g.invalid_intersection_types:t="Intersection results could not be merged";break;case g.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case g.not_finite:t="Number must be finite";break;default:t=e.defaultError,R.assertNever(n)}return{message:t}};let So=Pe;function Mc(n){So=n}function Et(){return So}const Nt=n=>{const{data:e,path:t,errorMaps:o,issueData:r}=n,a=[...t,...r.path||[]],_={...r,path:a};if(r.message!==void 0)return{...r,path:a,message:r.message};let c="";const u=o.filter(h=>!!h).slice().reverse();for(const h of u)c=h(_,{data:e,defaultError:c}).message;return{...r,path:a,message:c}},Rc=[];function w(n,e){const t=Et(),o=Nt({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Pe?void 0:Pe].filter(r=>!!r)});n.common.issues.push(o)}class K{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const o=[];for(const r of t){if(r.status==="aborted")return A;r.status==="dirty"&&e.dirty(),o.push(r.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,t){const o=[];for(const r of t){const a=await r.key,_=await r.value;o.push({key:a,value:_})}return K.mergeObjectSync(e,o)}static mergeObjectSync(e,t){const o={};for(const r of t){const{key:a,value:_}=r;if(a.status==="aborted"||_.status==="aborted")return A;a.status==="dirty"&&e.dirty(),_.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof _.value<"u"||r.alwaysSet)&&(o[a.value]=_.value)}return{status:e.value,value:o}}}const A=Object.freeze({status:"aborted"}),Dt=n=>({status:"dirty",value:n}),H=n=>({status:"valid",value:n}),Ht=n=>n.status==="aborted",Yt=n=>n.status==="dirty",Ee=n=>n.status==="valid",nt=n=>typeof Promise<"u"&&n instanceof Promise;function Mt(n,e,t,o){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function Co(n,e,t,o,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var k;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e?.message})(k||(k={}));var rt,ot;class ce{constructor(e,t,o,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=o,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ao=(n,e)=>{if(Ee(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ee(n.common.issues);return this._error=t,this._error}}};function E(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:o,description:r}=n;if(e&&(t||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(a,_)=>{var c,u;const{message:h}=n;return a.code==="invalid_enum_value"?{message:h??_.defaultError}:typeof _.data>"u"?{message:(c=h??o)!==null&&c!==void 0?c:_.defaultError}:a.code!=="invalid_type"?{message:_.defaultError}:{message:(u=h??t)!==null&&u!==void 0?u:_.defaultError}},description:r}}class M{get description(){return this._def.description}_getType(e){return he(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:he(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new K,ctx:{common:e.parent.common,data:e.data,parsedType:he(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(nt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const o=this.safeParse(e,t);if(o.success)return o.data;throw o.error}safeParse(e,t){var o;const r={common:{issues:[],async:(o=t?.async)!==null&&o!==void 0?o:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:he(e)},a=this._parseSync({data:e,path:r.path,parent:r});return Ao(r,a)}"~validate"(e){var t,o;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:he(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:r});return Ee(a)?{value:a.value}:{issues:r.common.issues}}catch(a){!((o=(t=a?.message)===null||t===void 0?void 0:t.toLowerCase())===null||o===void 0)&&o.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(a=>Ee(a)?{value:a.value}:{issues:r.common.issues})}async parseAsync(e,t){const o=await this.safeParseAsync(e,t);if(o.success)return o.data;throw o.error}async safeParseAsync(e,t){const o={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:he(e)},r=this._parse({data:e,path:o.path,parent:o}),a=await(nt(r)?r:Promise.resolve(r));return Ao(o,a)}refine(e,t){const o=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,a)=>{const _=e(r),c=()=>a.addIssue({code:g.custom,...o(r)});return typeof Promise<"u"&&_ instanceof Promise?_.then(u=>u?!0:(c(),!1)):_?!0:(c(),!1)})}refinement(e,t){return this._refinement((o,r)=>e(o)?!0:(r.addIssue(typeof t=="function"?t(o,r):t),!1))}_refinement(e){return new _e({schema:this,typeName:C.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ue.create(this,this._def)}nullable(){return Se.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ie.create(this)}promise(){return Be.create(this,this._def)}or(e){return _t.create([this,e],this._def)}and(e){return dt.create(this,e,this._def)}transform(e){return new _e({...E(this._def),schema:this,typeName:C.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new gt({...E(this._def),innerType:this,defaultValue:t,typeName:C.ZodDefault})}brand(){return new Gt({typeName:C.ZodBranded,type:this,...E(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new ht({...E(this._def),innerType:this,catchValue:t,typeName:C.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return ft.create(this,e)}readonly(){return wt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $c=/^c[^\s-]{8,}$/i,Zc=/^[0-9a-z]+$/,jc=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Fc=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Lc=/^[a-z0-9_-]{21}$/i,Pc=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Uc=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Vc=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,zc="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Xt;const Bc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Wc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Jc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Kc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qc=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Hc=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Oo="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Yc=new RegExp(`^${Oo}$`);function To(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Xc(n){return new RegExp(`^${To(n)}$`)}function Io(n){let e=`${Oo}T${To(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Qc(n,e){return!!((e==="v4"||!e)&&Bc.test(n)||(e==="v6"||!e)&&Jc.test(n))}function Gc(n,e){if(!Pc.test(n))return!1;try{const[t]=n.split("."),o=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(o));return!(typeof r!="object"||r===null||!r.typ||!r.alg||e&&r.alg!==e)}catch{return!1}}function el(n,e){return!!((e==="v4"||!e)&&Wc.test(n)||(e==="v6"||!e)&&Kc.test(n))}class ae extends M{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==m.string){const r=this._getOrReturnCtx(e);return w(r,{code:g.invalid_type,expected:m.string,received:r.parsedType}),A}const t=new K;let o;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(o=this._getOrReturnCtx(e,o),w(o,{code:g.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if(r.kind==="max")e.data.length>r.value&&(o=this._getOrReturnCtx(e,o),w(o,{code:g.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if(r.kind==="length"){const a=e.data.length>r.value,_=e.data.length<r.value;(a||_)&&(o=this._getOrReturnCtx(e,o),a?w(o,{code:g.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):_&&w(o,{code:g.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if(r.kind==="email")Vc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"email",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="emoji")Xt||(Xt=new RegExp(zc,"u")),Xt.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"emoji",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="uuid")Fc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"uuid",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="nanoid")Lc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"nanoid",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="cuid")$c.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"cuid",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="cuid2")Zc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"cuid2",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="ulid")jc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"ulid",code:g.invalid_string,message:r.message}),t.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),w(o,{validation:"url",code:g.invalid_string,message:r.message}),t.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"regex",code:g.invalid_string,message:r.message}),t.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(o=this._getOrReturnCtx(e,o),w(o,{code:g.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(o=this._getOrReturnCtx(e,o),w(o,{code:g.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(o=this._getOrReturnCtx(e,o),w(o,{code:g.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty()):r.kind==="datetime"?Io(r).test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{code:g.invalid_string,validation:"datetime",message:r.message}),t.dirty()):r.kind==="date"?Yc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{code:g.invalid_string,validation:"date",message:r.message}),t.dirty()):r.kind==="time"?Xc(r).test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{code:g.invalid_string,validation:"time",message:r.message}),t.dirty()):r.kind==="duration"?Uc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"duration",code:g.invalid_string,message:r.message}),t.dirty()):r.kind==="ip"?Qc(e.data,r.version)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"ip",code:g.invalid_string,message:r.message}),t.dirty()):r.kind==="jwt"?Gc(e.data,r.alg)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"jwt",code:g.invalid_string,message:r.message}),t.dirty()):r.kind==="cidr"?el(e.data,r.version)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"cidr",code:g.invalid_string,message:r.message}),t.dirty()):r.kind==="base64"?qc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"base64",code:g.invalid_string,message:r.message}),t.dirty()):r.kind==="base64url"?Hc.test(e.data)||(o=this._getOrReturnCtx(e,o),w(o,{validation:"base64url",code:g.invalid_string,message:r.message}),t.dirty()):R.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,o){return this.refinement(r=>e.test(r),{validation:t,code:g.invalid_string,...k.errToObj(o)})}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...k.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...k.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...k.errToObj(e)})}datetime(e){var t,o;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(o=e?.local)!==null&&o!==void 0?o:!1,...k.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...k.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...k.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...k.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...k.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...k.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...k.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...k.errToObj(t)})}nonempty(e){return this.min(1,k.errToObj(e))}trim(){return new ae({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ae({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ae({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ae.create=n=>{var e;return new ae({checks:[],typeName:C.ZodString,coerce:(e=n?.coerce)!==null&&e!==void 0?e:!1,...E(n)})};function tl(n,e){const t=(n.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,r=t>o?t:o,a=parseInt(n.toFixed(r).replace(".","")),_=parseInt(e.toFixed(r).replace(".",""));return a%_/Math.pow(10,r)}class ye extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==m.number){const r=this._getOrReturnCtx(e);return w(r,{code:g.invalid_type,expected:m.number,received:r.parsedType}),A}let t;const o=new K;for(const r of this._def.checks)r.kind==="int"?R.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),w(t,{code:g.invalid_type,expected:"integer",received:"float",message:r.message}),o.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),w(t,{code:g.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),o.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),w(t,{code:g.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),o.dirty()):r.kind==="multipleOf"?tl(e.data,r.value)!==0&&(t=this._getOrReturnCtx(e,t),w(t,{code:g.not_multiple_of,multipleOf:r.value,message:r.message}),o.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),w(t,{code:g.not_finite,message:r.message}),o.dirty()):R.assertNever(r);return{status:o.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,k.toString(t))}gt(e,t){return this.setLimit("min",e,!1,k.toString(t))}lte(e,t){return this.setLimit("max",e,!0,k.toString(t))}lt(e,t){return this.setLimit("max",e,!1,k.toString(t))}setLimit(e,t,o,r){return new ye({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:o,message:k.toString(r)}]})}_addCheck(e){return new ye({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&R.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(t===null||o.value>t)&&(t=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ye.create=n=>new ye({checks:[],typeName:C.ZodNumber,coerce:n?.coerce||!1,...E(n)});class ve extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==m.bigint)return this._getInvalidInput(e);let t;const o=new K;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),w(t,{code:g.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),o.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),w(t,{code:g.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),o.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),w(t,{code:g.not_multiple_of,multipleOf:r.value,message:r.message}),o.dirty()):R.assertNever(r);return{status:o.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.bigint,received:t.parsedType}),A}gte(e,t){return this.setLimit("min",e,!0,k.toString(t))}gt(e,t){return this.setLimit("min",e,!1,k.toString(t))}lte(e,t){return this.setLimit("max",e,!0,k.toString(t))}lt(e,t){return this.setLimit("max",e,!1,k.toString(t))}setLimit(e,t,o,r){return new ve({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:o,message:k.toString(r)}]})}_addCheck(e){return new ve({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ve.create=n=>{var e;return new ve({checks:[],typeName:C.ZodBigInt,coerce:(e=n?.coerce)!==null&&e!==void 0?e:!1,...E(n)})};class st extends M{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==m.boolean){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.boolean,received:t.parsedType}),A}return H(e.data)}}st.create=n=>new st({typeName:C.ZodBoolean,coerce:n?.coerce||!1,...E(n)});class Ne extends M{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==m.date){const r=this._getOrReturnCtx(e);return w(r,{code:g.invalid_type,expected:m.date,received:r.parsedType}),A}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return w(r,{code:g.invalid_date}),A}const t=new K;let o;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(o=this._getOrReturnCtx(e,o),w(o,{code:g.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(o=this._getOrReturnCtx(e,o),w(o,{code:g.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):R.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ne({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ne.create=n=>new Ne({checks:[],coerce:n?.coerce||!1,typeName:C.ZodDate,...E(n)});class Rt extends M{_parse(e){if(this._getType(e)!==m.symbol){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.symbol,received:t.parsedType}),A}return H(e.data)}}Rt.create=n=>new Rt({typeName:C.ZodSymbol,...E(n)});class at extends M{_parse(e){if(this._getType(e)!==m.undefined){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.undefined,received:t.parsedType}),A}return H(e.data)}}at.create=n=>new at({typeName:C.ZodUndefined,...E(n)});class it extends M{_parse(e){if(this._getType(e)!==m.null){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.null,received:t.parsedType}),A}return H(e.data)}}it.create=n=>new it({typeName:C.ZodNull,...E(n)});class Ue extends M{constructor(){super(...arguments),this._any=!0}_parse(e){return H(e.data)}}Ue.create=n=>new Ue({typeName:C.ZodAny,...E(n)});class De extends M{constructor(){super(...arguments),this._unknown=!0}_parse(e){return H(e.data)}}De.create=n=>new De({typeName:C.ZodUnknown,...E(n)});class fe extends M{_parse(e){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.never,received:t.parsedType}),A}}fe.create=n=>new fe({typeName:C.ZodNever,...E(n)});class $t extends M{_parse(e){if(this._getType(e)!==m.undefined){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.void,received:t.parsedType}),A}return H(e.data)}}$t.create=n=>new $t({typeName:C.ZodVoid,...E(n)});class ie extends M{_parse(e){const{ctx:t,status:o}=this._processInputParams(e),r=this._def;if(t.parsedType!==m.array)return w(t,{code:g.invalid_type,expected:m.array,received:t.parsedType}),A;if(r.exactLength!==null){const _=t.data.length>r.exactLength.value,c=t.data.length<r.exactLength.value;(_||c)&&(w(t,{code:_?g.too_big:g.too_small,minimum:c?r.exactLength.value:void 0,maximum:_?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),o.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(w(t,{code:g.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),o.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(w(t,{code:g.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),o.dirty()),t.common.async)return Promise.all([...t.data].map((_,c)=>r.type._parseAsync(new ce(t,_,t.path,c)))).then(_=>K.mergeArray(o,_));const a=[...t.data].map((_,c)=>r.type._parseSync(new ce(t,_,t.path,c)));return K.mergeArray(o,a)}get element(){return this._def.type}min(e,t){return new ie({...this._def,minLength:{value:e,message:k.toString(t)}})}max(e,t){return new ie({...this._def,maxLength:{value:e,message:k.toString(t)}})}length(e,t){return new ie({...this._def,exactLength:{value:e,message:k.toString(t)}})}nonempty(e){return this.min(1,e)}}ie.create=(n,e)=>new ie({type:n,minLength:null,maxLength:null,exactLength:null,typeName:C.ZodArray,...E(e)});function Ve(n){if(n instanceof P){const e={};for(const t in n.shape){const o=n.shape[t];e[t]=ue.create(Ve(o))}return new P({...n._def,shape:()=>e})}else return n instanceof ie?new ie({...n._def,type:Ve(n.element)}):n instanceof ue?ue.create(Ve(n.unwrap())):n instanceof Se?Se.create(Ve(n.unwrap())):n instanceof le?le.create(n.items.map(e=>Ve(e))):n}class P extends M{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=R.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==m.object){const u=this._getOrReturnCtx(e);return w(u,{code:g.invalid_type,expected:m.object,received:u.parsedType}),A}const{status:t,ctx:o}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),_=[];if(!(this._def.catchall instanceof fe&&this._def.unknownKeys==="strip"))for(const u in o.data)a.includes(u)||_.push(u);const c=[];for(const u of a){const h=r[u],O=o.data[u];c.push({key:{status:"valid",value:u},value:h._parse(new ce(o,O,o.path,u)),alwaysSet:u in o.data})}if(this._def.catchall instanceof fe){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of _)c.push({key:{status:"valid",value:h},value:{status:"valid",value:o.data[h]}});else if(u==="strict")_.length>0&&(w(o,{code:g.unrecognized_keys,keys:_}),t.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of _){const O=o.data[h];c.push({key:{status:"valid",value:h},value:u._parse(new ce(o,O,o.path,h)),alwaysSet:h in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const u=[];for(const h of c){const O=await h.key,$=await h.value;u.push({key:O,value:$,alwaysSet:h.alwaysSet})}return u}).then(u=>K.mergeObjectSync(t,u)):K.mergeObjectSync(t,c)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new P({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,o)=>{var r,a,_,c;const u=(_=(a=(r=this._def).errorMap)===null||a===void 0?void 0:a.call(r,t,o).message)!==null&&_!==void 0?_:o.defaultError;return t.code==="unrecognized_keys"?{message:(c=k.errToObj(e).message)!==null&&c!==void 0?c:u}:{message:u}}}:{}})}strip(){return new P({...this._def,unknownKeys:"strip"})}passthrough(){return new P({...this._def,unknownKeys:"passthrough"})}extend(e){return new P({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new P({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:C.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new P({...this._def,catchall:e})}pick(e){const t={};return R.objectKeys(e).forEach(o=>{e[o]&&this.shape[o]&&(t[o]=this.shape[o])}),new P({...this._def,shape:()=>t})}omit(e){const t={};return R.objectKeys(this.shape).forEach(o=>{e[o]||(t[o]=this.shape[o])}),new P({...this._def,shape:()=>t})}deepPartial(){return Ve(this)}partial(e){const t={};return R.objectKeys(this.shape).forEach(o=>{const r=this.shape[o];e&&!e[o]?t[o]=r:t[o]=r.optional()}),new P({...this._def,shape:()=>t})}required(e){const t={};return R.objectKeys(this.shape).forEach(o=>{if(e&&!e[o])t[o]=this.shape[o];else{let r=this.shape[o];for(;r instanceof ue;)r=r._def.innerType;t[o]=r}}),new P({...this._def,shape:()=>t})}keyof(){return Eo(R.objectKeys(this.shape))}}P.create=(n,e)=>new P({shape:()=>n,unknownKeys:"strip",catchall:fe.create(),typeName:C.ZodObject,...E(e)}),P.strictCreate=(n,e)=>new P({shape:()=>n,unknownKeys:"strict",catchall:fe.create(),typeName:C.ZodObject,...E(e)}),P.lazycreate=(n,e)=>new P({shape:n,unknownKeys:"strip",catchall:fe.create(),typeName:C.ZodObject,...E(e)});class _t extends M{_parse(e){const{ctx:t}=this._processInputParams(e),o=this._def.options;function r(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const _=a.map(c=>new ee(c.ctx.common.issues));return w(t,{code:g.invalid_union,unionErrors:_}),A}if(t.common.async)return Promise.all(o.map(async a=>{const _={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:_}),ctx:_}})).then(r);{let a;const _=[];for(const u of o){const h={...t,common:{...t.common,issues:[]},parent:null},O=u._parseSync({data:t.data,path:t.path,parent:h});if(O.status==="valid")return O;O.status==="dirty"&&!a&&(a={result:O,ctx:h}),h.common.issues.length&&_.push(h.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const c=_.map(u=>new ee(u));return w(t,{code:g.invalid_union,unionErrors:c}),A}}get options(){return this._def.options}}_t.create=(n,e)=>new _t({options:n,typeName:C.ZodUnion,...E(e)});const ke=n=>n instanceof lt?ke(n.schema):n instanceof _e?ke(n.innerType()):n instanceof ut?[n.value]:n instanceof xe?n.options:n instanceof pt?R.objectValues(n.enum):n instanceof gt?ke(n._def.innerType):n instanceof at?[void 0]:n instanceof it?[null]:n instanceof ue?[void 0,...ke(n.unwrap())]:n instanceof Se?[null,...ke(n.unwrap())]:n instanceof Gt||n instanceof wt?ke(n.unwrap()):n instanceof ht?ke(n._def.innerType):[];class Zt extends M{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.object)return w(t,{code:g.invalid_type,expected:m.object,received:t.parsedType}),A;const o=this.discriminator,r=t.data[o],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(w(t,{code:g.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),A)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,o){const r=new Map;for(const a of t){const _=ke(a.shape[e]);if(!_.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of _){if(r.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);r.set(c,a)}}return new Zt({typeName:C.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...E(o)})}}function Qt(n,e){const t=he(n),o=he(e);if(n===e)return{valid:!0,data:n};if(t===m.object&&o===m.object){const r=R.objectKeys(e),a=R.objectKeys(n).filter(c=>r.indexOf(c)!==-1),_={...n,...e};for(const c of a){const u=Qt(n[c],e[c]);if(!u.valid)return{valid:!1};_[c]=u.data}return{valid:!0,data:_}}else if(t===m.array&&o===m.array){if(n.length!==e.length)return{valid:!1};const r=[];for(let a=0;a<n.length;a++){const _=n[a],c=e[a],u=Qt(_,c);if(!u.valid)return{valid:!1};r.push(u.data)}return{valid:!0,data:r}}else return t===m.date&&o===m.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class dt extends M{_parse(e){const{status:t,ctx:o}=this._processInputParams(e),r=(a,_)=>{if(Ht(a)||Ht(_))return A;const c=Qt(a.value,_.value);return c.valid?((Yt(a)||Yt(_))&&t.dirty(),{status:t.value,value:c.data}):(w(o,{code:g.invalid_intersection_types}),A)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([a,_])=>r(a,_)):r(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}dt.create=(n,e,t)=>new dt({left:n,right:e,typeName:C.ZodIntersection,...E(t)});class le extends M{_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.parsedType!==m.array)return w(o,{code:g.invalid_type,expected:m.array,received:o.parsedType}),A;if(o.data.length<this._def.items.length)return w(o,{code:g.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),A;!this._def.rest&&o.data.length>this._def.items.length&&(w(o,{code:g.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...o.data].map((a,_)=>{const c=this._def.items[_]||this._def.rest;return c?c._parse(new ce(o,a,o.path,_)):null}).filter(a=>!!a);return o.common.async?Promise.all(r).then(a=>K.mergeArray(t,a)):K.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new le({...this._def,rest:e})}}le.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new le({items:n,typeName:C.ZodTuple,rest:null,...E(e)})};class ct extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.parsedType!==m.object)return w(o,{code:g.invalid_type,expected:m.object,received:o.parsedType}),A;const r=[],a=this._def.keyType,_=this._def.valueType;for(const c in o.data)r.push({key:a._parse(new ce(o,c,o.path,c)),value:_._parse(new ce(o,o.data[c],o.path,c)),alwaysSet:c in o.data});return o.common.async?K.mergeObjectAsync(t,r):K.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,o){return t instanceof M?new ct({keyType:e,valueType:t,typeName:C.ZodRecord,...E(o)}):new ct({keyType:ae.create(),valueType:e,typeName:C.ZodRecord,...E(t)})}}class jt extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.parsedType!==m.map)return w(o,{code:g.invalid_type,expected:m.map,received:o.parsedType}),A;const r=this._def.keyType,a=this._def.valueType,_=[...o.data.entries()].map(([c,u],h)=>({key:r._parse(new ce(o,c,o.path,[h,"key"])),value:a._parse(new ce(o,u,o.path,[h,"value"]))}));if(o.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of _){const h=await u.key,O=await u.value;if(h.status==="aborted"||O.status==="aborted")return A;(h.status==="dirty"||O.status==="dirty")&&t.dirty(),c.set(h.value,O.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const u of _){const h=u.key,O=u.value;if(h.status==="aborted"||O.status==="aborted")return A;(h.status==="dirty"||O.status==="dirty")&&t.dirty(),c.set(h.value,O.value)}return{status:t.value,value:c}}}}jt.create=(n,e,t)=>new jt({valueType:e,keyType:n,typeName:C.ZodMap,...E(t)});class Me extends M{_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.parsedType!==m.set)return w(o,{code:g.invalid_type,expected:m.set,received:o.parsedType}),A;const r=this._def;r.minSize!==null&&o.data.size<r.minSize.value&&(w(o,{code:g.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&o.data.size>r.maxSize.value&&(w(o,{code:g.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function _(u){const h=new Set;for(const O of u){if(O.status==="aborted")return A;O.status==="dirty"&&t.dirty(),h.add(O.value)}return{status:t.value,value:h}}const c=[...o.data.values()].map((u,h)=>a._parse(new ce(o,u,o.path,h)));return o.common.async?Promise.all(c).then(u=>_(u)):_(c)}min(e,t){return new Me({...this._def,minSize:{value:e,message:k.toString(t)}})}max(e,t){return new Me({...this._def,maxSize:{value:e,message:k.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Me.create=(n,e)=>new Me({valueType:n,minSize:null,maxSize:null,typeName:C.ZodSet,...E(e)});class ze extends M{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.function)return w(t,{code:g.invalid_type,expected:m.function,received:t.parsedType}),A;function o(c,u){return Nt({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Et(),Pe].filter(h=>!!h),issueData:{code:g.invalid_arguments,argumentsError:u}})}function r(c,u){return Nt({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Et(),Pe].filter(h=>!!h),issueData:{code:g.invalid_return_type,returnTypeError:u}})}const a={errorMap:t.common.contextualErrorMap},_=t.data;if(this._def.returns instanceof Be){const c=this;return H(async function(...u){const h=new ee([]),O=await c._def.args.parseAsync(u,a).catch(ne=>{throw h.addIssue(o(u,ne)),h}),$=await Reflect.apply(_,this,O);return await c._def.returns._def.type.parseAsync($,a).catch(ne=>{throw h.addIssue(r($,ne)),h})})}else{const c=this;return H(function(...u){const h=c._def.args.safeParse(u,a);if(!h.success)throw new ee([o(u,h.error)]);const O=Reflect.apply(_,this,h.data),$=c._def.returns.safeParse(O,a);if(!$.success)throw new ee([r(O,$.error)]);return $.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ze({...this._def,args:le.create(e).rest(De.create())})}returns(e){return new ze({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,o){return new ze({args:e||le.create([]).rest(De.create()),returns:t||De.create(),typeName:C.ZodFunction,...E(o)})}}class lt extends M{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}lt.create=(n,e)=>new lt({getter:n,typeName:C.ZodLazy,...E(e)});class ut extends M{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return w(t,{received:t.data,code:g.invalid_literal,expected:this._def.value}),A}return{status:"valid",value:e.data}}get value(){return this._def.value}}ut.create=(n,e)=>new ut({value:n,typeName:C.ZodLiteral,...E(e)});function Eo(n,e){return new xe({values:n,typeName:C.ZodEnum,...E(e)})}class xe extends M{constructor(){super(...arguments),rt.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),o=this._def.values;return w(t,{expected:R.joinValues(o),received:t.parsedType,code:g.invalid_type}),A}if(Mt(this,rt)||Co(this,rt,new Set(this._def.values)),!Mt(this,rt).has(e.data)){const t=this._getOrReturnCtx(e),o=this._def.values;return w(t,{received:t.data,code:g.invalid_enum_value,options:o}),A}return H(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return xe.create(e,{...this._def,...t})}exclude(e,t=this._def){return xe.create(this.options.filter(o=>!e.includes(o)),{...this._def,...t})}}rt=new WeakMap,xe.create=Eo;class pt extends M{constructor(){super(...arguments),ot.set(this,void 0)}_parse(e){const t=R.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==m.string&&o.parsedType!==m.number){const r=R.objectValues(t);return w(o,{expected:R.joinValues(r),received:o.parsedType,code:g.invalid_type}),A}if(Mt(this,ot)||Co(this,ot,new Set(R.getValidEnumValues(this._def.values))),!Mt(this,ot).has(e.data)){const r=R.objectValues(t);return w(o,{received:o.data,code:g.invalid_enum_value,options:r}),A}return H(e.data)}get enum(){return this._def.values}}ot=new WeakMap,pt.create=(n,e)=>new pt({values:n,typeName:C.ZodNativeEnum,...E(e)});class Be extends M{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.promise&&t.common.async===!1)return w(t,{code:g.invalid_type,expected:m.promise,received:t.parsedType}),A;const o=t.parsedType===m.promise?t.data:Promise.resolve(t.data);return H(o.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Be.create=(n,e)=>new Be({type:n,typeName:C.ZodPromise,...E(e)});class _e extends M{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===C.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:o}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:_=>{w(o,_),_.fatal?t.abort():t.dirty()},get path(){return o.path}};if(a.addIssue=a.addIssue.bind(a),r.type==="preprocess"){const _=r.transform(o.data,a);if(o.common.async)return Promise.resolve(_).then(async c=>{if(t.value==="aborted")return A;const u=await this._def.schema._parseAsync({data:c,path:o.path,parent:o});return u.status==="aborted"?A:u.status==="dirty"||t.value==="dirty"?Dt(u.value):u});{if(t.value==="aborted")return A;const c=this._def.schema._parseSync({data:_,path:o.path,parent:o});return c.status==="aborted"?A:c.status==="dirty"||t.value==="dirty"?Dt(c.value):c}}if(r.type==="refinement"){const _=c=>{const u=r.refinement(c,a);if(o.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(o.common.async===!1){const c=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return c.status==="aborted"?A:(c.status==="dirty"&&t.dirty(),_(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(c=>c.status==="aborted"?A:(c.status==="dirty"&&t.dirty(),_(c.value).then(()=>({status:t.value,value:c.value}))))}if(r.type==="transform")if(o.common.async===!1){const _=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!Ee(_))return _;const c=r.transform(_.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(_=>Ee(_)?Promise.resolve(r.transform(_.value,a)).then(c=>({status:t.value,value:c})):_);R.assertNever(r)}}_e.create=(n,e,t)=>new _e({schema:n,typeName:C.ZodEffects,effect:e,...E(t)}),_e.createWithPreprocess=(n,e,t)=>new _e({schema:e,effect:{type:"preprocess",transform:n},typeName:C.ZodEffects,...E(t)});class ue extends M{_parse(e){return this._getType(e)===m.undefined?H(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ue.create=(n,e)=>new ue({innerType:n,typeName:C.ZodOptional,...E(e)});class Se extends M{_parse(e){return this._getType(e)===m.null?H(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Se.create=(n,e)=>new Se({innerType:n,typeName:C.ZodNullable,...E(e)});class gt extends M{_parse(e){const{ctx:t}=this._processInputParams(e);let o=t.data;return t.parsedType===m.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}gt.create=(n,e)=>new gt({innerType:n,typeName:C.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...E(e)});class ht extends M{_parse(e){const{ctx:t}=this._processInputParams(e),o={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return nt(r)?r.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ee(o.common.issues)},input:o.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new ee(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}ht.create=(n,e)=>new ht({innerType:n,typeName:C.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...E(e)});class Ft extends M{_parse(e){if(this._getType(e)!==m.nan){const t=this._getOrReturnCtx(e);return w(t,{code:g.invalid_type,expected:m.nan,received:t.parsedType}),A}return{status:"valid",value:e.data}}}Ft.create=n=>new Ft({typeName:C.ZodNaN,...E(n)});const nl=Symbol("zod_brand");class Gt extends M{_parse(e){const{ctx:t}=this._processInputParams(e),o=t.data;return this._def.type._parse({data:o,path:t.path,parent:t})}unwrap(){return this._def.type}}class ft extends M{_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return r.status==="aborted"?A:r.status==="dirty"?(t.dirty(),Dt(r.value)):this._def.out._parseAsync({data:r.value,path:o.path,parent:o})})();{const r=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return r.status==="aborted"?A:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:o.path,parent:o})}}static create(e,t){return new ft({in:e,out:t,typeName:C.ZodPipeline})}}class wt extends M{_parse(e){const t=this._def.innerType._parse(e),o=r=>(Ee(r)&&(r.value=Object.freeze(r.value)),r);return nt(t)?t.then(r=>o(r)):o(t)}unwrap(){return this._def.innerType}}wt.create=(n,e)=>new wt({innerType:n,typeName:C.ZodReadonly,...E(e)});function No(n,e={},t){return n?Ue.create().superRefine((o,r)=>{var a,_;if(!n(o)){const c=typeof e=="function"?e(o):typeof e=="string"?{message:e}:e,u=(_=(a=c.fatal)!==null&&a!==void 0?a:t)!==null&&_!==void 0?_:!0,h=typeof c=="string"?{message:c}:c;r.addIssue({code:"custom",...h,fatal:u})}}):Ue.create()}const rl={object:P.lazycreate};var C;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(C||(C={}));const ol=(n,e={message:`Input not instance of ${n.name}`})=>No(t=>t instanceof n,e),Do=ae.create,Mo=ye.create,sl=Ft.create,al=ve.create,Ro=st.create,il=Ne.create,_l=Rt.create,dl=at.create,cl=it.create,ll=Ue.create,ul=De.create,pl=fe.create,gl=$t.create,hl=ie.create,fl=P.create,wl=P.strictCreate,bl=_t.create,ml=Zt.create,yl=dt.create,vl=le.create,kl=ct.create,xl=jt.create,Sl=Me.create,Cl=ze.create,Al=lt.create,Ol=ut.create,Tl=xe.create,Il=pt.create,El=Be.create,$o=_e.create,Nl=ue.create,Dl=Se.create,Ml=_e.createWithPreprocess,Rl=ft.create;var S=Object.freeze({__proto__:null,defaultErrorMap:Pe,setErrorMap:Mc,getErrorMap:Et,makeIssue:Nt,EMPTY_PATH:Rc,addIssueToContext:w,ParseStatus:K,INVALID:A,DIRTY:Dt,OK:H,isAborted:Ht,isDirty:Yt,isValid:Ee,isAsync:nt,get util(){return R},get objectUtil(){return qt},ZodParsedType:m,getParsedType:he,ZodType:M,datetimeRegex:Io,ZodString:ae,ZodNumber:ye,ZodBigInt:ve,ZodBoolean:st,ZodDate:Ne,ZodSymbol:Rt,ZodUndefined:at,ZodNull:it,ZodAny:Ue,ZodUnknown:De,ZodNever:fe,ZodVoid:$t,ZodArray:ie,ZodObject:P,ZodUnion:_t,ZodDiscriminatedUnion:Zt,ZodIntersection:dt,ZodTuple:le,ZodRecord:ct,ZodMap:jt,ZodSet:Me,ZodFunction:ze,ZodLazy:lt,ZodLiteral:ut,ZodEnum:xe,ZodNativeEnum:pt,ZodPromise:Be,ZodEffects:_e,ZodTransformer:_e,ZodOptional:ue,ZodNullable:Se,ZodDefault:gt,ZodCatch:ht,ZodNaN:Ft,BRAND:nl,ZodBranded:Gt,ZodPipeline:ft,ZodReadonly:wt,custom:No,Schema:M,ZodSchema:M,late:rl,get ZodFirstPartyTypeKind(){return C},coerce:{string:n=>ae.create({...n,coerce:!0}),number:n=>ye.create({...n,coerce:!0}),boolean:n=>st.create({...n,coerce:!0}),bigint:n=>ve.create({...n,coerce:!0}),date:n=>Ne.create({...n,coerce:!0})},any:ll,array:hl,bigint:al,boolean:Ro,date:il,discriminatedUnion:ml,effect:$o,enum:Tl,function:Cl,instanceof:ol,intersection:yl,lazy:Al,literal:Ol,map:xl,nan:sl,nativeEnum:Il,never:pl,null:cl,nullable:Dl,number:Mo,object:fl,oboolean:()=>Ro().optional(),onumber:()=>Mo().optional(),optional:Nl,ostring:()=>Do().optional(),pipeline:Rl,preprocess:Ml,promise:El,record:kl,set:Sl,strictObject:wl,string:Do,symbol:_l,transformer:$o,tuple:vl,undefined:dl,union:bl,unknown:ul,void:gl,NEVER:A,ZodIssueCode:g,quotelessJson:Dc,ZodError:ee});const We={TEXT:0,IMAGE:1,CODE:2,MATH:3,QUERY:4,CAROUSEL:5},Zo={SUCCESS:0,INVALID_REQUEST:1,PASSWORD_INCORRECT:2,EXCEED_MAX_ATTEMPTS:3,NO_AUTHORIZATION:4,UNKNOWN_ERROR:5,TARGET_NOT_FOUND:6,INVALID_RESPONSE:7,NO_AXIOS:8,FILE_EXISTS:9,DIR_NOT_FOUND:10,TOKEN_EXPIRED:11,PATH_NOT_FOUND:12,PATH_EXISTS_AND_NOT_EMPTY:13,PATH_CANNOT_ACCESS:14},$l=Object.fromEntries(Object.entries(Zo).map(([n,e])=>[e,n]));({...Zo,...$l});const Zl="blockInfo",jl="blockData_",Lt="data",Fl=S.tuple([S.literal(We.TEXT),S.any()]),jo=S.enum(["blend","circle","invert","invertW","outline","blendLuminosity"]),Ll=S.tuple([S.literal(We.IMAGE),S.string(),S.enum(["left","center"]),S.string().nullable(),S.number().nullable(),S.array(jo).nullable()]);S.tuple([S.literal(We.CAROUSEL),S.array(S.string()),S.string().nullable(),S.number().nullable(),S.array(jo).nullable()]);const Pl=S.tuple([S.literal(We.CODE),S.string(),S.string()]),Ul=S.tuple([S.literal(We.MATH),S.string()]),Vl=S.tuple([S.literal(We.QUERY),S.any(),S.string(),S.boolean(),S.boolean()]),zl=S.union([Fl,Ll,Pl,Ul,Vl]);S.tuple([zl.nullable(),S.record(S.any())]);const en=S.string(),Bl=S.number().min(0).max(5);S.tuple([Bl,en,S.array(en),S.number().nullable(),en.nullable()]);function Wl(n){return{all:n=n||new Map,on:function(e,t){var o=n.get(e);o?o.push(t):n.set(e,[t])},off:function(e,t){var o=n.get(e);o&&(t?o.splice(o.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var o=n.get(e);o&&o.slice().map(function(r){r(t)}),(o=n.get("*"))&&o.slice().map(function(r){r(e,t)})}}}var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kl={exports:{}};(function(n,e){(function(t,o){n.exports=o()})(Jl,function(){var t=1e3,o=6e4,r=36e5,a="millisecond",_="second",c="minute",u="hour",h="day",O="week",$="month",ne="quarter",pe="year",Ae="date",Qo="Invalid Date",Iu=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Eu=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Nu={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(T){var v=["th","st","nd","rd"],b=T%100;return"["+T+(v[(b-20)%10]||v[b]||v[0])+"]"}},sn=function(T,v,b){var x=String(T);return!x||x.length>=v?T:""+Array(v+1-x.length).join(b)+T},Du={s:sn,z:function(T){var v=-T.utcOffset(),b=Math.abs(v),x=Math.floor(b/60),y=b%60;return(v<=0?"+":"-")+sn(x,2,"0")+":"+sn(y,2,"0")},m:function T(v,b){if(v.date()<b.date())return-T(b,v);var x=12*(b.year()-v.year())+(b.month()-v.month()),y=v.clone().add(x,$),N=b-y<0,D=v.clone().add(x+(N?-1:1),$);return+(-(x+(b-y)/(N?y-D:D-y))||0)},a:function(T){return T<0?Math.ceil(T)||0:Math.floor(T)},p:function(T){return{M:$,y:pe,w:O,d:h,D:Ae,h:u,m:c,s:_,ms:a,Q:ne}[T]||String(T||"").toLowerCase().replace(/s$/,"")},u:function(T){return T===void 0}},vt="en",$e={};$e[vt]=Nu;var Go="$isDayjsObject",an=function(T){return T instanceof zt||!(!T||!T[Go])},Vt=function T(v,b,x){var y;if(!v)return vt;if(typeof v=="string"){var N=v.toLowerCase();$e[N]&&(y=N),b&&($e[N]=b,y=N);var D=v.split("-");if(!y&&D.length>1)return T(D[0])}else{var j=v.name;$e[j]=v,y=j}return!x&&y&&(vt=y),y||!x&&vt},z=function(T,v){if(an(T))return T.clone();var b=typeof v=="object"?v:{};return b.date=T,b.args=arguments,new zt(b)},Z=Du;Z.l=Vt,Z.i=an,Z.w=function(T,v){return z(T,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var zt=function(){function T(b){this.$L=Vt(b.locale,null,!0),this.parse(b),this.$x=this.$x||b.x||{},this[Go]=!0}var v=T.prototype;return v.parse=function(b){this.$d=function(x){var y=x.date,N=x.utc;if(y===null)return new Date(NaN);if(Z.u(y))return new Date;if(y instanceof Date)return new Date(y);if(typeof y=="string"&&!/Z$/i.test(y)){var D=y.match(Iu);if(D){var j=D[2]-1||0,U=(D[7]||"0").substring(0,3);return N?new Date(Date.UTC(D[1],j,D[3]||1,D[4]||0,D[5]||0,D[6]||0,U)):new Date(D[1],j,D[3]||1,D[4]||0,D[5]||0,D[6]||0,U)}}return new Date(y)}(b),this.init()},v.init=function(){var b=this.$d;this.$y=b.getFullYear(),this.$M=b.getMonth(),this.$D=b.getDate(),this.$W=b.getDay(),this.$H=b.getHours(),this.$m=b.getMinutes(),this.$s=b.getSeconds(),this.$ms=b.getMilliseconds()},v.$utils=function(){return Z},v.isValid=function(){return this.$d.toString()!==Qo},v.isSame=function(b,x){var y=z(b);return this.startOf(x)<=y&&y<=this.endOf(x)},v.isAfter=function(b,x){return z(b)<this.startOf(x)},v.isBefore=function(b,x){return this.endOf(x)<z(b)},v.$g=function(b,x,y){return Z.u(b)?this[x]:this.set(y,b)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(b,x){var y=this,N=!!Z.u(x)||x,D=Z.p(b),j=function(je,Q){var Oe=Z.w(y.$u?Date.UTC(y.$y,Q,je):new Date(y.$y,Q,je),y);return N?Oe:Oe.endOf(h)},U=function(je,Q){return Z.w(y.toDate()[je].apply(y.toDate("s"),(N?[0,0,0,0]:[23,59,59,999]).slice(Q)),y)},B=this.$W,q=this.$M,re=this.$D,He="set"+(this.$u?"UTC":"");switch(D){case pe:return N?j(1,0):j(31,11);case $:return N?j(1,q):j(0,q+1);case O:var Ze=this.$locale().weekStart||0,kt=(B<Ze?B+7:B)-Ze;return j(N?re-kt:re+(6-kt),q);case h:case Ae:return U(He+"Hours",0);case u:return U(He+"Minutes",1);case c:return U(He+"Seconds",2);case _:return U(He+"Milliseconds",3);default:return this.clone()}},v.endOf=function(b){return this.startOf(b,!1)},v.$set=function(b,x){var y,N=Z.p(b),D="set"+(this.$u?"UTC":""),j=(y={},y[h]=D+"Date",y[Ae]=D+"Date",y[$]=D+"Month",y[pe]=D+"FullYear",y[u]=D+"Hours",y[c]=D+"Minutes",y[_]=D+"Seconds",y[a]=D+"Milliseconds",y)[N],U=N===h?this.$D+(x-this.$W):x;if(N===$||N===pe){var B=this.clone().set(Ae,1);B.$d[j](U),B.init(),this.$d=B.set(Ae,Math.min(this.$D,B.daysInMonth())).$d}else j&&this.$d[j](U);return this.init(),this},v.set=function(b,x){return this.clone().$set(b,x)},v.get=function(b){return this[Z.p(b)]()},v.add=function(b,x){var y,N=this;b=Number(b);var D=Z.p(x),j=function(q){var re=z(N);return Z.w(re.date(re.date()+Math.round(q*b)),N)};if(D===$)return this.set($,this.$M+b);if(D===pe)return this.set(pe,this.$y+b);if(D===h)return j(1);if(D===O)return j(7);var U=(y={},y[c]=o,y[u]=r,y[_]=t,y)[D]||1,B=this.$d.getTime()+b*U;return Z.w(B,this)},v.subtract=function(b,x){return this.add(-1*b,x)},v.format=function(b){var x=this,y=this.$locale();if(!this.isValid())return y.invalidDate||Qo;var N=b||"YYYY-MM-DDTHH:mm:ssZ",D=Z.z(this),j=this.$H,U=this.$m,B=this.$M,q=y.weekdays,re=y.months,He=y.meridiem,Ze=function(Q,Oe,xt,Bt){return Q&&(Q[Oe]||Q(x,N))||xt[Oe].slice(0,Bt)},kt=function(Q){return Z.s(j%12||12,Q,"0")},je=He||function(Q,Oe,xt){var Bt=Q<12?"AM":"PM";return xt?Bt.toLowerCase():Bt};return N.replace(Eu,function(Q,Oe){return Oe||function(xt){switch(xt){case"YY":return String(x.$y).slice(-2);case"YYYY":return Z.s(x.$y,4,"0");case"M":return B+1;case"MM":return Z.s(B+1,2,"0");case"MMM":return Ze(y.monthsShort,B,re,3);case"MMMM":return Ze(re,B);case"D":return x.$D;case"DD":return Z.s(x.$D,2,"0");case"d":return String(x.$W);case"dd":return Ze(y.weekdaysMin,x.$W,q,2);case"ddd":return Ze(y.weekdaysShort,x.$W,q,3);case"dddd":return q[x.$W];case"H":return String(j);case"HH":return Z.s(j,2,"0");case"h":return kt(1);case"hh":return kt(2);case"a":return je(j,U,!0);case"A":return je(j,U,!1);case"m":return String(U);case"mm":return Z.s(U,2,"0");case"s":return String(x.$s);case"ss":return Z.s(x.$s,2,"0");case"SSS":return Z.s(x.$ms,3,"0");case"Z":return D}return null}(Q)||D.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(b,x,y){var N,D=this,j=Z.p(x),U=z(b),B=(U.utcOffset()-this.utcOffset())*o,q=this-U,re=function(){return Z.m(D,U)};switch(j){case pe:N=re()/12;break;case $:N=re();break;case ne:N=re()/3;break;case O:N=(q-B)/6048e5;break;case h:N=(q-B)/864e5;break;case u:N=q/r;break;case c:N=q/o;break;case _:N=q/t;break;default:N=q}return y?N:Z.a(N)},v.daysInMonth=function(){return this.endOf($).$D},v.$locale=function(){return $e[this.$L]},v.locale=function(b,x){if(!b)return this.$L;var y=this.clone(),N=Vt(b,x,!0);return N&&(y.$L=N),y},v.clone=function(){return Z.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},T}(),es=zt.prototype;return z.prototype=es,[["$ms",a],["$s",_],["$m",c],["$H",u],["$W",h],["$M",$],["$y",pe],["$D",Ae]].forEach(function(T){es[T[1]]=function(v){return this.$g(v,T[0],T[1])}}),z.extend=function(T,v){return T.$i||(T(v,zt,z),T.$i=!0),z},z.locale=Vt,z.isDayjs=an,z.unix=function(T){return z(1e3*T)},z.en=$e[vt],z.Ls=$e,z.p={},z})})(Kl),S.any().pipe(S.union([S.object({type:S.literal("ui"),changeSources:S.array(S.string()).optional()}),S.object({type:S.literal("local")}),S.object({type:S.literal("remote")})]));const ql=(n,e)=>{const t=[];for(const o in n)t.push(e(n[o],o));return t},Hl=n=>ql(n,(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&");class Yl{ws;constructor(e){this.ws=e}send(e){try{this.ws.send(e)}catch{this.close()}}close(){this.ws.close()}onMessage(e){this.ws.onmessage=t=>{t.data.arrayBuffer().then(o=>{e(new Uint8Array(o))})}}onClose(e){this.ws.onclose=e}onError(e){this.ws.onerror=e}onOpen(e){this.ws.onopen=e}}class Xl{params;protocol;constructor(e,t){this.params=e,this.protocol=t}connect(e,t){const o=Hl(this.params),r=e+(o.length===0?"":"?"+o),a=new WebSocket(r,this.protocol);return new Yl(a)}}const Ql=Math.floor,Gl=(n,e)=>n<e?n:e,eu=(n,e)=>n>e?n:e,Fo=128,Pt=127,tu=Number.MAX_SAFE_INTEGER,nu=n=>{const e=unescape(encodeURIComponent(n)),t=e.length,o=new Uint8Array(t);for(let r=0;r<t;r++)o[r]=e.codePointAt(r);return o},bt=typeof TextEncoder<"u"?new TextEncoder:null,ru=n=>bt.encode(n),ou=bt?ru:nu;let mt=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});mt&&mt.decode(new Uint8Array).length===1&&(mt=null);class su{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Lo=()=>new su,au=n=>{let e=n.cpos;for(let t=0;t<n.bufs.length;t++)e+=n.bufs[t].length;return e},Po=n=>{const e=new Uint8Array(au(n));let t=0;for(let o=0;o<n.bufs.length;o++){const r=n.bufs[o];e.set(r,t),t+=r.length}return e.set(new Uint8Array(n.cbuf.buffer,0,n.cpos),t),e},yt=(n,e)=>{const t=n.cbuf.length;n.cpos===t&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(t*2),n.cpos=0),n.cbuf[n.cpos++]=e},Uo=yt,tn=(n,e)=>{for(;e>Pt;)yt(n,Fo|Pt&e),e=Ql(e/128);yt(n,Pt&e)},nn=new Uint8Array(3e4),iu=nn.length/3,_u=(n,e)=>{if(e.length<iu){const t=bt.encodeInto(e,nn).written||0;tn(n,t);for(let o=0;o<t;o++)yt(n,nn[o])}else rn(n,ou(e))},du=(n,e)=>{const t=unescape(encodeURIComponent(e)),o=t.length;tn(n,o);for(let r=0;r<o;r++)yt(n,t.codePointAt(r))},Vo=bt&&bt.encodeInto?_u:du,cu=(n,e)=>{const t=n.cbuf.length,o=n.cpos,r=Gl(t-o,e.length),a=e.length-r;n.cbuf.set(e.subarray(0,r),o),n.cpos+=r,a>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(eu(t*2,a)),n.cbuf.set(e.subarray(r)),n.cpos=a)},rn=(n,e)=>{tn(n,e.byteLength),cu(n,e)},zo=n=>new Error(n),lu=zo("Unexpected end of array"),uu=zo("Integer out of Range");class pu{constructor(e){this.arr=e,this.pos=0}}const gu=n=>new pu(n),hu=(n,e)=>{const t=new Uint8Array(n.arr.buffer,n.pos+n.arr.byteOffset,e);return n.pos+=e,t},Je=n=>hu(n,Bo(n)),on=n=>n.arr[n.pos++],Bo=n=>{let e=0,t=1;const o=n.arr.length;for(;n.pos<o;){const r=n.arr[n.pos++];if(e=e+(r&Pt)*t,t*=128,r<Fo)return e;if(e>tu)throw uu}throw lu},fu=n=>{let e=Bo(n);if(e===0)return"";{let t=String.fromCodePoint(on(n));if(--e<100)for(;e--;)t+=String.fromCodePoint(on(n));else for(;e>0;){const o=e<1e4?e:1e4,r=n.arr.subarray(n.pos,n.pos+o);n.pos+=o,t+=String.fromCodePoint.apply(null,r),e-=o}return decodeURIComponent(escape(t))}},wu=n=>mt.decode(Je(n)),Ut=mt?wu:fu,te={canSync:0,startSync:1,postConflict:2,postUpdate:3},bu=(n,e)=>{const t=e.export({mode:"snapshot"}),o=Lo();return Uo(o,te.canSync),Vo(o,n),rn(o,t),Po(o)},mu=n=>{const e=Ut(n),t=Je(n);return{type:te.canSync,docId:e,snapshot:t}},yu=n=>{const e=Ut(n),t=Je(n),o=Je(n);return{type:te.startSync,docId:e,vv:t,updates:o}},vu=n=>{const e=Ut(n),t=Je(n);return{type:te.postConflict,docId:e,snapshot:t}},Wo=(n,e)=>{const t=Lo();return Uo(t,te.postUpdate),Vo(t,n),rn(t,e),Po(t)},ku=n=>{const e=Ut(n),t=Je(n);return{type:te.postUpdate,docId:e,updates:t}},xu={[te.canSync]:mu,[te.startSync]:yu,[te.postConflict]:vu,[te.postUpdate]:ku},Su=n=>{const e=gu(n),t=on(e),o=xu[t];if(!o)throw new Error(`Unknown message type: ${t}`);return o(e)},Jo=()=>{let n;return{promise:new Promise(e=>{n=e}),resolve:n}};class Cu{connection;url;protocol;network;wsConnected;wsConnecting;docs;shouldReconnect;unsuccessfulReconnects;maxBackoffTime;whenReady;whenReadyResolve;eventBus;constructor(e,t,o){this.connection=null,this.url=e,this.protocol=o,this.network=t,this.docs=new Map,this.wsConnected=!1,this.wsConnecting=!1,this.shouldReconnect=!1,this.unsuccessfulReconnects=0,this.maxBackoffTime=2500;const{promise:r,resolve:a}=Jo();this.whenReady=r,this.whenReadyResolve=a,this.eventBus=Wl()}_handleStartSyncMessage=(e,t)=>{console.info(`[wsSynchronizer] Received startSyncMessage, docId: ${e.docId}`);const o=e.doc;o.import(t.updates),console.info(`[wsSynchronizer] Doc ${e.docId} after import updates:`,o.toJSON());const r=G.decode(t.vv);e.lastSentVersion=r;const a=o.export({mode:"update",from:r});if(a.length>0){const _=Wo(t.docId,a);this._sendMessage(_),console.info(`[wsSynchronizer] Replied with postUpdateMessage, docId: ${e.docId}`)}e.lastEB=null,queueMicrotask(()=>{const _=e.lastEB!==null;this.eventBus.emit("docSynced",{docId:e.docId,hasSyncEvent:_})})};_handlePostConflictMessage=(e,t)=>{throw new Error("PostConflictMessage handling not implemented")};_handlePostUpdateMessage=(e,t)=>{const o=t.doc;console.info(`[wsSynchronizer] Received postUpdateMessage, docId: ${t.docId}`),o.import(e.updates),console.info(`[wsSynchronizer] Received postUpdateMessage, doc ${t.docId} after import updates:`,o.toJSON()),t.lastEB=null,queueMicrotask(()=>{const r=t.lastEB!==null;this.eventBus.emit("docSynced",{docId:t.docId,hasSyncEvent:r})})};_freeDocs(){for(const e of this.docs.values())e.doc.free();this.docs.clear()}_setupConnection(){this.shouldReconnect&&this.connection===null&&(this.connection=this.network.connect(this.url,this.protocol),this.connection.onOpen(()=>{console.info("[wsSynchronizer] Connection opened"),this.wsConnecting=!1,this.wsConnected=!0,this.unsuccessfulReconnects=0,this.whenReadyResolve()}),this.connection.onMessage(e=>{try{const t=Su(e),o=this.docs.get(t.docId);if(!o){console.error(`[wsSynchronizer] Doc not found: ${t.docId}`);return}t.type===te.startSync?this._handleStartSyncMessage(o,t):t.type===te.postConflict?this._handlePostConflictMessage(t,o):t.type===te.postUpdate?this._handlePostUpdateMessage(t,o):console.error(`[wsSynchronizer] Unknown message type: ${t.type}`)}catch(t){console.error("[wsSynchronizer] Error handling message:",t)}}),this.connection.onError(e=>{console.error("[wsSynchronizer] Connection error:",e)}),this.connection.onClose(()=>{if(console.info("[wsSynchronizer] Connection closed"),this.eventBus.emit("disconnected"),this.connection=null,this.wsConnecting=!1,this.wsConnected){this.wsConnected=!1,this._freeDocs();const{promise:e,resolve:t}=Jo();this.whenReady=e,this.whenReadyResolve=t}else this.unsuccessfulReconnects++;setTimeout(()=>this._setupConnection(),Math.min(Math.pow(2,this.unsuccessfulReconnects)*100,this.maxBackoffTime))}),this.wsConnecting=!0,this.wsConnected=!1,this._freeDocs())}_sendMessage(e){const t=this.connection;if(!t){console.error("[wsSynchronizer] Connection not established, cannot send message");return}t.send(e)}_sendNewUpdatesToServer(e){const t=this.docs.get(e);if(!t){console.error(`[wsSynchronizer] Doc ${e} not found`);return}const o=t.doc.export({mode:"update",from:t.lastSentVersion});if(o.length===0)return;t.lastSentVersion=t.doc.version();const r=Wo(e,o);this._sendMessage(r),console.info(`[wsSynchronizer] Sent postUpdateMessage, docId: ${e}`)}connect(){this.shouldReconnect=!0,!this.wsConnected&&this.connection===null&&this._setupConnection()}disconnect(){this.shouldReconnect=!1,this.connection!==null&&(this.connection.close(),this.connection=null)}destroy(){this.disconnect()}async addLoroDoc(e,t){if(this.docs.has(e)){console.error(`[wsSynchronizer] Doc already added, do nothing, docId: ${e}`);return}console.info(`[wsSynchronizer] Add new doc, docId: ${e}`);const o={docId:e,doc:t,lastSentVersion:void 0,lastEB:null,subscriptions:[]},r=t.subscribe(a=>{console.info(`[wsSynchronizer] New event on doc ${e}:`,a),a.by==="local"&&this._sendNewUpdatesToServer(e),o.lastEB=a});o.subscriptions.push(r),this.docs.set(e,o),this.whenReady.then(()=>{const a=this.docs.get(e)?.doc;if(!a)return;const _=bu(e,a);this._sendMessage(_),console.info(`[wsSynchronizer] Sent canSyncMessage, docId: ${e}`)})}on(e,t){this.eventBus.on(e,t)}off(e,t){this.eventBus.off(e,t)}}const Ke=n=>{postMessage(n)};let Ko,qo,Ho,we,qe,Ce,Re;addEventListener("message",n=>{const e=n.data;switch(e.type){case"connect":Au(e.serverUrl,e.location,e.token);break;case"disconnect":Yo();break;case"loadDataDoc":Xo(e.docId);break;case"unloadDataDoc":Ou(e.docId);break;case"postYjsLayerTransaction":Tu(e.transaction);break;case"_printBlockInfo":console.debug("[syncWorker] _printBlockInfo",Ce?.get(e.blockId));break;case"_printBlockData":const t=Re?.get(0)?.getMap(Lt);console.debug("[syncWorker] _printBlockData",t?.get(e.blockId));break}});const Yo=()=>{we?.disconnect(),we?.destroy(),qe=void 0,Ce=void 0,Re=void 0,we=void 0},Au=(n,e,t)=>{Yo(),console.debug("[syncWorker] connect",n,e,t),Ko=n,qo=e,Ho=t,qe=new se,Ce=qe.getMap(Lt),Re=new Map,Ce.subscribe(o=>{const r={type:o.by==="local"?"ui":"remote"},a=[];for(const _ of o.events)if(_.diff.type==="map")for(const[c,u]of Object.entries(_.diff.updated))u==null?a.push({op:"delete",key:c}):a.push({op:"upsert",key:c,value:u});Ke({type:"blockInfoMapChange",origin:r,changes:a})}),(async()=>{const o=new Xl({location:qo,authorization:Ho});we=new Cu(`ws://${Ko}`,o),we.connect(),we.addLoroDoc(Zl,qe),we.on("docSynced",({docId:r,hasSyncEvent:a})=>{console.info("[syncWorker] wsSynchronizer docSynced, docId:",r,"hasSyncEvent:",a),Ke({type:"docSynced",docId:r,hasSyncEvent:a})}),we.on("disconnected",()=>{console.info("[syncWorker] wsSynchronizer disconnected"),Ke({type:"disconnected"})})})()},Xo=n=>{if(!Re){console.error("[syncWorker] \u6570\u636E\u6587\u6863\u672A\u521D\u59CB\u5316\uFF0C\u5148 connect \u4EE5\u521D\u59CB\u5316");return}if(Re.has(n))return Re.get(n);const e=new se,t=e.getMap(Lt);return Re.set(n,e),Ke({type:"dataDocCreated",dataDocId:n}),t.subscribe(o=>{const r={type:o.by==="local"?"ui":"remote"},a=[];for(const _ of o.events)if(_.diff.type==="map")for(const[c,u]of Object.entries(_.diff.updated))u==null?a.push({op:"delete",key:c}):a.push({op:"upsert",key:c,value:u});Ke({type:"blockDataMapChange",dataDocId:n,origin:r,changes:a})}),(async()=>(console.debug("[syncWorker] dataDoc \u52A0\u5165 wsSynchronizer\uFF0C\u5F00\u59CB\u540C\u6B65"),await ts(1e3),we?.addLoroDoc(jl+n,e)))(),e},Ou=n=>{console.error("[syncWorker] Not implemented")},Tu=n=>{if(!qe||!Ce){console.error("[syncWorker] baseDoc or blockInfoMap is null, cannot commit");return}if(!Ce)return;for(const t of n.patches)t.op==="upsertBlockInfo"?Ce.set(t.blockId,t.blockInfo):t.op==="deleteBlockInfo"&&Ce.delete(t.blockId);console.log("[syncWorker] Commit blockInfoMap transaction"),qe.commit();const e=new Map;for(const t of n.patches)if(t.op==="upsertBlockData"||t.op==="deleteBlockData"){const o=e.get(t.docId);o?o.push(t):e.set(t.docId,[t])}for(const[t,o]of e.entries()){const r=Xo(t);if(!r)continue;const a=r.getMap(Lt);for(const _ of o)_.op==="upsertBlockData"?a.set(_.blockId,_.blockData):_.op==="deleteBlockData"&&a.delete(_.blockId);console.log("[syncWorker] Commit blockDataMap transaction, docId:",t),r.commit()}};Ke({type:"init"})})()}();
