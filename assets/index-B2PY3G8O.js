const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-uJIr_5v3.js","./index-D1zOoQbj.js","./index-nvq9_Dk1.js","./index-Br5aj7hc.js","./index-DTo6iVGa.js","./index-4OnGhKdK.js","./index-D6xCBMFj.js","./index-CIi8RaGi.js","./index-BIE01zea.js","./index-utqMyKe9.js","./index-DyBezXRQ.js","./index-CfzqDTdY.js","./index-DBFefFUc.js","./index-CjCz1t3Q.js","./index-9y3Iy9a-.js","./index-Dx93jm5-.js","./index-7zPOJy-R.js","./index-BHmW_eZ6.js","./index-DCUeL1oy.js","./dockerfile-BuNIbK2j.js","./simple-mode-C4Nsj8zu.js","./factor-D8pE9siL.js","./nsis-CEAdamBV.js","./pug-BmUsPMDj.js","./javascript-iSgyE4tI.js","./index-Bx-Ug3wg.js","./index-FTVQ48Iu.js"])))=>i.map(i=>d[i]);
var xn=Object.defineProperty;var Sn=(Ht,n,e)=>n in Ht?xn(Ht,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):Ht[n]=e;var Dt=(Ht,n,e)=>Sn(Ht,typeof n!="symbol"?n+"":n,e);let languageDataProp,foldService,CompletionContext,LanguageDescription,EditorView,ParseContext,bracketMatchingHandle,DefaultBufferLength,IterMode,sublanguageProp,LRLanguage,NodeWeakMap,Parser$1,Tag,LanguageSupport,ifNotIn,continuedIndent,completeFromList,syntaxTree,foldNodeProp,flatIndent,delimitedIndent,indentNodeProp,foldInside,snippetCompletion,EditorSelection,NodeType,NodeProp,NodeSet,parseMixed,Tree,countColumn,styleTags,tags,Prec,keymap,EditorState,Language,indentUnit,defineLanguageFacet,__tla=(async()=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=e(a);fetch(a.href,s)}})();function makeMap(n){const e=Object.create(null);for(const o of n.split(","))e[o]=1;return o=>o in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),isModelListener=n=>n.startsWith("onUpdate:"),extend$1=Object.assign,remove$1=(n,e)=>{const o=n.indexOf(e);o>-1&&n.splice(o,1)},hasOwnProperty$3=Object.prototype.hasOwnProperty,hasOwn$1=(n,e)=>hasOwnProperty$3.call(n,e),isArray$3=Array.isArray,isMap=n=>toTypeString$1(n)==="[object Map]",isSet=n=>toTypeString$1(n)==="[object Set]",isDate$2=n=>toTypeString$1(n)==="[object Date]",isFunction$2=n=>typeof n=="function",isString$2=n=>typeof n=="string",isSymbol=n=>typeof n=="symbol",isObject$3=n=>n!==null&&typeof n=="object",isPromise$1=n=>(isObject$3(n)||isFunction$2(n))&&isFunction$2(n.then)&&isFunction$2(n.catch),objectToString$1=Object.prototype.toString,toTypeString$1=n=>objectToString$1.call(n),toRawType=n=>toTypeString$1(n).slice(8,-1),isPlainObject$2=n=>toTypeString$1(n)==="[object Object]",isIntegerKey=n=>isString$2(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=n=>{const e=Object.create(null);return o=>e[o]||(e[o]=n(o))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(n=>n.replace(camelizeRE,(e,o)=>o?o.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate$1=cacheStringFunction(n=>n.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(n=>n.charAt(0).toUpperCase()+n.slice(1)),toHandlerKey=cacheStringFunction(n=>n?`on${capitalize$1(n)}`:""),hasChanged=(n,e)=>!Object.is(n,e),invokeArrayFns=(n,...e)=>{for(let o=0;o<n.length;o++)n[o](...e)},def=(n,e,o,a=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:a,value:o})},looseToNumber=n=>{const e=parseFloat(n);return isNaN(e)?n:e},toNumber=n=>{const e=isString$2(n)?Number(n):NaN;return isNaN(e)?n:e};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(n){if(isArray$3(n)){const e={};for(let o=0;o<n.length;o++){const a=n[o],s=isString$2(a)?parseStringStyle(a):normalizeStyle(a);if(s)for(const l in s)e[l]=s[l]}return e}else if(isString$2(n)||isObject$3(n))return n}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(n){const e={};return n.replace(styleCommentRE,"").split(listDelimiterRE).forEach(o=>{if(o){const a=o.split(propertyDelimiterRE);a.length>1&&(e[a[0].trim()]=a[1].trim())}}),e}function normalizeClass(n){let e="";if(isString$2(n))e=n;else if(isArray$3(n))for(let o=0;o<n.length;o++){const a=normalizeClass(n[o]);a&&(e+=a+" ")}else if(isObject$3(n))for(const o in n)n[o]&&(e+=o+" ");return e.trim()}function normalizeProps(n){if(!n)return null;let{class:e,style:o}=n;return e&&!isString$2(e)&&(n.class=normalizeClass(e)),o&&(n.style=normalizeStyle(o)),n}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(n){return!!n||n===""}function looseCompareArrays(n,e){if(n.length!==e.length)return!1;let o=!0;for(let a=0;o&&a<n.length;a++)o=looseEqual(n[a],e[a]);return o}function looseEqual(n,e){if(n===e)return!0;let o=isDate$2(n),a=isDate$2(e);if(o||a)return o&&a?n.getTime()===e.getTime():!1;if(o=isSymbol(n),a=isSymbol(e),o||a)return n===e;if(o=isArray$3(n),a=isArray$3(e),o||a)return o&&a?looseCompareArrays(n,e):!1;if(o=isObject$3(n),a=isObject$3(e),o||a){if(!o||!a)return!1;const s=Object.keys(n).length,l=Object.keys(e).length;if(s!==l)return!1;for(const c in n){const d=n.hasOwnProperty(c),u=e.hasOwnProperty(c);if(d&&!u||!d&&u||!looseEqual(n[c],e[c]))return!1}}return String(n)===String(e)}function looseIndexOf(n,e){return n.findIndex(o=>looseEqual(o,e))}const isRef$1=n=>!!(n&&n.__v_isRef===!0),toDisplayString$1=n=>isString$2(n)?n:n==null?"":isArray$3(n)||isObject$3(n)&&(n.toString===objectToString$1||!isFunction$2(n.toString))?isRef$1(n)?toDisplayString$1(n.value):JSON.stringify(n,replacer,2):String(n),replacer=(n,e)=>isRef$1(e)?replacer(n,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((o,[a,s],l)=>(o[stringifySymbol(a,l)+" =>"]=s,o),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(o=>stringifySymbol(o))}:isSymbol(e)?stringifySymbol(e):isObject$3(e)&&!isArray$3(e)&&!isPlainObject$2(e)?String(e):e,stringifySymbol=(n,e="")=>{var o;return isSymbol(n)?`Symbol(${(o=n.description)!=null?o:e})`:n};let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,o;if(this.scopes)for(e=0,o=this.scopes.length;e<o;e++)this.scopes[e].pause();for(e=0,o=this.effects.length;e<o;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,o;if(this.scopes)for(e=0,o=this.scopes.length;e<o;e++)this.scopes[e].resume();for(e=0,o=this.effects.length;e<o;e++)this.effects[e].resume()}}run(e){if(this._active){const o=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=o}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){this._active=!1;let o,a;for(o=0,a=this.effects.length;o<a;o++)this.effects[o].stop();for(this.effects.length=0,o=0,a=this.cleanups.length;o<a;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,a=this.scopes.length;o<a;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function effectScope(n){return new EffectScope(n)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(n,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(n)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,o=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=o,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty$1(this)&&this.run()}get dirty(){return isDirty$1(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(n,e=!1){if(n.flags|=8,e){n.next=batchedComputed,batchedComputed=n;return}n.next=batchedSub,batchedSub=n}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const o=e.next;e.next=void 0,e.flags&=-9,e=o}}let n;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const o=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(a){n||(n=a)}e=o}}if(n)throw n}function prepareDeps(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(n){let e,o=n.depsTail,a=o;for(;a;){const s=a.prevDep;a.version===-1?(a===o&&(o=s),removeSub(a),removeDep(a)):e=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=s}n.deps=e,n.depsTail=o}function isDirty$1(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function refreshComputed(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===globalVersion))return;n.globalVersion=globalVersion;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!isDirty$1(n)){n.flags&=-3;return}const o=activeSub,a=shouldTrack;activeSub=n,shouldTrack=!0;try{prepareDeps(n);const s=n.fn(n._value);(e.version===0||hasChanged(s,n._value))&&(n._value=s,e.version++)}catch(s){throw e.version++,s}finally{activeSub=o,shouldTrack=a,cleanupDeps(n),n.flags&=-3}}function removeSub(n,e=!1){const{dep:o,prevSub:a,nextSub:s}=n;if(a&&(a.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=a,n.nextSub=void 0),o.subs===n&&(o.subs=a,!a&&o.computed)){o.computed.flags&=-5;for(let l=o.computed.deps;l;l=l.nextDep)removeSub(l,!0)}!e&&!--o.sc&&o.map&&o.map.delete(o.key)}function removeDep(n){const{prevDep:e,nextDep:o}=n;e&&(e.nextDep=o,n.prevDep=void 0),o&&(o.prevDep=e,n.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const n=trackStack.pop();shouldTrack=n===void 0?!0:n}function cleanupEffect(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const o=activeSub;activeSub=void 0;try{e()}finally{activeSub=o}}}let globalVersion=0,Link$1=class{constructor(n,e){this.sub=n,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==activeSub)o=this.activeLink=new Link$1(activeSub,this),activeSub.deps?(o.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=o,activeSub.depsTail=o):activeSub.deps=activeSub.depsTail=o,addSub(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const a=o.nextDep;a.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=a),o.prevDep=activeSub.depsTail,o.nextDep=void 0,activeSub.depsTail.nextDep=o,activeSub.depsTail=o,activeSub.deps===o&&(activeSub.deps=a)}return o}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{endBatch()}}}function addSub(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let a=e.deps;a;a=a.nextDep)addSub(a)}const o=n.dep.subs;o!==n&&(n.prevSub=o,o&&(o.nextSub=n)),n.dep.subs=n}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(n,e,o){if(shouldTrack&&activeSub){let a=targetMap.get(n);a||targetMap.set(n,a=new Map);let s=a.get(o);s||(a.set(o,s=new Dep),s.map=a,s.key=o),s.track()}}function trigger(n,e,o,a,s,l){const c=targetMap.get(n);if(!c){globalVersion++;return}const d=u=>{u&&u.trigger()};if(startBatch(),e==="clear")c.forEach(d);else{const u=isArray$3(n),f=u&&isIntegerKey(o);if(u&&o==="length"){const v=Number(a);c.forEach((b,k)=>{(k==="length"||k===ARRAY_ITERATE_KEY||!isSymbol(k)&&k>=v)&&d(b)})}else switch((o!==void 0||c.has(void 0))&&d(c.get(o)),f&&d(c.get(ARRAY_ITERATE_KEY)),e){case"add":u?f&&d(c.get("length")):(d(c.get(ITERATE_KEY)),isMap(n)&&d(c.get(MAP_KEY_ITERATE_KEY)));break;case"delete":u||(d(c.get(ITERATE_KEY)),isMap(n)&&d(c.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(n)&&d(c.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(n,e){const o=targetMap.get(n);return o&&o.get(e)}function reactiveReadArray(n){const e=toRaw(n);return e===n?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(n)?e:e.map(toReactive))}function shallowReadArray(n){return track(n=toRaw(n),"iterate",ARRAY_ITERATE_KEY),n}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...n){return reactiveReadArray(this).concat(...n.map(e=>isArray$3(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",n=>(n[1]=toReactive(n[1]),n))},every(n,e){return apply$2(this,"every",n,e,void 0,arguments)},filter(n,e){return apply$2(this,"filter",n,e,o=>o.map(toReactive),arguments)},find(n,e){return apply$2(this,"find",n,e,toReactive,arguments)},findIndex(n,e){return apply$2(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return apply$2(this,"findLast",n,e,toReactive,arguments)},findLastIndex(n,e){return apply$2(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return apply$2(this,"forEach",n,e,void 0,arguments)},includes(...n){return searchProxy(this,"includes",n)},indexOf(...n){return searchProxy(this,"indexOf",n)},join(n){return reactiveReadArray(this).join(n)},lastIndexOf(...n){return searchProxy(this,"lastIndexOf",n)},map(n,e){return apply$2(this,"map",n,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...n){return noTracking(this,"push",n)},reduce(n,...e){return reduce(this,"reduce",n,e)},reduceRight(n,...e){return reduce(this,"reduceRight",n,e)},shift(){return noTracking(this,"shift")},some(n,e){return apply$2(this,"some",n,e,void 0,arguments)},splice(...n){return noTracking(this,"splice",n)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(n){return reactiveReadArray(this).toSorted(n)},toSpliced(...n){return reactiveReadArray(this).toSpliced(...n)},unshift(...n){return noTracking(this,"unshift",n)},values(){return iterator(this,"values",toReactive)}};function iterator(n,e,o){const a=shallowReadArray(n),s=a[e]();return a!==n&&!isShallow(n)&&(s._next=s.next,s.next=()=>{const l=s._next();return l.value&&(l.value=o(l.value)),l}),s}const arrayProto=Array.prototype;function apply$2(n,e,o,a,s,l){const c=shallowReadArray(n),d=c!==n&&!isShallow(n),u=c[e];if(u!==arrayProto[e]){const b=u.apply(n,l);return d?toReactive(b):b}let f=o;c!==n&&(d?f=function(b,k){return o.call(this,toReactive(b),k,n)}:o.length>2&&(f=function(b,k){return o.call(this,b,k,n)}));const v=u.call(c,f,a);return d&&s?s(v):v}function reduce(n,e,o,a){const s=shallowReadArray(n);let l=o;return s!==n&&(isShallow(n)?o.length>3&&(l=function(c,d,u){return o.call(this,c,d,u,n)}):l=function(c,d,u){return o.call(this,c,toReactive(d),u,n)}),s[e](l,...a)}function searchProxy(n,e,o){const a=toRaw(n);track(a,"iterate",ARRAY_ITERATE_KEY);const s=a[e](...o);return(s===-1||s===!1)&&isProxy(o[0])?(o[0]=toRaw(o[0]),a[e](...o)):s}function noTracking(n,e,o=[]){pauseTracking(),startBatch();const a=toRaw(n)[e].apply(n,o);return endBatch(),resetTracking(),a}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(isSymbol));function hasOwnProperty$2(n){isSymbol(n)||(n=String(n));const e=toRaw(this);return track(e,"has",n),e.hasOwnProperty(n)}class BaseReactiveHandler{constructor(e=!1,o=!1){this._isReadonly=e,this._isShallow=o}get(e,o,a){if(o==="__v_skip")return e.__v_skip;const s=this._isReadonly,l=this._isShallow;if(o==="__v_isReactive")return!s;if(o==="__v_isReadonly")return s;if(o==="__v_isShallow")return l;if(o==="__v_raw")return a===(s?l?shallowReadonlyMap:readonlyMap:l?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(a)?e:void 0;const c=isArray$3(e);if(!s){let u;if(c&&(u=arrayInstrumentations[o]))return u;if(o==="hasOwnProperty")return hasOwnProperty$2}const d=Reflect.get(e,o,isRef(e)?e:a);return(isSymbol(o)?builtInSymbols.has(o):isNonTrackableKeys(o))||(s||track(e,"get",o),l)?d:isRef(d)?c&&isIntegerKey(o)?d:d.value:isObject$3(d)?s?readonly(d):reactive(d):d}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,o,a,s){let l=e[o];if(!this._isShallow){const u=isReadonly(l);if(!isShallow(a)&&!isReadonly(a)&&(l=toRaw(l),a=toRaw(a)),!isArray$3(e)&&isRef(l)&&!isRef(a))return u?!1:(l.value=a,!0)}const c=isArray$3(e)&&isIntegerKey(o)?Number(o)<e.length:hasOwn$1(e,o),d=Reflect.set(e,o,a,isRef(e)?e:s);return e===toRaw(s)&&(c?hasChanged(a,l)&&trigger(e,"set",o,a):trigger(e,"add",o,a)),d}deleteProperty(e,o){const a=hasOwn$1(e,o);e[o];const s=Reflect.deleteProperty(e,o);return s&&a&&trigger(e,"delete",o,void 0),s}has(e,o){const a=Reflect.has(e,o);return(!isSymbol(o)||!builtInSymbols.has(o))&&track(e,"has",o),a}ownKeys(e){return track(e,"iterate",isArray$3(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,o){return!0}deleteProperty(e,o){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=n=>n,getProto=n=>Reflect.getPrototypeOf(n);function createIterableMethod(n,e,o){return function(...a){const s=this.__v_raw,l=toRaw(s),c=isMap(l),d=n==="entries"||n===Symbol.iterator&&c,u=n==="keys"&&c,f=s[n](...a),v=o?toShallow:e?toReadonly:toReactive;return!e&&track(l,"iterate",u?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:b,done:k}=f.next();return k?{value:b,done:k}:{value:d?[v(b[0]),v(b[1])]:v(b),done:k}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function createInstrumentations(n,e){const o={get(a){const s=this.__v_raw,l=toRaw(s),c=toRaw(a);n||(hasChanged(a,c)&&track(l,"get",a),track(l,"get",c));const{has:d}=getProto(l),u=e?toShallow:n?toReadonly:toReactive;if(d.call(l,a))return u(s.get(a));if(d.call(l,c))return u(s.get(c));s!==l&&s.get(a)},get size(){const a=this.__v_raw;return!n&&track(toRaw(a),"iterate",ITERATE_KEY),Reflect.get(a,"size",a)},has(a){const s=this.__v_raw,l=toRaw(s),c=toRaw(a);return n||(hasChanged(a,c)&&track(l,"has",a),track(l,"has",c)),a===c?s.has(a):s.has(a)||s.has(c)},forEach(a,s){const l=this,c=l.__v_raw,d=toRaw(c),u=e?toShallow:n?toReadonly:toReactive;return!n&&track(d,"iterate",ITERATE_KEY),c.forEach((f,v)=>a.call(s,u(f),u(v),l))}};return extend$1(o,n?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(a){!e&&!isShallow(a)&&!isReadonly(a)&&(a=toRaw(a));const s=toRaw(this);return getProto(s).has.call(s,a)||(s.add(a),trigger(s,"add",a,a)),this},set(a,s){!e&&!isShallow(s)&&!isReadonly(s)&&(s=toRaw(s));const l=toRaw(this),{has:c,get:d}=getProto(l);let u=c.call(l,a);u||(a=toRaw(a),u=c.call(l,a));const f=d.call(l,a);return l.set(a,s),u?hasChanged(s,f)&&trigger(l,"set",a,s):trigger(l,"add",a,s),this},delete(a){const s=toRaw(this),{has:l,get:c}=getProto(s);let d=l.call(s,a);d||(a=toRaw(a),d=l.call(s,a)),c&&c.call(s,a);const u=s.delete(a);return d&&trigger(s,"delete",a,void 0),u},clear(){const a=toRaw(this),s=a.size!==0,l=a.clear();return s&&trigger(a,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(a=>{o[a]=createIterableMethod(a,n,e)}),o}function createInstrumentationGetter(n,e){const o=createInstrumentations(n,e);return(a,s,l)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?a:Reflect.get(hasOwn$1(o,s)&&s in a?o:a,s,l)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(n){return n.__v_skip||!Object.isExtensible(n)?0:targetTypeMap(toRawType(n))}function reactive(n){return isReadonly(n)?n:createReactiveObject(n,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(n){return createReactiveObject(n,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(n){return createReactiveObject(n,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(n){return createReactiveObject(n,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(n,e,o,a,s){if(!isObject$3(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const l=s.get(n);if(l)return l;const c=getTargetType(n);if(c===0)return n;const d=new Proxy(n,c===2?a:o);return s.set(n,d),d}function isReactive(n){return isReadonly(n)?isReactive(n.__v_raw):!!(n&&n.__v_isReactive)}function isReadonly(n){return!!(n&&n.__v_isReadonly)}function isShallow(n){return!!(n&&n.__v_isShallow)}function isProxy(n){return n?!!n.__v_raw:!1}function toRaw(n){const e=n&&n.__v_raw;return e?toRaw(e):n}function markRaw(n){return!hasOwn$1(n,"__v_skip")&&Object.isExtensible(n)&&def(n,"__v_skip",!0),n}const toReactive=n=>isObject$3(n)?reactive(n):n,toReadonly=n=>isObject$3(n)?readonly(n):n;function isRef(n){return n?n.__v_isRef===!0:!1}function ref(n){return createRef(n,!1)}function shallowRef(n){return createRef(n,!0)}function createRef(n,e){return isRef(n)?n:new RefImpl(n,e)}class RefImpl{constructor(e,o){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?e:toRaw(e),this._value=o?e:toReactive(e),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(e){const o=this._rawValue,a=this.__v_isShallow||isShallow(e)||isReadonly(e);e=a?e:toRaw(e),hasChanged(e,o)&&(this._rawValue=e,this._value=a?e:toReactive(e),this.dep.trigger())}}function unref(n){return isRef(n)?n.value:n}function toValue$2(n){return isFunction$2(n)?n():unref(n)}const shallowUnwrapHandlers={get:(n,e,o)=>e==="__v_raw"?n:unref(Reflect.get(n,e,o)),set:(n,e,o,a)=>{const s=n[e];return isRef(s)&&!isRef(o)?(s.value=o,!0):Reflect.set(n,e,o,a)}};function proxyRefs(n){return isReactive(n)?n:new Proxy(n,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.__v_isRef=!0,this._value=void 0;const o=this.dep=new Dep,{get:a,set:s}=e(o.track.bind(o),o.trigger.bind(o));this._get=a,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function customRef(n){return new CustomRefImpl(n)}function toRefs(n){const e=isArray$3(n)?new Array(n.length):{};for(const o in n)e[o]=propertyToRef(n,o);return e}class ObjectRefImpl{constructor(e,o,a){this._object=e,this._key=o,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef$1(n,e,o){return isRef(n)?n:isFunction$2(n)?new GetterRefImpl(n):isObject$3(n)&&arguments.length>1?propertyToRef(n,e,o):ref(n)}function propertyToRef(n,e,o){const a=n[e];return isRef(a)?a:new ObjectRefImpl(n,e,o)}class ComputedRefImpl{constructor(e,o,a){this.fn=e,this.setter=o,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(n,e,o=!1){let a,s;return isFunction$2(n)?a=n:(a=n.get,s=n.set),new ComputedRefImpl(a,s,o)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(n,e=!1,o=activeWatcher){if(o){let a=cleanupMap.get(o);a||cleanupMap.set(o,a=[]),a.push(n)}}function watch$1(n,e,o=EMPTY_OBJ){const{immediate:a,deep:s,once:l,scheduler:c,augmentJob:d,call:u}=o,f=I=>s?I:isShallow(I)||s===!1||s===0?traverse(I,1):traverse(I);let v,b,k,x,_=!1,E=!1;if(isRef(n)?(b=()=>n.value,_=isShallow(n)):isReactive(n)?(b=()=>f(n),_=!0):isArray$3(n)?(E=!0,_=n.some(I=>isReactive(I)||isShallow(I)),b=()=>n.map(I=>{if(isRef(I))return I.value;if(isReactive(I))return f(I);if(isFunction$2(I))return u?u(I,2):I()})):isFunction$2(n)?e?b=u?()=>u(n,2):n:b=()=>{if(k){pauseTracking();try{k()}finally{resetTracking()}}const I=activeWatcher;activeWatcher=v;try{return u?u(n,3,[x]):n(x)}finally{activeWatcher=I}}:b=NOOP,e&&s){const I=b,L=s===!0?1/0:s;b=()=>traverse(I(),L)}const B=getCurrentScope(),M=()=>{v.stop(),B&&B.active&&remove$1(B.effects,v)};if(l&&e){const I=e;e=(...L)=>{I(...L),M()}}let V=E?new Array(n.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const F=I=>{if(!(!(v.flags&1)||!v.dirty&&!I))if(e){const L=v.run();if(s||_||(E?L.some((U,Z)=>hasChanged(U,V[Z])):hasChanged(L,V))){k&&k();const U=activeWatcher;activeWatcher=v;try{const Z=[L,V===INITIAL_WATCHER_VALUE?void 0:E&&V[0]===INITIAL_WATCHER_VALUE?[]:V,x];u?u(e,3,Z):e(...Z),V=L}finally{activeWatcher=U}}}else v.run()};return d&&d(F),v=new ReactiveEffect(b),v.scheduler=c?()=>c(F,!1):F,x=I=>onWatcherCleanup(I,!1,v),k=v.onStop=()=>{const I=cleanupMap.get(v);if(I){if(u)u(I,4);else for(const L of I)L();cleanupMap.delete(v)}},e?a?F(!0):V=v.run():c?c(F.bind(null,!0),!0):v.run(),M.pause=v.pause.bind(v),M.resume=v.resume.bind(v),M.stop=M,M}function traverse(n,e=1/0,o){if(e<=0||!isObject$3(n)||n.__v_skip||(o=o||new Set,o.has(n)))return n;if(o.add(n),e--,isRef(n))traverse(n.value,e,o);else if(isArray$3(n))for(let a=0;a<n.length;a++)traverse(n[a],e,o);else if(isSet(n)||isMap(n))n.forEach(a=>{traverse(a,e,o)});else if(isPlainObject$2(n)){for(const a in n)traverse(n[a],e,o);for(const a of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,a)&&traverse(n[a],e,o)}return n}const stack=[];let isWarning=!1;function warn$1(n,...e){if(isWarning)return;isWarning=!0,pauseTracking();const o=stack.length?stack[stack.length-1].component:null,a=o&&o.appContext.config.warnHandler,s=getComponentTrace();if(a)callWithErrorHandling(a,o,11,[n+e.map(l=>{var c,d;return(d=(c=l.toString)==null?void 0:c.call(l))!=null?d:JSON.stringify(l)}).join(""),o&&o.proxy,s.map(({vnode:l})=>`at <${formatComponentName(o,l.type)}>`).join(`
`),s]);else{const l=[`[Vue warn]: ${n}`,...e];s.length&&l.push(`
`,...formatTrace(s)),console.warn(...l)}resetTracking(),isWarning=!1}function getComponentTrace(){let n=stack[stack.length-1];if(!n)return[];const e=[];for(;n;){const o=e[0];o&&o.vnode===n?o.recurseCount++:e.push({vnode:n,recurseCount:0});const a=n.component&&n.component.parent;n=a&&a.vnode}return e}function formatTrace(n){const e=[];return n.forEach((o,a)=>{e.push(...a===0?[]:[`
`],...formatTraceEntry(o))}),e}function formatTraceEntry({vnode:n,recurseCount:e}){const o=e>0?`... (${e} recursive calls)`:"",a=n.component?n.component.parent==null:!1,s=` at <${formatComponentName(n.component,n.type,a)}`,l=">"+o;return n.props?[s,...formatProps(n.props),l]:[s+l]}function formatProps(n){const e=[],o=Object.keys(n);return o.slice(0,3).forEach(a=>{e.push(...formatProp(a,n[a]))}),o.length>3&&e.push(" ..."),e}function formatProp(n,e,o){return isString$2(e)?(e=JSON.stringify(e),o?e:[`${n}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?o?e:[`${n}=${e}`]:isRef(e)?(e=formatProp(n,toRaw(e.value),!0),o?e:[`${n}=Ref<`,e,">"]):isFunction$2(e)?[`${n}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),o?e:[`${n}=`,e])}function callWithErrorHandling(n,e,o,a){try{return a?n(...a):n()}catch(s){handleError(s,e,o)}}function callWithAsyncErrorHandling(n,e,o,a){if(isFunction$2(n)){const s=callWithErrorHandling(n,e,o,a);return s&&isPromise$1(s)&&s.catch(l=>{handleError(l,e,o)}),s}if(isArray$3(n)){const s=[];for(let l=0;l<n.length;l++)s.push(callWithAsyncErrorHandling(n[l],e,o,a));return s}}function handleError(n,e,o,a=!0){const s=e?e.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:c}=e&&e.appContext.config||EMPTY_OBJ;if(e){let d=e.parent;const u=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${o}`;for(;d;){const v=d.ec;if(v){for(let b=0;b<v.length;b++)if(v[b](n,u,f)===!1)return}d=d.parent}if(l){pauseTracking(),callWithErrorHandling(l,null,10,[n,u,f]),resetTracking();return}}logError(n,o,s,a,c)}function logError(n,e,o,a=!0,s=!1){if(s)throw n;console.error(n)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(n){const e=currentFlushPromise||resolvedPromise;return n?e.then(this?n.bind(this):n):e}function findInsertionIndex$1(n){let e=flushIndex+1,o=queue.length;for(;e<o;){const a=e+o>>>1,s=queue[a],l=getId(s);l<n||l===n&&s.flags&2?e=a+1:o=a}return e}function queueJob(n){if(!(n.flags&1)){const e=getId(n),o=queue[queue.length-1];!o||!(n.flags&2)&&e>=getId(o)?queue.push(n):queue.splice(findInsertionIndex$1(e),0,n),n.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(n){isArray$3(n)?pendingPostFlushCbs.push(...n):activePostFlushCbs&&n.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,n):n.flags&1||(pendingPostFlushCbs.push(n),n.flags|=1),queueFlush()}function flushPreFlushCbs(n,e,o=flushIndex+1){for(;o<queue.length;o++){const a=queue[o];if(a&&a.flags&2){if(n&&a.id!==n.uid)continue;queue.splice(o,1),o--,a.flags&4&&(a.flags&=-2),a(),a.flags&4||(a.flags&=-2)}}}function flushPostFlushCbs(n){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((o,a)=>getId(o)-getId(a));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const o=activePostFlushCbs[postFlushIndex];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=n=>n.id==null?n.flags&2?-1:1/0:n.id;function flushJobs(n){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(n){const e=currentRenderingInstance;return currentRenderingInstance=n,currentScopeId=n&&n.type.__scopeId||null,e}function withCtx(n,e=currentRenderingInstance,o){if(!e||n._n)return n;const a=(...s)=>{a._d&&setBlockTracking(-1);const l=setCurrentRenderingInstance(e);let c;try{c=n(...s)}finally{setCurrentRenderingInstance(l),a._d&&setBlockTracking(1)}return c};return a._n=!0,a._c=!0,a._d=!0,a}function withDirectives(n,e){if(currentRenderingInstance===null)return n;const o=getComponentPublicInstance(currentRenderingInstance),a=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[l,c,d,u=EMPTY_OBJ]=e[s];l&&(isFunction$2(l)&&(l={mounted:l,updated:l}),l.deep&&traverse(c),a.push({dir:l,instance:o,value:c,oldValue:void 0,arg:d,modifiers:u}))}return n}function invokeDirectiveHook(n,e,o,a){const s=n.dirs,l=e&&e.dirs;for(let c=0;c<s.length;c++){const d=s[c];l&&(d.oldValue=l[c].value);let u=d.dir[a];u&&(pauseTracking(),callWithAsyncErrorHandling(u,o,8,[n.el,d,n,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=n=>n.__isTeleport,isTeleportDisabled=n=>n&&(n.disabled||n.disabled===""),isTeleportDeferred=n=>n&&(n.defer||n.defer===""),isTargetSVG=n=>typeof SVGElement<"u"&&n instanceof SVGElement,isTargetMathML=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,resolveTarget=(n,e)=>{const o=n&&n.to;return isString$2(o)?e?e(o):null:o},TeleportImpl={name:"Teleport",__isTeleport:!0,process(n,e,o,a,s,l,c,d,u,f){const{mc:v,pc:b,pbc:k,o:{insert:x,querySelector:_,createText:E,createComment:B}}=f,M=isTeleportDisabled(e.props);let{shapeFlag:V,children:F,dynamicChildren:I}=e;if(n==null){const L=e.el=E(""),U=e.anchor=E("");x(L,o,a),x(U,o,a);const Z=(j,W)=>{V&16&&(s&&s.isCE&&(s.ce._teleportTarget=j),v(F,j,W,s,l,c,d,u))},K=()=>{const j=e.target=resolveTarget(e.props,_),W=prepareAnchor(j,e,E,x);j&&(c!=="svg"&&isTargetSVG(j)?c="svg":c!=="mathml"&&isTargetMathML(j)&&(c="mathml"),M||(Z(j,W),updateCssVars(e,!1)))};M&&(Z(o,U),updateCssVars(e,!0)),isTeleportDeferred(e.props)?queuePostRenderEffect(()=>{K(),e.el.__isMounted=!0},l):K()}else{if(isTeleportDeferred(e.props)&&!n.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(n,e,o,a,s,l,c,d,u,f),delete n.el.__isMounted},l);return}e.el=n.el,e.targetStart=n.targetStart;const L=e.anchor=n.anchor,U=e.target=n.target,Z=e.targetAnchor=n.targetAnchor,K=isTeleportDisabled(n.props),j=K?o:U,W=K?L:Z;if(c==="svg"||isTargetSVG(U)?c="svg":(c==="mathml"||isTargetMathML(U))&&(c="mathml"),I?(k(n.dynamicChildren,I,j,s,l,c,d),traverseStaticChildren(n,e,!0)):u||b(n,e,j,W,s,l,c,d,!1),M)K?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):moveTeleport(e,o,L,f,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const Y=e.target=resolveTarget(e.props,_);Y&&moveTeleport(e,Y,null,f,0)}else K&&moveTeleport(e,U,Z,f,1);updateCssVars(e,M)}},remove(n,e,o,{um:a,o:{remove:s}},l){const{shapeFlag:c,children:d,anchor:u,targetStart:f,targetAnchor:v,target:b,props:k}=n;if(b&&(s(f),s(v)),l&&s(u),c&16){const x=l||!isTeleportDisabled(k);for(let _=0;_<d.length;_++){const E=d[_];a(E,e,o,x,!!E.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(n,e,o,{o:{insert:a},m:s},l=2){l===0&&a(n.targetAnchor,e,o);const{el:c,anchor:d,shapeFlag:u,children:f,props:v}=n,b=l===2;if(b&&a(c,e,o),(!b||isTeleportDisabled(v))&&u&16)for(let k=0;k<f.length;k++)s(f[k],e,o,2);b&&a(d,e,o)}function hydrateTeleport(n,e,o,a,s,l,{o:{nextSibling:c,parentNode:d,querySelector:u,insert:f,createText:v}},b){const k=e.target=resolveTarget(e.props,u);if(k){const x=isTeleportDisabled(e.props),_=k._lpa||k.firstChild;if(e.shapeFlag&16)if(x)e.anchor=b(c(n),e,d(n),o,a,s,l),e.targetStart=_,e.targetAnchor=_&&c(_);else{e.anchor=c(n);let E=_;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,k._lpa=e.targetAnchor&&c(e.targetAnchor);break}}E=c(E)}e.targetAnchor||prepareAnchor(k,e,v,f),b(_&&c(_),e,k,o,a,s,l)}updateCssVars(e,x)}return e.anchor&&c(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(n,e){const o=n.ctx;if(o&&o.ut){let a,s;for(e?(a=n.el,s=n.anchor):(a=n.targetStart,s=n.targetAnchor);a&&a!==s;)a.nodeType===1&&a.setAttribute("data-v-owner",o.uid),a=a.nextSibling;o.ut()}}function prepareAnchor(n,e,o,a){const s=e.targetStart=o(""),l=e.targetAnchor=o("");return s[TeleportEndKey]=l,n&&(a(s,n),a(l,n)),l}const leaveCbKey=Symbol("_leaveCb"),enterCbKey=Symbol("_enterCb");function useTransitionState(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{n.isMounted=!0}),onBeforeUnmount(()=>{n.isUnmounting=!0}),n}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=n=>{const e=n.subTree;return e.component?recursiveGetSubtree(e.component):e},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(n,{slots:e}){const o=getCurrentInstance(),a=useTransitionState();return()=>{const s=e.default&&getTransitionRawChildren(e.default(),!0);if(!s||!s.length)return;const l=findNonCommentChild(s),c=toRaw(n),{mode:d}=c;if(a.isLeaving)return emptyPlaceholder(l);const u=getInnerChild$1(l);if(!u)return emptyPlaceholder(l);let f=resolveTransitionHooks(u,c,a,o,b=>f=b);u.type!==Comment&&setTransitionHooks(u,f);let v=o.subTree&&getInnerChild$1(o.subTree);if(v&&v.type!==Comment&&!isSameVNodeType(u,v)&&recursiveGetSubtree(o).type!==Comment){let b=resolveTransitionHooks(v,c,a,o);if(setTransitionHooks(v,b),d==="out-in"&&u.type!==Comment)return a.isLeaving=!0,b.afterLeave=()=>{a.isLeaving=!1,o.job.flags&8||o.update(),delete b.afterLeave,v=void 0},emptyPlaceholder(l);d==="in-out"&&u.type!==Comment?b.delayLeave=(k,x,_)=>{const E=getLeavingNodesForType(a,v);E[String(v.key)]=v,k[leaveCbKey]=()=>{x(),k[leaveCbKey]=void 0,delete f.delayedLeave,v=void 0},f.delayedLeave=()=>{_(),delete f.delayedLeave,v=void 0}}:v=void 0}else v&&(v=void 0);return l}}};function findNonCommentChild(n){let e=n[0];if(n.length>1){for(const o of n)if(o.type!==Comment){e=o;break}}return e}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(n,e){const{leavingVNodes:o}=n;let a=o.get(e.type);return a||(a=Object.create(null),o.set(e.type,a)),a}function resolveTransitionHooks(n,e,o,a,s){const{appear:l,mode:c,persisted:d=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:v,onEnterCancelled:b,onBeforeLeave:k,onLeave:x,onAfterLeave:_,onLeaveCancelled:E,onBeforeAppear:B,onAppear:M,onAfterAppear:V,onAppearCancelled:F}=e,I=String(n.key),L=getLeavingNodesForType(o,n),U=(j,W)=>{j&&callWithAsyncErrorHandling(j,a,9,W)},Z=(j,W)=>{const Y=W[1];U(j,W),isArray$3(j)?j.every(G=>G.length<=1)&&Y():j.length<=1&&Y()},K={mode:c,persisted:d,beforeEnter(j){let W=u;if(!o.isMounted)if(l)W=B||u;else return;j[leaveCbKey]&&j[leaveCbKey](!0);const Y=L[I];Y&&isSameVNodeType(n,Y)&&Y.el[leaveCbKey]&&Y.el[leaveCbKey](),U(W,[j])},enter(j){let W=f,Y=v,G=b;if(!o.isMounted)if(l)W=M||f,Y=V||v,G=F||b;else return;let fe=!1;const le=j[enterCbKey]=pe=>{fe||(fe=!0,pe?U(G,[j]):U(Y,[j]),K.delayedLeave&&K.delayedLeave(),j[enterCbKey]=void 0)};W?Z(W,[j,le]):le()},leave(j,W){const Y=String(n.key);if(j[enterCbKey]&&j[enterCbKey](!0),o.isUnmounting)return W();U(k,[j]);let G=!1;const fe=j[leaveCbKey]=le=>{G||(G=!0,W(),le?U(E,[j]):U(_,[j]),j[leaveCbKey]=void 0,L[Y]===n&&delete L[Y])};L[Y]=n,x?Z(x,[j,fe]):fe()},clone(j){const W=resolveTransitionHooks(j,e,o,a,s);return s&&s(W),W}};return K}function emptyPlaceholder(n){if(isKeepAlive(n))return n=cloneVNode(n),n.children=null,n}function getInnerChild$1(n){if(!isKeepAlive(n))return isTeleport(n.type)&&n.children?findNonCommentChild(n.children):n;const{shapeFlag:e,children:o}=n;if(o){if(e&16)return o[0];if(e&32&&isFunction$2(o.default))return o.default()}}function setTransitionHooks(n,e){n.shapeFlag&6&&n.component?(n.transition=e,setTransitionHooks(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function getTransitionRawChildren(n,e=!1,o){let a=[],s=0;for(let l=0;l<n.length;l++){let c=n[l];const d=o==null?c.key:String(o)+String(c.key!=null?c.key:l);c.type===Fragment$1?(c.patchFlag&128&&s++,a=a.concat(getTransitionRawChildren(c.children,e,d))):(e||c.type!==Comment)&&a.push(d!=null?cloneVNode(c,{key:d}):c)}if(s>1)for(let l=0;l<a.length;l++)a[l].patchFlag=-2;return a}function defineComponent(n,e){return isFunction$2(n)?extend$1({name:n.name},e,{setup:n}):n}function useId(){const n=getCurrentInstance();return n?(n.appContext.config.idPrefix||"v")+"-"+n.ids[0]+n.ids[1]++:""}function markAsyncBoundary(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function setRef(n,e,o,a,s=!1){if(isArray$3(n)){n.forEach((_,E)=>setRef(_,e&&(isArray$3(e)?e[E]:e),o,a,s));return}if(isAsyncWrapper(a)&&!s){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&setRef(n,e,o,a.component.subTree);return}const l=a.shapeFlag&4?getComponentPublicInstance(a.component):a.el,c=s?null:l,{i:d,r:u}=n,f=e&&e.r,v=d.refs===EMPTY_OBJ?d.refs={}:d.refs,b=d.setupState,k=toRaw(b),x=b===EMPTY_OBJ?()=>!1:_=>hasOwn$1(k,_);if(f!=null&&f!==u&&(isString$2(f)?(v[f]=null,x(f)&&(b[f]=null)):isRef(f)&&(f.value=null)),isFunction$2(u))callWithErrorHandling(u,d,12,[c,v]);else{const _=isString$2(u),E=isRef(u);if(_||E){const B=()=>{if(n.f){const M=_?x(u)?b[u]:v[u]:u.value;s?isArray$3(M)&&remove$1(M,l):isArray$3(M)?M.includes(l)||M.push(l):_?(v[u]=[l],x(u)&&(b[u]=v[u])):(u.value=[l],n.k&&(v[n.k]=u.value))}else _?(v[u]=c,x(u)&&(b[u]=c)):E&&(u.value=c,n.k&&(v[n.k]=c))};c?(B.id=-1,queuePostRenderEffect(B,o)):B()}}}getGlobalThis$1().requestIdleCallback,getGlobalThis$1().cancelIdleCallback;const isAsyncWrapper=n=>!!n.type.__asyncLoader,isKeepAlive=n=>n.type.__isKeepAlive;function onActivated(n,e){registerKeepAliveHook(n,"a",e)}function onDeactivated(n,e){registerKeepAliveHook(n,"da",e)}function registerKeepAliveHook(n,e,o=currentInstance){const a=n.__wdc||(n.__wdc=()=>{let s=o;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(injectHook(e,a,o),o){let s=o.parent;for(;s&&s.parent;)isKeepAlive(s.parent.vnode)&&injectToKeepAliveRoot(a,e,o,s),s=s.parent}}function injectToKeepAliveRoot(n,e,o,a){const s=injectHook(e,n,a,!0);onUnmounted(()=>{remove$1(a[e],s)},o)}function injectHook(n,e,o=currentInstance,a=!1){if(o){const s=o[n]||(o[n]=[]),l=e.__weh||(e.__weh=(...c)=>{pauseTracking();const d=setCurrentInstance(o),u=callWithAsyncErrorHandling(e,o,n,c);return d(),resetTracking(),u});return a?s.unshift(l):s.push(l),l}}const createHook=n=>(e,o=currentInstance)=>{(!isInSSRComponentSetup||n==="sp")&&injectHook(n,(...a)=>e(...a),o)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(n,e=currentInstance){injectHook("ec",n,e)}const COMPONENTS="components";function resolveComponent(n,e){return resolveAsset(COMPONENTS,n,!0,e)||n}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(n){return isString$2(n)?resolveAsset(COMPONENTS,n,!1)||n:n||NULL_DYNAMIC_COMPONENT}function resolveAsset(n,e,o=!0,a=!1){const s=currentRenderingInstance||currentInstance;if(s){const l=s.type;{const d=getComponentName(l,!1);if(d&&(d===e||d===camelize(e)||d===capitalize$1(camelize(e))))return l}const c=resolve(s[n]||l[n],e)||resolve(s.appContext[n],e);return!c&&a?l:c}}function resolve(n,e){return n&&(n[e]||n[camelize(e)]||n[capitalize$1(camelize(e))])}function renderList(n,e,o,a){let s;const l=o,c=isArray$3(n);if(c||isString$2(n)){const d=c&&isReactive(n);let u=!1;d&&(u=!isShallow(n),n=shallowReadArray(n)),s=new Array(n.length);for(let f=0,v=n.length;f<v;f++)s[f]=e(u?toReactive(n[f]):n[f],f,void 0,l)}else if(typeof n=="number"){s=new Array(n);for(let d=0;d<n;d++)s[d]=e(d+1,d,void 0,l)}else if(isObject$3(n))if(n[Symbol.iterator])s=Array.from(n,(d,u)=>e(d,u,void 0,l));else{const d=Object.keys(n);s=new Array(d.length);for(let u=0,f=d.length;u<f;u++){const v=d[u];s[u]=e(n[v],v,u,l)}}else s=[];return s}function renderSlot(n,e,o={},a,s){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return e!=="default"&&(o.name=e),openBlock(),createBlock(Fragment$1,null,[createVNode("slot",o,a&&a())],64);let l=n[e];l&&l._c&&(l._d=!1),openBlock();const c=l&&ensureValidVNode(l(o)),d=o.key||c&&c.key,u=createBlock(Fragment$1,{key:(d&&!isSymbol(d)?d:`_${e}`)+(!c&&a?"_fb":"")},c||(a?a():[]),c&&n._===1?64:-2);return u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),l&&l._c&&(l._d=!0),u}function ensureValidVNode(n){return n.some(e=>isVNode$1(e)?!(e.type===Comment||e.type===Fragment$1&&!ensureValidVNode(e.children)):!0)?n:null}function toHandlers(n,e){const o={};for(const a in n)o[toHandlerKey(a)]=n[a];return o}const getPublicInstance=n=>n?isStatefulComponent(n)?getComponentPublicInstance(n):getPublicInstance(n.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>getPublicInstance(n.parent),$root:n=>getPublicInstance(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>resolveMergedOptions(n),$forceUpdate:n=>n.f||(n.f=()=>{queueJob(n.update)}),$nextTick:n=>n.n||(n.n=nextTick.bind(n.proxy)),$watch:n=>instanceWatch.bind(n)}),hasSetupBinding=(n,e)=>n!==EMPTY_OBJ&&!n.__isScriptSetup&&hasOwn$1(n,e),PublicInstanceProxyHandlers={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:o,setupState:a,data:s,props:l,accessCache:c,type:d,appContext:u}=n;let f;if(e[0]!=="$"){const x=c[e];if(x!==void 0)switch(x){case 1:return a[e];case 2:return s[e];case 4:return o[e];case 3:return l[e]}else{if(hasSetupBinding(a,e))return c[e]=1,a[e];if(s!==EMPTY_OBJ&&hasOwn$1(s,e))return c[e]=2,s[e];if((f=n.propsOptions[0])&&hasOwn$1(f,e))return c[e]=3,l[e];if(o!==EMPTY_OBJ&&hasOwn$1(o,e))return c[e]=4,o[e];shouldCacheAccess&&(c[e]=0)}}const v=publicPropertiesMap[e];let b,k;if(v)return e==="$attrs"&&track(n.attrs,"get",""),v(n);if((b=d.__cssModules)&&(b=b[e]))return b;if(o!==EMPTY_OBJ&&hasOwn$1(o,e))return c[e]=4,o[e];if(k=u.config.globalProperties,hasOwn$1(k,e))return k[e]},set({_:n},e,o){const{data:a,setupState:s,ctx:l}=n;return hasSetupBinding(s,e)?(s[e]=o,!0):a!==EMPTY_OBJ&&hasOwn$1(a,e)?(a[e]=o,!0):hasOwn$1(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(l[e]=o,!0)},has({_:{data:n,setupState:e,accessCache:o,ctx:a,appContext:s,propsOptions:l}},c){let d;return!!o[c]||n!==EMPTY_OBJ&&hasOwn$1(n,c)||hasSetupBinding(e,c)||(d=l[0])&&hasOwn$1(d,c)||hasOwn$1(a,c)||hasOwn$1(publicPropertiesMap,c)||hasOwn$1(s.config.globalProperties,c)},defineProperty(n,e,o){return o.get!=null?n._.accessCache[e]=0:hasOwn$1(o,"value")&&this.set(n,e,o.value,null),Reflect.defineProperty(n,e,o)}};function useSlots(){return getContext().slots}function getContext(){const n=getCurrentInstance();return n.setupContext||(n.setupContext=createSetupContext(n))}function normalizePropsOrEmits(n){return isArray$3(n)?n.reduce((e,o)=>(e[o]=null,e),{}):n}function mergeDefaults(n,e){const o=normalizePropsOrEmits(n);for(const a in e){if(a.startsWith("__skip"))continue;let s=o[a];s?isArray$3(s)||isFunction$2(s)?s=o[a]={type:s,default:e[a]}:s.default=e[a]:s===null&&(s=o[a]={default:e[a]}),s&&e[`__skip_${a}`]&&(s.skipFactory=!0)}return o}function mergeModels(n,e){return!n||!e?n||e:isArray$3(n)&&isArray$3(e)?n.concat(e):extend$1({},normalizePropsOrEmits(n),normalizePropsOrEmits(e))}let shouldCacheAccess=!0;function applyOptions(n){const e=resolveMergedOptions(n),o=n.proxy,a=n.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,n,"bc");const{data:s,computed:l,methods:c,watch:d,provide:u,inject:f,created:v,beforeMount:b,mounted:k,beforeUpdate:x,updated:_,activated:E,deactivated:B,beforeDestroy:M,beforeUnmount:V,destroyed:F,unmounted:I,render:L,renderTracked:U,renderTriggered:Z,errorCaptured:K,serverPrefetch:j,expose:W,inheritAttrs:Y,components:G,directives:fe,filters:le}=e;if(f&&resolveInjections(f,a,null),c)for(const ue in c){const Ne=c[ue];isFunction$2(Ne)&&(a[ue]=Ne.bind(o))}if(s){const ue=s.call(o,o);isObject$3(ue)&&(n.data=reactive(ue))}if(shouldCacheAccess=!0,l)for(const ue in l){const Ne=l[ue],Ve=isFunction$2(Ne)?Ne.bind(o,o):isFunction$2(Ne.get)?Ne.get.bind(o,o):NOOP,Ze=!isFunction$2(Ne)&&isFunction$2(Ne.set)?Ne.set.bind(o):NOOP,We=computed({get:Ve,set:Ze});Object.defineProperty(a,ue,{enumerable:!0,configurable:!0,get:()=>We.value,set:ze=>We.value=ze})}if(d)for(const ue in d)createWatcher(d[ue],a,o,ue);if(u){const ue=isFunction$2(u)?u.call(o):u;Reflect.ownKeys(ue).forEach(Ne=>{provide(Ne,ue[Ne])})}v&&callHook$1(v,n,"c");function pe(ue,Ne){isArray$3(Ne)?Ne.forEach(Ve=>ue(Ve.bind(o))):Ne&&ue(Ne.bind(o))}if(pe(onBeforeMount,b),pe(onMounted,k),pe(onBeforeUpdate,x),pe(onUpdated,_),pe(onActivated,E),pe(onDeactivated,B),pe(onErrorCaptured,K),pe(onRenderTracked,U),pe(onRenderTriggered,Z),pe(onBeforeUnmount,V),pe(onUnmounted,I),pe(onServerPrefetch,j),isArray$3(W))if(W.length){const ue=n.exposed||(n.exposed={});W.forEach(Ne=>{Object.defineProperty(ue,Ne,{get:()=>o[Ne],set:Ve=>o[Ne]=Ve})})}else n.exposed||(n.exposed={});L&&n.render===NOOP&&(n.render=L),Y!=null&&(n.inheritAttrs=Y),G&&(n.components=G),fe&&(n.directives=fe),j&&markAsyncBoundary(n)}function resolveInjections(n,e,o=NOOP){isArray$3(n)&&(n=normalizeInject(n));for(const a in n){const s=n[a];let l;isObject$3(s)?"default"in s?l=inject(s.from||a,s.default,!0):l=inject(s.from||a):l=inject(s),isRef(l)?Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>l.value,set:c=>l.value=c}):e[a]=l}}function callHook$1(n,e,o){callWithAsyncErrorHandling(isArray$3(n)?n.map(a=>a.bind(e.proxy)):n.bind(e.proxy),e,o)}function createWatcher(n,e,o,a){let s=a.includes(".")?createPathGetter(o,a):()=>o[a];if(isString$2(n)){const l=e[n];isFunction$2(l)&&watch(s,l)}else if(isFunction$2(n))watch(s,n.bind(o));else if(isObject$3(n))if(isArray$3(n))n.forEach(l=>createWatcher(l,e,o,a));else{const l=isFunction$2(n.handler)?n.handler.bind(o):e[n.handler];isFunction$2(l)&&watch(s,l,n)}}function resolveMergedOptions(n){const e=n.type,{mixins:o,extends:a}=e,{mixins:s,optionsCache:l,config:{optionMergeStrategies:c}}=n.appContext,d=l.get(e);let u;return d?u=d:!s.length&&!o&&!a?u=e:(u={},s.length&&s.forEach(f=>mergeOptions$1(u,f,c,!0)),mergeOptions$1(u,e,c)),isObject$3(e)&&l.set(e,u),u}function mergeOptions$1(n,e,o,a=!1){const{mixins:s,extends:l}=e;l&&mergeOptions$1(n,l,o,!0),s&&s.forEach(c=>mergeOptions$1(n,c,o,!0));for(const c in e)if(!(a&&c==="expose")){const d=internalOptionMergeStrats[c]||o&&o[c];n[c]=d?d(n[c],e[c]):e[c]}return n}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(n,e){return e?n?function(){return extend$1(isFunction$2(n)?n.call(this,this):n,isFunction$2(e)?e.call(this,this):e)}:e:n}function mergeInject(n,e){return mergeObjectOptions(normalizeInject(n),normalizeInject(e))}function normalizeInject(n){if(isArray$3(n)){const e={};for(let o=0;o<n.length;o++)e[n[o]]=n[o];return e}return n}function mergeAsArray(n,e){return n?[...new Set([].concat(n,e))]:e}function mergeObjectOptions(n,e){return n?extend$1(Object.create(null),n,e):e}function mergeEmitsOrPropsOptions(n,e){return n?isArray$3(n)&&isArray$3(e)?[...new Set([...n,...e])]:extend$1(Object.create(null),normalizePropsOrEmits(n),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(n,e){if(!n)return e;if(!e)return n;const o=extend$1(Object.create(null),n);for(const a in e)o[a]=mergeAsArray(n[a],e[a]);return o}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(n,e){return function(o,a=null){isFunction$2(o)||(o=extend$1({},o)),a!=null&&!isObject$3(a)&&(a=null);const s=createAppContext(),l=new WeakSet,c=[];let d=!1;const u=s.app={_uid:uid$1++,_component:o,_props:a,_container:null,_context:s,_instance:null,version:version$1,get config(){return s.config},set config(f){},use(f,...v){return l.has(f)||(f&&isFunction$2(f.install)?(l.add(f),f.install(u,...v)):isFunction$2(f)&&(l.add(f),f(u,...v))),u},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),u},component(f,v){return v?(s.components[f]=v,u):s.components[f]},directive(f,v){return v?(s.directives[f]=v,u):s.directives[f]},mount(f,v,b){if(!d){const k=u._ceVNode||createVNode(o,a);return k.appContext=s,b===!0?b="svg":b===!1&&(b=void 0),n(k,f,b),d=!0,u._container=f,f.__vue_app__=u,getComponentPublicInstance(k.component)}},onUnmount(f){c.push(f)},unmount(){d&&(callWithAsyncErrorHandling(c,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(f,v){return s.provides[f]=v,u},runWithContext(f){const v=currentApp;currentApp=u;try{return f()}finally{currentApp=v}}};return u}}let currentApp=null;function provide(n,e){if(currentInstance){let o=currentInstance.provides;const a=currentInstance.parent&&currentInstance.parent.provides;a===o&&(o=currentInstance.provides=Object.create(a)),o[n]=e}}function inject(n,e,o=!1){const a=currentInstance||currentRenderingInstance;if(a||currentApp){const s=currentApp?currentApp._context.provides:a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return o&&isFunction$2(e)?e.call(a&&a.proxy):e}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=n=>Object.getPrototypeOf(n)===internalObjectProto;function initProps(n,e,o,a=!1){const s={},l=createInternalObject();n.propsDefaults=Object.create(null),setFullProps(n,e,s,l);for(const c in n.propsOptions[0])c in s||(s[c]=void 0);o?n.props=a?s:shallowReactive(s):n.type.props?n.props=s:n.props=l,n.attrs=l}function updateProps(n,e,o,a){const{props:s,attrs:l,vnode:{patchFlag:c}}=n,d=toRaw(s),[u]=n.propsOptions;let f=!1;if((a||c>0)&&!(c&16)){if(c&8){const v=n.vnode.dynamicProps;for(let b=0;b<v.length;b++){let k=v[b];if(isEmitListener(n.emitsOptions,k))continue;const x=e[k];if(u)if(hasOwn$1(l,k))x!==l[k]&&(l[k]=x,f=!0);else{const _=camelize(k);s[_]=resolvePropValue(u,d,_,x,n,!1)}else x!==l[k]&&(l[k]=x,f=!0)}}}else{setFullProps(n,e,s,l)&&(f=!0);let v;for(const b in d)(!e||!hasOwn$1(e,b)&&((v=hyphenate$1(b))===b||!hasOwn$1(e,v)))&&(u?o&&(o[b]!==void 0||o[v]!==void 0)&&(s[b]=resolvePropValue(u,d,b,void 0,n,!0)):delete s[b]);if(l!==d)for(const b in l)(!e||!hasOwn$1(e,b))&&(delete l[b],f=!0)}f&&trigger(n.attrs,"set","")}function setFullProps(n,e,o,a){const[s,l]=n.propsOptions;let c=!1,d;if(e)for(let u in e){if(isReservedProp(u))continue;const f=e[u];let v;s&&hasOwn$1(s,v=camelize(u))?!l||!l.includes(v)?o[v]=f:(d||(d={}))[v]=f:isEmitListener(n.emitsOptions,u)||(!(u in a)||f!==a[u])&&(a[u]=f,c=!0)}if(l){const u=toRaw(o),f=d||EMPTY_OBJ;for(let v=0;v<l.length;v++){const b=l[v];o[b]=resolvePropValue(s,u,b,f[b],n,!hasOwn$1(f,b))}}return c}function resolvePropValue(n,e,o,a,s,l){const c=n[o];if(c!=null){const d=hasOwn$1(c,"default");if(d&&a===void 0){const u=c.default;if(c.type!==Function&&!c.skipFactory&&isFunction$2(u)){const{propsDefaults:f}=s;if(o in f)a=f[o];else{const v=setCurrentInstance(s);a=f[o]=u.call(null,e),v()}}else a=u;s.ce&&s.ce._setProp(o,a)}c[0]&&(l&&!d?a=!1:c[1]&&(a===""||a===hyphenate$1(o))&&(a=!0))}return a}const mixinPropsCache=new WeakMap;function normalizePropsOptions(n,e,o=!1){const a=o?mixinPropsCache:e.propsCache,s=a.get(n);if(s)return s;const l=n.props,c={},d=[];let u=!1;if(!isFunction$2(n)){const v=b=>{u=!0;const[k,x]=normalizePropsOptions(b,e,!0);extend$1(c,k),x&&d.push(...x)};!o&&e.mixins.length&&e.mixins.forEach(v),n.extends&&v(n.extends),n.mixins&&n.mixins.forEach(v)}if(!l&&!u)return isObject$3(n)&&a.set(n,EMPTY_ARR),EMPTY_ARR;if(isArray$3(l))for(let v=0;v<l.length;v++){const b=camelize(l[v]);validatePropName(b)&&(c[b]=EMPTY_OBJ)}else if(l)for(const v in l){const b=camelize(v);if(validatePropName(b)){const k=l[v],x=c[b]=isArray$3(k)||isFunction$2(k)?{type:k}:extend$1({},k),_=x.type;let E=!1,B=!0;if(isArray$3(_))for(let M=0;M<_.length;++M){const V=_[M],F=isFunction$2(V)&&V.name;if(F==="Boolean"){E=!0;break}else F==="String"&&(B=!1)}else E=isFunction$2(_)&&_.name==="Boolean";x[0]=E,x[1]=B,(E||hasOwn$1(x,"default"))&&d.push(b)}}const f=[c,d];return isObject$3(n)&&a.set(n,f),f}function validatePropName(n){return n[0]!=="$"&&!isReservedProp(n)}const isInternalKey=n=>n[0]==="_"||n==="$stable",normalizeSlotValue=n=>isArray$3(n)?n.map(normalizeVNode):[normalizeVNode(n)],normalizeSlot$1=(n,e,o)=>{if(e._n)return e;const a=withCtx((...s)=>normalizeSlotValue(e(...s)),o);return a._c=!1,a},normalizeObjectSlots=(n,e,o)=>{const a=n._ctx;for(const s in n){if(isInternalKey(s))continue;const l=n[s];if(isFunction$2(l))e[s]=normalizeSlot$1(s,l,a);else if(l!=null){const c=normalizeSlotValue(l);e[s]=()=>c}}},normalizeVNodeSlots=(n,e)=>{const o=normalizeSlotValue(e);n.slots.default=()=>o},assignSlots=(n,e,o)=>{for(const a in e)(o||a!=="_")&&(n[a]=e[a])},initSlots=(n,e,o)=>{const a=n.slots=createInternalObject();if(n.vnode.shapeFlag&32){const s=e._;s?(assignSlots(a,e,o),o&&def(a,"_",s,!0)):normalizeObjectSlots(e,a)}else e&&normalizeVNodeSlots(n,e)},updateSlots=(n,e,o)=>{const{vnode:a,slots:s}=n;let l=!0,c=EMPTY_OBJ;if(a.shapeFlag&32){const d=e._;d?o&&d===1?l=!1:assignSlots(s,e,o):(l=!e.$stable,normalizeObjectSlots(e,s)),c=e}else e&&(normalizeVNodeSlots(n,e),c={default:1});if(l)for(const d in s)!isInternalKey(d)&&c[d]==null&&delete s[d]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(n){return baseCreateRenderer(n)}function baseCreateRenderer(n,e){const o=getGlobalThis$1();o.__VUE__=!0;const{insert:a,remove:s,patchProp:l,createElement:c,createText:d,createComment:u,setText:f,setElementText:v,parentNode:b,nextSibling:k,setScopeId:x=NOOP,insertStaticContent:_}=n,E=(ee,oe,se,ge=null,_e=null,ke=null,Ee=void 0,te=null,re=!!oe.dynamicChildren)=>{if(ee===oe)return;ee&&!isSameVNodeType(ee,oe)&&(ge=Te(ee),qe(ee,_e,ke,!0),ee=null),oe.patchFlag===-2&&(re=!1,oe.dynamicChildren=null);const{type:de,ref:Oe,shapeFlag:me}=oe;switch(de){case Text$1:B(ee,oe,se,ge);break;case Comment:M(ee,oe,se,ge);break;case Static:ee==null&&V(oe,se,ge,Ee);break;case Fragment$1:G(ee,oe,se,ge,_e,ke,Ee,te,re);break;default:me&1?L(ee,oe,se,ge,_e,ke,Ee,te,re):me&6?fe(ee,oe,se,ge,_e,ke,Ee,te,re):(me&64||me&128)&&de.process(ee,oe,se,ge,_e,ke,Ee,te,re,ce)}Oe!=null&&_e&&setRef(Oe,ee&&ee.ref,ke,oe||ee,!oe)},B=(ee,oe,se,ge)=>{if(ee==null)a(oe.el=d(oe.children),se,ge);else{const _e=oe.el=ee.el;oe.children!==ee.children&&f(_e,oe.children)}},M=(ee,oe,se,ge)=>{ee==null?a(oe.el=u(oe.children||""),se,ge):oe.el=ee.el},V=(ee,oe,se,ge)=>{[ee.el,ee.anchor]=_(ee.children,oe,se,ge,ee.el,ee.anchor)},F=({el:ee,anchor:oe},se,ge)=>{let _e;for(;ee&&ee!==oe;)_e=k(ee),a(ee,se,ge),ee=_e;a(oe,se,ge)},I=({el:ee,anchor:oe})=>{let se;for(;ee&&ee!==oe;)se=k(ee),s(ee),ee=se;s(oe)},L=(ee,oe,se,ge,_e,ke,Ee,te,re)=>{oe.type==="svg"?Ee="svg":oe.type==="math"&&(Ee="mathml"),ee==null?U(oe,se,ge,_e,ke,Ee,te,re):j(ee,oe,_e,ke,Ee,te,re)},U=(ee,oe,se,ge,_e,ke,Ee,te)=>{let re,de;const{props:Oe,shapeFlag:me,transition:Be,dirs:ht}=ee;if(re=ee.el=c(ee.type,ke,Oe&&Oe.is,Oe),me&8?v(re,ee.children):me&16&&K(ee.children,re,null,ge,_e,resolveChildrenNamespace(ee,ke),Ee,te),ht&&invokeDirectiveHook(ee,null,ge,"created"),Z(re,ee,ee.scopeId,Ee,ge),Oe){for(const xt in Oe)xt!=="value"&&!isReservedProp(xt)&&l(re,xt,null,Oe[xt],ke,ge);"value"in Oe&&l(re,"value",null,Oe.value,ke),(de=Oe.onVnodeBeforeMount)&&invokeVNodeHook(de,ge,ee)}ht&&invokeDirectiveHook(ee,null,ge,"beforeMount");const pt=needTransition(_e,Be);pt&&Be.beforeEnter(re),a(re,oe,se),((de=Oe&&Oe.onVnodeMounted)||pt||ht)&&queuePostRenderEffect(()=>{de&&invokeVNodeHook(de,ge,ee),pt&&Be.enter(re),ht&&invokeDirectiveHook(ee,null,ge,"mounted")},_e)},Z=(ee,oe,se,ge,_e)=>{if(se&&x(ee,se),ge)for(let ke=0;ke<ge.length;ke++)x(ee,ge[ke]);if(_e){let ke=_e.subTree;if(oe===ke||isSuspense(ke.type)&&(ke.ssContent===oe||ke.ssFallback===oe)){const Ee=_e.vnode;Z(ee,Ee,Ee.scopeId,Ee.slotScopeIds,_e.parent)}}},K=(ee,oe,se,ge,_e,ke,Ee,te,re=0)=>{for(let de=re;de<ee.length;de++){const Oe=ee[de]=te?cloneIfMounted(ee[de]):normalizeVNode(ee[de]);E(null,Oe,oe,se,ge,_e,ke,Ee,te)}},j=(ee,oe,se,ge,_e,ke,Ee)=>{const te=oe.el=ee.el;let{patchFlag:re,dynamicChildren:de,dirs:Oe}=oe;re|=ee.patchFlag&16;const me=ee.props||EMPTY_OBJ,Be=oe.props||EMPTY_OBJ;let ht;if(se&&toggleRecurse(se,!1),(ht=Be.onVnodeBeforeUpdate)&&invokeVNodeHook(ht,se,oe,ee),Oe&&invokeDirectiveHook(oe,ee,se,"beforeUpdate"),se&&toggleRecurse(se,!0),(me.innerHTML&&Be.innerHTML==null||me.textContent&&Be.textContent==null)&&v(te,""),de?W(ee.dynamicChildren,de,te,se,ge,resolveChildrenNamespace(oe,_e),ke):Ee||Ve(ee,oe,te,null,se,ge,resolveChildrenNamespace(oe,_e),ke,!1),re>0){if(re&16)Y(te,me,Be,se,_e);else if(re&2&&me.class!==Be.class&&l(te,"class",null,Be.class,_e),re&4&&l(te,"style",me.style,Be.style,_e),re&8){const pt=oe.dynamicProps;for(let xt=0;xt<pt.length;xt++){const bt=pt[xt],St=me[bt],Ct=Be[bt];(Ct!==St||bt==="value")&&l(te,bt,St,Ct,_e,se)}}re&1&&ee.children!==oe.children&&v(te,oe.children)}else!Ee&&de==null&&Y(te,me,Be,se,_e);((ht=Be.onVnodeUpdated)||Oe)&&queuePostRenderEffect(()=>{ht&&invokeVNodeHook(ht,se,oe,ee),Oe&&invokeDirectiveHook(oe,ee,se,"updated")},ge)},W=(ee,oe,se,ge,_e,ke,Ee)=>{for(let te=0;te<oe.length;te++){const re=ee[te],de=oe[te],Oe=re.el&&(re.type===Fragment$1||!isSameVNodeType(re,de)||re.shapeFlag&70)?b(re.el):se;E(re,de,Oe,null,ge,_e,ke,Ee,!0)}},Y=(ee,oe,se,ge,_e)=>{if(oe!==se){if(oe!==EMPTY_OBJ)for(const ke in oe)!isReservedProp(ke)&&!(ke in se)&&l(ee,ke,oe[ke],null,_e,ge);for(const ke in se){if(isReservedProp(ke))continue;const Ee=se[ke],te=oe[ke];Ee!==te&&ke!=="value"&&l(ee,ke,te,Ee,_e,ge)}"value"in se&&l(ee,"value",oe.value,se.value,_e)}},G=(ee,oe,se,ge,_e,ke,Ee,te,re)=>{const de=oe.el=ee?ee.el:d(""),Oe=oe.anchor=ee?ee.anchor:d("");let{patchFlag:me,dynamicChildren:Be,slotScopeIds:ht}=oe;ht&&(te=te?te.concat(ht):ht),ee==null?(a(de,se,ge),a(Oe,se,ge),K(oe.children||[],se,Oe,_e,ke,Ee,te,re)):me>0&&me&64&&Be&&ee.dynamicChildren?(W(ee.dynamicChildren,Be,se,_e,ke,Ee,te),(oe.key!=null||_e&&oe===_e.subTree)&&traverseStaticChildren(ee,oe,!0)):Ve(ee,oe,se,Oe,_e,ke,Ee,te,re)},fe=(ee,oe,se,ge,_e,ke,Ee,te,re)=>{oe.slotScopeIds=te,ee==null?oe.shapeFlag&512?_e.ctx.activate(oe,se,ge,Ee,re):le(oe,se,ge,_e,ke,Ee,re):pe(ee,oe,re)},le=(ee,oe,se,ge,_e,ke,Ee)=>{const te=ee.component=createComponentInstance(ee,ge,_e);if(isKeepAlive(ee)&&(te.ctx.renderer=ce),setupComponent(te,!1,Ee),te.asyncDep){if(_e&&_e.registerDep(te,ue,Ee),!ee.el){const re=te.subTree=createVNode(Comment);M(null,re,oe,se)}}else ue(te,ee,oe,se,_e,ke,Ee)},pe=(ee,oe,se)=>{const ge=oe.component=ee.component;if(shouldUpdateComponent(ee,oe,se))if(ge.asyncDep&&!ge.asyncResolved){Ne(ge,oe,se);return}else ge.next=oe,ge.update();else oe.el=ee.el,ge.vnode=oe},ue=(ee,oe,se,ge,_e,ke,Ee)=>{const te=()=>{if(ee.isMounted){let{next:me,bu:Be,u:ht,parent:pt,vnode:xt}=ee;{const Ut=locateNonHydratedAsyncRoot(ee);if(Ut){me&&(me.el=xt.el,Ne(ee,me,Ee)),Ut.asyncDep.then(()=>{ee.isUnmounted||te()});return}}let bt=me,St;toggleRecurse(ee,!1),me?(me.el=xt.el,Ne(ee,me,Ee)):me=xt,Be&&invokeArrayFns(Be),(St=me.props&&me.props.onVnodeBeforeUpdate)&&invokeVNodeHook(St,pt,me,xt),toggleRecurse(ee,!0);const Ct=renderComponentRoot(ee),$t=ee.subTree;ee.subTree=Ct,E($t,Ct,b($t.el),Te($t),ee,_e,ke),me.el=Ct.el,bt===null&&updateHOCHostEl(ee,Ct.el),ht&&queuePostRenderEffect(ht,_e),(St=me.props&&me.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(St,pt,me,xt),_e)}else{let me;const{el:Be,props:ht}=oe,{bm:pt,m:xt,parent:bt,root:St,type:Ct}=ee,$t=isAsyncWrapper(oe);toggleRecurse(ee,!1),pt&&invokeArrayFns(pt),!$t&&(me=ht&&ht.onVnodeBeforeMount)&&invokeVNodeHook(me,bt,oe),toggleRecurse(ee,!0);{St.ce&&St.ce._injectChildStyle(Ct);const Ut=ee.subTree=renderComponentRoot(ee);E(null,Ut,se,ge,ee,_e,ke),oe.el=Ut.el}if(xt&&queuePostRenderEffect(xt,_e),!$t&&(me=ht&&ht.onVnodeMounted)){const Ut=oe;queuePostRenderEffect(()=>invokeVNodeHook(me,bt,Ut),_e)}(oe.shapeFlag&256||bt&&isAsyncWrapper(bt.vnode)&&bt.vnode.shapeFlag&256)&&ee.a&&queuePostRenderEffect(ee.a,_e),ee.isMounted=!0,oe=se=ge=null}};ee.scope.on();const re=ee.effect=new ReactiveEffect(te);ee.scope.off();const de=ee.update=re.run.bind(re),Oe=ee.job=re.runIfDirty.bind(re);Oe.i=ee,Oe.id=ee.uid,re.scheduler=()=>queueJob(Oe),toggleRecurse(ee,!0),de()},Ne=(ee,oe,se)=>{oe.component=ee;const ge=ee.vnode.props;ee.vnode=oe,ee.next=null,updateProps(ee,oe.props,ge,se),updateSlots(ee,oe.children,se),pauseTracking(),flushPreFlushCbs(ee),resetTracking()},Ve=(ee,oe,se,ge,_e,ke,Ee,te,re=!1)=>{const de=ee&&ee.children,Oe=ee?ee.shapeFlag:0,me=oe.children,{patchFlag:Be,shapeFlag:ht}=oe;if(Be>0){if(Be&128){We(de,me,se,ge,_e,ke,Ee,te,re);return}else if(Be&256){Ze(de,me,se,ge,_e,ke,Ee,te,re);return}}ht&8?(Oe&16&&ft(de,_e,ke),me!==de&&v(se,me)):Oe&16?ht&16?We(de,me,se,ge,_e,ke,Ee,te,re):ft(de,_e,ke,!0):(Oe&8&&v(se,""),ht&16&&K(me,se,ge,_e,ke,Ee,te,re))},Ze=(ee,oe,se,ge,_e,ke,Ee,te,re)=>{ee=ee||EMPTY_ARR,oe=oe||EMPTY_ARR;const de=ee.length,Oe=oe.length,me=Math.min(de,Oe);let Be;for(Be=0;Be<me;Be++){const ht=oe[Be]=re?cloneIfMounted(oe[Be]):normalizeVNode(oe[Be]);E(ee[Be],ht,se,null,_e,ke,Ee,te,re)}de>Oe?ft(ee,_e,ke,!0,!1,me):K(oe,se,ge,_e,ke,Ee,te,re,me)},We=(ee,oe,se,ge,_e,ke,Ee,te,re)=>{let de=0;const Oe=oe.length;let me=ee.length-1,Be=Oe-1;for(;de<=me&&de<=Be;){const ht=ee[de],pt=oe[de]=re?cloneIfMounted(oe[de]):normalizeVNode(oe[de]);if(isSameVNodeType(ht,pt))E(ht,pt,se,null,_e,ke,Ee,te,re);else break;de++}for(;de<=me&&de<=Be;){const ht=ee[me],pt=oe[Be]=re?cloneIfMounted(oe[Be]):normalizeVNode(oe[Be]);if(isSameVNodeType(ht,pt))E(ht,pt,se,null,_e,ke,Ee,te,re);else break;me--,Be--}if(de>me){if(de<=Be){const ht=Be+1,pt=ht<Oe?oe[ht].el:ge;for(;de<=Be;)E(null,oe[de]=re?cloneIfMounted(oe[de]):normalizeVNode(oe[de]),se,pt,_e,ke,Ee,te,re),de++}}else if(de>Be)for(;de<=me;)qe(ee[de],_e,ke,!0),de++;else{const ht=de,pt=de,xt=new Map;for(de=pt;de<=Be;de++){const Et=oe[de]=re?cloneIfMounted(oe[de]):normalizeVNode(oe[de]);Et.key!=null&&xt.set(Et.key,de)}let bt,St=0;const Ct=Be-pt+1;let $t=!1,Ut=0;const Pt=new Array(Ct);for(de=0;de<Ct;de++)Pt[de]=0;for(de=ht;de<=me;de++){const Et=ee[de];if(St>=Ct){qe(Et,_e,ke,!0);continue}let Kt;if(Et.key!=null)Kt=xt.get(Et.key);else for(bt=pt;bt<=Be;bt++)if(Pt[bt-pt]===0&&isSameVNodeType(Et,oe[bt])){Kt=bt;break}Kt===void 0?qe(Et,_e,ke,!0):(Pt[Kt-pt]=de+1,Kt>=Ut?Ut=Kt:$t=!0,E(Et,oe[Kt],se,null,_e,ke,Ee,te,re),St++)}const Gt=$t?getSequence(Pt):EMPTY_ARR;for(bt=Gt.length-1,de=Ct-1;de>=0;de--){const Et=pt+de,Kt=oe[Et],dn=Et+1<Oe?oe[Et+1].el:ge;Pt[de]===0?E(null,Kt,se,dn,_e,ke,Ee,te,re):$t&&(bt<0||de!==Gt[bt]?ze(Kt,se,dn,2):bt--)}}},ze=(ee,oe,se,ge,_e=null)=>{const{el:ke,type:Ee,transition:te,children:re,shapeFlag:de}=ee;if(de&6){ze(ee.component.subTree,oe,se,ge);return}if(de&128){ee.suspense.move(oe,se,ge);return}if(de&64){Ee.move(ee,oe,se,ce);return}if(Ee===Fragment$1){a(ke,oe,se);for(let Oe=0;Oe<re.length;Oe++)ze(re[Oe],oe,se,ge);a(ee.anchor,oe,se);return}if(Ee===Static){F(ee,oe,se);return}if(ge!==2&&de&1&&te)if(ge===0)te.beforeEnter(ke),a(ke,oe,se),queuePostRenderEffect(()=>te.enter(ke),_e);else{const{leave:Oe,delayLeave:me,afterLeave:Be}=te,ht=()=>a(ke,oe,se),pt=()=>{Oe(ke,()=>{ht(),Be&&Be()})};me?me(ke,ht,pt):pt()}else a(ke,oe,se)},qe=(ee,oe,se,ge=!1,_e=!1)=>{const{type:ke,props:Ee,ref:te,children:re,dynamicChildren:de,shapeFlag:Oe,patchFlag:me,dirs:Be,cacheIndex:ht}=ee;if(me===-2&&(_e=!1),te!=null&&setRef(te,null,se,ee,!0),ht!=null&&(oe.renderCache[ht]=void 0),Oe&256){oe.ctx.deactivate(ee);return}const pt=Oe&1&&Be,xt=!isAsyncWrapper(ee);let bt;if(xt&&(bt=Ee&&Ee.onVnodeBeforeUnmount)&&invokeVNodeHook(bt,oe,ee),Oe&6)Ge(ee.component,se,ge);else{if(Oe&128){ee.suspense.unmount(se,ge);return}pt&&invokeDirectiveHook(ee,null,oe,"beforeUnmount"),Oe&64?ee.type.remove(ee,oe,se,ce,ge):de&&!de.hasOnce&&(ke!==Fragment$1||me>0&&me&64)?ft(de,oe,se,!1,!0):(ke===Fragment$1&&me&384||!_e&&Oe&16)&&ft(re,oe,se),ge&&dt(ee)}(xt&&(bt=Ee&&Ee.onVnodeUnmounted)||pt)&&queuePostRenderEffect(()=>{bt&&invokeVNodeHook(bt,oe,ee),pt&&invokeDirectiveHook(ee,null,oe,"unmounted")},se)},dt=ee=>{const{type:oe,el:se,anchor:ge,transition:_e}=ee;if(oe===Fragment$1){Xe(se,ge);return}if(oe===Static){I(ee);return}const ke=()=>{s(se),_e&&!_e.persisted&&_e.afterLeave&&_e.afterLeave()};if(ee.shapeFlag&1&&_e&&!_e.persisted){const{leave:Ee,delayLeave:te}=_e,re=()=>Ee(se,ke);te?te(ee.el,ke,re):re()}else ke()},Xe=(ee,oe)=>{let se;for(;ee!==oe;)se=k(ee),s(ee),ee=se;s(oe)},Ge=(ee,oe,se)=>{const{bum:ge,scope:_e,job:ke,subTree:Ee,um:te,m:re,a:de}=ee;invalidateMount(re),invalidateMount(de),ge&&invokeArrayFns(ge),_e.stop(),ke&&(ke.flags|=8,qe(Ee,ee,oe,se)),te&&queuePostRenderEffect(te,oe),queuePostRenderEffect(()=>{ee.isUnmounted=!0},oe),oe&&oe.pendingBranch&&!oe.isUnmounted&&ee.asyncDep&&!ee.asyncResolved&&ee.suspenseId===oe.pendingId&&(oe.deps--,oe.deps===0&&oe.resolve())},ft=(ee,oe,se,ge=!1,_e=!1,ke=0)=>{for(let Ee=ke;Ee<ee.length;Ee++)qe(ee[Ee],oe,se,ge,_e)},Te=ee=>{if(ee.shapeFlag&6)return Te(ee.component.subTree);if(ee.shapeFlag&128)return ee.suspense.next();const oe=k(ee.anchor||ee.el),se=oe&&oe[TeleportEndKey];return se?k(se):oe};let Ce=!1;const we=(ee,oe,se)=>{ee==null?oe._vnode&&qe(oe._vnode,null,null,!0):E(oe._vnode||null,ee,oe,null,null,null,se),oe._vnode=ee,Ce||(Ce=!0,flushPreFlushCbs(),flushPostFlushCbs(),Ce=!1)},ce={p:E,um:qe,m:ze,r:dt,mt:le,mc:K,pc:Ve,pbc:W,n:Te,o:n};return{render:we,hydrate:void 0,createApp:createAppAPI(we)}}function resolveChildrenNamespace({type:n,props:e},o){return o==="svg"&&n==="foreignObject"||o==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:o}function toggleRecurse({effect:n,job:e},o){o?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function needTransition(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(n,e,o=!1){const a=n.children,s=e.children;if(isArray$3(a)&&isArray$3(s))for(let l=0;l<a.length;l++){const c=a[l];let d=s[l];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=s[l]=cloneIfMounted(s[l]),d.el=c.el),!o&&d.patchFlag!==-2&&traverseStaticChildren(c,d)),d.type===Text$1&&(d.el=c.el)}}function getSequence(n){const e=n.slice(),o=[0];let a,s,l,c,d;const u=n.length;for(a=0;a<u;a++){const f=n[a];if(f!==0){if(s=o[o.length-1],n[s]<f){e[a]=s,o.push(a);continue}for(l=0,c=o.length-1;l<c;)d=l+c>>1,n[o[d]]<f?l=d+1:c=d;f<n[o[l]]&&(l>0&&(e[a]=o[l-1]),o[l]=a)}}for(l=o.length,c=o[l-1];l-- >0;)o[l]=c,c=e[c];return o}function locateNonHydratedAsyncRoot(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(n,e){return doWatch(n,null,e)}function watchPostEffect(n,e){return doWatch(n,null,{flush:"post"})}function watchSyncEffect(n,e){return doWatch(n,null,{flush:"sync"})}function watch(n,e,o){return doWatch(n,e,o)}function doWatch(n,e,o=EMPTY_OBJ){const{immediate:a,deep:s,flush:l,once:c}=o,d=extend$1({},o),u=e&&a||!e&&l!=="post";let f;if(isInSSRComponentSetup){if(l==="sync"){const x=useSSRContext();f=x.__watcherHandles||(x.__watcherHandles=[])}else if(!u){const x=()=>{};return x.stop=NOOP,x.resume=NOOP,x.pause=NOOP,x}}const v=currentInstance;d.call=(x,_,E)=>callWithAsyncErrorHandling(x,v,_,E);let b=!1;l==="post"?d.scheduler=x=>{queuePostRenderEffect(x,v&&v.suspense)}:l!=="sync"&&(b=!0,d.scheduler=(x,_)=>{_?x():queueJob(x)}),d.augmentJob=x=>{e&&(x.flags|=4),b&&(x.flags|=2,v&&(x.id=v.uid,x.i=v))};const k=watch$1(n,e,d);return isInSSRComponentSetup&&(f?f.push(k):u&&k()),k}function instanceWatch(n,e,o){const a=this.proxy,s=isString$2(n)?n.includes(".")?createPathGetter(a,n):()=>a[n]:n.bind(a,a);let l;isFunction$2(e)?l=e:(l=e.handler,o=e);const c=setCurrentInstance(this),d=doWatch(s,l.bind(a),o);return c(),d}function createPathGetter(n,e){const o=e.split(".");return()=>{let a=n;for(let s=0;s<o.length&&a;s++)a=a[o[s]];return a}}function useModel(n,e,o=EMPTY_OBJ){const a=getCurrentInstance(),s=camelize(e),l=hyphenate$1(e),c=getModelModifiers(n,s),d=customRef((u,f)=>{let v,b=EMPTY_OBJ,k;return watchSyncEffect(()=>{const x=n[s];hasChanged(v,x)&&(v=x,f())}),{get(){return u(),o.get?o.get(v):v},set(x){const _=o.set?o.set(x):x;if(!hasChanged(_,v)&&!(b!==EMPTY_OBJ&&hasChanged(x,b)))return;const E=a.vnode.props;E&&(e in E||s in E||l in E)&&(`onUpdate:${e}`in E||`onUpdate:${s}`in E||`onUpdate:${l}`in E)||(v=x,f()),a.emit(`update:${e}`,_),hasChanged(x,_)&&hasChanged(x,b)&&!hasChanged(_,k)&&f(),b=x,k=_}}});return d[Symbol.iterator]=()=>{let u=0;return{next(){return u<2?{value:u++?c||EMPTY_OBJ:d,done:!1}:{done:!0}}}},d}const getModelModifiers=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${camelize(e)}Modifiers`]||n[`${hyphenate$1(e)}Modifiers`];function emit(n,e,...o){if(n.isUnmounted)return;const a=n.vnode.props||EMPTY_OBJ;let s=o;const l=e.startsWith("update:"),c=l&&getModelModifiers(a,e.slice(7));c&&(c.trim&&(s=o.map(v=>isString$2(v)?v.trim():v)),c.number&&(s=o.map(looseToNumber)));let d,u=a[d=toHandlerKey(e)]||a[d=toHandlerKey(camelize(e))];!u&&l&&(u=a[d=toHandlerKey(hyphenate$1(e))]),u&&callWithAsyncErrorHandling(u,n,6,s);const f=a[d+"Once"];if(f){if(!n.emitted)n.emitted={};else if(n.emitted[d])return;n.emitted[d]=!0,callWithAsyncErrorHandling(f,n,6,s)}}function normalizeEmitsOptions(n,e,o=!1){const a=e.emitsCache,s=a.get(n);if(s!==void 0)return s;const l=n.emits;let c={},d=!1;if(!isFunction$2(n)){const u=f=>{const v=normalizeEmitsOptions(f,e,!0);v&&(d=!0,extend$1(c,v))};!o&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}return!l&&!d?(isObject$3(n)&&a.set(n,null),null):(isArray$3(l)?l.forEach(u=>c[u]=null):extend$1(c,l),isObject$3(n)&&a.set(n,c),c)}function isEmitListener(n,e){return!n||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn$1(n,e[0].toLowerCase()+e.slice(1))||hasOwn$1(n,hyphenate$1(e))||hasOwn$1(n,e))}function markAttrsAccessed(){}function renderComponentRoot(n){const{type:e,vnode:o,proxy:a,withProxy:s,propsOptions:[l],slots:c,attrs:d,emit:u,render:f,renderCache:v,props:b,data:k,setupState:x,ctx:_,inheritAttrs:E}=n,B=setCurrentRenderingInstance(n);let M,V;try{if(o.shapeFlag&4){const I=s||a,L=I;M=normalizeVNode(f.call(L,I,v,b,x,k,_)),V=d}else{const I=e;M=normalizeVNode(I.length>1?I(b,{attrs:d,slots:c,emit:u}):I(b,null)),V=e.props?d:getFunctionalFallthrough(d)}}catch(I){blockStack.length=0,handleError(I,n,1),M=createVNode(Comment)}let F=M;if(V&&E!==!1){const I=Object.keys(V),{shapeFlag:L}=F;I.length&&L&7&&(l&&I.some(isModelListener)&&(V=filterModelListeners(V,l)),F=cloneVNode(F,V,!1,!0))}return o.dirs&&(F=cloneVNode(F,null,!1,!0),F.dirs=F.dirs?F.dirs.concat(o.dirs):o.dirs),o.transition&&setTransitionHooks(F,o.transition),M=F,setCurrentRenderingInstance(B),M}const getFunctionalFallthrough=n=>{let e;for(const o in n)(o==="class"||o==="style"||isOn(o))&&((e||(e={}))[o]=n[o]);return e},filterModelListeners=(n,e)=>{const o={};for(const a in n)(!isModelListener(a)||!(a.slice(9)in e))&&(o[a]=n[a]);return o};function shouldUpdateComponent(n,e,o){const{props:a,children:s,component:l}=n,{props:c,children:d,patchFlag:u}=e,f=l.emitsOptions;if(e.dirs||e.transition)return!0;if(o&&u>=0){if(u&1024)return!0;if(u&16)return a?hasPropsChanged(a,c,f):!!c;if(u&8){const v=e.dynamicProps;for(let b=0;b<v.length;b++){const k=v[b];if(c[k]!==a[k]&&!isEmitListener(f,k))return!0}}}else return(s||d)&&(!d||!d.$stable)?!0:a===c?!1:a?c?hasPropsChanged(a,c,f):!0:!!c;return!1}function hasPropsChanged(n,e,o){const a=Object.keys(e);if(a.length!==Object.keys(n).length)return!0;for(let s=0;s<a.length;s++){const l=a[s];if(e[l]!==n[l]&&!isEmitListener(o,l))return!0}return!1}function updateHOCHostEl({vnode:n,parent:e},o){for(;e;){const a=e.subTree;if(a.suspense&&a.suspense.activeBranch===n&&(a.el=n.el),a===n)(n=e.vnode).el=o,e=e.parent;else break}}const isSuspense=n=>n.__isSuspense;function queueEffectWithSuspense(n,e){e&&e.pendingBranch?isArray$3(n)?e.effects.push(...n):e.effects.push(n):queuePostFlushCb(n)}const Fragment$1=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(n=!1){blockStack.push(currentBlock=n?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(n,e=!1){isBlockTreeEnabled+=n,n<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(n){return n.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(n),n}function createElementBlock(n,e,o,a,s,l){return setupBlock(createBaseVNode(n,e,o,a,s,l,!0))}function createBlock(n,e,o,a,s){return setupBlock(createVNode(n,e,o,a,s,!0))}function isVNode$1(n){return n?n.__v_isVNode===!0:!1}function isSameVNodeType(n,e){return n.type===e.type&&n.key===e.key}const normalizeKey=({key:n})=>n??null,normalizeRef=({ref:n,ref_key:e,ref_for:o})=>(typeof n=="number"&&(n=""+n),n!=null?isString$2(n)||isRef(n)||isFunction$2(n)?{i:currentRenderingInstance,r:n,k:e,f:!!o}:n:null);function createBaseVNode(n,e=null,o=null,a=0,s=null,l=n===Fragment$1?0:1,c=!1,d=!1){const u={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:a,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return d?(normalizeChildren(u,o),l&128&&n.normalize(u)):o&&(u.shapeFlag|=isString$2(o)?8:16),isBlockTreeEnabled>0&&!c&&currentBlock&&(u.patchFlag>0||l&6)&&u.patchFlag!==32&&currentBlock.push(u),u}const createVNode=_createVNode;function _createVNode(n,e=null,o=null,a=0,s=null,l=!1){if((!n||n===NULL_DYNAMIC_COMPONENT)&&(n=Comment),isVNode$1(n)){const d=cloneVNode(n,e,!0);return o&&normalizeChildren(d,o),isBlockTreeEnabled>0&&!l&&currentBlock&&(d.shapeFlag&6?currentBlock[currentBlock.indexOf(n)]=d:currentBlock.push(d)),d.patchFlag=-2,d}if(isClassComponent(n)&&(n=n.__vccOpts),e){e=guardReactiveProps(e);let{class:d,style:u}=e;d&&!isString$2(d)&&(e.class=normalizeClass(d)),isObject$3(u)&&(isProxy(u)&&!isArray$3(u)&&(u=extend$1({},u)),e.style=normalizeStyle(u))}const c=isString$2(n)?1:isSuspense(n)?128:isTeleport(n)?64:isObject$3(n)?4:isFunction$2(n)?2:0;return createBaseVNode(n,e,o,a,s,c,l,!0)}function guardReactiveProps(n){return n?isProxy(n)||isInternalObject(n)?extend$1({},n):n:null}function cloneVNode(n,e,o=!1,a=!1){const{props:s,ref:l,patchFlag:c,children:d,transition:u}=n,f=e?mergeProps(s||{},e):s,v={__v_isVNode:!0,__v_skip:!0,type:n.type,props:f,key:f&&normalizeKey(f),ref:e&&e.ref?o&&l?isArray$3(l)?l.concat(normalizeRef(e)):[l,normalizeRef(e)]:normalizeRef(e):l,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:d,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Fragment$1?c===-1?16:c|16:c,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:u,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&cloneVNode(n.ssContent),ssFallback:n.ssFallback&&cloneVNode(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return u&&a&&setTransitionHooks(v,u.clone(v)),v}function createTextVNode(n=" ",e=0){return createVNode(Text$1,null,n,e)}function createCommentVNode(n="",e=!1){return e?(openBlock(),createBlock(Comment,null,n)):createVNode(Comment,null,n)}function normalizeVNode(n){return n==null||typeof n=="boolean"?createVNode(Comment):isArray$3(n)?createVNode(Fragment$1,null,n.slice()):isVNode$1(n)?cloneIfMounted(n):createVNode(Text$1,null,String(n))}function cloneIfMounted(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:cloneVNode(n)}function normalizeChildren(n,e){let o=0;const{shapeFlag:a}=n;if(e==null)e=null;else if(isArray$3(e))o=16;else if(typeof e=="object")if(a&65){const s=e.default;s&&(s._c&&(s._d=!1),normalizeChildren(n,s()),s._c&&(s._d=!0));return}else{o=32;const s=e._;!s&&!isInternalObject(e)?e._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else isFunction$2(e)?(e={default:e,_ctx:currentRenderingInstance},o=32):(e=String(e),a&64?(o=16,e=[createTextVNode(e)]):o=8);n.children=e,n.shapeFlag|=o}function mergeProps(...n){const e={};for(let o=0;o<n.length;o++){const a=n[o];for(const s in a)if(s==="class")e.class!==a.class&&(e.class=normalizeClass([e.class,a.class]));else if(s==="style")e.style=normalizeStyle([e.style,a.style]);else if(isOn(s)){const l=e[s],c=a[s];c&&l!==c&&!(isArray$3(l)&&l.includes(c))&&(e[s]=l?[].concat(l,c):c)}else s!==""&&(e[s]=a[s])}return e}function invokeVNodeHook(n,e,o,a=null){callWithAsyncErrorHandling(n,e,7,[o,a])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(n,e,o){const a=n.type,s=(e?e.appContext:n.appContext)||emptyAppContext,l={uid:uid++,vnode:n,type:a,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(a,s),emitsOptions:normalizeEmitsOptions(a,s),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:a.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=emit.bind(null,l),n.ce&&n.ce(l),l}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const n=getGlobalThis$1(),e=(o,a)=>{let s;return(s=n[o])||(s=n[o]=[]),s.push(a),l=>{s.length>1?s.forEach(c=>c(l)):s[0](l)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",o=>currentInstance=o),setInSSRSetupState=e("__VUE_SSR_SETTERS__",o=>isInSSRComponentSetup=o)}const setCurrentInstance=n=>{const e=currentInstance;return internalSetCurrentInstance(n),n.scope.on(),()=>{n.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(n){return n.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(n,e=!1,o=!1){e&&setInSSRSetupState(e);const{props:a,children:s}=n.vnode,l=isStatefulComponent(n);initProps(n,a,l,e),initSlots(n,s,o);const c=l?setupStatefulComponent(n,e):void 0;return e&&setInSSRSetupState(!1),c}function setupStatefulComponent(n,e){const o=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,PublicInstanceProxyHandlers);const{setup:a}=o;if(a){pauseTracking();const s=n.setupContext=a.length>1?createSetupContext(n):null,l=setCurrentInstance(n),c=callWithErrorHandling(a,n,0,[n.props,s]),d=isPromise$1(c);if(resetTracking(),l(),(d||n.sp)&&!isAsyncWrapper(n)&&markAsyncBoundary(n),d){if(c.then(unsetCurrentInstance,unsetCurrentInstance),e)return c.then(u=>{handleSetupResult(n,u)}).catch(u=>{handleError(u,n,0)});n.asyncDep=c}else handleSetupResult(n,c)}else finishComponentSetup(n)}function handleSetupResult(n,e,o){isFunction$2(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:isObject$3(e)&&(n.setupState=proxyRefs(e)),finishComponentSetup(n)}function finishComponentSetup(n,e,o){const a=n.type;n.render||(n.render=a.render||NOOP);{const s=setCurrentInstance(n);pauseTracking();try{applyOptions(n)}finally{resetTracking(),s()}}}const attrsProxyHandlers={get(n,e){return track(n,"get",""),n[e]}};function createSetupContext(n){const e=o=>{n.exposed=o||{}};return{attrs:new Proxy(n.attrs,attrsProxyHandlers),slots:n.slots,emit:n.emit,expose:e}}function getComponentPublicInstance(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(proxyRefs(markRaw(n.exposed)),{get(e,o){if(o in e)return e[o];if(o in publicPropertiesMap)return publicPropertiesMap[o](n)},has(e,o){return o in e||o in publicPropertiesMap}})):n.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=n=>n.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(n,e=!0){return isFunction$2(n)?n.displayName||n.name:n.name||e&&n.__name}function formatComponentName(n,e,o=!1){let a=getComponentName(e);if(!a&&e.__file){const s=e.__file.match(/([^/\\]+)\.\w+$/);s&&(a=s[1])}if(!a&&n&&n.parent){const s=l=>{for(const c in l)if(l[c]===e)return c};a=s(n.components||n.parent.type.components)||s(n.appContext.components)}return a?classify(a):o?"App":"Anonymous"}function isClassComponent(n){return isFunction$2(n)&&"__vccOpts"in n}const computed=(n,e)=>computed$1(n,e,isInSSRComponentSetup);function h(n,e,o){const a=arguments.length;return a===2?isObject$3(e)&&!isArray$3(e)?isVNode$1(e)?createVNode(n,null,[e]):createVNode(n,e):createVNode(n,null,e):(a>3?o=Array.prototype.slice.call(arguments,2):a===3&&isVNode$1(o)&&(o=[o]),createVNode(n,e,o))}const version$1="3.5.13";let policy;const tt$2=typeof window<"u"&&window.trustedTypes;if(tt$2)try{policy=tt$2.createPolicy("vue",{createHTML:n=>n})}catch{}const unsafeToTrustedHTML=policy?n=>policy.createHTML(n):n=>n,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc$3=typeof document<"u"?document:null,templateContainer=doc$3&&doc$3.createElement("template"),nodeOps={insert:(n,e,o)=>{e.insertBefore(n,o||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,o,a)=>{const s=e==="svg"?doc$3.createElementNS(svgNS,n):e==="mathml"?doc$3.createElementNS(mathmlNS,n):o?doc$3.createElement(n,{is:o}):doc$3.createElement(n);return n==="select"&&a&&a.multiple!=null&&s.setAttribute("multiple",a.multiple),s},createText:n=>doc$3.createTextNode(n),createComment:n=>doc$3.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>doc$3.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,o,a,s,l){const c=o?o.previousSibling:e.lastChild;if(s&&(s===l||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),o),!(s===l||!(s=s.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(a==="svg"?`<svg>${n}</svg>`:a==="mathml"?`<math>${n}</math>`:n);const d=templateContainer.content;if(a==="svg"||a==="mathml"){const u=d.firstChild;for(;u.firstChild;)d.appendChild(u.firstChild);d.removeChild(u)}e.insertBefore(d,o)}return[c?c.nextSibling:e.firstChild,o?o.previousSibling:e.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=n=>(n.displayName="Transition",n.props=TransitionPropsValidators,n),Transition=decorate$1((n,{slots:e})=>h(BaseTransition,resolveTransitionProps(n),e)),callHook=(n,e=[])=>{isArray$3(n)?n.forEach(o=>o(...e)):n&&n(...e)},hasExplicitCallback=n=>n?isArray$3(n)?n.some(e=>e.length>1):n.length>1:!1;function resolveTransitionProps(n){const e={};for(const G in n)G in DOMTransitionPropsValidators||(e[G]=n[G]);if(n.css===!1)return e;const{name:o="v",type:a,duration:s,enterFromClass:l=`${o}-enter-from`,enterActiveClass:c=`${o}-enter-active`,enterToClass:d=`${o}-enter-to`,appearFromClass:u=l,appearActiveClass:f=c,appearToClass:v=d,leaveFromClass:b=`${o}-leave-from`,leaveActiveClass:k=`${o}-leave-active`,leaveToClass:x=`${o}-leave-to`}=n,_=normalizeDuration(s),E=_&&_[0],B=_&&_[1],{onBeforeEnter:M,onEnter:V,onEnterCancelled:F,onLeave:I,onLeaveCancelled:L,onBeforeAppear:U=M,onAppear:Z=V,onAppearCancelled:K=F}=e,j=(G,fe,le,pe)=>{G._enterCancelled=pe,removeTransitionClass(G,fe?v:d),removeTransitionClass(G,fe?f:c),le&&le()},W=(G,fe)=>{G._isLeaving=!1,removeTransitionClass(G,b),removeTransitionClass(G,x),removeTransitionClass(G,k),fe&&fe()},Y=G=>(fe,le)=>{const pe=G?Z:V,ue=()=>j(fe,G,le);callHook(pe,[fe,ue]),nextFrame(()=>{removeTransitionClass(fe,G?u:l),addTransitionClass(fe,G?v:d),hasExplicitCallback(pe)||whenTransitionEnds(fe,a,E,ue)})};return extend$1(e,{onBeforeEnter(G){callHook(M,[G]),addTransitionClass(G,l),addTransitionClass(G,c)},onBeforeAppear(G){callHook(U,[G]),addTransitionClass(G,u),addTransitionClass(G,f)},onEnter:Y(!1),onAppear:Y(!0),onLeave(G,fe){G._isLeaving=!0;const le=()=>W(G,fe);addTransitionClass(G,b),G._enterCancelled?(addTransitionClass(G,k),forceReflow()):(forceReflow(),addTransitionClass(G,k)),nextFrame(()=>{G._isLeaving&&(removeTransitionClass(G,b),addTransitionClass(G,x),hasExplicitCallback(I)||whenTransitionEnds(G,a,B,le))}),callHook(I,[G,le])},onEnterCancelled(G){j(G,!1,void 0,!0),callHook(F,[G])},onAppearCancelled(G){j(G,!0,void 0,!0),callHook(K,[G])},onLeaveCancelled(G){W(G),callHook(L,[G])}})}function normalizeDuration(n){if(n==null)return null;if(isObject$3(n))return[NumberOf(n.enter),NumberOf(n.leave)];{const e=NumberOf(n);return[e,e]}}function NumberOf(n){return toNumber(n)}function addTransitionClass(n,e){e.split(/\s+/).forEach(o=>o&&n.classList.add(o)),(n[vtcKey]||(n[vtcKey]=new Set)).add(e)}function removeTransitionClass(n,e){e.split(/\s+/).forEach(a=>a&&n.classList.remove(a));const o=n[vtcKey];o&&(o.delete(e),o.size||(n[vtcKey]=void 0))}function nextFrame(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let endId=0;function whenTransitionEnds(n,e,o,a){const s=n._endId=++endId,l=()=>{s===n._endId&&a()};if(o!=null)return setTimeout(l,o);const{type:c,timeout:d,propCount:u}=getTransitionInfo(n,e);if(!c)return a();const f=c+"end";let v=0;const b=()=>{n.removeEventListener(f,k),l()},k=x=>{x.target===n&&++v>=u&&b()};setTimeout(()=>{v<u&&b()},d+1),n.addEventListener(f,k)}function getTransitionInfo(n,e){const o=window.getComputedStyle(n),a=_=>(o[_]||"").split(", "),s=a(`${TRANSITION}Delay`),l=a(`${TRANSITION}Duration`),c=getTimeout(s,l),d=a(`${ANIMATION}Delay`),u=a(`${ANIMATION}Duration`),f=getTimeout(d,u);let v=null,b=0,k=0;e===TRANSITION?c>0&&(v=TRANSITION,b=c,k=l.length):e===ANIMATION?f>0&&(v=ANIMATION,b=f,k=u.length):(b=Math.max(c,f),v=b>0?c>f?TRANSITION:ANIMATION:null,k=v?v===TRANSITION?l.length:u.length:0);const x=v===TRANSITION&&/\b(transform|all)(,|$)/.test(a(`${TRANSITION}Property`).toString());return{type:v,timeout:b,propCount:k,hasTransform:x}}function getTimeout(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((o,a)=>toMs(o)+toMs(n[a])))}function toMs(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(n,e,o){const a=n[vtcKey];a&&(e=(e?[e,...a]:[...a]).join(" ")),e==null?n.removeAttribute("class"):o?n.setAttribute("class",e):n.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(n,e,o){const a=n.style,s=isString$2(o);let l=!1;if(o&&!s){if(e)if(isString$2(e))for(const c of e.split(";")){const d=c.slice(0,c.indexOf(":")).trim();o[d]==null&&setStyle(a,d,"")}else for(const c in e)o[c]==null&&setStyle(a,c,"");for(const c in o)c==="display"&&(l=!0),setStyle(a,c,o[c])}else if(s){if(e!==o){const c=a[CSS_VAR_TEXT];c&&(o+=";"+c),a.cssText=o,l=displayRE.test(o)}}else e&&n.removeAttribute("style");vShowOriginalDisplay in n&&(n[vShowOriginalDisplay]=l?a.display:"",n[vShowHidden]&&(a.display="none"))}const importantRE=/\s*!important$/;function setStyle(n,e,o){if(isArray$3(o))o.forEach(a=>setStyle(n,e,a));else if(o==null&&(o=""),e.startsWith("--"))n.setProperty(e,o);else{const a=autoPrefix(n,e);importantRE.test(o)?n.setProperty(hyphenate$1(a),o.replace(importantRE,""),"important"):n[a]=o}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(n,e){const o=prefixCache[e];if(o)return o;let a=camelize(e);if(a!=="filter"&&a in n)return prefixCache[e]=a;a=capitalize$1(a);for(let s=0;s<prefixes.length;s++){const l=prefixes[s]+a;if(l in n)return prefixCache[e]=l}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(n,e,o,a,s,l=isSpecialBooleanAttr(e)){a&&e.startsWith("xlink:")?o==null?n.removeAttributeNS(xlinkNS,e.slice(6,e.length)):n.setAttributeNS(xlinkNS,e,o):o==null||l&&!includeBooleanAttr(o)?n.removeAttribute(e):n.setAttribute(e,l?"":isSymbol(o)?String(o):o)}function patchDOMProp(n,e,o,a,s){if(e==="innerHTML"||e==="textContent"){o!=null&&(n[e]=e==="innerHTML"?unsafeToTrustedHTML(o):o);return}const l=n.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){const d=l==="OPTION"?n.getAttribute("value")||"":n.value,u=o==null?n.type==="checkbox"?"on":"":String(o);(d!==u||!("_value"in n))&&(n.value=u),o==null&&n.removeAttribute(e),n._value=o;return}let c=!1;if(o===""||o==null){const d=typeof n[e];d==="boolean"?o=includeBooleanAttr(o):o==null&&d==="string"?(o="",c=!0):d==="number"&&(o=0,c=!0)}try{n[e]=o}catch{}c&&n.removeAttribute(s||e)}function addEventListener(n,e,o,a){n.addEventListener(e,o,a)}function removeEventListener(n,e,o,a){n.removeEventListener(e,o,a)}const veiKey=Symbol("_vei");function patchEvent(n,e,o,a,s=null){const l=n[veiKey]||(n[veiKey]={}),c=l[e];if(a&&c)c.value=a;else{const[d,u]=parseName(e);if(a){const f=l[e]=createInvoker(a,s);addEventListener(n,d,f,u)}else c&&(removeEventListener(n,d,c,u),l[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(n){let e;if(optionsModifierRE.test(n)){e={};let o;for(;o=n.match(optionsModifierRE);)n=n.slice(0,n.length-o[0].length),e[o[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):hyphenate$1(n.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(n,e){const o=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=o.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(a,o.value),e,5,[a])};return o.value=n,o.attached=getNow(),o}function patchStopImmediatePropagation(n,e){if(isArray$3(e)){const o=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{o.call(n),n._stopped=!0},e.map(a=>s=>!s._stopped&&a&&a(s))}else return e}const isNativeOn=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,patchProp=(n,e,o,a,s,l)=>{const c=s==="svg";e==="class"?patchClass(n,a,c):e==="style"?patchStyle(n,o,a):isOn(e)?isModelListener(e)||patchEvent(n,e,o,a,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(n,e,a,c))?(patchDOMProp(n,e,a),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(n,e,a,c,l,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!isString$2(a))?patchDOMProp(n,camelize(e),a,l,e):(e==="true-value"?n._trueValue=a:e==="false-value"&&(n._falseValue=a),patchAttr(n,e,a,c))};function shouldSetAsProp(n,e,o,a){if(a)return!!(e==="innerHTML"||e==="textContent"||e in n&&isNativeOn(e)&&isFunction$2(o));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return isNativeOn(e)&&isString$2(o)?!1:e in n}const getModelAssigner=n=>{const e=n.props["onUpdate:modelValue"]||!1;return isArray$3(e)?o=>invokeArrayFns(e,o):e};function onCompositionStart(n){n.target.composing=!0}function onCompositionEnd(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(n,{modifiers:{lazy:e,trim:o,number:a}},s){n[assignKey]=getModelAssigner(s);const l=a||s.props&&s.props.type==="number";addEventListener(n,e?"change":"input",c=>{if(c.target.composing)return;let d=n.value;o&&(d=d.trim()),l&&(d=looseToNumber(d)),n[assignKey](d)}),o&&addEventListener(n,"change",()=>{n.value=n.value.trim()}),e||(addEventListener(n,"compositionstart",onCompositionStart),addEventListener(n,"compositionend",onCompositionEnd),addEventListener(n,"change",onCompositionEnd))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:o,modifiers:{lazy:a,trim:s,number:l}},c){if(n[assignKey]=getModelAssigner(c),n.composing)return;const d=(l||n.type==="number")&&!/^0\d/.test(n.value)?looseToNumber(n.value):n.value,u=e??"";d!==u&&(document.activeElement===n&&n.type!=="range"&&(a&&e===o||s&&n.value.trim()===u)||(n.value=u))}},vModelSelect={deep:!0,created(n,{value:e,modifiers:{number:o}},a){const s=isSet(e);addEventListener(n,"change",()=>{const l=Array.prototype.filter.call(n.options,c=>c.selected).map(c=>o?looseToNumber(getValue(c)):getValue(c));n[assignKey](n.multiple?s?new Set(l):l:l[0]),n._assigning=!0,nextTick(()=>{n._assigning=!1})}),n[assignKey]=getModelAssigner(a)},mounted(n,{value:e}){setSelected(n,e)},beforeUpdate(n,e,o){n[assignKey]=getModelAssigner(o)},updated(n,{value:e}){n._assigning||setSelected(n,e)}};function setSelected(n,e){const o=n.multiple,a=isArray$3(e);if(!(o&&!a&&!isSet(e))){for(let s=0,l=n.options.length;s<l;s++){const c=n.options[s],d=getValue(c);if(o)if(a){const u=typeof d;u==="string"||u==="number"?c.selected=e.some(f=>String(f)===String(d)):c.selected=looseIndexOf(e,d)>-1}else c.selected=e.has(d);else if(looseEqual(getValue(c),e)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!o&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function getValue(n){return"_value"in n?n._value:n.value}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>systemModifiers.some(o=>n[`${o}Key`]&&!e.includes(o))},withModifiers=(n,e)=>{const o=n._withMods||(n._withMods={}),a=e.join(".");return o[a]||(o[a]=(s,...l)=>{for(let c=0;c<e.length;c++){const d=modifierGuards[e[c]];if(d&&d(s,e))return}return n(s,...l)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(n,e)=>{const o=n._withKeys||(n._withKeys={}),a=e.join(".");return o[a]||(o[a]=s=>{if(!("key"in s))return;const l=hyphenate$1(s.key);if(e.some(c=>c===l||keyNames[c]===l))return n(s)})},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...n)=>{const e=ensureRenderer().createApp(...n),{mount:o}=e;return e.mount=a=>{const s=normalizeContainer(a);if(!s)return;const l=e._component;!isFunction$2(l)&&!l.render&&!l.template&&(l.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const c=o(s,!1,resolveRootNamespace(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),c},e};function resolveRootNamespace(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function normalizeContainer(n){return isString$2(n)?document.querySelector(n):n}const inBrowser=typeof window<"u",makeSymbol$1=(n,e=!1)=>e?Symbol.for(n):Symbol(n),generateFormatCacheKey=(n,e,o)=>friendlyJSONstringify({l:n,k:e,s:o}),friendlyJSONstringify=n=>JSON.stringify(n).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$2=n=>typeof n=="number"&&isFinite(n),isDate$1=n=>toTypeString(n)==="[object Date]",isRegExp$1=n=>toTypeString(n)==="[object RegExp]",isEmptyObject=n=>isPlainObject$1(n)&&Object.keys(n).length===0,assign$1=Object.assign,_create=Object.create,create$1=(n=null)=>_create(n);let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:create$1());function escapeHtml(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$1=Object.prototype.hasOwnProperty;function hasOwn(n,e){return hasOwnProperty$1.call(n,e)}const isArray$2=Array.isArray,isFunction$1=n=>typeof n=="function",isString$1=n=>typeof n=="string",isBoolean$1=n=>typeof n=="boolean",isObject$2=n=>n!==null&&typeof n=="object",isPromise=n=>isObject$2(n)&&isFunction$1(n.then)&&isFunction$1(n.catch),objectToString=Object.prototype.toString,toTypeString=n=>objectToString.call(n),isPlainObject$1=n=>toTypeString(n)==="[object Object]",toDisplayString=n=>n==null?"":isArray$2(n)||isPlainObject$1(n)&&n.toString===objectToString?JSON.stringify(n,null,2):String(n);function join$1(n,e=""){return n.reduce((o,a,s)=>s===0?o+a:o+e+a,"")}function warn(n,e){typeof console<"u"&&(console.warn("[intlify] "+n),e&&console.warn(e.stack))}const isNotObjectOrIsArray=n=>!isObject$2(n)||isArray$2(n);function deepCopy(n,e){if(isNotObjectOrIsArray(n)||isNotObjectOrIsArray(e))throw new Error("Invalid value");const o=[{src:n,des:e}];for(;o.length;){const{src:a,des:s}=o.pop();Object.keys(a).forEach(l=>{l!=="__proto__"&&(isObject$2(a[l])&&!isObject$2(s[l])&&(s[l]=Array.isArray(a[l])?[]:create$1()),isNotObjectOrIsArray(s[l])||isNotObjectOrIsArray(a[l])?s[l]=a[l]:o.push({src:a[l],des:s[l]}))})}}function createPosition(n,e,o){return{line:n,column:e,offset:o}}function createLocation(n,e,o){return{start:n,end:e}}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16},COMPILE_ERROR_CODES_EXTEND_POINT=17;function createCompileError(n,e,o={}){const{domain:a,messages:s,args:l}=o,c=n,d=new SyntaxError(String(c));return d.code=n,e&&(d.location=e),d.domain=a,d}function defaultOnError(n){throw n}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS="\u2028",CHAR_PS="\u2029";function createScanner(n){const e=n;let o=0,a=1,s=1,l=0;const c=Z=>e[Z]===CHAR_CR&&e[Z+1]===CHAR_LF,d=Z=>e[Z]===CHAR_LF,u=Z=>e[Z]===CHAR_PS,f=Z=>e[Z]===CHAR_LS,v=Z=>c(Z)||d(Z)||u(Z)||f(Z),b=()=>o,k=()=>a,x=()=>s,_=()=>l,E=Z=>c(Z)||u(Z)||f(Z)?CHAR_LF:e[Z],B=()=>E(o),M=()=>E(o+l);function V(){return l=0,v(o)&&(a++,s=0),c(o)&&o++,o++,s++,e[o]}function F(){return c(o+l)&&l++,l++,e[o+l]}function I(){o=0,a=1,s=1,l=0}function L(Z=0){l=Z}function U(){const Z=o+l;for(;Z!==o;)V();l=0}return{index:b,line:k,column:x,peekOffset:_,charAt:E,currentChar:B,currentPeek:M,next:V,peek:F,reset:I,resetPeek:L,skipToPeek:U}}const EOF=void 0,DOT=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(n,e={}){const o=e.location!==!1,a=createScanner(n),s=()=>a.index(),l=()=>createPosition(a.line(),a.column(),a.index()),c=l(),d=s(),u={currentType:13,offset:d,startLoc:c,endLoc:c,lastType:13,lastOffset:d,lastStartLoc:c,lastEndLoc:c,braceNest:0,inLinked:!1,text:""},f=()=>u,{onError:v}=e;function b(te,re,de,...Oe){const me=f();if(re.column+=de,re.offset+=de,v){const Be=o?createLocation(me.startLoc,re):null,ht=createCompileError(te,Be,{domain:ERROR_DOMAIN$3,args:Oe});v(ht)}}function k(te,re,de){te.endLoc=l(),te.currentType=re;const Oe={type:re};return o&&(Oe.loc=createLocation(te.startLoc,te.endLoc)),de!=null&&(Oe.value=de),Oe}const x=te=>k(te,13);function _(te,re){return te.currentChar()===re?(te.next(),re):(b(CompileErrorCodes.EXPECTED_TOKEN,l(),0,re),"")}function E(te){let re="";for(;te.currentPeek()===CHAR_SP||te.currentPeek()===CHAR_LF;)re+=te.currentPeek(),te.peek();return re}function B(te){const re=E(te);return te.skipToPeek(),re}function M(te){if(te===EOF)return!1;const re=te.charCodeAt(0);return re>=97&&re<=122||re>=65&&re<=90||re===95}function V(te){if(te===EOF)return!1;const re=te.charCodeAt(0);return re>=48&&re<=57}function F(te,re){const{currentType:de}=re;if(de!==2)return!1;E(te);const Oe=M(te.currentPeek());return te.resetPeek(),Oe}function I(te,re){const{currentType:de}=re;if(de!==2)return!1;E(te);const Oe=te.currentPeek()==="-"?te.peek():te.currentPeek(),me=V(Oe);return te.resetPeek(),me}function L(te,re){const{currentType:de}=re;if(de!==2)return!1;E(te);const Oe=te.currentPeek()===LITERAL_DELIMITER;return te.resetPeek(),Oe}function U(te,re){const{currentType:de}=re;if(de!==7)return!1;E(te);const Oe=te.currentPeek()===".";return te.resetPeek(),Oe}function Z(te,re){const{currentType:de}=re;if(de!==8)return!1;E(te);const Oe=M(te.currentPeek());return te.resetPeek(),Oe}function K(te,re){const{currentType:de}=re;if(!(de===7||de===11))return!1;E(te);const Oe=te.currentPeek()===":";return te.resetPeek(),Oe}function j(te,re){const{currentType:de}=re;if(de!==9)return!1;const Oe=()=>{const Be=te.currentPeek();return Be==="{"?M(te.peek()):Be==="@"||Be==="|"||Be===":"||Be==="."||Be===CHAR_SP||!Be?!1:Be===CHAR_LF?(te.peek(),Oe()):Y(te,!1)},me=Oe();return te.resetPeek(),me}function W(te){E(te);const re=te.currentPeek()==="|";return te.resetPeek(),re}function Y(te,re=!0){const de=(me=!1,Be="")=>{const ht=te.currentPeek();return ht==="{"||ht==="@"||!ht?me:ht==="|"?!(Be===CHAR_SP||Be===CHAR_LF):ht===CHAR_SP?(te.peek(),de(!0,CHAR_SP)):ht===CHAR_LF?(te.peek(),de(!0,CHAR_LF)):!0},Oe=de();return re&&te.resetPeek(),Oe}function G(te,re){const de=te.currentChar();return de===EOF?EOF:re(de)?(te.next(),de):null}function fe(te){const re=te.charCodeAt(0);return re>=97&&re<=122||re>=65&&re<=90||re>=48&&re<=57||re===95||re===36}function le(te){return G(te,fe)}function pe(te){const re=te.charCodeAt(0);return re>=97&&re<=122||re>=65&&re<=90||re>=48&&re<=57||re===95||re===36||re===45}function ue(te){return G(te,pe)}function Ne(te){const re=te.charCodeAt(0);return re>=48&&re<=57}function Ve(te){return G(te,Ne)}function Ze(te){const re=te.charCodeAt(0);return re>=48&&re<=57||re>=65&&re<=70||re>=97&&re<=102}function We(te){return G(te,Ze)}function ze(te){let re="",de="";for(;re=Ve(te);)de+=re;return de}function qe(te){let re="";for(;;){const de=te.currentChar();if(de==="{"||de==="}"||de==="@"||de==="|"||!de)break;if(de===CHAR_SP||de===CHAR_LF)if(Y(te))re+=de,te.next();else{if(W(te))break;re+=de,te.next()}else re+=de,te.next()}return re}function dt(te){B(te);let re="",de="";for(;re=ue(te);)de+=re;return te.currentChar()===EOF&&b(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),de}function Xe(te){B(te);let re="";return te.currentChar()==="-"?(te.next(),re+=`-${ze(te)}`):re+=ze(te),te.currentChar()===EOF&&b(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),re}function Ge(te){return te!==LITERAL_DELIMITER&&te!==CHAR_LF}function ft(te){B(te),_(te,"'");let re="",de="";for(;re=G(te,Ge);)re==="\\"?de+=Te(te):de+=re;const Oe=te.currentChar();return Oe===CHAR_LF||Oe===EOF?(b(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,l(),0),Oe===CHAR_LF&&(te.next(),_(te,"'")),de):(_(te,"'"),de)}function Te(te){const re=te.currentChar();switch(re){case"\\":case"'":return te.next(),`\\${re}`;case"u":return Ce(te,re,4);case"U":return Ce(te,re,6);default:return b(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,l(),0,re),""}}function Ce(te,re,de){_(te,re);let Oe="";for(let me=0;me<de;me++){const Be=We(te);if(!Be){b(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,l(),0,`\\${re}${Oe}${te.currentChar()}`);break}Oe+=Be}return`\\${re}${Oe}`}function we(te){return te!=="{"&&te!=="}"&&te!==CHAR_SP&&te!==CHAR_LF}function ce(te){B(te);let re="",de="";for(;re=G(te,we);)de+=re;return de}function ee(te){let re="",de="";for(;re=le(te);)de+=re;return de}function oe(te){const re=de=>{const Oe=te.currentChar();return Oe==="{"||Oe==="@"||Oe==="|"||Oe==="("||Oe===")"||!Oe||Oe===CHAR_SP?de:(de+=Oe,te.next(),re(de))};return re("")}function se(te){B(te);const re=_(te,"|");return B(te),re}function ge(te,re){let de=null;switch(te.currentChar()){case"{":return re.braceNest>=1&&b(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,l(),0),te.next(),de=k(re,2,"{"),B(te),re.braceNest++,de;case"}":return re.braceNest>0&&re.currentType===2&&b(CompileErrorCodes.EMPTY_PLACEHOLDER,l(),0),te.next(),de=k(re,3,"}"),re.braceNest--,re.braceNest>0&&B(te),re.inLinked&&re.braceNest===0&&(re.inLinked=!1),de;case"@":return re.braceNest>0&&b(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),de=_e(te,re)||x(re),re.braceNest=0,de;default:{let Oe=!0,me=!0,Be=!0;if(W(te))return re.braceNest>0&&b(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),de=k(re,1,se(te)),re.braceNest=0,re.inLinked=!1,de;if(re.braceNest>0&&(re.currentType===4||re.currentType===5||re.currentType===6))return b(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),re.braceNest=0,ke(te,re);if(Oe=F(te,re))return de=k(re,4,dt(te)),B(te),de;if(me=I(te,re))return de=k(re,5,Xe(te)),B(te),de;if(Be=L(te,re))return de=k(re,6,ft(te)),B(te),de;if(!Oe&&!me&&!Be)return de=k(re,12,ce(te)),b(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,l(),0,de.value),B(te),de;break}}return de}function _e(te,re){const{currentType:de}=re;let Oe=null;const me=te.currentChar();switch((de===7||de===8||de===11||de===9)&&(me===CHAR_LF||me===CHAR_SP)&&b(CompileErrorCodes.INVALID_LINKED_FORMAT,l(),0),me){case"@":return te.next(),Oe=k(re,7,"@"),re.inLinked=!0,Oe;case".":return B(te),te.next(),k(re,8,".");case":":return B(te),te.next(),k(re,9,":");default:return W(te)?(Oe=k(re,1,se(te)),re.braceNest=0,re.inLinked=!1,Oe):U(te,re)||K(te,re)?(B(te),_e(te,re)):Z(te,re)?(B(te),k(re,11,ee(te))):j(te,re)?(B(te),me==="{"?ge(te,re)||Oe:k(re,10,oe(te))):(de===7&&b(CompileErrorCodes.INVALID_LINKED_FORMAT,l(),0),re.braceNest=0,re.inLinked=!1,ke(te,re))}}function ke(te,re){let de={type:13};if(re.braceNest>0)return ge(te,re)||x(re);if(re.inLinked)return _e(te,re)||x(re);switch(te.currentChar()){case"{":return ge(te,re)||x(re);case"}":return b(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,l(),0),te.next(),k(re,3,"}");case"@":return _e(te,re)||x(re);default:{if(W(te))return de=k(re,1,se(te)),re.braceNest=0,re.inLinked=!1,de;if(Y(te))return k(re,0,qe(te));break}}return de}function Ee(){const{currentType:te,offset:re,startLoc:de,endLoc:Oe}=u;return u.lastType=te,u.lastOffset=re,u.lastStartLoc=de,u.lastEndLoc=Oe,u.offset=s(),u.startLoc=l(),a.currentChar()===EOF?k(u,13):ke(a,u)}return{nextToken:Ee,currentOffset:s,currentPosition:l,context:f}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(n,e,o){switch(n){case"\\\\":return"\\";case"\\'":return"'";default:{const a=parseInt(e||o,16);return a<=55295||a>=57344?String.fromCodePoint(a):"\uFFFD"}}}function createParser(n={}){const e=n.location!==!1,{onError:o}=n;function a(M,V,F,I,...L){const U=M.currentPosition();if(U.offset+=I,U.column+=I,o){const Z=e?createLocation(F,U):null,K=createCompileError(V,Z,{domain:ERROR_DOMAIN$2,args:L});o(K)}}function s(M,V,F){const I={type:M};return e&&(I.start=V,I.end=V,I.loc={start:F,end:F}),I}function l(M,V,F,I){e&&(M.end=V,M.loc&&(M.loc.end=F))}function c(M,V){const F=M.context(),I=s(3,F.offset,F.startLoc);return I.value=V,l(I,M.currentOffset(),M.currentPosition()),I}function d(M,V){const F=M.context(),{lastOffset:I,lastStartLoc:L}=F,U=s(5,I,L);return U.index=parseInt(V,10),M.nextToken(),l(U,M.currentOffset(),M.currentPosition()),U}function u(M,V){const F=M.context(),{lastOffset:I,lastStartLoc:L}=F,U=s(4,I,L);return U.key=V,M.nextToken(),l(U,M.currentOffset(),M.currentPosition()),U}function f(M,V){const F=M.context(),{lastOffset:I,lastStartLoc:L}=F,U=s(9,I,L);return U.value=V.replace(KNOWN_ESCAPES,fromEscapeSequence),M.nextToken(),l(U,M.currentOffset(),M.currentPosition()),U}function v(M){const V=M.nextToken(),F=M.context(),{lastOffset:I,lastStartLoc:L}=F,U=s(8,I,L);return V.type!==11?(a(M,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,F.lastStartLoc,0),U.value="",l(U,I,L),{nextConsumeToken:V,node:U}):(V.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,F.lastStartLoc,0,getTokenCaption(V)),U.value=V.value||"",l(U,M.currentOffset(),M.currentPosition()),{node:U})}function b(M,V){const F=M.context(),I=s(7,F.offset,F.startLoc);return I.value=V,l(I,M.currentOffset(),M.currentPosition()),I}function k(M){const V=M.context(),F=s(6,V.offset,V.startLoc);let I=M.nextToken();if(I.type===8){const L=v(M);F.modifier=L.node,I=L.nextConsumeToken||M.nextToken()}switch(I.type!==9&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,V.lastStartLoc,0,getTokenCaption(I)),I=M.nextToken(),I.type===2&&(I=M.nextToken()),I.type){case 10:I.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,V.lastStartLoc,0,getTokenCaption(I)),F.key=b(M,I.value||"");break;case 4:I.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,V.lastStartLoc,0,getTokenCaption(I)),F.key=u(M,I.value||"");break;case 5:I.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,V.lastStartLoc,0,getTokenCaption(I)),F.key=d(M,I.value||"");break;case 6:I.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,V.lastStartLoc,0,getTokenCaption(I)),F.key=f(M,I.value||"");break;default:{a(M,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,V.lastStartLoc,0);const L=M.context(),U=s(7,L.offset,L.startLoc);return U.value="",l(U,L.offset,L.startLoc),F.key=U,l(F,L.offset,L.startLoc),{nextConsumeToken:I,node:F}}}return l(F,M.currentOffset(),M.currentPosition()),{node:F}}function x(M){const V=M.context(),F=V.currentType===1?M.currentOffset():V.offset,I=V.currentType===1?V.endLoc:V.startLoc,L=s(2,F,I);L.items=[];let U=null;do{const j=U||M.nextToken();switch(U=null,j.type){case 0:j.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,V.lastStartLoc,0,getTokenCaption(j)),L.items.push(c(M,j.value||""));break;case 5:j.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,V.lastStartLoc,0,getTokenCaption(j)),L.items.push(d(M,j.value||""));break;case 4:j.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,V.lastStartLoc,0,getTokenCaption(j)),L.items.push(u(M,j.value||""));break;case 6:j.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,V.lastStartLoc,0,getTokenCaption(j)),L.items.push(f(M,j.value||""));break;case 7:{const W=k(M);L.items.push(W.node),U=W.nextConsumeToken||null;break}}}while(V.currentType!==13&&V.currentType!==1);const Z=V.currentType===1?V.lastOffset:M.currentOffset(),K=V.currentType===1?V.lastEndLoc:M.currentPosition();return l(L,Z,K),L}function _(M,V,F,I){const L=M.context();let U=I.items.length===0;const Z=s(1,V,F);Z.cases=[],Z.cases.push(I);do{const K=x(M);U||(U=K.items.length===0),Z.cases.push(K)}while(L.currentType!==13);return U&&a(M,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,F,0),l(Z,M.currentOffset(),M.currentPosition()),Z}function E(M){const V=M.context(),{offset:F,startLoc:I}=V,L=x(M);return V.currentType===13?L:_(M,F,I,L)}function B(M){const V=createTokenizer(M,assign$1({},n)),F=V.context(),I=s(0,F.offset,F.startLoc);return e&&I.loc&&(I.loc.source=M),I.body=E(V),n.onCacheKey&&(I.cacheKey=n.onCacheKey(M)),F.currentType!==13&&a(V,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,F.lastStartLoc,0,M[F.offset]||""),l(I,V.currentOffset(),V.currentPosition()),I}return{parse:B}}function getTokenCaption(n){if(n.type===13)return"EOF";const e=(n.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"\u2026":e}function createTransformer(n,e={}){const o={ast:n,helpers:new Set};return{context:()=>o,helper:a=>(o.helpers.add(a),a)}}function traverseNodes(n,e){for(let o=0;o<n.length;o++)traverseNode(n[o],e)}function traverseNode(n,e){switch(n.type){case 1:traverseNodes(n.cases,e),e.helper("plural");break;case 2:traverseNodes(n.items,e);break;case 6:{traverseNode(n.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function transform(n,e={}){const o=createTransformer(n);o.helper("normalize"),n.body&&traverseNode(n.body,o);const a=o.context();n.helpers=Array.from(a.helpers)}function optimize(n){const e=n.body;return e.type===2?optimizeMessageNode(e):e.cases.forEach(o=>optimizeMessageNode(o)),n}function optimizeMessageNode(n){if(n.items.length===1){const e=n.items[0];(e.type===3||e.type===9)&&(n.static=e.value,delete e.value)}else{const e=[];for(let o=0;o<n.items.length;o++){const a=n.items[o];if(!(a.type===3||a.type===9)||a.value==null)break;e.push(a.value)}if(e.length===n.items.length){n.static=join$1(e);for(let o=0;o<n.items.length;o++){const a=n.items[o];(a.type===3||a.type===9)&&delete a.value}}}}function minify(n){switch(n.t=n.type,n.type){case 0:{const e=n;minify(e.body),e.b=e.body,delete e.body;break}case 1:{const e=n,o=e.cases;for(let a=0;a<o.length;a++)minify(o[a]);e.c=o,delete e.cases;break}case 2:{const e=n,o=e.items;for(let a=0;a<o.length;a++)minify(o[a]);e.i=o,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=n;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=n;minify(e.key),e.k=e.key,delete e.key,e.modifier&&(minify(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=n;e.i=e.index,delete e.index;break}case 4:{const e=n;e.k=e.key,delete e.key;break}}delete n.type}function createCodeGenerator(n,e){const{sourceMap:o,filename:a,breakLineCode:s,needIndent:l}=e,c=e.location!==!1,d={filename:a,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:l,indentLevel:0};c&&n.loc&&(d.source=n.loc.source);const u=()=>d;function f(_,E){d.code+=_}function v(_,E=!0){const B=E?s:"";f(l?B+"  ".repeat(_):B)}function b(_=!0){const E=++d.indentLevel;_&&v(E)}function k(_=!0){const E=--d.indentLevel;_&&v(E)}function x(){v(d.indentLevel)}return{context:u,push:f,indent:b,deindent:k,newline:x,helper:_=>`_${_}`,needIndent:()=>d.needIndent}}function generateLinkedNode(n,e){const{helper:o}=n;n.push(`${o("linked")}(`),generateNode(n,e.key),e.modifier?(n.push(", "),generateNode(n,e.modifier),n.push(", _type")):n.push(", undefined, _type"),n.push(")")}function generateMessageNode(n,e){const{helper:o,needIndent:a}=n;n.push(`${o("normalize")}([`),n.indent(a());const s=e.items.length;for(let l=0;l<s&&(generateNode(n,e.items[l]),l!==s-1);l++)n.push(", ");n.deindent(a()),n.push("])")}function generatePluralNode(n,e){const{helper:o,needIndent:a}=n;if(e.cases.length>1){n.push(`${o("plural")}([`),n.indent(a());const s=e.cases.length;for(let l=0;l<s&&(generateNode(n,e.cases[l]),l!==s-1);l++)n.push(", ");n.deindent(a()),n.push("])")}}function generateResource(n,e){e.body?generateNode(n,e.body):n.push("null")}function generateNode(n,e){const{helper:o}=n;switch(e.type){case 0:generateResource(n,e);break;case 1:generatePluralNode(n,e);break;case 2:generateMessageNode(n,e);break;case 6:generateLinkedNode(n,e);break;case 8:n.push(JSON.stringify(e.value),e);break;case 7:n.push(JSON.stringify(e.value),e);break;case 5:n.push(`${o("interpolate")}(${o("list")}(${e.index}))`,e);break;case 4:n.push(`${o("interpolate")}(${o("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:n.push(JSON.stringify(e.value),e);break;case 3:n.push(JSON.stringify(e.value),e);break}}const generate=(n,e={})=>{const o=isString$1(e.mode)?e.mode:"normal",a=isString$1(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,l=e.breakLineCode!=null?e.breakLineCode:o==="arrow"?";":`
`,c=e.needIndent?e.needIndent:o!=="arrow",d=n.helpers||[],u=createCodeGenerator(n,{mode:o,filename:a,sourceMap:s,breakLineCode:l,needIndent:c});u.push(o==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),u.indent(c),d.length>0&&(u.push(`const { ${join$1(d.map(b=>`${b}: _${b}`),", ")} } = ctx`),u.newline()),u.push("return "),generateNode(u,n),u.deindent(c),u.push("}"),delete n.helpers;const{code:f,map:v}=u.context();return{ast:n,code:f,map:v?v.toJSON():void 0}};function baseCompile$1(n,e={}){const o=assign$1({},e),a=!!o.jit,s=!!o.minify,l=o.optimize==null?!0:o.optimize,c=createParser(o).parse(n);return a?(l&&optimize(c),s&&minify(c),{ast:c,code:""}):(transform(c,o),generate(c,o))}function initFeatureFlags$1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function format(n){return e=>formatParts(e,n)}function formatParts(n,e){const o=resolveBody(e);if(o==null)throw createUnhandleNodeError(0);if(resolveType(o)===1){const a=resolveCases(o);return n.plural(a.reduce((s,l)=>[...s,formatMessageParts(n,l)],[]))}else return formatMessageParts(n,o)}const PROPS_BODY=["b","body"];function resolveBody(n){return resolveProps(n,PROPS_BODY)}const PROPS_CASES=["c","cases"];function resolveCases(n){return resolveProps(n,PROPS_CASES,[])}function formatMessageParts(n,e){const o=resolveStatic(e);if(o!=null)return n.type==="text"?o:n.normalize([o]);{const a=resolveItems(e).reduce((s,l)=>[...s,formatMessagePart(n,l)],[]);return n.normalize(a)}}const PROPS_STATIC=["s","static"];function resolveStatic(n){return resolveProps(n,PROPS_STATIC)}const PROPS_ITEMS=["i","items"];function resolveItems(n){return resolveProps(n,PROPS_ITEMS,[])}function formatMessagePart(n,e){const o=resolveType(e);switch(o){case 3:return resolveValue$1(e,o);case 9:return resolveValue$1(e,o);case 4:{const a=e;if(hasOwn(a,"k")&&a.k)return n.interpolate(n.named(a.k));if(hasOwn(a,"key")&&a.key)return n.interpolate(n.named(a.key));throw createUnhandleNodeError(o)}case 5:{const a=e;if(hasOwn(a,"i")&&isNumber$2(a.i))return n.interpolate(n.list(a.i));if(hasOwn(a,"index")&&isNumber$2(a.index))return n.interpolate(n.list(a.index));throw createUnhandleNodeError(o)}case 6:{const a=e,s=resolveLinkedModifier(a),l=resolveLinkedKey(a);return n.linked(formatMessagePart(n,l),s?formatMessagePart(n,s):void 0,n.type)}case 7:return resolveValue$1(e,o);case 8:return resolveValue$1(e,o);default:throw new Error(`unhandled node on format message part: ${o}`)}}const PROPS_TYPE=["t","type"];function resolveType(n){return resolveProps(n,PROPS_TYPE)}const PROPS_VALUE=["v","value"];function resolveValue$1(n,e){const o=resolveProps(n,PROPS_VALUE);if(o)return o;throw createUnhandleNodeError(e)}const PROPS_MODIFIER=["m","modifier"];function resolveLinkedModifier(n){return resolveProps(n,PROPS_MODIFIER)}const PROPS_KEY=["k","key"];function resolveLinkedKey(n){const e=resolveProps(n,PROPS_KEY);if(e)return e;throw createUnhandleNodeError(6)}function resolveProps(n,e,o){for(let a=0;a<e.length;a++){const s=e[a];if(hasOwn(n,s)&&n[s]!=null)return n[s]}return o}function createUnhandleNodeError(n){return new Error(`unhandled node type: ${n}`)}const defaultOnCacheKey=n=>n;let compileCache=create$1();function isMessageAST(n){return isObject$2(n)&&resolveType(n)===0&&(hasOwn(n,"b")||hasOwn(n,"body"))}function baseCompile(n,e={}){let o=!1;const a=e.onError||defaultOnError;return e.onError=s=>{o=!0,a(s)},{...baseCompile$1(n,e),detectError:o}}function compile(n,e){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&isString$1(n)){isBoolean$1(e.warnHtmlMessage)&&e.warnHtmlMessage;const o=(e.onCacheKey||defaultOnCacheKey)(n),a=compileCache[o];if(a)return a;const{ast:s,detectError:l}=baseCompile(n,{...e,location:!1,jit:!0}),c=format(s);return l?c:compileCache[o]=c}else{const o=n.cacheKey;return o?compileCache[o]||(compileCache[o]=format(n)):format(n)}}let devtools=null;function setDevToolsHook(n){devtools=n}function initI18nDevTools(n,e,o){devtools&&devtools.emit("i18n:init",{timestamp:Date.now(),i18n:n,version:e,meta:o})}const translateDevTools=createDevToolsHook("function:translate");function createDevToolsHook(n){return e=>devtools&&devtools.emit(n,e)}const CoreErrorCodes={INVALID_ARGUMENT:COMPILE_ERROR_CODES_EXTEND_POINT,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_NON_STRING_MESSAGE:20,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},CORE_ERROR_CODES_EXTEND_POINT=24;function createCoreError(n){return createCompileError(n,null,void 0)}function getLocale(n,e){return e.locale!=null?resolveLocale(e.locale):resolveLocale(n.locale)}let _resolveLocale;function resolveLocale(n){if(isString$1(n))return n;if(isFunction$1(n)){if(n.resolvedOnce&&_resolveLocale!=null)return _resolveLocale;if(n.constructor.name==="Function"){const e=n();if(isPromise(e))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return _resolveLocale=e}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_TYPE)}function fallbackWithSimple(n,e,o){return[...new Set([o,...isArray$2(e)?e:isObject$2(e)?Object.keys(e):isString$1(e)?[e]:[o]])]}function fallbackWithLocaleChain(n,e,o){const a=isString$1(o)?o:DEFAULT_LOCALE,s=n;s.__localeChainCache||(s.__localeChainCache=new Map);let l=s.__localeChainCache.get(a);if(!l){l=[];let c=[o];for(;isArray$2(c);)c=appendBlockToChain(l,c,e);const d=isArray$2(e)||!isPlainObject$1(e)?e:e.default?e.default:null;c=isString$1(d)?[d]:d,isArray$2(c)&&appendBlockToChain(l,c,!1),s.__localeChainCache.set(a,l)}return l}function appendBlockToChain(n,e,o){let a=!0;for(let s=0;s<e.length&&isBoolean$1(a);s++){const l=e[s];isString$1(l)&&(a=appendLocaleToChain(n,e[s],o))}return a}function appendLocaleToChain(n,e,o){let a;const s=e.split("-");do{const l=s.join("-");a=appendItemToChain(n,l,o),s.splice(-1,1)}while(s.length&&a===!0);return a}function appendItemToChain(n,e,o){let a=!1;if(!n.includes(e)&&(a=!0,e)){a=e[e.length-1]!=="!";const s=e.replace(/!/g,"");n.push(s),(isArray$2(o)||isPlainObject$1(o))&&o[s]&&(a=o[s])}return a}const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]},pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]},pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]},pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]},pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(n){return literalValueRE.test(n)}function stripQuotes(n){const e=n.charCodeAt(0),o=n.charCodeAt(n.length-1);return e===o&&(e===34||e===39)?n.slice(1,-1):n}function getPathCharType(n){if(n==null)return"o";switch(n.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return n;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(n){const e=n.trim();return n.charAt(0)==="0"&&isNaN(parseInt(n))?!1:isLiteral(e)?stripQuotes(e):"*"+e}function parse(n){const e=[];let o=-1,a=0,s=0,l,c,d,u,f,v,b;const k=[];k[0]=()=>{c===void 0?c=d:c+=d},k[1]=()=>{c!==void 0&&(e.push(c),c=void 0)},k[2]=()=>{k[0](),s++},k[3]=()=>{if(s>0)s--,a=4,k[0]();else{if(s=0,c===void 0||(c=formatSubPath(c),c===!1))return!1;k[1]()}};function x(){const _=n[o+1];if(a===5&&_==="'"||a===6&&_==='"')return o++,d="\\"+_,k[0](),!0}for(;a!==null;)if(o++,l=n[o],!(l==="\\"&&x())){if(u=getPathCharType(l),b=pathStateMachine[a],f=b[u]||b.l||8,f===8||(a=f[0],f[1]!==void 0&&(v=k[f[1]],v&&(d=l,v()===!1))))return;if(a===7)return e}}const cache=new Map;function resolveWithKeyValue(n,e){return isObject$2(n)?n[e]:null}function resolveValue(n,e){if(!isObject$2(n))return null;let o=cache.get(e);if(o||(o=parse(e),o&&cache.set(e,o)),!o)return null;const a=o.length;let s=n,l=0;for(;l<a;){const c=s[o[l]];if(c===void 0||isFunction$1(s))return null;s=c,l++}return s}const VERSION$2="10.0.5",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=n=>`${n.charAt(0).toLocaleUpperCase()}${n.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(n,e)=>e==="text"&&isString$1(n)?n.toUpperCase():e==="vnode"&&isObject$2(n)&&"__v_isVNode"in n?n.children.toUpperCase():n,lower:(n,e)=>e==="text"&&isString$1(n)?n.toLowerCase():e==="vnode"&&isObject$2(n)&&"__v_isVNode"in n?n.children.toLowerCase():n,capitalize:(n,e)=>e==="text"&&isString$1(n)?capitalize(n):e==="vnode"&&isObject$2(n)&&"__v_isVNode"in n?capitalize(n.children):n}}let _compiler;function registerMessageCompiler(n){_compiler=n}let _resolver;function registerMessageResolver(n){_resolver=n}let _fallbacker;function registerLocaleFallbacker(n){_fallbacker=n}let _additionalMeta=null;const setAdditionalMeta=n=>{_additionalMeta=n},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=n=>{_fallbackContext=n},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(n={}){const e=isFunction$1(n.onWarn)?n.onWarn:warn,o=isString$1(n.version)?n.version:VERSION$2,a=isString$1(n.locale)||isFunction$1(n.locale)?n.locale:DEFAULT_LOCALE,s=isFunction$1(a)?DEFAULT_LOCALE:a,l=isArray$2(n.fallbackLocale)||isPlainObject$1(n.fallbackLocale)||isString$1(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:s,c=isPlainObject$1(n.messages)?n.messages:createResources(s),d=isPlainObject$1(n.datetimeFormats)?n.datetimeFormats:createResources(s),u=isPlainObject$1(n.numberFormats)?n.numberFormats:createResources(s),f=assign$1(create$1(),n.modifiers,getDefaultLinkedModifiers()),v=n.pluralRules||create$1(),b=isFunction$1(n.missing)?n.missing:null,k=isBoolean$1(n.missingWarn)||isRegExp$1(n.missingWarn)?n.missingWarn:!0,x=isBoolean$1(n.fallbackWarn)||isRegExp$1(n.fallbackWarn)?n.fallbackWarn:!0,_=!!n.fallbackFormat,E=!!n.unresolving,B=isFunction$1(n.postTranslation)?n.postTranslation:null,M=isPlainObject$1(n.processor)?n.processor:null,V=isBoolean$1(n.warnHtmlMessage)?n.warnHtmlMessage:!0,F=!!n.escapeParameter,I=isFunction$1(n.messageCompiler)?n.messageCompiler:_compiler,L=isFunction$1(n.messageResolver)?n.messageResolver:_resolver||resolveWithKeyValue,U=isFunction$1(n.localeFallbacker)?n.localeFallbacker:_fallbacker||fallbackWithSimple,Z=isObject$2(n.fallbackContext)?n.fallbackContext:void 0,K=n,j=isObject$2(K.__datetimeFormatters)?K.__datetimeFormatters:new Map,W=isObject$2(K.__numberFormatters)?K.__numberFormatters:new Map,Y=isObject$2(K.__meta)?K.__meta:{};_cid++;const G={version:o,cid:_cid,locale:a,fallbackLocale:l,messages:c,modifiers:f,pluralRules:v,missing:b,missingWarn:k,fallbackWarn:x,fallbackFormat:_,unresolving:E,postTranslation:B,processor:M,warnHtmlMessage:V,escapeParameter:F,messageCompiler:I,messageResolver:L,localeFallbacker:U,fallbackContext:Z,onWarn:e,__meta:Y};return G.datetimeFormats=d,G.numberFormats=u,G.__datetimeFormatters=j,G.__numberFormatters=W,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(G,o,Y),G}const createResources=n=>({[n]:create$1()});function handleMissing(n,e,o,a,s){const{missing:l,onWarn:c}=n;if(l!==null){const d=l(n,o,e,s);return isString$1(d)?d:e}else return e}function updateFallbackLocale(n,e,o){const a=n;a.__localeChainCache=new Map,n.localeFallbacker(n,o,e)}function isAlmostSameLocale(n,e){return n===e?!1:n.split("-")[0]===e.split("-")[0]}function isImplicitFallback(n,e){const o=e.indexOf(n);if(o===-1)return!1;for(let a=o+1;a<e.length;a++)if(isAlmostSameLocale(n,e[a]))return!0;return!1}function datetime(n,...e){const{datetimeFormats:o,unresolving:a,fallbackLocale:s,onWarn:l,localeFallbacker:c}=n,{__datetimeFormatters:d}=n,[u,f,v,b]=parseDateTimeArgs(...e),k=isBoolean$1(v.missingWarn)?v.missingWarn:n.missingWarn;isBoolean$1(v.fallbackWarn)?v.fallbackWarn:n.fallbackWarn;const x=!!v.part,_=getLocale(n,v),E=c(n,s,_);if(!isString$1(u)||u==="")return new Intl.DateTimeFormat(_,b).format(f);let B={},M,V=null;const F="datetime format";for(let U=0;U<E.length&&(M=E[U],B=o[M]||{},V=B[u],!isPlainObject$1(V));U++)handleMissing(n,u,M,k,F);if(!isPlainObject$1(V)||!isString$1(M))return a?NOT_REOSLVED:u;let I=`${M}__${u}`;isEmptyObject(b)||(I=`${I}__${JSON.stringify(b)}`);let L=d.get(I);return L||(L=new Intl.DateTimeFormat(M,assign$1({},V,b)),d.set(I,L)),x?L.formatToParts(f):L.format(f)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...n){const[e,o,a,s]=n,l=create$1();let c=create$1(),d;if(isString$1(e)){const u=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const f=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();d=new Date(f);try{d.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate$1(e)){if(isNaN(e.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);d=e}else if(isNumber$2(e))d=e;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$1(o)?l.key=o:isPlainObject$1(o)&&Object.keys(o).forEach(u=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(u)?c[u]=o[u]:l[u]=o[u]}),isString$1(a)?l.locale=a:isPlainObject$1(a)&&(c=a),isPlainObject$1(s)&&(c=s),[l.key||"",d,l,c]}function clearDateTimeFormat(n,e,o){const a=n;for(const s in o){const l=`${e}__${s}`;a.__datetimeFormatters.has(l)&&a.__datetimeFormatters.delete(l)}}function number$1(n,...e){const{numberFormats:o,unresolving:a,fallbackLocale:s,onWarn:l,localeFallbacker:c}=n,{__numberFormatters:d}=n,[u,f,v,b]=parseNumberArgs(...e),k=isBoolean$1(v.missingWarn)?v.missingWarn:n.missingWarn;isBoolean$1(v.fallbackWarn)?v.fallbackWarn:n.fallbackWarn;const x=!!v.part,_=getLocale(n,v),E=c(n,s,_);if(!isString$1(u)||u==="")return new Intl.NumberFormat(_,b).format(f);let B={},M,V=null;const F="number format";for(let U=0;U<E.length&&(M=E[U],B=o[M]||{},V=B[u],!isPlainObject$1(V));U++)handleMissing(n,u,M,k,F);if(!isPlainObject$1(V)||!isString$1(M))return a?NOT_REOSLVED:u;let I=`${M}__${u}`;isEmptyObject(b)||(I=`${I}__${JSON.stringify(b)}`);let L=d.get(I);return L||(L=new Intl.NumberFormat(M,assign$1({},V,b)),d.set(I,L)),x?L.formatToParts(f):L.format(f)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...n){const[e,o,a,s]=n,l=create$1();let c=create$1();if(!isNumber$2(e))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const d=e;return isString$1(o)?l.key=o:isPlainObject$1(o)&&Object.keys(o).forEach(u=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(u)?c[u]=o[u]:l[u]=o[u]}),isString$1(a)?l.locale=a:isPlainObject$1(a)&&(c=a),isPlainObject$1(s)&&(c=s),[l.key||"",d,l,c]}function clearNumberFormat(n,e,o){const a=n;for(const s in o){const l=`${e}__${s}`;a.__numberFormatters.has(l)&&a.__numberFormatters.delete(l)}}const DEFAULT_MODIFIER=n=>n,DEFAULT_MESSAGE=n=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=n=>n.length===0?"":join$1(n),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(n,e){return n=Math.abs(n),e===2?n?n>1?1:0:1:n?Math.min(n,2):0}function getPluralIndex(n){const e=isNumber$2(n.pluralIndex)?n.pluralIndex:-1;return n.named&&(isNumber$2(n.named.count)||isNumber$2(n.named.n))?isNumber$2(n.named.count)?n.named.count:isNumber$2(n.named.n)?n.named.n:e:e}function normalizeNamed(n,e){e.count||(e.count=n),e.n||(e.n=n)}function createMessageContext(n={}){const e=n.locale,o=getPluralIndex(n),a=isObject$2(n.pluralRules)&&isString$1(e)&&isFunction$1(n.pluralRules[e])?n.pluralRules[e]:pluralDefault,s=isObject$2(n.pluralRules)&&isString$1(e)&&isFunction$1(n.pluralRules[e])?pluralDefault:void 0,l=B=>B[a(o,B.length,s)],c=n.list||[],d=B=>c[B],u=n.named||create$1();isNumber$2(n.pluralIndex)&&normalizeNamed(o,u);const f=B=>u[B];function v(B,M){return(isFunction$1(n.messages)?n.messages(B,!!M):isObject$2(n.messages)?n.messages[B]:!1)||(n.parent?n.parent.message(B):DEFAULT_MESSAGE)}const b=B=>n.modifiers?n.modifiers[B]:DEFAULT_MODIFIER,k=isPlainObject$1(n.processor)&&isFunction$1(n.processor.normalize)?n.processor.normalize:DEFAULT_NORMALIZE,x=isPlainObject$1(n.processor)&&isFunction$1(n.processor.interpolate)?n.processor.interpolate:DEFAULT_INTERPOLATE,_=isPlainObject$1(n.processor)&&isString$1(n.processor.type)?n.processor.type:DEFAULT_MESSAGE_DATA_TYPE,E={list:d,named:f,plural:l,linked:(B,...M)=>{const[V,F]=M;let I="text",L="";M.length===1?isObject$2(V)?(L=V.modifier||L,I=V.type||I):isString$1(V)&&(L=V||L):M.length===2&&(isString$1(V)&&(L=V||L),isString$1(F)&&(I=F||I));const U=v(B,!0)(E),Z=I==="vnode"&&isArray$2(U)&&L?U[0]:U;return L?b(L)(Z,I):Z},message:v,type:_,interpolate:x,normalize:k,values:assign$1(create$1(),c,u)};return E}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=n=>isFunction$1(n);function translate(n,...e){const{fallbackFormat:o,postTranslation:a,unresolving:s,messageCompiler:l,fallbackLocale:c,messages:d}=n,[u,f]=parseTranslateArgs(...e),v=isBoolean$1(f.missingWarn)?f.missingWarn:n.missingWarn,b=isBoolean$1(f.fallbackWarn)?f.fallbackWarn:n.fallbackWarn,k=isBoolean$1(f.escapeParameter)?f.escapeParameter:n.escapeParameter,x=!!f.resolvedMessage,_=isString$1(f.default)||isBoolean$1(f.default)?isBoolean$1(f.default)?l?u:()=>u:f.default:o?l?u:()=>u:null,E=o||_!=null&&(isString$1(_)||isFunction$1(_)),B=getLocale(n,f);k&&escapeParams(f);let[M,V,F]=x?[u,B,d[B]||create$1()]:resolveMessageFormat(n,u,B,c,b,v),I=M,L=u;if(!x&&!(isString$1(I)||isMessageAST(I)||isMessageFunction(I))&&E&&(I=_,L=I),!x&&(!(isString$1(I)||isMessageAST(I)||isMessageFunction(I))||!isString$1(V)))return s?NOT_REOSLVED:u;let U=!1;const Z=()=>{U=!0},K=isMessageFunction(I)?I:compileMessageFormat(n,u,V,I,L,Z);if(U)return I;const j=getMessageContextOptions(n,V,F,f),W=createMessageContext(j),Y=evaluateMessage(n,K,W),G=a?a(Y,u):Y;if(__INTLIFY_PROD_DEVTOOLS__){const fe={timestamp:Date.now(),key:isString$1(u)?u:isMessageFunction(I)?I.key:"",locale:V||(isMessageFunction(I)?I.locale:""),format:isString$1(I)?I:isMessageFunction(I)?I.source:"",message:G};fe.meta=assign$1({},n.__meta,getAdditionalMeta()||{}),translateDevTools(fe)}return G}function escapeParams(n){isArray$2(n.list)?n.list=n.list.map(e=>isString$1(e)?escapeHtml(e):e):isObject$2(n.named)&&Object.keys(n.named).forEach(e=>{isString$1(n.named[e])&&(n.named[e]=escapeHtml(n.named[e]))})}function resolveMessageFormat(n,e,o,a,s,l){const{messages:c,onWarn:d,messageResolver:u,localeFallbacker:f}=n,v=f(n,a,o);let b=create$1(),k,x=null;const _="translate";for(let E=0;E<v.length&&(k=v[E],b=c[k]||create$1(),(x=u(b,e))===null&&(x=b[e]),!(isString$1(x)||isMessageAST(x)||isMessageFunction(x)));E++)if(!isImplicitFallback(k,v)){const B=handleMissing(n,e,k,l,_);B!==e&&(x=B)}return[x,k,b]}function compileMessageFormat(n,e,o,a,s,l){const{messageCompiler:c,warnHtmlMessage:d}=n;if(isMessageFunction(a)){const f=a;return f.locale=f.locale||o,f.key=f.key||e,f}if(c==null){const f=()=>a;return f.locale=o,f.key=e,f}const u=c(a,getCompileContext(n,o,s,a,d,l));return u.locale=o,u.key=e,u.source=a,u}function evaluateMessage(n,e,o){return e(o)}function parseTranslateArgs(...n){const[e,o,a]=n,s=create$1();if(!isString$1(e)&&!isNumber$2(e)&&!isMessageFunction(e)&&!isMessageAST(e))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const l=isNumber$2(e)?String(e):(isMessageFunction(e),e);return isNumber$2(o)?s.plural=o:isString$1(o)?s.default=o:isPlainObject$1(o)&&!isEmptyObject(o)?s.named=o:isArray$2(o)&&(s.list=o),isNumber$2(a)?s.plural=a:isString$1(a)?s.default=a:isPlainObject$1(a)&&assign$1(s,a),[l,s]}function getCompileContext(n,e,o,a,s,l){return{locale:e,key:o,warnHtmlMessage:s,onError:c=>{throw l&&l(c),c},onCacheKey:c=>generateFormatCacheKey(e,o,c)}}function getMessageContextOptions(n,e,o,a){const{modifiers:s,pluralRules:l,messageResolver:c,fallbackLocale:d,fallbackWarn:u,missingWarn:f,fallbackContext:v}=n,b={locale:e,modifiers:s,pluralRules:l,messages:(k,x)=>{let _=c(o,k);if(_==null&&(v||x)){const[,,E]=resolveMessageFormat(v||n,k,e,d,u,f);_=c(E,k)}if(isString$1(_)||isMessageAST(_)){let E=!1;const B=compileMessageFormat(n,k,e,_,k,()=>{E=!0});return E?NOOP_MESSAGE_FUNCTION:B}else return isMessageFunction(_)?_:NOOP_MESSAGE_FUNCTION}};return n.processor&&(b.processor=n.processor),a.list&&(b.list=a.list),a.named&&(b.named=a.named),isNumber$2(a.plural)&&(b.pluralIndex=a.plural),b}initFeatureFlags$1();const VERSION$1="10.0.5";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}const I18nErrorCodes={UNEXPECTED_RETURN_TYPE:CORE_ERROR_CODES_EXTEND_POINT,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:30,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32,NOT_COMPATIBLE_LEGACY_VUE_I18N:33,NOT_AVAILABLE_COMPOSITION_IN_LEGACY:34};function createI18nError(n,...e){return createCompileError(n,null,void 0)}const TranslateVNodeSymbol=makeSymbol$1("__translateVNode"),DatetimePartsSymbol=makeSymbol$1("__datetimeParts"),NumberPartsSymbol=makeSymbol$1("__numberParts"),SetPluralRulesSymbol=makeSymbol$1("__setPluralRules"),InejctWithOptionSymbol=makeSymbol$1("__injectWithOption"),DisposeSymbol=makeSymbol$1("__dispose");function handleFlatJson(n){if(!isObject$2(n))return n;for(const e in n)if(hasOwn(n,e))if(!e.includes("."))isObject$2(n[e])&&handleFlatJson(n[e]);else{const o=e.split("."),a=o.length-1;let s=n,l=!1;for(let c=0;c<a;c++){if(o[c]in s||(s[o[c]]=create$1()),!isObject$2(s[o[c]])){l=!0;break}s=s[o[c]]}l||(s[o[a]]=n[e],delete n[e]),isObject$2(s[o[a]])&&handleFlatJson(s[o[a]])}return n}function getLocaleMessages(n,e){const{messages:o,__i18n:a,messageResolver:s,flatJson:l}=e,c=isPlainObject$1(o)?o:isArray$2(a)?create$1():{[n]:create$1()};if(isArray$2(a)&&a.forEach(d=>{if("locale"in d&&"resource"in d){const{locale:u,resource:f}=d;u?(c[u]=c[u]||create$1(),deepCopy(f,c[u])):deepCopy(f,c)}else isString$1(d)&&deepCopy(JSON.parse(d),c)}),s==null&&l)for(const d in c)hasOwn(c,d)&&handleFlatJson(c[d]);return c}function getComponentOptions(n){return n.type}function adjustI18nResources(n,e,o){let a=isObject$2(e.messages)?e.messages:create$1();"__i18nGlobal"in o&&(a=getLocaleMessages(n.locale.value,{messages:a,__i18n:o.__i18nGlobal}));const s=Object.keys(a);s.length&&s.forEach(l=>{n.mergeLocaleMessage(l,a[l])});{if(isObject$2(e.datetimeFormats)){const l=Object.keys(e.datetimeFormats);l.length&&l.forEach(c=>{n.mergeDateTimeFormat(c,e.datetimeFormats[c])})}if(isObject$2(e.numberFormats)){const l=Object.keys(e.numberFormats);l.length&&l.forEach(c=>{n.mergeNumberFormat(c,e.numberFormats[c])})}}}function createTextNode(n){return createVNode(Text$1,null,n,0)}const DEVTOOLS_META="__INTLIFY_META__",NOOP_RETURN_ARRAY=()=>[],NOOP_RETURN_FALSE=()=>!1;let composerID=0;function defineCoreMissingHandler(n){return(e,o,a,s)=>n(o,a,getCurrentInstance()||void 0,s)}const getMetaInfo=()=>{const n=getCurrentInstance();let e=null;return n&&(e=getComponentOptions(n)[DEVTOOLS_META])?{[DEVTOOLS_META]:e}:null};function createComposer(n={}){const{__root:e,__injectWithOption:o}=n,a=e===void 0,s=n.flatJson,l=inBrowser?ref:shallowRef;let c=isBoolean$1(n.inheritLocale)?n.inheritLocale:!0;const d=l(e&&c?e.locale.value:isString$1(n.locale)?n.locale:DEFAULT_LOCALE),u=l(e&&c?e.fallbackLocale.value:isString$1(n.fallbackLocale)||isArray$2(n.fallbackLocale)||isPlainObject$1(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:d.value),f=l(getLocaleMessages(d.value,n)),v=l(isPlainObject$1(n.datetimeFormats)?n.datetimeFormats:{[d.value]:{}}),b=l(isPlainObject$1(n.numberFormats)?n.numberFormats:{[d.value]:{}});let k=e?e.missingWarn:isBoolean$1(n.missingWarn)||isRegExp$1(n.missingWarn)?n.missingWarn:!0,x=e?e.fallbackWarn:isBoolean$1(n.fallbackWarn)||isRegExp$1(n.fallbackWarn)?n.fallbackWarn:!0,_=e?e.fallbackRoot:isBoolean$1(n.fallbackRoot)?n.fallbackRoot:!0,E=!!n.fallbackFormat,B=isFunction$1(n.missing)?n.missing:null,M=isFunction$1(n.missing)?defineCoreMissingHandler(n.missing):null,V=isFunction$1(n.postTranslation)?n.postTranslation:null,F=e?e.warnHtmlMessage:isBoolean$1(n.warnHtmlMessage)?n.warnHtmlMessage:!0,I=!!n.escapeParameter;const L=e?e.modifiers:isPlainObject$1(n.modifiers)?n.modifiers:{};let U=n.pluralRules||e&&e.pluralRules,Z;Z=(()=>{a&&setFallbackContext(null);const me={version:VERSION$1,locale:d.value,fallbackLocale:u.value,messages:f.value,modifiers:L,pluralRules:U,missing:M===null?void 0:M,missingWarn:k,fallbackWarn:x,fallbackFormat:E,unresolving:!0,postTranslation:V===null?void 0:V,warnHtmlMessage:F,escapeParameter:I,messageResolver:n.messageResolver,messageCompiler:n.messageCompiler,__meta:{framework:"vue"}};me.datetimeFormats=v.value,me.numberFormats=b.value,me.__datetimeFormatters=isPlainObject$1(Z)?Z.__datetimeFormatters:void 0,me.__numberFormatters=isPlainObject$1(Z)?Z.__numberFormatters:void 0;const Be=createCoreContext(me);return a&&setFallbackContext(Be),Be})(),updateFallbackLocale(Z,d.value,u.value);function K(){return[d.value,u.value,f.value,v.value,b.value]}const j=computed({get:()=>d.value,set:me=>{d.value=me,Z.locale=d.value}}),W=computed({get:()=>u.value,set:me=>{u.value=me,Z.fallbackLocale=u.value,updateFallbackLocale(Z,d.value,me)}}),Y=computed(()=>f.value),G=computed(()=>v.value),fe=computed(()=>b.value);function le(){return isFunction$1(V)?V:null}function pe(me){V=me,Z.postTranslation=me}function ue(){return B}function Ne(me){me!==null&&(M=defineCoreMissingHandler(me)),B=me,Z.missing=M}const Ve=(me,Be,ht,pt,xt,bt)=>{K();let St;try{__INTLIFY_PROD_DEVTOOLS__,a||(Z.fallbackContext=e?getFallbackContext():void 0),St=me(Z)}finally{__INTLIFY_PROD_DEVTOOLS__,a||(Z.fallbackContext=void 0)}if(ht!=="translate exists"&&isNumber$2(St)&&St===NOT_REOSLVED||ht==="translate exists"&&!St){const[Ct,$t]=Be();return e&&_?pt(e):xt(Ct)}else{if(bt(St))return St;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function Ze(...me){return Ve(Be=>Reflect.apply(translate,null,[Be,...me]),()=>parseTranslateArgs(...me),"translate",Be=>Reflect.apply(Be.t,Be,[...me]),Be=>Be,Be=>isString$1(Be))}function We(...me){const[Be,ht,pt]=me;if(pt&&!isObject$2(pt))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return Ze(Be,ht,assign$1({resolvedMessage:!0},pt||{}))}function ze(...me){return Ve(Be=>Reflect.apply(datetime,null,[Be,...me]),()=>parseDateTimeArgs(...me),"datetime format",Be=>Reflect.apply(Be.d,Be,[...me]),()=>MISSING_RESOLVE_VALUE,Be=>isString$1(Be))}function qe(...me){return Ve(Be=>Reflect.apply(number$1,null,[Be,...me]),()=>parseNumberArgs(...me),"number format",Be=>Reflect.apply(Be.n,Be,[...me]),()=>MISSING_RESOLVE_VALUE,Be=>isString$1(Be))}function dt(me){return me.map(Be=>isString$1(Be)||isNumber$2(Be)||isBoolean$1(Be)?createTextNode(String(Be)):Be)}const Xe={normalize:dt,interpolate:me=>me,type:"vnode"};function Ge(...me){return Ve(Be=>{let ht;const pt=Be;try{pt.processor=Xe,ht=Reflect.apply(translate,null,[pt,...me])}finally{pt.processor=null}return ht},()=>parseTranslateArgs(...me),"translate",Be=>Be[TranslateVNodeSymbol](...me),Be=>[createTextNode(Be)],Be=>isArray$2(Be))}function ft(...me){return Ve(Be=>Reflect.apply(number$1,null,[Be,...me]),()=>parseNumberArgs(...me),"number format",Be=>Be[NumberPartsSymbol](...me),NOOP_RETURN_ARRAY,Be=>isString$1(Be)||isArray$2(Be))}function Te(...me){return Ve(Be=>Reflect.apply(datetime,null,[Be,...me]),()=>parseDateTimeArgs(...me),"datetime format",Be=>Be[DatetimePartsSymbol](...me),NOOP_RETURN_ARRAY,Be=>isString$1(Be)||isArray$2(Be))}function Ce(me){U=me,Z.pluralRules=U}function we(me,Be){return Ve(()=>{if(!me)return!1;const ht=isString$1(Be)?Be:d.value,pt=oe(ht),xt=Z.messageResolver(pt,me);return isMessageAST(xt)||isMessageFunction(xt)||isString$1(xt)},()=>[me],"translate exists",ht=>Reflect.apply(ht.te,ht,[me,Be]),NOOP_RETURN_FALSE,ht=>isBoolean$1(ht))}function ce(me){let Be=null;const ht=fallbackWithLocaleChain(Z,u.value,d.value);for(let pt=0;pt<ht.length;pt++){const xt=f.value[ht[pt]]||{},bt=Z.messageResolver(xt,me);if(bt!=null){Be=bt;break}}return Be}function ee(me){return ce(me)??(e?e.tm(me)||{}:{})}function oe(me){return f.value[me]||{}}function se(me,Be){if(s){const ht={[me]:Be};for(const pt in ht)hasOwn(ht,pt)&&handleFlatJson(ht[pt]);Be=ht[me]}f.value[me]=Be,Z.messages=f.value}function ge(me,Be){f.value[me]=f.value[me]||{};const ht={[me]:Be};if(s)for(const pt in ht)hasOwn(ht,pt)&&handleFlatJson(ht[pt]);Be=ht[me],deepCopy(Be,f.value[me]),Z.messages=f.value}function _e(me){return v.value[me]||{}}function ke(me,Be){v.value[me]=Be,Z.datetimeFormats=v.value,clearDateTimeFormat(Z,me,Be)}function Ee(me,Be){v.value[me]=assign$1(v.value[me]||{},Be),Z.datetimeFormats=v.value,clearDateTimeFormat(Z,me,Be)}function te(me){return b.value[me]||{}}function re(me,Be){b.value[me]=Be,Z.numberFormats=b.value,clearNumberFormat(Z,me,Be)}function de(me,Be){b.value[me]=assign$1(b.value[me]||{},Be),Z.numberFormats=b.value,clearNumberFormat(Z,me,Be)}composerID++,e&&inBrowser&&(watch(e.locale,me=>{c&&(d.value=me,Z.locale=me,updateFallbackLocale(Z,d.value,u.value))}),watch(e.fallbackLocale,me=>{c&&(u.value=me,Z.fallbackLocale=me,updateFallbackLocale(Z,d.value,u.value))}));const Oe={id:composerID,locale:j,fallbackLocale:W,get inheritLocale(){return c},set inheritLocale(me){c=me,me&&e&&(d.value=e.locale.value,u.value=e.fallbackLocale.value,updateFallbackLocale(Z,d.value,u.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:Y,get modifiers(){return L},get pluralRules(){return U||{}},get isGlobal(){return a},get missingWarn(){return k},set missingWarn(me){k=me,Z.missingWarn=k},get fallbackWarn(){return x},set fallbackWarn(me){x=me,Z.fallbackWarn=x},get fallbackRoot(){return _},set fallbackRoot(me){_=me},get fallbackFormat(){return E},set fallbackFormat(me){E=me,Z.fallbackFormat=E},get warnHtmlMessage(){return F},set warnHtmlMessage(me){F=me,Z.warnHtmlMessage=me},get escapeParameter(){return I},set escapeParameter(me){I=me,Z.escapeParameter=me},t:Ze,getLocaleMessage:oe,setLocaleMessage:se,mergeLocaleMessage:ge,getPostTranslationHandler:le,setPostTranslationHandler:pe,getMissingHandler:ue,setMissingHandler:Ne,[SetPluralRulesSymbol]:Ce};return Oe.datetimeFormats=G,Oe.numberFormats=fe,Oe.rt=We,Oe.te=we,Oe.tm=ee,Oe.d=ze,Oe.n=qe,Oe.getDateTimeFormat=_e,Oe.setDateTimeFormat=ke,Oe.mergeDateTimeFormat=Ee,Oe.getNumberFormat=te,Oe.setNumberFormat=re,Oe.mergeNumberFormat=de,Oe[InejctWithOptionSymbol]=o,Oe[TranslateVNodeSymbol]=Ge,Oe[DatetimePartsSymbol]=Te,Oe[NumberPartsSymbol]=ft,Oe}function convertComposerOptions(n){const e=isString$1(n.locale)?n.locale:DEFAULT_LOCALE,o=isString$1(n.fallbackLocale)||isArray$2(n.fallbackLocale)||isPlainObject$1(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:e,a=isFunction$1(n.missing)?n.missing:void 0,s=isBoolean$1(n.silentTranslationWarn)||isRegExp$1(n.silentTranslationWarn)?!n.silentTranslationWarn:!0,l=isBoolean$1(n.silentFallbackWarn)||isRegExp$1(n.silentFallbackWarn)?!n.silentFallbackWarn:!0,c=isBoolean$1(n.fallbackRoot)?n.fallbackRoot:!0,d=!!n.formatFallbackMessages,u=isPlainObject$1(n.modifiers)?n.modifiers:{},f=n.pluralizationRules,v=isFunction$1(n.postTranslation)?n.postTranslation:void 0,b=isString$1(n.warnHtmlInMessage)?n.warnHtmlInMessage!=="off":!0,k=!!n.escapeParameterHtml,x=isBoolean$1(n.sync)?n.sync:!0;let _=n.messages;if(isPlainObject$1(n.sharedMessages)){const L=n.sharedMessages;_=Object.keys(L).reduce((U,Z)=>{const K=U[Z]||(U[Z]={});return assign$1(K,L[Z]),U},_||{})}const{__i18n:E,__root:B,__injectWithOption:M}=n,V=n.datetimeFormats,F=n.numberFormats,I=n.flatJson;return{locale:e,fallbackLocale:o,messages:_,flatJson:I,datetimeFormats:V,numberFormats:F,missing:a,missingWarn:s,fallbackWarn:l,fallbackRoot:c,fallbackFormat:d,modifiers:u,pluralRules:f,postTranslation:v,warnHtmlMessage:b,escapeParameter:k,messageResolver:n.messageResolver,inheritLocale:x,__i18n:E,__root:B,__injectWithOption:M}}function createVueI18n(n={}){const e=createComposer(convertComposerOptions(n)),{__extender:o}=n,a={id:e.id,get locale(){return e.locale.value},set locale(s){e.locale.value=s},get fallbackLocale(){return e.fallbackLocale.value},set fallbackLocale(s){e.fallbackLocale.value=s},get messages(){return e.messages.value},get datetimeFormats(){return e.datetimeFormats.value},get numberFormats(){return e.numberFormats.value},get availableLocales(){return e.availableLocales},get missing(){return e.getMissingHandler()},set missing(s){e.setMissingHandler(s)},get silentTranslationWarn(){return isBoolean$1(e.missingWarn)?!e.missingWarn:e.missingWarn},set silentTranslationWarn(s){e.missingWarn=isBoolean$1(s)?!s:s},get silentFallbackWarn(){return isBoolean$1(e.fallbackWarn)?!e.fallbackWarn:e.fallbackWarn},set silentFallbackWarn(s){e.fallbackWarn=isBoolean$1(s)?!s:s},get modifiers(){return e.modifiers},get formatFallbackMessages(){return e.fallbackFormat},set formatFallbackMessages(s){e.fallbackFormat=s},get postTranslation(){return e.getPostTranslationHandler()},set postTranslation(s){e.setPostTranslationHandler(s)},get sync(){return e.inheritLocale},set sync(s){e.inheritLocale=s},get warnHtmlInMessage(){return e.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(s){e.warnHtmlMessage=s!=="off"},get escapeParameterHtml(){return e.escapeParameter},set escapeParameterHtml(s){e.escapeParameter=s},get pluralizationRules(){return e.pluralRules||{}},__composer:e,t(...s){return Reflect.apply(e.t,e,[...s])},rt(...s){return Reflect.apply(e.rt,e,[...s])},tc(...s){const[l,c,d]=s,u={plural:1};let f=null,v=null;if(!isString$1(l))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const b=l;return isString$1(c)?u.locale=c:isNumber$2(c)?u.plural=c:isArray$2(c)?f=c:isPlainObject$1(c)&&(v=c),isString$1(d)?u.locale=d:isArray$2(d)?f=d:isPlainObject$1(d)&&(v=d),Reflect.apply(e.t,e,[b,f||v||{},u])},te(s,l){return e.te(s,l)},tm(s){return e.tm(s)},getLocaleMessage(s){return e.getLocaleMessage(s)},setLocaleMessage(s,l){e.setLocaleMessage(s,l)},mergeLocaleMessage(s,l){e.mergeLocaleMessage(s,l)},d(...s){return Reflect.apply(e.d,e,[...s])},getDateTimeFormat(s){return e.getDateTimeFormat(s)},setDateTimeFormat(s,l){e.setDateTimeFormat(s,l)},mergeDateTimeFormat(s,l){e.mergeDateTimeFormat(s,l)},n(...s){return Reflect.apply(e.n,e,[...s])},getNumberFormat(s){return e.getNumberFormat(s)},setNumberFormat(s,l){e.setNumberFormat(s,l)},mergeNumberFormat(s,l){e.mergeNumberFormat(s,l)}};return a.__extender=o,a}function defineMixin(n,e,o){return{beforeCreate(){const a=getCurrentInstance();if(!a)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const l=s.i18n;if(s.__i18n&&(l.__i18n=s.__i18n),l.__root=e,this===this.$root)this.$i18n=mergeToGlobal(n,l);else{l.__injectWithOption=!0,l.__extender=o.__vueI18nExtend,this.$i18n=createVueI18n(l);const c=this.$i18n;c.__extender&&(c.__disposer=c.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=mergeToGlobal(n,s);else{this.$i18n=createVueI18n({__i18n:s.__i18n,__injectWithOption:!0,__extender:o.__vueI18nExtend,__root:e});const l=this.$i18n;l.__extender&&(l.__disposer=l.__extender(this.$i18n))}else this.$i18n=n;s.__i18nGlobal&&adjustI18nResources(e,s,s),this.$t=(...l)=>this.$i18n.t(...l),this.$rt=(...l)=>this.$i18n.rt(...l),this.$tc=(...l)=>this.$i18n.tc(...l),this.$te=(l,c)=>this.$i18n.te(l,c),this.$d=(...l)=>this.$i18n.d(...l),this.$n=(...l)=>this.$i18n.n(...l),this.$tm=l=>this.$i18n.tm(l),o.__setInstance(a,this.$i18n)},mounted(){},unmounted(){const a=getCurrentInstance();if(!a)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),o.__deleteInstance(a),delete this.$i18n}}}function mergeToGlobal(n,e){n.locale=e.locale||n.locale,n.fallbackLocale=e.fallbackLocale||n.fallbackLocale,n.missing=e.missing||n.missing,n.silentTranslationWarn=e.silentTranslationWarn||n.silentFallbackWarn,n.silentFallbackWarn=e.silentFallbackWarn||n.silentFallbackWarn,n.formatFallbackMessages=e.formatFallbackMessages||n.formatFallbackMessages,n.postTranslation=e.postTranslation||n.postTranslation,n.warnHtmlInMessage=e.warnHtmlInMessage||n.warnHtmlInMessage,n.escapeParameterHtml=e.escapeParameterHtml||n.escapeParameterHtml,n.sync=e.sync||n.sync,n.__composer[SetPluralRulesSymbol](e.pluralizationRules||n.pluralizationRules);const o=getLocaleMessages(n.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(o).forEach(a=>n.mergeLocaleMessage(a,o[a])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(a=>n.mergeDateTimeFormat(a,e.datetimeFormats[a])),e.numberFormats&&Object.keys(e.numberFormats).forEach(a=>n.mergeNumberFormat(a,e.numberFormats[a])),n}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:n=>n==="parent"||n==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:n},e){return e.length===1&&e[0]==="default"?(n.default?n.default():[]).reduce((o,a)=>[...o,...a.type===Fragment$1?a.children:[a]],[]):e.reduce((o,a)=>{const s=n[a];return s&&(o[a]=s()),o},create$1())}function getFragmentableTag(){return Fragment$1}const TranslationImpl=defineComponent({name:"i18n-t",props:assign$1({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:n=>isNumber$2(n)||!isNaN(n)}},baseFormatProps),setup(n,e){const{slots:o,attrs:a}=e,s=n.i18n||useI18n({useScope:n.scope,__useComponent:!0});return()=>{const l=Object.keys(o).filter(b=>b!=="_"),c=create$1();n.locale&&(c.locale=n.locale),n.plural!==void 0&&(c.plural=isString$1(n.plural)?+n.plural:n.plural);const d=getInterpolateArg(e,l),u=s[TranslateVNodeSymbol](n.keypath,d,c),f=assign$1(create$1(),a),v=isString$1(n.tag)||isObject$2(n.tag)?n.tag:getFragmentableTag();return h(v,f,u)}}}),Translation=TranslationImpl;function isVNode(n){return isArray$2(n)&&!isString$1(n[0])}function renderFormatter(n,e,o,a){const{slots:s,attrs:l}=e;return()=>{const c={part:!0};let d=create$1();n.locale&&(c.locale=n.locale),isString$1(n.format)?c.key=n.format:isObject$2(n.format)&&(isString$1(n.format.key)&&(c.key=n.format.key),d=Object.keys(n.format).reduce((k,x)=>o.includes(x)?assign$1(create$1(),k,{[x]:n.format[x]}):k,create$1()));const u=a(n.value,c,d);let f=[c.key];isArray$2(u)?f=u.map((k,x)=>{const _=s[k.type],E=_?_({[k.type]:k.value,index:x,parts:u}):[k.value];return isVNode(E)&&(E[0].key=`${k.type}-${x}`),E}):isString$1(u)&&(f=[u]);const v=assign$1(create$1(),l),b=isString$1(n.tag)||isObject$2(n.tag)?n.tag:getFragmentableTag();return h(b,v,f)}}const NumberFormatImpl=defineComponent({name:"i18n-n",props:assign$1({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(n,e){const o=n.i18n||useI18n({useScope:n.scope,__useComponent:!0});return renderFormatter(n,e,NUMBER_FORMAT_OPTIONS_KEYS,(...a)=>o[NumberPartsSymbol](...a))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=defineComponent({name:"i18n-d",props:assign$1({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(n,e){const o=n.i18n||useI18n({useScope:n.scope,__useComponent:!0});return renderFormatter(n,e,DATETIME_FORMAT_OPTIONS_KEYS,(...a)=>o[DatetimePartsSymbol](...a))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$1(n,e){const o=n;if(n.mode==="composition")return o.__getInstance(e)||n.global;{const a=o.__getInstance(e);return a!=null?a.__composer:n.global.__composer}}function vTDirective(n){const e=o=>{const{instance:a,value:s}=o;if(!a||!a.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const l=getComposer$1(n,a.$),c=parseValue(s);return[Reflect.apply(l.t,l,[...makeParams(c)]),l]};return{created:(o,a)=>{const[s,l]=e(a);inBrowser&&n.global===l&&(o.__i18nWatcher=watch(l.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=l,o.textContent=s},unmounted:o=>{inBrowser&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const s=o.__composer,l=parseValue(a);o.textContent=Reflect.apply(s.t,s,[...makeParams(l)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function parseValue(n){if(isString$1(n))return{path:n};if(isPlainObject$1(n)){if(!("path"in n))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return n}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(n){const{path:e,locale:o,args:a,choice:s,plural:l}=n,c={},d=a||{};return isString$1(o)&&(c.locale=o),isNumber$2(s)&&(c.plural=s),isNumber$2(l)&&(c.plural=l),[e,d,c]}function apply$1(n,e,...o){const a=isPlainObject$1(o[0])?o[0]:{};(!isBoolean$1(a.globalInstall)||a.globalInstall)&&([Translation.name,"I18nT"].forEach(s=>n.component(s,Translation)),[NumberFormat.name,"I18nN"].forEach(s=>n.component(s,NumberFormat)),[DatetimeFormat.name,"I18nD"].forEach(s=>n.component(s,DatetimeFormat))),n.directive("t",vTDirective(e))}const I18nInjectionKey=makeSymbol$1("global-vue-i18n");function createI18n(n={},e){const o=__VUE_I18N_LEGACY_API__&&isBoolean$1(n.legacy)?n.legacy:__VUE_I18N_LEGACY_API__,a=isBoolean$1(n.globalInjection)?n.globalInjection:!0,s=new Map,[l,c]=createGlobal(n,o),d=makeSymbol$1("");function u(k){return s.get(k)||null}function f(k,x){s.set(k,x)}function v(k){s.delete(k)}const b={get mode(){return __VUE_I18N_LEGACY_API__&&o?"legacy":"composition"},async install(k,...x){if(k.__VUE_I18N_SYMBOL__=d,k.provide(k.__VUE_I18N_SYMBOL__,b),isPlainObject$1(x[0])){const B=x[0];b.__composerExtend=B.__composerExtend,b.__vueI18nExtend=B.__vueI18nExtend}let _=null;!o&&a&&(_=injectGlobalFields(k,b.global)),__VUE_I18N_FULL_INSTALL__&&apply$1(k,b,...x),__VUE_I18N_LEGACY_API__&&o&&k.mixin(defineMixin(c,c.__composer,b));const E=k.unmount;k.unmount=()=>{_&&_(),b.dispose(),E()}},get global(){return c},dispose(){l.stop()},__instances:s,__getInstance:u,__setInstance:f,__deleteInstance:v};return b}function useI18n(n={}){const e=getCurrentInstance();if(e==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSTALLED);const o=getI18nInstance(e),a=getGlobalComposer(o),s=getComponentOptions(e),l=getScope(n,s);if(l==="global")return adjustI18nResources(a,n,s),a;if(l==="parent"){let u=getComposer(o,e,n.__useComponent);return u==null&&(u=a),u}const c=o;let d=c.__getInstance(e);if(d==null){const u=assign$1({},n);"__i18n"in s&&(u.__i18n=s.__i18n),a&&(u.__root=a),d=createComposer(u),c.__composerExtend&&(d[DisposeSymbol]=c.__composerExtend(d)),setupLifeCycle(c,e,d),c.__setInstance(e,d)}return d}function createGlobal(n,e,o){const a=effectScope(),s=__VUE_I18N_LEGACY_API__&&e?a.run(()=>createVueI18n(n)):a.run(()=>createComposer(n));if(s==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[a,s]}function getI18nInstance(n){const e=inject(n.isCE?I18nInjectionKey:n.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw createI18nError(n.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return e}function getScope(n,e){return isEmptyObject(n)?"__i18n"in e?"local":"global":n.useScope?n.useScope:"local"}function getGlobalComposer(n){return n.mode==="composition"?n.global:n.global.__composer}function getComposer(n,e,o=!1){let a=null;const s=e.root;let l=getParentComponentInstance(e,o);for(;l!=null;){const c=n;if(n.mode==="composition")a=c.__getInstance(l);else if(__VUE_I18N_LEGACY_API__){const d=c.__getInstance(l);d!=null&&(a=d.__composer,o&&a&&!a[InejctWithOptionSymbol]&&(a=null))}if(a!=null||s===l)break;l=l.parent}return a}function getParentComponentInstance(n,e=!1){return n==null?null:e&&n.vnode.ctx||n.parent}function setupLifeCycle(n,e,o){onMounted(()=>{},e),onUnmounted(()=>{const a=o;n.__deleteInstance(e);const s=a[DisposeSymbol];s&&(s(),delete a[DisposeSymbol])},e)}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(n,e){const o=Object.create(null);return globalExportProps.forEach(a=>{const s=Object.getOwnPropertyDescriptor(e,a);if(!s)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const l=isRef(s.value)?{get(){return s.value.value},set(c){s.value.value=c}}:{get(){return s.get&&s.get()}};Object.defineProperty(o,a,l)}),n.config.globalProperties.$i18n=o,globalExportMethods.forEach(a=>{const s=Object.getOwnPropertyDescriptor(e,a);if(!s||!s.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(n.config.globalProperties,`$${a}`,s)}),()=>{delete n.config.globalProperties.$i18n,globalExportMethods.forEach(a=>{delete n.config.globalProperties[`$${a}`]})}}if(initFeatureFlags(),registerMessageCompiler(compile),registerMessageResolver(resolveValue),registerLocaleFallbacker(fallbackWithLocaleChain),__INTLIFY_PROD_DEVTOOLS__){const n=getGlobalThis();n.__INTLIFY__=!0,setDevToolsHook(n.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}function _mitt(n){return{all:n=n||new Map,on:function(e,o){var a=n.get(e);a?a.push(o):n.set(e,[o])},off:function(e,o){var a=n.get(e);a&&(o?a.splice(a.indexOf(o)>>>0,1):n.set(e,[]))},emit:function(e,o){var a=n.get(e);a&&a.slice().map(function(s){s(o)}),(a=n.get("*"))&&a.slice().map(function(s){s(e,o)})}}}const EVENTS=["afterBlocksTrCommit","blocksDestroy"],useEventBus=()=>{const n=inject("eventBus");return{emit:n.emit,on:n.on,off:n.off,all:n.all,eventRefs:inject("eventRefs")}},eventbusPlugin={install:(n,e)=>{const o=_mitt(),a=EVENTS.reduce((s,l)=>(s[l]=ref(null),s),{});for(const s of EVENTS)o.on(s,(...l)=>{a[s].value=l});n.provide("eventBus",o),n.provide("eventRefs",a)}},messages={zh_CN:{languages:{label:"\u8BED\u8A00",zh_CN:"\u7B80\u4F53\u4E2D\u6587",en_US:"\u82F1\u8BED",zh_HK:"\u7E41\u4F53\u4E2D\u6587 (\u9999\u6E2F)",zh_TW:"\u7E41\u4F53\u4E2D\u6587 (\u53F0\u6E7E)",ja_JP:"\u65E5\u8BED",fr_FR:"\u6CD5\u8BED"},login:{kbEditorLogin:{title:"\u6253\u5F00\u77E5\u8BC6\u5E93",serverUrlLabel:"\u670D\u52A1\u5668 URL",serverUrlPlaceholder:"\u8F93\u5165\u670D\u52A1\u5668 URL\uFF0C\u4F8B\u5982 http://43.134.1.60/:8081",noKbServerMsg:'\u6B64\u670D\u52A1\u5668\u4E0A\u6CA1\u6709\u77E5\u8BC6\u5E93\uFF0C\u4F60\u53EF\u4EE5<a class="cursor-pointer">\u4EE5\u7BA1\u7406\u5458\u8EAB\u4EFD\u767B\u5F55</a>\uFF0C\u7136\u540E\u5728\u63A7\u5236\u9762\u677F\u521B\u5EFA\u65B0\u77E5\u8BC6\u5E93\u3002',kbLocationLabel:"\u77E5\u8BC6\u5E93",refreshKbListTooltip:"\u5237\u65B0\u77E5\u8BC6\u5E93\u5217\u8868",passwordLabel:"\u5BC6\u7801",adminLoginBtn:"\u7BA1\u7406\u5458\u767B\u9646",serverStatus:{invalidURL:"URL \u683C\u5F0F\u4E0D\u6B63\u786E",connFailed:"\u8FDE\u63A5\u5931\u8D25",connecting:"\u8FDE\u63A5\u4E2D",connSuccess:"\u8FDE\u63A5\u6210\u529F",noKbServer:"\u6CA1\u6709\u77E5\u8BC6\u5E93\u670D\u52A1\u5668",loginFailed:"\u767B\u5F55\u5931\u8D25"},loginStatus:{idle:"\u7A7A\u95F2",loggingIn:"\u767B\u5F55\u4E2D",loginSuccess:"\u767B\u5F55\u6210\u529F",loginFailed_InvalidPassword:"\u5BC6\u7801\u9519\u8BEF",loginFailed_Unknown:"\u672A\u77E5\u9519\u8BEF\uFF0C\u8BF7\u8054\u7CFB\u670D\u52A1\u5668\u7BA1\u7406\u5458"},loginBtn:{idle:"\u767B\u5F55",loggingIn:"\u767B\u5F55\u4E2D...",loginSuccess:"\u767B\u5F55\u6210\u529F",loginFailed_InvalidPassword:"\u767B\u5F55",loginFailed_Unknown:"\u767B\u5F55"}},adminLogin:{title:"\u7BA1\u7406\u5458\u767B\u5F55",serverUrlLabel:"\u670D\u52A1\u5668 URL",serverUrlPlaceholder:"\u8F93\u5165\u670D\u52A1\u5668 URL\uFF0C\u4F8B\u5982 http://43.134.1.60/:8081",passwordLabel:"\u5BC6\u7801",kbEditorLoginBtn:"\u77E5\u8BC6\u5E93\u7F16\u8F91\u8005\u767B\u9646",loginBtn:{idle:"\u767B\u5F55",loggingIn:"\u767B\u5F55\u4E2D...",loginSuccess:"\u767B\u5F55\u6210\u529F",invalidServerUrl:"\u767B\u9646\u5931\u8D25",invalidPassword:"\u767B\u9646\u5931\u8D25",maxAttempts:"\u767B\u9646\u5931\u8D25",cannotConnectToServer:"\u767B\u9646\u5931\u8D25"},errMsg:{invalidServerUrl:"URL \u683C\u5F0F\u4E0D\u6B63\u786E",invalidPassword:"\u5BC6\u7801\u9519\u8BEF",maxAttempts:"\u8FBE\u5230\u6700\u5927\u5C1D\u8BD5\u6B21\u6570\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",cannotConnectToServer:"\u65E0\u6CD5\u8FDE\u63A5\u5230\u670D\u52A1\u5668"}}},kbView:{loadingKb:"\u52A0\u8F7D\u77E5\u8BC6\u5E93\u4E2D...",backlinksPanel:{nBacklinks:"{count} \u4E2A\u53CD\u5411\u94FE\u63A5",nPotentialLinks:"{count} \u4E2A\u6F5C\u5728\u94FE\u63A5"},keybindingInput:{empty:"\u70B9\u51FB\u8BBE\u7F6E\u5FEB\u6377\u952E"},codeblock:{unknownLanguage:"\u672A\u77E5\u8BED\u8A00",copyCode:"\u590D\u5236\u4EE3\u7801",copySuccess:"\u4EE3\u7801\u5757\u4E2D\u7684\u4EE3\u7801\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F"},imageEditor:{title:"\u56FE\u7247\u7F16\u8F91\u5668",description:"\u652F\u6301\u56FE\u7247\u88C1\u526A\u3001\u65CB\u8F6C\uFF0C\u81EA\u52A8\u4F18\u5316\u626B\u63CF\u6587\u4EF6\u7B49\u529F\u80FD",cancel:"\u53D6\u6D88",save:"\u5E94\u7528\u66F4\u6539",saveAs:"\u53E6\u5B58\u4E3A",deleteOriginal:"\u662F\u5426\u5220\u9664\u539F\u56FE\uFF1F"},fusionCommand:{noResults:"\u6CA1\u6709\u627E\u5230\u76F8\u5173\u5185\u5BB9",noCommandResults:"\u6CA1\u6709\u627E\u5230\u76F8\u5173\u547D\u4EE4",allowedBlockTypes:"\u5141\u8BB8\u7684\u5757\u7C7B\u578B",searchPlaceholder:"\u641C\u7D22\u77E5\u8BC6\u5E93",searchHelp:"\u2191\u2193 \u548C Home, End \u53EF\u9009\u62E9\u641C\u7D22\u7ED3\u679C\uFF0C\u21B5 \u8DF3\u8F6C\u5230\u9009\u4E2D\u9879\uFF0C\u2318+\u21B5 \u63D2\u5165\u5757\u94FE\u63A5\uFF0Cesc \u5173\u95ED\u641C\u7D22\u9762\u677F",commandHelp:"\u8F93\u5165 / \u53EF\u641C\u7D22\u547D\u4EE4\uFF0C\u2191\u2193 \u548C Home, End \u9009\u62E9\u547D\u4EE4\u7136\u540E \u21B5 \u6267\u884C\u547D\u4EE4\uFF0Cesc \u5173\u95ED\u547D\u4EE4\u9762\u677F"},blockMover:{moveSuccess:"\u79FB\u52A8 {count} \u4E2A\u5757\u6210\u529F",focusMovedBlock:"\u805A\u7126\u5230\u79FB\u52A8\u540E\u7684\u5757",inputPlaceholder:"\u79FB\u52A8\u5230..."},refSuggestions:{noSuggestions:"\u6CA1\u6709\u7ED3\u679C",createNewUnder1:"\u5728",createNewUnder2:"\u4E0B\u521B\u5EFA\u65B0\u5757"},pomodoro:{startWorking:"\u5F00\u5DE5\u5427\uFF01",startResting:"\u4F11\u606F\u4E00\u4E0B",stop:"\u505C\u6B62",working:"\u5DE5\u4F5C\u4E2D...",resting:"\u4F11\u606F\u4E2D..."},settingsPanel:{title:"\u8BBE\u7F6E",invalidJson:"\u65E0\u6548\u7684 JSON",reset:"\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C",noResult:"\u6CA1\u6709\u627E\u5230\u7B26\u5408\u6761\u4EF6\u7684\u5757",invalidBlockId:"\u65E0\u6548\u7684\u5757 ID"},syncStatus:{synced:"\u6240\u6709\u66F4\u6539\u5DF2\u540C\u6B65",syncing:"\u540C\u6B65\u4E2D",disconnected:"\u540C\u6B65\u5931\u8D25"},sidePane:{remove:"\u4ECE\u4FA7\u680F\u79FB\u9664\u6B64\u9879",prev:"\u805A\u7126\u5230\u4E0A\u4E00\u9879",next:"\u805A\u7126\u5230\u4E0B\u4E00\u9879",collapse:"\u6298\u53E0\u4FA7\u8FB9\u680F",moveToRight:"\u79FB\u52A8\u4FA7\u8FB9\u680F\u5230\u53F3\u4FA7",moveToBottom:"\u79FB\u52A8\u4FA7\u8FB9\u680F\u5230\u4E0B\u65B9",setFilter:"\u8BBE\u7F6E\u8FC7\u6EE4\u6761\u4EF6",setSort:"\u8BBE\u7F6E\u6392\u5E8F\u6761\u4EF6",empty:"\u{1F914} \u5F53\u524D\u4FA7\u8FB9\u680F\u4E3A\u7A7A",searchAndAdd:"\u641C\u7D22\u5757\u5E76\u6DFB\u52A0\u5230\u4FA7\u8FB9\u680F",emptyTip:`\u60A8\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u6DFB\u52A0\u5185\u5BB9\uFF1A
  - \u5728\u5757\u83DC\u5355\u4E2D\u9009\u62E9"\u6DFB\u52A0\u5230\u4FA7\u8FB9\u680F"
  - \u4F7F\u7528\u5FEB\u6377\u952E Command/Ctrl + K
  - \u53F3\u4E0A\u89D2\u70B9\u51FB "+" \u6309\u94AE\u641C\u7D22\u6DFB\u52A0\u5757`},headerBar:{moreOptions:"\u66F4\u591A\u9009\u9879",dailynoteNavigator:"\u6BCF\u65E5\u7B14\u8BB0",pomodoro:"\u756A\u8304\u949F",closeMenu:"\u5173\u95ED\u83DC\u5355",openMenu:"\u6253\u5F00\u83DC\u5355",back:"\u540E\u9000",forward:"\u524D\u8FDB",search:"\u641C\u7D22",notifications:"\u901A\u77E5",switchLightTheme:"\u5207\u6362\u4E3A\u660E\u4EAE\u4E3B\u9898",switchDarkTheme:"\u5207\u6362\u4E3A\u9ED1\u6697\u4E3B\u9898",openSidepane:"\u6253\u5F00\u4FA7\u680F",closeSidepane:"\u5173\u95ED\u4FA7\u680F",export:"\u5BFC\u51FA",import:"\u5BFC\u5165",enterFocusMode:"\u8FDB\u5165\u4E13\u6CE8\u6A21\u5F0F",exitFocusMode:"\u9000\u51FA\u4E13\u6CE8\u6A21\u5F0F",attachmentsManager:"\u9644\u4EF6\u7BA1\u7406",settings:"\u8BBE\u7F6E",timeMachine:"\u65F6\u5149\u673A",help:"\u5E2E\u52A9\u6587\u6863",exit:"\u9000\u51FA",keybindings:"\u67E5\u770B & \u7F16\u8F91\u5FEB\u6377\u952E"},command:{deleteBlock:"\u5220\u9664\u5757",copyBlockReference:"\u590D\u5236\u5757\u5F15\u7528",copyBlockMirror:"\u590D\u5236\u5757\u955C\u50CF",addToFavorite:"\u6DFB\u52A0\u5230\u6536\u85CF",addToSidepane:"\u6DFB\u52A0\u5230\u4FA7\u8FB9\u680F",export:"\u5BFC\u51FA",sortDirectChildren:"\u6392\u5E8F\u76F4\u63A5\u5B50\u5757",sortDictAsc:"\u5B57\u5178\u5E8F\u5347\u5E8F",sortDictDesc:"\u5B57\u5178\u5E8F\u964D\u5E8F",ctimeAsc:"\u521B\u5EFA\u65F6\u95F4\u5347\u5E8F",ctimeDesc:"\u521B\u5EFA\u65F6\u95F4\u964D\u5E8F",mtimeAsc:"\u4FEE\u6539\u65F6\u95F4\u5347\u5E8F",mtimeDesc:"\u4FEE\u6539\u65F6\u95F4\u964D\u5E8F",archiveDone:"\u5F52\u6863\u5DF2\u5B8C\u6210\u4EFB\u52A1",moveBlock:"\u79FB\u52A8\u5757",moveBlockLeaveRef:"\u79FB\u52A8\u5757\uFF0C\u7559\u4E0B\u5757\u5F15\u7528",moveBlockLeaveMirror:"\u79FB\u52A8\u5757\uFF0C\u7559\u4E0B\u5757\u955C\u50CF",insertMirrorBelow:"\u4E0B\u65B9\u63D2\u5165\u955C\u50CF\u5757",openFieldValuesInspector:"\u6253\u5F00\u5C5E\u6027\u68C0\u89C6\u5668",setBlockRefColor:"\u8BBE\u7F6E\u5757\u5F15\u7528\u989C\u8272",blue:"\u84DD\u8272",green:"\u7EFF\u8272",red:"\u7EA2\u8272",yellow:"\u9EC4\u8272",gray:"\u7070\u8272",orange:"\u6A59\u8272",purple:"\u7D2B\u8272"},backlinks:{openBacklinksPanel:"\u6253\u5F00\u53CD\u94FE\u9762\u677F"},createNewTreeDialog:{title:"\u521B\u5EFA\u65B0\u6587\u6863",description:`\u6CA1\u6709\u627E\u5230\u6839\u5757\uFF0C\u8FD9\u53EF\u80FD\u662F\u56E0\u4E3A\uFF1A
1. \u8FD9\u662F\u4E00\u4E2A\u65B0\u6587\u6863
2. \u6570\u636E\u8FD8\u5728\u540C\u6B65\u4E2D`,waitingForSync:'\u6B63\u5728\u7B49\u5F85\u540C\u6B65\uFF0C\u5982\u679C\u786E\u5B9A\u8FD9\u662F\u65B0\u6587\u6863\uFF0C\u53EF\u4EE5\u70B9\u51FB"\u521B\u5EFA"\u6309\u94AE\u521B\u5EFA\u65B0\u6587\u6863\u3002',waitBtn:"\u7B49\u5F85",createBtn:"\u521B\u5EFA",creating:"\u6B63\u5728\u521B\u5EFA...",done:"\u521B\u5EFA\u6210\u529F",failed:"\u521B\u5EFA\u5931\u8D25"},pasteDialog:{title:"\u4E0D\u8981\u4E0D\u8981",description:"\u592A\u5927\u5566\uFF01\u653E\u8FDB\u6765\u4F1A\u574F\u6389\u7684\uFF01\u8981\u4E0D\u8BD5\u8BD5\u5206\u6BB5\u7C98\u8D34\uFF1F",cancelBtn:"\u6211\u77E5\u9053\u4E86"},attachmentsManager:{title:"\u9644\u4EF6\u7BA1\u7406\u5668",upload:"\u4E0A\u4F20",noFiles:"\u6CA1\u6709\u6587\u4EF6",refreshing:"\u6B63\u5728\u5237\u65B0...",refreshed:"\u5237\u65B0\u6210\u529F",previewPane:{openPreview:"\u9884\u89C8",download:"\u4E0B\u8F7D",reference:"\u63D2\u5165\u5757\u5F15\u7528",pathReference:"\u63D2\u5165\u8DEF\u5F84\u5F15\u7528",insertImage:"\u63D2\u5165\u56FE\u7247",fetchingImage:"\u56FE\u7247\u52A0\u8F7D\u4E2D...",closePreview:"\u5173\u95ED\u9884\u89C8",delete:"\u5220\u9664",info:"\u8BE6\u7EC6\u4FE1\u606F"},uploadStatus:{idle:"\u7A7A\u95F2",uploading:"\u4E0A\u4F20\u4E2D...",success:"\u4E0A\u4F20\u6210\u529F",failed:"\u4E0A\u4F20\u5931\u8D25"},fetchFilesStatus:{idle:"\u7A7A\u95F2",fetching:"\u6B63\u5728\u83B7\u53D6\u6587\u4EF6\u5217\u8868...",success:"\u83B7\u53D6\u6587\u4EF6\u5217\u8868\u6210\u529F",failed:"\u83B7\u53D6\u6587\u4EF6\u5217\u8868\u5931\u8D25"}},imageContent:{fetchingImage:"\u56FE\u7247\u52A0\u8F7D\u4E2D...",addCaption:"\u6DFB\u52A0\u56FE\u7247\u63CF\u8FF0",deleteImage:"\u5220\u9664\u56FE\u7247",blend:"\u4E0E\u80CC\u666F\u6DF7\u5408\uFF08\u6309\u989C\u8272\uFF09",blendLuminosity:"\u4E0E\u80CC\u666F\u6DF7\u5408\uFF08\u6309\u4EAE\u5EA6\uFF09",circle:"\u88C1\u526A\u4E3A\u5706\u5F62",invert:"\u53CD\u8272",invertW:"\u53CD\u8272\uFF08\u767D\u5E95\uFF09",outline:"\u63CF\u8FB9",width:"\u5BBD\u5EA6",wider:"\u66F4\u5BBD",narrower:"\u66F4\u7A84",resetWidth:"\u91CD\u7F6E",download:"\u4E0B\u8F7D\u56FE\u7247",metadata:"\u8BE6\u7EC6\u4FE1\u606F",filter:"\u6EE4\u955C",clearScannedImage:"\u6E05\u9664\u626B\u63CF\u56FE\u7247\u7684\u80CC\u666F"},exporter:{title:"\u5BFC\u51FA",description:"\u5BFC\u51FA\u9009\u4E2D\u5B50\u6811\u4E3A HTML, PDF, Markdown, Plain Text \u7B49\u591A\u79CD\u683C\u5F0F",preview:"\u9884\u89C8",copyToClipboard:"\u590D\u5236\u5230\u526A\u8D34\u677F",exportToFile:"\u5BFC\u51FA\u5230\u6587\u4EF6",cancel:"\u53D6\u6D88",exportFormat:"\u5BFC\u51FA\u683C\u5F0F"},fontSelector:{notAvailable:"(\u672A\u5B89\u88C5)",notSpecified:"(\u672A\u6307\u5B9A)"},fieldValuesInspector:{title:"\u5C5E\u6027\u68C0\u89C6\u5668",description:"\u67E5\u770B\u8FD9\u4E2A\u5757\u7684\u6240\u6709\u5C5E\u6027\u503C"},dailynoteNavigator:{noDailyNote:"\u8FD9\u4E00\u5929\u6CA1\u6709\u6BCF\u65E5\u7B14\u8BB0\uFF0C\u70B9\u51FB\u4EE5\u521B\u5EFA",gotoDailyNote:"\u70B9\u51FB\u4EE5\u524D\u5F80\u8FD9\u4E00\u5929\u7684\u6BCF\u65E5\u7B14\u8BB0",dontKnowWhereToCreate:{title:"\u4E0D\u77E5\u9053\u5728\u54EA\u91CC\u521B\u5EFA\u6BCF\u65E5\u7B14\u8BB0",desc:'\u4F60\u5E94\u8BE5\u5230 "\u8BBE\u7F6E > \u6BCF\u65E5\u7B14\u8BB0 > \u6BCF\u65E5\u7B14\u8BB0\u7684\u5B58\u653E\u4F4D\u7F6E" \u8BBE\u7F6E\u65B0\u521B\u5EFA\u7684\u6BCF\u65E5\u7B14\u8BB0\u7684\u5B58\u653E\u4F4D\u7F6E'}},history:{goToPrev:"\u540E\u9000\uFF0C\u53F3\u952E\u67E5\u770B\u6240\u6709\u5386\u53F2\u9879\u76EE",goToNext:"\u524D\u8FDB\uFF0C\u53F3\u952E\u67E5\u770B\u6240\u6709\u5386\u53F2\u9879\u76EE"},keybindings:{title:"\u5FEB\u6377\u952E",description:"\u6240\u6709\u53EF\u7528\u7684\u5FEB\u6377\u952E\u5217\u8868",close:"\u5173\u95ED",groups:{normal:"\u5E38\u7528\u64CD\u4F5C",inCodeBlock:"\u4EE3\u7801\u5757\u5185\u7279\u6709"},commands:{swapUp:"\u4E0A\u79FB",swapDown:"\u4E0B\u79FB",expand:"\u5C55\u5F00",collapse:"\u6298\u53E0",indent:"\u589E\u52A0\u7F29\u8FDB",outdent:"\u51CF\u5C11\u7F29\u8FDB",insertInlineMath:"\u63D2\u5165\u884C\u5185\u6570\u5B66\u516C\u5F0F",insertBlockMath:"\u63D2\u5165\u5757\u7EA7\u6570\u5B66\u516C\u5F0F",bold:"\u52A0\u7C97",italic:"\u659C\u4F53",code:"\u4EE3\u7801",highlight:"\u9AD8\u4EAE",insertBlockRef:"\u63D2\u5165\u5757\u5F15\u7528",insertTag:"\u63D2\u5165\u6807\u7B7E",toCodeblock:"\u8F6C\u6362\u4E3A\u4EE3\u7801\u5757",undo:"\u64A4\u9500",redo:"\u91CD\u505A",softBreak:"\u8F6F\u6362\u884C",openFusionCommand:"\u6253\u5F00\u591A\u529F\u80FD\u9762\u677F",openAndFocusToSidePane:"\u6253\u5F00\u4FA7\u8FB9\u680F\u5E76\u805A\u7126 / \u5173\u95ED\u4FA7\u8FB9\u680F",moveSidePane:"\u79FB\u52A8\u4FA7\u8FB9\u680F\uFF08\u5230\u53F3\u4FA7 / \u4E0B\u65B9\uFF09",addToFavorite:"\u6DFB\u52A0\u5230\u6536\u85CF",addToSidePane:"\u6DFB\u52A0\u5230\u4FA7\u8FB9\u680F"}}},adminDashboard:{title:"\u7BA1\u7406\u5458\u9762\u677F",logout:"\u767B\u51FA",tabs:{kbManagement:"\u77E5\u8BC6\u5E93\u7BA1\u7406",logsAndAnalytics:"\u65E5\u5FD7\u548C\u5206\u6790"},kbManagement:{allKbs:"\u6240\u6709\u77E5\u8BC6\u5E93",allKbsDescription:"\u4F60\u53EF\u4EE5\u5728\u8FD9\u91CC\u521B\u5EFA\u65B0\u77E5\u8BC6\u5E93\uFF0C\u5220\u9664\u77E5\u8BC6\u5E93\uFF0C\u6216\u4FEE\u6539\u5DF2\u6709\u77E5\u8BC6\u5E93\u7684\u4FE1\u606F",noKbs:"\u{1F914} \u6CA1\u6709\u77E5\u8BC6\u5E93",noKbsDescription:'\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684"\u521B\u5EFA\u65B0\u77E5\u8BC6\u5E93"\u6309\u94AE\u6765\u521B\u5EFA\u4F60\u7684\u7B2C\u4E00\u4E2A\u77E5\u8BC6\u5E93',kbActions:{edit:"\u7F16\u8F91",delete:"\u5220\u9664",addKb:"\u521B\u5EFA\u65B0\u77E5\u8BC6\u5E93",refreshKbList:"\u5237\u65B0\u77E5\u8BC6\u5E93\u5217\u8868"},newKbDialog:{title:"\u521B\u5EFA\u65B0\u77E5\u8BC6\u5E93",description:"\u8BF7\u586B\u5199\u4EE5\u4E0B\u4FE1\u606F\u6765\u521B\u5EFA\u65B0\u7684\u77E5\u8BC6\u5E93",nameLabel:"\u540D\u79F0",namePlaceholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u540D\u79F0",locationLabel:"\u4F4D\u7F6E",locationPlaceholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u4F4D\u7F6E",passwordLabel:"\u5BC6\u7801",passwordPlaceholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u5BC6\u7801",createBtn:{idle:"\u521B\u5EFA",creating:"\u521B\u5EFA\u4E2D...",createSuccess:"\u521B\u5EFA\u6210\u529F",createFailed:"\u521B\u5EFA\u5931\u8D25"},cancelBtn:"\u53D6\u6D88"},deleteKbDialog:{title:"\u5220\u9664\u77E5\u8BC6\u5E93",description:'\u4F60\u786E\u5B9A\u8981\u5220\u9664\u77E5\u8BC6\u5E93 "{name}" \u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\u3002',cancelBtn:"\u53D6\u6D88",status:{idle:"\u5220\u9664",deleting:"\u6B63\u5728\u5220\u9664...",deleteSuccess:"\u5220\u9664\u6210\u529F",deleteFailed:"\u5220\u9664\u5931\u8D25"}}}}},en_US:{languages:{label:"Languages",en_US:"English",zh_CN:"Simplified Chinese",zh_HK:"Traditional Chinese (Hong Kong)",zh_TW:"Traditional Chinese (Taiwan)",ja_JP:"Japanese",fr_FR:"French"},login:{kbEditorLogin:{title:"Open Knowledge Base",serverUrlLabel:"Server URL",serverUrlPlaceholder:"Enter server URL, e.g. http://43.134.1.60/:8081",noKbServerMsg:'No knowledge base on this server. You can <a class="cursor-pointer">login as admin</a> and create a new knowledge base in the dashboard.',kbLocationLabel:"Knowledge Base",refreshKbListTooltip:"Refresh Knowledge Base List",passwordLabel:"Password",adminLoginBtn:"Admin Login",serverStatus:{invalidURL:"Invalid URL format",connFailed:"Connection failed",connecting:"Connecting",connSuccess:"Connected",noKbServer:"No knowledge base server",loginFailed:"Login failed"},loginStatus:{idle:"Idle",loggingIn:"Logging in",loginSuccess:"Login successful",loginFailed_InvalidPassword:"Invalid password",loginFailed_Unknown:"Unknown error, please contact server admin"},loginBtn:{idle:"Login",loggingIn:"Logging in...",loginSuccess:"Login successful",loginFailed_InvalidPassword:"Login",loginFailed_Unknown:"Login"}},adminLogin:{title:"Admin Login",serverUrlLabel:"Server URL",serverUrlPlaceholder:"Enter server URL, e.g. http://43.134.1.60/:8081",passwordLabel:"Password",kbEditorLoginBtn:"KB Editor Login",loginBtn:{idle:"Login",loggingIn:"Logging in...",loginSuccess:"Login successful",invalidServerUrl:"Login failed",invalidPassword:"Login failed",maxAttempts:"Login failed",cannotConnectToServer:"Login failed"},errMsg:{invalidServerUrl:"Invalid URL format",invalidPassword:"Invalid password",maxAttempts:"Maximum attempts reached, please try again later",cannotConnectToServer:"Cannot connect to server"}}},kbView:{loadingKb:"Loading knowledge base...",backlinksPanel:{nBacklinks:"{count} backlinks",nPotentialLinks:"{count} potential links"},keybindingInput:{empty:"Click to set shortcut"},codeblock:{unknownLanguage:"Unknown Language",copyCode:"Copy Code",copySuccess:"Code in code block has been copied to clipboard"},imageEditor:{title:"Image Editor",description:"Support image cropping, rotation, and automatic scan file optimization",cancel:"Cancel",save:"Apply Changes",saveAs:"Save As",deleteOriginal:"Delete original image?"},fusionCommand:{noResults:"No results found",noCommandResults:"No commands found",allowedBlockTypes:"Allowed block types",searchPlaceholder:"Search knowledge base",searchHelp:"\u2191\u2193 and Home, End to select results, \u21B5 to jump to selection, \u2318+\u21B5 to insert block reference, esc to close search panel",commandHelp:"Type / to search commands, \u2191\u2193 and Home, End to select command then \u21B5 to execute, esc to close command panel"},blockMover:{moveSuccess:"Successfully moved {count} blocks",focusMovedBlock:"Focus moved block",inputPlaceholder:"Move to..."},refSuggestions:{noSuggestions:"No results",createNewUnder1:"Create new block under",createNewUnder2:""},pomodoro:{startWorking:"Let's get started!",startResting:"Take a break",stop:"Stop",working:"Working...",resting:"Resting..."},settingsPanel:{title:"Settings",invalidJson:"Invalid JSON",reset:"Reset to defaults",noResult:"No matching blocks found",invalidBlockId:"Invalid block ID"},syncStatus:{synced:"All changes synced",syncing:"Syncing",disconnected:"Sync failed"},sidePane:{remove:"Remove from sidebar",prev:"Focus previous item",next:"Focus next item",collapse:"Collapse sidebar",moveToRight:"Move sidebar to right",moveToBottom:"Move sidebar to bottom",setFilter:"Set filter",setSort:"Set sort",empty:"\u{1F914} Sidebar is empty",searchAndAdd:"Search blocks and add to sidebar",emptyTip:`You can add content by:
  - Selecting "Add to sidebar" in block menu
  - Using shortcut Command/Ctrl + K
  - Clicking "+" button in top right to search and add blocks`},headerBar:{moreOptions:"More Options",dailynoteNavigator:"Daily Notes",pomodoro:"Pomodoro",closeMenu:"Close Menu",openMenu:"Open Menu",back:"Back",forward:"Forward",search:"Search",notifications:"Notifications",switchLightTheme:"Switch to Light Theme",switchDarkTheme:"Switch to Dark Theme",openSidepane:"Open Sidebar",closeSidepane:"Close Sidebar",export:"Export",import:"Import",enterFocusMode:"Enter Focus Mode",exitFocusMode:"Exit Focus Mode",attachmentsManager:"Attachments Manager",settings:"Settings",timeMachine:"Time Machine",help:"Help",exit:"Exit",keybindings:"View & Edit Shortcuts"},command:{deleteBlock:"Delete Block",copyBlockReference:"Copy Block Reference",copyBlockMirror:"Copy Block Mirror",addToFavorite:"Add to Favorites",addToSidepane:"Add to Sidebar",export:"Export",sortDirectChildren:"Sort Direct Children",sortDictAsc:"Dictionary Order Ascending",sortDictDesc:"Dictionary Order Descending",ctimeAsc:"Creation Time Ascending",ctimeDesc:"Creation Time Descending",mtimeAsc:"Modified Time Ascending",mtimeDesc:"Modified Time Descending",archiveDone:"Archive Completed Tasks",moveBlock:"Move Block",moveBlockLeaveRef:"Move Block, Leave Reference",moveBlockLeaveMirror:"Move Block, Leave Mirror",insertMirrorBelow:"Insert Mirror Below",openFieldValuesInspector:"Open Field Values Inspector",setBlockRefColor:"Set Block Reference Color",blue:"Blue",green:"Green",red:"Red",yellow:"Yellow",gray:"Gray",orange:"Orange",purple:"Purple"},backlinks:{openBacklinksPanel:"Open Backlinks Panel"},createNewTreeDialog:{title:"Create New Document",description:`No root block found. This could be because:
1. This is a new document
2. Data is still syncing`,waitingForSync:'Waiting for sync. If you are sure this is a new document, click "Create" to create a new document.',waitBtn:"Wait",createBtn:"Create",creating:"Creating...",done:"Created successfully",failed:"Creation failed"},pasteDialog:{title:"No No",description:"Too big! It will break if you put it in! Try pasting in segments?",cancelBtn:"Got it"},attachmentsManager:{title:"Attachments Manager",upload:"Upload",noFiles:"No files",refreshing:"Refreshing...",refreshed:"Refresh successful",previewPane:{openPreview:"Preview",download:"Download",reference:"Insert Block Reference",pathReference:"Insert Path Reference",insertImage:"Insert Image",fetchingImage:"Loading image...",closePreview:"Close Preview",delete:"Delete",info:"Details"},uploadStatus:{idle:"Idle",uploading:"Uploading...",success:"Upload successful",failed:"Upload failed"},fetchFilesStatus:{idle:"Idle",fetching:"Fetching file list...",success:"File list fetched successfully",failed:"Failed to fetch file list"}},imageContent:{fetchingImage:"Loading image...",addCaption:"Add Image Caption",deleteImage:"Delete Image",blend:"Blend with Background (by Color)",blendLuminosity:"Blend with Background (by Luminosity)",circle:"Crop to Circle",invert:"Invert",invertW:"Invert (White Background)",outline:"Outline",width:"Width",wider:"Wider",narrower:"Narrower",resetWidth:"Reset",download:"Download Image",metadata:"Details",filter:"Filter",clearScannedImage:"Clear Scanned Image Background"},exporter:{title:"Export",description:"Export selected subtree as HTML, PDF, Markdown, Plain Text and other formats",preview:"Preview",copyToClipboard:"Copy to Clipboard",exportToFile:"Export to File",cancel:"Cancel",exportFormat:"Export Format"},fontSelector:{notAvailable:"(Not Installed)",notSpecified:"(Not Specified)"},fieldValuesInspector:{title:"Field Values Inspector",description:"View all field values of this block"},dailynoteNavigator:{noDailyNote:"No daily note for this day, click to create",gotoDailyNote:"Click to go to daily note for this day",dontKnowWhereToCreate:{title:"Don't know where to create daily notes",desc:'You should go to "Settings > Daily Notes > Daily Notes Location" to set where new daily notes should be created'}},history:{goToPrev:"Back, right click to view all history items",goToNext:"Forward, right click to view all history items"},keybindings:{title:"Shortcuts",description:"List of all available shortcuts",close:"Close",groups:{normal:"Common Operations",inCodeBlock:"Code Block Specific"},commands:{swapUp:"Move Up",swapDown:"Move Down",expand:"Expand",collapse:"Collapse",indent:"Increase Indent",outdent:"Decrease Indent",insertInlineMath:"Insert Inline Math",insertBlockMath:"Insert Block Math",bold:"Bold",italic:"Italic",code:"Code",highlight:"Highlight",insertBlockRef:"Insert Block Reference",insertTag:"Insert Tag",toCodeblock:"Convert to Code Block",undo:"Undo",redo:"Redo",softBreak:"Soft Break",openFusionCommand:"Open Multi-function Panel",openAndFocusToSidePane:"Open Sidebar and Focus / Close Sidebar",moveSidePane:"Move Sidebar (to Right / Bottom)",addToFavorite:"Add to Favorites",addToSidePane:"Add to Sidebar"}}},adminDashboard:{title:"Admin Dashboard",logout:"Logout",tabs:{kbManagement:"Knowledge Base Management",logsAndAnalytics:"Logs and Analytics"},kbManagement:{allKbs:"All Knowledge Bases",allKbsDescription:"You can create new knowledge bases, delete knowledge bases, or modify existing knowledge base information here",noKbs:"\u{1F914} No Knowledge Bases",noKbsDescription:'Click the "Create New Knowledge Base" button in the top right to create your first knowledge base',kbActions:{edit:"Edit",delete:"Delete",addKb:"Create New Knowledge Base",refreshKbList:"Refresh Knowledge Base List"},newKbDialog:{title:"Create New Knowledge Base",description:"Please fill in the following information to create a new knowledge base",nameLabel:"Name",namePlaceholder:"Enter knowledge base name",locationLabel:"Location",locationPlaceholder:"Enter knowledge base location",passwordLabel:"Password",passwordPlaceholder:"Enter knowledge base password",createBtn:{idle:"Create",creating:"Creating...",createSuccess:"Creation successful",createFailed:"Creation failed"},cancelBtn:"Cancel"},deleteKbDialog:{title:"Delete Knowledge Base",description:'Are you sure you want to delete knowledge base "{name}"? This action cannot be undone.',cancelBtn:"Cancel",status:{idle:"Delete",deleting:"Deleting...",deleteSuccess:"Deletion successful",deleteFailed:"Deletion failed"}}}}},zh_HK:{languages:{label:"\u8A9E\u8A00",zh_CN:"\u7C21\u9AD4\u4E2D\u6587",zh_HK:"\u7E41\u9AD4\u4E2D\u6587 (\u9999\u6E2F)",zh_TW:"\u7E41\u9AD4\u4E2D\u6587 (\u53F0\u7063)",en_US:"\u82F1\u6587",ja_JP:"\u65E5\u6587",fr_FR:"\u6CD5\u6587"},login:{kbEditorLogin:{title:"\u958B\u555F\u77E5\u8B58\u5EAB",serverUrlLabel:"\u4F3A\u670D\u5668 URL",serverUrlPlaceholder:"\u8F38\u5165\u4F3A\u670D\u5668 URL\uFF0C\u4F8B\u5982 http://43.134.1.60/:8081",noKbServerMsg:'\u6B64\u4F3A\u670D\u5668\u4E0A\u6C92\u6709\u77E5\u8B58\u5EAB\uFF0C\u4F60\u53EF\u4EE5<a class="cursor-pointer">\u4EE5\u7BA1\u7406\u54E1\u8EAB\u4EFD\u767B\u5165</a>\uFF0C\u7136\u5F8C\u5728\u63A7\u5236\u53F0\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB\u3002',kbLocationLabel:"\u77E5\u8B58\u5EAB",refreshKbListTooltip:"\u91CD\u65B0\u6574\u7406\u77E5\u8B58\u5EAB\u6E05\u55AE",passwordLabel:"\u5BC6\u78BC",adminLoginBtn:"\u7BA1\u7406\u54E1\u767B\u5165",serverStatus:{invalidURL:"URL \u683C\u5F0F\u4E0D\u6B63\u78BA",connFailed:"\u9023\u7DDA\u5931\u6557",connecting:"\u9023\u7DDA\u4E2D",connSuccess:"\u9023\u7DDA\u6210\u529F",noKbServer:"\u6C92\u6709\u77E5\u8B58\u5EAB\u4F3A\u670D\u5668",loginFailed:"\u767B\u5165\u5931\u6557"},loginStatus:{idle:"\u9592\u7F6E",loggingIn:"\u767B\u5165\u4E2D",loginSuccess:"\u767B\u5165\u6210\u529F",loginFailed_InvalidPassword:"\u5BC6\u78BC\u932F\u8AA4",loginFailed_Unknown:"\u672A\u77E5\u932F\u8AA4\uFF0C\u8ACB\u806F\u7D61\u4F3A\u670D\u5668\u7BA1\u7406\u54E1"},loginBtn:{idle:"\u767B\u5165",loggingIn:"\u767B\u5165\u4E2D...",loginSuccess:"\u767B\u5165\u6210\u529F",loginFailed_InvalidPassword:"\u767B\u5165",loginFailed_Unknown:"\u767B\u5165"}},adminLogin:{title:"\u7BA1\u7406\u54E1\u767B\u5165",serverUrlLabel:"\u4F3A\u670D\u5668 URL",serverUrlPlaceholder:"\u8F38\u5165\u4F3A\u670D\u5668 URL\uFF0C\u4F8B\u5982 http://43.134.1.60/:8081",passwordLabel:"\u5BC6\u78BC",kbEditorLoginBtn:"\u77E5\u8B58\u5EAB\u7DE8\u8F2F\u8005\u767B\u5165",loginBtn:{idle:"\u767B\u5165",loggingIn:"\u767B\u5165\u4E2D...",loginSuccess:"\u767B\u5165\u6210\u529F",invalidServerUrl:"\u767B\u5165\u5931\u6557",invalidPassword:"\u767B\u5165\u5931\u6557",maxAttempts:"\u767B\u5165\u5931\u6557",cannotConnectToServer:"\u767B\u5165\u5931\u6557"},errMsg:{invalidServerUrl:"URL \u683C\u5F0F\u4E0D\u6B63\u78BA",invalidPassword:"\u5BC6\u78BC\u932F\u8AA4",maxAttempts:"\u9054\u5230\u6700\u5927\u5617\u8A66\u6B21\u6578\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66",cannotConnectToServer:"\u7121\u6CD5\u9023\u7DDA\u5230\u4F3A\u670D\u5668"}}},kbView:{loadingKb:"\u8F09\u5165\u77E5\u8B58\u5EAB\u4E2D...",backlinksPanel:{nBacklinks:"{count} \u500B\u53CD\u5411\u9023\u7D50",nPotentialLinks:"{count} \u500B\u6F5B\u5728\u9023\u7D50"},keybindingInput:{empty:"\u9EDE\u64CA\u8A2D\u7F6E\u5FEB\u6377\u9375"},codeblock:{unknownLanguage:"\u672A\u77E5\u8A9E\u8A00",copyCode:"\u8907\u88FD\u7A0B\u5F0F\u78BC",copySuccess:"\u7A0B\u5F0F\u78BC\u5DF2\u8907\u88FD\u5230\u526A\u8CBC\u7C3F"},imageEditor:{title:"\u5716\u7247\u7DE8\u8F2F\u5668",description:"\u652F\u63F4\u5716\u7247\u88C1\u526A\u3001\u65CB\u8F49\uFF0C\u81EA\u52D5\u6700\u4F73\u5316\u6383\u63CF\u6A94\u6848\u7B49\u529F\u80FD",cancel:"\u53D6\u6D88",save:"\u5957\u7528\u8B8A\u66F4",saveAs:"\u53E6\u5B58\u65B0\u6A94",deleteOriginal:"\u662F\u5426\u522A\u9664\u539F\u5716\uFF1F"},fusionCommand:{noResults:"\u6C92\u6709\u627E\u5230\u76F8\u95DC\u5167\u5BB9",noCommandResults:"\u6C92\u6709\u627E\u5230\u76F8\u95DC\u547D\u4EE4",allowedBlockTypes:"\u5141\u8A31\u7684\u5340\u584A\u985E\u578B",searchPlaceholder:"\u641C\u5C0B\u77E5\u8B58\u5EAB",searchHelp:"\u2191\u2193 \u548C Home, End \u53EF\u9078\u64C7\u641C\u5C0B\u7D50\u679C\uFF0C\u21B5 \u8DF3\u8F49\u5230\u9078\u4E2D\u9805\uFF0C\u2318+\u21B5 \u63D2\u5165\u5340\u584A\u9023\u7D50\uFF0Cesc \u95DC\u9589\u641C\u5C0B\u9762\u677F",commandHelp:"\u8F38\u5165 / \u53EF\u641C\u5C0B\u547D\u4EE4\uFF0C\u2191\u2193 \u548C Home, End \u9078\u64C7\u547D\u4EE4\u7136\u5F8C \u21B5 \u57F7\u884C\u547D\u4EE4\uFF0Cesc \u95DC\u9589\u547D\u4EE4\u9762\u677F"},blockMover:{moveSuccess:"\u79FB\u52D5 {count} \u500B\u5340\u584A\u6210\u529F",focusMovedBlock:"\u805A\u7126\u5230\u79FB\u52D5\u5F8C\u7684\u5340\u584A",inputPlaceholder:"\u79FB\u52D5\u5230..."},refSuggestions:{noSuggestions:"\u6C92\u6709\u7D50\u679C",createNewUnder1:"\u5728",createNewUnder2:"\u4E0B\u5EFA\u7ACB\u65B0\u5340\u584A"},pomodoro:{startWorking:"\u958B\u5DE5\u5427\uFF01",startResting:"\u4F11\u606F\u4E00\u4E0B",stop:"\u505C\u6B62",working:"\u5DE5\u4F5C\u4E2D...",resting:"\u4F11\u606F\u4E2D..."},settingsPanel:{title:"\u8A2D\u5B9A",invalidJson:"\u7121\u6548\u7684 JSON",reset:"\u91CD\u8A2D\u70BA\u9810\u8A2D\u503C",noResult:"\u6C92\u6709\u627E\u5230\u7B26\u5408\u689D\u4EF6\u7684\u5340\u584A",invalidBlockId:"\u7121\u6548\u7684\u5340\u584A ID"},syncStatus:{synced:"\u6240\u6709\u8B8A\u66F4\u5DF2\u540C\u6B65",syncing:"\u540C\u6B65\u4E2D",disconnected:"\u540C\u6B65\u5931\u6557"},sidePane:{remove:"\u5F9E\u5074\u908A\u6B04\u79FB\u9664\u6B64\u9805",prev:"\u805A\u7126\u5230\u4E0A\u4E00\u9805",next:"\u805A\u7126\u5230\u4E0B\u4E00\u9805",collapse:"\u647A\u758A\u5074\u908A\u6B04",moveToRight:"\u79FB\u52D5\u5074\u908A\u6B04\u5230\u53F3\u5074",moveToBottom:"\u79FB\u52D5\u5074\u908A\u6B04\u5230\u4E0B\u65B9",setFilter:"\u8A2D\u5B9A\u904E\u6FFE\u689D\u4EF6",setSort:"\u8A2D\u5B9A\u6392\u5E8F\u689D\u4EF6",empty:"\u{1F914} \u76EE\u524D\u5074\u908A\u6B04\u70BA\u7A7A",searchAndAdd:"\u641C\u5C0B\u5340\u584A\u4E26\u65B0\u589E\u5230\u5074\u908A\u6B04",emptyTip:`\u60A8\u53EF\u4EE5\u900F\u904E\u4EE5\u4E0B\u65B9\u5F0F\u65B0\u589E\u5167\u5BB9\uFF1A
  - \u5728\u5340\u584A\u9078\u55AE\u4E2D\u9078\u64C7"\u65B0\u589E\u5230\u5074\u908A\u6B04"
  - \u4F7F\u7528\u5FEB\u901F\u9375 Command/Ctrl + K
  - \u53F3\u4E0A\u89D2\u9EDE\u64CA "+" \u6309\u9215\u641C\u5C0B\u65B0\u589E\u5340\u584A`},headerBar:{moreOptions:"\u66F4\u591A\u9078\u9805",dailynoteNavigator:"\u6BCF\u65E5\u7B46\u8A18",pomodoro:"\u756A\u8304\u9418",closeMenu:"\u95DC\u9589\u9078\u55AE",openMenu:"\u958B\u555F\u9078\u55AE",back:"\u5F8C\u9000",forward:"\u524D\u9032",search:"\u641C\u5C0B",notifications:"\u901A\u77E5",switchLightTheme:"\u5207\u63DB\u70BA\u660E\u4EAE\u4E3B\u984C",switchDarkTheme:"\u5207\u63DB\u70BA\u9ED1\u6697\u4E3B\u984C",openSidepane:"\u958B\u555F\u5074\u908A\u6B04",closeSidepane:"\u95DC\u9589\u5074\u908A\u6B04",export:"\u532F\u51FA",import:"\u532F\u5165",enterFocusMode:"\u9032\u5165\u5C08\u6CE8\u6A21\u5F0F",exitFocusMode:"\u9000\u51FA\u5C08\u6CE8\u6A21\u5F0F",attachmentsManager:"\u9644\u4EF6\u7BA1\u7406",settings:"\u8A2D\u5B9A",timeMachine:"\u6642\u5149\u6A5F",help:"\u8AAA\u660E\u6587\u4EF6",exit:"\u9000\u51FA",keybindings:"\u6AA2\u8996 & \u7DE8\u8F2F\u5FEB\u901F\u9375"},command:{deleteBlock:"\u522A\u9664\u5340\u584A",copyBlockReference:"\u8907\u88FD\u5340\u584A\u5F15\u7528",copyBlockMirror:"\u8907\u88FD\u5340\u584A\u93E1\u50CF",addToFavorite:"\u65B0\u589E\u5230\u6536\u85CF",addToSidepane:"\u65B0\u589E\u5230\u5074\u908A\u6B04",export:"\u532F\u51FA",sortDirectChildren:"\u6392\u5E8F\u76F4\u63A5\u5B50\u5340\u584A",sortDictAsc:"\u5B57\u5178\u5E8F\u5347\u5E8F",sortDictDesc:"\u5B57\u5178\u5E8F\u964D\u5E8F",ctimeAsc:"\u5EFA\u7ACB\u6642\u9593\u5347\u5E8F",ctimeDesc:"\u5EFA\u7ACB\u6642\u9593\u964D\u5E8F",mtimeAsc:"\u4FEE\u6539\u6642\u9593\u5347\u5E8F",mtimeDesc:"\u4FEE\u6539\u6642\u9593\u964D\u5E8F",archiveDone:"\u5C01\u5B58\u5DF2\u5B8C\u6210\u4EFB\u52D9",moveBlock:"\u79FB\u52D5\u5340\u584A",moveBlockLeaveRef:"\u79FB\u52D5\u5340\u584A\uFF0C\u7559\u4E0B\u5340\u584A\u5F15\u7528",moveBlockLeaveMirror:"\u79FB\u52D5\u5340\u584A\uFF0C\u7559\u4E0B\u5340\u584A\u93E1\u50CF",insertMirrorBelow:"\u4E0B\u65B9\u63D2\u5165\u93E1\u50CF\u5340\u584A",openFieldValuesInspector:"\u958B\u555F\u5C6C\u6027\u6AA2\u8996\u5668",setBlockRefColor:"\u8A2D\u5B9A\u5340\u584A\u5F15\u7528\u984F\u8272",blue:"\u85CD\u8272",green:"\u7DA0\u8272",red:"\u7D05\u8272",yellow:"\u9EC3\u8272",gray:"\u7070\u8272",orange:"\u6A58\u8272",purple:"\u7D2B\u8272"},backlinks:{openBacklinksPanel:"\u958B\u555F\u53CD\u5411\u9023\u7D50\u9762\u677F"},createNewTreeDialog:{title:"\u5EFA\u7ACB\u65B0\u6587\u4EF6",description:`\u6C92\u6709\u627E\u5230\u6839\u5340\u584A\uFF0C\u9019\u53EF\u80FD\u662F\u56E0\u70BA\uFF1A
1. \u9019\u662F\u4E00\u500B\u65B0\u6587\u4EF6
2. \u8CC7\u6599\u9084\u5728\u540C\u6B65\u4E2D`,waitingForSync:'\u6B63\u5728\u7B49\u5F85\u540C\u6B65\uFF0C\u5982\u679C\u78BA\u5B9A\u9019\u662F\u65B0\u6587\u4EF6\uFF0C\u53EF\u4EE5\u9EDE\u64CA"\u5EFA\u7ACB"\u6309\u9215\u5EFA\u7ACB\u65B0\u6587\u4EF6\u3002',waitBtn:"\u7B49\u5F85",createBtn:"\u5EFA\u7ACB",creating:"\u6B63\u5728\u5EFA\u7ACB...",done:"\u5EFA\u7ACB\u6210\u529F",failed:"\u5EFA\u7ACB\u5931\u6557"},pasteDialog:{title:"\u4E0D\u8981\u4E0D\u8981",description:"\u592A\u5927\u5566\uFF01\u653E\u9032\u4F86\u6703\u58DE\u6389\u7684\uFF01\u8981\u4E0D\u8A66\u8A66\u5206\u6BB5\u8CBC\u4E0A\uFF1F",cancelBtn:"\u6211\u77E5\u9053\u4E86"},attachmentsManager:{title:"\u9644\u4EF6\u7BA1\u7406\u5668",upload:"\u4E0A\u50B3",noFiles:"\u6C92\u6709\u6A94\u6848",refreshing:"\u6B63\u5728\u91CD\u65B0\u6574\u7406...",refreshed:"\u91CD\u65B0\u6574\u7406\u6210\u529F",previewPane:{openPreview:"\u9810\u89BD",download:"\u4E0B\u8F09",reference:"\u63D2\u5165\u5340\u584A\u5F15\u7528",pathReference:"\u63D2\u5165\u8DEF\u5F91\u5F15\u7528",insertImage:"\u63D2\u5165\u5716\u7247",fetchingImage:"\u5716\u7247\u8F09\u5165\u4E2D...",closePreview:"\u95DC\u9589\u9810\u89BD",delete:"\u522A\u9664",info:"\u8A73\u7D30\u8CC7\u8A0A"},uploadStatus:{idle:"\u9592\u7F6E",uploading:"\u4E0A\u50B3\u4E2D...",success:"\u4E0A\u50B3\u6210\u529F",failed:"\u4E0A\u50B3\u5931\u6557"},fetchFilesStatus:{idle:"\u9592\u7F6E",fetching:"\u6B63\u5728\u53D6\u5F97\u6A94\u6848\u6E05\u55AE...",success:"\u53D6\u5F97\u6A94\u6848\u6E05\u55AE\u6210\u529F",failed:"\u53D6\u5F97\u6A94\u6848\u6E05\u55AE\u5931\u6557"}},imageContent:{fetchingImage:"\u5716\u7247\u8F09\u5165\u4E2D...",addCaption:"\u65B0\u589E\u5716\u7247\u8AAA\u660E",deleteImage:"\u522A\u9664\u5716\u7247",blend:"\u8207\u80CC\u666F\u6DF7\u5408\uFF08\u6309\u984F\u8272\uFF09",blendLuminosity:"\u8207\u80CC\u666F\u6DF7\u5408\uFF08\u6309\u4EAE\u5EA6\uFF09",circle:"\u88C1\u5207\u70BA\u5713\u5F62",invert:"\u53CD\u76F8",invertW:"\u53CD\u76F8\uFF08\u767D\u5E95\uFF09",outline:"\u63CF\u908A",width:"\u5BEC\u5EA6",wider:"\u66F4\u5BEC",narrower:"\u66F4\u7A84",resetWidth:"\u91CD\u8A2D",download:"\u4E0B\u8F09\u5716\u7247",metadata:"\u8A73\u7D30\u8CC7\u8A0A",filter:"\u6FFE\u93E1",clearScannedImage:"\u6E05\u9664\u6383\u63CF\u5716\u7247\u7684\u80CC\u666F"},exporter:{title:"\u532F\u51FA",description:"\u532F\u51FA\u9078\u4E2D\u5B50\u6A39\u70BA HTML, PDF, Markdown, Plain Text \u7B49\u591A\u7A2E\u683C\u5F0F",preview:"\u9810\u89BD",copyToClipboard:"\u8907\u88FD\u5230\u526A\u8CBC\u7C3F",exportToFile:"\u532F\u51FA\u5230\u6A94\u6848",cancel:"\u53D6\u6D88",exportFormat:"\u532F\u51FA\u683C\u5F0F"},fontSelector:{notAvailable:"(\u672A\u5B89\u88DD)",notSpecified:"(\u672A\u6307\u5B9A)"},fieldValuesInspector:{title:"\u5C6C\u6027\u6AA2\u8996\u5668",description:"\u6AA2\u8996\u9019\u500B\u5340\u584A\u7684\u6240\u6709\u5C6C\u6027\u503C"},dailynoteNavigator:{noDailyNote:"\u9019\u4E00\u5929\u6C92\u6709\u6BCF\u65E5\u7B46\u8A18\uFF0C\u9EDE\u64CA\u4EE5\u5EFA\u7ACB",gotoDailyNote:"\u9EDE\u64CA\u4EE5\u524D\u5F80\u9019\u4E00\u5929\u7684\u6BCF\u65E5\u7B46\u8A18",dontKnowWhereToCreate:{title:"\u4E0D\u77E5\u9053\u5728\u54EA\u88E1\u5EFA\u7ACB\u6BCF\u65E5\u7B46\u8A18",desc:'\u4F60\u61C9\u8A72\u5230 "\u8A2D\u5B9A > \u6BCF\u65E5\u7B46\u8A18 > \u6BCF\u65E5\u7B46\u8A18\u7684\u5B58\u653E\u4F4D\u7F6E" \u8A2D\u5B9A\u65B0\u5EFA\u7ACB\u7684\u6BCF\u65E5\u7B46\u8A18\u7684\u5B58\u653E\u4F4D\u7F6E'}},history:{goToPrev:"\u5F8C\u9000\uFF0C\u53F3\u9375\u6AA2\u8996\u6240\u6709\u6B77\u53F2\u9805\u76EE",goToNext:"\u524D\u9032\uFF0C\u53F3\u9375\u6AA2\u8996\u6240\u6709\u6B77\u53F2\u9805\u76EE"},keybindings:{title:"\u5FEB\u901F\u9375",description:"\u6240\u6709\u53EF\u7528\u7684\u5FEB\u901F\u9375\u6E05\u55AE",close:"\u95DC\u9589",groups:{normal:"\u5E38\u7528\u64CD\u4F5C",inCodeBlock:"\u7A0B\u5F0F\u78BC\u5340\u584A\u5167\u7279\u6709"},commands:{swapUp:"\u4E0A\u79FB",swapDown:"\u4E0B\u79FB",expand:"\u5C55\u958B",collapse:"\u647A\u758A",indent:"\u589E\u52A0\u7E2E\u6392",outdent:"\u6E1B\u5C11\u7E2E\u6392",insertInlineMath:"\u63D2\u5165\u884C\u5167\u6578\u5B78\u516C\u5F0F",insertBlockMath:"\u63D2\u5165\u5340\u584A\u7D1A\u6578\u5B78\u516C\u5F0F",bold:"\u7C97\u9AD4",italic:"\u659C\u9AD4",code:"\u7A0B\u5F0F\u78BC",highlight:"\u6A19\u793A",insertBlockRef:"\u63D2\u5165\u5340\u584A\u5F15\u7528",insertTag:"\u63D2\u5165\u6A19\u7C64",toCodeblock:"\u8F49\u63DB\u70BA\u7A0B\u5F0F\u78BC\u5340\u584A",undo:"\u5FA9\u539F",redo:"\u91CD\u505A",softBreak:"\u8EDF\u63DB\u884C",openFusionCommand:"\u958B\u555F\u591A\u529F\u80FD\u9762\u677F",openAndFocusToSidePane:"\u958B\u555F\u5074\u908A\u6B04\u4E26\u805A\u7126 / \u95DC\u9589\u5074\u908A\u6B04",moveSidePane:"\u79FB\u52D5\u5074\u908A\u6B04\uFF08\u5230\u53F3\u5074 / \u4E0B\u65B9\uFF09",addToFavorite:"\u65B0\u589E\u5230\u6536\u85CF",addToSidePane:"\u65B0\u589E\u5230\u5074\u908A\u6B04"}}},adminDashboard:{title:"\u7BA1\u7406\u54E1\u9762\u677F",logout:"\u767B\u51FA",tabs:{kbManagement:"\u77E5\u8B58\u5EAB\u7BA1\u7406",logsAndAnalytics:"\u65E5\u8A8C\u548C\u5206\u6790"},kbManagement:{allKbs:"\u6240\u6709\u77E5\u8B58\u5EAB",allKbsDescription:"\u4F60\u53EF\u4EE5\u5728\u9019\u88E1\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB\uFF0C\u522A\u9664\u77E5\u8B58\u5EAB\uFF0C\u6216\u4FEE\u6539\u5DF2\u6709\u77E5\u8B58\u5EAB\u7684\u8CC7\u8A0A",noKbs:"\u{1F914} \u6C92\u6709\u77E5\u8B58\u5EAB",noKbsDescription:'\u9EDE\u64CA\u53F3\u4E0A\u89D2\u7684"\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB"\u6309\u9215\u4F86\u5EFA\u7ACB\u4F60\u7684\u7B2C\u4E00\u500B\u77E5\u8B58\u5EAB',kbActions:{edit:"\u7DE8\u8F2F",delete:"\u522A\u9664",addKb:"\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB",refreshKbList:"\u91CD\u65B0\u6574\u7406\u77E5\u8B58\u5EAB\u6E05\u55AE"},newKbDialog:{title:"\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB",description:"\u8ACB\u586B\u5BEB\u4EE5\u4E0B\u8CC7\u8A0A\u4F86\u5EFA\u7ACB\u65B0\u7684\u77E5\u8B58\u5EAB",nameLabel:"\u540D\u7A31",namePlaceholder:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u540D\u7A31",locationLabel:"\u4F4D\u7F6E",locationPlaceholder:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u4F4D\u7F6E",passwordLabel:"\u5BC6\u78BC",passwordPlaceholder:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u5BC6\u78BC",createBtn:{idle:"\u5EFA\u7ACB",creating:"\u5EFA\u7ACB\u4E2D...",createSuccess:"\u5EFA\u7ACB\u6210\u529F",createFailed:"\u5EFA\u7ACB\u5931\u6557"},cancelBtn:"\u53D6\u6D88"},deleteKbDialog:{title:"\u522A\u9664\u77E5\u8B58\u5EAB",description:'\u4F60\u78BA\u5B9A\u8981\u522A\u9664\u77E5\u8B58\u5EAB "{name}" \u55CE\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u5FA9\u539F\u3002',cancelBtn:"\u53D6\u6D88",status:{idle:"\u522A\u9664",deleting:"\u6B63\u5728\u522A\u9664...",deleteSuccess:"\u522A\u9664\u6210\u529F",deleteFailed:"\u522A\u9664\u5931\u6557"}}}}},zh_TW:{languages:{label:"\u8A9E\u8A00",zh_CN:"\u7C21\u9AD4\u4E2D\u6587",zh_HK:"\u7E41\u9AD4\u4E2D\u6587 (\u9999\u6E2F)",zh_TW:"\u7E41\u9AD4\u4E2D\u6587 (\u53F0\u7063)",en_US:"\u82F1\u6587",ja_JP:"\u65E5\u6587",fr_FR:"\u6CD5\u6587"},login:{kbEditorLogin:{title:"\u958B\u555F\u77E5\u8B58\u5EAB",serverUrlLabel:"\u4F3A\u670D\u5668 URL",serverUrlPlaceholder:"\u8F38\u5165\u4F3A\u670D\u5668 URL\uFF0C\u4F8B\u5982 http://43.134.1.60/:8081",noKbServerMsg:'\u6B64\u4F3A\u670D\u5668\u4E0A\u6C92\u6709\u77E5\u8B58\u5EAB\uFF0C\u4F60\u53EF\u4EE5<a class="cursor-pointer">\u4EE5\u7BA1\u7406\u54E1\u8EAB\u5206\u767B\u5165</a>\uFF0C\u7136\u5F8C\u5728\u63A7\u5236\u53F0\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB\u3002',kbLocationLabel:"\u77E5\u8B58\u5EAB",refreshKbListTooltip:"\u91CD\u65B0\u6574\u7406\u77E5\u8B58\u5EAB\u6E05\u55AE",passwordLabel:"\u5BC6\u78BC",adminLoginBtn:"\u7BA1\u7406\u54E1\u767B\u5165",serverStatus:{invalidURL:"URL \u683C\u5F0F\u4E0D\u6B63\u78BA",connFailed:"\u9023\u7DDA\u5931\u6557",connecting:"\u9023\u7DDA\u4E2D",connSuccess:"\u9023\u7DDA\u6210\u529F",noKbServer:"\u6C92\u6709\u77E5\u8B58\u5EAB\u4F3A\u670D\u5668",loginFailed:"\u767B\u5165\u5931\u6557"},loginStatus:{idle:"\u9592\u7F6E",loggingIn:"\u767B\u5165\u4E2D",loginSuccess:"\u767B\u5165\u6210\u529F",loginFailed_InvalidPassword:"\u5BC6\u78BC\u932F\u8AA4",loginFailed_Unknown:"\u672A\u77E5\u932F\u8AA4\uFF0C\u8ACB\u806F\u7D61\u4F3A\u670D\u5668\u7BA1\u7406\u54E1"},loginBtn:{idle:"\u767B\u5165",loggingIn:"\u767B\u5165\u4E2D...",loginSuccess:"\u767B\u5165\u6210\u529F",loginFailed_InvalidPassword:"\u767B\u5165",loginFailed_Unknown:"\u767B\u5165"}},adminLogin:{title:"\u7BA1\u7406\u54E1\u767B\u5165",serverUrlLabel:"\u4F3A\u670D\u5668 URL",serverUrlPlaceholder:"\u8F38\u5165\u4F3A\u670D\u5668 URL\uFF0C\u4F8B\u5982 http://43.134.1.60/:8081",passwordLabel:"\u5BC6\u78BC",kbEditorLoginBtn:"\u77E5\u8B58\u5EAB\u7DE8\u8F2F\u8005\u767B\u5165",loginBtn:{idle:"\u767B\u5165",loggingIn:"\u767B\u5165\u4E2D...",loginSuccess:"\u767B\u5165\u6210\u529F",invalidServerUrl:"\u767B\u5165\u5931\u6557",invalidPassword:"\u767B\u5165\u5931\u6557",maxAttempts:"\u767B\u5165\u5931\u6557",cannotConnectToServer:"\u767B\u5165\u5931\u6557"},errMsg:{invalidServerUrl:"URL \u683C\u5F0F\u4E0D\u6B63\u78BA",invalidPassword:"\u5BC6\u78BC\u932F\u8AA4",maxAttempts:"\u9054\u5230\u6700\u5927\u5617\u8A66\u6B21\u6578\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66",cannotConnectToServer:"\u7121\u6CD5\u9023\u7DDA\u5230\u4F3A\u670D\u5668"}}},kbView:{loadingKb:"\u8F09\u5165\u77E5\u8B58\u5EAB\u4E2D...",backlinksPanel:{nBacklinks:"{count} \u500B\u53CD\u5411\u9023\u7D50",nPotentialLinks:"{count} \u500B\u6F5B\u5728\u9023\u7D50"},keybindingInput:{empty:"\u9EDE\u64CA\u8A2D\u7F6E\u5FEB\u6377\u9375"},codeblock:{unknownLanguage:"\u672A\u77E5\u8A9E\u8A00",copyCode:"\u8907\u88FD\u7A0B\u5F0F\u78BC",copySuccess:"\u7A0B\u5F0F\u78BC\u5DF2\u8907\u88FD\u5230\u526A\u8CBC\u7C3F"},imageEditor:{title:"\u5716\u7247\u7DE8\u8F2F\u5668",description:"\u652F\u63F4\u5716\u7247\u88C1\u526A\u3001\u65CB\u8F49\uFF0C\u81EA\u52D5\u6700\u4F73\u5316\u6383\u63CF\u6A94\u6848\u7B49\u529F\u80FD",cancel:"\u53D6\u6D88",save:"\u5957\u7528\u8B8A\u66F4",saveAs:"\u53E6\u5B58\u65B0\u6A94",deleteOriginal:"\u662F\u5426\u522A\u9664\u539F\u5716\uFF1F"},fusionCommand:{noResults:"\u6C92\u6709\u627E\u5230\u76F8\u95DC\u5167\u5BB9",noCommandResults:"\u6C92\u6709\u627E\u5230\u76F8\u95DC\u547D\u4EE4",allowedBlockTypes:"\u5141\u8A31\u7684\u5340\u584A\u985E\u578B",searchPlaceholder:"\u641C\u5C0B\u77E5\u8B58\u5EAB",searchHelp:"\u2191\u2193 \u548C Home, End \u53EF\u9078\u64C7\u641C\u5C0B\u7D50\u679C\uFF0C\u21B5 \u8DF3\u8F49\u5230\u9078\u4E2D\u9805\uFF0C\u2318+\u21B5 \u63D2\u5165\u5340\u584A\u9023\u7D50\uFF0Cesc \u95DC\u9589\u641C\u5C0B\u9762\u677F",commandHelp:"\u8F38\u5165 / \u53EF\u641C\u5C0B\u547D\u4EE4\uFF0C\u2191\u2193 \u548C Home, End \u9078\u64C7\u547D\u4EE4\u7136\u5F8C \u21B5 \u57F7\u884C\u547D\u4EE4\uFF0Cesc \u95DC\u9589\u547D\u4EE4\u9762\u677F"},blockMover:{moveSuccess:"\u79FB\u52D5 {count} \u500B\u5340\u584A\u6210\u529F",focusMovedBlock:"\u805A\u7126\u5230\u79FB\u52D5\u5F8C\u7684\u5340\u584A",inputPlaceholder:"\u79FB\u52D5\u5230..."},refSuggestions:{noSuggestions:"\u6C92\u6709\u7D50\u679C",createNewUnder1:"\u5728",createNewUnder2:"\u4E0B\u5EFA\u7ACB\u65B0\u5340\u584A"},pomodoro:{startWorking:"\u958B\u5DE5\u5427\uFF01",startResting:"\u4F11\u606F\u4E00\u4E0B",stop:"\u505C\u6B62",working:"\u5DE5\u4F5C\u4E2D...",resting:"\u4F11\u606F\u4E2D..."},settingsPanel:{title:"\u8A2D\u5B9A",invalidJson:"\u7121\u6548\u7684 JSON",reset:"\u91CD\u8A2D\u70BA\u9810\u8A2D\u503C",noResult:"\u6C92\u6709\u627E\u5230\u7B26\u5408\u689D\u4EF6\u7684\u5340\u584A",invalidBlockId:"\u7121\u6548\u7684\u5340\u584A ID"},syncStatus:{synced:"\u6240\u6709\u8B8A\u66F4\u5DF2\u540C\u6B65",syncing:"\u540C\u6B65\u4E2D",disconnected:"\u540C\u6B65\u5931\u6557"},sidePane:{remove:"\u5F9E\u5074\u908A\u6B04\u79FB\u9664\u6B64\u9805",prev:"\u805A\u7126\u5230\u4E0A\u4E00\u9805",next:"\u805A\u7126\u5230\u4E0B\u4E00\u9805",collapse:"\u647A\u758A\u5074\u908A\u6B04",moveToRight:"\u79FB\u52D5\u5074\u908A\u6B04\u5230\u53F3\u5074",moveToBottom:"\u79FB\u52D5\u5074\u908A\u6B04\u5230\u4E0B\u65B9",setFilter:"\u8A2D\u5B9A\u904E\u6FFE\u689D\u4EF6",setSort:"\u8A2D\u5B9A\u6392\u5E8F\u689D\u4EF6",empty:"\u{1F914} \u76EE\u524D\u5074\u908A\u6B04\u70BA\u7A7A",searchAndAdd:"\u641C\u5C0B\u5340\u584A\u4E26\u65B0\u589E\u5230\u5074\u908A\u6B04",emptyTip:`\u60A8\u53EF\u4EE5\u900F\u904E\u4EE5\u4E0B\u65B9\u5F0F\u65B0\u589E\u5167\u5BB9\uFF1A
  - \u5728\u5340\u584A\u9078\u55AE\u4E2D\u9078\u64C7"\u65B0\u589E\u5230\u5074\u908A\u6B04"
  - \u4F7F\u7528\u5FEB\u901F\u9375 Command/Ctrl + K
  - \u53F3\u4E0A\u89D2\u9EDE\u64CA "+" \u6309\u9215\u641C\u5C0B\u65B0\u589E\u5340\u584A`},headerBar:{moreOptions:"\u66F4\u591A\u9078\u9805",dailynoteNavigator:"\u6BCF\u65E5\u7B46\u8A18",pomodoro:"\u756A\u8304\u9418",closeMenu:"\u95DC\u9589\u9078\u55AE",openMenu:"\u958B\u555F\u9078\u55AE",back:"\u5F8C\u9000",forward:"\u524D\u9032",search:"\u641C\u5C0B",notifications:"\u901A\u77E5",switchLightTheme:"\u5207\u63DB\u70BA\u660E\u4EAE\u4E3B\u984C",switchDarkTheme:"\u5207\u63DB\u70BA\u9ED1\u6697\u4E3B\u984C",openSidepane:"\u958B\u555F\u5074\u908A\u6B04",closeSidepane:"\u95DC\u9589\u5074\u908A\u6B04",export:"\u532F\u51FA",import:"\u532F\u5165",enterFocusMode:"\u9032\u5165\u5C08\u6CE8\u6A21\u5F0F",exitFocusMode:"\u9000\u51FA\u5C08\u6CE8\u6A21\u5F0F",attachmentsManager:"\u9644\u4EF6\u7BA1\u7406",settings:"\u8A2D\u5B9A",timeMachine:"\u6642\u5149\u6A5F",help:"\u8AAA\u660E\u6587\u4EF6",exit:"\u9000\u51FA",keybindings:"\u6AA2\u8996 & \u7DE8\u8F2F\u5FEB\u901F\u9375"},command:{deleteBlock:"\u522A\u9664\u5340\u584A",copyBlockReference:"\u8907\u88FD\u5340\u584A\u5F15\u7528",copyBlockMirror:"\u8907\u88FD\u5340\u584A\u93E1\u50CF",addToFavorite:"\u65B0\u589E\u5230\u6536\u85CF",addToSidepane:"\u65B0\u589E\u5230\u5074\u908A\u6B04",export:"\u532F\u51FA",sortDirectChildren:"\u6392\u5E8F\u76F4\u63A5\u5B50\u5340\u584A",sortDictAsc:"\u5B57\u5178\u5E8F\u5347\u5E8F",sortDictDesc:"\u5B57\u5178\u5E8F\u964D\u5E8F",ctimeAsc:"\u5EFA\u7ACB\u6642\u9593\u5347\u5E8F",ctimeDesc:"\u5EFA\u7ACB\u6642\u9593\u964D\u5E8F",mtimeAsc:"\u4FEE\u6539\u6642\u9593\u5347\u5E8F",mtimeDesc:"\u4FEE\u6539\u6642\u9593\u964D\u5E8F",archiveDone:"\u5C01\u5B58\u5DF2\u5B8C\u6210\u4EFB\u52D9",moveBlock:"\u79FB\u52D5\u5340\u584A",moveBlockLeaveRef:"\u79FB\u52D5\u5340\u584A\uFF0C\u7559\u4E0B\u5340\u584A\u5F15\u7528",moveBlockLeaveMirror:"\u79FB\u52D5\u5340\u584A\uFF0C\u7559\u4E0B\u5340\u584A\u93E1\u50CF",insertMirrorBelow:"\u4E0B\u65B9\u63D2\u5165\u93E1\u50CF\u5340\u584A",openFieldValuesInspector:"\u958B\u555F\u5C6C\u6027\u6AA2\u8996\u5668",setBlockRefColor:"\u8A2D\u5B9A\u5340\u584A\u5F15\u7528\u984F\u8272",blue:"\u85CD\u8272",green:"\u7DA0\u8272",red:"\u7D05\u8272",yellow:"\u9EC3\u8272",gray:"\u7070\u8272",orange:"\u6A58\u8272",purple:"\u7D2B\u8272"},backlinks:{openBacklinksPanel:"\u958B\u555F\u53CD\u5411\u9023\u7D50\u9762\u677F"},createNewTreeDialog:{title:"\u5EFA\u7ACB\u65B0\u6587\u4EF6",description:`\u6C92\u6709\u627E\u5230\u6839\u5340\u584A\uFF0C\u9019\u53EF\u80FD\u662F\u56E0\u70BA\uFF1A
1. \u9019\u662F\u4E00\u500B\u65B0\u6587\u4EF6
2. \u8CC7\u6599\u9084\u5728\u540C\u6B65\u4E2D`,waitingForSync:'\u6B63\u5728\u7B49\u5F85\u540C\u6B65\uFF0C\u5982\u679C\u78BA\u5B9A\u9019\u662F\u65B0\u6587\u4EF6\uFF0C\u53EF\u4EE5\u9EDE\u64CA"\u5EFA\u7ACB"\u6309\u9215\u5EFA\u7ACB\u65B0\u6587\u4EF6\u3002',waitBtn:"\u7B49\u5F85",createBtn:"\u5EFA\u7ACB",creating:"\u6B63\u5728\u5EFA\u7ACB...",done:"\u5EFA\u7ACB\u6210\u529F",failed:"\u5EFA\u7ACB\u5931\u6557"},pasteDialog:{title:"\u4E0D\u8981\u4E0D\u8981",description:"\u592A\u5927\u5566\uFF01\u653E\u9032\u4F86\u6703\u58DE\u6389\u7684\uFF01\u8981\u4E0D\u8A66\u8A66\u5206\u6BB5\u8CBC\u4E0A\uFF1F",cancelBtn:"\u6211\u77E5\u9053\u4E86"},attachmentsManager:{title:"\u9644\u4EF6\u7BA1\u7406\u5668",upload:"\u4E0A\u50B3",noFiles:"\u6C92\u6709\u6A94\u6848",refreshing:"\u6B63\u5728\u91CD\u65B0\u6574\u7406...",refreshed:"\u91CD\u65B0\u6574\u7406\u6210\u529F",previewPane:{openPreview:"\u9810\u89BD",download:"\u4E0B\u8F09",reference:"\u63D2\u5165\u5340\u584A\u5F15\u7528",pathReference:"\u63D2\u5165\u8DEF\u5F91\u5F15\u7528",insertImage:"\u63D2\u5165\u5716\u7247",fetchingImage:"\u5716\u7247\u8F09\u5165\u4E2D...",closePreview:"\u95DC\u9589\u9810\u89BD",delete:"\u522A\u9664",info:"\u8A73\u7D30\u8CC7\u8A0A"},uploadStatus:{idle:"\u9592\u7F6E",uploading:"\u4E0A\u50B3\u4E2D...",success:"\u4E0A\u50B3\u6210\u529F",failed:"\u4E0A\u50B3\u5931\u6557"},fetchFilesStatus:{idle:"\u9592\u7F6E",fetching:"\u6B63\u5728\u53D6\u5F97\u6A94\u6848\u6E05\u55AE...",success:"\u53D6\u5F97\u6A94\u6848\u6E05\u55AE\u6210\u529F",failed:"\u53D6\u5F97\u6A94\u6848\u6E05\u55AE\u5931\u6557"}},imageContent:{fetchingImage:"\u5716\u7247\u8F09\u5165\u4E2D...",addCaption:"\u65B0\u589E\u5716\u7247\u8AAA\u660E",deleteImage:"\u522A\u9664\u5716\u7247",blend:"\u8207\u80CC\u666F\u6DF7\u5408\uFF08\u6309\u984F\u8272\uFF09",blendLuminosity:"\u8207\u80CC\u666F\u6DF7\u5408\uFF08\u6309\u4EAE\u5EA6\uFF09",circle:"\u88C1\u5207\u70BA\u5713\u5F62",invert:"\u53CD\u76F8",invertW:"\u53CD\u76F8\uFF08\u767D\u5E95\uFF09",outline:"\u63CF\u908A",width:"\u5BEC\u5EA6",wider:"\u66F4\u5BEC",narrower:"\u66F4\u7A84",resetWidth:"\u91CD\u8A2D",download:"\u4E0B\u8F09\u5716\u7247",metadata:"\u8A73\u7D30\u8CC7\u8A0A",filter:"\u6FFE\u93E1",clearScannedImage:"\u6E05\u9664\u6383\u63CF\u5716\u7247\u7684\u80CC\u666F"},exporter:{title:"\u532F\u51FA",description:"\u532F\u51FA\u9078\u4E2D\u5B50\u6A39\u70BA HTML, PDF, Markdown, Plain Text \u7B49\u591A\u7A2E\u683C\u5F0F",preview:"\u9810\u89BD",copyToClipboard:"\u8907\u88FD\u5230\u526A\u8CBC\u7C3F",exportToFile:"\u532F\u51FA\u5230\u6A94\u6848",cancel:"\u53D6\u6D88",exportFormat:"\u532F\u51FA\u683C\u5F0F"},fontSelector:{notAvailable:"(\u672A\u5B89\u88DD)",notSpecified:"(\u672A\u6307\u5B9A)"},fieldValuesInspector:{title:"\u5C6C\u6027\u6AA2\u8996\u5668",description:"\u6AA2\u8996\u9019\u500B\u5340\u584A\u7684\u6240\u6709\u5C6C\u6027\u503C"},dailynoteNavigator:{noDailyNote:"\u9019\u4E00\u5929\u6C92\u6709\u6BCF\u65E5\u7B46\u8A18\uFF0C\u9EDE\u64CA\u4EE5\u5EFA\u7ACB",gotoDailyNote:"\u9EDE\u64CA\u4EE5\u524D\u5F80\u9019\u4E00\u5929\u7684\u6BCF\u65E5\u7B46\u8A18",dontKnowWhereToCreate:{title:"\u4E0D\u77E5\u9053\u5728\u54EA\u88E1\u5EFA\u7ACB\u6BCF\u65E5\u7B46\u8A18",desc:'\u4F60\u61C9\u8A72\u5230 "\u8A2D\u5B9A > \u6BCF\u65E5\u7B46\u8A18 > \u6BCF\u65E5\u7B46\u8A18\u7684\u5B58\u653E\u4F4D\u7F6E" \u8A2D\u5B9A\u65B0\u5EFA\u7ACB\u7684\u6BCF\u65E5\u7B46\u8A18\u7684\u5B58\u653E\u4F4D\u7F6E'}},history:{goToPrev:"\u5F8C\u9000\uFF0C\u53F3\u9375\u6AA2\u8996\u6240\u6709\u6B77\u53F2\u9805\u76EE",goToNext:"\u524D\u9032\uFF0C\u53F3\u9375\u6AA2\u8996\u6240\u6709\u6B77\u53F2\u9805\u76EE"},keybindings:{title:"\u5FEB\u901F\u9375",description:"\u6240\u6709\u53EF\u7528\u7684\u5FEB\u901F\u9375\u6E05\u55AE",close:"\u95DC\u9589",groups:{normal:"\u5E38\u7528\u64CD\u4F5C",inCodeBlock:"\u7A0B\u5F0F\u78BC\u5340\u584A\u5167\u7279\u6709"},commands:{swapUp:"\u4E0A\u79FB",swapDown:"\u4E0B\u79FB",expand:"\u5C55\u958B",collapse:"\u647A\u758A",indent:"\u589E\u52A0\u7E2E\u6392",outdent:"\u6E1B\u5C11\u7E2E\u6392",insertInlineMath:"\u63D2\u5165\u884C\u5167\u6578\u5B78\u516C\u5F0F",insertBlockMath:"\u63D2\u5165\u5340\u584A\u7D1A\u6578\u5B78\u516C\u5F0F",bold:"\u7C97\u9AD4",italic:"\u659C\u9AD4",code:"\u7A0B\u5F0F\u78BC",highlight:"\u6A19\u793A",insertBlockRef:"\u63D2\u5165\u5340\u584A\u5F15\u7528",insertTag:"\u63D2\u5165\u6A19\u7C64",toCodeblock:"\u8F49\u63DB\u70BA\u7A0B\u5F0F\u78BC\u5340\u584A",undo:"\u5FA9\u539F",redo:"\u91CD\u505A",softBreak:"\u8EDF\u63DB\u884C",openFusionCommand:"\u958B\u555F\u591A\u529F\u80FD\u9762\u677F",openAndFocusToSidePane:"\u958B\u555F\u5074\u908A\u6B04\u4E26\u805A\u7126 / \u95DC\u9589\u5074\u908A\u6B04",moveSidePane:"\u79FB\u52D5\u5074\u908A\u6B04\uFF08\u5230\u53F3\u5074 / \u4E0B\u65B9\uFF09",addToFavorite:"\u65B0\u589E\u5230\u6536\u85CF",addToSidePane:"\u65B0\u589E\u5230\u5074\u908A\u6B04"}}},adminDashboard:{title:"\u7BA1\u7406\u54E1\u9762\u677F",logout:"\u767B\u51FA",tabs:{kbManagement:"\u77E5\u8B58\u5EAB\u7BA1\u7406",logsAndAnalytics:"\u65E5\u8A8C\u548C\u5206\u6790"},kbManagement:{allKbs:"\u6240\u6709\u77E5\u8B58\u5EAB",allKbsDescription:"\u4F60\u53EF\u4EE5\u5728\u9019\u88E1\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB\uFF0C\u522A\u9664\u77E5\u8B58\u5EAB\uFF0C\u6216\u4FEE\u6539\u5DF2\u6709\u77E5\u8B58\u5EAB\u7684\u8CC7\u8A0A",noKbs:"\u{1F914} \u6C92\u6709\u77E5\u8B58\u5EAB",noKbsDescription:'\u9EDE\u64CA\u53F3\u4E0A\u89D2\u7684"\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB"\u6309\u9215\u4F86\u5EFA\u7ACB\u4F60\u7684\u7B2C\u4E00\u500B\u77E5\u8B58\u5EAB',kbActions:{edit:"\u7DE8\u8F2F",delete:"\u522A\u9664",addKb:"\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB",refreshKbList:"\u91CD\u65B0\u6574\u7406\u77E5\u8B58\u5EAB\u6E05\u55AE"},newKbDialog:{title:"\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB",description:"\u8ACB\u586B\u5BEB\u4EE5\u4E0B\u8CC7\u8A0A\u4F86\u5EFA\u7ACB\u65B0\u7684\u77E5\u8B58\u5EAB",nameLabel:"\u540D\u7A31",namePlaceholder:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u540D\u7A31",locationLabel:"\u4F4D\u7F6E",locationPlaceholder:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u4F4D\u7F6E",passwordLabel:"\u5BC6\u78BC",passwordPlaceholder:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u5BC6\u78BC",createBtn:{idle:"\u5EFA\u7ACB",creating:"\u5EFA\u7ACB\u4E2D...",createSuccess:"\u5EFA\u7ACB\u6210\u529F",createFailed:"\u5EFA\u7ACB\u5931\u6557"},cancelBtn:"\u53D6\u6D88"},deleteKbDialog:{title:"\u522A\u9664\u77E5\u8B58\u5EAB",description:'\u4F60\u78BA\u5B9A\u8981\u522A\u9664\u77E5\u8B58\u5EAB "{name}" \u55CE\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u5FA9\u539F\u3002',cancelBtn:"\u53D6\u6D88",status:{idle:"\u522A\u9664",deleting:"\u6B63\u5728\u522A\u9664...",deleteSuccess:"\u522A\u9664\u6210\u529F",deleteFailed:"\u522A\u9664\u5931\u6557"}}}}},fr_FR:{languages:{label:"Langues",zh_CN:"Chinois simplifi\xE9",zh_HK:"Chinois traditionnel (Hong Kong)",zh_TW:"Chinois traditionnel (Taiwan)",en_US:"Anglais",ja_JP:"Japonais",fr_FR:"Fran\xE7ais"},login:{kbEditorLogin:{title:"Ouvrir la base de connaissances",serverUrlLabel:"URL du serveur",serverUrlPlaceholder:"Entrez l'URL du serveur, ex: http://43.134.1.60/:8081",noKbServerMsg:`Aucune base de connaissances sur ce serveur. Vous pouvez <a class="cursor-pointer">vous connecter en tant qu'administrateur</a> et cr\xE9er une nouvelle base de connaissances dans le tableau de bord.`,kbLocationLabel:"Base de connaissances",refreshKbListTooltip:"Actualiser la liste des bases de connaissances",passwordLabel:"Mot de passe",adminLoginBtn:"Connexion administrateur",serverStatus:{invalidURL:"Format d'URL invalide",connFailed:"\xC9chec de la connexion",connecting:"Connexion en cours",connSuccess:"Connect\xE9",noKbServer:"Aucun serveur de base de connaissances",loginFailed:"\xC9chec de la connexion"},loginStatus:{idle:"En attente",loggingIn:"Connexion en cours",loginSuccess:"Connexion r\xE9ussie",loginFailed_InvalidPassword:"Mot de passe incorrect",loginFailed_Unknown:"Erreur inconnue, veuillez contacter l'administrateur du serveur"},loginBtn:{idle:"Se connecter",loggingIn:"Connexion...",loginSuccess:"Connexion r\xE9ussie",loginFailed_InvalidPassword:"Se connecter",loginFailed_Unknown:"Se connecter"}},adminLogin:{title:"Connexion administrateur",serverUrlLabel:"URL du serveur",serverUrlPlaceholder:"Entrez l'URL du serveur, ex: http://43.134.1.60/:8081",passwordLabel:"Mot de passe",kbEditorLoginBtn:"Connexion \xE9diteur",loginBtn:{idle:"Se connecter",loggingIn:"Connexion...",loginSuccess:"Connexion r\xE9ussie",invalidServerUrl:"\xC9chec de la connexion",invalidPassword:"\xC9chec de la connexion",maxAttempts:"\xC9chec de la connexion",cannotConnectToServer:"\xC9chec de la connexion"},errMsg:{invalidServerUrl:"Format d'URL invalide",invalidPassword:"Mot de passe incorrect",maxAttempts:"Nombre maximal de tentatives atteint, veuillez r\xE9essayer plus tard",cannotConnectToServer:"Impossible de se connecter au serveur"}}},kbView:{loadingKb:"Chargement de la base de connaissances...",backlinksPanel:{nBacklinks:"{count} r\xE9troliens",nPotentialLinks:"{count} liens potentiels"},keybindingInput:{empty:"Cliquez pour d\xE9finir le raccourci"},codeblock:{unknownLanguage:"Langue inconnue",copyCode:"Copier le code",copySuccess:"Le code dans le bloc de code a \xE9t\xE9 copi\xE9 dans le presse-papiers"},imageEditor:{title:"\xC9diteur d'images",description:"Prend en charge le recadrage d'images, la rotation et l'optimisation automatique des fichiers num\xE9ris\xE9s",cancel:"Annuler",save:"Appliquer les modifications",saveAs:"Enregistrer sous",deleteOriginal:"Supprimer l'image originale ?"},fusionCommand:{noResults:"Aucun r\xE9sultat trouv\xE9",noCommandResults:"Aucune commande trouv\xE9e",allowedBlockTypes:"Types de blocs autoris\xE9s",searchPlaceholder:"Rechercher dans la base de connaissances",searchHelp:"\u2191\u2193 et Home, End pour s\xE9lectionner les r\xE9sultats, \u21B5 pour aller \xE0 la s\xE9lection, \u2318+\u21B5 pour ins\xE9rer une r\xE9f\xE9rence de bloc, esc pour fermer le panneau de recherche",commandHelp:"Tapez / pour rechercher des commandes, \u2191\u2193 et Home, End pour s\xE9lectionner une commande puis \u21B5 pour ex\xE9cuter, esc pour fermer le panneau de commandes"},blockMover:{moveSuccess:"{count} blocs d\xE9plac\xE9s avec succ\xE8s",focusMovedBlock:"Focaliser sur le bloc d\xE9plac\xE9",inputPlaceholder:"D\xE9placer vers..."},refSuggestions:{noSuggestions:"Aucun r\xE9sultat",createNewUnder1:"Cr\xE9er un nouveau bloc sous",createNewUnder2:""},pomodoro:{startWorking:"Commen\xE7ons !",startResting:"Faites une pause",stop:"Arr\xEAter",working:"Travail en cours...",resting:"Pause en cours..."},settingsPanel:{title:"Param\xE8tres",invalidJson:"JSON invalide",reset:"R\xE9initialiser aux valeurs par d\xE9faut",noResult:"Aucun bloc correspondant trouv\xE9",invalidBlockId:"ID de bloc invalide"},syncStatus:{synced:"Toutes les modifications sont synchronis\xE9es",syncing:"Synchronisation en cours",disconnected:"\xC9chec de la synchronisation"},sidePane:{remove:"Retirer de la barre lat\xE9rale",prev:"\xC9l\xE9ment pr\xE9c\xE9dent",next:"\xC9l\xE9ment suivant",collapse:"R\xE9duire la barre lat\xE9rale",moveToRight:"D\xE9placer la barre lat\xE9rale \xE0 droite",moveToBottom:"D\xE9placer la barre lat\xE9rale en bas",setFilter:"D\xE9finir le filtre",setSort:"D\xE9finir le tri",empty:"\u{1F914} La barre lat\xE9rale est vide",searchAndAdd:"Rechercher des blocs et ajouter \xE0 la barre lat\xE9rale",emptyTip:`Vous pouvez ajouter du contenu en :
  - S\xE9lectionnant "Ajouter \xE0 la barre lat\xE9rale" dans le menu du bloc
  - Utilisant le raccourci Command/Ctrl + K
  - Cliquant sur le bouton "+" en haut \xE0 droite pour rechercher et ajouter des blocs`},headerBar:{moreOptions:"Plus d'options",dailynoteNavigator:"Notes quotidiennes",pomodoro:"Pomodoro",closeMenu:"Fermer le menu",openMenu:"Ouvrir le menu",back:"Retour",forward:"Avancer",search:"Rechercher",notifications:"Notifications",switchLightTheme:"Passer au th\xE8me clair",switchDarkTheme:"Passer au th\xE8me sombre",openSidepane:"Ouvrir la barre lat\xE9rale",closeSidepane:"Fermer la barre lat\xE9rale",export:"Exporter",import:"Importer",enterFocusMode:"Entrer en mode focus",exitFocusMode:"Quitter le mode focus",attachmentsManager:"Gestionnaire de pi\xE8ces jointes",settings:"Param\xE8tres",timeMachine:"Machine \xE0 remonter le temps",help:"Aide",exit:"Quitter",keybindings:"Voir & Modifier les raccourcis"},command:{deleteBlock:"Supprimer le bloc",copyBlockReference:"Copier la r\xE9f\xE9rence du bloc",copyBlockMirror:"Copier le miroir du bloc",addToFavorite:"Ajouter aux favoris",addToSidepane:"Ajouter \xE0 la barre lat\xE9rale",export:"Exporter",sortDirectChildren:"Trier les enfants directs",sortDictAsc:"Tri alphab\xE9tique croissant",sortDictDesc:"Tri alphab\xE9tique d\xE9croissant",ctimeAsc:"Date de cr\xE9ation croissante",ctimeDesc:"Date de cr\xE9ation d\xE9croissante",mtimeAsc:"Date de modification croissante",mtimeDesc:"Date de modification d\xE9croissante",archiveDone:"Archiver les t\xE2ches termin\xE9es",moveBlock:"D\xE9placer le bloc",moveBlockLeaveRef:"D\xE9placer le bloc, laisser une r\xE9f\xE9rence",moveBlockLeaveMirror:"D\xE9placer le bloc, laisser un miroir",insertMirrorBelow:"Ins\xE9rer un miroir en dessous",openFieldValuesInspector:"Ouvrir l'inspecteur de valeurs",setBlockRefColor:"D\xE9finir la couleur de la r\xE9f\xE9rence",blue:"Bleu",green:"Vert",red:"Rouge",yellow:"Jaune",gray:"Gris",orange:"Orange",purple:"Violet"},backlinks:{openBacklinksPanel:"Ouvrir le panneau des r\xE9troliens"},createNewTreeDialog:{title:"Cr\xE9er un nouveau document",description:`Aucun bloc racine trouv\xE9. Cela peut \xEAtre d\xFB \xE0 :
1. C'est un nouveau document
2. Les donn\xE9es sont encore en cours de synchronisation`,waitingForSync:`En attente de synchronisation. Si vous \xEAtes s\xFBr que c'est un nouveau document, cliquez sur "Cr\xE9er" pour cr\xE9er un nouveau document.`,waitBtn:"Attendre",createBtn:"Cr\xE9er",creating:"Cr\xE9ation en cours...",done:"Cr\xE9ation r\xE9ussie",failed:"\xC9chec de la cr\xE9ation"},pasteDialog:{title:"Non Non",description:"Trop grand ! \xC7a va casser si vous le mettez dedans ! Essayez de coller par morceaux ?",cancelBtn:"J'ai compris"},attachmentsManager:{title:"Gestionnaire de pi\xE8ces jointes",upload:"T\xE9l\xE9verser",noFiles:"Aucun fichier",refreshing:"Actualisation en cours...",refreshed:"Actualisation r\xE9ussie",previewPane:{openPreview:"Aper\xE7u",download:"T\xE9l\xE9charger",reference:"Ins\xE9rer une r\xE9f\xE9rence de bloc",pathReference:"Ins\xE9rer une r\xE9f\xE9rence de chemin",insertImage:"Ins\xE9rer une image",fetchingImage:"Chargement de l'image...",closePreview:"Fermer l'aper\xE7u",delete:"Supprimer",info:"D\xE9tails"},uploadStatus:{idle:"En attente",uploading:"T\xE9l\xE9versement en cours...",success:"T\xE9l\xE9versement r\xE9ussi",failed:"\xC9chec du t\xE9l\xE9versement"},fetchFilesStatus:{idle:"En attente",fetching:"R\xE9cup\xE9ration de la liste des fichiers...",success:"Liste des fichiers r\xE9cup\xE9r\xE9e avec succ\xE8s",failed:"\xC9chec de la r\xE9cup\xE9ration de la liste des fichiers"}},imageContent:{fetchingImage:"Chargement de l'image...",addCaption:"Ajouter une l\xE9gende",deleteImage:"Supprimer l'image",blend:"Fusionner avec l'arri\xE8re-plan (par couleur)",blendLuminosity:"Fusionner avec l'arri\xE8re-plan (par luminosit\xE9)",circle:"Recadrer en cercle",invert:"Inverser",invertW:"Inverser (fond blanc)",outline:"Contour",width:"Largeur",wider:"Plus large",narrower:"Plus \xE9troit",resetWidth:"R\xE9initialiser",download:"T\xE9l\xE9charger l'image",metadata:"D\xE9tails",filter:"Filtre",clearScannedImage:"Nettoyer l'arri\xE8re-plan de l'image num\xE9ris\xE9e"},exporter:{title:"Exporter",description:"Exporter le sous-arbre s\xE9lectionn\xE9 en HTML, PDF, Markdown, Texte brut et autres formats",preview:"Aper\xE7u",copyToClipboard:"Copier dans le presse-papiers",exportToFile:"Exporter vers un fichier",cancel:"Annuler",exportFormat:"Format d'exportation"},fontSelector:{notAvailable:"(Non install\xE9)",notSpecified:"(Non sp\xE9cifi\xE9)"},fieldValuesInspector:{title:"Inspecteur de valeurs",description:"Voir toutes les valeurs de champ de ce bloc"},dailynoteNavigator:{noDailyNote:"Pas de note quotidienne pour ce jour, cliquez pour en cr\xE9er une",gotoDailyNote:"Cliquez pour aller \xE0 la note quotidienne de ce jour",dontKnowWhereToCreate:{title:"Ne sait pas o\xF9 cr\xE9er les notes quotidiennes",desc:'Vous devriez aller dans "Param\xE8tres > Notes quotidiennes > Emplacement des notes quotidiennes" pour d\xE9finir o\xF9 les nouvelles notes quotidiennes doivent \xEAtre cr\xE9\xE9es'}},history:{goToPrev:"Retour, clic droit pour voir tous les \xE9l\xE9ments d'historique",goToNext:"Avancer, clic droit pour voir tous les \xE9l\xE9ments d'historique"},keybindings:{title:"Raccourcis",description:"Liste de tous les raccourcis disponibles",close:"Fermer",groups:{normal:"Op\xE9rations courantes",inCodeBlock:"Sp\xE9cifique aux blocs de code"},commands:{swapUp:"D\xE9placer vers le haut",swapDown:"D\xE9placer vers le bas",expand:"D\xE9velopper",collapse:"R\xE9duire",indent:"Augmenter l'indentation",outdent:"Diminuer l'indentation",insertInlineMath:"Ins\xE9rer des math\xE9matiques en ligne",insertBlockMath:"Ins\xE9rer un bloc math\xE9matique",bold:"Gras",italic:"Italique",code:"Code",highlight:"Surligner",insertBlockRef:"Ins\xE9rer une r\xE9f\xE9rence de bloc",insertTag:"Ins\xE9rer une \xE9tiquette",toCodeblock:"Convertir en bloc de code",undo:"Annuler",redo:"R\xE9tablir",softBreak:"Saut de ligne doux",openFusionCommand:"Ouvrir le panneau multifonction",openAndFocusToSidePane:"Ouvrir la barre lat\xE9rale et focaliser / Fermer la barre lat\xE9rale",moveSidePane:"D\xE9placer la barre lat\xE9rale (\xE0 droite / en bas)",addToFavorite:"Ajouter aux favoris",addToSidePane:"Ajouter \xE0 la barre lat\xE9rale"}}},adminDashboard:{title:"Tableau de bord administrateur",logout:"D\xE9connexion",tabs:{kbManagement:"Gestion des bases de connaissances",logsAndAnalytics:"Journaux et analyses"},kbManagement:{allKbs:"Toutes les bases de connaissances",allKbsDescription:"Vous pouvez cr\xE9er de nouvelles bases de connaissances, supprimer des bases de connaissances ou modifier les informations des bases existantes ici",noKbs:"\u{1F914} Aucune base de connaissances",noKbsDescription:'Cliquez sur le bouton "Cr\xE9er une nouvelle base de connaissances" en haut \xE0 droite pour cr\xE9er votre premi\xE8re base de connaissances',kbActions:{edit:"Modifier",delete:"Supprimer",addKb:"Cr\xE9er une nouvelle base de connaissances",refreshKbList:"Actualiser la liste des bases de connaissances"},newKbDialog:{title:"Cr\xE9er une nouvelle base de connaissances",description:"Veuillez remplir les informations suivantes pour cr\xE9er une nouvelle base de connaissances",nameLabel:"Nom",namePlaceholder:"Entrez le nom de la base de connaissances",locationLabel:"Emplacement",locationPlaceholder:"Entrez l'emplacement de la base de connaissances",passwordLabel:"Mot de passe",passwordPlaceholder:"Entrez le mot de passe de la base de connaissances",createBtn:{idle:"Cr\xE9er",creating:"Cr\xE9ation en cours...",createSuccess:"Cr\xE9ation r\xE9ussie",createFailed:"\xC9chec de la cr\xE9ation"},cancelBtn:"Annuler"},deleteKbDialog:{title:"Supprimer la base de connaissances",description:'\xCAtes-vous s\xFBr de vouloir supprimer la base de connaissances "{name}" ? Cette action ne peut pas \xEAtre annul\xE9e.',cancelBtn:"Annuler",status:{idle:"Supprimer",deleting:"Suppression en cours...",deleteSuccess:"Suppression r\xE9ussie",deleteFailed:"\xC9chec de la suppression"}}}}},ja_JP:{languages:{zh_CN:"\u4E2D\u56FD\u8A9E\uFF08\u7C21\u4F53\u5B57\uFF09",zh_HK:"\u4E2D\u56FD\u8A9E\uFF08\u7E41\u4F53\u5B57\u30FB\u9999\u6E2F\uFF09",zh_TW:"\u4E2D\u56FD\u8A9E\uFF08\u7E41\u4F53\u5B57\u30FB\u53F0\u6E7E\uFF09",en_US:"\u82F1\u8A9E",ja_JP:"\u65E5\u672C\u8A9E",fr_FR:"\u30D5\u30E9\u30F3\u30B9\u8A9E"},login:{kbEditorLogin:{title:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u958B\u304F",serverUrlLabel:"\u30B5\u30FC\u30D0\u30FCURL",serverUrlPlaceholder:"\u30B5\u30FC\u30D0\u30FCURL\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\uFF08\u4F8B\uFF1Ahttp://43.134.1.60/:8081\uFF09",noKbServerMsg:'\u3053\u306E\u30B5\u30FC\u30D0\u30FC\u306B\u306F\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u304C\u3042\u308A\u307E\u305B\u3093\u3002<a class="cursor-pointer">\u7BA1\u7406\u8005\u3068\u3057\u3066\u30ED\u30B0\u30A4\u30F3</a>\u3057\u3066\u3001\u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9\u3067\u65B0\u3057\u3044\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u4F5C\u6210\u3067\u304D\u307E\u3059\u3002',kbLocationLabel:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9",refreshKbListTooltip:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u4E00\u89A7\u3092\u66F4\u65B0",passwordLabel:"\u30D1\u30B9\u30EF\u30FC\u30C9",adminLoginBtn:"\u7BA1\u7406\u8005\u30ED\u30B0\u30A4\u30F3",serverStatus:{invalidURL:"URL\u306E\u5F62\u5F0F\u304C\u6B63\u3057\u304F\u3042\u308A\u307E\u305B\u3093",connFailed:"\u63A5\u7D9A\u306B\u5931\u6557\u3057\u307E\u3057\u305F",connecting:"\u63A5\u7D9A\u4E2D",connSuccess:"\u63A5\u7D9A\u6210\u529F",noKbServer:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u30B5\u30FC\u30D0\u30FC\u304C\u3042\u308A\u307E\u305B\u3093",loginFailed:"\u30ED\u30B0\u30A4\u30F3\u306B\u5931\u6557\u3057\u307E\u3057\u305F"},loginStatus:{idle:"\u5F85\u6A5F\u4E2D",loggingIn:"\u30ED\u30B0\u30A4\u30F3\u4E2D",loginSuccess:"\u30ED\u30B0\u30A4\u30F3\u6210\u529F",loginFailed_InvalidPassword:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u6B63\u3057\u304F\u3042\u308A\u307E\u305B\u3093",loginFailed_Unknown:"\u4E0D\u660E\u306A\u30A8\u30E9\u30FC\u3067\u3059\u3002\u30B5\u30FC\u30D0\u30FC\u7BA1\u7406\u8005\u306B\u9023\u7D61\u3057\u3066\u304F\u3060\u3055\u3044"},loginBtn:{idle:"\u30ED\u30B0\u30A4\u30F3",loggingIn:"\u30ED\u30B0\u30A4\u30F3\u4E2D...",loginSuccess:"\u30ED\u30B0\u30A4\u30F3\u6210\u529F",loginFailed_InvalidPassword:"\u30ED\u30B0\u30A4\u30F3",loginFailed_Unknown:"\u30ED\u30B0\u30A4\u30F3"}},adminLogin:{title:"\u7BA1\u7406\u8005\u30ED\u30B0\u30A4\u30F3",serverUrlLabel:"\u30B5\u30FC\u30D0\u30FCURL",serverUrlPlaceholder:"\u30B5\u30FC\u30D0\u30FCURL\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\uFF08\u4F8B\uFF1Ahttp://43.134.1.60/:8081\uFF09",passwordLabel:"\u30D1\u30B9\u30EF\u30FC\u30C9",kbEditorLoginBtn:"\u30A8\u30C7\u30A3\u30BF\u30FC\u30ED\u30B0\u30A4\u30F3",loginBtn:{idle:"\u30ED\u30B0\u30A4\u30F3",loggingIn:"\u30ED\u30B0\u30A4\u30F3\u4E2D...",loginSuccess:"\u30ED\u30B0\u30A4\u30F3\u6210\u529F",invalidServerUrl:"\u30ED\u30B0\u30A4\u30F3\u5931\u6557",invalidPassword:"\u30ED\u30B0\u30A4\u30F3\u5931\u6557",maxAttempts:"\u30ED\u30B0\u30A4\u30F3\u5931\u6557",cannotConnectToServer:"\u30ED\u30B0\u30A4\u30F3\u5931\u6557"},errMsg:{invalidServerUrl:"URL\u306E\u5F62\u5F0F\u304C\u6B63\u3057\u304F\u3042\u308A\u307E\u305B\u3093",invalidPassword:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u6B63\u3057\u304F\u3042\u308A\u307E\u305B\u3093",maxAttempts:"\u8A66\u884C\u56DE\u6570\u306E\u4E0A\u9650\u306B\u9054\u3057\u307E\u3057\u305F\u3002\u3057\u3070\u3089\u304F\u3057\u3066\u304B\u3089\u518D\u8A66\u884C\u3057\u3066\u304F\u3060\u3055\u3044",cannotConnectToServer:"\u30B5\u30FC\u30D0\u30FC\u306B\u63A5\u7D9A\u3067\u304D\u307E\u305B\u3093"}}},kbView:{loadingKb:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u8AAD\u307F\u8FBC\u307F\u4E2D...",backlinksPanel:{nBacklinks:"\u30D0\u30C3\u30AF\u30EA\u30F3\u30AF {count} \u4EF6",nPotentialLinks:"\u6F5C\u5728\u7684\u306A\u30EA\u30F3\u30AF {count} \u4EF6"},keybindingInput:{empty:"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8\u3092\u8A2D\u5B9A"},codeblock:{unknownLanguage:"\u4E0D\u660E\u306A\u8A00\u8A9E",copyCode:"\u30B3\u30FC\u30C9\u3092\u30B3\u30D4\u30FC",copySuccess:"\u30B3\u30FC\u30C9\u30D6\u30ED\u30C3\u30AF\u306E\u30B3\u30FC\u30C9\u304C\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3055\u308C\u307E\u3057\u305F"},imageEditor:{title:"\u753B\u50CF\u30A8\u30C7\u30A3\u30BF\u30FC",description:"\u753B\u50CF\u306E\u30C8\u30EA\u30DF\u30F3\u30B0\u3001\u56DE\u8EE2\u3001\u30B9\u30AD\u30E3\u30F3\u30D5\u30A1\u30A4\u30EB\u306E\u81EA\u52D5\u6700\u9069\u5316\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",save:"\u5909\u66F4\u3092\u9069\u7528",saveAs:"\u540D\u524D\u3092\u4ED8\u3051\u3066\u4FDD\u5B58",deleteOriginal:"\u5143\u306E\u753B\u50CF\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F"},fusionCommand:{noResults:"\u7D50\u679C\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",noCommandResults:"\u30B3\u30DE\u30F3\u30C9\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",allowedBlockTypes:"\u8A31\u53EF\u3055\u308C\u305F\u30D6\u30ED\u30C3\u30AF\u30BF\u30A4\u30D7",searchPlaceholder:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u691C\u7D22",searchHelp:"\u2191\u2193\u3068Home\u3001End\u3067\u7D50\u679C\u3092\u9078\u629E\u3001\u21B5\u3067\u9078\u629E\u9805\u76EE\u306B\u79FB\u52D5\u3001\u2318+\u21B5\u3067\u30D6\u30ED\u30C3\u30AF\u53C2\u7167\u3092\u633F\u5165\u3001esc\u3067\u691C\u7D22\u30D1\u30CD\u30EB\u3092\u9589\u3058\u308B",commandHelp:"/\u3092\u5165\u529B\u3057\u3066\u30B3\u30DE\u30F3\u30C9\u3092\u691C\u7D22\u3001\u2191\u2193\u3068Home\u3001End\u3067\u30B3\u30DE\u30F3\u30C9\u3092\u9078\u629E\u3057\u3066\u21B5\u3067\u5B9F\u884C\u3001esc\u3067\u30B3\u30DE\u30F3\u30C9\u30D1\u30CD\u30EB\u3092\u9589\u3058\u308B"},blockMover:{moveSuccess:"{count} \u500B\u306E\u30D6\u30ED\u30C3\u30AF\u3092\u79FB\u52D5\u3057\u307E\u3057\u305F",focusMovedBlock:"\u79FB\u52D5\u3057\u305F\u30D6\u30ED\u30C3\u30AF\u306B\u30D5\u30A9\u30FC\u30AB\u30B9",inputPlaceholder:"\u79FB\u52D5\u5148..."},refSuggestions:{noSuggestions:"\u7D50\u679C\u304C\u3042\u308A\u307E\u305B\u3093",createNewUnder1:"\u65B0\u3057\u3044\u30D6\u30ED\u30C3\u30AF\u3092\u4F5C\u6210",createNewUnder2:""},pomodoro:{startWorking:"\u3055\u3042\u3001\u59CB\u3081\u307E\u3057\u3087\u3046\uFF01",startResting:"\u4F11\u61A9\u3057\u307E\u3057\u3087\u3046",stop:"\u505C\u6B62",working:"\u4F5C\u696D\u4E2D...",resting:"\u4F11\u61A9\u4E2D..."},settingsPanel:{title:"\u8A2D\u5B9A",invalidJson:"\u7121\u52B9\u306AJSON",reset:"\u30C7\u30D5\u30A9\u30EB\u30C8\u306B\u30EA\u30BB\u30C3\u30C8",noResult:"\u4E00\u81F4\u3059\u308B\u30D6\u30ED\u30C3\u30AF\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",invalidBlockId:"\u7121\u52B9\u306A\u30D6\u30ED\u30C3\u30AFID"},syncStatus:{synced:"\u3059\u3079\u3066\u306E\u5909\u66F4\u304C\u540C\u671F\u3055\u308C\u307E\u3057\u305F",syncing:"\u540C\u671F\u4E2D",disconnected:"\u540C\u671F\u306B\u5931\u6557\u3057\u307E\u3057\u305F"},sidePane:{remove:"\u30B5\u30A4\u30C9\u30D0\u30FC\u304B\u3089\u524A\u9664",prev:"\u524D\u306E\u9805\u76EE",next:"\u6B21\u306E\u9805\u76EE",collapse:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u6298\u308A\u305F\u305F\u3080",moveToRight:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u53F3\u306B\u79FB\u52D5",moveToBottom:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u4E0B\u306B\u79FB\u52D5",setFilter:"\u30D5\u30A3\u30EB\u30BF\u30FC\u3092\u8A2D\u5B9A",setSort:"\u4E26\u3073\u66FF\u3048\u3092\u8A2D\u5B9A",empty:"\u{1F914} \u30B5\u30A4\u30C9\u30D0\u30FC\u304C\u7A7A\u3067\u3059",searchAndAdd:"\u30D6\u30ED\u30C3\u30AF\u3092\u691C\u7D22\u3057\u3066\u30B5\u30A4\u30C9\u30D0\u30FC\u306B\u8FFD\u52A0",emptyTip:`\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u8FFD\u52A0\u3059\u308B\u306B\u306F\uFF1A
  - \u30D6\u30ED\u30C3\u30AF\u30E1\u30CB\u30E5\u30FC\u304B\u3089"\u30B5\u30A4\u30C9\u30D0\u30FC\u306B\u8FFD\u52A0"\u3092\u9078\u629E
  - \u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8Command/Ctrl + K\u3092\u4F7F\u7528
  - \u53F3\u4E0A\u306E"+"\u30DC\u30BF\u30F3\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30D6\u30ED\u30C3\u30AF\u3092\u691C\u7D22\u3057\u3066\u8FFD\u52A0`},headerBar:{moreOptions:"\u3088\u308A\u591A\u304F\u306E\u30AA\u30D7\u30B7\u30E7\u30F3",dailynoteNavigator:"\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8",pomodoro:"\u30DD\u30E2\u30C9\u30FC\u30ED",closeMenu:"\u30E1\u30CB\u30E5\u30FC\u3092\u9589\u3058\u308B",openMenu:"\u30E1\u30CB\u30E5\u30FC\u3092\u958B\u304F",back:"\u623B\u308B",forward:"\u9032\u3080",search:"\u691C\u7D22",notifications:"\u901A\u77E5",switchLightTheme:"\u30E9\u30A4\u30C8\u30C6\u30FC\u30DE\u306B\u5207\u308A\u66FF\u3048",switchDarkTheme:"\u30C0\u30FC\u30AF\u30C6\u30FC\u30DE\u306B\u5207\u308A\u66FF\u3048",openSidepane:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u958B\u304F",closeSidepane:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u9589\u3058\u308B",export:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",import:"\u30A4\u30F3\u30DD\u30FC\u30C8",enterFocusMode:"\u30D5\u30A9\u30FC\u30AB\u30B9\u30E2\u30FC\u30C9\u306B\u5165\u308B",exitFocusMode:"\u30D5\u30A9\u30FC\u30AB\u30B9\u30E2\u30FC\u30C9\u3092\u7D42\u4E86",attachmentsManager:"\u6DFB\u4ED8\u30D5\u30A1\u30A4\u30EB\u7BA1\u7406",settings:"\u8A2D\u5B9A",timeMachine:"\u30BF\u30A4\u30E0\u30DE\u30B7\u30F3",help:"\u30D8\u30EB\u30D7",exit:"\u7D42\u4E86",keybindings:"\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8\u306E\u8868\u793A\u3068\u7DE8\u96C6"},command:{deleteBlock:"\u30D6\u30ED\u30C3\u30AF\u3092\u524A\u9664",copyBlockReference:"\u30D6\u30ED\u30C3\u30AF\u53C2\u7167\u3092\u30B3\u30D4\u30FC",copyBlockMirror:"\u30D6\u30ED\u30C3\u30AF\u30DF\u30E9\u30FC\u3092\u30B3\u30D4\u30FC",addToFavorite:"\u304A\u6C17\u306B\u5165\u308A\u306B\u8FFD\u52A0",addToSidepane:"\u30B5\u30A4\u30C9\u30D0\u30FC\u306B\u8FFD\u52A0",export:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",sortDirectChildren:"\u76F4\u63A5\u306E\u5B50\u3092\u4E26\u3073\u66FF\u3048",sortDictAsc:"\u8F9E\u66F8\u9806\u6607\u9806",sortDictDesc:"\u8F9E\u66F8\u9806\u964D\u9806",ctimeAsc:"\u4F5C\u6210\u65E5\u6642\u6607\u9806",ctimeDesc:"\u4F5C\u6210\u65E5\u6642\u964D\u9806",mtimeAsc:"\u66F4\u65B0\u65E5\u6642\u6607\u9806",mtimeDesc:"\u66F4\u65B0\u65E5\u6642\u964D\u9806",archiveDone:"\u5B8C\u4E86\u3057\u305F\u30BF\u30B9\u30AF\u3092\u30A2\u30FC\u30AB\u30A4\u30D6",moveBlock:"\u30D6\u30ED\u30C3\u30AF\u3092\u79FB\u52D5",moveBlockLeaveRef:"\u30D6\u30ED\u30C3\u30AF\u3092\u79FB\u52D5\u3057\u3066\u53C2\u7167\u3092\u6B8B\u3059",moveBlockLeaveMirror:"\u30D6\u30ED\u30C3\u30AF\u3092\u79FB\u52D5\u3057\u3066\u30DF\u30E9\u30FC\u3092\u6B8B\u3059",insertMirrorBelow:"\u4E0B\u306B\u30DF\u30E9\u30FC\u3092\u633F\u5165",openFieldValuesInspector:"\u30D5\u30A3\u30FC\u30EB\u30C9\u5024\u30A4\u30F3\u30B9\u30DA\u30AF\u30BF\u30FC\u3092\u958B\u304F",setBlockRefColor:"\u30D6\u30ED\u30C3\u30AF\u53C2\u7167\u306E\u8272\u3092\u8A2D\u5B9A",blue:"\u9752",green:"\u7DD1",red:"\u8D64",yellow:"\u9EC4",gray:"\u7070\u8272",orange:"\u30AA\u30EC\u30F3\u30B8",purple:"\u7D2B"},backlinks:{openBacklinksPanel:"\u30D0\u30C3\u30AF\u30EA\u30F3\u30AF\u30D1\u30CD\u30EB\u3092\u958B\u304F"},createNewTreeDialog:{title:"\u65B0\u898F\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u4F5C\u6210",description:`\u30EB\u30FC\u30C8\u30D6\u30ED\u30C3\u30AF\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002\u3053\u308C\u306F\u4EE5\u4E0B\u306E\u7406\u7531\u304C\u8003\u3048\u3089\u308C\u307E\u3059\uFF1A
1. \u3053\u308C\u306F\u65B0\u3057\u3044\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3067\u3059
2. \u30C7\u30FC\u30BF\u306F\u307E\u3060\u540C\u671F\u4E2D\u3067\u3059`,waitingForSync:'\u540C\u671F\u3092\u5F85\u3063\u3066\u3044\u307E\u3059\u3002\u3053\u308C\u304C\u65B0\u3057\u3044\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3067\u3042\u308B\u3053\u3068\u304C\u78BA\u304B\u306A\u5834\u5408\u306F\u3001"\u4F5C\u6210"\u30DC\u30BF\u30F3\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u65B0\u3057\u3044\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u4F5C\u6210\u3057\u3066\u304F\u3060\u3055\u3044\u3002',waitBtn:"\u5F85\u6A5F",createBtn:"\u4F5C\u6210",creating:"\u4F5C\u6210\u4E2D...",done:"\u4F5C\u6210\u6210\u529F",failed:"\u4F5C\u6210\u5931\u6557"},pasteDialog:{title:"\u30C0\u30E1\u3067\u3059",description:"\u5927\u304D\u3059\u304E\u307E\u3059\uFF01\u3053\u306E\u307E\u307E\u5165\u308C\u308B\u3068\u58CA\u308C\u3066\u3057\u307E\u3044\u307E\u3059\uFF01\u5206\u5272\u3057\u3066\u8CBC\u308A\u4ED8\u3051\u3066\u307F\u307E\u305B\u3093\u304B\uFF1F",cancelBtn:"\u4E86\u89E3\u3057\u307E\u3057\u305F"},attachmentsManager:{title:"\u6DFB\u4ED8\u30D5\u30A1\u30A4\u30EB\u7BA1\u7406",upload:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",noFiles:"\u30D5\u30A1\u30A4\u30EB\u304C\u3042\u308A\u307E\u305B\u3093",refreshing:"\u66F4\u65B0\u4E2D...",refreshed:"\u66F4\u65B0\u6210\u529F",previewPane:{openPreview:"\u30D7\u30EC\u30D3\u30E5\u30FC",download:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",reference:"\u30D6\u30ED\u30C3\u30AF\u53C2\u7167\u3092\u633F\u5165",pathReference:"\u30D1\u30B9\u53C2\u7167\u3092\u633F\u5165",insertImage:"\u753B\u50CF\u3092\u633F\u5165",fetchingImage:"\u753B\u50CF\u3092\u8AAD\u307F\u8FBC\u307F\u4E2D...",closePreview:"\u30D7\u30EC\u30D3\u30E5\u30FC\u3092\u9589\u3058\u308B",delete:"\u524A\u9664",info:"\u8A73\u7D30\u60C5\u5831"},uploadStatus:{idle:"\u5F85\u6A5F\u4E2D",uploading:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D...",success:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u6210\u529F",failed:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u5931\u6557"},fetchFilesStatus:{idle:"\u5F85\u6A5F\u4E2D",fetching:"\u30D5\u30A1\u30A4\u30EB\u4E00\u89A7\u3092\u53D6\u5F97\u4E2D...",success:"\u30D5\u30A1\u30A4\u30EB\u4E00\u89A7\u306E\u53D6\u5F97\u306B\u6210\u529F",failed:"\u30D5\u30A1\u30A4\u30EB\u4E00\u89A7\u306E\u53D6\u5F97\u306B\u5931\u6557"}},imageContent:{fetchingImage:"\u753B\u50CF\u3092\u8AAD\u307F\u8FBC\u307F\u4E2D...",addCaption:"\u30AD\u30E3\u30D7\u30B7\u30E7\u30F3\u3092\u8FFD\u52A0",deleteImage:"\u753B\u50CF\u3092\u524A\u9664",blend:"\u80CC\u666F\u3068\u30D6\u30EC\u30F3\u30C9\uFF08\u8272\u5225\uFF09",blendLuminosity:"\u80CC\u666F\u3068\u30D6\u30EC\u30F3\u30C9\uFF08\u660E\u5EA6\u5225\uFF09",circle:"\u5186\u5F62\u306B\u30C8\u30EA\u30DF\u30F3\u30B0",invert:"\u53CD\u8EE2",invertW:"\u53CD\u8EE2\uFF08\u767D\u80CC\u666F\uFF09",outline:"\u30A2\u30A6\u30C8\u30E9\u30A4\u30F3",width:"\u5E45",wider:"\u3088\u308A\u5E83\u304F",narrower:"\u3088\u308A\u72ED\u304F",resetWidth:"\u30EA\u30BB\u30C3\u30C8",download:"\u753B\u50CF\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",metadata:"\u8A73\u7D30\u60C5\u5831",filter:"\u30D5\u30A3\u30EB\u30BF\u30FC",clearScannedImage:"\u30B9\u30AD\u30E3\u30F3\u3057\u305F\u753B\u50CF\u306E\u80CC\u666F\u3092\u30AF\u30EA\u30A2"},exporter:{title:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",description:"\u9078\u629E\u3057\u305F\u30B5\u30D6\u30C4\u30EA\u30FC\u3092HTML\u3001PDF\u3001Markdown\u3001\u30D7\u30EC\u30FC\u30F3\u30C6\u30AD\u30B9\u30C8\u306A\u3069\u69D8\u3005\u306A\u5F62\u5F0F\u3067\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",preview:"\u30D7\u30EC\u30D3\u30E5\u30FC",copyToClipboard:"\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC",exportToFile:"\u30D5\u30A1\u30A4\u30EB\u306B\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",exportFormat:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u5F62\u5F0F"},fontSelector:{notAvailable:"\uFF08\u672A\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\uFF09",notSpecified:"\uFF08\u672A\u6307\u5B9A\uFF09"},fieldValuesInspector:{title:"\u30D5\u30A3\u30FC\u30EB\u30C9\u5024\u30A4\u30F3\u30B9\u30DA\u30AF\u30BF\u30FC",description:"\u3053\u306E\u30D6\u30ED\u30C3\u30AF\u306E\u3059\u3079\u3066\u306E\u30D5\u30A3\u30FC\u30EB\u30C9\u5024\u3092\u8868\u793A"},dailynoteNavigator:{noDailyNote:"\u3053\u306E\u65E5\u306E\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u306F\u3042\u308A\u307E\u305B\u3093\u3002\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u4F5C\u6210",gotoDailyNote:"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u3053\u306E\u65E5\u306E\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u306B\u79FB\u52D5",dontKnowWhereToCreate:{title:"\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u306E\u4F5C\u6210\u5834\u6240\u304C\u4E0D\u660E\u3067\u3059",desc:'"\u8A2D\u5B9A > \u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8 > \u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u306E\u4FDD\u5B58\u5834\u6240"\u3067\u3001\u65B0\u3057\u3044\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u306E\u4F5C\u6210\u5834\u6240\u3092\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044'}},history:{goToPrev:"\u623B\u308B\u3001\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u3059\u3079\u3066\u306E\u5C65\u6B74\u9805\u76EE\u3092\u8868\u793A",goToNext:"\u9032\u3080\u3001\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u3059\u3079\u3066\u306E\u5C65\u6B74\u9805\u76EE\u3092\u8868\u793A"},keybindings:{title:"\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8",description:"\u5229\u7528\u53EF\u80FD\u306A\u3059\u3079\u3066\u306E\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8\u306E\u4E00\u89A7",close:"\u9589\u3058\u308B",groups:{normal:"\u4E00\u822C\u7684\u306A\u64CD\u4F5C",inCodeBlock:"\u30B3\u30FC\u30C9\u30D6\u30ED\u30C3\u30AF\u56FA\u6709"},commands:{swapUp:"\u4E0A\u306B\u79FB\u52D5",swapDown:"\u4E0B\u306B\u79FB\u52D5",expand:"\u5C55\u958B",collapse:"\u6298\u308A\u305F\u305F\u3080",indent:"\u30A4\u30F3\u30C7\u30F3\u30C8\u5897\u52A0",outdent:"\u30A4\u30F3\u30C7\u30F3\u30C8\u6E1B\u5C11",insertInlineMath:"\u30A4\u30F3\u30E9\u30A4\u30F3\u6570\u5F0F\u3092\u633F\u5165",insertBlockMath:"\u30D6\u30ED\u30C3\u30AF\u6570\u5F0F\u3092\u633F\u5165",bold:"\u592A\u5B57",italic:"\u659C\u4F53",code:"\u30B3\u30FC\u30C9",highlight:"\u30CF\u30A4\u30E9\u30A4\u30C8",insertBlockRef:"\u30D6\u30ED\u30C3\u30AF\u53C2\u7167\u3092\u633F\u5165",insertTag:"\u30BF\u30B0\u3092\u633F\u5165",toCodeblock:"\u30B3\u30FC\u30C9\u30D6\u30ED\u30C3\u30AF\u306B\u5909\u63DB",undo:"\u5143\u306B\u623B\u3059",redo:"\u3084\u308A\u76F4\u3057",softBreak:"\u30BD\u30D5\u30C8\u6539\u884C",openFusionCommand:"\u30DE\u30EB\u30C1\u30D5\u30A1\u30F3\u30AF\u30B7\u30E7\u30F3\u30D1\u30CD\u30EB\u3092\u958B\u304F",openAndFocusToSidePane:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u958B\u3044\u3066\u30D5\u30A9\u30FC\u30AB\u30B9 / \u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u9589\u3058\u308B",moveSidePane:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u79FB\u52D5\uFF08\u53F3/\u4E0B\uFF09",addToFavorite:"\u304A\u6C17\u306B\u5165\u308A\u306B\u8FFD\u52A0",addToSidePane:"\u30B5\u30A4\u30C9\u30D0\u30FC\u306B\u8FFD\u52A0"}}},adminDashboard:{title:"\u7BA1\u7406\u8005\u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9",logout:"\u30ED\u30B0\u30A2\u30A6\u30C8",tabs:{kbManagement:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u7BA1\u7406",logsAndAnalytics:"\u30ED\u30B0\u3068\u5206\u6790"},kbManagement:{allKbs:"\u3059\u3079\u3066\u306E\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9",allKbsDescription:"\u3053\u3053\u3067\u65B0\u3057\u3044\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u306E\u4F5C\u6210\u3001\u524A\u9664\u3001\u65E2\u5B58\u306E\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u60C5\u5831\u306E\u4FEE\u6B63\u304C\u3067\u304D\u307E\u3059",noKbs:"\u{1F914} \u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u304C\u3042\u308A\u307E\u305B\u3093",noKbsDescription:'\u53F3\u4E0A\u306E"\u65B0\u898F\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u4F5C\u6210"\u30DC\u30BF\u30F3\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u3001\u6700\u521D\u306E\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u4F5C\u6210\u3057\u3066\u304F\u3060\u3055\u3044',kbActions:{edit:"\u7DE8\u96C6",delete:"\u524A\u9664",addKb:"\u65B0\u898F\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u4F5C\u6210",refreshKbList:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u4E00\u89A7\u3092\u66F4\u65B0"},newKbDialog:{title:"\u65B0\u898F\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u4F5C\u6210",description:"\u65B0\u3057\u3044\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u4F5C\u6210\u3059\u308B\u305F\u3081\u306B\u4EE5\u4E0B\u306E\u60C5\u5831\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",nameLabel:"\u540D\u524D",namePlaceholder:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u540D\u3092\u5165\u529B",locationLabel:"\u5834\u6240",locationPlaceholder:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u306E\u5834\u6240\u3092\u5165\u529B",passwordLabel:"\u30D1\u30B9\u30EF\u30FC\u30C9",passwordPlaceholder:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u306E\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B",createBtn:{idle:"\u4F5C\u6210",creating:"\u4F5C\u6210\u4E2D...",createSuccess:"\u4F5C\u6210\u6210\u529F",createFailed:"\u4F5C\u6210\u5931\u6557"},cancelBtn:"\u30AD\u30E3\u30F3\u30BB\u30EB"},deleteKbDialog:{title:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u524A\u9664",description:'\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9"{name}"\u3092\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F\u3053\u306E\u64CD\u4F5C\u306F\u53D6\u308A\u6D88\u305B\u307E\u305B\u3093\u3002',cancelBtn:"\u30AD\u30E3\u30F3\u30BB\u30EB",status:{idle:"\u524A\u9664",deleting:"\u524A\u9664\u4E2D...",deleteSuccess:"\u524A\u9664\u6210\u529F",deleteFailed:"\u524A\u9664\u5931\u6557"}}}}}};function r(n){var e,o,a="";if(typeof n=="string"||typeof n=="number")a+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(o=r(n[e]))&&(a&&(a+=" "),a+=o)}else for(o in n)n[o]&&(a&&(a+=" "),a+=o);return a}function clsx(){for(var n,e,o=0,a="",s=arguments.length;o<s;o++)(n=arguments[o])&&(e=r(n))&&(a&&(a+=" "),a+=e);return a}const falsyToString=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,cx=clsx,cva=(n,e)=>o=>{var a;if((e==null?void 0:e.variants)==null)return cx(n,o==null?void 0:o.class,o==null?void 0:o.className);const{variants:s,defaultVariants:l}=e,c=Object.keys(s).map(f=>{const v=o==null?void 0:o[f],b=l==null?void 0:l[f];if(v===null)return null;const k=falsyToString(v)||falsyToString(b);return s[f][k]}),d=o&&Object.entries(o).reduce((f,v)=>{let[b,k]=v;return k===void 0||(f[b]=k),f},{}),u=e==null||(a=e.compoundVariants)===null||a===void 0?void 0:a.reduce((f,v)=>{let{class:b,className:k,...x}=v;return Object.entries(x).every(_=>{let[E,B]=_;return Array.isArray(B)?B.includes({...l,...d}[E]):{...l,...d}[E]===B})?[...f,b,k]:f},[]);return cx(n,c,u,o==null?void 0:o.class,o==null?void 0:o.className)},CLASS_PART_SEPARATOR="-",createClassGroupUtils=n=>{const e=createClassMap(n),{conflictingClassGroups:o,conflictingClassGroupModifiers:a}=n;return{getClassGroupId:s=>{const l=s.split(CLASS_PART_SEPARATOR);return l[0]===""&&l.length!==1&&l.shift(),getGroupRecursive(l,e)||getGroupIdForArbitraryProperty(s)},getConflictingClassGroupIds:(s,l)=>{const c=o[s]||[];return l&&a[s]?[...c,...a[s]]:c}}},getGroupRecursive=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const o=n[0],a=e.nextPart.get(o),s=a?getGroupRecursive(n.slice(1),a):void 0;if(s)return s;if(e.validators.length===0)return;const l=n.join(CLASS_PART_SEPARATOR);return(c=e.validators.find(({validator:d})=>d(l)))==null?void 0:c.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=n=>{if(arbitraryPropertyRegex.test(n)){const e=arbitraryPropertyRegex.exec(n)[1],o=e==null?void 0:e.substring(0,e.indexOf(":"));if(o)return"arbitrary.."+o}},createClassMap=n=>{const{theme:e,prefix:o}=n,a={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(n.classGroups),o).forEach(([s,l])=>{processClassesRecursively(l,a,s,e)}),a},processClassesRecursively=(n,e,o,a)=>{n.forEach(s=>{if(typeof s=="string"){const l=s===""?e:getPart(e,s);l.classGroupId=o;return}if(typeof s=="function"){if(isThemeGetter(s)){processClassesRecursively(s(a),e,o,a);return}e.validators.push({validator:s,classGroupId:o});return}Object.entries(s).forEach(([l,c])=>{processClassesRecursively(c,getPart(e,l),o,a)})})},getPart=(n,e)=>{let o=n;return e.split(CLASS_PART_SEPARATOR).forEach(a=>{o.nextPart.has(a)||o.nextPart.set(a,{nextPart:new Map,validators:[]}),o=o.nextPart.get(a)}),o},isThemeGetter=n=>n.isThemeGetter,getPrefixedClassGroupEntries=(n,e)=>e?n.map(([o,a])=>{const s=a.map(l=>typeof l=="string"?e+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([c,d])=>[e+c,d])):l);return[o,s]}):n,createLruCache=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,o=new Map,a=new Map;const s=(l,c)=>{o.set(l,c),e++,e>n&&(e=0,a=o,o=new Map)};return{get(l){let c=o.get(l);if(c!==void 0)return c;if((c=a.get(l))!==void 0)return s(l,c),c},set(l,c){o.has(l)?o.set(l,c):s(l,c)}}},IMPORTANT_MODIFIER="!",createParseClassName=n=>{const{separator:e,experimentalParseClassName:o}=n,a=e.length===1,s=e[0],l=e.length,c=d=>{const u=[];let f=0,v=0,b;for(let B=0;B<d.length;B++){let M=d[B];if(f===0){if(M===s&&(a||d.slice(B,B+l)===e)){u.push(d.slice(v,B)),v=B+l;continue}if(M==="/"){b=B;continue}}M==="["?f++:M==="]"&&f--}const k=u.length===0?d:d.substring(v),x=k.startsWith(IMPORTANT_MODIFIER),_=x?k.substring(1):k,E=b&&b>v?b-v:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:E}};return o?d=>o({className:d,parseClassName:c}):c},sortModifiers=n=>{if(n.length<=1)return n;const e=[];let o=[];return n.forEach(a=>{a[0]==="["?(e.push(...o.sort(),a),o=[]):o.push(a)}),e.push(...o.sort()),e},createConfigUtils=n=>({cache:createLruCache(n.cacheSize),parseClassName:createParseClassName(n),...createClassGroupUtils(n)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(n,e)=>{const{parseClassName:o,getClassGroupId:a,getConflictingClassGroupIds:s}=e,l=[],c=n.trim().split(SPLIT_CLASSES_REGEX);let d="";for(let u=c.length-1;u>=0;u-=1){const f=c[u],{modifiers:v,hasImportantModifier:b,baseClassName:k,maybePostfixModifierPosition:x}=o(f);let _=!!x,E=a(_?k.substring(0,x):k);if(!E){if(!_){d=f+(d.length>0?" "+d:d);continue}if(E=a(k),!E){d=f+(d.length>0?" "+d:d);continue}_=!1}const B=sortModifiers(v).join(":"),M=b?B+IMPORTANT_MODIFIER:B,V=M+E;if(l.includes(V))continue;l.push(V);const F=s(E,_);for(let I=0;I<F.length;++I){const L=F[I];l.push(M+L)}d=f+(d.length>0?" "+d:d)}return d};function twJoin(){let n=0,e,o,a="";for(;n<arguments.length;)(e=arguments[n++])&&(o=toValue$1(e))&&(a&&(a+=" "),a+=o);return a}const toValue$1=n=>{if(typeof n=="string")return n;let e,o="";for(let a=0;a<n.length;a++)n[a]&&(e=toValue$1(n[a]))&&(o&&(o+=" "),o+=e);return o};function createTailwindMerge(n,...e){let o,a,s,l=c;function c(u){const f=e.reduce((v,b)=>b(v),n());return o=createConfigUtils(f),a=o.cache.get,s=o.cache.set,l=d,d(u)}function d(u){const f=a(u);if(f)return f;const v=mergeClassList(u,o);return s(u,v),v}return function(){return l(twJoin.apply(null,arguments))}}const fromTheme=n=>{const e=o=>o[n]||[];return e.isThemeGetter=!0,e},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength=n=>isNumber$1(n)||stringLengths.has(n)||fractionRegex.test(n),isArbitraryLength=n=>getIsArbitraryValue(n,"length",isLengthOnly),isNumber$1=n=>!!n&&!Number.isNaN(Number(n)),isArbitraryNumber=n=>getIsArbitraryValue(n,"number",isNumber$1),isInteger=n=>!!n&&Number.isInteger(Number(n)),isPercent=n=>n.endsWith("%")&&isNumber$1(n.slice(0,-1)),isArbitraryValue=n=>arbitraryValueRegex.test(n),isTshirtSize=n=>tshirtUnitRegex.test(n),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=n=>getIsArbitraryValue(n,sizeLabels,isNever),isArbitraryPosition=n=>getIsArbitraryValue(n,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=n=>getIsArbitraryValue(n,imageLabels,isImage$1),isArbitraryShadow=n=>getIsArbitraryValue(n,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(n,e,o)=>{const a=arbitraryValueRegex.exec(n);return a?a[1]?typeof e=="string"?a[1]===e:e.has(a[1]):o(a[2]):!1},isLengthOnly=n=>lengthUnitRegex.test(n)&&!colorFunctionRegex.test(n),isNever=()=>!1,isShadow=n=>shadowRegex.test(n),isImage$1=n=>imageRegex.test(n),getDefaultConfig=()=>{const n=fromTheme("colors"),e=fromTheme("spacing"),o=fromTheme("blur"),a=fromTheme("brightness"),s=fromTheme("borderColor"),l=fromTheme("borderRadius"),c=fromTheme("borderSpacing"),d=fromTheme("borderWidth"),u=fromTheme("contrast"),f=fromTheme("grayscale"),v=fromTheme("hueRotate"),b=fromTheme("invert"),k=fromTheme("gap"),x=fromTheme("gradientColorStops"),_=fromTheme("gradientColorStopPositions"),E=fromTheme("inset"),B=fromTheme("margin"),M=fromTheme("opacity"),V=fromTheme("padding"),F=fromTheme("saturate"),I=fromTheme("scale"),L=fromTheme("sepia"),U=fromTheme("skew"),Z=fromTheme("space"),K=fromTheme("translate"),j=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],Y=()=>["auto",isArbitraryValue,e],G=()=>[isArbitraryValue,e],fe=()=>["",isLength,isArbitraryLength],le=()=>["auto",isNumber$1,isArbitraryValue],pe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ue=()=>["solid","dashed","dotted","double","none"],Ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ve=()=>["start","end","center","between","around","evenly","stretch"],Ze=()=>["","0",isArbitraryValue],We=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ze=()=>[isNumber$1,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:ze(),borderColor:[n],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:G(),borderWidth:fe(),contrast:ze(),grayscale:Ze(),hueRotate:ze(),invert:Ze(),gap:G(),gradientColorStops:[n],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:Y(),margin:Y(),opacity:ze(),padding:G(),saturate:ze(),scale:ze(),sepia:Ze(),skew:ze(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":We()}],"break-before":[{"break-before":We()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...pe(),isArbitraryValue]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:Y()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:Ze()}],shrink:[{shrink:Ze()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[k]}],"gap-x":[{"gap-x":[k]}],"gap-y":[{"gap-y":[k]}],"justify-content":[{justify:["normal",...Ve()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ve(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ve(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[V]}],px:[{px:[V]}],py:[{py:[V]}],ps:[{ps:[V]}],pe:[{pe:[V]}],pt:[{pt:[V]}],pr:[{pr:[V]}],pb:[{pb:[V]}],pl:[{pl:[V]}],m:[{m:[B]}],mx:[{mx:[B]}],my:[{my:[B]}],ms:[{ms:[B]}],me:[{me:[B]}],mt:[{mt:[B]}],mr:[{mr:[B]}],mb:[{mb:[B]}],ml:[{ml:[B]}],"space-x":[{"space-x":[Z]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Z]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,e]}],"min-w":[{"min-w":[isArbitraryValue,e,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,e,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,e,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$1,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[M]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[M]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ue(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[M]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...pe(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[M]}],"border-style":[{border:[...ue(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[M]}],"divide-style":[{divide:ue()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ue()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[M]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[M]}],"mix-blend":[{"mix-blend":[...Ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ne()}],filter:[{filter:["","none"]}],blur:[{blur:[o]}],brightness:[{brightness:[a]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[v]}],invert:[{invert:[b]}],saturate:[{saturate:[F]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[o]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[v]}],"backdrop-invert":[{"backdrop-invert":[b]}],"backdrop-opacity":[{"backdrop-opacity":[M]}],"backdrop-saturate":[{"backdrop-saturate":[F]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:ze()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:ze()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[K]}],"translate-y":[{"translate-y":[K]}],"skew-x":[{"skew-x":[U]}],"skew-y":[{"skew-y":[U]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...n){return twMerge(clsx(n))}function $2b4dce13dd5a17fa$export$842a2cf37af977e1(n,e){return n-e*Math.floor(n/e)}const $3b62074eb05584b2$var$EPOCH=1721426;function $3b62074eb05584b2$export$f297eb839006d339(n,e,o,a){e=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(n,e);let s=e-1,l=-2;return o<=2?l=0:$3b62074eb05584b2$export$553d7fa8e3805fc0(e)&&(l=-1),$3b62074eb05584b2$var$EPOCH-1+365*s+Math.floor(s/4)-Math.floor(s/100)+Math.floor(s/400)+Math.floor((367*o-362)/12+l+a)}function $3b62074eb05584b2$export$553d7fa8e3805fc0(n){return n%4===0&&(n%100!==0||n%400===0)}function $3b62074eb05584b2$export$c36e0ecb2d4fa69d(n,e){return n==="BC"?1-e:e}function $3b62074eb05584b2$export$4475b7e617eb123c(n){let e="AD";return n<=0&&(e="BC",n=1-n),[e,n]}const $3b62074eb05584b2$var$daysInMonth={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let o=e,a=o-$3b62074eb05584b2$var$EPOCH,s=Math.floor(a/146097),l=$2b4dce13dd5a17fa$export$842a2cf37af977e1(a,146097),c=Math.floor(l/36524),d=$2b4dce13dd5a17fa$export$842a2cf37af977e1(l,36524),u=Math.floor(d/1461),f=$2b4dce13dd5a17fa$export$842a2cf37af977e1(d,1461),v=Math.floor(f/365),b=s*400+c*100+u*4+v+(c!==4&&v!==4?1:0),[k,x]=$3b62074eb05584b2$export$4475b7e617eb123c(b),_=o-$3b62074eb05584b2$export$f297eb839006d339(k,x,1,1),E=2;o<$3b62074eb05584b2$export$f297eb839006d339(k,x,3,1)?E=0:$3b62074eb05584b2$export$553d7fa8e3805fc0(x)&&(E=1);let B=Math.floor(((_+E)*12+373)/367),M=o-$3b62074eb05584b2$export$f297eb839006d339(k,x,B,1)+1;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(k,x,B,M)}toJulianDay(e){return $3b62074eb05584b2$export$f297eb839006d339(e.era,e.year,e.month,e.day)}getDaysInMonth(e){return $3b62074eb05584b2$var$daysInMonth[$3b62074eb05584b2$export$553d7fa8e3805fc0(e.year)?"leapyear":"standard"][e.month-1]}getMonthsInYear(e){return 12}getDaysInYear(e){return $3b62074eb05584b2$export$553d7fa8e3805fc0(e.year)?366:365}getYearsInEra(e){return 9999}getEras(){return["BC","AD"]}isInverseEra(e){return e.era==="BC"}balanceDate(e){e.year<=0&&(e.era=e.era==="BC"?"AD":"BC",e.year=1-e.year)}constructor(){this.identifier="gregory"}}const $2fe286d2fb449abb$export$7a5acbd77d414bd9={"001":1,AD:1,AE:6,AF:6,AI:1,AL:1,AM:1,AN:1,AR:1,AT:1,AU:1,AX:1,AZ:1,BA:1,BE:1,BG:1,BH:6,BM:1,BN:1,BY:1,CH:1,CL:1,CM:1,CN:1,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DZ:6,EC:1,EE:1,EG:6,ES:1,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,HR:1,HU:1,IE:1,IQ:6,IR:6,IS:1,IT:1,JO:6,KG:1,KW:6,KZ:1,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MK:1,MN:1,MQ:1,MV:5,MY:1,NL:1,NO:1,NZ:1,OM:6,PL:1,QA:6,RE:1,RO:1,RS:1,RU:1,SD:6,SE:1,SI:1,SK:1,SM:1,SY:6,TJ:1,TM:1,TR:1,UA:1,UY:1,UZ:1,VA:1,VN:1,XK:1};function $14e0f24ef4ac5c92$export$ea39ec197993aef0(n,e){return e=$11d87f3f76e88657$export$b4a036af3fc0b032(e,n.calendar),n.era===e.era&&n.year===e.year&&n.month===e.month&&n.day===e.day}function $14e0f24ef4ac5c92$export$a18c89cbd24170ff(n,e){return e=$11d87f3f76e88657$export$b4a036af3fc0b032(e,n.calendar),n=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(n),e=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(e),n.era===e.era&&n.year===e.year&&n.month===e.month}function $14e0f24ef4ac5c92$export$91b62ebf2ba703ee(n,e){return n.calendar.identifier===e.calendar.identifier&&n.era===e.era&&n.year===e.year&&n.month===e.month&&n.day===e.day}function $14e0f24ef4ac5c92$export$5a8da0c44a3afdf2(n,e){return n=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(n),e=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(e),n.calendar.identifier===e.calendar.identifier&&n.era===e.era&&n.year===e.year&&n.month===e.month}function $14e0f24ef4ac5c92$export$629b0a497aa65267(n,e){return $14e0f24ef4ac5c92$export$ea39ec197993aef0(n,$14e0f24ef4ac5c92$export$d0bdf45af03a6ea3(e))}function $14e0f24ef4ac5c92$export$2061056d06d7cdf7(n,e){let o=n.calendar.toJulianDay(n),a=Math.ceil(o+1-$14e0f24ef4ac5c92$var$getWeekStart(e))%7;return a<0&&(a+=7),a}function $14e0f24ef4ac5c92$export$461939dd4422153(n){return $11d87f3f76e88657$export$1b96692a1ba042ac(Date.now(),n)}function $14e0f24ef4ac5c92$export$d0bdf45af03a6ea3(n){return $11d87f3f76e88657$export$93522d1a439f3617($14e0f24ef4ac5c92$export$461939dd4422153(n))}function $14e0f24ef4ac5c92$export$68781ddf31c0090f(n,e){return n.calendar.toJulianDay(n)-e.calendar.toJulianDay(e)}function $14e0f24ef4ac5c92$export$c19a80a9721b80f6(n,e){return $14e0f24ef4ac5c92$var$timeToMs(n)-$14e0f24ef4ac5c92$var$timeToMs(e)}function $14e0f24ef4ac5c92$var$timeToMs(n){return n.hour*36e5+n.minute*6e4+n.second*1e3+n.millisecond}let $14e0f24ef4ac5c92$var$localTimeZone=null;function $14e0f24ef4ac5c92$export$aa8b41735afcabd2(){return $14e0f24ef4ac5c92$var$localTimeZone==null&&($14e0f24ef4ac5c92$var$localTimeZone=new Intl.DateTimeFormat().resolvedOptions().timeZone),$14e0f24ef4ac5c92$var$localTimeZone}function $14e0f24ef4ac5c92$export$a5a3b454ada2268e(n){return n.subtract({days:n.day-1})}function $14e0f24ef4ac5c92$export$a2258d9c4118825c(n){return n.add({days:n.calendar.getDaysInMonth(n)-n.day})}const $14e0f24ef4ac5c92$var$cachedRegions=new Map;function $14e0f24ef4ac5c92$var$getRegion(n){if(Intl.Locale){let o=$14e0f24ef4ac5c92$var$cachedRegions.get(n);return o||(o=new Intl.Locale(n).maximize().region,o&&$14e0f24ef4ac5c92$var$cachedRegions.set(n,o)),o}let e=n.split("-")[1];return e==="u"?void 0:e}function $14e0f24ef4ac5c92$var$getWeekStart(n){let e=$14e0f24ef4ac5c92$var$getRegion(n);return e&&$2fe286d2fb449abb$export$7a5acbd77d414bd9[e]||0}function $11d87f3f76e88657$export$bd4fb2bc8bb06fb(n){n=$11d87f3f76e88657$export$b4a036af3fc0b032(n,new $3b62074eb05584b2$export$80ee6245ec4f29ec);let e=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(n.era,n.year);return $11d87f3f76e88657$var$epochFromParts(e,n.month,n.day,n.hour,n.minute,n.second,n.millisecond)}function $11d87f3f76e88657$var$epochFromParts(n,e,o,a,s,l,c){let d=new Date;return d.setUTCHours(a,s,l,c),d.setUTCFullYear(n,e-1,o),d.getTime()}function $11d87f3f76e88657$export$59c99f3515d3493f(n,e){if(e==="UTC")return 0;if(n>0&&e===$14e0f24ef4ac5c92$export$aa8b41735afcabd2())return new Date(n).getTimezoneOffset()*-6e4;let{year:o,month:a,day:s,hour:l,minute:c,second:d}=$11d87f3f76e88657$var$getTimeZoneParts(n,e);return $11d87f3f76e88657$var$epochFromParts(o,a,s,l,c,d,0)-Math.floor(n/1e3)*1e3}const $11d87f3f76e88657$var$formattersByTimeZone=new Map;function $11d87f3f76e88657$var$getTimeZoneParts(n,e){let o=$11d87f3f76e88657$var$formattersByTimeZone.get(e);o||(o=new Intl.DateTimeFormat("en-US",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),$11d87f3f76e88657$var$formattersByTimeZone.set(e,o));let a=o.formatToParts(new Date(n)),s={};for(let l of a)l.type!=="literal"&&(s[l.type]=l.value);return{year:s.era==="BC"||s.era==="B"?-s.year+1:+s.year,month:+s.month,day:+s.day,hour:s.hour==="24"?0:+s.hour,minute:+s.minute,second:+s.second}}const $11d87f3f76e88657$var$DAYMILLIS=864e5;function $11d87f3f76e88657$var$getValidWallTimes(n,e,o,a){return(o===a?[o]:[o,a]).filter(s=>$11d87f3f76e88657$var$isValidWallTime(n,e,s))}function $11d87f3f76e88657$var$isValidWallTime(n,e,o){let a=$11d87f3f76e88657$var$getTimeZoneParts(o,e);return n.year===a.year&&n.month===a.month&&n.day===a.day&&n.hour===a.hour&&n.minute===a.minute&&n.second===a.second}function $11d87f3f76e88657$export$5107c82f94518f5c(n,e,o="compatible"){let a=$11d87f3f76e88657$export$b21e0b124e224484(n);if(e==="UTC")return $11d87f3f76e88657$export$bd4fb2bc8bb06fb(a);if(e===$14e0f24ef4ac5c92$export$aa8b41735afcabd2()&&o==="compatible"){a=$11d87f3f76e88657$export$b4a036af3fc0b032(a,new $3b62074eb05584b2$export$80ee6245ec4f29ec);let u=new Date,f=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(a.era,a.year);return u.setFullYear(f,a.month-1,a.day),u.setHours(a.hour,a.minute,a.second,a.millisecond),u.getTime()}let s=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(a),l=$11d87f3f76e88657$export$59c99f3515d3493f(s-$11d87f3f76e88657$var$DAYMILLIS,e),c=$11d87f3f76e88657$export$59c99f3515d3493f(s+$11d87f3f76e88657$var$DAYMILLIS,e),d=$11d87f3f76e88657$var$getValidWallTimes(a,e,s-l,s-c);if(d.length===1)return d[0];if(d.length>1)switch(o){case"compatible":case"earlier":return d[0];case"later":return d[d.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(o){case"earlier":return Math.min(s-l,s-c);case"compatible":case"later":return Math.max(s-l,s-c);case"reject":throw new RangeError("No such absolute time found")}}function $11d87f3f76e88657$export$e67a095c620b86fe(n,e,o="compatible"){return new Date($11d87f3f76e88657$export$5107c82f94518f5c(n,e,o))}function $11d87f3f76e88657$export$1b96692a1ba042ac(n,e){let o=$11d87f3f76e88657$export$59c99f3515d3493f(n,e),a=new Date(n+o),s=a.getUTCFullYear(),l=a.getUTCMonth()+1,c=a.getUTCDate(),d=a.getUTCHours(),u=a.getUTCMinutes(),f=a.getUTCSeconds(),v=a.getUTCMilliseconds();return new $35ea8db9cb2ccb90$export$d3b7288e7994edea(s<1?"BC":"AD",s<1?-s+1:s,l,c,e,o,d,u,f,v)}function $11d87f3f76e88657$export$93522d1a439f3617(n){return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(n.calendar,n.era,n.year,n.month,n.day)}function $11d87f3f76e88657$export$b21e0b124e224484(n,e){let o=0,a=0,s=0,l=0;if("timeZone"in n)({hour:o,minute:a,second:s,millisecond:l}=n);else if("hour"in n&&!e)return n;return e&&({hour:o,minute:a,second:s,millisecond:l}=e),new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(n.calendar,n.era,n.year,n.month,n.day,o,a,s,l)}function $11d87f3f76e88657$export$b4a036af3fc0b032(n,e){if(n.calendar.identifier===e.identifier)return n;let o=e.fromJulianDay(n.calendar.toJulianDay(n)),a=n.copy();return a.calendar=e,a.era=o.era,a.year=o.year,a.month=o.month,a.day=o.day,$735220c2d4774dd3$export$c4e2ecac49351ef2(a),a}function $11d87f3f76e88657$export$84c95a83c799e074(n,e,o){if(n instanceof $35ea8db9cb2ccb90$export$d3b7288e7994edea)return n.timeZone===e?n:$11d87f3f76e88657$export$538b00033cc11c75(n,e);let a=$11d87f3f76e88657$export$5107c82f94518f5c(n,e,o);return $11d87f3f76e88657$export$1b96692a1ba042ac(a,e)}function $11d87f3f76e88657$export$83aac07b4c37b25(n){let e=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(n)-n.offset;return new Date(e)}function $11d87f3f76e88657$export$538b00033cc11c75(n,e){let o=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(n)-n.offset;return $11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(o,e),n.calendar)}const $735220c2d4774dd3$var$ONE_HOUR=36e5;function $735220c2d4774dd3$export$e16d8520af44a096(n,e){let o=n.copy(),a="hour"in o?$735220c2d4774dd3$var$addTimeFields(o,e):0;$735220c2d4774dd3$var$addYears(o,e.years||0),o.calendar.balanceYearMonth&&o.calendar.balanceYearMonth(o,n),o.month+=e.months||0,$735220c2d4774dd3$var$balanceYearMonth(o),$735220c2d4774dd3$var$constrainMonthDay(o),o.day+=(e.weeks||0)*7,o.day+=e.days||0,o.day+=a,$735220c2d4774dd3$var$balanceDay(o),o.calendar.balanceDate&&o.calendar.balanceDate(o),o.year<1&&(o.year=1,o.month=1,o.day=1);let s=o.calendar.getYearsInEra(o);if(o.year>s){var l,c;let u=(l=(c=o.calendar).isInverseEra)===null||l===void 0?void 0:l.call(c,o);o.year=s,o.month=u?1:o.calendar.getMonthsInYear(o),o.day=u?1:o.calendar.getDaysInMonth(o)}o.month<1&&(o.month=1,o.day=1);let d=o.calendar.getMonthsInYear(o);return o.month>d&&(o.month=d,o.day=o.calendar.getDaysInMonth(o)),o.day=Math.max(1,Math.min(o.calendar.getDaysInMonth(o),o.day)),o}function $735220c2d4774dd3$var$addYears(n,e){var o,a;!((o=(a=n.calendar).isInverseEra)===null||o===void 0)&&o.call(a,n)&&(e=-e),n.year+=e}function $735220c2d4774dd3$var$balanceYearMonth(n){for(;n.month<1;)$735220c2d4774dd3$var$addYears(n,-1),n.month+=n.calendar.getMonthsInYear(n);let e=0;for(;n.month>(e=n.calendar.getMonthsInYear(n));)n.month-=e,$735220c2d4774dd3$var$addYears(n,1)}function $735220c2d4774dd3$var$balanceDay(n){for(;n.day<1;)n.month--,$735220c2d4774dd3$var$balanceYearMonth(n),n.day+=n.calendar.getDaysInMonth(n);for(;n.day>n.calendar.getDaysInMonth(n);)n.day-=n.calendar.getDaysInMonth(n),n.month++,$735220c2d4774dd3$var$balanceYearMonth(n)}function $735220c2d4774dd3$var$constrainMonthDay(n){n.month=Math.max(1,Math.min(n.calendar.getMonthsInYear(n),n.month)),n.day=Math.max(1,Math.min(n.calendar.getDaysInMonth(n),n.day))}function $735220c2d4774dd3$export$c4e2ecac49351ef2(n){n.calendar.constrainDate&&n.calendar.constrainDate(n),n.year=Math.max(1,Math.min(n.calendar.getYearsInEra(n),n.year)),$735220c2d4774dd3$var$constrainMonthDay(n)}function $735220c2d4774dd3$export$3e2544e88a25bff8(n){let e={};for(let o in n)typeof n[o]=="number"&&(e[o]=-n[o]);return e}function $735220c2d4774dd3$export$4e2d2ead65e5f7e3(n,e){return $735220c2d4774dd3$export$e16d8520af44a096(n,$735220c2d4774dd3$export$3e2544e88a25bff8(e))}function $735220c2d4774dd3$export$adaa4cf7ef1b65be(n,e){let o=n.copy();return e.era!=null&&(o.era=e.era),e.year!=null&&(o.year=e.year),e.month!=null&&(o.month=e.month),e.day!=null&&(o.day=e.day),$735220c2d4774dd3$export$c4e2ecac49351ef2(o),o}function $735220c2d4774dd3$export$e5d5e1c1822b6e56(n,e){let o=n.copy();return e.hour!=null&&(o.hour=e.hour),e.minute!=null&&(o.minute=e.minute),e.second!=null&&(o.second=e.second),e.millisecond!=null&&(o.millisecond=e.millisecond),$735220c2d4774dd3$export$7555de1e070510cb(o),o}function $735220c2d4774dd3$var$balanceTime(n){n.second+=Math.floor(n.millisecond/1e3),n.millisecond=$735220c2d4774dd3$var$nonNegativeMod(n.millisecond,1e3),n.minute+=Math.floor(n.second/60),n.second=$735220c2d4774dd3$var$nonNegativeMod(n.second,60),n.hour+=Math.floor(n.minute/60),n.minute=$735220c2d4774dd3$var$nonNegativeMod(n.minute,60);let e=Math.floor(n.hour/24);return n.hour=$735220c2d4774dd3$var$nonNegativeMod(n.hour,24),e}function $735220c2d4774dd3$export$7555de1e070510cb(n){n.millisecond=Math.max(0,Math.min(n.millisecond,1e3)),n.second=Math.max(0,Math.min(n.second,59)),n.minute=Math.max(0,Math.min(n.minute,59)),n.hour=Math.max(0,Math.min(n.hour,23))}function $735220c2d4774dd3$var$nonNegativeMod(n,e){let o=n%e;return o<0&&(o+=e),o}function $735220c2d4774dd3$var$addTimeFields(n,e){return n.hour+=e.hours||0,n.minute+=e.minutes||0,n.second+=e.seconds||0,n.millisecond+=e.milliseconds||0,$735220c2d4774dd3$var$balanceTime(n)}function $735220c2d4774dd3$export$d52ced6badfb9a4c(n,e,o,a){let s=n.copy();switch(e){case"era":{let d=n.calendar.getEras(),u=d.indexOf(n.era);if(u<0)throw new Error("Invalid era: "+n.era);u=$735220c2d4774dd3$var$cycleValue(u,o,0,d.length-1,a==null?void 0:a.round),s.era=d[u],$735220c2d4774dd3$export$c4e2ecac49351ef2(s);break}case"year":var l,c;!((l=(c=s.calendar).isInverseEra)===null||l===void 0)&&l.call(c,s)&&(o=-o),s.year=$735220c2d4774dd3$var$cycleValue(n.year,o,-1/0,9999,a==null?void 0:a.round),s.year===-1/0&&(s.year=1),s.calendar.balanceYearMonth&&s.calendar.balanceYearMonth(s,n);break;case"month":s.month=$735220c2d4774dd3$var$cycleValue(n.month,o,1,n.calendar.getMonthsInYear(n),a==null?void 0:a.round);break;case"day":s.day=$735220c2d4774dd3$var$cycleValue(n.day,o,1,n.calendar.getDaysInMonth(n),a==null?void 0:a.round);break;default:throw new Error("Unsupported field "+e)}return n.calendar.balanceDate&&n.calendar.balanceDate(s),$735220c2d4774dd3$export$c4e2ecac49351ef2(s),s}function $735220c2d4774dd3$export$dd02b3e0007dfe28(n,e,o,a){let s=n.copy();switch(e){case"hour":{let l=n.hour,c=0,d=23;if((a==null?void 0:a.hourCycle)===12){let u=l>=12;c=u?12:0,d=u?23:11}s.hour=$735220c2d4774dd3$var$cycleValue(l,o,c,d,a==null?void 0:a.round);break}case"minute":s.minute=$735220c2d4774dd3$var$cycleValue(n.minute,o,0,59,a==null?void 0:a.round);break;case"second":s.second=$735220c2d4774dd3$var$cycleValue(n.second,o,0,59,a==null?void 0:a.round);break;case"millisecond":s.millisecond=$735220c2d4774dd3$var$cycleValue(n.millisecond,o,0,999,a==null?void 0:a.round);break;default:throw new Error("Unsupported field "+e)}return s}function $735220c2d4774dd3$var$cycleValue(n,e,o,a,s=!1){if(s){n+=Math.sign(e),n<o&&(n=a);let l=Math.abs(e);e>0?n=Math.ceil(n/l)*l:n=Math.floor(n/l)*l,n>a&&(n=o)}else n+=e,n<o?n=a-(o-n-1):n>a&&(n=o+(n-a-1));return n}function $735220c2d4774dd3$export$96b1d28349274637(n,e){let o;if(e.years!=null&&e.years!==0||e.months!=null&&e.months!==0||e.weeks!=null&&e.weeks!==0||e.days!=null&&e.days!==0){let s=$735220c2d4774dd3$export$e16d8520af44a096($11d87f3f76e88657$export$b21e0b124e224484(n),{years:e.years,months:e.months,weeks:e.weeks,days:e.days});o=$11d87f3f76e88657$export$5107c82f94518f5c(s,n.timeZone)}else o=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(n)-n.offset;o+=e.milliseconds||0,o+=(e.seconds||0)*1e3,o+=(e.minutes||0)*6e4,o+=(e.hours||0)*36e5;let a=$11d87f3f76e88657$export$1b96692a1ba042ac(o,n.timeZone);return $11d87f3f76e88657$export$b4a036af3fc0b032(a,n.calendar)}function $735220c2d4774dd3$export$6814caac34ca03c7(n,e){return $735220c2d4774dd3$export$96b1d28349274637(n,$735220c2d4774dd3$export$3e2544e88a25bff8(e))}function $735220c2d4774dd3$export$9a297d111fc86b79(n,e,o,a){switch(e){case"hour":{let s=0,l=23;if((a==null?void 0:a.hourCycle)===12){let _=n.hour>=12;s=_?12:0,l=_?23:11}let c=$11d87f3f76e88657$export$b21e0b124e224484(n),d=$11d87f3f76e88657$export$b4a036af3fc0b032($735220c2d4774dd3$export$e5d5e1c1822b6e56(c,{hour:s}),new $3b62074eb05584b2$export$80ee6245ec4f29ec),u=[$11d87f3f76e88657$export$5107c82f94518f5c(d,n.timeZone,"earlier"),$11d87f3f76e88657$export$5107c82f94518f5c(d,n.timeZone,"later")].filter(_=>$11d87f3f76e88657$export$1b96692a1ba042ac(_,n.timeZone).day===d.day)[0],f=$11d87f3f76e88657$export$b4a036af3fc0b032($735220c2d4774dd3$export$e5d5e1c1822b6e56(c,{hour:l}),new $3b62074eb05584b2$export$80ee6245ec4f29ec),v=[$11d87f3f76e88657$export$5107c82f94518f5c(f,n.timeZone,"earlier"),$11d87f3f76e88657$export$5107c82f94518f5c(f,n.timeZone,"later")].filter(_=>$11d87f3f76e88657$export$1b96692a1ba042ac(_,n.timeZone).day===f.day).pop(),b=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(n)-n.offset,k=Math.floor(b/$735220c2d4774dd3$var$ONE_HOUR),x=b%$735220c2d4774dd3$var$ONE_HOUR;return b=$735220c2d4774dd3$var$cycleValue(k,o,Math.floor(u/$735220c2d4774dd3$var$ONE_HOUR),Math.floor(v/$735220c2d4774dd3$var$ONE_HOUR),a==null?void 0:a.round)*$735220c2d4774dd3$var$ONE_HOUR+x,$11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(b,n.timeZone),n.calendar)}case"minute":case"second":case"millisecond":return $735220c2d4774dd3$export$dd02b3e0007dfe28(n,e,o,a);case"era":case"year":case"month":case"day":{let s=$735220c2d4774dd3$export$d52ced6badfb9a4c($11d87f3f76e88657$export$b21e0b124e224484(n),e,o,a),l=$11d87f3f76e88657$export$5107c82f94518f5c(s,n.timeZone);return $11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(l,n.timeZone),n.calendar)}default:throw new Error("Unsupported field "+e)}}function $735220c2d4774dd3$export$31b5430eb18be4f8(n,e,o){let a=$11d87f3f76e88657$export$b21e0b124e224484(n),s=$735220c2d4774dd3$export$e5d5e1c1822b6e56($735220c2d4774dd3$export$adaa4cf7ef1b65be(a,e),e);if(s.compare(a)===0)return n;let l=$11d87f3f76e88657$export$5107c82f94518f5c(s,n.timeZone,o);return $11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(l,n.timeZone),n.calendar)}function $fae977aafc393c5c$export$f59dee82248f5ad4(n){return`${String(n.hour).padStart(2,"0")}:${String(n.minute).padStart(2,"0")}:${String(n.second).padStart(2,"0")}${n.millisecond?String(n.millisecond/1e3).slice(1):""}`}function $fae977aafc393c5c$export$60dfd74aa96791bd(n){let e=$11d87f3f76e88657$export$b4a036af3fc0b032(n,new $3b62074eb05584b2$export$80ee6245ec4f29ec),o;return e.era==="BC"?o=e.year===1?"0000":"-"+String(Math.abs(1-e.year)).padStart(6,"00"):o=String(e.year).padStart(4,"0"),`${o}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}function $fae977aafc393c5c$export$4223de14708adc63(n){return`${$fae977aafc393c5c$export$60dfd74aa96791bd(n)}T${$fae977aafc393c5c$export$f59dee82248f5ad4(n)}`}function $fae977aafc393c5c$var$offsetToString(n){let e=Math.sign(n)<0?"-":"+";n=Math.abs(n);let o=Math.floor(n/36e5),a=n%36e5/6e4;return`${e}${String(o).padStart(2,"0")}:${String(a).padStart(2,"0")}`}function $fae977aafc393c5c$export$bf79f1ebf4b18792(n){return`${$fae977aafc393c5c$export$4223de14708adc63(n)}${$fae977aafc393c5c$var$offsetToString(n.offset)}[${n.timeZone}]`}function _check_private_redeclaration(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _class_private_field_init(n,e,o){_check_private_redeclaration(n,e),e.set(n,o)}function $35ea8db9cb2ccb90$var$shiftArgs(n){let e=typeof n[0]=="object"?n.shift():new $3b62074eb05584b2$export$80ee6245ec4f29ec,o;if(typeof n[0]=="string")o=n.shift();else{let c=e.getEras();o=c[c.length-1]}let a=n.shift(),s=n.shift(),l=n.shift();return[e,o,a,s,l]}var $35ea8db9cb2ccb90$var$_type=new WeakMap;class $35ea8db9cb2ccb90$export$99faa760c7908e4f{copy(){return this.era?new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this.calendar,this.era,this.year,this.month,this.day):new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this.calendar,this.year,this.month,this.day)}add(e){return $735220c2d4774dd3$export$e16d8520af44a096(this,e)}subtract(e){return $735220c2d4774dd3$export$4e2d2ead65e5f7e3(this,e)}set(e){return $735220c2d4774dd3$export$adaa4cf7ef1b65be(this,e)}cycle(e,o,a){return $735220c2d4774dd3$export$d52ced6badfb9a4c(this,e,o,a)}toDate(e){return $11d87f3f76e88657$export$e67a095c620b86fe(this,e)}toString(){return $fae977aafc393c5c$export$60dfd74aa96791bd(this)}compare(e){return $14e0f24ef4ac5c92$export$68781ddf31c0090f(this,e)}constructor(...e){_class_private_field_init(this,$35ea8db9cb2ccb90$var$_type,{writable:!0,value:void 0});let[o,a,s,l,c]=$35ea8db9cb2ccb90$var$shiftArgs(e);this.calendar=o,this.era=a,this.year=s,this.month=l,this.day=c,$735220c2d4774dd3$export$c4e2ecac49351ef2(this)}}var $35ea8db9cb2ccb90$var$_type2=new WeakMap;class $35ea8db9cb2ccb90$export$ca871e8dbb80966f{copy(){return this.era?new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(e){return $735220c2d4774dd3$export$e16d8520af44a096(this,e)}subtract(e){return $735220c2d4774dd3$export$4e2d2ead65e5f7e3(this,e)}set(e){return $735220c2d4774dd3$export$adaa4cf7ef1b65be($735220c2d4774dd3$export$e5d5e1c1822b6e56(this,e),e)}cycle(e,o,a){switch(e){case"era":case"year":case"month":case"day":return $735220c2d4774dd3$export$d52ced6badfb9a4c(this,e,o,a);default:return $735220c2d4774dd3$export$dd02b3e0007dfe28(this,e,o,a)}}toDate(e,o){return $11d87f3f76e88657$export$e67a095c620b86fe(this,e,o)}toString(){return $fae977aafc393c5c$export$4223de14708adc63(this)}compare(e){let o=$14e0f24ef4ac5c92$export$68781ddf31c0090f(this,e);return o===0?$14e0f24ef4ac5c92$export$c19a80a9721b80f6(this,$11d87f3f76e88657$export$b21e0b124e224484(e)):o}constructor(...e){_class_private_field_init(this,$35ea8db9cb2ccb90$var$_type2,{writable:!0,value:void 0});let[o,a,s,l,c]=$35ea8db9cb2ccb90$var$shiftArgs(e);this.calendar=o,this.era=a,this.year=s,this.month=l,this.day=c,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,$735220c2d4774dd3$export$c4e2ecac49351ef2(this)}}var $35ea8db9cb2ccb90$var$_type3=new WeakMap;class $35ea8db9cb2ccb90$export$d3b7288e7994edea{copy(){return this.era?new $35ea8db9cb2ccb90$export$d3b7288e7994edea(this.calendar,this.era,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond):new $35ea8db9cb2ccb90$export$d3b7288e7994edea(this.calendar,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond)}add(e){return $735220c2d4774dd3$export$96b1d28349274637(this,e)}subtract(e){return $735220c2d4774dd3$export$6814caac34ca03c7(this,e)}set(e,o){return $735220c2d4774dd3$export$31b5430eb18be4f8(this,e,o)}cycle(e,o,a){return $735220c2d4774dd3$export$9a297d111fc86b79(this,e,o,a)}toDate(){return $11d87f3f76e88657$export$83aac07b4c37b25(this)}toString(){return $fae977aafc393c5c$export$bf79f1ebf4b18792(this)}toAbsoluteString(){return this.toDate().toISOString()}compare(e){return this.toDate().getTime()-$11d87f3f76e88657$export$84c95a83c799e074(e,this.timeZone).toDate().getTime()}constructor(...e){_class_private_field_init(this,$35ea8db9cb2ccb90$var$_type3,{writable:!0,value:void 0});let[o,a,s,l,c]=$35ea8db9cb2ccb90$var$shiftArgs(e),d=e.shift(),u=e.shift();this.calendar=o,this.era=a,this.year=s,this.month=l,this.day=c,this.timeZone=d,this.offset=u,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,$735220c2d4774dd3$export$c4e2ecac49351ef2(this)}}const $62225008020f0a13$var$ERA_START_DATES=[[1868,9,8],[1912,7,30],[1926,12,25],[1989,1,8],[2019,5,1]],$62225008020f0a13$var$ERA_END_DATES=[[1912,7,29],[1926,12,24],[1989,1,7],[2019,4,30]],$62225008020f0a13$var$ERA_ADDENDS=[1867,1911,1925,1988,2018],$62225008020f0a13$var$ERA_NAMES=["meiji","taisho","showa","heisei","reiwa"];function $62225008020f0a13$var$findEraFromGregorianDate(n){const e=$62225008020f0a13$var$ERA_START_DATES.findIndex(([o,a,s])=>n.year<o||n.year===o&&n.month<a||n.year===o&&n.month===a&&n.day<s);return e===-1?$62225008020f0a13$var$ERA_START_DATES.length-1:e===0?0:e-1}function $62225008020f0a13$var$toGregorian(n){let e=$62225008020f0a13$var$ERA_ADDENDS[$62225008020f0a13$var$ERA_NAMES.indexOf(n.era)];if(!e)throw new Error("Unknown era: "+n.era);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(n.year+e,n.month,n.day)}class $62225008020f0a13$export$b746ab2b60cdffbf extends $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let o=super.fromJulianDay(e),a=$62225008020f0a13$var$findEraFromGregorianDate(o);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,$62225008020f0a13$var$ERA_NAMES[a],o.year-$62225008020f0a13$var$ERA_ADDENDS[a],o.month,o.day)}toJulianDay(e){return super.toJulianDay($62225008020f0a13$var$toGregorian(e))}balanceDate(e){let o=$62225008020f0a13$var$toGregorian(e),a=$62225008020f0a13$var$findEraFromGregorianDate(o);$62225008020f0a13$var$ERA_NAMES[a]!==e.era&&(e.era=$62225008020f0a13$var$ERA_NAMES[a],e.year=o.year-$62225008020f0a13$var$ERA_ADDENDS[a]),this.constrainDate(e)}constrainDate(e){let o=$62225008020f0a13$var$ERA_NAMES.indexOf(e.era),a=$62225008020f0a13$var$ERA_END_DATES[o];if(a!=null){let[s,l,c]=a,d=s-$62225008020f0a13$var$ERA_ADDENDS[o];e.year=Math.max(1,Math.min(d,e.year)),e.year===d&&(e.month=Math.min(l,e.month),e.month===l&&(e.day=Math.min(c,e.day)))}if(e.year===1&&o>=0){let[,s,l]=$62225008020f0a13$var$ERA_START_DATES[o];e.month=Math.max(s,e.month),e.month===s&&(e.day=Math.max(l,e.day))}}getEras(){return $62225008020f0a13$var$ERA_NAMES}getYearsInEra(e){let o=$62225008020f0a13$var$ERA_NAMES.indexOf(e.era),a=$62225008020f0a13$var$ERA_START_DATES[o],s=$62225008020f0a13$var$ERA_START_DATES[o+1];if(s==null)return 9999-a[0]+1;let l=s[0]-a[0];return(e.month<s[1]||e.month===s[1]&&e.day<s[2])&&l++,l}getDaysInMonth(e){return super.getDaysInMonth($62225008020f0a13$var$toGregorian(e))}getMinimumMonthInYear(e){let o=$62225008020f0a13$var$getMinimums(e);return o?o[1]:1}getMinimumDayInMonth(e){let o=$62225008020f0a13$var$getMinimums(e);return o&&e.month===o[1]?o[2]:1}constructor(...e){super(...e),this.identifier="japanese"}}function $62225008020f0a13$var$getMinimums(n){if(n.year===1){let e=$62225008020f0a13$var$ERA_NAMES.indexOf(n.era);return $62225008020f0a13$var$ERA_START_DATES[e]}}const $8d73d47422ca7302$var$BUDDHIST_ERA_START=-543;class $8d73d47422ca7302$export$42d20a78301dee44 extends $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let o=super.fromJulianDay(e),a=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(o.era,o.year);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,a-$8d73d47422ca7302$var$BUDDHIST_ERA_START,o.month,o.day)}toJulianDay(e){return super.toJulianDay($8d73d47422ca7302$var$toGregorian(e))}getEras(){return["BE"]}getDaysInMonth(e){return super.getDaysInMonth($8d73d47422ca7302$var$toGregorian(e))}balanceDate(){}constructor(...e){super(...e),this.identifier="buddhist"}}function $8d73d47422ca7302$var$toGregorian(n){let[e,o]=$3b62074eb05584b2$export$4475b7e617eb123c(n.year+$8d73d47422ca7302$var$BUDDHIST_ERA_START);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(e,o,n.month,n.day)}const $5f31bd6f0c8940b2$var$TAIWAN_ERA_START=1911;function $5f31bd6f0c8940b2$var$gregorianYear(n){return n.era==="minguo"?n.year+$5f31bd6f0c8940b2$var$TAIWAN_ERA_START:1-n.year+$5f31bd6f0c8940b2$var$TAIWAN_ERA_START}function $5f31bd6f0c8940b2$var$gregorianToTaiwan(n){let e=n-$5f31bd6f0c8940b2$var$TAIWAN_ERA_START;return e>0?["minguo",e]:["before_minguo",1-e]}class $5f31bd6f0c8940b2$export$65e01080afcb0799 extends $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let o=super.fromJulianDay(e),a=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(o.era,o.year),[s,l]=$5f31bd6f0c8940b2$var$gregorianToTaiwan(a);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,s,l,o.month,o.day)}toJulianDay(e){return super.toJulianDay($5f31bd6f0c8940b2$var$toGregorian(e))}getEras(){return["before_minguo","minguo"]}balanceDate(e){let[o,a]=$5f31bd6f0c8940b2$var$gregorianToTaiwan($5f31bd6f0c8940b2$var$gregorianYear(e));e.era=o,e.year=a}isInverseEra(e){return e.era==="before_minguo"}getDaysInMonth(e){return super.getDaysInMonth($5f31bd6f0c8940b2$var$toGregorian(e))}getYearsInEra(e){return e.era==="before_minguo"?9999:9999-$5f31bd6f0c8940b2$var$TAIWAN_ERA_START}constructor(...e){super(...e),this.identifier="roc"}}function $5f31bd6f0c8940b2$var$toGregorian(n){let[e,o]=$3b62074eb05584b2$export$4475b7e617eb123c($5f31bd6f0c8940b2$var$gregorianYear(n));return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(e,o,n.month,n.day)}const $f3ed2e4472ae7e25$var$PERSIAN_EPOCH=1948320,$f3ed2e4472ae7e25$var$MONTH_START=[0,31,62,93,124,155,186,216,246,276,306,336];class $f3ed2e4472ae7e25$export$37fccdbfd14c5939{fromJulianDay(e){let o=e-$f3ed2e4472ae7e25$var$PERSIAN_EPOCH,a=1+Math.floor((33*o+3)/12053),s=365*(a-1)+Math.floor((8*a+21)/33),l=o-s,c=l<216?Math.floor(l/31):Math.floor((l-6)/30),d=l-$f3ed2e4472ae7e25$var$MONTH_START[c]+1;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,a,c+1,d)}toJulianDay(e){let o=$f3ed2e4472ae7e25$var$PERSIAN_EPOCH-1+365*(e.year-1)+Math.floor((8*e.year+21)/33);return o+=$f3ed2e4472ae7e25$var$MONTH_START[e.month-1],o+=e.day,o}getMonthsInYear(){return 12}getDaysInMonth(e){return e.month<=6?31:e.month<=11||$2b4dce13dd5a17fa$export$842a2cf37af977e1(25*e.year+11,33)<8?30:29}getEras(){return["AP"]}getYearsInEra(){return 9377}constructor(){this.identifier="persian"}}const $82c358003bdda0a8$var$INDIAN_ERA_START=78,$82c358003bdda0a8$var$INDIAN_YEAR_START=80;class $82c358003bdda0a8$export$39f31c639fa15726 extends $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let o=super.fromJulianDay(e),a=o.year-$82c358003bdda0a8$var$INDIAN_ERA_START,s=e-$3b62074eb05584b2$export$f297eb839006d339(o.era,o.year,1,1),l;s<$82c358003bdda0a8$var$INDIAN_YEAR_START?(a--,l=$3b62074eb05584b2$export$553d7fa8e3805fc0(o.year-1)?31:30,s+=l+155+90+10):(l=$3b62074eb05584b2$export$553d7fa8e3805fc0(o.year)?31:30,s-=$82c358003bdda0a8$var$INDIAN_YEAR_START);let c,d;if(s<l)c=1,d=s+1;else{let u=s-l;u<155?(c=Math.floor(u/31)+2,d=u%31+1):(u-=155,c=Math.floor(u/30)+7,d=u%30+1)}return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,a,c,d)}toJulianDay(e){let o=e.year+$82c358003bdda0a8$var$INDIAN_ERA_START,[a,s]=$3b62074eb05584b2$export$4475b7e617eb123c(o),l,c;return $3b62074eb05584b2$export$553d7fa8e3805fc0(s)?(l=31,c=$3b62074eb05584b2$export$f297eb839006d339(a,s,3,21)):(l=30,c=$3b62074eb05584b2$export$f297eb839006d339(a,s,3,22)),e.month===1?c+e.day-1:(c+=l+Math.min(e.month-2,5)*31,e.month>=8&&(c+=(e.month-7)*30),c+=e.day-1,c)}getDaysInMonth(e){return e.month===1&&$3b62074eb05584b2$export$553d7fa8e3805fc0(e.year+$82c358003bdda0a8$var$INDIAN_ERA_START)||e.month>=2&&e.month<=6?31:30}getYearsInEra(){return 9919}getEras(){return["saka"]}balanceDate(){}constructor(...e){super(...e),this.identifier="indian"}}const $f2f3e0e3a817edbd$var$CIVIL_EPOC=1948440,$f2f3e0e3a817edbd$var$ASTRONOMICAL_EPOC=1948439,$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START=1300,$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END=1600,$f2f3e0e3a817edbd$var$UMALQURA_START_DAYS=460322;function $f2f3e0e3a817edbd$var$islamicToJulianDay(n,e,o,a){return a+Math.ceil(29.5*(o-1))+(e-1)*354+Math.floor((3+11*e)/30)+n-1}function $f2f3e0e3a817edbd$var$julianDayToIslamic(n,e,o){let a=Math.floor((30*(o-e)+10646)/10631),s=Math.min(12,Math.ceil((o-(29+$f2f3e0e3a817edbd$var$islamicToJulianDay(e,a,1,1)))/29.5)+1),l=o-$f2f3e0e3a817edbd$var$islamicToJulianDay(e,a,s,1)+1;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(n,a,s,l)}function $f2f3e0e3a817edbd$var$isLeapYear(n){return(14+11*n)%30<11}class $f2f3e0e3a817edbd$export$2066795aadd37bfc{fromJulianDay(e){return $f2f3e0e3a817edbd$var$julianDayToIslamic(this,$f2f3e0e3a817edbd$var$CIVIL_EPOC,e)}toJulianDay(e){return $f2f3e0e3a817edbd$var$islamicToJulianDay($f2f3e0e3a817edbd$var$CIVIL_EPOC,e.year,e.month,e.day)}getDaysInMonth(e){let o=29+e.month%2;return e.month===12&&$f2f3e0e3a817edbd$var$isLeapYear(e.year)&&o++,o}getMonthsInYear(){return 12}getDaysInYear(e){return $f2f3e0e3a817edbd$var$isLeapYear(e.year)?355:354}getYearsInEra(){return 9665}getEras(){return["AH"]}constructor(){this.identifier="islamic-civil"}}class $f2f3e0e3a817edbd$export$37f0887f2f9d22f7 extends $f2f3e0e3a817edbd$export$2066795aadd37bfc{fromJulianDay(e){return $f2f3e0e3a817edbd$var$julianDayToIslamic(this,$f2f3e0e3a817edbd$var$ASTRONOMICAL_EPOC,e)}toJulianDay(e){return $f2f3e0e3a817edbd$var$islamicToJulianDay($f2f3e0e3a817edbd$var$ASTRONOMICAL_EPOC,e.year,e.month,e.day)}constructor(...e){super(...e),this.identifier="islamic-tbla"}}const $f2f3e0e3a817edbd$var$UMALQURA_DATA="qgpUDckO1AbqBmwDrQpVBakGkgepC9QF2gpcBS0NlQZKB1QLagutBa4ETwoXBYsGpQbVCtYCWwmdBE0KJg2VDawFtgm6AlsKKwWVCsoG6Qr0AnYJtgJWCcoKpAvSC9kF3AJtCU0FpQpSC6ULtAW2CVcFlwJLBaMGUgdlC2oFqworBZUMSg2lDcoF1gpXCasESwmlClILagt1BXYCtwhbBFUFqQW0BdoJ3QRuAjYJqgpUDbIN1QXaAlsJqwRVCkkLZAtxC7QFtQpVCiUNkg7JDtQG6QprCasEkwpJDaQNsg25CroEWworBZUKKgtVC1wFvQQ9Ah0JlQpKC1oLbQW2AjsJmwRVBqkGVAdqC2wFrQpVBSkLkgupC9QF2gpaBasKlQVJB2QHqgu1BbYCVgpNDiULUgtqC60FrgIvCZcESwalBqwG1gpdBZ0ETQoWDZUNqgW1BdoCWwmtBJUFygbkBuoK9QS2AlYJqgpUC9IL2QXqAm0JrQSVCkoLpQuyBbUJ1gSXCkcFkwZJB1ULagVrCisFiwpGDaMNygXWCtsEawJLCaUKUgtpC3UFdgG3CFsCKwVlBbQF2gntBG0BtgimClINqQ3UBdoKWwmrBFMGKQdiB6kLsgW1ClUFJQuSDckO0gbpCmsFqwRVCikNVA2qDbUJugQ7CpsETQqqCtUK2gJdCV4ELgqaDFUNsga5BroEXQotBZUKUguoC7QLuQXaAloJSgukDdEO6AZqC20FNQWVBkoNqA3UDdoGWwWdAisGFQtKC5ULqgWuCi4JjwwnBZUGqgbWCl0FnQI=";let $f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH,$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE;function $f2f3e0e3a817edbd$var$umalquraYearStart(n){return $f2f3e0e3a817edbd$var$UMALQURA_START_DAYS+$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[n-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START]}function $f2f3e0e3a817edbd$var$umalquraMonthLength(n,e){let o=n-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START,a=1<<11-(e-1);return $f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH[o]&a?30:29}function $f2f3e0e3a817edbd$var$umalquraMonthStart(n,e){let o=$f2f3e0e3a817edbd$var$umalquraYearStart(n);for(let a=1;a<e;a++)o+=$f2f3e0e3a817edbd$var$umalquraMonthLength(n,a);return o}function $f2f3e0e3a817edbd$var$umalquraYearLength(n){return $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[n+1-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START]-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[n-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START]}class $f2f3e0e3a817edbd$export$5baab4758c231076 extends $f2f3e0e3a817edbd$export$2066795aadd37bfc{fromJulianDay(e){let o=e-$f2f3e0e3a817edbd$var$CIVIL_EPOC,a=$f2f3e0e3a817edbd$var$umalquraYearStart($f2f3e0e3a817edbd$var$UMALQURA_YEAR_START),s=$f2f3e0e3a817edbd$var$umalquraYearStart($f2f3e0e3a817edbd$var$UMALQURA_YEAR_END);if(o<a||o>s)return super.fromJulianDay(e);{let l=$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START-1,c=1,d=1;for(;d>0;){l++,d=o-$f2f3e0e3a817edbd$var$umalquraYearStart(l)+1;let u=$f2f3e0e3a817edbd$var$umalquraYearLength(l);if(d===u){c=12;break}else if(d<u){let f=$f2f3e0e3a817edbd$var$umalquraMonthLength(l,c);for(c=1;d>f;)d-=f,c++,f=$f2f3e0e3a817edbd$var$umalquraMonthLength(l,c);break}}return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,l,c,o-$f2f3e0e3a817edbd$var$umalquraMonthStart(l,c)+1)}}toJulianDay(e){return e.year<$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START||e.year>$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END?super.toJulianDay(e):$f2f3e0e3a817edbd$var$CIVIL_EPOC+$f2f3e0e3a817edbd$var$umalquraMonthStart(e.year,e.month)+(e.day-1)}getDaysInMonth(e){return e.year<$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START||e.year>$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END?super.getDaysInMonth(e):$f2f3e0e3a817edbd$var$umalquraMonthLength(e.year,e.month)}getDaysInYear(e){return e.year<$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START||e.year>$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END?super.getDaysInYear(e):$f2f3e0e3a817edbd$var$umalquraYearLength(e.year)}constructor(){if(super(),this.identifier="islamic-umalqura",$f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH||($f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH=new Uint16Array(Uint8Array.from(atob($f2f3e0e3a817edbd$var$UMALQURA_DATA),e=>e.charCodeAt(0)).buffer)),!$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE){$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE=new Uint32Array($f2f3e0e3a817edbd$var$UMALQURA_YEAR_END-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START+1);let e=0;for(let o=$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START;o<=$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END;o++){$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[o-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START]=e;for(let a=1;a<=12;a++)e+=$f2f3e0e3a817edbd$var$umalquraMonthLength(o,a)}}}}const $7c5f6fbf42389787$var$HEBREW_EPOCH=347997,$7c5f6fbf42389787$var$HOUR_PARTS=1080,$7c5f6fbf42389787$var$DAY_PARTS=24*$7c5f6fbf42389787$var$HOUR_PARTS,$7c5f6fbf42389787$var$MONTH_DAYS=29,$7c5f6fbf42389787$var$MONTH_FRACT=12*$7c5f6fbf42389787$var$HOUR_PARTS+793,$7c5f6fbf42389787$var$MONTH_PARTS=$7c5f6fbf42389787$var$MONTH_DAYS*$7c5f6fbf42389787$var$DAY_PARTS+$7c5f6fbf42389787$var$MONTH_FRACT;function $7c5f6fbf42389787$var$isLeapYear(n){return $2b4dce13dd5a17fa$export$842a2cf37af977e1(n*7+1,19)<7}function $7c5f6fbf42389787$var$hebrewDelay1(n){let e=Math.floor((235*n-234)/19),o=12084+13753*e,a=e*29+Math.floor(o/25920);return $2b4dce13dd5a17fa$export$842a2cf37af977e1(3*(a+1),7)<3&&(a+=1),a}function $7c5f6fbf42389787$var$hebrewDelay2(n){let e=$7c5f6fbf42389787$var$hebrewDelay1(n-1),o=$7c5f6fbf42389787$var$hebrewDelay1(n);return $7c5f6fbf42389787$var$hebrewDelay1(n+1)-o===356?2:o-e===382?1:0}function $7c5f6fbf42389787$var$startOfYear(n){return $7c5f6fbf42389787$var$hebrewDelay1(n)+$7c5f6fbf42389787$var$hebrewDelay2(n)}function $7c5f6fbf42389787$var$getDaysInYear(n){return $7c5f6fbf42389787$var$startOfYear(n+1)-$7c5f6fbf42389787$var$startOfYear(n)}function $7c5f6fbf42389787$var$getYearType(n){let e=$7c5f6fbf42389787$var$getDaysInYear(n);switch(e>380&&(e-=30),e){case 353:return 0;case 354:return 1;case 355:return 2}}function $7c5f6fbf42389787$var$getDaysInMonth(n,e){if(e>=6&&!$7c5f6fbf42389787$var$isLeapYear(n)&&e++,e===4||e===7||e===9||e===11||e===13)return 29;let o=$7c5f6fbf42389787$var$getYearType(n);return e===2?o===2?30:29:e===3?o===0?29:30:e===6?$7c5f6fbf42389787$var$isLeapYear(n)?30:0:30}class $7c5f6fbf42389787$export$ca405048b8fb5af{fromJulianDay(e){let o=e-$7c5f6fbf42389787$var$HEBREW_EPOCH,a=o*$7c5f6fbf42389787$var$DAY_PARTS/$7c5f6fbf42389787$var$MONTH_PARTS,s=Math.floor((19*a+234)/235)+1,l=$7c5f6fbf42389787$var$startOfYear(s),c=Math.floor(o-l);for(;c<1;)s--,l=$7c5f6fbf42389787$var$startOfYear(s),c=Math.floor(o-l);let d=1,u=0;for(;u<c;)u+=$7c5f6fbf42389787$var$getDaysInMonth(s,d),d++;d--,u-=$7c5f6fbf42389787$var$getDaysInMonth(s,d);let f=c-u;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,s,d,f)}toJulianDay(e){let o=$7c5f6fbf42389787$var$startOfYear(e.year);for(let a=1;a<e.month;a++)o+=$7c5f6fbf42389787$var$getDaysInMonth(e.year,a);return o+e.day+$7c5f6fbf42389787$var$HEBREW_EPOCH}getDaysInMonth(e){return $7c5f6fbf42389787$var$getDaysInMonth(e.year,e.month)}getMonthsInYear(e){return $7c5f6fbf42389787$var$isLeapYear(e.year)?13:12}getDaysInYear(e){return $7c5f6fbf42389787$var$getDaysInYear(e.year)}getYearsInEra(){return 9999}getEras(){return["AM"]}balanceYearMonth(e,o){o.year!==e.year&&($7c5f6fbf42389787$var$isLeapYear(o.year)&&!$7c5f6fbf42389787$var$isLeapYear(e.year)&&o.month>6?e.month--:!$7c5f6fbf42389787$var$isLeapYear(o.year)&&$7c5f6fbf42389787$var$isLeapYear(e.year)&&o.month>6&&e.month++)}constructor(){this.identifier="hebrew"}}const $b956b2d7a6cf451f$var$ETHIOPIC_EPOCH=1723856,$b956b2d7a6cf451f$var$COPTIC_EPOCH=1824665,$b956b2d7a6cf451f$var$AMETE_MIHRET_DELTA=5500;function $b956b2d7a6cf451f$var$ceToJulianDay(n,e,o,a){return n+365*e+Math.floor(e/4)+30*(o-1)+a-1}function $b956b2d7a6cf451f$var$julianDayToCE(n,e){let o=Math.floor(4*(e-n)/1461),a=1+Math.floor((e-$b956b2d7a6cf451f$var$ceToJulianDay(n,o,1,1))/30),s=e+1-$b956b2d7a6cf451f$var$ceToJulianDay(n,o,a,1);return[o,a,s]}function $b956b2d7a6cf451f$var$getLeapDay(n){return Math.floor(n%4/3)}function $b956b2d7a6cf451f$var$getDaysInMonth(n,e){return e%13!==0?30:$b956b2d7a6cf451f$var$getLeapDay(n)+5}class $b956b2d7a6cf451f$export$26ba6eab5e20cd7d{fromJulianDay(e){let[o,a,s]=$b956b2d7a6cf451f$var$julianDayToCE($b956b2d7a6cf451f$var$ETHIOPIC_EPOCH,e),l="AM";return o<=0&&(l="AA",o+=$b956b2d7a6cf451f$var$AMETE_MIHRET_DELTA),new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,l,o,a,s)}toJulianDay(e){let o=e.year;return e.era==="AA"&&(o-=$b956b2d7a6cf451f$var$AMETE_MIHRET_DELTA),$b956b2d7a6cf451f$var$ceToJulianDay($b956b2d7a6cf451f$var$ETHIOPIC_EPOCH,o,e.month,e.day)}getDaysInMonth(e){return $b956b2d7a6cf451f$var$getDaysInMonth(e.year,e.month)}getMonthsInYear(){return 13}getDaysInYear(e){return 365+$b956b2d7a6cf451f$var$getLeapDay(e.year)}getYearsInEra(e){return e.era==="AA"?9999:9991}getEras(){return["AA","AM"]}constructor(){this.identifier="ethiopic"}}class $b956b2d7a6cf451f$export$d72e0c37005a4914 extends $b956b2d7a6cf451f$export$26ba6eab5e20cd7d{fromJulianDay(e){let[o,a,s]=$b956b2d7a6cf451f$var$julianDayToCE($b956b2d7a6cf451f$var$ETHIOPIC_EPOCH,e);return o+=$b956b2d7a6cf451f$var$AMETE_MIHRET_DELTA,new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,"AA",o,a,s)}getEras(){return["AA"]}getYearsInEra(){return 9999}constructor(...e){super(...e),this.identifier="ethioaa"}}class $b956b2d7a6cf451f$export$fe6243cbe1a4b7c1 extends $b956b2d7a6cf451f$export$26ba6eab5e20cd7d{fromJulianDay(e){let[o,a,s]=$b956b2d7a6cf451f$var$julianDayToCE($b956b2d7a6cf451f$var$COPTIC_EPOCH,e),l="CE";return o<=0&&(l="BCE",o=1-o),new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,l,o,a,s)}toJulianDay(e){let o=e.year;return e.era==="BCE"&&(o=1-o),$b956b2d7a6cf451f$var$ceToJulianDay($b956b2d7a6cf451f$var$COPTIC_EPOCH,o,e.month,e.day)}getDaysInMonth(e){let o=e.year;return e.era==="BCE"&&(o=1-o),$b956b2d7a6cf451f$var$getDaysInMonth(o,e.month)}isInverseEra(e){return e.era==="BCE"}balanceDate(e){e.year<=0&&(e.era=e.era==="BCE"?"CE":"BCE",e.year=1-e.year)}getEras(){return["BCE","CE"]}getYearsInEra(e){return e.era==="BCE"?9999:9715}constructor(...e){super(...e),this.identifier="coptic"}}function $64244302c3013299$export$dd0bbc9b26defe37(n){switch(n){case"buddhist":return new $8d73d47422ca7302$export$42d20a78301dee44;case"ethiopic":return new $b956b2d7a6cf451f$export$26ba6eab5e20cd7d;case"ethioaa":return new $b956b2d7a6cf451f$export$d72e0c37005a4914;case"coptic":return new $b956b2d7a6cf451f$export$fe6243cbe1a4b7c1;case"hebrew":return new $7c5f6fbf42389787$export$ca405048b8fb5af;case"indian":return new $82c358003bdda0a8$export$39f31c639fa15726;case"islamic-civil":return new $f2f3e0e3a817edbd$export$2066795aadd37bfc;case"islamic-tbla":return new $f2f3e0e3a817edbd$export$37f0887f2f9d22f7;case"islamic-umalqura":return new $f2f3e0e3a817edbd$export$5baab4758c231076;case"japanese":return new $62225008020f0a13$export$b746ab2b60cdffbf;case"persian":return new $f3ed2e4472ae7e25$export$37fccdbfd14c5939;case"roc":return new $5f31bd6f0c8940b2$export$65e01080afcb0799;case"gregory":default:return new $3b62074eb05584b2$export$80ee6245ec4f29ec}}let $fb18d541ea1ad717$var$formatterCache=new Map;class $fb18d541ea1ad717$export$ad991b66133851cf{format(e){return this.formatter.format(e)}formatToParts(e){return this.formatter.formatToParts(e)}formatRange(e,o){if(typeof this.formatter.formatRange=="function")return this.formatter.formatRange(e,o);if(o<e)throw new RangeError("End date must be >= start date");return`${this.formatter.format(e)} \u2013 ${this.formatter.format(o)}`}formatRangeToParts(e,o){if(typeof this.formatter.formatRangeToParts=="function")return this.formatter.formatRangeToParts(e,o);if(o<e)throw new RangeError("End date must be >= start date");let a=this.formatter.formatToParts(e),s=this.formatter.formatToParts(o);return[...a.map(l=>({...l,source:"startRange"})),{type:"literal",value:" \u2013 ",source:"shared"},...s.map(l=>({...l,source:"endRange"}))]}resolvedOptions(){let e=this.formatter.resolvedOptions();return $fb18d541ea1ad717$var$hasBuggyResolvedHourCycle()&&(this.resolvedHourCycle||(this.resolvedHourCycle=$fb18d541ea1ad717$var$getResolvedHourCycle(e.locale,this.options)),e.hourCycle=this.resolvedHourCycle,e.hour12=this.resolvedHourCycle==="h11"||this.resolvedHourCycle==="h12"),e.calendar==="ethiopic-amete-alem"&&(e.calendar="ethioaa"),e}constructor(e,o={}){this.formatter=$fb18d541ea1ad717$var$getCachedDateFormatter(e,o),this.options=o}}const $fb18d541ea1ad717$var$hour12Preferences={true:{ja:"h11"},false:{}};function $fb18d541ea1ad717$var$getCachedDateFormatter(n,e={}){if(typeof e.hour12=="boolean"&&$fb18d541ea1ad717$var$hasBuggyHour12Behavior()){e={...e};let s=$fb18d541ea1ad717$var$hour12Preferences[String(e.hour12)][n.split("-")[0]],l=e.hour12?"h12":"h23";e.hourCycle=s??l,delete e.hour12}let o=n+(e?Object.entries(e).sort((s,l)=>s[0]<l[0]?-1:1).join():"");if($fb18d541ea1ad717$var$formatterCache.has(o))return $fb18d541ea1ad717$var$formatterCache.get(o);let a=new Intl.DateTimeFormat(n,e);return $fb18d541ea1ad717$var$formatterCache.set(o,a),a}let $fb18d541ea1ad717$var$_hasBuggyHour12Behavior=null;function $fb18d541ea1ad717$var$hasBuggyHour12Behavior(){return $fb18d541ea1ad717$var$_hasBuggyHour12Behavior==null&&($fb18d541ea1ad717$var$_hasBuggyHour12Behavior=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!1}).format(new Date(2020,2,3,0))==="24"),$fb18d541ea1ad717$var$_hasBuggyHour12Behavior}let $fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle=null;function $fb18d541ea1ad717$var$hasBuggyResolvedHourCycle(){return $fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle==null&&($fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle=new Intl.DateTimeFormat("fr",{hour:"numeric",hour12:!1}).resolvedOptions().hourCycle==="h12"),$fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle}function $fb18d541ea1ad717$var$getResolvedHourCycle(n,e){if(!e.timeStyle&&!e.hour)return;n=n.replace(/(-u-)?-nu-[a-zA-Z0-9]+/,""),n+=(n.includes("-u-")?"":"-u")+"-nu-latn";let o=$fb18d541ea1ad717$var$getCachedDateFormatter(n,{...e,timeZone:void 0}),a=parseInt(o.formatToParts(new Date(2020,2,3,0)).find(l=>l.type==="hour").value,10),s=parseInt(o.formatToParts(new Date(2020,2,3,23)).find(l=>l.type==="hour").value,10);if(a===0&&s===23)return"h23";if(a===24&&s===23)return"h24";if(a===0&&s===11)return"h11";if(a===12&&s===11)return"h12";throw new Error("Unexpected hour cycle result")}function N$1(n,e){const o=[];for(let a=0;a<n.length;a+=e)o.push(n.slice(a,a+e));return o}function $$1(n,e=$14e0f24ef4ac5c92$export$aa8b41735afcabd2()){return m(n)?n.toDate():n.toDate(e)}function w(n){return n instanceof $35ea8db9cb2ccb90$export$ca871e8dbb80966f}function m(n){return n instanceof $35ea8db9cb2ccb90$export$d3b7288e7994edea}function z$1(n){return w(n)||m(n)}function R$1(n){if(n instanceof Date){const e=n.getFullYear(),o=n.getMonth()+1;return new Date(e,o,0).getDate()}else return n.set({day:100}).day}function q$1(n,e){return n.compare(e)<0}function P(n,e){return n.compare(e)>0}function H(n,e,o){const a=$14e0f24ef4ac5c92$export$2061056d06d7cdf7(n,o);return e>a?n.subtract({days:a+7-e}):e===a?n:n.subtract({days:a-e})}function J(n,e,o){const a=$14e0f24ef4ac5c92$export$2061056d06d7cdf7(n,o),s=e===0?6:e-1;return a===s?n:a>s?n.add({days:7-a+s}):n.add({days:s-a})}function A(n,e){const o=[];let a=n.add({days:1});const s=e;for(;a.compare(s)<0;)o.push(a),a=a.add({days:1});return o}function y(n){const{dateObj:e,weekStartsOn:o,fixedWeeks:a,locale:s}=n,l=R$1(e),c=Array.from({length:l},(B,M)=>e.set({day:M+1})),d=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(e),u=$14e0f24ef4ac5c92$export$a2258d9c4118825c(e),f=H(d,o,s),v=J(u,o,s),b=A(f.subtract({days:1}),d),k=A(u,v.add({days:1})),x=b.length+c.length+k.length;if(a&&x<42){const B=42-x;let M=k[k.length-1];M||(M=$14e0f24ef4ac5c92$export$a2258d9c4118825c(e));const V=Array.from({length:B},(F,I)=>{const L=I+1;return M.add({days:L})});k.push(...V)}const _=b.concat(c,k),E=N$1(_,7);return{value:e,cells:_,rows:E}}function rt$1(n){const{numberOfMonths:e,dateObj:o,...a}=n,s=[];if(!e||e===1)return s.push(y({...a,dateObj:o})),s;s.push(y({...a,dateObj:o}));for(let l=1;l<e;l++){const c=o.add({months:l});s.push(y({...a,dateObj:c}))}return s}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=n=>({x:n,y:n}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(n,e,o){return max(n,min(e,o))}function evaluate(n,e){return typeof n=="function"?n(e):n}function getSide$1(n){return n.split("-")[0]}function getAlignment(n){return n.split("-")[1]}function getOppositeAxis(n){return n==="x"?"y":"x"}function getAxisLength(n){return n==="y"?"height":"width"}function getSideAxis(n){return["top","bottom"].includes(getSide$1(n))?"y":"x"}function getAlignmentAxis(n){return getOppositeAxis(getSideAxis(n))}function getAlignmentSides(n,e,o){o===void 0&&(o=!1);const a=getAlignment(n),s=getAlignmentAxis(n),l=getAxisLength(s);let c=s==="x"?a===(o?"end":"start")?"right":"left":a==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(c=getOppositePlacement(c)),[c,getOppositePlacement(c)]}function getExpandedPlacements(n){const e=getOppositePlacement(n);return[getOppositeAlignmentPlacement(n),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(n){return n.replace(/start|end/g,e=>oppositeAlignmentMap[e])}function getSideList(n,e,o){const a=["left","right"],s=["right","left"],l=["top","bottom"],c=["bottom","top"];switch(n){case"top":case"bottom":return o?e?s:a:e?a:s;case"left":case"right":return e?l:c;default:return[]}}function getOppositeAxisPlacements(n,e,o,a){const s=getAlignment(n);let l=getSideList(getSide$1(n),o==="start",a);return s&&(l=l.map(c=>c+"-"+s),e&&(l=l.concat(l.map(getOppositeAlignmentPlacement)))),l}function getOppositePlacement(n){return n.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(n){return{top:0,right:0,bottom:0,left:0,...n}}function getPaddingObject(n){return typeof n!="number"?expandPaddingObject(n):{top:n,right:n,bottom:n,left:n}}function rectToClientRect(n){const{x:e,y:o,width:a,height:s}=n;return{width:a,height:s,top:o,left:e,right:e+a,bottom:o+s,x:e,y:o}}function computeCoordsFromPlacement(n,e,o){let{reference:a,floating:s}=n;const l=getSideAxis(e),c=getAlignmentAxis(e),d=getAxisLength(c),u=getSide$1(e),f=l==="y",v=a.x+a.width/2-s.width/2,b=a.y+a.height/2-s.height/2,k=a[d]/2-s[d]/2;let x;switch(u){case"top":x={x:v,y:a.y-s.height};break;case"bottom":x={x:v,y:a.y+a.height};break;case"right":x={x:a.x+a.width,y:b};break;case"left":x={x:a.x-s.width,y:b};break;default:x={x:a.x,y:a.y}}switch(getAlignment(e)){case"start":x[c]-=k*(o&&f?-1:1);break;case"end":x[c]+=k*(o&&f?-1:1);break}return x}const computePosition$1=async(n,e,o)=>{const{placement:a="bottom",strategy:s="absolute",middleware:l=[],platform:c}=o,d=l.filter(Boolean),u=await(c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:n,floating:e,strategy:s}),{x:v,y:b}=computeCoordsFromPlacement(f,a,u),k=a,x={},_=0;for(let E=0;E<d.length;E++){const{name:B,fn:M}=d[E],{x:V,y:F,data:I,reset:L}=await M({x:v,y:b,initialPlacement:a,placement:k,strategy:s,middlewareData:x,rects:f,platform:c,elements:{reference:n,floating:e}});v=V??v,b=F??b,x={...x,[B]:{...x[B],...I}},L&&_<=50&&(_++,typeof L=="object"&&(L.placement&&(k=L.placement),L.rects&&(f=L.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:s}):L.rects),{x:v,y:b}=computeCoordsFromPlacement(f,k,u)),E=-1)}return{x:v,y:b,placement:k,strategy:s,middlewareData:x}};async function detectOverflow(n,e){var o;e===void 0&&(e={});const{x:a,y:s,platform:l,rects:c,elements:d,strategy:u}=n,{boundary:f="clippingAncestors",rootBoundary:v="viewport",elementContext:b="floating",altBoundary:k=!1,padding:x=0}=evaluate(e,n),_=getPaddingObject(x),E=d[k?b==="floating"?"reference":"floating":b],B=rectToClientRect(await l.getClippingRect({element:(o=await(l.isElement==null?void 0:l.isElement(E)))==null||o?E:E.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:f,rootBoundary:v,strategy:u})),M=b==="floating"?{x:a,y:s,width:c.floating.width,height:c.floating.height}:c.reference,V=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),F=await(l.isElement==null?void 0:l.isElement(V))?await(l.getScale==null?void 0:l.getScale(V))||{x:1,y:1}:{x:1,y:1},I=rectToClientRect(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:M,offsetParent:V,strategy:u}):M);return{top:(B.top-I.top+_.top)/F.y,bottom:(I.bottom-B.bottom+_.bottom)/F.y,left:(B.left-I.left+_.left)/F.x,right:(I.right-B.right+_.right)/F.x}}const arrow$2=n=>({name:"arrow",options:n,async fn(e){const{x:o,y:a,placement:s,rects:l,platform:c,elements:d,middlewareData:u}=e,{element:f,padding:v=0}=evaluate(n,e)||{};if(f==null)return{};const b=getPaddingObject(v),k={x:o,y:a},x=getAlignmentAxis(s),_=getAxisLength(x),E=await c.getDimensions(f),B=x==="y",M=B?"top":"left",V=B?"bottom":"right",F=B?"clientHeight":"clientWidth",I=l.reference[_]+l.reference[x]-k[x]-l.floating[_],L=k[x]-l.reference[x],U=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f));let Z=U?U[F]:0;(!Z||!await(c.isElement==null?void 0:c.isElement(U)))&&(Z=d.floating[F]||l.floating[_]);const K=I/2-L/2,j=Z/2-E[_]/2-1,W=min(b[M],j),Y=min(b[V],j),G=W,fe=Z-E[_]-Y,le=Z/2-E[_]/2+K,pe=clamp(G,le,fe),ue=!u.arrow&&getAlignment(s)!=null&&le!==pe&&l.reference[_]/2-(le<G?W:Y)-E[_]/2<0,Ne=ue?le<G?le-G:le-fe:0;return{[x]:k[x]+Ne,data:{[x]:pe,centerOffset:le-pe-Ne,...ue&&{alignmentOffset:Ne}},reset:ue}}}),flip$1=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var o,a;const{placement:s,middlewareData:l,rects:c,initialPlacement:d,platform:u,elements:f}=e,{mainAxis:v=!0,crossAxis:b=!0,fallbackPlacements:k,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:E=!0,...B}=evaluate(n,e);if((o=l.arrow)!=null&&o.alignmentOffset)return{};const M=getSide$1(s),V=getSideAxis(d),F=getSide$1(d)===d,I=await(u.isRTL==null?void 0:u.isRTL(f.floating)),L=k||(F||!E?[getOppositePlacement(d)]:getExpandedPlacements(d)),U=_!=="none";!k&&U&&L.push(...getOppositeAxisPlacements(d,E,_,I));const Z=[d,...L],K=await detectOverflow(e,B),j=[];let W=((a=l.flip)==null?void 0:a.overflows)||[];if(v&&j.push(K[M]),b){const le=getAlignmentSides(s,c,I);j.push(K[le[0]],K[le[1]])}if(W=[...W,{placement:s,overflows:j}],!j.every(le=>le<=0)){var Y,G;const le=(((Y=l.flip)==null?void 0:Y.index)||0)+1,pe=Z[le];if(pe)return{data:{index:le,overflows:W},reset:{placement:pe}};let ue=(G=W.filter(Ne=>Ne.overflows[0]<=0).sort((Ne,Ve)=>Ne.overflows[1]-Ve.overflows[1])[0])==null?void 0:G.placement;if(!ue)switch(x){case"bestFit":{var fe;const Ne=(fe=W.filter(Ve=>{if(U){const Ze=getSideAxis(Ve.placement);return Ze===V||Ze==="y"}return!0}).map(Ve=>[Ve.placement,Ve.overflows.filter(Ze=>Ze>0).reduce((Ze,We)=>Ze+We,0)]).sort((Ve,Ze)=>Ve[1]-Ze[1])[0])==null?void 0:fe[0];Ne&&(ue=Ne);break}case"initialPlacement":ue=d;break}if(s!==ue)return{reset:{placement:ue}}}return{}}}};function getSideOffsets(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function isAnySideFullyClipped(n){return sides.some(e=>n[e]>=0)}const hide$1=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:o}=e,{strategy:a="referenceHidden",...s}=evaluate(n,e);switch(a){case"referenceHidden":{const l=await detectOverflow(e,{...s,elementContext:"reference"}),c=getSideOffsets(l,o.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:isAnySideFullyClipped(c)}}}case"escaped":{const l=await detectOverflow(e,{...s,altBoundary:!0}),c=getSideOffsets(l,o.floating);return{data:{escapedOffsets:c,escaped:isAnySideFullyClipped(c)}}}default:return{}}}}};async function convertValueToCoords(n,e){const{placement:o,platform:a,elements:s}=n,l=await(a.isRTL==null?void 0:a.isRTL(s.floating)),c=getSide$1(o),d=getAlignment(o),u=getSideAxis(o)==="y",f=["left","top"].includes(c)?-1:1,v=l&&u?-1:1,b=evaluate(e,n);let{mainAxis:k,crossAxis:x,alignmentAxis:_}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return d&&typeof _=="number"&&(x=d==="end"?_*-1:_),u?{x:x*v,y:k*f}:{x:k*f,y:x*v}}const offset$1=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var o,a;const{x:s,y:l,placement:c,middlewareData:d}=e,u=await convertValueToCoords(e,n);return c===((o=d.offset)==null?void 0:o.placement)&&(a=d.arrow)!=null&&a.alignmentOffset?{}:{x:s+u.x,y:l+u.y,data:{...u,placement:c}}}}},shift$2=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:o,y:a,placement:s}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:d={fn:B=>{let{x:M,y:V}=B;return{x:M,y:V}}},...u}=evaluate(n,e),f={x:o,y:a},v=await detectOverflow(e,u),b=getSideAxis(getSide$1(s)),k=getOppositeAxis(b);let x=f[k],_=f[b];if(l){const B=k==="y"?"top":"left",M=k==="y"?"bottom":"right",V=x+v[B],F=x-v[M];x=clamp(V,x,F)}if(c){const B=b==="y"?"top":"left",M=b==="y"?"bottom":"right",V=_+v[B],F=_-v[M];_=clamp(V,_,F)}const E=d.fn({...e,[k]:x,[b]:_});return{...E,data:{x:E.x-o,y:E.y-a,enabled:{[k]:l,[b]:c}}}}}},limitShift$1=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:o,y:a,placement:s,rects:l,middlewareData:c}=e,{offset:d=0,mainAxis:u=!0,crossAxis:f=!0}=evaluate(n,e),v={x:o,y:a},b=getSideAxis(s),k=getOppositeAxis(b);let x=v[k],_=v[b];const E=evaluate(d,e),B=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(u){const F=k==="y"?"height":"width",I=l.reference[k]-l.floating[F]+B.mainAxis,L=l.reference[k]+l.reference[F]-B.mainAxis;x<I?x=I:x>L&&(x=L)}if(f){var M,V;const F=k==="y"?"width":"height",I=["top","left"].includes(getSide$1(s)),L=l.reference[b]-l.floating[F]+(I&&((M=c.offset)==null?void 0:M[b])||0)+(I?0:B.crossAxis),U=l.reference[b]+l.reference[F]+(I?0:((V=c.offset)==null?void 0:V[b])||0)-(I?B.crossAxis:0);_<L?_=L:_>U&&(_=U)}return{[k]:x,[b]:_}}}},size$1=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var o,a;const{placement:s,rects:l,platform:c,elements:d}=e,{apply:u=()=>{},...f}=evaluate(n,e),v=await detectOverflow(e,f),b=getSide$1(s),k=getAlignment(s),x=getSideAxis(s)==="y",{width:_,height:E}=l.floating;let B,M;b==="top"||b==="bottom"?(B=b,M=k===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(M=b,B=k==="end"?"top":"bottom");const V=E-v.top-v.bottom,F=_-v.left-v.right,I=min(E-v[B],V),L=min(_-v[M],F),U=!e.middlewareData.shift;let Z=I,K=L;if((o=e.middlewareData.shift)!=null&&o.enabled.x&&(K=F),(a=e.middlewareData.shift)!=null&&a.enabled.y&&(Z=V),U&&!k){const W=max(v.left,0),Y=max(v.right,0),G=max(v.top,0),fe=max(v.bottom,0);x?K=_-2*(W!==0||Y!==0?W+Y:max(v.left,v.right)):Z=E-2*(G!==0||fe!==0?G+fe:max(v.top,v.bottom))}await u({...e,availableWidth:K,availableHeight:Z});const j=await c.getDimensions(d.floating);return _!==j.width||E!==j.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(n){return isNode(n)?(n.nodeName||"").toLowerCase():"#document"}function getWindow(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement(n){var e;return(e=(isNode(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function isNode(n){return hasWindow()?n instanceof Node||n instanceof getWindow(n).Node:!1}function isElement(n){return hasWindow()?n instanceof Element||n instanceof getWindow(n).Element:!1}function isHTMLElement(n){return hasWindow()?n instanceof HTMLElement||n instanceof getWindow(n).HTMLElement:!1}function isShadowRoot(n){return!hasWindow()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof getWindow(n).ShadowRoot}function isOverflowElement(n){const{overflow:e,overflowX:o,overflowY:a,display:s}=getComputedStyle$1(n);return/auto|scroll|overlay|hidden|clip/.test(e+a+o)&&!["inline","contents"].includes(s)}function isTableElement(n){return["table","td","th"].includes(getNodeName(n))}function isTopLayer(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function isContainingBlock(n){const e=isWebKit(),o=isElement(n)?getComputedStyle$1(n):n;return["transform","translate","scale","rotate","perspective"].some(a=>o[a]?o[a]!=="none":!1)||(o.containerType?o.containerType!=="normal":!1)||!e&&(o.backdropFilter?o.backdropFilter!=="none":!1)||!e&&(o.filter?o.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(o.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(o.contain||"").includes(a))}function getContainingBlock(n){let e=getParentNode(n);for(;isHTMLElement(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;if(isTopLayer(e))return null;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(n){return["html","body","#document"].includes(getNodeName(n))}function getComputedStyle$1(n){return getWindow(n).getComputedStyle(n)}function getNodeScroll(n){return isElement(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function getParentNode(n){if(getNodeName(n)==="html")return n;const e=n.assignedSlot||n.parentNode||isShadowRoot(n)&&n.host||getDocumentElement(n);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(n){const e=getParentNode(n);return isLastTraversableNode(e)?n.ownerDocument?n.ownerDocument.body:n.body:isHTMLElement(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(n,e,o){var a;e===void 0&&(e=[]),o===void 0&&(o=!0);const s=getNearestOverflowAncestor(n),l=s===((a=n.ownerDocument)==null?void 0:a.body),c=getWindow(s);if(l){const d=getFrameElement(c);return e.concat(c,c.visualViewport||[],isOverflowElement(s)?s:[],d&&o?getOverflowAncestors(d):[])}return e.concat(s,getOverflowAncestors(s,[],o))}function getFrameElement(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function getCssDimensions(n){const e=getComputedStyle$1(n);let o=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const s=isHTMLElement(n),l=s?n.offsetWidth:o,c=s?n.offsetHeight:a,d=round(o)!==l||round(a)!==c;return d&&(o=l,a=c),{width:o,height:a,$:d}}function unwrapElement$1(n){return isElement(n)?n:n.contextElement}function getScale$1(n){const e=unwrapElement$1(n);if(!isHTMLElement(e))return createCoords(1);const o=e.getBoundingClientRect(),{width:a,height:s,$:l}=getCssDimensions(e);let c=(l?round(o.width):o.width)/a,d=(l?round(o.height):o.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const noOffsets=createCoords(0);function getVisualOffsets(n){const e=getWindow(n);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(n,e,o){return e===void 0&&(e=!1),!o||e&&o!==getWindow(n)?!1:e}function getBoundingClientRect(n,e,o,a){e===void 0&&(e=!1),o===void 0&&(o=!1);const s=n.getBoundingClientRect(),l=unwrapElement$1(n);let c=createCoords(1);e&&(a?isElement(a)&&(c=getScale$1(a)):c=getScale$1(n));const d=shouldAddVisualOffsets(l,o,a)?getVisualOffsets(l):createCoords(0);let u=(s.left+d.x)/c.x,f=(s.top+d.y)/c.y,v=s.width/c.x,b=s.height/c.y;if(l){const k=getWindow(l),x=a&&isElement(a)?getWindow(a):a;let _=k,E=getFrameElement(_);for(;E&&a&&x!==_;){const B=getScale$1(E),M=E.getBoundingClientRect(),V=getComputedStyle$1(E),F=M.left+(E.clientLeft+parseFloat(V.paddingLeft))*B.x,I=M.top+(E.clientTop+parseFloat(V.paddingTop))*B.y;u*=B.x,f*=B.y,v*=B.x,b*=B.y,u+=F,f+=I,_=getWindow(E),E=getFrameElement(_)}}return rectToClientRect({width:v,height:b,x:u,y:f})}function getWindowScrollBarX(n,e){const o=getNodeScroll(n).scrollLeft;return e?e.left+o:getBoundingClientRect(getDocumentElement(n)).left+o}function getHTMLOffset(n,e,o){o===void 0&&(o=!1);const a=n.getBoundingClientRect(),s=a.left+e.scrollLeft-(o?0:getWindowScrollBarX(n,a)),l=a.top+e.scrollTop;return{x:s,y:l}}function convertOffsetParentRelativeRectToViewportRelativeRect(n){let{elements:e,rect:o,offsetParent:a,strategy:s}=n;const l=s==="fixed",c=getDocumentElement(a),d=e?isTopLayer(e.floating):!1;if(a===c||d&&l)return o;let u={scrollLeft:0,scrollTop:0},f=createCoords(1);const v=createCoords(0),b=isHTMLElement(a);if((b||!b&&!l)&&((getNodeName(a)!=="body"||isOverflowElement(c))&&(u=getNodeScroll(a)),isHTMLElement(a))){const x=getBoundingClientRect(a);f=getScale$1(a),v.x=x.x+a.clientLeft,v.y=x.y+a.clientTop}const k=c&&!b&&!l?getHTMLOffset(c,u,!0):createCoords(0);return{width:o.width*f.x,height:o.height*f.y,x:o.x*f.x-u.scrollLeft*f.x+v.x+k.x,y:o.y*f.y-u.scrollTop*f.y+v.y+k.y}}function getClientRects(n){return Array.from(n.getClientRects())}function getDocumentRect(n){const e=getDocumentElement(n),o=getNodeScroll(n),a=n.ownerDocument.body,s=max(e.scrollWidth,e.clientWidth,a.scrollWidth,a.clientWidth),l=max(e.scrollHeight,e.clientHeight,a.scrollHeight,a.clientHeight);let c=-o.scrollLeft+getWindowScrollBarX(n);const d=-o.scrollTop;return getComputedStyle$1(a).direction==="rtl"&&(c+=max(e.clientWidth,a.clientWidth)-s),{width:s,height:l,x:c,y:d}}function getViewportRect(n,e){const o=getWindow(n),a=getDocumentElement(n),s=o.visualViewport;let l=a.clientWidth,c=a.clientHeight,d=0,u=0;if(s){l=s.width,c=s.height;const f=isWebKit();(!f||f&&e==="fixed")&&(d=s.offsetLeft,u=s.offsetTop)}return{width:l,height:c,x:d,y:u}}function getInnerBoundingClientRect(n,e){const o=getBoundingClientRect(n,!0,e==="fixed"),a=o.top+n.clientTop,s=o.left+n.clientLeft,l=isHTMLElement(n)?getScale$1(n):createCoords(1),c=n.clientWidth*l.x,d=n.clientHeight*l.y,u=s*l.x,f=a*l.y;return{width:c,height:d,x:u,y:f}}function getClientRectFromClippingAncestor(n,e,o){let a;if(e==="viewport")a=getViewportRect(n,o);else if(e==="document")a=getDocumentRect(getDocumentElement(n));else if(isElement(e))a=getInnerBoundingClientRect(e,o);else{const s=getVisualOffsets(n);a={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return rectToClientRect(a)}function hasFixedPositionAncestor(n,e){const o=getParentNode(n);return o===e||!isElement(o)||isLastTraversableNode(o)?!1:getComputedStyle$1(o).position==="fixed"||hasFixedPositionAncestor(o,e)}function getClippingElementAncestors(n,e){const o=e.get(n);if(o)return o;let a=getOverflowAncestors(n,[],!1).filter(d=>isElement(d)&&getNodeName(d)!=="body"),s=null;const l=getComputedStyle$1(n).position==="fixed";let c=l?getParentNode(n):n;for(;isElement(c)&&!isLastTraversableNode(c);){const d=getComputedStyle$1(c),u=isContainingBlock(c);!u&&d.position==="fixed"&&(s=null),(l?!u&&!s:!u&&d.position==="static"&&s&&["absolute","fixed"].includes(s.position)||isOverflowElement(c)&&!u&&hasFixedPositionAncestor(n,c))?a=a.filter(f=>f!==c):s=d,c=getParentNode(c)}return e.set(n,a),a}function getClippingRect(n){let{element:e,boundary:o,rootBoundary:a,strategy:s}=n;const l=[...o==="clippingAncestors"?isTopLayer(e)?[]:getClippingElementAncestors(e,this._c):[].concat(o),a],c=l[0],d=l.reduce((u,f)=>{const v=getClientRectFromClippingAncestor(e,f,s);return u.top=max(v.top,u.top),u.right=min(v.right,u.right),u.bottom=min(v.bottom,u.bottom),u.left=max(v.left,u.left),u},getClientRectFromClippingAncestor(e,c,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function getDimensions(n){const{width:e,height:o}=getCssDimensions(n);return{width:e,height:o}}function getRectRelativeToOffsetParent(n,e,o){const a=isHTMLElement(e),s=getDocumentElement(e),l=o==="fixed",c=getBoundingClientRect(n,!0,l,e);let d={scrollLeft:0,scrollTop:0};const u=createCoords(0);if(a||!a&&!l)if((getNodeName(e)!=="body"||isOverflowElement(s))&&(d=getNodeScroll(e)),a){const k=getBoundingClientRect(e,!0,l,e);u.x=k.x+e.clientLeft,u.y=k.y+e.clientTop}else s&&(u.x=getWindowScrollBarX(s));const f=s&&!a&&!l?getHTMLOffset(s,d):createCoords(0),v=c.left+d.scrollLeft-u.x-f.x,b=c.top+d.scrollTop-u.y-f.y;return{x:v,y:b,width:c.width,height:c.height}}function isStaticPositioned(n){return getComputedStyle$1(n).position==="static"}function getTrueOffsetParent(n,e){if(!isHTMLElement(n)||getComputedStyle$1(n).position==="fixed")return null;if(e)return e(n);let o=n.offsetParent;return getDocumentElement(n)===o&&(o=o.ownerDocument.body),o}function getOffsetParent(n,e){const o=getWindow(n);if(isTopLayer(n))return o;if(!isHTMLElement(n)){let s=getParentNode(n);for(;s&&!isLastTraversableNode(s);){if(isElement(s)&&!isStaticPositioned(s))return s;s=getParentNode(s)}return o}let a=getTrueOffsetParent(n,e);for(;a&&isTableElement(a)&&isStaticPositioned(a);)a=getTrueOffsetParent(a,e);return a&&isLastTraversableNode(a)&&isStaticPositioned(a)&&!isContainingBlock(a)?o:a||getContainingBlock(n)||o}const getElementRects=async function(n){const e=this.getOffsetParent||getOffsetParent,o=this.getDimensions,a=await o(n.floating);return{reference:getRectRelativeToOffsetParent(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function isRTL(n){return getComputedStyle$1(n).direction==="rtl"}const platform$2={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale:getScale$1,isElement,isRTL};function rectsAreEqual(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function observeMove(n,e){let o=null,a;const s=getDocumentElement(n);function l(){var d;clearTimeout(a),(d=o)==null||d.disconnect(),o=null}function c(d,u){d===void 0&&(d=!1),u===void 0&&(u=1),l();const f=n.getBoundingClientRect(),{left:v,top:b,width:k,height:x}=f;if(d||e(),!k||!x)return;const _=floor(b),E=floor(s.clientWidth-(v+k)),B=floor(s.clientHeight-(b+x)),M=floor(v),V={rootMargin:-_+"px "+-E+"px "+-B+"px "+-M+"px",threshold:max(0,min(1,u))||1};let F=!0;function I(L){const U=L[0].intersectionRatio;if(U!==u){if(!F)return c();U?c(!1,U):a=setTimeout(()=>{c(!1,1e-7)},1e3)}U===1&&!rectsAreEqual(f,n.getBoundingClientRect())&&c(),F=!1}try{o=new IntersectionObserver(I,{...V,root:s.ownerDocument})}catch{o=new IntersectionObserver(I,V)}o.observe(n)}return c(!0),l}function autoUpdate(n,e,o,a){a===void 0&&(a={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:u=!1}=a,f=unwrapElement$1(n),v=s||l?[...f?getOverflowAncestors(f):[],...getOverflowAncestors(e)]:[];v.forEach(M=>{s&&M.addEventListener("scroll",o,{passive:!0}),l&&M.addEventListener("resize",o)});const b=f&&d?observeMove(f,o):null;let k=-1,x=null;c&&(x=new ResizeObserver(M=>{let[V]=M;V&&V.target===f&&x&&(x.unobserve(e),cancelAnimationFrame(k),k=requestAnimationFrame(()=>{var F;(F=x)==null||F.observe(e)})),o()}),f&&!u&&x.observe(f),x.observe(e));let _,E=u?getBoundingClientRect(n):null;u&&B();function B(){const M=getBoundingClientRect(n);E&&!rectsAreEqual(E,M)&&o(),E=M,_=requestAnimationFrame(B)}return o(),()=>{var M;v.forEach(V=>{s&&V.removeEventListener("scroll",o),l&&V.removeEventListener("resize",o)}),b==null||b(),(M=x)==null||M.disconnect(),x=null,u&&cancelAnimationFrame(_)}}const offset=offset$1,shift$1=shift$2,flip=flip$1,size=size$1,hide=hide$1,arrow$1=arrow$2,limitShift=limitShift$1,computePosition=(n,e,o)=>{const a=new Map,s={platform:platform$2,...o},l={...s.platform,_c:a};return computePosition$1(n,e,{...s,platform:l})};function isComponentPublicInstance(n){return n!=null&&typeof n=="object"&&"$el"in n}function unwrapElement(n){if(isComponentPublicInstance(n)){const e=n.$el;return isNode(e)&&getNodeName(e)==="#comment"?null:e}return n}function toValue(n){return typeof n=="function"?n():unref(n)}function arrow(n){return{name:"arrow",options:n,fn(e){const o=unwrapElement(toValue(n.element));return o==null?{}:arrow$1({element:o,padding:n.padding}).fn(e)}}}function getDPR(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(n,e){const o=getDPR(n);return Math.round(e*o)/o}function useFloating(n,e,o){o===void 0&&(o={});const a=o.whileElementsMounted,s=computed(()=>{var Z;return(Z=toValue(o.open))!=null?Z:!0}),l=computed(()=>toValue(o.middleware)),c=computed(()=>{var Z;return(Z=toValue(o.placement))!=null?Z:"bottom"}),d=computed(()=>{var Z;return(Z=toValue(o.strategy))!=null?Z:"absolute"}),u=computed(()=>{var Z;return(Z=toValue(o.transform))!=null?Z:!0}),f=computed(()=>unwrapElement(n.value)),v=computed(()=>unwrapElement(e.value)),b=ref(0),k=ref(0),x=ref(d.value),_=ref(c.value),E=shallowRef({}),B=ref(!1),M=computed(()=>{const Z={position:x.value,left:"0",top:"0"};if(!v.value)return Z;const K=roundByDPR(v.value,b.value),j=roundByDPR(v.value,k.value);return u.value?{...Z,transform:"translate("+K+"px, "+j+"px)",...getDPR(v.value)>=1.5&&{willChange:"transform"}}:{position:x.value,left:K+"px",top:j+"px"}});let V;function F(){if(f.value==null||v.value==null)return;const Z=s.value;computePosition(f.value,v.value,{middleware:l.value,placement:c.value,strategy:d.value}).then(K=>{b.value=K.x,k.value=K.y,x.value=K.strategy,_.value=K.placement,E.value=K.middlewareData,B.value=Z!==!1})}function I(){typeof V=="function"&&(V(),V=void 0)}function L(){if(I(),a===void 0){F();return}if(f.value!=null&&v.value!=null){V=a(f.value,v.value,F);return}}function U(){s.value||(B.value=!1)}return watch([l,c,d,s],F,{flush:"sync"}),watch([f,v],L,{flush:"sync"}),watch(s,U,{flush:"sync"}),getCurrentScope()&&onScopeDispose(I),{x:shallowReadonly(b),y:shallowReadonly(k),strategy:shallowReadonly(x),placement:shallowReadonly(_),middlewareData:shallowReadonly(E),isPositioned:shallowReadonly(B),floatingStyles:M,update:F}}function Q$1(n,e){const o=typeof n=="string"&&!e?`${n}Context`:e,a=Symbol(o);return[s=>{const l=inject(a,s);if(l||l===null)return l;throw new Error(`Injection \`${a.toString()}\` not found. Component must be used within ${Array.isArray(n)?`one of the following components: ${n.join(", ")}`:`\`${n}\``}`)},s=>(provide(a,s),s)]}function Wt(n,e,o){const a=o.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:o});e&&a.addEventListener(n,e,{once:!0}),a.dispatchEvent(s)}function jt(n,e=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY){return Math.min(o,Math.max(e,n))}function vt$1(n){return n==null}function qt(n){const{defaultValue:e,defaultPlaceholder:o,granularity:a="day",locale:s="en"}=n;if(Array.isArray(e)&&e.length)return e.at(-1).copy();if(e&&!Array.isArray(e))return e.copy();if(o)return o.copy();const l=new Date,c=l.getFullYear(),d=l.getMonth()+1,u=l.getDate(),f=["hour","minute","second"],v=new $fb18d541ea1ad717$export$ad991b66133851cf(s),b=$64244302c3013299$export$dd0bbc9b26defe37(v.resolvedOptions().calendar);return f.includes(a??"day")?$11d87f3f76e88657$export$b4a036af3fc0b032(new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(c,d,u,0,0,0),b):$11d87f3f76e88657$export$b4a036af3fc0b032(new $35ea8db9cb2ccb90$export$99faa760c7908e4f(c,d,u),b)}function xl(n){const e=n.querySelector("[data-selected]");if(e)return e.focus();const o=n.querySelector("[data-today]");if(o)return o.focus();const a=n.querySelector("[data-radix-vue-calendar-day]");if(a)return a.focus()}function ei(n,e){var o;const a=shallowRef();return watchEffect(()=>{a.value=n()},{...e,flush:(o=void 0)!=null?o:"sync"}),readonly(a)}function yt(n){return getCurrentScope()?(onScopeDispose(n),!0):!1}function ia(){const n=new Set,e=o=>{n.delete(o)};return{on:o=>{n.add(o);const a=()=>e(o);return yt(a),{off:a}},off:e,trigger:(...o)=>Promise.all(Array.from(n).map(a=>a(...o)))}}function ai(n){let e=!1,o;const a=effectScope(!0);return(...s)=>(e||(o=a.run(()=>n(...s)),e=!0),o)}function Sl(n){let e=0,o,a;const s=()=>{e-=1,a&&e<=0&&(a.stop(),o=void 0,a=void 0)};return(...l)=>(e+=1,o||(a=effectScope(!0),o=a.run(()=>n(...l))),yt(s),o)}function Ke(n){return typeof n=="function"?n():unref(n)}const Ye=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const oi=n=>typeof n<"u",si=Object.prototype.toString,ri=n=>si.call(n)==="[object Object]",Va=()=>{},Ko=ii();function ii(){var n,e;return Ye&&((n=window==null?void 0:window.navigator)==null?void 0:n.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Pl(n,e){function o(...a){return new Promise((s,l)=>{Promise.resolve(n(()=>e.apply(this,a),{fn:e,thisArg:this,args:a})).then(s).catch(l)})}return o}function ui(n,e={}){let o,a,s=Va;const l=c=>{clearTimeout(c),s(),s=Va};return c=>{const d=Ke(n),u=Ke(e.maxWait);return o&&l(o),d<=0||u!==void 0&&u<=0?(a&&(l(a),a=null),Promise.resolve(c())):new Promise((f,v)=>{s=e.rejectOnCancel?v:f,u&&!a&&(a=setTimeout(()=>{o&&l(o),a=null,f(c())},u)),o=setTimeout(()=>{a&&l(a),a=null,f(c())},d)})}}function $l(n){return getCurrentInstance()}function It(n,e=1e4){return customRef((o,a)=>{let s=Ke(n),l;const c=()=>setTimeout(()=>{s=Ke(n),a()},Ke(e));return yt(()=>{clearTimeout(l)}),{get(){return o(),s},set(d){s=d,a(),clearTimeout(l),l=c()}}})}function Hn(n,e=200,o={}){return Pl(ui(e,o),n)}function pi(n,e){$l()&&onBeforeUnmount(n,e)}function Wn(n,e,o={}){const{immediate:a=!0}=o,s=ref(!1);let l=null;function c(){l&&(clearTimeout(l),l=null)}function d(){s.value=!1,c()}function u(...f){c(),s.value=!0,l=setTimeout(()=>{s.value=!1,l=null,n(...f)},Ke(e))}return a&&(s.value=!0,Ye&&u()),yt(d),{isPending:readonly(s),start:u,stop:d}}function mi(n=1e3,e={}){const{controls:o=!1,callback:a}=e,s=Wn(a??Va,n,e),l=computed(()=>!s.isPending.value);return o?{ready:l,...s}:l}function hi(n,e,o){const a=watch(n,(...s)=>(nextTick(()=>a()),e(...s)),o);return a}function $e(n){var e;const o=Ke(n);return(e=o==null?void 0:o.$el)!=null?e:o}const Tt=Ye?window:void 0;function Le(...n){let e,o,a,s;if(typeof n[0]=="string"||Array.isArray(n[0])?([o,a,s]=n,e=Tt):[e,o,a,s]=n,!e)return Va;Array.isArray(o)||(o=[o]),Array.isArray(a)||(a=[a]);const l=[],c=()=>{l.forEach(v=>v()),l.length=0},d=(v,b,k,x)=>(v.addEventListener(b,k,x),()=>v.removeEventListener(b,k,x)),u=watch(()=>[$e(e),Ke(s)],([v,b])=>{if(c(),!v)return;const k=ri(b)?{...b}:b;l.push(...o.flatMap(x=>a.map(_=>d(v,x,_,k))))},{immediate:!0,flush:"post"}),f=()=>{u(),c()};return yt(f),f}function yi(n){return typeof n=="function"?n:typeof n=="string"?e=>e.key===n:Array.isArray(n)?e=>n.includes(e.key):()=>!0}function jn(...n){let e,o,a={};n.length===3?(e=n[0],o=n[1],a=n[2]):n.length===2?typeof n[1]=="object"?(e=!0,o=n[0],a=n[1]):(e=n[0],o=n[1]):(e=!0,o=n[0]);const{target:s=Tt,eventName:l="keydown",passive:c=!1,dedupe:d=!1}=a,u=yi(e);return Le(s,l,f=>{f.repeat&&Ke(d)||u(f)&&o(f)},c)}function ja(){const n=ref(!1),e=getCurrentInstance();return e&&onMounted(()=>{n.value=!0},e),n}function Bl(n){const e=ja();return computed(()=>(e.value,!!n()))}function Tl(n,e={}){const{immediate:o=!0,fpsLimit:a=void 0,window:s=Tt}=e,l=ref(!1),c=a?1e3/a:null;let d=0,u=null;function f(k){if(!l.value||!s)return;d||(d=k);const x=k-d;if(c&&x<c){u=s.requestAnimationFrame(f);return}d=k,n({delta:x,timestamp:k}),u=s.requestAnimationFrame(f)}function v(){!l.value&&s&&(l.value=!0,d=0,u=s.requestAnimationFrame(f))}function b(){l.value=!1,u!=null&&s&&(s.cancelAnimationFrame(u),u=null)}return o&&v(),yt(b),{isActive:readonly(l),pause:b,resume:v}}function bi(n){return JSON.parse(JSON.stringify(n))}function Je(n,e,o={}){const{window:a=Tt,...s}=o;let l;const c=Bl(()=>a&&"ResizeObserver"in a),d=()=>{l&&(l.disconnect(),l=void 0)},u=computed(()=>Array.isArray(n)?n.map(b=>$e(b)):[$e(n)]),f=watch(u,b=>{if(d(),c.value&&a){l=new ResizeObserver(e);for(const k of b)k&&l.observe(k,s)}},{immediate:!0,flush:"post"}),v=()=>{d(),f()};return yt(v),{isSupported:c,stop:v}}function ne$1(n,e,o,a={}){var s,l,c;const{clone:d=!1,passive:u=!1,eventName:f,deep:v=!1,defaultValue:b,shouldEmit:k}=a,x=getCurrentInstance(),_=o||(x==null?void 0:x.emit)||((s=x==null?void 0:x.$emit)==null?void 0:s.bind(x))||((c=(l=x==null?void 0:x.proxy)==null?void 0:l.$emit)==null?void 0:c.bind(x==null?void 0:x.proxy));let E=f;e||(e="modelValue"),E=E||`update:${e.toString()}`;const B=F=>d?typeof d=="function"?d(F):bi(F):F,M=()=>oi(n[e])?B(n[e]):b,V=F=>{k?k(F)&&_(E,F):_(E,F)};if(u){const F=M(),I=ref(F);let L=!1;return watch(()=>n[e],U=>{L||(L=!0,I.value=B(U),nextTick(()=>L=!1))}),watch(I,U=>{!L&&(U!==n[e]||v)&&V(U)},{deep:v}),I}else return computed({get(){return M()},set(F){V(F)}})}function Ua(n){return n?n.flatMap(e=>e.type===Fragment$1?Ua(e.children):[e]):[]}const _i$1=["INPUT","TEXTAREA"];function Rt(n,e,o,a={}){if(!e||a.enableIgnoredElement&&_i$1.includes(e.nodeName))return null;const{arrowKeyOptions:s="both",attributeName:l="[data-radix-vue-collection-item]",itemsArray:c=[],loop:d=!0,dir:u="ltr",preventScroll:f=!0,focus:v=!1}=a,[b,k,x,_,E,B]=[n.key==="ArrowRight",n.key==="ArrowLeft",n.key==="ArrowUp",n.key==="ArrowDown",n.key==="Home",n.key==="End"],M=x||_,V=b||k;if(!E&&!B&&(!M&&!V||s==="vertical"&&V||s==="horizontal"&&M))return null;const F=o?Array.from(o.querySelectorAll(l)):c;if(!F.length)return null;f&&n.preventDefault();let I=null;return V||M?I=Al(F,e,{goForward:M?_:u==="ltr"?b:k,loop:d}):E?I=F.at(0)||null:B&&(I=F.at(-1)||null),v&&(I==null||I.focus()),I}function Al(n,e,o,a=n.length){if(--a===0)return null;const s=n.indexOf(e),l=o.goForward?s+1:s-1;if(!o.loop&&(l<0||l>=n.length))return null;const c=(l+n.length)%n.length,d=n[c];return d?d.hasAttribute("disabled")&&d.getAttribute("disabled")!=="false"?Al(n,d,o,a):d:null}function gn(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in n?!1:Symbol.toStringTag in n?Object.prototype.toString.call(n)==="[object Module]":!0}function Pn(n,e,o=".",a){if(!gn(e))return Pn(n,{},o);const s=Object.assign({},e);for(const l in n){if(l==="__proto__"||l==="constructor")continue;const c=n[l];c!=null&&(Array.isArray(c)&&Array.isArray(s[l])?s[l]=[...c,...s[l]]:gn(c)&&gn(s[l])?s[l]=Pn(c,s[l],(o?`${o}.`:"")+l.toString()):s[l]=c)}return s}function xi(n){return(...e)=>e.reduce((o,a)=>Pn(o,a,""),{})}const Si=xi(),[Ga,Ei]=Q$1("ConfigProvider");let Pi="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Di=(n=21)=>{let e="",o=n;for(;o--;)e+=Pi[Math.random()*64|0];return e};const $i=Sl(()=>{const n=ref(new Map),e=ref(),o=computed(()=>{for(const c of n.value.values())if(c)return!0;return!1}),a=Ga({scrollBody:ref(!0)});let s=null;const l=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.body.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",Ko&&(s==null||s()),e.value=void 0};return watch(o,(c,d)=>{var u;if(!Ye)return;if(!c){d&&l();return}e.value===void 0&&(e.value=document.body.style.overflow);const f=window.innerWidth-document.documentElement.clientWidth,v={padding:f,margin:0},b=(u=a.scrollBody)!=null&&u.value?typeof a.scrollBody.value=="object"?Si({padding:a.scrollBody.value.padding===!0?f:a.scrollBody.value.padding,margin:a.scrollBody.value.margin===!0?f:a.scrollBody.value.margin},v):v:{padding:0,margin:0};f>0&&(document.body.style.paddingRight=typeof b.padding=="number"?`${b.padding}px`:String(b.padding),document.body.style.marginRight=typeof b.margin=="number"?`${b.margin}px`:String(b.margin),document.body.style.setProperty("--scrollbar-width",`${f}px`),document.body.style.overflow="hidden"),Ko&&(s=Le(document,"touchmove",k=>Bi(k),{passive:!1})),nextTick(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),n});function ha(n){const e=Di(6),o=$i();o.value.set(e,n??!1);const a=computed({get:()=>o.value.get(e)??!1,set:s=>o.value.set(e,s)});return pi(()=>{o.value.delete(e)}),a}function Ol(n){const e=window.getComputedStyle(n);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&n.clientWidth<n.scrollWidth||e.overflowY==="auto"&&n.clientHeight<n.scrollHeight)return!0;{const o=n.parentNode;return!o||o.tagName==="BODY"?!1:Ol(o)}}function Bi(n){const e=n||window.event,o=e.target;return o instanceof Element&&Ol(o)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}const Ii="data-radix-vue-collection-item";function Me(n,e=Ii){const o=Symbol();return{createCollection:a=>{const s=ref([]);function l(){const c=$e(a);return c?s.value=Array.from(c.querySelectorAll(`[${e}]:not([data-disabled])`)):s.value=[]}return onBeforeUpdate(()=>{s.value=[]}),onMounted(l),onUpdated(l),watch(()=>a==null?void 0:a.value,l,{immediate:!0}),provide(o,s),s},injectCollection:()=>inject(o,ref([]))}}function Un(n){const e=ref(n);function o(){return e.value}function a(E){e.value=E}function s(E,B){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,B).format(E)}function l(E,B=!0){return z$1(E)&&B?s($$1(E),{dateStyle:"long",timeStyle:"long"}):s($$1(E),{dateStyle:"long"})}function c(E,B={}){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{month:"long",year:"numeric",...B}).format(E)}function d(E,B={}){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{month:"long",...B}).format(E)}function u(){const E=$14e0f24ef4ac5c92$export$d0bdf45af03a6ea3($14e0f24ef4ac5c92$export$aa8b41735afcabd2());return[1,2,3,4,5,6,7,8,9,10,11,12].map(B=>({label:d($$1(E.set({month:B}))),value:B}))}function f(E,B={}){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{year:"numeric",...B}).format(E)}function v(E,B){return m(E)?new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{...B,timeZone:E.timeZone}).formatToParts($$1(E)):new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,B).formatToParts($$1(E))}function b(E,B="narrow"){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{weekday:B}).format(E)}function k(E){var B;return((B=new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{hour:"numeric",minute:"numeric"}).formatToParts(E).find(M=>M.type==="dayPeriod"))==null?void 0:B.value)==="PM"?"PM":"AM"}const x={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};function _(E,B,M={}){const V={...x,...M},F=v(E,V).find(I=>I.type===B);return F?F.value:""}return{setLocale:a,getLocale:o,fullMonth:d,fullYear:f,fullMonthAndYear:c,toParts:v,custom:s,part:_,dayPeriod:k,selectedDate:l,dayOfWeek:b,getMonths:u}}function be(n){const e=Ga({dir:ref("ltr")});return computed(()=>{var o;return(n==null?void 0:n.value)||((o=e.dir)==null?void 0:o.value)||"ltr"})}function Ae(n){const e=getCurrentInstance(),o=e==null?void 0:e.type.emits,a={};return o!=null&&o.length||console.warn(`No emitted event found. Please check component: ${e==null?void 0:e.type.__name}`),o==null||o.forEach(s=>{a[toHandlerKey(camelize(s))]=(...l)=>n(s,...l)}),a}let bn=0;function Gn(){watchEffect(n=>{if(!Ye)return;const e=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",e[0]??Wo()),document.body.insertAdjacentElement("beforeend",e[1]??Wo()),bn++,n(()=>{bn===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(o=>o.remove()),bn--})})}function Wo(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}function Qe(n){return computed(()=>{var e;return Ke(n)?!!((e=$e(n))!=null&&e.closest("form")):!0})}function At(n){const e=getCurrentInstance(),o=Object.keys((e==null?void 0:e.type.props)??{}).reduce((s,l)=>{const c=(e==null?void 0:e.type.props[l]).default;return c!==void 0&&(s[l]=c),s},{}),a=toRef$1(n);return computed(()=>{const s={},l=(e==null?void 0:e.vnode.props)??{};return Object.keys(l).forEach(c=>{s[camelize(c)]=l[c]}),Object.keys({...o,...s}).reduce((c,d)=>(a.value[d]!==void 0&&(c[d]=a.value[d]),c),{})})}function xe(n,e){const o=At(n),a=e?Ae(e):{};return computed(()=>({...o.value,...a}))}function R(){const n=getCurrentInstance(),e=ref(),o=computed(()=>{var c,d;return["#text","#comment"].includes((c=e.value)==null?void 0:c.$el.nodeName)?(d=e.value)==null?void 0:d.$el.nextElementSibling:$e(e)}),a=Object.assign({},n.exposed),s={};for(const c in n.props)Object.defineProperty(s,c,{enumerable:!0,configurable:!0,get:()=>n.props[c]});if(Object.keys(a).length>0)for(const c in a)Object.defineProperty(s,c,{enumerable:!0,configurable:!0,get:()=>a[c]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>n.vnode.el}),n.exposed=s;function l(c){e.value=c,!(c instanceof Element||!c)&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>c.$el}),n.exposed=s)}return{forwardRef:l,currentRef:e,currentElement:o}}function kl(n,e){const o=It(!1,300),a=ref(null),s=ia();function l(){a.value=null,o.value=!1}function c(d,u){const f=d.currentTarget,v={x:d.clientX,y:d.clientY},b=Ti(v,f.getBoundingClientRect()),k=Ri(v,b),x=Ai(u.getBoundingClientRect()),_=ki([...k,...x]);a.value=_,o.value=!0}return watchEffect(d=>{if(n.value&&e.value){const u=v=>c(v,e.value),f=v=>c(v,n.value);n.value.addEventListener("pointerleave",u),e.value.addEventListener("pointerleave",f),d(()=>{var v,b;(v=n.value)==null||v.removeEventListener("pointerleave",u),(b=e.value)==null||b.removeEventListener("pointerleave",f)})}}),watchEffect(d=>{var u;if(a.value){const f=v=>{var b,k;if(!a.value)return;const x=v.target,_={x:v.clientX,y:v.clientY},E=((b=n.value)==null?void 0:b.contains(x))||((k=e.value)==null?void 0:k.contains(x)),B=!Oi(_,a.value),M=x.hasAttribute("data-grace-area-trigger");E?l():(B||M)&&(l(),s.trigger())};(u=n.value)==null||u.ownerDocument.addEventListener("pointermove",f),d(()=>{var v;return(v=n.value)==null?void 0:v.ownerDocument.removeEventListener("pointermove",f)})}}),{isPointerInTransit:o,onPointerExit:s.on}}function Ti(n,e){const o=Math.abs(e.top-n.y),a=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),l=Math.abs(e.left-n.x);switch(Math.min(o,a,s,l)){case l:return"left";case s:return"right";case o:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function Ri(n,e,o=5){const a=[];switch(e){case"top":a.push({x:n.x-o,y:n.y+o},{x:n.x+o,y:n.y+o});break;case"bottom":a.push({x:n.x-o,y:n.y-o},{x:n.x+o,y:n.y-o});break;case"left":a.push({x:n.x+o,y:n.y-o},{x:n.x+o,y:n.y+o});break;case"right":a.push({x:n.x-o,y:n.y-o},{x:n.x-o,y:n.y+o});break}return a}function Ai(n){const{top:e,right:o,bottom:a,left:s}=n;return[{x:s,y:e},{x:o,y:e},{x:o,y:a},{x:s,y:a}]}function Oi(n,e){const{x:o,y:a}=n;let s=!1;for(let l=0,c=e.length-1;l<e.length;c=l++){const d=e[l].x,u=e[l].y,f=e[c].x,v=e[c].y;u>a!=v>a&&o<(f-d)*(a-u)/(v-u)+d&&(s=!s)}return s}function ki(n){const e=n.slice();return e.sort((o,a)=>o.x<a.x?-1:o.x>a.x?1:o.y<a.y?-1:o.y>a.y?1:0),Mi(e)}function Mi(n){if(n.length<=1)return n.slice();const e=[];for(let a=0;a<n.length;a++){const s=n[a];for(;e.length>=2;){const l=e[e.length-1],c=e[e.length-2];if((l.x-c.x)*(s.y-c.y)>=(l.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const o=[];for(let a=n.length-1;a>=0;a--){const s=n[a];for(;o.length>=2;){const l=o[o.length-1],c=o[o.length-2];if((l.x-c.x)*(s.y-c.y)>=(l.y-c.y)*(s.x-c.x))o.pop();else break}o.push(s)}return o.pop(),e.length===1&&o.length===1&&e[0].x===o[0].x&&e[0].y===o[0].y?e:e.concat(o)}var Vi=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},zt=new WeakMap,Pa=new WeakMap,Da={},Cn=0,Ml=function(n){return n&&(n.host||Ml(n.parentNode))},Fi=function(n,e){return e.map(function(o){if(n.contains(o))return o;var a=Ml(o);return a&&n.contains(a)?a:(console.error("aria-hidden",o,"in not contained inside",n,". Doing nothing"),null)}).filter(function(o){return!!o})},Ni=function(n,e,o,a){var s=Fi(e,Array.isArray(n)?n:[n]);Da[o]||(Da[o]=new WeakMap);var l=Da[o],c=[],d=new Set,u=new Set(s),f=function(b){!b||d.has(b)||(d.add(b),f(b.parentNode))};s.forEach(f);var v=function(b){!b||u.has(b)||Array.prototype.forEach.call(b.children,function(k){if(d.has(k))v(k);else try{var x=k.getAttribute(a),_=x!==null&&x!=="false",E=(zt.get(k)||0)+1,B=(l.get(k)||0)+1;zt.set(k,E),l.set(k,B),c.push(k),E===1&&_&&Pa.set(k,!0),B===1&&k.setAttribute(o,"true"),_||k.setAttribute(a,"true")}catch(M){console.error("aria-hidden: cannot operate on ",k,M)}})};return v(e),d.clear(),Cn++,function(){c.forEach(function(b){var k=zt.get(b)-1,x=l.get(b)-1;zt.set(b,k),l.set(b,x),k||(Pa.has(b)||b.removeAttribute(a),Pa.delete(b)),x||b.removeAttribute(o)}),Cn--,Cn||(zt=new WeakMap,zt=new WeakMap,Pa=new WeakMap,Da={})}},Li=function(n,e,o){o===void 0&&(o="data-aria-hidden");var a=Array.from(Array.isArray(n)?n:[n]),s=Vi(n);return s?(a.push.apply(a,Array.from(s.querySelectorAll("[aria-live]"))),Ni(a,s,o,"aria-hidden")):function(){return null}};function ya(n){let e;watch(()=>$e(n),o=>{o?e=Li(o):e&&e()}),onUnmounted(()=>{e&&e()})}function he(n,e="radix"){return Ga({useId:void 0}),`${e}-${useId()}`}function Vl(n){const e=ref(),o=computed(()=>{var s;return((s=e.value)==null?void 0:s.width)??0}),a=computed(()=>{var s;return((s=e.value)==null?void 0:s.height)??0});return onMounted(()=>{const s=$e(n);if(s){e.value={width:s.offsetWidth,height:s.offsetHeight};const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const d=c[0];let u,f;if("borderBoxSize"in d){const v=d.borderBoxSize,b=Array.isArray(v)?v[0]:v;u=b.inlineSize,f=b.blockSize}else u=s.offsetWidth,f=s.offsetHeight;e.value={width:u,height:f}});return l.observe(s,{box:"border-box"}),()=>l.unobserve(s)}else e.value=void 0}),{width:o,height:a}}function Fl(n,e){const o=ref(n);function a(s){return e[o.value][s]??o.value}return{state:o,dispatch:s=>{o.value=a(s)}}}const Hi="data-item-text";function ga(n){const e=It("",1e3);return{search:e,handleTypeaheadSearch:(o,a)=>{if(!(n!=null&&n.value)&&!a)return;e.value=e.value+o;const s=(n==null?void 0:n.value)??a,l=document.activeElement,c=s.map(b=>{var k;return{ref:b,textValue:((k=(b.querySelector(`[${Hi}]`)??b).textContent)==null?void 0:k.trim())??""}}),d=c.find(b=>b.ref===l),u=c.map(b=>b.textValue),f=Yn(u,e.value,d==null?void 0:d.textValue),v=c.find(b=>b.textValue===f);return v&&v.ref.focus(),v==null?void 0:v.ref},resetTypeahead:()=>{e.value=""}}}function qn(n,e){return n.map((o,a)=>n[(e+a)%n.length])}function Yn(n,e,o){const a=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,s=o?n.indexOf(o):-1;let l=qn(n,Math.max(s,0));a.length===1&&(l=l.filter(d=>d!==o));const c=l.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==o?c:void 0}function et$1(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}const Xn=defineComponent({name:"PrimitiveSlot",inheritAttrs:!1,setup(n,{attrs:e,slots:o}){return()=>{var a,s;if(!o.default)return null;const l=Ua(o.default()),c=l.findIndex(v=>v.type!==Comment);if(c===-1)return l;const d=l[c];(a=d.props)==null||delete a.ref;const u=d.props?mergeProps(e,d.props):e;e.class&&(s=d.props)!=null&&s.class&&delete d.props.class;const f=cloneVNode(d,u);for(const v in u)v.startsWith("on")&&(f.props||(f.props={}),f.props[v]=u[v]);return l.length===1?f:(l[c]=f,l)}}}),O=defineComponent({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(n,{attrs:e,slots:o}){const a=n.asChild?"template":n.as;return typeof a=="string"&&["area","img","input"].includes(a)?()=>h(a,e):a!=="template"?()=>h(n.as,e,{default:o.default}):()=>h(Xn,e,{default:o.default})}});function Ie(){const n=ref(),e=computed(()=>{var o,a;return["#text","#comment"].includes((o=n.value)==null?void 0:o.$el.nodeName)?(a=n.value)==null?void 0:a.$el.nextElementSibling:$e(n)});return{primitiveElement:n,currentElement:e}}const[Nl,Wi]=Q$1("CollapsibleRoot"),ji=defineComponent({__name:"CollapsibleRoot",props:{defaultOpen:{type:Boolean,default:!1},open:{type:Boolean,default:void 0},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:open"],setup(n,{expose:e,emit:o}){const a=n,s=ne$1(a,"open",o,{defaultValue:a.defaultOpen,passive:a.open===void 0}),l=ne$1(a,"disabled");return Wi({contentId:"",disabled:l,open:s,onOpenToggle:()=>{s.value=!s.value}}),e({open:s}),R(),(c,d)=>(openBlock(),createBlock(unref(O),{as:c.as,"as-child":a.asChild,"data-state":unref(s)?"open":"closed","data-disabled":unref(l)?"":void 0},{default:withCtx(()=>[renderSlot(c.$slots,"default",{open:unref(s)})]),_:3},8,["as","as-child","data-state","data-disabled"]))}}),Ui=defineComponent({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n;R();const o=Nl();return(a,s)=>{var l,c;return openBlock(),createBlock(unref(O),{type:a.as==="button"?"button":void 0,as:a.as,"as-child":e.asChild,"aria-controls":unref(o).contentId,"aria-expanded":unref(o).open.value,"data-state":unref(o).open.value?"open":"closed","data-disabled":(l=unref(o).disabled)!=null&&l.value?"":void 0,disabled:(c=unref(o).disabled)==null?void 0:c.value,onClick:unref(o).onOpenToggle},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["type","as","as-child","aria-controls","aria-expanded","data-state","data-disabled","disabled","onClick"])}}});function Gi(n,e){var o;const a=ref({}),s=ref("none"),l=ref(n),c=n.value?"mounted":"unmounted";let d;const u=((o=e.value)==null?void 0:o.ownerDocument.defaultView)??Tt,{state:f,dispatch:v}=Fl(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),b=B=>{var M;if(Ye){const V=new CustomEvent(B,{bubbles:!1,cancelable:!1});(M=e.value)==null||M.dispatchEvent(V)}};watch(n,async(B,M)=>{var V;const F=M!==B;if(await nextTick(),F){const I=s.value,L=$a(e.value);B?(v("MOUNT"),b("enter"),L==="none"&&b("after-enter")):L==="none"||((V=a.value)==null?void 0:V.display)==="none"?(v("UNMOUNT"),b("leave"),b("after-leave")):M&&I!==L?(v("ANIMATION_OUT"),b("leave")):(v("UNMOUNT"),b("after-leave"))}},{immediate:!0});const k=B=>{const M=$a(e.value),V=M.includes(B.animationName),F=f.value==="mounted"?"enter":"leave";if(B.target===e.value&&V&&(b(`after-${F}`),v("ANIMATION_END"),!l.value)){const I=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",d=u==null?void 0:u.setTimeout(()=>{var L;((L=e.value)==null?void 0:L.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=I)})}B.target===e.value&&M==="none"&&v("ANIMATION_END")},x=B=>{B.target===e.value&&(s.value=$a(e.value))},_=watch(e,(B,M)=>{B?(a.value=getComputedStyle(B),B.addEventListener("animationstart",x),B.addEventListener("animationcancel",k),B.addEventListener("animationend",k)):(v("ANIMATION_END"),u==null||u.clearTimeout(d),M==null||M.removeEventListener("animationstart",x),M==null||M.removeEventListener("animationcancel",k),M==null||M.removeEventListener("animationend",k))},{immediate:!0}),E=watch(f,()=>{const B=$a(e.value);s.value=f.value==="mounted"?B:"none"});return onUnmounted(()=>{_(),E()}),{isPresent:computed(()=>["mounted","unmountSuspended"].includes(f.value))}}function $a(n){return n&&getComputedStyle(n).animationName||"none"}const Pe$1=defineComponent({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(n,{slots:e,expose:o}){var a;const{present:s,forceMount:l}=toRefs(n),c=ref(),{isPresent:d}=Gi(s,c);o({present:d});let u=e.default({present:d});u=Ua(u||[]);const f=getCurrentInstance();if(u&&(u==null?void 0:u.length)>1){const v=(a=f==null?void 0:f.parent)!=null&&a.type.name?`<${f.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${v}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(b=>`  - ${b}`).join(`
`)].join(`
`))}return()=>l.value||s.value||d.value?h(e.default({present:d})[0],{ref:v=>{const b=$e(v);return typeof(b==null?void 0:b.hasAttribute)>"u"||(b!=null&&b.hasAttribute("data-radix-popper-content-wrapper")?c.value=b.firstElementChild:c.value=b),b}}):null}}),qi=defineComponent({inheritAttrs:!1,__name:"CollapsibleContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=n,o=Nl();o.contentId||(o.contentId=he(void 0,"radix-vue-collapsible-content"));const a=ref(),{forwardRef:s,currentElement:l}=R(),c=ref(0),d=ref(0),u=computed(()=>o.open.value),f=ref(u.value),v=ref();return watch(()=>{var b;return[u.value,(b=a.value)==null?void 0:b.present]},async()=>{await nextTick();const b=l.value;if(!b)return;v.value=v.value||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const k=b.getBoundingClientRect();d.value=k.height,c.value=k.width,f.value||(b.style.transitionDuration=v.value.transitionDuration,b.style.animationName=v.value.animationName)},{immediate:!0}),onMounted(()=>{requestAnimationFrame(()=>{f.value=!1})}),(b,k)=>(openBlock(),createBlock(unref(Pe$1),{ref_key:"presentRef",ref:a,present:b.forceMount||unref(o).open.value,"force-mount":!0},{default:withCtx(()=>{var x,_;return[createVNode(unref(O),mergeProps(b.$attrs,{id:unref(o).contentId,ref:unref(s),"as-child":e.asChild,as:b.as,"data-state":unref(o).open.value?"open":"closed","data-disabled":(x=unref(o).disabled)!=null&&x.value?"":void 0,hidden:!((_=a.value)!=null&&_.present),style:{"--radix-collapsible-content-height":`${d.value}px`,"--radix-collapsible-content-width":`${c.value}px`}}),{default:withCtx(()=>{var E;return[(E=a.value)!=null&&E.present?renderSlot(b.$slots,"default",{key:0}):createCommentVNode("",!0)]}),_:3},16,["id","as-child","as","data-state","data-disabled","hidden","style"])]}),_:3},8,["present"]))}}),[tt$1,Qi]=Q$1("DialogRoot"),eu=defineComponent({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(n,{emit:e}){const o=n,a=ne$1(o,"open",e,{defaultValue:o.defaultOpen,passive:o.open===void 0}),s=ref(),l=ref(),{modal:c}=toRefs(o);return Qi({open:a,modal:c,openModal:()=>{a.value=!0},onOpenChange:d=>{a.value=d},onOpenToggle:()=>{a.value=!a.value},contentId:"",titleId:"",descriptionId:"",triggerElement:s,contentElement:l}),(d,u)=>renderSlot(d.$slots,"default",{open:unref(a)})}}),tu=defineComponent({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n,o=tt$1(),{forwardRef:a,currentElement:s}=R();return o.contentId||(o.contentId=he(void 0,"radix-vue-dialog-content")),onMounted(()=>{o.triggerElement.value=s.value}),(l,c)=>(openBlock(),createBlock(unref(O),mergeProps(e,{ref:unref(a),type:l.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":unref(o).open.value||!1,"aria-controls":unref(o).open.value?unref(o).contentId:void 0,"data-state":unref(o).open.value?"open":"closed",onClick:unref(o).onOpenToggle}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),ot$1=defineComponent({__name:"Teleport",props:{to:{default:"body"},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(n){const e=ja();return(o,a)=>unref(e)||o.forceMount?(openBlock(),createBlock(Teleport,{key:0,to:o.to,disabled:o.disabled},[renderSlot(o.$slots,"default")],8,["to","disabled"])):createCommentVNode("",!0)}}),Dv=defineComponent({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),au="dismissableLayer.pointerDownOutside",nu="dismissableLayer.focusOutside";function Kl(n,e){const o=e.closest("[data-dismissable-layer]"),a=n.dataset.dismissableLayer===""?n:n.querySelector("[data-dismissable-layer]"),s=Array.from(n.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(o&&a===o||s.indexOf(a)<s.indexOf(o))}function Hl(n,e){var o;const a=((o=e==null?void 0:e.value)==null?void 0:o.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=ref(!1),l=ref(()=>{});return watchEffect(c=>{if(!Ye)return;const d=async f=>{const v=f.target;if(e!=null&&e.value){if(Kl(e.value,v)){s.value=!1;return}if(f.target&&!s.value){let b=function(){Wt(au,n,k)};const k={originalEvent:f};f.pointerType==="touch"?(a.removeEventListener("click",l.value),l.value=b,a.addEventListener("click",l.value,{once:!0})):b()}else a.removeEventListener("click",l.value);s.value=!1}},u=window.setTimeout(()=>{a.addEventListener("pointerdown",d)},0);c(()=>{window.clearTimeout(u),a.removeEventListener("pointerdown",d),a.removeEventListener("click",l.value)})}),{onPointerDownCapture:()=>s.value=!0}}function Wl(n,e){var o;const a=((o=e==null?void 0:e.value)==null?void 0:o.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=ref(!1);return watchEffect(l=>{if(!Ye)return;const c=async d=>{e!=null&&e.value&&(await nextTick(),!(!e.value||Kl(e.value,d.target))&&d.target&&!s.value&&Wt(nu,n,{originalEvent:d}))};a.addEventListener("focusin",c),l(()=>a.removeEventListener("focusin",c))}),{onFocusCapture:()=>s.value=!0,onBlurCapture:()=>s.value=!1}}const je=reactive({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gt$1=defineComponent({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(n,{emit:e}){const o=n,a=e,{forwardRef:s,currentElement:l}=R(),c=computed(()=>{var _;return((_=l.value)==null?void 0:_.ownerDocument)??globalThis.document}),d=computed(()=>je.layersRoot),u=computed(()=>l.value?Array.from(d.value).indexOf(l.value):-1),f=computed(()=>je.layersWithOutsidePointerEventsDisabled.size>0),v=computed(()=>{const _=Array.from(d.value),[E]=[...je.layersWithOutsidePointerEventsDisabled].slice(-1),B=_.indexOf(E);return u.value>=B}),b=Hl(async _=>{const E=[...je.branches].some(B=>B==null?void 0:B.contains(_.target));!v.value||E||(a("pointerDownOutside",_),a("interactOutside",_),await nextTick(),_.defaultPrevented||a("dismiss"))},l),k=Wl(_=>{[...je.branches].some(E=>E==null?void 0:E.contains(_.target))||(a("focusOutside",_),a("interactOutside",_),_.defaultPrevented||a("dismiss"))},l);jn("Escape",_=>{u.value===d.value.size-1&&(a("escapeKeyDown",_),_.defaultPrevented||a("dismiss"))});let x;return watchEffect(_=>{l.value&&(o.disableOutsidePointerEvents&&(je.layersWithOutsidePointerEventsDisabled.size===0&&(x=c.value.body.style.pointerEvents,c.value.body.style.pointerEvents="none"),je.layersWithOutsidePointerEventsDisabled.add(l.value)),d.value.add(l.value),_(()=>{o.disableOutsidePointerEvents&&je.layersWithOutsidePointerEventsDisabled.size===1&&(c.value.body.style.pointerEvents=x)}))}),watchEffect(_=>{_(()=>{l.value&&(d.value.delete(l.value),je.layersWithOutsidePointerEventsDisabled.delete(l.value))})}),(_,E)=>(openBlock(),createBlock(unref(O),{ref:unref(s),"as-child":_.asChild,as:_.as,"data-dismissable-layer":"",style:normalizeStyle({pointerEvents:f.value?v.value?"auto":"none":void 0}),onFocusCapture:unref(k).onFocusCapture,onBlurCapture:unref(k).onBlurCapture,onPointerdownCapture:unref(b).onPointerDownCapture},{default:withCtx(()=>[renderSlot(_.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),ou=defineComponent({__name:"DismissableLayerBranch",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n,{forwardRef:o,currentElement:a}=R();return onMounted(()=>{je.branches.add(a.value)}),onUnmounted(()=>{je.branches.delete(a.value)}),(s,l)=>(openBlock(),createBlock(unref(O),mergeProps({ref:unref(o)},e),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16))}}),wn="focusScope.autoFocusOnMount",_n="focusScope.autoFocusOnUnmount",jo={bubbles:!1,cancelable:!0};function Oa(n,{select:e=!1}={}){const o=document.activeElement;for(const a of n)if(ct$1(a,{select:e}),document.activeElement!==o)return!0}function lu(n){const e=Jn(n),o=Uo(e,n),a=Uo(e.reverse(),n);return[o,a]}function Jn(n){const e=[],o=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const s=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||s?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)e.push(o.currentNode);return e}function Uo(n,e){for(const o of n)if(!su(o,{upTo:e}))return o}function su(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function ru(n){return n instanceof HTMLInputElement&&"select"in n}function ct$1(n,{select:e=!1}={}){if(n&&n.focus){const o=document.activeElement;n.focus({preventScroll:!0}),n!==o&&ru(n)&&e&&n.select()}}const iu=ai(()=>ref([]));function uu(){const n=iu();return{add(e){const o=n.value[0];e!==o&&(o==null||o.pause()),n.value=Go(n.value,e),n.value.unshift(e)},remove(e){var o;n.value=Go(n.value,e),(o=n.value[0])==null||o.resume()}}}function Go(n,e){const o=[...n],a=o.indexOf(e);return a!==-1&&o.splice(a,1),o}function du(n){return n.filter(e=>e.tagName!=="A")}const Ya=defineComponent({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(n,{emit:e}){const o=n,a=e,{currentRef:s,currentElement:l}=R(),c=ref(null),d=uu(),u=reactive({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});watchEffect(v=>{if(!Ye)return;const b=l.value;if(!o.trapped)return;function k(B){if(u.paused||!b)return;const M=B.target;b.contains(M)?c.value=M:ct$1(c.value,{select:!0})}function x(B){if(u.paused||!b)return;const M=B.relatedTarget;M!==null&&(b.contains(M)||ct$1(c.value,{select:!0}))}function _(B){b.contains(c.value)||ct$1(b)}document.addEventListener("focusin",k),document.addEventListener("focusout",x);const E=new MutationObserver(_);b&&E.observe(b,{childList:!0,subtree:!0}),v(()=>{document.removeEventListener("focusin",k),document.removeEventListener("focusout",x),E.disconnect()})}),watchEffect(async v=>{const b=l.value;if(await nextTick(),!b)return;d.add(u);const k=document.activeElement;if(!b.contains(k)){const x=new CustomEvent(wn,jo);b.addEventListener(wn,_=>a("mountAutoFocus",_)),b.dispatchEvent(x),x.defaultPrevented||(Oa(du(Jn(b)),{select:!0}),document.activeElement===k&&ct$1(b))}v(()=>{b.removeEventListener(wn,E=>a("mountAutoFocus",E));const x=new CustomEvent(_n,jo),_=E=>{a("unmountAutoFocus",E)};b.addEventListener(_n,_),b.dispatchEvent(x),setTimeout(()=>{x.defaultPrevented||ct$1(k??document.body,{select:!0}),b.removeEventListener(_n,_),d.remove(u)},0)})});function f(v){if(!o.loop&&!o.trapped||u.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,k=document.activeElement;if(b&&k){const x=v.currentTarget,[_,E]=lu(x);_&&E?!v.shiftKey&&k===E?(v.preventDefault(),o.loop&&ct$1(_,{select:!0})):v.shiftKey&&k===_&&(v.preventDefault(),o.loop&&ct$1(E,{select:!0})):k===x&&v.preventDefault()}}return(v,b)=>(openBlock(),createBlock(unref(O),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":v.asChild,as:v.as,onKeydown:f},{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3},8,["as-child","as"]))}}),cu="menu.itemSelect",Dn=["Enter"," "],fu=["ArrowDown","PageUp","Home"],jl=["ArrowUp","PageDown","End"],pu=[...fu,...jl],vu={ltr:[...Dn,"ArrowRight"],rtl:[...Dn,"ArrowLeft"]},mu={ltr:["ArrowLeft"],rtl:["ArrowRight"]};function Qn(n){return n?"open":"closed"}function Fa(n){return n==="indeterminate"}function eo(n){return Fa(n)?"indeterminate":n?"checked":"unchecked"}function $n(n){const e=document.activeElement;for(const o of n)if(o===e||(o.focus(),document.activeElement!==e))return}function hu(n,e){const{x:o,y:a}=n;let s=!1;for(let l=0,c=e.length-1;l<e.length;c=l++){const d=e[l].x,u=e[l].y,f=e[c].x,v=e[c].y;u>a!=v>a&&o<(f-d)*(a-u)/(v-u)+d&&(s=!s)}return s}function yu(n,e){if(!e)return!1;const o={x:n.clientX,y:n.clientY};return hu(o,e)}function ua(n){return n.pointerType==="mouse"}const Ul=defineComponent({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=tt$1(),{forwardRef:l,currentElement:c}=R();return s.titleId||(s.titleId=he(void 0,"radix-vue-dialog-title")),s.descriptionId||(s.descriptionId=he(void 0,"radix-vue-dialog-description")),onMounted(()=>{s.contentElement=c,document.activeElement!==document.body&&(s.triggerElement.value=document.activeElement)}),(d,u)=>(openBlock(),createBlock(unref(Ya),{"as-child":"",loop:"",trapped:o.trapFocus,onMountAutoFocus:u[5]||(u[5]=f=>a("openAutoFocus",f)),onUnmountAutoFocus:u[6]||(u[6]=f=>a("closeAutoFocus",f))},{default:withCtx(()=>[createVNode(unref(gt$1),mergeProps({id:unref(s).contentId,ref:unref(l),as:d.as,"as-child":d.asChild,"disable-outside-pointer-events":d.disableOutsidePointerEvents,role:"dialog","aria-describedby":unref(s).descriptionId,"aria-labelledby":unref(s).titleId,"data-state":unref(Qn)(unref(s).open.value)},d.$attrs,{onDismiss:u[0]||(u[0]=f=>unref(s).onOpenChange(!1)),onEscapeKeyDown:u[1]||(u[1]=f=>a("escapeKeyDown",f)),onFocusOutside:u[2]||(u[2]=f=>a("focusOutside",f)),onInteractOutside:u[3]||(u[3]=f=>a("interactOutside",f)),onPointerDownOutside:u[4]||(u[4]=f=>a("pointerDownOutside",f))}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),wu=defineComponent({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=tt$1(),l=Ae(a),{forwardRef:c,currentElement:d}=R();return ya(d),(u,f)=>(openBlock(),createBlock(Ul,mergeProps({...o,...unref(l)},{ref:unref(c),"trap-focus":unref(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:f[0]||(f[0]=v=>{var b;v.defaultPrevented||(v.preventDefault(),(b=unref(s).triggerElement.value)==null||b.focus())}),onPointerDownOutside:f[1]||(f[1]=v=>{const b=v.detail.originalEvent,k=b.button===0&&b.ctrlKey===!0;(b.button===2||k)&&v.preventDefault()}),onFocusOutside:f[2]||(f[2]=v=>{v.preventDefault()})}),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16,["trap-focus"]))}}),_u=defineComponent({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=Ae(e);R();const s=tt$1(),l=ref(!1),c=ref(!1);return(d,u)=>(openBlock(),createBlock(Ul,mergeProps({...o,...unref(a)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:u[0]||(u[0]=f=>{var v;f.defaultPrevented||(l.value||(v=unref(s).triggerElement.value)==null||v.focus(),f.preventDefault()),l.value=!1,c.value=!1}),onInteractOutside:u[1]||(u[1]=f=>{var v;f.defaultPrevented||(l.value=!0,f.detail.originalEvent.type==="pointerdown"&&(c.value=!0));const b=f.target;(v=unref(s).triggerElement.value)!=null&&v.contains(b)&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&c.value&&f.preventDefault()})}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16))}}),xu=defineComponent({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=tt$1(),l=Ae(a),{forwardRef:c}=R();return(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||unref(s).open.value},{default:withCtx(()=>[unref(s).modal.value?(openBlock(),createBlock(wu,mergeProps({key:0,ref:unref(c)},{...o,...unref(l),...d.$attrs}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16)):(openBlock(),createBlock(_u,mergeProps({key:1,ref:unref(c)},{...o,...unref(l),...d.$attrs}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Su=defineComponent({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean},as:{}},setup(n){const e=tt$1();return ha(!0),R(),(o,a)=>(openBlock(),createBlock(unref(O),{as:o.as,"as-child":o.asChild,"data-state":unref(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Eu=defineComponent({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=tt$1(),{forwardRef:o}=R();return(a,s)=>{var l;return(l=unref(e))!=null&&l.modal.value?(openBlock(),createBlock(unref(Pe$1),{key:0,present:a.forceMount||unref(e).open.value},{default:withCtx(()=>[createVNode(Su,mergeProps(a.$attrs,{ref:unref(o),as:a.as,"as-child":a.asChild}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):createCommentVNode("",!0)}}}),Gl=defineComponent({__name:"DialogClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n;R();const o=tt$1();return(a,s)=>(openBlock(),createBlock(unref(O),mergeProps(e,{type:a.as==="button"?"button":void 0,onClick:s[0]||(s[0]=l=>unref(o).onOpenChange(!1))}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["type"]))}}),Pu=defineComponent({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(n){const e=n,o=tt$1();return R(),(a,s)=>(openBlock(),createBlock(unref(O),mergeProps(e,{id:unref(o).titleId}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["id"]))}}),Du=defineComponent({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(n){const e=n;R();const o=tt$1();return(a,s)=>(openBlock(),createBlock(unref(O),mergeProps(e,{id:unref(o).descriptionId}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["id"]))}}),$v=defineComponent({__name:"AlertDialogRoot",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(n,{emit:e}){const o=xe(n,e);return R(),(a,s)=>(openBlock(),createBlock(unref(eu),mergeProps(unref(o),{modal:!0}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),Bv=defineComponent({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n;return R(),(o,a)=>(openBlock(),createBlock(unref(tu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),Iv=defineComponent({__name:"AlertDialogPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),[$u,Bu]=Q$1("AlertDialogContent"),Tv=defineComponent({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=Ae(e);R();const s=ref();return Bu({onCancelElementChange:l=>{s.value=l}}),(l,c)=>(openBlock(),createBlock(unref(xu),mergeProps({...o,...unref(a)},{role:"alertdialog",onPointerDownOutside:c[0]||(c[0]=withModifiers(()=>{},["prevent"])),onInteractOutside:c[1]||(c[1]=withModifiers(()=>{},["prevent"])),onOpenAutoFocus:c[2]||(c[2]=()=>{nextTick(()=>{var d;(d=s.value)==null||d.focus({preventScroll:!0})})})}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),Rv=defineComponent({__name:"AlertDialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=n;return R(),(o,a)=>(openBlock(),createBlock(unref(Eu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),Av=defineComponent({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n,o=$u(),{forwardRef:a,currentElement:s}=R();return onMounted(()=>{o.onCancelElementChange(s.value)}),(l,c)=>(openBlock(),createBlock(unref(Gl),mergeProps(e,{ref:unref(a)}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),Ov=defineComponent({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(n){const e=n;return R(),(o,a)=>(openBlock(),createBlock(unref(Pu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),kv=defineComponent({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(n){const e=n;return R(),(o,a)=>(openBlock(),createBlock(unref(Du),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}});function Ru(n){function e(a){return Array.isArray(n.date.value)?n.date.value.some(s=>$14e0f24ef4ac5c92$export$ea39ec197993aef0(s,a)):n.date.value?$14e0f24ef4ac5c92$export$ea39ec197993aef0(n.date.value,a):!1}const o=computed(()=>{var a,s,l,c;if(Array.isArray(n.date.value)){if(!n.date.value.length)return!1;for(const d of n.date.value)if((a=n.isDateDisabled)!=null&&a.call(n,d)||(s=n.isDateUnavailable)!=null&&s.call(n,d))return!0}else{if(!n.date.value)return!1;if((l=n.isDateDisabled)!=null&&l.call(n,n.date.value)||(c=n.isDateUnavailable)!=null&&c.call(n,n.date.value))return!0}return!1});return{isDateSelected:e,isInvalid:o}}function Au(n,e){const o=e(n),a=o.compare(n),s={};return a>=7&&(s.day=1),a>=R$1(n)&&(s.month=1),o.set({...s})}function Ou(n,e){const o=e(n),a=n.compare(o),s={};return a>=7&&(s.day=35),a>=R$1(n)&&(s.month=13),o.set({...s})}function ku(n,e){return e(n)}function Mu(n,e){return e(n)}function Yl(n){const e=Un(n.locale.value),o=computed(()=>{const E={calendar:n.placeholder.value.calendar.identifier};return n.placeholder.value.calendar.identifier==="gregory"&&n.placeholder.value.era==="BC"&&(E.era="short"),E}),a=ref(rt$1({dateObj:n.placeholder.value,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value})),s=computed(()=>a.value.map(E=>E.value));function l(E){return!s.value.some(B=>$14e0f24ef4ac5c92$export$5a8da0c44a3afdf2(E,B))}const c=(E="month",B)=>{if(!n.maxValue.value||!a.value.length)return!1;if(n.disabled.value)return!0;const M=a.value[a.value.length-1].value;if(B||n.nextPage.value){const F=Au(M,B||n.nextPage.value);return P(F,n.maxValue.value)}if(E==="year"){const F=M.add({years:1}).set({day:1,month:1});return P(F,n.maxValue.value)}const V=M.add({months:1}).set({day:1});return P(V,n.maxValue.value)},d=(E="month",B)=>{if(!n.minValue.value||!a.value.length)return!1;if(n.disabled.value)return!0;const M=a.value[0].value;if(B||n.prevPage.value){const F=Ou(M,B||n.prevPage.value);return q$1(F,n.minValue.value)}if(E==="year"){const F=M.subtract({years:1}).set({day:35,month:13});return q$1(F,n.minValue.value)}const V=M.subtract({months:1}).set({day:35});return q$1(V,n.minValue.value)};function u(E){var B;return!!((B=n.isDateDisabled)!=null&&B.call(n,E)||n.disabled.value||n.maxValue.value&&P(E,n.maxValue.value)||n.minValue.value&&q$1(E,n.minValue.value))}const f=E=>{var B;return!!((B=n.isDateUnavailable)!=null&&B.call(n,E))},v=computed(()=>a.value.length?a.value[0].rows[0].map(E=>e.dayOfWeek($$1(E),n.weekdayFormat.value)):[]),b=(E="month",B)=>{const M=a.value[0].value;if(B||n.nextPage.value){const I=ku(M,B||n.nextPage.value),L=rt$1({dateObj:I,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value});a.value=L;const U={};if(!B){const Z=L[0].value.compare(M);Z>=R$1(M)&&(U.day=1),Z>=365&&(U.month=1)}n.placeholder.value=L[0].value.set({...U});return}const V=E==="month"?M.add({months:n.pagedNavigation.value?n.numberOfMonths.value:1}):M.add({years:1}),F=rt$1({dateObj:V,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value});a.value=F,n.placeholder.value=F[0].value.set({day:1})},k=(E="month",B)=>{const M=a.value[0].value;if(B||n.prevPage.value){const I=Mu(M,B||n.prevPage.value),L=rt$1({dateObj:I,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value});a.value=L;const U={};if(!B){const Z=M.compare(L[0].value);Z>=R$1(M)&&(U.day=1),Z>=365&&(U.month=1)}n.placeholder.value=L[0].value.set({...U});return}const V=E==="month"?M.subtract({months:n.pagedNavigation.value?n.numberOfMonths.value:1}):M.subtract({years:1}),F=rt$1({dateObj:V,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value});a.value=F,n.placeholder.value=F[0].value.set({day:1})};watch(n.placeholder,E=>{s.value.some(B=>$14e0f24ef4ac5c92$export$5a8da0c44a3afdf2(B,E))||(a.value=rt$1({dateObj:E,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value}))}),watch([n.locale,n.weekStartsOn,n.fixedWeeks,n.numberOfMonths],()=>{a.value=rt$1({dateObj:n.placeholder.value,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value})});const x=computed(()=>{if(!a.value.length)return"";if(n.locale.value!==e.getLocale()&&e.setLocale(n.locale.value),a.value.length===1){const L=a.value[0].value;return`${e.fullMonthAndYear($$1(L),o.value)}`}const E=$$1(a.value[0].value),B=$$1(a.value[a.value.length-1].value),M=e.fullMonth(E,o.value),V=e.fullMonth(B,o.value),F=e.fullYear(E,o.value),I=e.fullYear(B,o.value);return F===I?`${M} - ${V} ${I}`:`${M} ${F} - ${V} ${I}`}),_=computed(()=>`${n.calendarLabel.value??"Event Date"}, ${x.value}`);return{isDateDisabled:u,isDateUnavailable:f,isNextButtonDisabled:c,isPrevButtonDisabled:d,grid:a,weekdays:v,visibleView:s,isOutsideVisibleView:l,formatter:e,nextPage:b,prevPage:k,headingValue:x,fullCalendarLabel:_}}const Vu={style:{border:"0px",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute","white-space":"nowrap",width:"1px"}},Fu={role:"heading","aria-level":"2"},[Yt,Nu]=Q$1("CalendarRoot"),Lu=defineComponent({__name:"CalendarRoot",props:{modelValue:{},multiple:{type:Boolean,default:!1},defaultValue:{default:void 0},defaultPlaceholder:{},placeholder:{default:void 0},pagedNavigation:{type:Boolean,default:!1},preventDeselect:{type:Boolean,default:!1},weekStartsOn:{default:0},weekdayFormat:{default:"narrow"},calendarLabel:{},fixedWeeks:{type:Boolean,default:!1},maxValue:{},minValue:{},locale:{default:"en"},numberOfMonths:{default:1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},initialFocus:{type:Boolean,default:!1},isDateDisabled:{type:Function,default:void 0},isDateUnavailable:{type:Function,default:void 0},dir:{},nextPage:{},prevPage:{},asChild:{type:Boolean},as:{default:"div"}},emits:["update:modelValue","update:placeholder"],setup(n,{emit:e}){const o=n,a=e,{locale:s,disabled:l,readonly:c,initialFocus:d,pagedNavigation:u,weekStartsOn:f,weekdayFormat:v,fixedWeeks:b,multiple:k,minValue:x,maxValue:_,numberOfMonths:E,preventDeselect:B,isDateDisabled:M,isDateUnavailable:V,calendarLabel:F,defaultValue:I,nextPage:L,prevPage:U,dir:Z}=toRefs(o),{primitiveElement:K,currentElement:j}=Ie(),W=be(Z),Y=ne$1(o,"modelValue",a,{defaultValue:I.value,passive:o.modelValue===void 0}),G=qt({defaultPlaceholder:o.placeholder,defaultValue:Y.value,locale:o.locale}),fe=ne$1(o,"placeholder",a,{defaultValue:o.defaultPlaceholder??G.copy(),passive:o.placeholder===void 0});function le(ce){fe.value=ce.copy()}const{fullCalendarLabel:pe,headingValue:ue,isDateDisabled:Ne,isDateUnavailable:Ve,isNextButtonDisabled:Ze,isPrevButtonDisabled:We,weekdays:ze,isOutsideVisibleView:qe,nextPage:dt,prevPage:Xe,formatter:Ge,grid:ft}=Yl({locale:s,placeholder:fe,weekStartsOn:f,fixedWeeks:b,numberOfMonths:E,minValue:x,maxValue:_,disabled:l,weekdayFormat:v,pagedNavigation:u,isDateDisabled:M.value,isDateUnavailable:V.value,calendarLabel:F,nextPage:L,prevPage:U}),{isInvalid:Te,isDateSelected:Ce}=Ru({date:Y,isDateDisabled:Ne,isDateUnavailable:Ve});watch(Y,ce=>{if(Array.isArray(ce)&&ce.length){const ee=ce[ce.length-1];ee&&!$14e0f24ef4ac5c92$export$91b62ebf2ba703ee(fe.value,ee)&&le(ee)}else!Array.isArray(ce)&&ce&&!$14e0f24ef4ac5c92$export$91b62ebf2ba703ee(fe.value,ce)&&le(ce)});function we(ce){if(k.value){if(!Y.value)Y.value=[ce.copy()];else if(Array.isArray(Y.value)){if(Y.value.findIndex(ee=>$14e0f24ef4ac5c92$export$ea39ec197993aef0(ee,ce))===-1)Y.value=[...Y.value,ce];else if(!B.value){const ee=Y.value.filter(oe=>!$14e0f24ef4ac5c92$export$ea39ec197993aef0(oe,ce));if(!ee.length){fe.value=ce.copy(),Y.value=void 0;return}Y.value=ee.map(oe=>oe.copy())}}}else{if(!Y.value){Y.value=ce.copy();return}!B.value&&$14e0f24ef4ac5c92$export$91b62ebf2ba703ee(Y.value,ce)?(fe.value=ce.copy(),Y.value=void 0):Y.value=ce.copy()}}return onMounted(()=>{d.value&&xl(j.value)}),Nu({isDateUnavailable:Ve,dir:W,isDateDisabled:Ne,locale:s,formatter:Ge,modelValue:Y,placeholder:fe,disabled:l,initialFocus:d,pagedNavigation:u,weekStartsOn:f,weekdayFormat:v,fixedWeeks:b,multiple:k,numberOfMonths:E,readonly:c,preventDeselect:B,fullCalendarLabel:pe,headingValue:ue,isInvalid:Te,isDateSelected:Ce,isNextButtonDisabled:Ze,isPrevButtonDisabled:We,isOutsideVisibleView:qe,nextPage:dt,prevPage:Xe,parentElement:j,onPlaceholderChange:le,onDateChange:we}),(ce,ee)=>(openBlock(),createBlock(unref(O),{ref_key:"primitiveElement",ref:K,as:ce.as,"as-child":ce.asChild,role:"application","aria-label":unref(pe),"data-readonly":unref(c)?"":void 0,"data-disabled":unref(l)?"":void 0,"data-invalid":unref(Te)?"":void 0,dir:unref(W)},{default:withCtx(()=>[renderSlot(ce.$slots,"default",{date:unref(fe),grid:unref(ft),weekDays:unref(ze),weekStartsOn:unref(f),locale:unref(s),fixedWeeks:unref(b)}),createBaseVNode("div",Vu,[createBaseVNode("div",Fu,toDisplayString$1(unref(pe)),1)])]),_:3},8,["as","as-child","aria-label","data-readonly","data-disabled","data-invalid","dir"]))}}),zu=defineComponent({__name:"CalendarHeader",props:{asChild:{type:Boolean},as:{default:"div"}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),Ku=defineComponent({__name:"CalendarHeading",props:{asChild:{type:Boolean},as:{default:"div"}},setup(n){const e=n,o=Yt();return(a,s)=>(openBlock(),createBlock(unref(O),mergeProps(e,{"data-disabled":unref(o).disabled.value?"":void 0}),{default:withCtx(()=>[renderSlot(a.$slots,"default",{headingValue:unref(o).headingValue.value},()=>[createTextVNode(toDisplayString$1(unref(o).headingValue.value),1)])]),_:3},16,["data-disabled"]))}}),Hu=defineComponent({__name:"CalendarGrid",props:{asChild:{type:Boolean},as:{default:"table"}},setup(n){const e=n,o=Yt(),a=computed(()=>o.disabled.value?!0:void 0),s=computed(()=>o.readonly.value?!0:void 0);return(l,c)=>(openBlock(),createBlock(unref(O),mergeProps(e,{tabindex:"-1",role:"grid","aria-readonly":s.value,"aria-disabled":a.value,"data-readonly":s.value&&"","data-disabled":a.value&&""}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16,["aria-readonly","aria-disabled","data-readonly","data-disabled"]))}}),Wu=defineComponent({__name:"CalendarCell",props:{date:{},asChild:{type:Boolean},as:{default:"td"}},setup(n){const e=Yt();return(o,a)=>{var s,l;return openBlock(),createBlock(unref(O),{as:o.as,"as-child":o.asChild,role:"gridcell","aria-selected":unref(e).isDateSelected(o.date)?!0:void 0,"aria-disabled":unref(e).isDateDisabled(o.date)||((l=(s=unref(e)).isDateUnavailable)==null?void 0:l.call(s,o.date)),"data-disabled":unref(e).isDateDisabled(o.date)?"":void 0},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},8,["as","as-child","aria-selected","aria-disabled","data-disabled"])}}}),ju=defineComponent({__name:"CalendarHeadCell",props:{asChild:{type:Boolean},as:{default:"th"}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),Uu=defineComponent({__name:"CalendarNext",props:{step:{default:"month"},nextPage:{},asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n,o=computed(()=>a.disabled.value||a.isNextButtonDisabled(e.step,e.nextPage)),a=Yt();return(s,l)=>(openBlock(),createBlock(unref(O),{as:e.as,"as-child":e.asChild,"aria-label":"Next page",type:s.as==="button"?"button":void 0,"aria-disabled":o.value||void 0,"data-disabled":o.value||void 0,disabled:o.value,onClick:l[0]||(l[0]=c=>unref(a).nextPage(e.step,e.nextPage))},{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createTextVNode("Next page")])]),_:3},8,["as","as-child","type","aria-disabled","data-disabled","disabled"]))}}),Gu=defineComponent({__name:"CalendarPrev",props:{step:{default:"month"},prevPage:{},asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n,o=computed(()=>a.disabled.value||a.isPrevButtonDisabled(e.step,e.prevPage)),a=Yt();return(s,l)=>(openBlock(),createBlock(unref(O),{"aria-label":"Previous page",as:e.as,"as-child":e.asChild,type:s.as==="button"?"button":void 0,"aria-disabled":o.value||void 0,"data-disabled":o.value||void 0,disabled:o.value,onClick:l[0]||(l[0]=c=>unref(a).prevPage(e.step,e.prevPage))},{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createTextVNode("Prev page")])]),_:3},8,["as","as-child","type","aria-disabled","data-disabled","disabled"]))}}),qu=defineComponent({__name:"CalendarGridHead",props:{asChild:{type:Boolean},as:{default:"thead"}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(O),mergeProps(e,{"aria-hidden":"true"}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),Yu=defineComponent({__name:"CalendarGridBody",props:{asChild:{type:Boolean},as:{default:"tbody"}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),Xu=defineComponent({__name:"CalendarGridRow",props:{asChild:{type:Boolean},as:{default:"tr"}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),Zu=defineComponent({__name:"CalendarCellTrigger",props:{day:{},month:{},asChild:{type:Boolean},as:{default:"div"}},setup(n){const e=n,o=et$1(),a=Yt(),{primitiveElement:s,currentElement:l}=Ie(),c=computed(()=>e.day.day.toLocaleString(a.locale.value)),d=computed(()=>a.formatter.custom($$1(e.day),{weekday:"long",month:"long",day:"numeric",year:"numeric"})),u=computed(()=>a.isDateDisabled(e.day)),f=computed(()=>{var F;return(F=a.isDateUnavailable)==null?void 0:F.call(a,e.day)}),v=computed(()=>$14e0f24ef4ac5c92$export$629b0a497aa65267(e.day,$14e0f24ef4ac5c92$export$aa8b41735afcabd2())),b=computed(()=>!$14e0f24ef4ac5c92$export$a18c89cbd24170ff(e.day,e.month)),k=computed(()=>a.isOutsideVisibleView(e.day)),x=computed(()=>!a.disabled.value&&$14e0f24ef4ac5c92$export$ea39ec197993aef0(e.day,a.placeholder.value)),_=computed(()=>a.isDateSelected(e.day)),E="[data-radix-vue-calendar-cell-trigger]:not([data-disabled]):not([data-outside-month]):not([data-outside-visible-months])";function B(F){var I;a.readonly.value||a.isDateDisabled(F)||(I=a.isDateUnavailable)!=null&&I.call(a,F)||a.onDateChange(F)}function M(){B(e.day)}function V(F){F.preventDefault(),F.stopPropagation();const I=a.parentElement.value,L=I?Array.from(I.querySelectorAll(E)):[];let U=L.indexOf(l.value);const Z=7,K=a.dir.value==="rtl"?-1:1;switch(F.code){case o.ARROW_RIGHT:U+=K;break;case o.ARROW_LEFT:U-=K;break;case o.ARROW_UP:U-=Z;break;case o.ARROW_DOWN:U+=Z;break;case o.ENTER:case o.SPACE_CODE:B(e.day);return;default:return}if(U>=0&&U<L.length){L[U].focus();return}if(U<0){if(a.isPrevButtonDisabled("month"))return;a.prevPage(),nextTick(()=>{const j=I?Array.from(I.querySelectorAll(E)):[];j[j.length-Math.abs(U)].focus()});return}if(U>=L.length){if(a.isNextButtonDisabled("month"))return;a.nextPage(),nextTick(()=>{(I?Array.from(I.querySelectorAll(E)):[])[U-L.length].focus()})}}return(F,I)=>(openBlock(),createBlock(unref(O),mergeProps({ref_key:"primitiveElement",ref:s},e,{role:"button","aria-label":d.value,"data-radix-vue-calendar-cell-trigger":"","aria-disabled":b.value||u.value||f.value?!0:void 0,"data-selected":_.value?!0:void 0,"data-value":F.day.toString(),"data-disabled":u.value||b.value?"":void 0,"data-unavailable":f.value?"":void 0,"data-today":v.value?"":void 0,"data-outside-view":b.value?"":void 0,"data-outside-visible-view":k.value?"":void 0,"data-focused":x.value?"":void 0,tabindex:x.value?0:b.value||u.value?void 0:-1,onClick:M,onKeydown:[withKeys(V,["up","down","left","right","space","enter"]),I[0]||(I[0]=withKeys(withModifiers(()=>{},["prevent"]),["enter"]))]}),{default:withCtx(()=>[renderSlot(F.$slots,"default",{dayValue:c.value},()=>[createTextVNode(toDisplayString$1(c.value),1)])]),_:3},16,["aria-label","aria-disabled","data-selected","data-value","data-disabled","data-unavailable","data-today","data-outside-view","data-outside-visible-view","data-focused","tabindex"]))}});function Na(n){return n==="indeterminate"}function Xl(n){return Na(n)?"indeterminate":n?"checked":"unchecked"}const Ju=["value","checked","name","disabled","required"],[Qu,ed]=Q$1("CheckboxRoot"),zv=defineComponent({inheritAttrs:!1,__name:"CheckboxRoot",props:{defaultChecked:{type:Boolean},checked:{type:[Boolean,String],default:void 0},disabled:{type:Boolean},required:{type:Boolean},name:{},value:{default:"on"},id:{},asChild:{type:Boolean},as:{default:"button"}},emits:["update:checked"],setup(n,{emit:e}){const o=n,a=e,{disabled:s}=toRefs(o),l=ne$1(o,"checked",a,{defaultValue:o.defaultChecked,passive:o.checked===void 0}),{forwardRef:c,currentElement:d}=R(),u=Qe(d),f=computed(()=>{var v;return o.id&&d.value?(v=document.querySelector(`[for="${o.id}"]`))==null?void 0:v.innerText:void 0});return ed({disabled:s,state:l}),(v,b)=>(openBlock(),createElementBlock(Fragment$1,null,[createVNode(unref(O),mergeProps(v.$attrs,{id:v.id,ref:unref(c),role:"checkbox","as-child":o.asChild,as:v.as,type:v.as==="button"?"button":void 0,"aria-checked":unref(Na)(unref(l))?"mixed":unref(l),"aria-required":!1,"aria-label":v.$attrs["aria-label"]||f.value,"data-state":unref(Xl)(unref(l)),"data-disabled":unref(s)?"":void 0,disabled:unref(s),onKeydown:withKeys(withModifiers(()=>{},["prevent"]),["enter"]),onClick:b[0]||(b[0]=k=>l.value=unref(Na)(unref(l))?!0:!unref(l))}),{default:withCtx(()=>[renderSlot(v.$slots,"default",{checked:unref(l)})]),_:3},16,["id","as-child","as","type","aria-checked","aria-label","data-state","data-disabled","disabled","onKeydown"]),unref(u)?(openBlock(),createElementBlock("input",{key:0,type:"checkbox",tabindex:"-1","aria-hidden":"true",value:v.value,checked:!!unref(l),name:o.name,disabled:o.disabled,required:o.required,style:{transform:"translateX(-100%)",position:"absolute",pointerEvents:"none",opacity:0,margin:0}},null,8,Ju)):createCommentVNode("",!0)],64))}}),Kv=defineComponent({__name:"CheckboxIndicator",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(n){const{forwardRef:e}=R(),o=Qu();return(a,s)=>(openBlock(),createBlock(unref(Pe$1),{present:a.forceMount||unref(Na)(unref(o).state.value)||unref(o).state.value===!0},{default:withCtx(()=>[createVNode(unref(O),mergeProps({ref:unref(e),"data-state":unref(Xl)(unref(o).state.value),"data-disabled":unref(o).disabled.value?"":void 0,style:{pointerEvents:"none"},"as-child":a.asChild,as:a.as},a.$attrs),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["data-state","data-disabled","as-child","as"])]),_:3},8,["present"]))}}),[Zl,td]=Q$1("PopperRoot"),Ot=defineComponent({inheritAttrs:!1,__name:"PopperRoot",setup(n){const e=ref();return td({anchor:e,onAnchorChange:o=>e.value=o}),(o,a)=>renderSlot(o.$slots,"default")}}),kt=defineComponent({__name:"PopperAnchor",props:{element:{},asChild:{type:Boolean},as:{}},setup(n){const e=n,{forwardRef:o,currentElement:a}=R(),s=Zl();return watchEffect(()=>{s.onAnchorChange(e.element??a.value)}),(l,c)=>(openBlock(),createBlock(unref(O),{ref:unref(o),as:l.as,"as-child":l.asChild},{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},8,["as","as-child"]))}});function ad(n){return n!==null}function nd(n){return{name:"transformOrigin",options:n,fn(e){var o,a,s;const{placement:l,rects:c,middlewareData:d}=e,u=((o=d.arrow)==null?void 0:o.centerOffset)!==0,f=u?0:n.arrowWidth,v=u?0:n.arrowHeight,[b,k]=Bn(l),x={start:"0%",center:"50%",end:"100%"}[k],_=(((a=d.arrow)==null?void 0:a.x)??0)+f/2,E=(((s=d.arrow)==null?void 0:s.y)??0)+v/2;let B="",M="";return b==="bottom"?(B=u?x:`${_}px`,M=`${-v}px`):b==="top"?(B=u?x:`${_}px`,M=`${c.floating.height+v}px`):b==="right"?(B=`${-v}px`,M=u?x:`${E}px`):b==="left"&&(B=`${c.floating.width+v}px`,M=u?x:`${E}px`),{data:{x:B,y:M}}}}}function Bn(n){const[e,o="center"]=n.split("-");return[e,o]}const Jl={side:"bottom",sideOffset:0,align:"center",alignOffset:0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,updatePositionStrategy:"optimized",prioritizePosition:!1},[od,ld]=Q$1("PopperContent"),Bt=defineComponent({inheritAttrs:!1,__name:"PopperContent",props:mergeDefaults({side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},{...Jl}),emits:["placed"],setup(n,{emit:e}){const o=n,a=e,s=Zl(),{forwardRef:l,currentElement:c}=R(),d=ref(),u=ref(),{width:f,height:v}=Vl(u),b=computed(()=>o.side+(o.align!=="center"?`-${o.align}`:"")),k=computed(()=>typeof o.collisionPadding=="number"?o.collisionPadding:{top:0,right:0,bottom:0,left:0,...o.collisionPadding}),x=computed(()=>Array.isArray(o.collisionBoundary)?o.collisionBoundary:[o.collisionBoundary]),_=computed(()=>({padding:k.value,boundary:x.value.filter(ad),altBoundary:x.value.length>0})),E=ei(()=>[offset({mainAxis:o.sideOffset+v.value,alignmentAxis:o.alignOffset}),o.prioritizePosition&&o.avoidCollisions&&flip({..._.value}),o.avoidCollisions&&shift$1({mainAxis:!0,crossAxis:!!o.prioritizePosition,limiter:o.sticky==="partial"?limitShift():void 0,..._.value}),!o.prioritizePosition&&o.avoidCollisions&&flip({..._.value}),size({..._.value,apply:({elements:W,rects:Y,availableWidth:G,availableHeight:fe})=>{const{width:le,height:pe}=Y.reference,ue=W.floating.style;ue.setProperty("--radix-popper-available-width",`${G}px`),ue.setProperty("--radix-popper-available-height",`${fe}px`),ue.setProperty("--radix-popper-anchor-width",`${le}px`),ue.setProperty("--radix-popper-anchor-height",`${pe}px`)}}),u.value&&arrow({element:u.value,padding:o.arrowPadding}),nd({arrowWidth:f.value,arrowHeight:v.value}),o.hideWhenDetached&&hide({strategy:"referenceHidden",..._.value})]),{floatingStyles:B,placement:M,isPositioned:V,middlewareData:F}=useFloating(s.anchor,d,{strategy:"fixed",placement:b,whileElementsMounted:(...W)=>autoUpdate(...W,{animationFrame:o.updatePositionStrategy==="always"}),middleware:E}),I=computed(()=>Bn(M.value)[0]),L=computed(()=>Bn(M.value)[1]);watchPostEffect(()=>{V.value&&a("placed")});const U=computed(()=>{var W;return((W=F.value.arrow)==null?void 0:W.centerOffset)!==0}),Z=ref("");watchEffect(()=>{c.value&&(Z.value=window.getComputedStyle(c.value).zIndex)});const K=computed(()=>{var W;return((W=F.value.arrow)==null?void 0:W.x)??0}),j=computed(()=>{var W;return((W=F.value.arrow)==null?void 0:W.y)??0});return ld({placedSide:I,onArrowChange:W=>u.value=W,arrowX:K,arrowY:j,shouldHideArrow:U}),(W,Y)=>{var G,fe,le;return openBlock(),createElementBlock("div",{ref_key:"floatingRef",ref:d,"data-radix-popper-content-wrapper":"",style:normalizeStyle({...unref(B),transform:unref(V)?unref(B).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Z.value,"--radix-popper-transform-origin":[(G=unref(F).transformOrigin)==null?void 0:G.x,(fe=unref(F).transformOrigin)==null?void 0:fe.y].join(" "),...((le=unref(F).hide)==null?void 0:le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}})},[createVNode(unref(O),mergeProps({ref:unref(l)},W.$attrs,{"as-child":o.asChild,as:W.as,"data-side":I.value,"data-align":L.value,style:{animation:unref(V)?void 0:"none"}}),{default:withCtx(()=>[renderSlot(W.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4)}}}),Zt=defineComponent({__name:"VisuallyHidden",props:{asChild:{type:Boolean},as:{default:"span"}},setup(n){return R(),(e,o)=>(openBlock(),createBlock(unref(O),{as:e.as,"as-child":e.asChild,style:{position:"absolute",border:0,width:"1px",display:"inline-block",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},8,["as","as-child"]))}}),ud="data-radix-vue-collection-item",[ao,dd]=Q$1("CollectionProvider");function ba(n=ud){const e=ref(new Map),o=ref(),a=dd({collectionRef:o,itemMap:e,attrName:n}),{getItems:s}=Qt(a),l=computed(()=>Array.from(a.itemMap.value.values())),c=computed(()=>a.itemMap.value.size);return{getItems:s,reactiveItems:l,itemMapSize:c}}const Ca=defineComponent({name:"CollectionSlot",setup(n,{slots:e}){const o=ao(),{primitiveElement:a,currentElement:s}=Ie();return watch(s,()=>{o.collectionRef.value=s.value}),()=>h(Xn,{ref:a},e)}}),Jt=defineComponent({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(n,{slots:e,attrs:o}){const a=ao(),{primitiveElement:s,currentElement:l}=Ie();return watchEffect(c=>{if(l.value){const d=markRaw(l.value);a.itemMap.value.set(d,{ref:l.value,value:n.value}),c(()=>a.itemMap.value.delete(d))}}),()=>h(Xn,{...o,[a.attrName]:"",ref:s},e)}});function Qt(n){const e=n??ao();return{getItems:()=>{const o=e.collectionRef.value;if(!o)return[];const a=Array.from(o.querySelectorAll(`[${e.attrName}]`));return Array.from(e.itemMap.value.values()).sort((s,l)=>a.indexOf(s.ref)-a.indexOf(l.ref))}}}function Xa(n){const e=Ga({nonce:ref()});return computed(()=>{var o;return(n==null?void 0:n.value)||((o=e.nonce)==null?void 0:o.value)})}const Za=defineComponent({__name:"MenuAnchor",props:{element:{},asChild:{type:Boolean},as:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(kt),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}});function bd(){const n=ref(!1);return onMounted(()=>{Le("keydown",()=>{n.value=!0},{capture:!0,passive:!0}),Le(["pointerdown","pointermove"],()=>{n.value=!1},{capture:!0,passive:!0})}),n}const Cd=Sl(bd),[Mt,es]=Q$1(["MenuRoot","MenuSub"],"MenuContext"),[wa,wd]=Q$1("MenuRoot"),oo=defineComponent({__name:"MenuRoot",props:{open:{type:Boolean,default:!1},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(n,{emit:e}){const o=n,a=e,{modal:s,dir:l}=toRefs(o),c=be(l),d=ne$1(o,"open",a),u=ref(),f=Cd();return es({open:d,onOpenChange:v=>{d.value=v},content:u,onContentChange:v=>{u.value=v}}),wd({onClose:()=>{d.value=!1},isUsingKeyboardRef:f,dir:c,modal:s}),(v,b)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3}))}}),_d="rovingFocusGroup.onEntryFocus",xd={bubbles:!1,cancelable:!0},Ja={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Sd(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function ts(n,e,o){const a=Sd(n.key,o);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return Ja[a]}function as(n,e=!1,o){const a=(o==null?void 0:o.activeElement)??document.activeElement;for(const s of n)if(s===a||(s.focus({preventScroll:e}),document.activeElement!==a))return}function Ed(n,e){return n.map((o,a)=>n[(e+a)%n.length])}const[Pd,Dd]=Q$1("RovingFocusGroup"),Vt=defineComponent({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(n,{expose:e,emit:o}){const a=n,s=o,{loop:l,orientation:c,dir:d}=toRefs(a),u=be(d),f=ne$1(a,"currentTabStopId",s,{defaultValue:a.defaultCurrentTabStopId,passive:a.currentTabStopId===void 0}),v=ref(!1),b=ref(!1),k=ref(0),{getItems:x}=ba();function _(B){const M=!b.value;if(B.currentTarget&&B.target===B.currentTarget&&M&&!v.value){const V=new CustomEvent(_d,xd);if(B.currentTarget.dispatchEvent(V),s("entryFocus",V),!V.defaultPrevented){const F=x().map(Z=>Z.ref).filter(Z=>Z.dataset.disabled!==""),I=F.find(Z=>Z.getAttribute("data-active")==="true"),L=F.find(Z=>Z.id===f.value),U=[I,L,...F].filter(Boolean);as(U,a.preventScrollOnEntryFocus)}}b.value=!1}function E(){setTimeout(()=>{b.value=!1},1)}return e({getItems:x}),Dd({loop:l,dir:u,orientation:c,currentTabStopId:f,onItemFocus:B=>{f.value=B},onItemShiftTab:()=>{v.value=!0},onFocusableItemAdd:()=>{k.value++},onFocusableItemRemove:()=>{k.value--}}),(B,M)=>(openBlock(),createBlock(unref(Ca),null,{default:withCtx(()=>[createVNode(unref(O),{tabindex:v.value||k.value===0?-1:0,"data-orientation":unref(c),as:B.as,"as-child":B.asChild,dir:unref(u),style:{outline:"none"},onMousedown:M[0]||(M[0]=V=>b.value=!0),onMouseup:E,onFocus:_,onBlur:M[1]||(M[1]=V=>v.value=!1)},{default:withCtx(()=>[renderSlot(B.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Ft=defineComponent({__name:"RovingFocusItem",props:{tabStopId:{},focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!0},allowShiftKey:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(n){const e=n,o=Pd(),a=computed(()=>e.tabStopId||he()),s=computed(()=>o.currentTabStopId.value===a.value),{getItems:l}=Qt(),{primitiveElement:c,currentElement:d}=Ie(),u=computed(()=>{var v;return(v=d.value)==null?void 0:v.getRootNode()});onMounted(()=>{e.focusable&&o.onFocusableItemAdd()}),onUnmounted(()=>{e.focusable&&o.onFocusableItemRemove()});function f(v){if(v.key==="Tab"&&v.shiftKey){o.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const b=ts(v,o.orientation.value,o.dir.value);if(b!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||!e.allowShiftKey&&v.shiftKey)return;v.preventDefault();let k=[...l().map(x=>x.ref).filter(x=>x.dataset.disabled!=="")];if(b==="last")k.reverse();else if(b==="prev"||b==="next"){b==="prev"&&k.reverse();const x=k.indexOf(v.currentTarget);k=o.loop.value?Ed(k,x+1):k.slice(x+1)}nextTick(()=>as(k,!1,u.value))}}return(v,b)=>(openBlock(),createBlock(unref(Jt),null,{default:withCtx(()=>[createVNode(unref(O),{ref_key:"primitiveElement",ref:c,tabindex:s.value?0:-1,"data-orientation":unref(o).orientation.value,"data-active":v.active,"data-disabled":v.focusable?void 0:"",as:v.as,"as-child":v.asChild,onMousedown:b[0]||(b[0]=k=>{v.focusable?unref(o).onItemFocus(a.value):k.preventDefault()}),onFocus:b[1]||(b[1]=k=>unref(o).onItemFocus(a.value)),onKeydown:f},{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),[lo,$d]=Q$1("MenuContent"),so=defineComponent({__name:"MenuContentImpl",props:mergeDefaults({loop:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},disableOutsideScroll:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},{...Jl}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(n,{emit:e}){const o=n,a=e,s=Mt(),l=wa(),{trapFocus:c,disableOutsidePointerEvents:d,loop:u}=toRefs(o);Gn(),ha(d.value);const f=ref(""),v=ref(0),b=ref(0),k=ref(null),x=ref("right"),_=ref(0),E=ref(null),{createCollection:B}=Me(),{forwardRef:M,currentElement:V}=R(),F=B(V);watch(V,W=>{s.onContentChange(W)});const{handleTypeaheadSearch:I}=ga(F);onUnmounted(()=>{window.clearTimeout(v.value)});function L(W){var Y,G;return x.value===((Y=k.value)==null?void 0:Y.side)&&yu(W,(G=k.value)==null?void 0:G.area)}async function U(W){var Y;a("openAutoFocus",W),!W.defaultPrevented&&(W.preventDefault(),(Y=V.value)==null||Y.focus({preventScroll:!0}))}function Z(W){if(W.defaultPrevented)return;const Y=W.target.closest("[data-radix-menu-content]")===W.currentTarget,G=W.ctrlKey||W.altKey||W.metaKey,fe=W.key.length===1,le=Rt(W,document.activeElement,V.value,{loop:u.value,arrowKeyOptions:"vertical",dir:l==null?void 0:l.dir.value,focus:!0,attributeName:"[data-radix-vue-collection-item]:not([data-disabled])"});if(le)return le==null?void 0:le.focus();if(W.code==="Space"||(Y&&(W.key==="Tab"&&W.preventDefault(),!G&&fe&&I(W.key)),W.target!==V.value)||!pu.includes(W.key))return;W.preventDefault();const pe=F.value;jl.includes(W.key)&&pe.reverse(),$n(pe)}function K(W){var Y,G;(G=(Y=W==null?void 0:W.currentTarget)==null?void 0:Y.contains)!=null&&G.call(Y,W.target)||(window.clearTimeout(v.value),f.value="")}function j(W){var Y;if(!ua(W))return;const G=W.target,fe=_.value!==W.clientX;if((Y=W==null?void 0:W.currentTarget)!=null&&Y.contains(G)&&fe){const le=W.clientX>_.value?"right":"left";x.value=le,_.value=W.clientX}}return $d({onItemEnter:W=>!!L(W),onItemLeave:W=>{var Y;L(W)||((Y=V.value)==null||Y.focus(),E.value=null)},onTriggerLeave:W=>!!L(W),searchRef:f,pointerGraceTimerRef:b,onPointerGraceIntentChange:W=>{k.value=W}}),(W,Y)=>(openBlock(),createBlock(unref(Ya),{"as-child":"",trapped:unref(c),onMountAutoFocus:U,onUnmountAutoFocus:Y[7]||(Y[7]=G=>a("closeAutoFocus",G))},{default:withCtx(()=>[createVNode(unref(gt$1),{"as-child":"","disable-outside-pointer-events":unref(d),onEscapeKeyDown:Y[2]||(Y[2]=G=>a("escapeKeyDown",G)),onPointerDownOutside:Y[3]||(Y[3]=G=>a("pointerDownOutside",G)),onFocusOutside:Y[4]||(Y[4]=G=>a("focusOutside",G)),onInteractOutside:Y[5]||(Y[5]=G=>a("interactOutside",G)),onDismiss:Y[6]||(Y[6]=G=>a("dismiss"))},{default:withCtx(()=>[createVNode(unref(Vt),{"current-tab-stop-id":E.value,"onUpdate:currentTabStopId":Y[0]||(Y[0]=G=>E.value=G),"as-child":"",orientation:"vertical",dir:unref(l).dir.value,loop:unref(u),onEntryFocus:Y[1]||(Y[1]=G=>{a("entryFocus",G),unref(l).isUsingKeyboardRef.value||G.preventDefault()})},{default:withCtx(()=>[createVNode(unref(Bt),{ref:unref(M),role:"menu",as:W.as,"as-child":W.asChild,"aria-orientation":"vertical","data-radix-menu-content":"","data-state":unref(Qn)(unref(s).open.value),dir:unref(l).dir.value,side:W.side,"side-offset":W.sideOffset,align:W.align,"align-offset":W.alignOffset,"avoid-collisions":W.avoidCollisions,"collision-boundary":W.collisionBoundary,"collision-padding":W.collisionPadding,"arrow-padding":W.arrowPadding,"prioritize-position":W.prioritizePosition,sticky:W.sticky,"hide-when-detached":W.hideWhenDetached,onKeydown:Z,onBlur:K,onPointermove:j},{default:withCtx(()=>[renderSlot(W.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","sticky","hide-when-detached"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),ns=defineComponent({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(n){const e=n,o=lo(),{forwardRef:a}=R(),s=ref(!1);async function l(d){if(!d.defaultPrevented&&ua(d)){if(e.disabled)o.onItemLeave(d);else if(!o.onItemEnter(d)){const u=d.currentTarget;u==null||u.focus({preventScroll:!0})}}}async function c(d){await nextTick(),!d.defaultPrevented&&ua(d)&&o.onItemLeave(d)}return(d,u)=>(openBlock(),createBlock(unref(Jt),{value:{textValue:d.textValue}},{default:withCtx(()=>[createVNode(unref(O),mergeProps({ref:unref(a),role:"menuitem",tabindex:"-1"},d.$attrs,{as:d.as,"as-child":d.asChild,"data-radix-vue-collection-item":"","aria-disabled":d.disabled||void 0,"data-disabled":d.disabled?"":void 0,"data-highlighted":s.value?"":void 0,onPointermove:l,onPointerleave:c,onFocus:u[0]||(u[0]=async f=>{await nextTick(),!(f.defaultPrevented||d.disabled)&&(s.value=!0)}),onBlur:u[1]||(u[1]=async f=>{await nextTick(),!f.defaultPrevented&&(s.value=!1)})}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),_a$1=defineComponent({__name:"MenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(n,{emit:e}){const o=n,a=e,{forwardRef:s,currentElement:l}=R(),c=wa(),d=lo(),u=ref(!1);async function f(){const v=l.value;if(!o.disabled&&v){const b=new CustomEvent(cu,{bubbles:!0,cancelable:!0});a("select",b),await nextTick(),b.defaultPrevented?u.value=!1:c.onClose()}}return(v,b)=>(openBlock(),createBlock(ns,mergeProps(o,{ref:unref(s),onClick:f,onPointerdown:b[0]||(b[0]=()=>{u.value=!0}),onPointerup:b[1]||(b[1]=async k=>{var x;await nextTick(),!k.defaultPrevented&&(u.value||(x=k.currentTarget)==null||x.click())}),onKeydown:b[2]||(b[2]=async k=>{const x=unref(d).searchRef.value!=="";v.disabled||x&&k.key===" "||unref(Dn).includes(k.key)&&(k.currentTarget.click(),k.preventDefault())})}),{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3},16))}}),[Bd,os$1]=Q$1(["MenuCheckboxItem","MenuRadioItem"],"MenuItemIndicatorContext"),ro=defineComponent({__name:"MenuItemIndicator",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(n){const e=Bd({checked:ref(!1)});return(o,a)=>(openBlock(),createBlock(unref(Pe$1),{present:o.forceMount||unref(Fa)(unref(e).checked.value)||unref(e).checked.value===!0},{default:withCtx(()=>[createVNode(unref(O),{as:o.as,"as-child":o.asChild,"data-state":unref(eo)(unref(e).checked.value)},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},8,["as","as-child","data-state"])]),_:3},8,["present"]))}}),io=defineComponent({__name:"MenuCheckboxItem",props:{checked:{type:[Boolean,String],default:!1},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select","update:checked"],setup(n,{emit:e}){const o=n,a=e,s=ne$1(o,"checked",a);return os$1({checked:s}),(l,c)=>(openBlock(),createBlock(_a$1,mergeProps({role:"menuitemcheckbox"},o,{"aria-checked":unref(Fa)(unref(s))?"mixed":unref(s),"data-state":unref(eo)(unref(s)),onSelect:c[0]||(c[0]=async d=>{a("select",d),unref(Fa)(unref(s))?s.value=!0:s.value=!unref(s)})}),{default:withCtx(()=>[renderSlot(l.$slots,"default",{checked:unref(s)})]),_:3},16,["aria-checked","data-state"]))}}),Id=defineComponent({__name:"MenuRootContentModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=xe(o,a),l=Mt(),{forwardRef:c,currentElement:d}=R();return ya(d),(u,f)=>(openBlock(),createBlock(so,mergeProps(unref(s),{ref:unref(c),"trap-focus":unref(l).open.value,"disable-outside-pointer-events":unref(l).open.value,"disable-outside-scroll":!0,onDismiss:f[0]||(f[0]=v=>unref(l).onOpenChange(!1)),onFocusOutside:f[1]||(f[1]=withModifiers(v=>a("focusOutside",v),["prevent"]))}),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),Td=defineComponent({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=xe(n,e),a=Mt();return(s,l)=>(openBlock(),createBlock(so,mergeProps(unref(o),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:l[0]||(l[0]=c=>unref(a).onOpenChange(!1))}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16))}}),uo=defineComponent({__name:"MenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=xe(n,e),a=Mt(),s=wa();return(l,c)=>(openBlock(),createBlock(unref(Pe$1),{present:l.forceMount||unref(a).open.value},{default:withCtx(()=>[unref(s).modal.value?(openBlock(),createBlock(Id,normalizeProps(mergeProps({key:0},{...l.$attrs,...unref(o)})),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16)):(openBlock(),createBlock(Td,normalizeProps(mergeProps({key:1},{...l.$attrs,...unref(o)})),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Qa=defineComponent({__name:"MenuGroup",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(O),mergeProps({role:"group"},e),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),fo=defineComponent({__name:"MenuPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),[ls,Od]=Q$1("MenuSub"),ho=defineComponent({__name:"MenuSub",props:{open:{type:Boolean,default:void 0}},emits:["update:open"],setup(n,{emit:e}){const o=n,a=ne$1(o,"open",e,{defaultValue:!1,passive:o.open===void 0}),s=Mt(),l=ref(),c=ref();return watchEffect(d=>{(s==null?void 0:s.open.value)===!1&&(a.value=!1),d(()=>a.value=!1)}),es({open:a,onOpenChange:d=>{a.value=d},content:c,onContentChange:d=>{c.value=d}}),Od({triggerId:"",contentId:"",trigger:l,onTriggerChange:d=>{l.value=d}}),(d,u)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3}))}}),yo=defineComponent({__name:"MenuSubContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideOffset:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean,default:!0},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=xe(n,e),a=Mt(),s=wa(),l=ls(),{forwardRef:c,currentElement:d}=R();return l.contentId||(l.contentId=he(void 0,"radix-vue-menu-sub-content")),(u,f)=>(openBlock(),createBlock(unref(Pe$1),{present:u.forceMount||unref(a).open.value},{default:withCtx(()=>[createVNode(so,mergeProps(unref(o),{id:unref(l).contentId,ref:unref(c),"aria-labelledby":unref(l).triggerId,align:"start",side:unref(s).dir.value==="rtl"?"left":"right","disable-outside-pointer-events":!1,"disable-outside-scroll":!1,"trap-focus":!1,onOpenAutoFocus:f[0]||(f[0]=withModifiers(v=>{var b;unref(s).isUsingKeyboardRef.value&&((b=unref(d))==null||b.focus())},["prevent"])),onCloseAutoFocus:f[1]||(f[1]=withModifiers(()=>{},["prevent"])),onFocusOutside:f[2]||(f[2]=v=>{v.defaultPrevented||v.target!==unref(l).trigger.value&&unref(a).onOpenChange(!1)}),onEscapeKeyDown:f[3]||(f[3]=v=>{unref(s).onClose(),v.preventDefault()}),onKeydown:f[4]||(f[4]=v=>{var b,k;const x=(b=v.currentTarget)==null?void 0:b.contains(v.target),_=unref(mu)[unref(s).dir.value].includes(v.key);x&&_&&(unref(a).onOpenChange(!1),(k=unref(l).trigger.value)==null||k.focus(),v.preventDefault())})}),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16,["id","aria-labelledby","side"])]),_:3},8,["present"]))}}),go=defineComponent({__name:"MenuSubTrigger",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(n){const e=n,o=Mt(),a=wa(),s=ls(),l=lo(),c=ref(null);s.triggerId||(s.triggerId=he(void 0,"radix-vue-menu-sub-trigger"));function d(){c.value&&window.clearTimeout(c.value),c.value=null}onUnmounted(()=>{d()});function u(b){!ua(b)||l.onItemEnter(b)||!e.disabled&&!o.open.value&&!c.value&&(l.onPointerGraceIntentChange(null),c.value=window.setTimeout(()=>{o.onOpenChange(!0),d()},100))}async function f(b){var k,x;if(!ua(b))return;d();const _=(k=o.content.value)==null?void 0:k.getBoundingClientRect();if(_!=null&&_.width){const E=(x=o.content.value)==null?void 0:x.dataset.side,B=E==="right",M=B?-5:5,V=_[B?"left":"right"],F=_[B?"right":"left"];l.onPointerGraceIntentChange({area:[{x:b.clientX+M,y:b.clientY},{x:V,y:_.top},{x:F,y:_.top},{x:F,y:_.bottom},{x:V,y:_.bottom}],side:E}),window.clearTimeout(l.pointerGraceTimerRef.value),l.pointerGraceTimerRef.value=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(b))return;l.onPointerGraceIntentChange(null)}}async function v(b){var k;const x=l.searchRef.value!=="";e.disabled||x&&b.key===" "||vu[a.dir.value].includes(b.key)&&(o.onOpenChange(!0),await nextTick(),(k=o.content.value)==null||k.focus(),b.preventDefault())}return(b,k)=>(openBlock(),createBlock(Za,{"as-child":""},{default:withCtx(()=>[createVNode(ns,mergeProps(e,{id:unref(s).triggerId,ref:x=>{var _;(_=unref(s))==null||_.onTriggerChange(x==null?void 0:x.$el)},"aria-haspopup":"menu","aria-expanded":unref(o).open.value,"aria-controls":unref(s).contentId,"data-state":unref(Qn)(unref(o).open.value),onClick:k[0]||(k[0]=async x=>{e.disabled||x.defaultPrevented||(x.currentTarget.focus(),unref(o).open.value||unref(o).onOpenChange(!0))}),onPointermove:u,onPointerleave:f,onKeydown:v}),{default:withCtx(()=>[renderSlot(b.$slots,"default")]),_:3},16,["id","aria-expanded","aria-controls","data-state"])]),_:3}))}}),[ss,kd]=Q$1("ContextMenuRoot"),om=defineComponent({inheritAttrs:!1,__name:"ContextMenuRoot",props:{dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(n,{emit:e}){const o=n,a=e,{dir:s,modal:l}=toRefs(o);R();const c=be(s),d=ref(!1);return kd({open:d,onOpenChange:u=>{d.value=u},dir:c,modal:l}),watch(d,u=>{a("update:open",u)}),(u,f)=>(openBlock(),createBlock(unref(oo),{open:d.value,"onUpdate:open":f[0]||(f[0]=v=>d.value=v),dir:unref(c),modal:unref(l)},{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},8,["open","dir","modal"]))}});function qo(n){return n.pointerType!=="mouse"}const lm=defineComponent({inheritAttrs:!1,__name:"ContextMenuTrigger",props:{disabled:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"span"}},setup(n){const e=n,{disabled:o}=toRefs(e),{forwardRef:a}=R(),s=ss(),l=ref({x:0,y:0}),c=computed(()=>({getBoundingClientRect:()=>({width:0,height:0,left:l.value.x,right:l.value.x,top:l.value.y,bottom:l.value.y,...l.value})})),d=ref(0);function u(){window.clearTimeout(d.value)}function f(x){l.value={x:x.clientX,y:x.clientY},s.onOpenChange(!0)}async function v(x){o.value||(await nextTick(),x.defaultPrevented||(u(),f(x),x.preventDefault()))}async function b(x){o.value||(await nextTick(),qo(x)&&!x.defaultPrevented&&(u(),d.value=window.setTimeout(()=>f(x),700)))}async function k(x){o.value||(await nextTick(),qo(x)&&!x.defaultPrevented&&u())}return(x,_)=>(openBlock(),createElementBlock(Fragment$1,null,[createVNode(unref(Za),{as:"template",element:c.value},null,8,["element"]),createVNode(unref(O),mergeProps({ref:unref(a),as:x.as,"as-child":x.asChild,"data-state":unref(s).open.value?"open":"closed","data-disabled":unref(o)?"":void 0,style:{WebkitTouchCallout:"none"}},x.$attrs,{onContextmenu:v,onPointerdown:b,onPointermove:k,onPointercancel:k,onPointerup:k}),{default:withCtx(()=>[renderSlot(x.$slots,"default")]),_:3},16,["as","as-child","data-state","data-disabled"])],64))}}),sm=defineComponent({__name:"ContextMenuPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(fo),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),rm$2=defineComponent({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},alignOffset:{default:0},avoidCollisions:{type:Boolean,default:!0},collisionBoundary:{default:()=>[]},collisionPadding:{default:0},sticky:{default:"partial"},hideWhenDetached:{type:Boolean,default:!1},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(n,{emit:e}){const o=xe(n,e);R();const a=ss(),s=ref(!1);return(l,c)=>(openBlock(),createBlock(unref(uo),mergeProps(unref(o),{side:"right","side-offset":2,align:"start",style:{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"},onCloseAutoFocus:c[0]||(c[0]=d=>{!d.defaultPrevented&&s.value&&d.preventDefault(),s.value=!1}),onInteractOutside:c[1]||(c[1]=d=>{!d.defaultPrevented&&!unref(a).modal.value&&(s.value=!0)})}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),[us,ic]=Q$1("DropdownMenuRoot"),sh=defineComponent({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean},open:{type:Boolean,default:void 0},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(n,{emit:e}){const o=n,a=e;R();const s=ne$1(o,"open",a,{defaultValue:o.defaultOpen,passive:o.open===void 0}),l=ref(),{modal:c,dir:d}=toRefs(o),u=be(d);return ic({open:s,onOpenChange:f=>{s.value=f},onOpenToggle:()=>{s.value=!s.value},triggerId:"",triggerElement:l,contentId:"",modal:c,dir:u}),(f,v)=>(openBlock(),createBlock(unref(oo),{open:unref(s),"onUpdate:open":v[0]||(v[0]=b=>isRef(s)?s.value=b:null),dir:unref(u),modal:unref(c)},{default:withCtx(()=>[renderSlot(f.$slots,"default",{open:unref(s)})]),_:3},8,["open","dir","modal"]))}}),rh=defineComponent({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n,o=us(),{forwardRef:a,currentElement:s}=R();return onMounted(()=>{o.triggerElement=s}),o.triggerId||(o.triggerId=he(void 0,"radix-vue-dropdown-menu-trigger")),(l,c)=>(openBlock(),createBlock(unref(Za),{"as-child":""},{default:withCtx(()=>[createVNode(unref(O),{id:unref(o).triggerId,ref:unref(a),type:l.as==="button"?"button":void 0,"as-child":e.asChild,as:l.as,"aria-haspopup":"menu","aria-expanded":unref(o).open.value,"aria-controls":unref(o).open.value?unref(o).contentId:void 0,"data-disabled":l.disabled?"":void 0,disabled:l.disabled,"data-state":unref(o).open.value?"open":"closed",onClick:c[0]||(c[0]=async d=>{var u;!l.disabled&&d.button===0&&d.ctrlKey===!1&&((u=unref(o))==null||u.onOpenToggle(),await nextTick(),unref(o).open.value&&d.preventDefault())}),onKeydown:c[1]||(c[1]=withKeys(d=>{l.disabled||(["Enter"," "].includes(d.key)&&unref(o).onOpenToggle(),d.key==="ArrowDown"&&unref(o).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())},["enter","space","arrow-down"]))},{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),ih=defineComponent({__name:"DropdownMenuPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(fo),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),uh=defineComponent({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(n,{emit:e}){const o=xe(n,e);R();const a=us(),s=ref(!1);function l(c){c.defaultPrevented||(s.value||setTimeout(()=>{var d;(d=a.triggerElement.value)==null||d.focus()},0),s.value=!1,c.preventDefault())}return a.contentId||(a.contentId=he(void 0,"radix-vue-dropdown-menu-content")),(c,d)=>{var u;return openBlock(),createBlock(unref(uo),mergeProps(unref(o),{id:unref(a).contentId,"aria-labelledby":(u=unref(a))==null?void 0:u.triggerId,style:{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"},onCloseAutoFocus:l,onInteractOutside:d[0]||(d[0]=f=>{var v;if(f.defaultPrevented)return;const b=f.detail.originalEvent,k=b.button===0&&b.ctrlKey===!0,x=b.button===2||k;(!unref(a).modal.value||x)&&(s.value=!0),(v=unref(a).triggerElement.value)!=null&&v.contains(f.target)&&f.preventDefault()})}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),ch$1=defineComponent({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(n,{emit:e}){const o=n,a=Ae(e);return R(),(s,l)=>(openBlock(),createBlock(unref(_a$1),normalizeProps(guardReactiveProps({...o,...unref(a)})),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16))}}),fh=defineComponent({__name:"DropdownMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return R(),(o,a)=>(openBlock(),createBlock(unref(Qa),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),vh=defineComponent({__name:"DropdownMenuCheckboxItem",props:{checked:{type:[Boolean,String]},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select","update:checked"],setup(n,{emit:e}){const o=n,a=Ae(e);return R(),(s,l)=>(openBlock(),createBlock(unref(io),normalizeProps(guardReactiveProps({...o,...unref(a)})),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16))}}),mh=defineComponent({__name:"DropdownMenuItemIndicator",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=n;return R(),(o,a)=>(openBlock(),createBlock(unref(ro),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),bh=defineComponent({__name:"DropdownMenuSub",props:{defaultOpen:{type:Boolean},open:{type:Boolean,default:void 0}},emits:["update:open"],setup(n,{emit:e}){const o=n,a=ne$1(o,"open",e,{passive:o.open===void 0,defaultValue:o.defaultOpen??!1});return R(),(s,l)=>(openBlock(),createBlock(unref(ho),{open:unref(a),"onUpdate:open":l[0]||(l[0]=c=>isRef(a)?a.value=c:null)},{default:withCtx(()=>[renderSlot(s.$slots,"default",{open:unref(a)})]),_:3},8,["open"]))}}),Ch=defineComponent({__name:"DropdownMenuSubContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideOffset:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=xe(n,e);return R(),(a,s)=>(openBlock(),createBlock(unref(yo),mergeProps(unref(o),{style:{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),wh=defineComponent({__name:"DropdownMenuSubTrigger",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(n){const e=n;return R(),(o,a)=>(openBlock(),createBlock(unref(go),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),Oh=defineComponent({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(n){const e=n;return R(),(o,a)=>(openBlock(),createBlock(unref(O),mergeProps(e,{onMousedown:a[0]||(a[0]=s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),[Nt,Xc]=Q$1("PopoverRoot"),ys=defineComponent({__name:"PopoverRoot",props:{defaultOpen:{type:Boolean,default:!1},open:{type:Boolean,default:void 0},modal:{type:Boolean,default:!1}},emits:["update:open"],setup(n,{emit:e}){const o=n,a=e,{modal:s}=toRefs(o),l=ne$1(o,"open",a,{defaultValue:o.defaultOpen,passive:o.open===void 0}),c=ref(),d=ref(!1);return Xc({contentId:"",modal:s,open:l,onOpenChange:u=>{l.value=u},onOpenToggle:()=>{l.value=!l.value},triggerElement:c,hasCustomAnchor:d}),(u,f)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(u.$slots,"default",{open:unref(l)})]),_:3}))}}),gs=defineComponent({__name:"PopoverTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n,o=Nt(),{forwardRef:a,currentElement:s}=R();return onMounted(()=>{o.triggerElement.value=s.value}),(l,c)=>(openBlock(),createBlock(resolveDynamicComponent(unref(o).hasCustomAnchor.value?unref(O):unref(kt)),{"as-child":""},{default:withCtx(()=>[createVNode(unref(O),{ref:unref(a),type:l.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":unref(o).open.value,"aria-controls":unref(o).contentId,"data-state":unref(o).open.value?"open":"closed",as:l.as,"as-child":e.asChild,onClick:unref(o).onOpenToggle},{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},8,["type","aria-expanded","aria-controls","data-state","as","as-child","onClick"])]),_:3}))}}),bs=defineComponent({__name:"PopoverPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),Cs=defineComponent({__name:"PopoverContentImpl",props:{trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=At(o),{forwardRef:l}=R(),c=Nt();return Gn(),(d,u)=>(openBlock(),createBlock(unref(Ya),{"as-child":"",loop:"",trapped:d.trapFocus,onMountAutoFocus:u[5]||(u[5]=f=>a("openAutoFocus",f)),onUnmountAutoFocus:u[6]||(u[6]=f=>a("closeAutoFocus",f))},{default:withCtx(()=>[createVNode(unref(gt$1),{"as-child":"","disable-outside-pointer-events":d.disableOutsidePointerEvents,onPointerDownOutside:u[0]||(u[0]=f=>a("pointerDownOutside",f)),onInteractOutside:u[1]||(u[1]=f=>a("interactOutside",f)),onEscapeKeyDown:u[2]||(u[2]=f=>a("escapeKeyDown",f)),onFocusOutside:u[3]||(u[3]=f=>a("focusOutside",f)),onDismiss:u[4]||(u[4]=f=>unref(c).onOpenChange(!1))},{default:withCtx(()=>[createVNode(unref(Bt),mergeProps(unref(s),{id:unref(c).contentId,ref:unref(l),"data-state":unref(c).open.value?"open":"closed",role:"dialog",style:{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["id","data-state"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),Zc=defineComponent({__name:"PopoverContentModal",props:{trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=Nt(),l=ref(!1);ha(!0);const c=xe(o,a),{forwardRef:d,currentElement:u}=R();return ya(u),(f,v)=>(openBlock(),createBlock(Cs,mergeProps(unref(c),{ref:unref(d),"trap-focus":unref(s).open.value,"disable-outside-pointer-events":"",onCloseAutoFocus:v[0]||(v[0]=withModifiers(b=>{var k;a("closeAutoFocus",b),l.value||(k=unref(s).triggerElement.value)==null||k.focus()},["prevent"])),onPointerDownOutside:v[1]||(v[1]=b=>{a("pointerDownOutside",b);const k=b.detail.originalEvent,x=k.button===0&&k.ctrlKey===!0,_=k.button===2||x;l.value=_}),onFocusOutside:v[2]||(v[2]=withModifiers(()=>{},["prevent"]))}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["trap-focus"]))}}),Jc=defineComponent({__name:"PopoverContentNonModal",props:{trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=Nt(),l=ref(!1),c=ref(!1),d=xe(o,a);return(u,f)=>(openBlock(),createBlock(Cs,mergeProps(unref(d),{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:f[0]||(f[0]=v=>{var b;a("closeAutoFocus",v),v.defaultPrevented||(l.value||(b=unref(s).triggerElement.value)==null||b.focus(),v.preventDefault()),l.value=!1,c.value=!1}),onInteractOutside:f[1]||(f[1]=async v=>{var b;a("interactOutside",v),v.defaultPrevented||(l.value=!0,v.detail.originalEvent.type==="pointerdown"&&(c.value=!0));const k=v.target;(b=unref(s).triggerElement.value)!=null&&b.contains(k)&&v.preventDefault(),v.detail.originalEvent.type==="focusin"&&c.value&&v.preventDefault()})}),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16))}}),ws=defineComponent({__name:"PopoverContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=Nt(),l=xe(o,a),{forwardRef:c}=R();return s.contentId||(s.contentId=he(void 0,"radix-vue-popover-content")),(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||unref(s).open.value},{default:withCtx(()=>[unref(s).modal.value?(openBlock(),createBlock(Zc,mergeProps({key:0},unref(l),{ref:unref(c)}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16)):(openBlock(),createBlock(Jc,mergeProps({key:1},unref(l),{ref:unref(c)}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),[He,Pf]=Q$1("ScrollAreaRoot"),Oy=defineComponent({__name:"ScrollAreaRoot",props:{type:{default:"hover"},dir:{},scrollHideDelay:{default:600},asChild:{type:Boolean},as:{}},setup(n,{expose:e}){const o=n,a=ref(0),s=ref(0),l=ref(),c=ref(),d=ref(),u=ref(),f=ref(!1),v=ref(!1),{type:b,dir:k,scrollHideDelay:x}=toRefs(o),_=be(k);function E(){var F;(F=l.value)==null||F.scrollTo({top:0})}function B(){var F;(F=l.value)==null||F.scrollTo({top:0,left:0})}e({viewport:l,scrollTop:E,scrollTopLeft:B});const{forwardRef:M,currentElement:V}=R();return Pf({type:b,dir:_,scrollHideDelay:x,scrollArea:V,viewport:l,onViewportChange:F=>{l.value=F||void 0},content:c,onContentChange:F=>{c.value=F},scrollbarX:d,scrollbarXEnabled:f,scrollbarY:u,scrollbarYEnabled:v,onScrollbarXChange:F=>{d.value=F||void 0},onScrollbarYChange:F=>{u.value=F||void 0},onScrollbarXEnabledChange:F=>{f.value=F},onScrollbarYEnabledChange:F=>{v.value=F},onCornerWidthChange:F=>{a.value=F},onCornerHeightChange:F=>{s.value=F}}),(F,I)=>(openBlock(),createBlock(unref(O),{ref:unref(M),"as-child":o.asChild,as:F.as,dir:unref(_),style:normalizeStyle({position:"relative","--radix-scroll-area-corner-width":`${a.value}px`,"--radix-scroll-area-corner-height":`${s.value}px`})},{default:withCtx(()=>[renderSlot(F.$slots,"default")]),_:3},8,["as-child","as","dir","style"]))}}),ky=defineComponent({inheritAttrs:!1,__name:"ScrollAreaViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(n,{expose:e}){const o=n,{nonce:a}=toRefs(o),s=Xa(a),l=He(),c=ref();onMounted(()=>{l.onViewportChange(c.value),l.onContentChange(u.value)}),e({viewportElement:c});const{forwardRef:d,currentElement:u}=R();return(f,v)=>(openBlock(),createElementBlock(Fragment$1,null,[createBaseVNode("div",mergeProps({ref_key:"viewportElement",ref:c,"data-radix-scroll-area-viewport":"",style:{overflowX:unref(l).scrollbarXEnabled.value?"scroll":"hidden",overflowY:unref(l).scrollbarYEnabled.value?"scroll":"hidden"}},f.$attrs,{tabindex:0}),[createVNode(unref(O),{ref:unref(d),style:normalizeStyle({minWidth:unref(l).scrollbarXEnabled.value?"fit-content":void 0}),"as-child":o.asChild,as:f.as},{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},8,["style","as-child","as"])],16),createVNode(unref(O),{as:"style",nonce:unref(s)},{default:withCtx(()=>[createTextVNode(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-radix-scroll-area-viewport] { scrollbar-width:none; -ms-overflow-style:none; -webkit-overflow-scrolling:touch; } [data-radix-scroll-area-viewport]::-webkit-scrollbar { display:none; } ")]),_:1},8,["nonce"])],64))}});function Es(n,e){return o=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const a=(e[1]-e[0])/(n[1]-n[0]);return e[0]+a*(o-n[0])}}function nn(n){const e=Ps(n.viewport,n.content),o=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,a=(n.scrollbar.size-o)*e;return Math.max(a,18)}function Ps(n,e){const o=n/e;return Number.isNaN(o)?0:o}function Df(n,e=()=>{}){let o={left:n.scrollLeft,top:n.scrollTop},a=0;return function s(){const l={left:n.scrollLeft,top:n.scrollTop},c=o.left!==l.left,d=o.top!==l.top;(c||d)&&e(),o=l,a=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(a)}function Jo(n,e,o="ltr"){const a=nn(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,l=e.scrollbar.size-s,c=e.content-e.viewport,d=l-a,u=o==="ltr"?[0,c]:[c*-1,0],f=jt(n,u[0],u[1]);return Es([0,c],[0,d])(f)}function Ia(n){return n?Number.parseInt(n,10):0}function $f(n,e,o,a="ltr"){const s=nn(o),l=s/2,c=e||l,d=s-c,u=o.scrollbar.paddingStart+c,f=o.scrollbar.size-o.scrollbar.paddingEnd-d,v=o.content-o.viewport,b=a==="ltr"?[0,v]:[v*-1,0];return Es([u,f],b)(n)}function Qo(n,e){return n>0&&n<e}const Ds=defineComponent({__name:"ScrollAreaScrollbarImpl",props:{isHorizontal:{type:Boolean}},emits:["onDragScroll","onWheelScroll","onThumbPointerDown"],setup(n,{emit:e}){const o=n,a=e,s=He(),l=on(),c=ln(),{forwardRef:d,currentElement:u}=R(),f=ref(""),v=ref();function b(M){var V,F;if(v.value){const I=M.clientX-((V=v.value)==null?void 0:V.left),L=M.clientY-((F=v.value)==null?void 0:F.top);a("onDragScroll",{x:I,y:L})}}function k(M){M.button===0&&(M.target.setPointerCapture(M.pointerId),v.value=u.value.getBoundingClientRect(),f.value=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",s.viewport&&(s.viewport.value.style.scrollBehavior="auto"),b(M))}function x(M){b(M)}function _(M){const V=M.target;V.hasPointerCapture(M.pointerId)&&V.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=f.value,s.viewport&&(s.viewport.value.style.scrollBehavior=""),v.value=void 0}function E(M){var V;const F=M.target,I=(V=u.value)==null?void 0:V.contains(F),L=l.sizes.value.content-l.sizes.value.viewport;I&&l.handleWheelScroll(M,L)}onMounted(()=>{document.addEventListener("wheel",E,{passive:!1})}),onUnmounted(()=>{document.removeEventListener("wheel",E)});function B(){var M,V,F,I,L;u.value&&(o.isHorizontal?l.handleSizeChange({content:((M=s.viewport.value)==null?void 0:M.scrollWidth)??0,viewport:((V=s.viewport.value)==null?void 0:V.offsetWidth)??0,scrollbar:{size:u.value.clientWidth??0,paddingStart:Ia(getComputedStyle(u.value).paddingLeft),paddingEnd:Ia(getComputedStyle(u.value).paddingRight)}}):l.handleSizeChange({content:((F=s.viewport.value)==null?void 0:F.scrollHeight)??0,viewport:((I=s.viewport.value)==null?void 0:I.offsetHeight)??0,scrollbar:{size:((L=u.value)==null?void 0:L.clientHeight)??0,paddingStart:Ia(getComputedStyle(u.value).paddingLeft),paddingEnd:Ia(getComputedStyle(u.value).paddingRight)}}))}return Je(u,B),Je(s.content,B),(M,V)=>(openBlock(),createBlock(unref(O),{ref:unref(d),style:{position:"absolute"},"data-scrollbarimpl":"",as:unref(c).as.value,"as-child":unref(c).asChild.value,onPointerdown:k,onPointermove:x,onPointerup:_},{default:withCtx(()=>[renderSlot(M.$slots,"default")]),_:3},8,["as","as-child"]))}}),Bf=defineComponent({__name:"ScrollAreaScrollbarX",setup(n){const e=He(),o=on(),{forwardRef:a,currentElement:s}=R();onMounted(()=>{s.value&&e.onScrollbarXChange(s.value)});const l=computed(()=>o.sizes.value);return(c,d)=>(openBlock(),createBlock(Ds,{ref:unref(a),"is-horizontal":!0,"data-orientation":"horizontal",style:normalizeStyle({bottom:0,left:unref(e).dir.value==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:unref(e).dir.value==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":l.value?`${unref(nn)(l.value)}px`:void 0}),onOnDragScroll:d[0]||(d[0]=u=>unref(o).onDragScroll(u.x))},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["style"]))}}),If=defineComponent({__name:"ScrollAreaScrollbarY",setup(n){const e=He(),o=on(),{forwardRef:a,currentElement:s}=R();onMounted(()=>{s.value&&e.onScrollbarYChange(s.value)});const l=computed(()=>o.sizes.value);return(c,d)=>(openBlock(),createBlock(Ds,{ref:unref(a),"is-horizontal":!1,"data-orientation":"vertical",style:normalizeStyle({top:0,right:unref(e).dir.value==="ltr"?0:void 0,left:unref(e).dir.value==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":l.value?`${unref(nn)(l.value)}px`:void 0}),onOnDragScroll:d[0]||(d[0]=u=>unref(o).onDragScroll(u.y))},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["style"]))}}),[on,Tf]=Q$1("ScrollAreaScrollbarVisible"),Do=defineComponent({__name:"ScrollAreaScrollbarVisible",setup(n){const e=He(),o=ln(),{forwardRef:a}=R(),s=ref({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=computed(()=>{const M=Ps(s.value.viewport,s.value.content);return M>0&&M<1}),c=ref(),d=ref(0);function u(M,V){if(x.value){const F=e.viewport.value.scrollLeft+M.deltaY;e.viewport.value.scrollLeft=F,Qo(F,V)&&M.preventDefault()}else{const F=e.viewport.value.scrollTop+M.deltaY;e.viewport.value.scrollTop=F,Qo(F,V)&&M.preventDefault()}}function f(M,V){x.value?d.value=V.x:d.value=V.y}function v(M){d.value=0}function b(M){s.value=M}function k(M,V){return $f(M,d.value,s.value,V)}const x=computed(()=>o.isHorizontal.value);function _(M){x.value?e.viewport.value.scrollLeft=k(M,e.dir.value):e.viewport.value.scrollTop=k(M)}function E(){if(x.value){if(e.viewport.value&&c.value){const M=e.viewport.value.scrollLeft,V=Jo(M,s.value,e.dir.value);c.value.style.transform=`translate3d(${V}px, 0, 0)`}}else if(e.viewport.value&&c.value){const M=e.viewport.value.scrollTop,V=Jo(M,s.value);c.value.style.transform=`translate3d(0, ${V}px, 0)`}}function B(M){c.value=M}return Tf({sizes:s,hasThumb:l,handleWheelScroll:u,handleThumbDown:f,handleThumbUp:v,handleSizeChange:b,onThumbPositionChange:E,onThumbChange:B,onDragScroll:_}),(M,V)=>x.value?(openBlock(),createBlock(Bf,mergeProps({key:0},M.$attrs,{ref:unref(a)}),{default:withCtx(()=>[renderSlot(M.$slots,"default")]),_:3},16)):(openBlock(),createBlock(If,mergeProps({key:1},M.$attrs,{ref:unref(a)}),{default:withCtx(()=>[renderSlot(M.$slots,"default")]),_:3},16))}}),$s=defineComponent({__name:"ScrollAreaScrollbarAuto",props:{forceMount:{type:Boolean}},setup(n){const e=He(),o=ln(),{forwardRef:a}=R(),s=ref(!1),l=Hn(()=>{if(e.viewport.value){const c=e.viewport.value.offsetWidth<e.viewport.value.scrollWidth,d=e.viewport.value.offsetHeight<e.viewport.value.scrollHeight;s.value=o.isHorizontal.value?c:d}},10);return onMounted(()=>l()),Je(e.viewport,l),Je(e.content,l),(c,d)=>(openBlock(),createBlock(unref(Pe$1),{present:c.forceMount||s.value},{default:withCtx(()=>[createVNode(Do,mergeProps(c.$attrs,{ref:unref(a),"data-state":s.value?"visible":"hidden"}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Rf=defineComponent({inheritAttrs:!1,__name:"ScrollAreaScrollbarHover",props:{forceMount:{type:Boolean}},setup(n){const e=He(),{forwardRef:o}=R();let a;const s=ref(!1);function l(){window.clearTimeout(a),s.value=!0}function c(){a=window.setTimeout(()=>{s.value=!1},e.scrollHideDelay.value)}return onMounted(()=>{const d=e.scrollArea.value;d&&(d.addEventListener("pointerenter",l),d.addEventListener("pointerleave",c))}),onUnmounted(()=>{const d=e.scrollArea.value;d&&(window.clearTimeout(a),d.removeEventListener("pointerenter",l),d.removeEventListener("pointerleave",c))}),(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||s.value},{default:withCtx(()=>[createVNode($s,mergeProps(d.$attrs,{ref:unref(o),"data-state":s.value?"visible":"hidden"}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Af=defineComponent({__name:"ScrollAreaScrollbarScroll",props:{forceMount:{type:Boolean}},setup(n){const e=He(),o=ln(),{forwardRef:a}=R(),{state:s,dispatch:l}=Fl("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});watchEffect(d=>{if(s.value==="idle"){const u=window.setTimeout(()=>l("HIDE"),e.scrollHideDelay.value);d(()=>{window.clearTimeout(u)})}});const c=Hn(()=>l("SCROLL_END"),100);return watchEffect(d=>{const u=e.viewport.value,f=o.isHorizontal.value?"scrollLeft":"scrollTop";if(u){let v=u[f];const b=()=>{const k=u[f];v!==k&&(l("SCROLL"),c()),v=k};u.addEventListener("scroll",b),d(()=>{u.removeEventListener("scroll",b)})}}),(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||unref(s)!=="hidden"},{default:withCtx(()=>[createVNode(Do,mergeProps(d.$attrs,{ref:unref(a)}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),[ln,Of]=Q$1("ScrollAreaScrollbar"),My=defineComponent({inheritAttrs:!1,__name:"ScrollAreaScrollbar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},setup(n){const e=n,{forwardRef:o}=R(),a=He(),s=computed(()=>e.orientation==="horizontal");watch(s,()=>{s.value?a.onScrollbarXEnabledChange(!0):a.onScrollbarYEnabledChange(!0)},{immediate:!0}),onUnmounted(()=>{a.onScrollbarXEnabledChange(!1),a.onScrollbarYEnabledChange(!1)});const{orientation:l,forceMount:c,asChild:d,as:u}=toRefs(e);return Of({orientation:l,forceMount:c,isHorizontal:s,as:u,asChild:d}),(f,v)=>unref(a).type.value==="hover"?(openBlock(),createBlock(Rf,mergeProps({key:0},f.$attrs,{ref:unref(o),"force-mount":unref(c)}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["force-mount"])):unref(a).type.value==="scroll"?(openBlock(),createBlock(Af,mergeProps({key:1},f.$attrs,{ref:unref(o),"force-mount":unref(c)}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["force-mount"])):unref(a).type.value==="auto"?(openBlock(),createBlock($s,mergeProps({key:2},f.$attrs,{ref:unref(o),"force-mount":unref(c)}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["force-mount"])):unref(a).type.value==="always"?(openBlock(),createBlock(Do,mergeProps({key:3},f.$attrs,{ref:unref(o),"data-state":"visible"}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16)):createCommentVNode("",!0)}}),Vy=defineComponent({__name:"ScrollAreaThumb",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n,o=He(),a=on();function s(k){const x=k.target.getBoundingClientRect(),_=k.clientX-x.left,E=k.clientY-x.top;a.handleThumbDown(k,{x:_,y:E})}function l(k){a.handleThumbUp(k)}const{forwardRef:c,currentElement:d}=R(),u=ref(),f=computed(()=>o.viewport.value);function v(){if(!u.value){const k=Df(f.value,a.onThumbPositionChange);u.value=k,a.onThumbPositionChange()}}const b=computed(()=>a.sizes.value);return hi(b,()=>{a.onThumbChange(d.value),f.value&&(a.onThumbPositionChange(),f.value.addEventListener("scroll",v))}),onUnmounted(()=>{var k;f.value.removeEventListener("scroll",v),(k=o.viewport.value)==null||k.removeEventListener("scroll",v)}),(k,x)=>(openBlock(),createBlock(unref(O),{ref:unref(c),"data-state":unref(a).hasThumb?"visible":"hidden",style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},"as-child":e.asChild,as:k.as,onPointerdown:s,onPointerup:l},{default:withCtx(()=>[renderSlot(k.$slots,"default")]),_:3},8,["data-state","as-child","as"]))}}),kf=defineComponent({__name:"ScrollAreaCornerImpl",setup(n){const e=He(),o=ref(0),a=ref(0),s=computed(()=>!!o.value&&!!a.value);function l(){var d;const u=((d=e.scrollbarX.value)==null?void 0:d.offsetHeight)||0;e.onCornerHeightChange(u),a.value=u}function c(){var d;const u=((d=e.scrollbarY.value)==null?void 0:d.offsetWidth)||0;e.onCornerWidthChange(u),o.value=u}return Je(e.scrollbarX.value,l),Je(e.scrollbarY.value,c),watch(()=>e.scrollbarX.value,l),watch(()=>e.scrollbarY.value,c),(d,u)=>{var f;return s.value?(openBlock(),createBlock(unref(O),mergeProps({key:0,style:{width:`${o.value}px`,height:`${a.value}px`,position:"absolute",right:unref(e).dir.value==="ltr"?0:void 0,left:unref(e).dir.value==="rtl"?0:void 0,bottom:0}},(f=d.$parent)==null?void 0:f.$props),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["style"])):createCommentVNode("",!0)}}}),Fy=defineComponent({__name:"ScrollAreaCorner",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n,{forwardRef:o}=R(),a=He(),s=computed(()=>!!a.scrollbarX.value&&!!a.scrollbarY.value),l=computed(()=>a.type.value!=="scroll"&&s.value);return(c,d)=>l.value?(openBlock(),createBlock(kf,mergeProps({key:0},e,{ref:unref(o)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16)):createCommentVNode("",!0)}}),Mf=["default-value"],Vf=defineComponent({__name:"BubbleSelect",props:{autocomplete:{},autofocus:{type:Boolean},disabled:{type:Boolean},form:{},multiple:{type:Boolean},name:{},required:{type:Boolean},size:{},value:{}},setup(n){const e=n,{value:o}=toRefs(e),a=ref();return(s,l)=>(openBlock(),createBlock(unref(Zt),{"as-child":""},{default:withCtx(()=>[withDirectives(createBaseVNode("select",mergeProps({ref_key:"selectElement",ref:a},e,{"onUpdate:modelValue":l[0]||(l[0]=c=>isRef(o)?o.value=c:null),"default-value":unref(o)}),[renderSlot(s.$slots,"default")],16,Mf),[[vModelSelect,unref(o)]])]),_:3}))}}),Ff={key:0,value:""},[wt,Bs]=Q$1("SelectRoot"),[Nf,Lf]=Q$1("SelectRoot"),Ny=defineComponent({__name:"SelectRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean},defaultValue:{default:""},modelValue:{default:void 0},dir:{},name:{},autocomplete:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(n,{emit:e}){const o=n,a=e,s=ne$1(o,"modelValue",a,{defaultValue:o.defaultValue,passive:o.modelValue===void 0}),l=ne$1(o,"open",a,{defaultValue:o.defaultOpen,passive:o.open===void 0}),c=ref(),d=ref(),u=ref({x:0,y:0}),f=ref(!1),{required:v,disabled:b,dir:k}=toRefs(o),x=be(k);Bs({triggerElement:c,onTriggerChange:M=>{c.value=M},valueElement:d,onValueElementChange:M=>{d.value=M},valueElementHasChildren:f,onValueElementHasChildrenChange:M=>{f.value=M},contentId:"",modelValue:s,onValueChange:M=>{s.value=M},open:l,required:v,onOpenChange:M=>{l.value=M},dir:x,triggerPointerDownPosRef:u,disabled:b});const _=Qe(c),E=ref(new Set),B=computed(()=>Array.from(E.value).map(M=>{var V;return(V=M.props)==null?void 0:V.value}).join(";"));return Lf({onNativeOptionAdd:M=>{E.value.add(M)},onNativeOptionRemove:M=>{E.value.delete(M)}}),(M,V)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(M.$slots,"default",{modelValue:unref(s),open:unref(l)}),unref(_)?(openBlock(),createBlock(Vf,mergeProps({key:B.value},M.$attrs,{"aria-hidden":"true",tabindex:"-1",required:unref(v),name:M.name,autocomplete:M.autocomplete,disabled:unref(b),value:unref(s),onChange:V[0]||(V[0]=F=>s.value=F.target.value)}),{default:withCtx(()=>[unref(s)===void 0?(openBlock(),createElementBlock("option",Ff)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment$1,null,renderList(Array.from(E.value),F=>(openBlock(),createBlock(resolveDynamicComponent(F),mergeProps({ref_for:!0},F.props,{key:F.key??""}),null,16))),128))]),_:1},16,["required","name","autocomplete","disabled","value"])):createCommentVNode("",!0)]),_:3}))}}),zf=[" ","Enter","ArrowUp","ArrowDown"],Kf=[" ","Enter"],Ue=10;function Is(n){return n===""||vt$1(n)}const Ly=defineComponent({__name:"SelectTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n,o=wt(),a=computed(()=>{var x;return((x=o.disabled)==null?void 0:x.value)||e.disabled}),{forwardRef:s,currentElement:l}=R();o.contentId||(o.contentId=he(void 0,"radix-vue-select-content")),onMounted(()=>{o.triggerElement=l});const{injectCollection:c}=Me(),d=c(),{search:u,handleTypeaheadSearch:f,resetTypeahead:v}=ga(d);function b(){a.value||(o.onOpenChange(!0),v())}function k(x){b(),o.triggerPointerDownPosRef.value={x:Math.round(x.pageX),y:Math.round(x.pageY)}}return(x,_)=>(openBlock(),createBlock(unref(kt),{"as-child":""},{default:withCtx(()=>{var E,B,M,V;return[createVNode(unref(O),{ref:unref(s),role:"combobox",type:x.as==="button"?"button":void 0,"aria-controls":unref(o).contentId,"aria-expanded":unref(o).open.value||!1,"aria-required":(E=unref(o).required)==null?void 0:E.value,"aria-autocomplete":"none",disabled:a.value,dir:(B=unref(o))==null?void 0:B.dir.value,"data-state":(M=unref(o))!=null&&M.open.value?"open":"closed","data-disabled":a.value?"":void 0,"data-placeholder":unref(Is)((V=unref(o).modelValue)==null?void 0:V.value)?"":void 0,"as-child":x.asChild,as:x.as,onClick:_[0]||(_[0]=F=>{var I;(I=F==null?void 0:F.currentTarget)==null||I.focus()}),onPointerdown:_[1]||(_[1]=F=>{if(F.pointerType==="touch")return F.preventDefault();const I=F.target;I.hasPointerCapture(F.pointerId)&&I.releasePointerCapture(F.pointerId),F.button===0&&F.ctrlKey===!1&&(k(F),F.preventDefault())}),onPointerup:_[2]||(_[2]=withModifiers(F=>{F.pointerType==="touch"&&k(F)},["prevent"])),onKeydown:_[3]||(_[3]=F=>{const I=unref(u)!=="";!(F.ctrlKey||F.altKey||F.metaKey)&&F.key.length===1&&I&&F.key===" "||(unref(f)(F.key),unref(zf).includes(F.key)&&(b(),F.preventDefault()))})},{default:withCtx(()=>[renderSlot(x.$slots,"default")]),_:3},8,["type","aria-controls","aria-expanded","aria-required","disabled","dir","data-state","data-disabled","data-placeholder","as-child","as"])]}),_:3}))}}),zy=defineComponent({__name:"SelectPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),[$o,Hf]=Q$1("SelectItemAlignedPosition"),Wf=defineComponent({inheritAttrs:!1,__name:"SelectItemAlignedPosition",props:{asChild:{type:Boolean},as:{}},emits:["placed"],setup(n,{emit:e}){const o=n,a=e,{injectCollection:s}=Me(),l=wt(),c=_t(),d=s(),u=ref(!1),f=ref(!0),v=ref(),{forwardRef:b,currentElement:k}=R(),{viewport:x,selectedItem:_,selectedItemText:E,focusSelectedItem:B}=c;function M(){if(l.triggerElement.value&&l.valueElement.value&&v.value&&k.value&&x!=null&&x.value&&_!=null&&_.value&&E!=null&&E.value){const I=l.triggerElement.value.getBoundingClientRect(),L=k.value.getBoundingClientRect(),U=l.valueElement.value.getBoundingClientRect(),Z=E.value.getBoundingClientRect();if(l.dir.value!=="rtl"){const Te=Z.left-L.left,Ce=U.left-Te,we=I.left-Ce,ce=I.width+we,ee=Math.max(ce,L.width),oe=window.innerWidth-Ue,se=jt(Ce,Ue,Math.max(Ue,oe-ee));v.value.style.minWidth=`${ce}px`,v.value.style.left=`${se}px`}else{const Te=L.right-Z.right,Ce=window.innerWidth-U.right-Te,we=window.innerWidth-I.right-Ce,ce=I.width+we,ee=Math.max(ce,L.width),oe=window.innerWidth-Ue,se=jt(Ce,Ue,Math.max(Ue,oe-ee));v.value.style.minWidth=`${ce}px`,v.value.style.right=`${se}px`}const K=d.value,j=window.innerHeight-Ue*2,W=x.value.scrollHeight,Y=window.getComputedStyle(k.value),G=Number.parseInt(Y.borderTopWidth,10),fe=Number.parseInt(Y.paddingTop,10),le=Number.parseInt(Y.borderBottomWidth,10),pe=Number.parseInt(Y.paddingBottom,10),ue=G+fe+W+pe+le,Ne=Math.min(_.value.offsetHeight*5,ue),Ve=window.getComputedStyle(x.value),Ze=Number.parseInt(Ve.paddingTop,10),We=Number.parseInt(Ve.paddingBottom,10),ze=I.top+I.height/2-Ue,qe=j-ze,dt=_.value.offsetHeight/2,Xe=_.value.offsetTop+dt,Ge=G+fe+Xe,ft=ue-Ge;if(Ge<=ze){const Te=_.value===K[K.length-1];v.value.style.bottom="0px";const Ce=k.value.clientHeight-x.value.offsetTop-x.value.offsetHeight,we=Math.max(qe,dt+(Te?We:0)+Ce+le),ce=Ge+we;v.value.style.height=`${ce}px`}else{const Te=_.value===K[0];v.value.style.top="0px";const Ce=Math.max(ze,G+x.value.offsetTop+(Te?Ze:0)+dt)+ft;v.value.style.height=`${Ce}px`,x.value.scrollTop=Ge-ze+x.value.offsetTop}v.value.style.margin=`${Ue}px 0`,v.value.style.minHeight=`${Ne}px`,v.value.style.maxHeight=`${j}px`,a("placed"),requestAnimationFrame(()=>u.value=!0)}}const V=ref("");onMounted(async()=>{await nextTick(),M(),k.value&&(V.value=window.getComputedStyle(k.value).zIndex)});function F(I){I&&f.value===!0&&(M(),B==null||B(),f.value=!1)}return Hf({contentWrapper:v,shouldExpandOnScrollRef:u,onScrollButtonChange:F}),(I,L)=>(openBlock(),createElementBlock("div",{ref_key:"contentWrapperElement",ref:v,style:normalizeStyle({display:"flex",flexDirection:"column",position:"fixed",zIndex:V.value})},[createVNode(unref(O),mergeProps({ref:unref(b),style:{boxSizing:"border-box",maxHeight:"100%"}},{...I.$attrs,...o}),{default:withCtx(()=>[renderSlot(I.$slots,"default")]),_:3},16)],4))}}),jf=defineComponent({__name:"SelectPopperPosition",props:{side:{},sideOffset:{},align:{default:"start"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{default:Ue},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=At(n);return(o,a)=>(openBlock(),createBlock(unref(Bt),mergeProps(unref(e),{style:{boxSizing:"border-box","--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),Lt={onViewportChange:()=>{},itemTextRefCallback:()=>{},itemRefCallback:()=>{}},[_t,Uf]=Q$1("SelectContent"),Gf=defineComponent({__name:"SelectContentImpl",props:{position:{default:"item-aligned"},bodyLock:{type:Boolean,default:!0},side:{},sideOffset:{},align:{default:"start"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(n,{emit:e}){const o=n,a=e,s=wt();Gn(),ha(o.bodyLock);const{createCollection:l}=Me(),c=ref();ya(c);const d=l(c),{search:u,handleTypeaheadSearch:f}=ga(d),v=ref(),b=ref(),k=ref(),x=ref(!1),_=ref(!1);function E(){b.value&&c.value&&$n([b.value,c.value])}watch(x,()=>{E()});const{onOpenChange:B,triggerPointerDownPosRef:M}=s;watchEffect(L=>{if(!c.value)return;let U={x:0,y:0};const Z=j=>{var W,Y;U={x:Math.abs(Math.round(j.pageX)-(((W=M.value)==null?void 0:W.x)??0)),y:Math.abs(Math.round(j.pageY)-(((Y=M.value)==null?void 0:Y.y)??0))}},K=j=>{var W;j.pointerType!=="touch"&&(U.x<=10&&U.y<=10?j.preventDefault():(W=c.value)!=null&&W.contains(j.target)||B(!1),document.removeEventListener("pointermove",Z),M.value=null)};M.value!==null&&(document.addEventListener("pointermove",Z),document.addEventListener("pointerup",K,{capture:!0,once:!0})),L(()=>{document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",K,{capture:!0})})});function V(L){const U=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!U&&L.key.length===1&&f(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let Z=d.value;if(["ArrowUp","End"].includes(L.key)&&(Z=Z.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const K=L.target,j=Z.indexOf(K);Z=Z.slice(j+1)}setTimeout(()=>$n(Z)),L.preventDefault()}}const F=computed(()=>o.position==="popper"?o:{}),I=At(F.value);return Uf({content:c,viewport:v,onViewportChange:L=>{v.value=L},itemRefCallback:(L,U,Z)=>{var K,j;const W=!_.value&&!Z;(((K=s.modelValue)==null?void 0:K.value)!==void 0&&((j=s.modelValue)==null?void 0:j.value)===U||W)&&(b.value=L,W&&(_.value=!0))},selectedItem:b,selectedItemText:k,onItemLeave:()=>{var L;(L=c.value)==null||L.focus()},itemTextRefCallback:(L,U,Z)=>{var K,j;const W=!_.value&&!Z;(((K=s.modelValue)==null?void 0:K.value)!==void 0&&((j=s.modelValue)==null?void 0:j.value)===U||W)&&(k.value=L)},focusSelectedItem:E,position:o.position,isPositioned:x,searchRef:u}),(L,U)=>(openBlock(),createBlock(unref(Ya),{"as-child":"",onMountAutoFocus:U[6]||(U[6]=withModifiers(()=>{},["prevent"])),onUnmountAutoFocus:U[7]||(U[7]=Z=>{var K;a("closeAutoFocus",Z),!Z.defaultPrevented&&((K=unref(s).triggerElement.value)==null||K.focus({preventScroll:!0}),Z.preventDefault())})},{default:withCtx(()=>[createVNode(unref(gt$1),{"as-child":"","disable-outside-pointer-events":"",onFocusOutside:U[2]||(U[2]=withModifiers(()=>{},["prevent"])),onDismiss:U[3]||(U[3]=Z=>unref(s).onOpenChange(!1)),onEscapeKeyDown:U[4]||(U[4]=Z=>a("escapeKeyDown",Z)),onPointerDownOutside:U[5]||(U[5]=Z=>a("pointerDownOutside",Z))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(L.position==="popper"?jf:Wf),mergeProps({...L.$attrs,...unref(I)},{id:unref(s).contentId,ref:Z=>{c.value=unref($e)(Z)},role:"listbox","data-state":unref(s).open.value?"open":"closed",dir:unref(s).dir.value,style:{display:"flex",flexDirection:"column",outline:"none"},onContextmenu:U[0]||(U[0]=withModifiers(()=>{},["prevent"])),onPlaced:U[1]||(U[1]=Z=>x.value=!0),onKeydown:V}),{default:withCtx(()=>[renderSlot(L.$slots,"default")]),_:3},16,["id","data-state","dir","onKeydown"]))]),_:3})]),_:3}))}}),qf=defineComponent({inheritAttrs:!1,__name:"SelectProvider",props:{context:{}},setup(n){return Bs(n.context),(e,o)=>renderSlot(e.$slots,"default")}}),Yf={key:1},Ky=defineComponent({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(n,{emit:e}){const o=n,a=xe(o,e),s=wt(),l=ref();onMounted(()=>{l.value=new DocumentFragment});const c=ref(),d=computed(()=>o.forceMount||s.open.value);return(u,f)=>{var v;return d.value?(openBlock(),createBlock(unref(Pe$1),{key:0,ref_key:"presenceRef",ref:c,present:!0},{default:withCtx(()=>[createVNode(Gf,normalizeProps(guardReactiveProps({...unref(a),...u.$attrs})),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16)]),_:3},512)):!((v=c.value)!=null&&v.present)&&l.value?(openBlock(),createElementBlock("div",Yf,[(openBlock(),createBlock(Teleport,{to:l.value},[createVNode(qf,{context:unref(s)},{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},8,["context"])],8,["to"]))])):createCommentVNode("",!0)}}}),[Ts,Xf]=Q$1("SelectItem"),jy=defineComponent({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(n){const e=n,{disabled:o}=toRefs(e),a=wt(),s=_t(Lt),{forwardRef:l,currentElement:c}=R(),d=computed(()=>{var E;return((E=a.modelValue)==null?void 0:E.value)===e.value}),u=ref(!1),f=ref(e.textValue??""),v=he(void 0,"radix-vue-select-item-text");async function b(E){await nextTick(),!(E!=null&&E.defaultPrevented)&&(o.value||(a.onValueChange(e.value),a.onOpenChange(!1)))}async function k(E){var B;await nextTick(),!E.defaultPrevented&&(o.value?(B=s.onItemLeave)==null||B.call(s):E.currentTarget.focus({preventScroll:!0}))}async function x(E){var B;await nextTick(),!E.defaultPrevented&&E.currentTarget===document.activeElement&&((B=s.onItemLeave)==null||B.call(s))}async function _(E){var B;await nextTick(),!(E.defaultPrevented||((B=s.searchRef)==null?void 0:B.value)!==""&&E.key===" ")&&(Kf.includes(E.key)&&b(),E.key===" "&&E.preventDefault())}if(e.value==="")throw new Error("A <SelectItem /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return onMounted(()=>{c.value&&s.itemRefCallback(c.value,e.value,e.disabled)}),Xf({value:e.value,disabled:o,textId:v,isSelected:d,onItemTextChange:E=>{f.value=((f.value||(E==null?void 0:E.textContent))??"").trim()}}),(E,B)=>(openBlock(),createBlock(unref(O),{ref:unref(l),role:"option","data-radix-vue-collection-item":"","aria-labelledby":unref(v),"data-highlighted":u.value?"":void 0,"aria-selected":d.value,"data-state":d.value?"checked":"unchecked","aria-disabled":unref(o)||void 0,"data-disabled":unref(o)?"":void 0,tabindex:unref(o)?void 0:-1,as:E.as,"as-child":E.asChild,onFocus:B[0]||(B[0]=M=>u.value=!0),onBlur:B[1]||(B[1]=M=>u.value=!1),onPointerup:b,onPointerdown:B[2]||(B[2]=M=>{M.currentTarget.focus({preventScroll:!0})}),onTouchend:B[3]||(B[3]=withModifiers(()=>{},["prevent","stop"])),onPointermove:k,onPointerleave:x,onKeydown:_},{default:withCtx(()=>[renderSlot(E.$slots,"default")]),_:3},8,["aria-labelledby","data-highlighted","aria-selected","data-state","aria-disabled","data-disabled","tabindex","as","as-child"]))}}),Uy=defineComponent({__name:"SelectItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(n){const e=n,o=Ts();return(a,s)=>unref(o).isSelected.value?(openBlock(),createBlock(unref(O),mergeProps({key:0,"aria-hidden":"true"},e),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16)):createCommentVNode("",!0)}}),[Zf,Jf]=Q$1("SelectGroup"),Gy=defineComponent({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n,o=he(void 0,"radix-vue-select-group");return Jf({id:o}),(a,s)=>(openBlock(),createBlock(unref(O),mergeProps({role:"group"},e,{"aria-labelledby":unref(o)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),Yy=defineComponent({inheritAttrs:!1,__name:"SelectItemText",props:{asChild:{type:Boolean},as:{default:"span"}},setup(n){const e=n,o=wt(),a=_t(Lt),s=Nf(),l=Ts(),{forwardRef:c,currentElement:d}=R(),u=computed(()=>{var f;return h("option",{key:l.value,value:l.value,disabled:l.disabled.value,textContent:(f=d.value)==null?void 0:f.textContent})});return onMounted(()=>{d.value&&(l.onItemTextChange(d.value),a.itemTextRefCallback(d.value,l.value,l.disabled.value),s.onNativeOptionAdd(u.value))}),onBeforeUnmount(()=>{s.onNativeOptionRemove(u.value)}),(f,v)=>(openBlock(),createElementBlock(Fragment$1,null,[createVNode(unref(O),mergeProps({id:unref(l).textId,ref:unref(c)},{...e,...f.$attrs},{"data-item-text":""}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["id"]),unref(l).isSelected.value&&unref(o).valueElement.value&&!unref(o).valueElementHasChildren.value?(openBlock(),createBlock(Teleport,{key:0,to:unref(o).valueElement.value},[renderSlot(f.$slots,"default")],8,["to"])):createCommentVNode("",!0)],64))}}),Xy=defineComponent({__name:"SelectViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(n){const e=n,{nonce:o}=toRefs(e),a=Xa(o),s=_t(Lt),l=s.position==="item-aligned"?$o():void 0,{forwardRef:c,currentElement:d}=R();onMounted(()=>{s==null||s.onViewportChange(d.value)});const u=ref(0);function f(v){const b=v.currentTarget,{shouldExpandOnScrollRef:k,contentWrapper:x}=l??{};if(k!=null&&k.value&&x!=null&&x.value){const _=Math.abs(u.value-b.scrollTop);if(_>0){const E=window.innerHeight-Ue*2,B=Number.parseFloat(x.value.style.minHeight),M=Number.parseFloat(x.value.style.height),V=Math.max(B,M);if(V<E){const F=V+_,I=Math.min(E,F),L=F-I;x.value.style.height=`${I}px`,x.value.style.bottom==="0px"&&(b.scrollTop=L>0?L:0,x.value.style.justifyContent="flex-end")}}}u.value=b.scrollTop}return(v,b)=>(openBlock(),createElementBlock(Fragment$1,null,[createVNode(unref(O),mergeProps({ref:unref(c),"data-radix-select-viewport":"",role:"presentation"},{...v.$attrs,...e},{style:{position:"relative",flex:1,overflow:"hidden auto"},onScroll:f}),{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3},16),createVNode(unref(O),{as:"style",nonce:unref(a)},{default:withCtx(()=>[createTextVNode(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-radix-select-viewport] { scrollbar-width:none; -ms-overflow-style: none; -webkit-overflow-scrolling: touch; } [data-radix-select-viewport]::-webkit-scrollbar { display: none; } ")]),_:1},8,["nonce"])],64))}}),Rs=defineComponent({__name:"SelectScrollButtonImpl",emits:["autoScroll"],setup(n,{emit:e}){const o=e,{injectCollection:a}=Me(),s=a(),l=_t(Lt),c=ref(null);function d(){c.value!==null&&(window.clearInterval(c.value),c.value=null)}watchEffect(()=>{const v=s.value.find(b=>b===document.activeElement);v==null||v.scrollIntoView({block:"nearest"})});function u(){c.value===null&&(c.value=window.setInterval(()=>{o("autoScroll")},50))}function f(){var v;(v=l.onItemLeave)==null||v.call(l),c.value===null&&(c.value=window.setInterval(()=>{o("autoScroll")},50))}return onBeforeUnmount(()=>d()),(v,b)=>{var k;return openBlock(),createBlock(unref(O),mergeProps({"aria-hidden":"true",style:{flexShrink:0}},(k=v.$parent)==null?void 0:k.$props,{onPointerdown:u,onPointermove:f,onPointerleave:b[0]||(b[0]=()=>{d()})}),{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3},16)}}}),Zy=defineComponent({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean},as:{}},setup(n){const e=_t(Lt),o=e.position==="item-aligned"?$o():void 0,{forwardRef:a,currentElement:s}=R(),l=ref(!1);return watchEffect(c=>{var d,u;if((d=e.viewport)!=null&&d.value&&(u=e.isPositioned)!=null&&u.value){let f=function(){l.value=v.scrollTop>0};const v=e.viewport.value;f(),v.addEventListener("scroll",f),c(()=>v.removeEventListener("scroll",f))}}),watch(s,()=>{s.value&&(o==null||o.onScrollButtonChange(s.value))}),(c,d)=>l.value?(openBlock(),createBlock(Rs,{key:0,ref:unref(a),onAutoScroll:d[0]||(d[0]=()=>{const{viewport:u,selectedItem:f}=unref(e);u!=null&&u.value&&f!=null&&f.value&&(u.value.scrollTop=u.value.scrollTop-f.value.offsetHeight)})},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},512)):createCommentVNode("",!0)}}),Jy=defineComponent({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean},as:{}},setup(n){const e=_t(Lt),o=e.position==="item-aligned"?$o():void 0,{forwardRef:a,currentElement:s}=R(),l=ref(!1);return watchEffect(c=>{var d,u;if((d=e.viewport)!=null&&d.value&&(u=e.isPositioned)!=null&&u.value){let f=function(){const b=v.scrollHeight-v.clientHeight;l.value=Math.ceil(v.scrollTop)<b};const v=e.viewport.value;f(),v.addEventListener("scroll",f),c(()=>v.removeEventListener("scroll",f))}}),watch(s,()=>{s.value&&(o==null||o.onScrollButtonChange(s.value))}),(c,d)=>l.value?(openBlock(),createBlock(Rs,{key:0,ref:unref(a),onAutoScroll:d[0]||(d[0]=()=>{const{viewport:u,selectedItem:f}=unref(e);u!=null&&u.value&&f!=null&&f.value&&(u.value.scrollTop=u.value.scrollTop+f.value.offsetHeight)})},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},512)):createCommentVNode("",!0)}}),Qy=defineComponent({__name:"SelectValue",props:{placeholder:{default:""},asChild:{type:Boolean},as:{default:"span"}},setup(n){const{forwardRef:e,currentElement:o}=R(),a=wt(),s=useSlots();return onBeforeMount(()=>{var l;const c=!!Ua((l=s==null?void 0:s.default)==null?void 0:l.call(s)).length;a.onValueElementHasChildrenChange(c)}),onMounted(()=>{a.valueElement=o}),(l,c)=>(openBlock(),createBlock(unref(O),{ref:unref(e),as:l.as,"as-child":l.asChild,style:{pointerEvents:"none"}},{default:withCtx(()=>{var d;return[unref(Is)((d=unref(a).modelValue)==null?void 0:d.value)?(openBlock(),createElementBlock(Fragment$1,{key:0},[createTextVNode(toDisplayString$1(l.placeholder),1)],64)):renderSlot(l.$slots,"default",{key:1})]}),_:3},8,["as","as-child"]))}}),eg=defineComponent({__name:"SelectIcon",props:{asChild:{type:Boolean},as:{default:"span"}},setup(n){return(e,o)=>(openBlock(),createBlock(unref(O),{"aria-hidden":"true",as:e.as,"as-child":e.asChild},{default:withCtx(()=>[renderSlot(e.$slots,"default",{},()=>[createTextVNode("\u25BC")])]),_:3},8,["as","as-child"]))}});function Cp(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}Cp();const Np=["name","disabled","required","value","checked","data-state","data-disabled"],[Lp,zp]=Q$1("SwitchRoot"),mg=defineComponent({__name:"SwitchRoot",props:{defaultChecked:{type:Boolean},checked:{type:Boolean,default:void 0},disabled:{type:Boolean},required:{type:Boolean},name:{},id:{},value:{default:"on"},asChild:{type:Boolean},as:{default:"button"}},emits:["update:checked"],setup(n,{emit:e}){const o=n,a=e,{disabled:s}=toRefs(o),l=ne$1(o,"checked",a,{defaultValue:o.defaultChecked,passive:o.checked===void 0});function c(){s.value||(l.value=!l.value)}const{forwardRef:d,currentElement:u}=R(),f=Qe(u),v=computed(()=>{var b;return o.id&&u.value?(b=document.querySelector(`[for="${o.id}"]`))==null?void 0:b.innerText:void 0});return zp({checked:l,toggleCheck:c,disabled:s}),(b,k)=>(openBlock(),createElementBlock(Fragment$1,null,[createVNode(unref(O),mergeProps(b.$attrs,{id:b.id,ref:unref(d),role:"switch",type:b.as==="button"?"button":void 0,value:b.value,"aria-label":b.$attrs["aria-label"]||v.value,"aria-checked":unref(l),"aria-required":b.required,"data-state":unref(l)?"checked":"unchecked","data-disabled":unref(s)?"":void 0,"as-child":b.asChild,as:b.as,disabled:unref(s),onClick:c,onKeydown:withKeys(withModifiers(c,["prevent"]),["enter"])}),{default:withCtx(()=>[renderSlot(b.$slots,"default",{checked:unref(l)})]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]),unref(f)?(openBlock(),createElementBlock("input",{key:0,type:"checkbox",name:b.name,tabindex:"-1","aria-hidden":"true",disabled:unref(s),required:b.required,value:b.value,checked:!!unref(l),"data-state":unref(l)?"checked":"unchecked","data-disabled":unref(s)?"":void 0,style:{transform:"translateX(-100%)",position:"absolute",pointerEvents:"none",opacity:0,margin:0}},null,8,Np)):createCommentVNode("",!0)],64))}}),hg=defineComponent({__name:"SwitchThumb",props:{asChild:{type:Boolean},as:{default:"span"}},setup(n){const e=Lp();return R(),(o,a)=>{var s;return openBlock(),createBlock(unref(O),{"data-state":(s=unref(e).checked)!=null&&s.value?"checked":"unchecked","data-disabled":unref(e).disabled.value?"":void 0,"as-child":o.asChild,as:o.as},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),[fn,Kp]=Q$1("TabsRoot"),yg=defineComponent({__name:"TabsRoot",props:{defaultValue:{},orientation:{default:"horizontal"},dir:{},activationMode:{default:"automatic"},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(n,{emit:e}){const o=n,a=e,{orientation:s,dir:l}=toRefs(o),c=be(l);R();const d=ne$1(o,"modelValue",a,{defaultValue:o.defaultValue,passive:o.modelValue===void 0}),u=ref();return Kp({modelValue:d,changeModelValue:f=>{d.value=f},orientation:s,dir:c,activationMode:o.activationMode,baseId:he(void 0,"radix-vue-tabs"),tabsList:u}),(f,v)=>(openBlock(),createBlock(unref(O),{dir:unref(c),"data-orientation":unref(s),"as-child":f.asChild,as:f.as},{default:withCtx(()=>[renderSlot(f.$slots,"default",{modelValue:unref(d)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),gg=defineComponent({__name:"TabsList",props:{loop:{type:Boolean,default:!0},asChild:{type:Boolean},as:{}},setup(n){const e=n,{loop:o}=toRefs(e),{forwardRef:a,currentElement:s}=R(),l=fn();return l.tabsList=s,(c,d)=>(openBlock(),createBlock(unref(Vt),{"as-child":"",orientation:unref(l).orientation.value,dir:unref(l).dir.value,loop:unref(o)},{default:withCtx(()=>[createVNode(unref(O),{ref:unref(a),role:"tablist","as-child":c.asChild,as:c.as,"aria-orientation":unref(l).orientation.value},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}});function lr(n,e){return`${n}-trigger-${e}`}function sr(n,e){return`${n}-content-${e}`}const bg=defineComponent({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=n,{forwardRef:o}=R(),a=fn(),s=computed(()=>lr(a.baseId,e.value)),l=computed(()=>sr(a.baseId,e.value)),c=computed(()=>e.value===a.modelValue.value),d=ref(c.value);return onMounted(()=>{requestAnimationFrame(()=>{d.value=!1})}),(u,f)=>(openBlock(),createBlock(unref(Pe$1),{present:c.value,"force-mount":""},{default:withCtx(({present:v})=>[createVNode(unref(O),{id:l.value,ref:unref(o),"as-child":u.asChild,as:u.as,role:"tabpanel","data-state":c.value?"active":"inactive","data-orientation":unref(a).orientation.value,"aria-labelledby":s.value,hidden:!v.value,tabindex:"0",style:normalizeStyle({animationDuration:d.value?"0s":void 0})},{default:withCtx(()=>[u.forceMount||c.value?renderSlot(u.$slots,"default",{key:0}):createCommentVNode("",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),Cg=defineComponent({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n,{forwardRef:o}=R(),a=fn(),s=computed(()=>lr(a.baseId,e.value)),l=computed(()=>sr(a.baseId,e.value)),c=computed(()=>e.value===a.modelValue.value);return(d,u)=>(openBlock(),createBlock(unref(Ft),{"as-child":"",focusable:!d.disabled,active:c.value},{default:withCtx(()=>[createVNode(unref(O),{id:s.value,ref:unref(o),role:"tab",type:d.as==="button"?"button":void 0,as:d.as,"as-child":d.asChild,"aria-selected":c.value?"true":"false","aria-controls":l.value,"data-state":c.value?"active":"inactive",disabled:d.disabled,"data-disabled":d.disabled?"":void 0,"data-orientation":unref(a).orientation.value,onMousedown:u[0]||(u[0]=withModifiers(f=>{!d.disabled&&f.ctrlKey===!1?unref(a).changeModelValue(d.value):f.preventDefault()},["left"])),onKeydown:u[1]||(u[1]=withKeys(f=>unref(a).changeModelValue(d.value),["enter","space"])),onFocus:u[2]||(u[2]=()=>{const f=unref(a).activationMode!=="manual";!c.value&&!d.disabled&&f&&unref(a).changeModelValue(d.value)})},{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),[vn,jp]=Q$1("ToastProvider"),$g=defineComponent({inheritAttrs:!1,__name:"ToastProvider",props:{label:{default:"Notification"},duration:{default:5e3},swipeDirection:{default:"right"},swipeThreshold:{default:50}},setup(n){const e=n,{label:o,duration:a,swipeDirection:s,swipeThreshold:l}=toRefs(e),c=ref(),d=ref(0),u=ref(!1),f=ref(!1);if(e.label&&typeof e.label=="string"&&!e.label.trim()){const v="Invalid prop `label` supplied to `ToastProvider`. Expected non-empty `string`.";throw new Error(v)}return jp({label:o,duration:a,swipeDirection:s,swipeThreshold:l,toastCount:d,viewport:c,onViewportChange(v){c.value=v},onToastAdd(){d.value++},onToastRemove(){d.value--},isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:f}),(v,b)=>renderSlot(v.$slots,"default")}}),Up="toast.swipeStart",Gp="toast.swipeMove",qp="toast.swipeCancel",Yp="toast.swipeEnd",On="toast.viewportPause",kn="toast.viewportResume";function Aa(n,e,o){const a=o.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:o});e&&a.addEventListener(n,e,{once:!0}),a.dispatchEvent(s)}function ol(n,e,o=0){const a=Math.abs(n.x),s=Math.abs(n.y),l=a>s;return e==="left"||e==="right"?l&&a>o:!l&&s>o}function Xp(n){return n.nodeType===n.ELEMENT_NODE}function ir(n){const e=[];return Array.from(n.childNodes).forEach(o=>{if(o.nodeType===o.TEXT_NODE&&o.textContent&&e.push(o.textContent),Xp(o)){const a=o.ariaHidden||o.hidden||o.style.display==="none",s=o.dataset.radixToastAnnounceExclude==="";if(!a)if(s){const l=o.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...ir(o))}}),e}const Zp=defineComponent({__name:"ToastAnnounce",setup(n){const e=vn(),o=mi(1e3),a=ref(!1);return Tl(()=>{a.value=!0}),(s,l)=>unref(o)||a.value?(openBlock(),createBlock(unref(Zt),{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(e).label.value)+" ",1),renderSlot(s.$slots,"default")]),_:3})):createCommentVNode("",!0)}}),[Jp,Qp]=Q$1("ToastRoot"),ev=defineComponent({inheritAttrs:!1,__name:"ToastRootImpl",props:{type:{},open:{type:Boolean,default:!1},duration:{},asChild:{type:Boolean},as:{default:"li"}},emits:["close","escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd"],setup(n,{emit:e}){const o=n,a=e,{forwardRef:s,currentElement:l}=R(),c=vn(),d=ref(null),u=ref(null),f=computed(()=>typeof o.duration=="number"?o.duration:c.duration.value),v=ref(0),b=ref(f.value),k=ref(0),x=ref(f.value),_=Tl(()=>{const V=new Date().getTime()-v.value;x.value=Math.max(b.value-V,0)},{fpsLimit:60});function E(V){V<=0||V===Number.POSITIVE_INFINITY||Ye&&(window.clearTimeout(k.value),v.value=new Date().getTime(),k.value=window.setTimeout(B,V))}function B(){var V,F;(V=l.value)!=null&&V.contains(document.activeElement)&&((F=c.viewport.value)==null||F.focus()),c.isClosePausedRef.value=!1,a("close")}const M=computed(()=>l.value?ir(l.value):null);if(o.type&&!["foreground","background"].includes(o.type)){const V="Invalid prop `type` supplied to `Toast`. Expected `foreground | background`.";throw new Error(V)}return watchEffect(V=>{const F=c.viewport.value;if(F){const I=()=>{E(b.value),_.resume(),a("resume")},L=()=>{const U=new Date().getTime()-v.value;b.value=b.value-U,window.clearTimeout(k.value),_.pause(),a("pause")};return F.addEventListener(On,L),F.addEventListener(kn,I),()=>{F.removeEventListener(On,L),F.removeEventListener(kn,I)}}}),watch(()=>[o.open,f.value],()=>{b.value=f.value,o.open&&!c.isClosePausedRef.value&&E(f.value)},{immediate:!0}),jn("Escape",V=>{a("escapeKeyDown",V),V.defaultPrevented||(c.isFocusedToastEscapeKeyDownRef.value=!0,B())}),onMounted(()=>{c.onToastAdd()}),onUnmounted(()=>{c.onToastRemove()}),Qp({onClose:B}),(V,F)=>(openBlock(),createElementBlock(Fragment$1,null,[M.value?(openBlock(),createBlock(Zp,{key:0,role:"status","aria-live":V.type==="foreground"?"assertive":"polite","aria-atomic":""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(M.value),1)]),_:1},8,["aria-live"])):createCommentVNode("",!0),unref(c).viewport.value?(openBlock(),createBlock(Teleport,{key:1,to:unref(c).viewport.value},[createVNode(unref(O),mergeProps({ref:unref(s),role:"status","aria-live":"off","aria-atomic":"",tabindex:"0","data-radix-vue-collection-item":""},V.$attrs,{as:V.as,"as-child":V.asChild,"data-state":V.open?"open":"closed","data-swipe-direction":unref(c).swipeDirection.value,style:{userSelect:"none",touchAction:"none"},onPointerdown:F[0]||(F[0]=withModifiers(I=>{d.value={x:I.clientX,y:I.clientY}},["left"])),onPointermove:F[1]||(F[1]=I=>{if(!d.value)return;const L=I.clientX-d.value.x,U=I.clientY-d.value.y,Z=!!u.value,K=["left","right"].includes(unref(c).swipeDirection.value),j=["left","up"].includes(unref(c).swipeDirection.value)?Math.min:Math.max,W=K?j(0,L):0,Y=K?0:j(0,U),G=I.pointerType==="touch"?10:2,fe={x:W,y:Y},le={originalEvent:I,delta:fe};Z?(u.value=fe,unref(Aa)(unref(Gp),pe=>a("swipeMove",pe),le)):unref(ol)(fe,unref(c).swipeDirection.value,G)?(u.value=fe,unref(Aa)(unref(Up),pe=>a("swipeStart",pe),le),I.target.setPointerCapture(I.pointerId)):(Math.abs(L)>G||Math.abs(U)>G)&&(d.value=null)}),onPointerup:F[2]||(F[2]=I=>{const L=u.value,U=I.target;if(U.hasPointerCapture(I.pointerId)&&U.releasePointerCapture(I.pointerId),u.value=null,d.value=null,L){const Z=I.currentTarget,K={originalEvent:I,delta:L};unref(ol)(L,unref(c).swipeDirection.value,unref(c).swipeThreshold.value)?unref(Aa)(unref(Yp),j=>a("swipeEnd",j),K):unref(Aa)(unref(qp),j=>a("swipeCancel",j),K),Z==null||Z.addEventListener("click",j=>j.preventDefault(),{once:!0})}})}),{default:withCtx(()=>[renderSlot(V.$slots,"default",{remaining:x.value,duration:f.value})]),_:3},16,["as","as-child","data-state","data-swipe-direction"])],8,["to"])):createCommentVNode("",!0)],64))}}),Bg=defineComponent({__name:"ToastRoot",props:{defaultOpen:{type:Boolean,default:!0},forceMount:{type:Boolean},type:{default:"foreground"},open:{type:Boolean,default:void 0},duration:{},asChild:{type:Boolean},as:{default:"li"}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(n,{emit:e}){const o=n,a=e,{forwardRef:s}=R(),l=ne$1(o,"open",a,{defaultValue:o.defaultOpen,passive:o.open===void 0});return(c,d)=>(openBlock(),createBlock(unref(Pe$1),{present:c.forceMount||unref(l)},{default:withCtx(()=>[createVNode(ev,mergeProps({ref:unref(s),open:unref(l),type:c.type,as:c.as,"as-child":c.asChild,duration:c.duration},c.$attrs,{onClose:d[0]||(d[0]=u=>l.value=!1),onPause:d[1]||(d[1]=u=>a("pause")),onResume:d[2]||(d[2]=u=>a("resume")),onEscapeKeyDown:d[3]||(d[3]=u=>a("escapeKeyDown",u)),onSwipeStart:d[4]||(d[4]=u=>{a("swipeStart",u),u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:d[5]||(d[5]=u=>{const{x:f,y:v}=u.detail.delta,b=u.currentTarget;b.setAttribute("data-swipe","move"),b.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),b.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:d[6]||(d[6]=u=>{const f=u.currentTarget;f.setAttribute("data-swipe","cancel"),f.style.removeProperty("--radix-toast-swipe-move-x"),f.style.removeProperty("--radix-toast-swipe-move-y"),f.style.removeProperty("--radix-toast-swipe-end-x"),f.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:d[7]||(d[7]=u=>{const{x:f,y:v}=u.detail.delta,b=u.currentTarget;b.setAttribute("data-swipe","end"),b.style.removeProperty("--radix-toast-swipe-move-x"),b.style.removeProperty("--radix-toast-swipe-move-y"),b.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),b.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),l.value=!1})}),{default:withCtx(({remaining:u,duration:f})=>[renderSlot(c.$slots,"default",{remaining:u,duration:f,open:unref(l)})]),_:3},16,["open","type","as","as-child","duration"])]),_:3},8,["present"]))}}),ur=defineComponent({__name:"ToastAnnounceExclude",props:{altText:{},asChild:{type:Boolean},as:{}},setup(n){return(e,o)=>(openBlock(),createBlock(unref(O),{as:e.as,"as-child":e.asChild,"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":e.altText||void 0},{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},8,["as","as-child","data-radix-toast-announce-alt"]))}}),tv=defineComponent({__name:"ToastClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n,o=Jp(),{forwardRef:a}=R();return(s,l)=>(openBlock(),createBlock(ur,{"as-child":""},{default:withCtx(()=>[createVNode(unref(O),mergeProps(e,{ref:unref(a),type:s.as==="button"?"button":void 0,onClick:l[0]||(l[0]=c=>unref(o).onClose())}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["type"])]),_:3}))}}),Tg=defineComponent({__name:"ToastAction",props:{altText:{},asChild:{type:Boolean},as:{}},setup(n){if(!n.altText)throw new Error("Missing prop `altText` expected on `ToastAction`");const{forwardRef:e}=R();return(o,a)=>o.altText?(openBlock(),createBlock(ur,{key:0,"alt-text":o.altText,"as-child":""},{default:withCtx(()=>[createVNode(tv,{ref:unref(e),as:o.as,"as-child":o.asChild},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},8,["as","as-child"])]),_:3},8,["alt-text"])):createCommentVNode("",!0)}}),ll=defineComponent({__name:"FocusProxy",emits:["focusFromOutsideViewport"],setup(n,{emit:e}){const o=e,a=vn();return(s,l)=>(openBlock(),createBlock(unref(Zt),{"aria-hidden":"true",tabindex:"0",style:{position:"fixed"},onFocus:l[0]||(l[0]=c=>{var d;const u=c.relatedTarget;!((d=unref(a).viewport.value)!=null&&d.contains(u))&&o("focusFromOutsideViewport")})},{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3}))}}),Rg=defineComponent({inheritAttrs:!1,__name:"ToastViewport",props:{hotkey:{default:()=>["F8"]},label:{type:[String,Function],default:"Notifications ({hotkey})"},asChild:{type:Boolean},as:{default:"ol"}},setup(n){const e=n,{hotkey:o,label:a}=toRefs(e),{forwardRef:s,currentElement:l}=R(),{createCollection:c}=Me(),d=c(l),u=vn(),f=computed(()=>u.toastCount.value>0),v=ref(),b=ref(),k=computed(()=>o.value.join("+").replace(/Key/g,"").replace(/Digit/g,""));jn(o.value,()=>{l.value.focus()}),onMounted(()=>{u.onViewportChange(l.value)}),watchEffect(_=>{const E=l.value;if(f.value&&E){const B=()=>{if(!u.isClosePausedRef.value){const L=new CustomEvent(On);E.dispatchEvent(L),u.isClosePausedRef.value=!0}},M=()=>{if(u.isClosePausedRef.value){const L=new CustomEvent(kn);E.dispatchEvent(L),u.isClosePausedRef.value=!1}},V=L=>{!E.contains(L.relatedTarget)&&M()},F=()=>{E.contains(document.activeElement)||M()},I=L=>{var U,Z,K;const j=L.altKey||L.ctrlKey||L.metaKey;if(L.key==="Tab"&&!j){const W=document.activeElement,Y=L.shiftKey;if(L.target===E&&Y){(U=v.value)==null||U.focus();return}const G=x({tabbingDirection:Y?"backwards":"forwards"}),fe=G.findIndex(le=>le===W);Oa(G.slice(fe+1))?L.preventDefault():Y?(Z=v.value)==null||Z.focus():(K=b.value)==null||K.focus()}};E.addEventListener("focusin",B),E.addEventListener("focusout",V),E.addEventListener("pointermove",B),E.addEventListener("pointerleave",F),E.addEventListener("keydown",I),window.addEventListener("blur",B),window.addEventListener("focus",M),_(()=>{E.removeEventListener("focusin",B),E.removeEventListener("focusout",V),E.removeEventListener("pointermove",B),E.removeEventListener("pointerleave",F),E.removeEventListener("keydown",I),window.removeEventListener("blur",B),window.removeEventListener("focus",M)})}});function x({tabbingDirection:_}){const E=d.value.map(B=>{const M=[B,...Jn(B)];return _==="forwards"?M:M.reverse()});return(_==="forwards"?E.reverse():E).flat()}return(_,E)=>(openBlock(),createBlock(unref(ou),{role:"region","aria-label":typeof unref(a)=="string"?unref(a).replace("{hotkey}",k.value):unref(a)(k.value),tabindex:"-1",style:normalizeStyle({pointerEvents:f.value?void 0:"none"})},{default:withCtx(()=>[f.value?(openBlock(),createBlock(ll,{key:0,ref:B=>{v.value=unref($e)(B)},onFocusFromOutsideViewport:E[0]||(E[0]=()=>{const B=x({tabbingDirection:"forwards"});unref(Oa)(B)})},null,512)):createCommentVNode("",!0),createVNode(unref(O),mergeProps({ref:unref(s),tabindex:"-1",as:_.as,"as-child":_.asChild},_.$attrs),{default:withCtx(()=>[renderSlot(_.$slots,"default")]),_:3},16,["as","as-child"]),f.value?(openBlock(),createBlock(ll,{key:1,ref:B=>{b.value=unref($e)(B)},onFocusFromOutsideViewport:E[1]||(E[1]=()=>{const B=x({tabbingDirection:"backwards"});unref(Oa)(B)})},null,512)):createCommentVNode("",!0)]),_:3},8,["aria-label","style"]))}}),Ag=defineComponent({__name:"ToastTitle",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return R(),(o,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),Og=defineComponent({__name:"ToastDescription",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return R(),(o,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),cr="tooltip.open",[Oo,uv]=Q$1("TooltipProvider"),Lg=defineComponent({inheritAttrs:!1,__name:"TooltipProvider",props:{delayDuration:{default:700},skipDelayDuration:{default:300},disableHoverableContent:{type:Boolean,default:!1},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean,default:!1}},setup(n){const e=n,{delayDuration:o,skipDelayDuration:a,disableHoverableContent:s,disableClosingTrigger:l,ignoreNonKeyboardFocus:c,disabled:d}=toRefs(e);R();const u=ref(!0),f=ref(!1),{start:v,stop:b}=Wn(()=>{u.value=!0},a,{immediate:!1});return uv({isOpenDelayed:u,delayDuration:o,onOpen(){b(),u.value=!1},onClose(){v()},isPointerInTransitRef:f,disableHoverableContent:s,disableClosingTrigger:l,disabled:d,ignoreNonKeyboardFocus:c}),(k,x)=>renderSlot(k.$slots,"default")}}),[mn,dv]=Q$1("TooltipRoot"),zg=defineComponent({__name:"TooltipRoot",props:{defaultOpen:{type:Boolean,default:!1},open:{type:Boolean,default:void 0},delayDuration:{default:void 0},disableHoverableContent:{type:Boolean,default:void 0},disableClosingTrigger:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},ignoreNonKeyboardFocus:{type:Boolean,default:void 0}},emits:["update:open"],setup(n,{emit:e}){const o=n,a=e;R();const s=Oo(),l=computed(()=>o.disableHoverableContent??s.disableHoverableContent.value),c=computed(()=>o.disableClosingTrigger??s.disableClosingTrigger.value),d=computed(()=>o.disabled??s.disabled.value),u=computed(()=>o.delayDuration??s.delayDuration.value),f=computed(()=>o.ignoreNonKeyboardFocus??s.ignoreNonKeyboardFocus.value),v=ne$1(o,"open",a,{defaultValue:o.defaultOpen,passive:o.open===void 0});watch(v,F=>{s.onClose&&(F?(s.onOpen(),document.dispatchEvent(new CustomEvent(cr))):s.onClose())});const b=ref(!1),k=ref(),x=computed(()=>v.value?b.value?"delayed-open":"instant-open":"closed"),{start:_,stop:E}=Wn(()=>{b.value=!0,v.value=!0},u,{immediate:!1});function B(){E(),b.value=!1,v.value=!0}function M(){E(),v.value=!1}function V(){_()}return dv({contentId:"",open:v,stateAttribute:x,trigger:k,onTriggerChange(F){k.value=F},onTriggerEnter(){s.isOpenDelayed.value?V():B()},onTriggerLeave(){l.value?M():E()},onOpen:B,onClose:M,disableHoverableContent:l,disableClosingTrigger:c,disabled:d,ignoreNonKeyboardFocus:f}),(F,I)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(F.$slots,"default",{open:unref(v)})]),_:3}))}}),Kg=defineComponent({__name:"TooltipTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n,o=mn(),a=Oo();o.contentId||(o.contentId=he(void 0,"radix-vue-tooltip-content"));const{forwardRef:s,currentElement:l}=R(),c=ref(!1),d=ref(!1),u=computed(()=>o.disabled.value?{}:{click:E,focus:x,pointermove:b,pointerleave:k,pointerdown:v,blur:_});onMounted(()=>{o.onTriggerChange(l.value)});function f(){setTimeout(()=>{c.value=!1},1)}function v(){c.value=!0,document.addEventListener("pointerup",f,{once:!0})}function b(B){B.pointerType!=="touch"&&!d.value&&!a.isPointerInTransitRef.value&&(o.onTriggerEnter(),d.value=!0)}function k(){o.onTriggerLeave(),d.value=!1}function x(B){var M,V;c.value||o.ignoreNonKeyboardFocus.value&&!((V=(M=B.target).matches)!=null&&V.call(M,":focus-visible"))||o.onOpen()}function _(){o.onClose()}function E(){o.disableClosingTrigger.value||o.onClose()}return(B,M)=>(openBlock(),createBlock(unref(kt),{"as-child":""},{default:withCtx(()=>[createVNode(unref(O),mergeProps({ref:unref(s),"aria-describedby":unref(o).open.value?unref(o).contentId:void 0,"data-state":unref(o).stateAttribute.value,as:B.as,"as-child":e.asChild,"data-grace-area-trigger":""},toHandlers(u.value)),{default:withCtx(()=>[renderSlot(B.$slots,"default")]),_:3},16,["aria-describedby","data-state","as","as-child"])]),_:3}))}}),fr=defineComponent({__name:"TooltipContentImpl",props:{ariaLabel:{},asChild:{type:Boolean},as:{},side:{default:"top"},sideOffset:{default:0},align:{default:"center"},alignOffset:{},avoidCollisions:{type:Boolean,default:!0},collisionBoundary:{default:()=>[]},collisionPadding:{default:0},arrowPadding:{default:0},sticky:{default:"partial"},hideWhenDetached:{type:Boolean,default:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(n,{emit:e}){const o=n,a=e,s=mn(),{forwardRef:l}=R(),c=useSlots(),d=computed(()=>{var v;return(v=c.default)==null?void 0:v.call(c)}),u=computed(()=>{var v;if(o.ariaLabel)return o.ariaLabel;let b="";function k(x){typeof x.children=="string"&&x.type!==Comment?b+=x.children:Array.isArray(x.children)&&x.children.forEach(_=>k(_))}return(v=d.value)==null||v.forEach(x=>k(x)),b}),f=computed(()=>{const{ariaLabel:v,...b}=o;return b});return onMounted(()=>{Le(window,"scroll",v=>{const b=v.target;b!=null&&b.contains(s.trigger.value)&&s.onClose()}),Le(window,cr,s.onClose)}),(v,b)=>(openBlock(),createBlock(unref(gt$1),{"as-child":"","disable-outside-pointer-events":!1,onEscapeKeyDown:b[0]||(b[0]=k=>a("escapeKeyDown",k)),onPointerDownOutside:b[1]||(b[1]=k=>{var x;unref(s).disableClosingTrigger.value&&(x=unref(s).trigger.value)!=null&&x.contains(k.target)&&k.preventDefault(),a("pointerDownOutside",k)}),onFocusOutside:b[2]||(b[2]=withModifiers(()=>{},["prevent"])),onDismiss:b[3]||(b[3]=k=>unref(s).onClose())},{default:withCtx(()=>[createVNode(unref(Bt),mergeProps({ref:unref(l),"data-state":unref(s).stateAttribute.value},{...v.$attrs,...f.value},{style:{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:withCtx(()=>[renderSlot(v.$slots,"default"),createVNode(unref(Zt),{id:unref(s).contentId,role:"tooltip"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(u.value),1)]),_:1},8,["id"])]),_:3},16,["data-state"])]),_:3}))}}),cv=defineComponent({__name:"TooltipContentHoverable",props:{ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean}},setup(n){const e=At(n),{forwardRef:o,currentElement:a}=R(),{trigger:s,onClose:l}=mn(),c=Oo(),{isPointerInTransit:d,onPointerExit:u}=kl(s,a);return c.isPointerInTransitRef=d,u(()=>{l()}),(f,v)=>(openBlock(),createBlock(fr,mergeProps({ref:unref(o)},unref(e)),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16))}}),Hg=defineComponent({__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{default:"top"},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside"],setup(n,{emit:e}){const o=n,a=e,s=mn(),l=xe(o,a),{forwardRef:c}=R();return(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||unref(s).open.value},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(s).disableHoverableContent.value?fr:cv),mergeProps({ref:unref(c)},unref(l)),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),jg=defineComponent({__name:"TooltipPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_sfc_main$2u=defineComponent({__name:"Button",props:{variant:{},size:{},class:{},asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(O),{as:o.as,"as-child":o.asChild,class:normalizeClass(unref(cn)(unref(buttonVariants)({variant:o.variant,size:o.size}),e.class))},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),buttonVariants=cva("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",xs:"h-7 rounded px-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-8 w-8"}},defaultVariants:{variant:"default",size:"default"}}),_sfc_main$2t=defineComponent({__name:"Card",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$2s=defineComponent({__name:"CardContent",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("p-6 pt-0",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$2r=defineComponent({__name:"CardDescription",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("p",{class:normalizeClass(unref(cn)("text-sm text-muted-foreground",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$2q=defineComponent({__name:"CardFooter",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("flex items-center p-6 pt-0",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$2p=defineComponent({__name:"CardHeader",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("flex flex-col gap-y-1.5 p-6",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$2o=defineComponent({__name:"CardTitle",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("h3",{class:normalizeClass(unref(cn)("text-2xl font-semibold leading-none tracking-tight",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$2n=defineComponent({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(n,{emit:e}){const o=xe(n,e);return(a,s)=>(openBlock(),createBlock(unref(yg),normalizeProps(guardReactiveProps(unref(o))),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),_sfc_main$2m=defineComponent({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(bg),mergeProps({class:unref(cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e.class)},o.value),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$2l=defineComponent({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(gg),mergeProps(o.value,{class:unref(cn)("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_hoisted_1$K={class:"truncate"},_sfc_main$2k=defineComponent({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Cg),mergeProps(unref(a),{class:unref(cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e.class)}),{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$K,[renderSlot(s.$slots,"default")])]),_:3},16,["class"]))}});var util;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function o(s){throw new Error}n.assertNever=o,n.arrayToEnum=s=>{const l={};for(const c of s)l[c]=c;return l},n.getValidEnumValues=s=>{const l=n.objectKeys(s).filter(d=>typeof s[s[d]]!="number"),c={};for(const d of l)c[d]=s[d];return n.objectValues(c)},n.objectValues=s=>n.objectKeys(s).map(function(l){return s[l]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const l=[];for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&l.push(c);return l},n.find=(s,l)=>{for(const c of s)if(l(c))return c},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function a(s,l=" | "){return s.map(c=>typeof c=="string"?`'${c}'`:c).join(l)}n.joinValues=a,n.jsonStringifyReplacer=(s,l)=>typeof l=="bigint"?l.toString():l})(util||(util={}));var objectUtil;(function(n){n.mergeShapes=(e,o)=>({...e,...o})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=n=>{switch(typeof n){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(n)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(n)?ZodParsedType.array:n===null?ZodParsedType.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&n instanceof Map?ZodParsedType.map:typeof Set<"u"&&n instanceof Set?ZodParsedType.set:typeof Date<"u"&&n instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const o=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,o):this.__proto__=o,this.name="ZodError",this.issues=e}format(e){const o=e||function(l){return l.message},a={_errors:[]},s=l=>{for(const c of l.issues)if(c.code==="invalid_union")c.unionErrors.map(s);else if(c.code==="invalid_return_type")s(c.returnTypeError);else if(c.code==="invalid_arguments")s(c.argumentsError);else if(c.path.length===0)a._errors.push(o(c));else{let d=a,u=0;for(;u<c.path.length;){const f=c.path[u];u===c.path.length-1?(d[f]=d[f]||{_errors:[]},d[f]._errors.push(o(c))):d[f]=d[f]||{_errors:[]},d=d[f],u++}}};return s(this),a}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=o=>o.message){const o={},a=[];for(const s of this.issues)s.path.length>0?(o[s.path[0]]=o[s.path[0]]||[],o[s.path[0]].push(e(s))):a.push(e(s));return{formErrors:a,fieldErrors:o}}get formErrors(){return this.flatten()}}ZodError.create=n=>new ZodError(n);const errorMap=(n,e)=>{let o;switch(n.code){case ZodIssueCode.invalid_type:n.received===ZodParsedType.undefined?o="Required":o=`Expected ${n.expected}, received ${n.received}`;break;case ZodIssueCode.invalid_literal:o=`Invalid literal value, expected ${JSON.stringify(n.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:o=`Unrecognized key(s) in object: ${util.joinValues(n.keys,", ")}`;break;case ZodIssueCode.invalid_union:o="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:o=`Invalid discriminator value. Expected ${util.joinValues(n.options)}`;break;case ZodIssueCode.invalid_enum_value:o=`Invalid enum value. Expected ${util.joinValues(n.options)}, received '${n.received}'`;break;case ZodIssueCode.invalid_arguments:o="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:o="Invalid function return type";break;case ZodIssueCode.invalid_date:o="Invalid date";break;case ZodIssueCode.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(o=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(o=`${o} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?o=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?o=`Invalid input: must end with "${n.validation.endsWith}"`:util.assertNever(n.validation):n.validation!=="regex"?o=`Invalid ${n.validation}`:o="Invalid";break;case ZodIssueCode.too_small:n.type==="array"?o=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?o=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?o=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?o=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:o="Invalid input";break;case ZodIssueCode.too_big:n.type==="array"?o=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?o=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?o=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?o=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?o=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:o="Invalid input";break;case ZodIssueCode.custom:o="Invalid input";break;case ZodIssueCode.invalid_intersection_types:o="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:o=`Number must be a multiple of ${n.multipleOf}`;break;case ZodIssueCode.not_finite:o="Number must be finite";break;default:o=e.defaultError,util.assertNever(n)}return{message:o}};let overrideErrorMap=errorMap;function setErrorMap(n){overrideErrorMap=n}function getErrorMap(){return overrideErrorMap}const makeIssue=n=>{const{data:e,path:o,errorMaps:a,issueData:s}=n,l=[...o,...s.path||[]],c={...s,path:l};if(s.message!==void 0)return{...s,path:l,message:s.message};let d="";const u=a.filter(f=>!!f).slice().reverse();for(const f of u)d=f(c,{data:e,defaultError:d}).message;return{...s,path:l,message:d}},EMPTY_PATH=[];function addIssueToContext(n,e){const o=getErrorMap(),a=makeIssue({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,o,o===errorMap?void 0:errorMap].filter(s=>!!s)});n.common.issues.push(a)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,o){const a=[];for(const s of o){if(s.status==="aborted")return INVALID;s.status==="dirty"&&e.dirty(),a.push(s.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,o){const a=[];for(const s of o){const l=await s.key,c=await s.value;a.push({key:l,value:c})}return ParseStatus.mergeObjectSync(e,a)}static mergeObjectSync(e,o){const a={};for(const s of o){const{key:l,value:c}=s;if(l.status==="aborted"||c.status==="aborted")return INVALID;l.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof c.value<"u"||s.alwaysSet)&&(a[l.value]=c.value)}return{status:e.value,value:a}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=n=>({status:"dirty",value:n}),OK=n=>({status:"valid",value:n}),isAborted=n=>n.status==="aborted",isDirty=n=>n.status==="dirty",isValid=n=>n.status==="valid",isAsync=n=>typeof Promise<"u"&&n instanceof Promise;function __classPrivateFieldGet(n,e,o,a){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function __classPrivateFieldSet(n,e,o,a,s){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,o),o}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(e,o,a,s){this._cachedPath=[],this.parent=e,this.data=o,this._path=a,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(n,e)=>{if(isValid(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const o=new ZodError(n.common.issues);return this._error=o,this._error}}};function processCreateParams(n){if(!n)return{};const{errorMap:e,invalid_type_error:o,required_error:a,description:s}=n;if(e&&(o||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(l,c)=>{var d,u;const{message:f}=n;return l.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(d=f??a)!==null&&d!==void 0?d:c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:(u=f??o)!==null&&u!==void 0?u:c.defaultError}},description:s}}class ZodType{get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,o){return o||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const o=this._parse(e);if(isAsync(o))throw new Error("Synchronous parse encountered promise.");return o}_parseAsync(e){const o=this._parse(e);return Promise.resolve(o)}parse(e,o){const a=this.safeParse(e,o);if(a.success)return a.data;throw a.error}safeParse(e,o){var a;const s={common:{issues:[],async:(a=o==null?void 0:o.async)!==null&&a!==void 0?a:!1,contextualErrorMap:o==null?void 0:o.errorMap},path:(o==null?void 0:o.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},l=this._parseSync({data:e,path:s.path,parent:s});return handleResult(s,l)}"~validate"(e){var o,a;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:s});return isValid(l)?{value:l.value}:{issues:s.common.issues}}catch(l){!((a=(o=l==null?void 0:l.message)===null||o===void 0?void 0:o.toLowerCase())===null||a===void 0)&&a.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(l=>isValid(l)?{value:l.value}:{issues:s.common.issues})}async parseAsync(e,o){const a=await this.safeParseAsync(e,o);if(a.success)return a.data;throw a.error}async safeParseAsync(e,o){const a={common:{issues:[],contextualErrorMap:o==null?void 0:o.errorMap,async:!0},path:(o==null?void 0:o.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},s=this._parse({data:e,path:a.path,parent:a}),l=await(isAsync(s)?s:Promise.resolve(s));return handleResult(a,l)}refine(e,o){const a=s=>typeof o=="string"||typeof o>"u"?{message:o}:typeof o=="function"?o(s):o;return this._refinement((s,l)=>{const c=e(s),d=()=>l.addIssue({code:ZodIssueCode.custom,...a(s)});return typeof Promise<"u"&&c instanceof Promise?c.then(u=>u?!0:(d(),!1)):c?!0:(d(),!1)})}refinement(e,o){return this._refinement((a,s)=>e(a)?!0:(s.addIssue(typeof o=="function"?o(a,s):o),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:o=>this["~validate"](o)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const o=typeof e=="function"?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:o,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const o=typeof e=="function"?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:o,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){const o=this.constructor;return new o({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function timeRegex(n){return new RegExp(`^${timeRegexSource(n)}$`)}function datetimeRegex(n){let e=`${dateRegexSource}T${timeRegexSource(n)}`;const o=[];return o.push(n.local?"Z?":"Z"),n.offset&&o.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${o.join("|")})`,new RegExp(`^${e}$`)}function isValidIP(n,e){return!!((e==="v4"||!e)&&ipv4Regex.test(n)||(e==="v6"||!e)&&ipv6Regex.test(n))}function isValidJWT(n,e){if(!jwtRegex.test(n))return!1;try{const[o]=n.split("."),a=o.replace(/-/g,"+").replace(/_/g,"/").padEnd(o.length+(4-o.length%4)%4,"="),s=JSON.parse(atob(a));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function isValidCidr(n,e){return!!((e==="v4"||!e)&&ipv4CidrRegex.test(n)||(e==="v6"||!e)&&ipv6CidrRegex.test(n))}class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZodParsedType.string){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:s.parsedType}),INVALID}const o=new ParseStatus;let a;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),o.dirty());else if(s.kind==="max")e.data.length>s.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),o.dirty());else if(s.kind==="length"){const l=e.data.length>s.value,c=e.data.length<s.value;(l||c)&&(a=this._getOrReturnCtx(e,a),l?addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):c&&addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),o.dirty())}else if(s.kind==="email")emailRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"email",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"emoji",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="uuid")uuidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"uuid",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="nanoid")nanoidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="cuid")cuidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"cuid",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="cuid2")cuid2Regex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="ulid")ulidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"ulid",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"url",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"regex",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),o.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:{startsWith:s.value},message:s.message}),o.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:{endsWith:s.value},message:s.message}),o.dirty()):s.kind==="datetime"?datetimeRegex(s).test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:"datetime",message:s.message}),o.dirty()):s.kind==="date"?dateRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:"date",message:s.message}),o.dirty()):s.kind==="time"?timeRegex(s).test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:"time",message:s.message}),o.dirty()):s.kind==="duration"?durationRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"duration",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty()):s.kind==="ip"?isValidIP(e.data,s.version)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"ip",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty()):s.kind==="jwt"?isValidJWT(e.data,s.alg)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"jwt",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty()):s.kind==="cidr"?isValidCidr(e.data,s.version)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"cidr",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty()):s.kind==="base64"?base64Regex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"base64",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty()):s.kind==="base64url"?base64urlRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"base64url",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty()):util.assertNever(s);return{status:o.value,value:e.data}}_regex(e,o,a){return this.refinement(s=>e.test(s),{validation:o,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(a)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...errorUtil.errToObj(e)})}datetime(e){var o,a;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(o=e==null?void 0:e.offset)!==null&&o!==void 0?o:!1,local:(a=e==null?void 0:e.local)!==null&&a!==void 0?a:!1,...errorUtil.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...errorUtil.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...errorUtil.errToObj(e)})}regex(e,o){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(o)})}includes(e,o){return this._addCheck({kind:"includes",value:e,position:o==null?void 0:o.position,...errorUtil.errToObj(o==null?void 0:o.message)})}startsWith(e,o){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(o)})}endsWith(e,o){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(o)})}min(e,o){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(o)})}max(e,o){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(o)})}length(e,o){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(o)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const o of this._def.checks)o.kind==="min"&&(e===null||o.value>e)&&(e=o.value);return e}get maxLength(){let e=null;for(const o of this._def.checks)o.kind==="max"&&(e===null||o.value<e)&&(e=o.value);return e}}ZodString.create=n=>{var e;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(n)})};function floatSafeRemainder(n,e){const o=(n.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,s=o>a?o:a,l=parseInt(n.toFixed(s).replace(".","")),c=parseInt(e.toFixed(s).replace(".",""));return l%c/Math.pow(10,s)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZodParsedType.number){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:s.parsedType}),INVALID}let o;const a=new ParseStatus;for(const s of this._def.checks)s.kind==="int"?util.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="multipleOf"?floatSafeRemainder(e.data,s.value)!==0&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.not_finite,message:s.message}),a.dirty()):util.assertNever(s);return{status:a.value,value:e.data}}gte(e,o){return this.setLimit("min",e,!0,errorUtil.toString(o))}gt(e,o){return this.setLimit("min",e,!1,errorUtil.toString(o))}lte(e,o){return this.setLimit("max",e,!0,errorUtil.toString(o))}lt(e,o){return this.setLimit("max",e,!1,errorUtil.toString(o))}setLimit(e,o,a,s){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:o,inclusive:a,message:errorUtil.toString(s)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,o){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(o)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const o of this._def.checks)o.kind==="min"&&(e===null||o.value>e)&&(e=o.value);return e}get maxValue(){let e=null;for(const o of this._def.checks)o.kind==="max"&&(e===null||o.value<e)&&(e=o.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&util.isInteger(e.value))}get isFinite(){let e=null,o=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(o===null||a.value>o)&&(o=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(o)&&Number.isFinite(e)}}ZodNumber.create=n=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...processCreateParams(n)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ZodParsedType.bigint)return this._getInvalidInput(e);let o;const a=new ParseStatus;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):util.assertNever(s);return{status:a.value,value:e.data}}_getInvalidInput(e){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:o.parsedType}),INVALID}gte(e,o){return this.setLimit("min",e,!0,errorUtil.toString(o))}gt(e,o){return this.setLimit("min",e,!1,errorUtil.toString(o))}lte(e,o){return this.setLimit("max",e,!0,errorUtil.toString(o))}lt(e,o){return this.setLimit("max",e,!1,errorUtil.toString(o))}setLimit(e,o,a,s){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:o,inclusive:a,message:errorUtil.toString(s)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,o){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(o)})}get minValue(){let e=null;for(const o of this._def.checks)o.kind==="min"&&(e===null||o.value>e)&&(e=o.value);return e}get maxValue(){let e=null;for(const o of this._def.checks)o.kind==="max"&&(e===null||o.value<e)&&(e=o.value);return e}}ZodBigInt.create=n=>{var e;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(n)})};class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ZodParsedType.boolean){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:o.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=n=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...processCreateParams(n)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZodParsedType.date){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:s.parsedType}),INVALID}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_date}),INVALID}const o=new ParseStatus;let a;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),o.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),o.dirty()):util.assertNever(s);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,o){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(o)})}max(e,o){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(o)})}get minDate(){let e=null;for(const o of this._def.checks)o.kind==="min"&&(e===null||o.value>e)&&(e=o.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const o of this._def.checks)o.kind==="max"&&(e===null||o.value<e)&&(e=o.value);return e!=null?new Date(e):null}}ZodDate.create=n=>new ZodDate({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(n)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:o.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=n=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(n)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:o.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=n=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(n)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:o.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=n=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(n)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=n=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(n)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=n=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(n)});class ZodNever extends ZodType{_parse(e){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:o.parsedType}),INVALID}}ZodNever.create=n=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(n)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:o.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=n=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(n)});class ZodArray extends ZodType{_parse(e){const{ctx:o,status:a}=this._processInputParams(e),s=this._def;if(o.parsedType!==ZodParsedType.array)return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:o.parsedType}),INVALID;if(s.exactLength!==null){const c=o.data.length>s.exactLength.value,d=o.data.length<s.exactLength.value;(c||d)&&(addIssueToContext(o,{code:c?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:d?s.exactLength.value:void 0,maximum:c?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),a.dirty())}if(s.minLength!==null&&o.data.length<s.minLength.value&&(addIssueToContext(o,{code:ZodIssueCode.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),a.dirty()),s.maxLength!==null&&o.data.length>s.maxLength.value&&(addIssueToContext(o,{code:ZodIssueCode.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),a.dirty()),o.common.async)return Promise.all([...o.data].map((c,d)=>s.type._parseAsync(new ParseInputLazyPath(o,c,o.path,d)))).then(c=>ParseStatus.mergeArray(a,c));const l=[...o.data].map((c,d)=>s.type._parseSync(new ParseInputLazyPath(o,c,o.path,d)));return ParseStatus.mergeArray(a,l)}get element(){return this._def.type}min(e,o){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(o)}})}max(e,o){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(o)}})}length(e,o){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(o)}})}nonempty(e){return this.min(1,e)}}ZodArray.create=(n,e)=>new ZodArray({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(e)});function deepPartialify(n){if(n instanceof ZodObject){const e={};for(const o in n.shape){const a=n.shape[o];e[o]=ZodOptional.create(deepPartialify(a))}return new ZodObject({...n._def,shape:()=>e})}else return n instanceof ZodArray?new ZodArray({...n._def,type:deepPartialify(n.element)}):n instanceof ZodOptional?ZodOptional.create(deepPartialify(n.unwrap())):n instanceof ZodNullable?ZodNullable.create(deepPartialify(n.unwrap())):n instanceof ZodTuple?ZodTuple.create(n.items.map(e=>deepPartialify(e))):n}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),o=util.objectKeys(e);return this._cached={shape:e,keys:o}}_parse(e){if(this._getType(e)!==ZodParsedType.object){const u=this._getOrReturnCtx(e);return addIssueToContext(u,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:u.parsedType}),INVALID}const{status:o,ctx:a}=this._processInputParams(e),{shape:s,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const u in a.data)l.includes(u)||c.push(u);const d=[];for(const u of l){const f=s[u],v=a.data[u];d.push({key:{status:"valid",value:u},value:f._parse(new ParseInputLazyPath(a,v,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof ZodNever){const u=this._def.unknownKeys;if(u==="passthrough")for(const f of c)d.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(u==="strict")c.length>0&&(addIssueToContext(a,{code:ZodIssueCode.unrecognized_keys,keys:c}),o.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const f of c){const v=a.data[f];d.push({key:{status:"valid",value:f},value:u._parse(new ParseInputLazyPath(a,v,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const f of d){const v=await f.key,b=await f.value;u.push({key:v,value:b,alwaysSet:f.alwaysSet})}return u}).then(u=>ParseStatus.mergeObjectSync(o,u)):ParseStatus.mergeObjectSync(o,d)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(o,a)=>{var s,l,c,d;const u=(c=(l=(s=this._def).errorMap)===null||l===void 0?void 0:l.call(s,o,a).message)!==null&&c!==void 0?c:a.defaultError;return o.code==="unrecognized_keys"?{message:(d=errorUtil.errToObj(e).message)!==null&&d!==void 0?d:u}:{message:u}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,o){return this.augment({[e]:o})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const o={};return util.objectKeys(e).forEach(a=>{e[a]&&this.shape[a]&&(o[a]=this.shape[a])}),new ZodObject({...this._def,shape:()=>o})}omit(e){const o={};return util.objectKeys(this.shape).forEach(a=>{e[a]||(o[a]=this.shape[a])}),new ZodObject({...this._def,shape:()=>o})}deepPartial(){return deepPartialify(this)}partial(e){const o={};return util.objectKeys(this.shape).forEach(a=>{const s=this.shape[a];e&&!e[a]?o[a]=s:o[a]=s.optional()}),new ZodObject({...this._def,shape:()=>o})}required(e){const o={};return util.objectKeys(this.shape).forEach(a=>{if(e&&!e[a])o[a]=this.shape[a];else{let s=this.shape[a];for(;s instanceof ZodOptional;)s=s._def.innerType;o[a]=s}}),new ZodObject({...this._def,shape:()=>o})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(n,e)=>new ZodObject({shape:()=>n,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)}),ZodObject.strictCreate=(n,e)=>new ZodObject({shape:()=>n,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)}),ZodObject.lazycreate=(n,e)=>new ZodObject({shape:n,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});class ZodUnion extends ZodType{_parse(e){const{ctx:o}=this._processInputParams(e),a=this._def.options;function s(l){for(const d of l)if(d.result.status==="valid")return d.result;for(const d of l)if(d.result.status==="dirty")return o.common.issues.push(...d.ctx.common.issues),d.result;const c=l.map(d=>new ZodError(d.ctx.common.issues));return addIssueToContext(o,{code:ZodIssueCode.invalid_union,unionErrors:c}),INVALID}if(o.common.async)return Promise.all(a.map(async l=>{const c={...o,common:{...o.common,issues:[]},parent:null};return{result:await l._parseAsync({data:o.data,path:o.path,parent:c}),ctx:c}})).then(s);{let l;const c=[];for(const u of a){const f={...o,common:{...o.common,issues:[]},parent:null},v=u._parseSync({data:o.data,path:o.path,parent:f});if(v.status==="valid")return v;v.status==="dirty"&&!l&&(l={result:v,ctx:f}),f.common.issues.length&&c.push(f.common.issues)}if(l)return o.common.issues.push(...l.ctx.common.issues),l.result;const d=c.map(u=>new ZodError(u));return addIssueToContext(o,{code:ZodIssueCode.invalid_union,unionErrors:d}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(n,e)=>new ZodUnion({options:n,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(e)});const getDiscriminator=n=>n instanceof ZodLazy?getDiscriminator(n.schema):n instanceof ZodEffects?getDiscriminator(n.innerType()):n instanceof ZodLiteral?[n.value]:n instanceof ZodEnum?n.options:n instanceof ZodNativeEnum?util.objectValues(n.enum):n instanceof ZodDefault?getDiscriminator(n._def.innerType):n instanceof ZodUndefined?[void 0]:n instanceof ZodNull?[null]:n instanceof ZodOptional?[void 0,...getDiscriminator(n.unwrap())]:n instanceof ZodNullable?[null,...getDiscriminator(n.unwrap())]:n instanceof ZodBranded||n instanceof ZodReadonly?getDiscriminator(n.unwrap()):n instanceof ZodCatch?getDiscriminator(n._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:o}=this._processInputParams(e);if(o.parsedType!==ZodParsedType.object)return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:o.parsedType}),INVALID;const a=this.discriminator,s=o.data[a],l=this.optionsMap.get(s);return l?o.common.async?l._parseAsync({data:o.data,path:o.path,parent:o}):l._parseSync({data:o.data,path:o.path,parent:o}):(addIssueToContext(o,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,o,a){const s=new Map;for(const l of o){const c=getDiscriminator(l.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const d of c){if(s.has(d))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(d)}`);s.set(d,l)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:o,optionsMap:s,...processCreateParams(a)})}}function mergeValues(n,e){const o=getParsedType(n),a=getParsedType(e);if(n===e)return{valid:!0,data:n};if(o===ZodParsedType.object&&a===ZodParsedType.object){const s=util.objectKeys(e),l=util.objectKeys(n).filter(d=>s.indexOf(d)!==-1),c={...n,...e};for(const d of l){const u=mergeValues(n[d],e[d]);if(!u.valid)return{valid:!1};c[d]=u.data}return{valid:!0,data:c}}else if(o===ZodParsedType.array&&a===ZodParsedType.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let l=0;l<n.length;l++){const c=n[l],d=e[l],u=mergeValues(c,d);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return o===ZodParsedType.date&&a===ZodParsedType.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:o,ctx:a}=this._processInputParams(e),s=(l,c)=>{if(isAborted(l)||isAborted(c))return INVALID;const d=mergeValues(l.value,c.value);return d.valid?((isDirty(l)||isDirty(c))&&o.dirty(),{status:o.value,value:d.data}):(addIssueToContext(a,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([l,c])=>s(l,c)):s(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}ZodIntersection.create=(n,e,o)=>new ZodIntersection({left:n,right:e,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(o)});class ZodTuple extends ZodType{_parse(e){const{status:o,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.array)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:a.parsedType}),INVALID;if(a.data.length<this._def.items.length)return addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&a.data.length>this._def.items.length&&(addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),o.dirty());const s=[...a.data].map((l,c)=>{const d=this._def.items[c]||this._def.rest;return d?d._parse(new ParseInputLazyPath(a,l,a.path,c)):null}).filter(l=>!!l);return a.common.async?Promise.all(s).then(l=>ParseStatus.mergeArray(o,l)):ParseStatus.mergeArray(o,s)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:n,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(e)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:o,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.object)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:a.parsedType}),INVALID;const s=[],l=this._def.keyType,c=this._def.valueType;for(const d in a.data)s.push({key:l._parse(new ParseInputLazyPath(a,d,a.path,d)),value:c._parse(new ParseInputLazyPath(a,a.data[d],a.path,d)),alwaysSet:d in a.data});return a.common.async?ParseStatus.mergeObjectAsync(o,s):ParseStatus.mergeObjectSync(o,s)}get element(){return this._def.valueType}static create(e,o,a){return o instanceof ZodType?new ZodRecord({keyType:e,valueType:o,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(a)}):new ZodRecord({keyType:ZodString.create(),valueType:e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(o)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:o,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.map)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:a.parsedType}),INVALID;const s=this._def.keyType,l=this._def.valueType,c=[...a.data.entries()].map(([d,u],f)=>({key:s._parse(new ParseInputLazyPath(a,d,a.path,[f,"key"])),value:l._parse(new ParseInputLazyPath(a,u,a.path,[f,"value"]))}));if(a.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const u of c){const f=await u.key,v=await u.value;if(f.status==="aborted"||v.status==="aborted")return INVALID;(f.status==="dirty"||v.status==="dirty")&&o.dirty(),d.set(f.value,v.value)}return{status:o.value,value:d}})}else{const d=new Map;for(const u of c){const f=u.key,v=u.value;if(f.status==="aborted"||v.status==="aborted")return INVALID;(f.status==="dirty"||v.status==="dirty")&&o.dirty(),d.set(f.value,v.value)}return{status:o.value,value:d}}}}ZodMap.create=(n,e,o)=>new ZodMap({valueType:e,keyType:n,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(o)});class ZodSet extends ZodType{_parse(e){const{status:o,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.set)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:a.parsedType}),INVALID;const s=this._def;s.minSize!==null&&a.data.size<s.minSize.value&&(addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),o.dirty()),s.maxSize!==null&&a.data.size>s.maxSize.value&&(addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),o.dirty());const l=this._def.valueType;function c(u){const f=new Set;for(const v of u){if(v.status==="aborted")return INVALID;v.status==="dirty"&&o.dirty(),f.add(v.value)}return{status:o.value,value:f}}const d=[...a.data.values()].map((u,f)=>l._parse(new ParseInputLazyPath(a,u,a.path,f)));return a.common.async?Promise.all(d).then(u=>c(u)):c(d)}min(e,o){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(o)}})}max(e,o){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(o)}})}size(e,o){return this.min(e,o).max(e,o)}nonempty(e){return this.min(1,e)}}ZodSet.create=(n,e)=>new ZodSet({valueType:n,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(e)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:o}=this._processInputParams(e);if(o.parsedType!==ZodParsedType.function)return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:o.parsedType}),INVALID;function a(d,u){return makeIssue({data:d,path:o.path,errorMaps:[o.common.contextualErrorMap,o.schemaErrorMap,getErrorMap(),errorMap].filter(f=>!!f),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:u}})}function s(d,u){return makeIssue({data:d,path:o.path,errorMaps:[o.common.contextualErrorMap,o.schemaErrorMap,getErrorMap(),errorMap].filter(f=>!!f),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:u}})}const l={errorMap:o.common.contextualErrorMap},c=o.data;if(this._def.returns instanceof ZodPromise){const d=this;return OK(async function(...u){const f=new ZodError([]),v=await d._def.args.parseAsync(u,l).catch(k=>{throw f.addIssue(a(u,k)),f}),b=await Reflect.apply(c,this,v);return await d._def.returns._def.type.parseAsync(b,l).catch(k=>{throw f.addIssue(s(b,k)),f})})}else{const d=this;return OK(function(...u){const f=d._def.args.safeParse(u,l);if(!f.success)throw new ZodError([a(u,f.error)]);const v=Reflect.apply(c,this,f.data),b=d._def.returns.safeParse(v,l);if(!b.success)throw new ZodError([s(v,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,o,a){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:o||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(a)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:o}=this._processInputParams(e);return this._def.getter()._parse({data:o.data,path:o.path,parent:o})}}ZodLazy.create=(n,e)=>new ZodLazy({getter:n,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(e)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{received:o.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}ZodLiteral.create=(n,e)=>new ZodLiteral({value:n,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(e)});function createZodEnum(n,e){return new ZodEnum({values:n,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(e)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const o=this._getOrReturnCtx(e),a=this._def.values;return addIssueToContext(o,{expected:util.joinValues(a),received:o.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(e.data)){const o=this._getOrReturnCtx(e),a=this._def.values;return addIssueToContext(o,{received:o.data,code:ZodIssueCode.invalid_enum_value,options:a}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const o of this._def.values)e[o]=o;return e}get Values(){const e={};for(const o of this._def.values)e[o]=o;return e}get Enum(){const e={};for(const o of this._def.values)e[o]=o;return e}extract(e,o=this._def){return ZodEnum.create(e,{...this._def,...o})}exclude(e,o=this._def){return ZodEnum.create(this.options.filter(a=>!e.includes(a)),{...this._def,...o})}}_ZodEnum_cache=new WeakMap,ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(e){const o=util.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==ZodParsedType.string&&a.parsedType!==ZodParsedType.number){const s=util.objectValues(o);return addIssueToContext(a,{expected:util.joinValues(s),received:a.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(e.data)){const s=util.objectValues(o);return addIssueToContext(a,{received:a.data,code:ZodIssueCode.invalid_enum_value,options:s}),INVALID}return OK(e.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap,ZodNativeEnum.create=(n,e)=>new ZodNativeEnum({values:n,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:o}=this._processInputParams(e);if(o.parsedType!==ZodParsedType.promise&&o.common.async===!1)return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:o.parsedType}),INVALID;const a=o.parsedType===ZodParsedType.promise?o.data:Promise.resolve(o.data);return OK(a.then(s=>this._def.type.parseAsync(s,{path:o.path,errorMap:o.common.contextualErrorMap})))}}ZodPromise.create=(n,e)=>new ZodPromise({type:n,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:o,ctx:a}=this._processInputParams(e),s=this._def.effect||null,l={addIssue:c=>{addIssueToContext(a,c),c.fatal?o.abort():o.dirty()},get path(){return a.path}};if(l.addIssue=l.addIssue.bind(l),s.type==="preprocess"){const c=s.transform(a.data,l);if(a.common.async)return Promise.resolve(c).then(async d=>{if(o.value==="aborted")return INVALID;const u=await this._def.schema._parseAsync({data:d,path:a.path,parent:a});return u.status==="aborted"?INVALID:u.status==="dirty"||o.value==="dirty"?DIRTY(u.value):u});{if(o.value==="aborted")return INVALID;const d=this._def.schema._parseSync({data:c,path:a.path,parent:a});return d.status==="aborted"?INVALID:d.status==="dirty"||o.value==="dirty"?DIRTY(d.value):d}}if(s.type==="refinement"){const c=d=>{const u=s.refinement(d,l);if(a.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(a.common.async===!1){const d=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return d.status==="aborted"?INVALID:(d.status==="dirty"&&o.dirty(),c(d.value),{status:o.value,value:d.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(d=>d.status==="aborted"?INVALID:(d.status==="dirty"&&o.dirty(),c(d.value).then(()=>({status:o.value,value:d.value}))))}if(s.type==="transform")if(a.common.async===!1){const c=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!isValid(c))return c;const d=s.transform(c.value,l);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:o.value,value:d}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(c=>isValid(c)?Promise.resolve(s.transform(c.value,l)).then(d=>({status:o.value,value:d})):c);util.assertNever(s)}}ZodEffects.create=(n,e,o)=>new ZodEffects({schema:n,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:e,...processCreateParams(o)}),ZodEffects.createWithPreprocess=(n,e,o)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:n},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(o)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(n,e)=>new ZodOptional({innerType:n,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(e)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(n,e)=>new ZodNullable({innerType:n,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(e)});class ZodDefault extends ZodType{_parse(e){const{ctx:o}=this._processInputParams(e);let a=o.data;return o.parsedType===ZodParsedType.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:o.path,parent:o})}removeDefault(){return this._def.innerType}}ZodDefault.create=(n,e)=>new ZodDefault({innerType:n,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...processCreateParams(e)});class ZodCatch extends ZodType{_parse(e){const{ctx:o}=this._processInputParams(e),a={...o,common:{...o.common,issues:[]}},s=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return isAsync(s)?s.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new ZodError(a.common.issues)},input:a.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ZodError(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(n,e)=>new ZodCatch({innerType:n,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...processCreateParams(e)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:o.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=n=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(n)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:o}=this._processInputParams(e),a=o.data;return this._def.type._parse({data:a,path:o.path,parent:o})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:o,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?INVALID:s.status==="dirty"?(o.dirty(),DIRTY(s.value)):this._def.out._parseAsync({data:s.value,path:a.path,parent:a})})();{const s=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?INVALID:s.status==="dirty"?(o.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:a.path,parent:a})}}static create(e,o){return new ZodPipeline({in:e,out:o,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const o=this._def.innerType._parse(e),a=s=>(isValid(s)&&(s.value=Object.freeze(s.value)),s);return isAsync(o)?o.then(s=>a(s)):a(o)}unwrap(){return this._def.innerType}}ZodReadonly.create=(n,e)=>new ZodReadonly({innerType:n,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(e)});function custom(n,e={},o){return n?ZodAny.create().superRefine((a,s)=>{var l,c;if(!n(a)){const d=typeof e=="function"?e(a):typeof e=="string"?{message:e}:e,u=(c=(l=d.fatal)!==null&&l!==void 0?l:o)!==null&&c!==void 0?c:!0,f=typeof d=="string"?{message:d}:d;s.addIssue({code:"custom",...f,fatal:u})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(n,e={message:`Input not instance of ${n.name}`})=>custom(o=>o instanceof n,e),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:n=>ZodString.create({...n,coerce:!0}),number:n=>ZodNumber.create({...n,coerce:!0}),boolean:n=>ZodBoolean.create({...n,coerce:!0}),bigint:n=>ZodBigInt.create({...n,coerce:!0}),date:n=>ZodDate.create({...n,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});const GetAllKbInfoSchema={request:z.object({}),result:z.array(z.object({name:z.string(),location:z.string()}))},CreateKbSchema={request:z.object({location:z.string(),name:z.string(),password:z.string()}),result:z.object({})};z.object({location:z.string(),newName:z.string()}),z.object({});const DeleteKbSchema={request:z.object({location:z.string()}),result:z.object({})},BLOCK_CONTENT_TYPES={TEXT:0,IMAGE:1,CODE:2,MATH:3,QUERY:4,CAROUSEL:5},BLOCK_TYPE_ZH_NAMES=["\u6587\u672C","\u56FE\u7247","\u4EE3\u7801","\u516C\u5F0F","\u67E5\u8BE2","\u591A\u56FE"],_RESP_CODES={SUCCESS:0,INVALID_REQUEST:1,PASSWORD_INCORRECT:2,EXCEED_MAX_ATTEMPTS:3,NO_AUTHORIZATION:4,UNKNOWN_ERROR:5,TARGET_NOT_FOUND:6,INVALID_RESPONSE:7,NO_AXIOS:8,FILE_EXISTS:9,DIR_NOT_FOUND:10,TOKEN_EXPIRED:11,PATH_NOT_FOUND:12,PATH_EXISTS_AND_NOT_EMPTY:13,PATH_CANNOT_ACCESS:14},RESP_CODES_NAMES=Object.fromEntries(Object.entries(_RESP_CODES).map(([n,e])=>[e,n])),RESP_CODES={..._RESP_CODES,...RESP_CODES_NAMES},BLOCK_INFO_DOC_NAME="blockInfo",BLOCK_DATA_DOC_NAME_PREFIX="blockData_",RespSchema=n=>z.discriminatedUnion("success",[z.object({success:z.literal(!0),data:n}),z.object({success:z.literal(!1),code:z.number(),msg:z.string().optional()})]),usePostApi=(n,e,o)=>async(a,s)=>{try{let l;try{l=globalThis.getAxios()}catch(u){return console.error(`[NO_AXIOS] ${u}`),{success:!1,code:RESP_CODES.NO_AXIOS}}const c=await l.post(n,a,s);if(!c)return console.error(`[EMPTY_RESPONSE] endpoint=${n}, params=${JSON.stringify(a)}`),{success:!1,code:RESP_CODES.UNKNOWN_ERROR};const d=RespSchema(o).safeParse(c.data);return d.success?d.data:(console.error(`[INVALID_RESPONSE] endpoint=${n}, params=${JSON.stringify(a)}, response=${JSON.stringify(c.data)}, validationErrors=${JSON.stringify(d.error.errors)}`),{success:!1,code:RESP_CODES.INVALID_RESPONSE})}catch(l){return console.error(`[UNKNOWN_ERROR] endpoint=${n}, params=${JSON.stringify(a)}, error=$`,l),{success:!1,code:RESP_CODES.UNKNOWN_ERROR}}},getAllKbInfo=usePostApi("/kb/list",z.object({}),GetAllKbInfoSchema.result),createKb=usePostApi("/kb/create",CreateKbSchema.request,CreateKbSchema.result),deleteKb=usePostApi("/kb/delete",DeleteKbSchema.request,DeleteKbSchema.result),createContext=(n,e=Symbol())=>({injectionKey:e,useContext:o=>inject(e,o),Provider:defineComponent({name:"ContextProvider",inheritAttrs:!1,setup(o,{slots:a}){const s=n(o);return provide(e,s),()=>{var l;return(l=a.default)==null?void 0:l.call(a)}}})}),isBrowser=typeof document<"u";function isRouteComponent(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function isESModule(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&isRouteComponent(n.default)}const assign=Object.assign;function applyToParams(n,e){const o={};for(const a in e){const s=e[a];o[a]=isArray$1(s)?s.map(n):n(s)}return o}const noop$2=()=>{},isArray$1=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(n){return encodeURI(""+n).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(n){return commonEncode(n).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(n){return commonEncode(n).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(n){return encodeQueryValue(n).replace(EQUAL_RE,"%3D")}function encodePath(n){return commonEncode(n).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(n){return n==null?"":encodePath(n).replace(SLASH_RE,"%2F")}function decode(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=n=>n.replace(TRAILING_SLASH_RE,"");function parseURL(n,e,o="/"){let a,s={},l="",c="";const d=e.indexOf("#");let u=e.indexOf("?");return d<u&&d>=0&&(u=-1),u>-1&&(a=e.slice(0,u),l=e.slice(u+1,d>-1?d:e.length),s=n(l)),d>-1&&(a=a||e.slice(0,d),c=e.slice(d,e.length)),a=resolveRelativePath(a??e,o),{fullPath:a+(l&&"?")+l+c,path:a,query:s,hash:decode(c)}}function stringifyURL(n,e){const o=e.query?n(e.query):"";return e.path+(o&&"?")+o+(e.hash||"")}function stripBase(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function isSameRouteLocation(n,e,o){const a=e.matched.length-1,s=o.matched.length-1;return a>-1&&a===s&&isSameRouteRecord(e.matched[a],o.matched[s])&&isSameRouteLocationParams(e.params,o.params)&&n(e.query)===n(o.query)&&e.hash===o.hash}function isSameRouteRecord(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function isSameRouteLocationParams(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const o in n)if(!isSameRouteLocationParamsValue(n[o],e[o]))return!1;return!0}function isSameRouteLocationParamsValue(n,e){return isArray$1(n)?isEquivalentArray(n,e):isArray$1(e)?isEquivalentArray(e,n):n===e}function isEquivalentArray(n,e){return isArray$1(e)?n.length===e.length&&n.every((o,a)=>o===e[a]):n.length===1&&n[0]===e}function resolveRelativePath(n,e){if(n.startsWith("/"))return n;if(!n)return e;const o=e.split("/"),a=n.split("/"),s=a[a.length-1];(s===".."||s===".")&&a.push("");let l=o.length-1,c,d;for(c=0;c<a.length;c++)if(d=a[c],d!==".")if(d==="..")l>1&&l--;else break;return o.slice(0,l).join("/")+"/"+a.slice(c).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(n){n.pop="pop",n.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(n){n.back="back",n.forward="forward",n.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(n){if(!n)if(isBrowser){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),removeTrailingSlash(n)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(n,e){return n.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(n,e){const o=document.documentElement.getBoundingClientRect(),a=n.getBoundingClientRect();return{behavior:e.behavior,left:a.left-o.left-(e.left||0),top:a.top-o.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(n){let e;if("el"in n){const o=n.el,a=typeof o=="string"&&o.startsWith("#"),s=typeof o=="string"?a?document.getElementById(o.slice(1)):document.querySelector(o):o;if(!s)return;e=getElementPosition(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function getScrollKey(n,e){return(history.state?history.state.position-e:-1)+n}const scrollPositions=new Map;function saveScrollPosition(n,e){scrollPositions.set(n,e)}function getSavedScrollPosition(n){const e=scrollPositions.get(n);return scrollPositions.delete(n),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(n,e){const{pathname:o,search:a,hash:s}=e,l=n.indexOf("#");if(l>-1){let c=s.includes(n.slice(l))?n.slice(l).length:1,d=s.slice(c);return d[0]!=="/"&&(d="/"+d),stripBase(d,"")}return stripBase(o,n)+a+s}function useHistoryListeners(n,e,o,a){let s=[],l=[],c=null;const d=({state:k})=>{const x=createCurrentLocation(n,location),_=o.value,E=e.value;let B=0;if(k){if(o.value=x,e.value=k,c&&c===_){c=null;return}B=E?k.position-E.position:0}else a(x);s.forEach(M=>{M(o.value,_,{delta:B,type:NavigationType.pop,direction:B?B>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function u(){c=o.value}function f(k){s.push(k);const x=()=>{const _=s.indexOf(k);_>-1&&s.splice(_,1)};return l.push(x),x}function v(){const{history:k}=window;k.state&&k.replaceState(assign({},k.state,{scroll:computeScrollPosition()}),"")}function b(){for(const k of l)k();l=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",v)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",v,{passive:!0}),{pauseListeners:u,listen:f,destroy:b}}function buildState(n,e,o,a=!1,s=!1){return{back:n,current:e,forward:o,replaced:a,position:window.history.length,scroll:s?computeScrollPosition():null}}function useHistoryStateNavigation(n){const{history:e,location:o}=window,a={value:createCurrentLocation(n,o)},s={value:e.state};s.value||l(a.value,{back:null,current:a.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function l(u,f,v){const b=n.indexOf("#"),k=b>-1?(o.host&&document.querySelector("base")?n:n.slice(b))+u:createBaseLocation()+n+u;try{e[v?"replaceState":"pushState"](f,"",k),s.value=f}catch(x){console.error(x),o[v?"replace":"assign"](k)}}function c(u,f){const v=assign({},e.state,buildState(s.value.back,u,s.value.forward,!0),f,{position:s.value.position});l(u,v,!0),a.value=u}function d(u,f){const v=assign({},s.value,e.state,{forward:u,scroll:computeScrollPosition()});l(v.current,v,!0);const b=assign({},buildState(a.value,u,null),{position:v.position+1},f);l(u,b,!1),a.value=u}return{location:a,state:s,push:d,replace:c}}function createWebHistory(n){n=normalizeBase(n);const e=useHistoryStateNavigation(n),o=useHistoryListeners(n,e.state,e.location,e.replace);function a(l,c=!0){c||o.pauseListeners(),history.go(l)}const s=assign({location:"",base:n,go:a,createHref:createHref.bind(null,n)},e,o);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function createWebHashHistory(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),createWebHistory(n)}function isRouteLocation(n){return typeof n=="string"||n&&typeof n=="object"}function isRouteName(n){return typeof n=="string"||typeof n=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(n,e){return assign(new Error,{type:n,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(n,e){return n instanceof Error&&NavigationFailureSymbol in n&&(e==null||!!(n.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(n,e){const o=assign({},BASE_PATH_PARSER_OPTIONS,e),a=[];let s=o.start?"^":"";const l=[];for(const f of n){const v=f.length?[]:[90];o.strict&&!f.length&&(s+="/");for(let b=0;b<f.length;b++){const k=f[b];let x=40+(o.sensitive?.25:0);if(k.type===0)b||(s+="/"),s+=k.value.replace(REGEX_CHARS_RE,"\\$&"),x+=40;else if(k.type===1){const{value:_,repeatable:E,optional:B,regexp:M}=k;l.push({name:_,repeatable:E,optional:B});const V=M||BASE_PARAM_PATTERN;if(V!==BASE_PARAM_PATTERN){x+=10;try{new RegExp(`(${V})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${_}" (${V}): `+I.message)}}let F=E?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;b||(F=B&&f.length<2?`(?:/${F})`:"/"+F),B&&(F+="?"),s+=F,x+=20,B&&(x+=-8),E&&(x+=-20),V===".*"&&(x+=-50)}v.push(x)}a.push(v)}if(o.strict&&o.end){const f=a.length-1;a[f][a[f].length-1]+=.7000000000000001}o.strict||(s+="/?"),o.end?s+="$":o.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const c=new RegExp(s,o.sensitive?"":"i");function d(f){const v=f.match(c),b={};if(!v)return null;for(let k=1;k<v.length;k++){const x=v[k]||"",_=l[k-1];b[_.name]=x&&_.repeatable?x.split("/"):x}return b}function u(f){let v="",b=!1;for(const k of n){(!b||!v.endsWith("/"))&&(v+="/"),b=!1;for(const x of k)if(x.type===0)v+=x.value;else if(x.type===1){const{value:_,repeatable:E,optional:B}=x,M=_ in f?f[_]:"";if(isArray$1(M)&&!E)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const V=isArray$1(M)?M.join("/"):M;if(!V)if(B)k.length<2&&(v.endsWith("/")?v=v.slice(0,-1):b=!0);else throw new Error(`Missing required param "${_}"`);v+=V}}return v||"/"}return{re:c,score:a,keys:l,parse:d,stringify:u}}function compareScoreArray(n,e){let o=0;for(;o<n.length&&o<e.length;){const a=e[o]-n[o];if(a)return a;o++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function comparePathParserScore(n,e){let o=0;const a=n.score,s=e.score;for(;o<a.length&&o<s.length;){const l=compareScoreArray(a[o],s[o]);if(l)return l;o++}if(Math.abs(s.length-a.length)===1){if(isLastScoreNegative(a))return 1;if(isLastScoreNegative(s))return-1}return s.length-a.length}function isLastScoreNegative(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(n){if(!n)return[[]];if(n==="/")return[[ROOT_TOKEN]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(x){throw new Error(`ERR (${o})/"${f}": ${x}`)}let o=0,a=o;const s=[];let l;function c(){l&&s.push(l),l=[]}let d=0,u,f="",v="";function b(){f&&(o===0?l.push({type:0,value:f}):o===1||o===2||o===3?(l.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:f,regexp:v,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),f="")}function k(){f+=u}for(;d<n.length;){if(u=n[d++],u==="\\"&&o!==2){a=o,o=4;continue}switch(o){case 0:u==="/"?(f&&b(),c()):u===":"?(b(),o=1):k();break;case 4:k(),o=a;break;case 1:u==="("?o=2:VALID_PARAM_RE.test(u)?k():(b(),o=0,u!=="*"&&u!=="?"&&u!=="+"&&d--);break;case 2:u===")"?v[v.length-1]=="\\"?v=v.slice(0,-1)+u:o=3:v+=u;break;case 3:b(),o=0,u!=="*"&&u!=="?"&&u!=="+"&&d--,v="";break;default:e("Unknown state");break}}return o===2&&e(`Unfinished custom RegExp for param "${f}"`),b(),c(),s}function createRouteRecordMatcher(n,e,o){const a=tokensToParser(tokenizePath(n.path),o),s=assign(a,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function createRouterMatcher(n,e){const o=[],a=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function s(b){return a.get(b)}function l(b,k,x){const _=!x,E=normalizeRouteRecord(b);E.aliasOf=x&&x.record;const B=mergeOptions(e,b),M=[E];if("alias"in b){const I=typeof b.alias=="string"?[b.alias]:b.alias;for(const L of I)M.push(normalizeRouteRecord(assign({},E,{components:x?x.record.components:E.components,path:L,aliasOf:x?x.record:E})))}let V,F;for(const I of M){const{path:L}=I;if(k&&L[0]!=="/"){const U=k.record.path,Z=U[U.length-1]==="/"?"":"/";I.path=k.record.path+(L&&Z+L)}if(V=createRouteRecordMatcher(I,k,B),x?x.alias.push(V):(F=F||V,F!==V&&F.alias.push(V),_&&b.name&&!isAliasRecord(V)&&c(b.name)),isMatchable(V)&&u(V),E.children){const U=E.children;for(let Z=0;Z<U.length;Z++)l(U[Z],V,x&&x.children[Z])}x=x||V}return F?()=>{c(F)}:noop$2}function c(b){if(isRouteName(b)){const k=a.get(b);k&&(a.delete(b),o.splice(o.indexOf(k),1),k.children.forEach(c),k.alias.forEach(c))}else{const k=o.indexOf(b);k>-1&&(o.splice(k,1),b.record.name&&a.delete(b.record.name),b.children.forEach(c),b.alias.forEach(c))}}function d(){return o}function u(b){const k=findInsertionIndex(b,o);o.splice(k,0,b),b.record.name&&!isAliasRecord(b)&&a.set(b.record.name,b)}function f(b,k){let x,_={},E,B;if("name"in b&&b.name){if(x=a.get(b.name),!x)throw createRouterError(1,{location:b});B=x.record.name,_=assign(paramsFromLocation(k.params,x.keys.filter(F=>!F.optional).concat(x.parent?x.parent.keys.filter(F=>F.optional):[]).map(F=>F.name)),b.params&&paramsFromLocation(b.params,x.keys.map(F=>F.name))),E=x.stringify(_)}else if(b.path!=null)E=b.path,x=o.find(F=>F.re.test(E)),x&&(_=x.parse(E),B=x.record.name);else{if(x=k.name?a.get(k.name):o.find(F=>F.re.test(k.path)),!x)throw createRouterError(1,{location:b,currentLocation:k});B=x.record.name,_=assign({},k.params,b.params),E=x.stringify(_)}const M=[];let V=x;for(;V;)M.unshift(V.record),V=V.parent;return{name:B,path:E,params:_,matched:M,meta:mergeMetaFields(M)}}n.forEach(b=>l(b));function v(){o.length=0,a.clear()}return{addRoute:l,resolve:f,removeRoute:c,clearRoutes:v,getRoutes:d,getRecordMatcher:s}}function paramsFromLocation(n,e){const o={};for(const a of e)a in n&&(o[a]=n[a]);return o}function normalizeRouteRecord(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:normalizeRecordProps(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function normalizeRecordProps(n){const e={},o=n.props||!1;if("component"in n)e.default=o;else for(const a in n.components)e[a]=typeof o=="object"?o[a]:o;return e}function isAliasRecord(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function mergeMetaFields(n){return n.reduce((e,o)=>assign(e,o.meta),{})}function mergeOptions(n,e){const o={};for(const a in n)o[a]=a in e?e[a]:n[a];return o}function findInsertionIndex(n,e){let o=0,a=e.length;for(;o!==a;){const l=o+a>>1;comparePathParserScore(n,e[l])<0?a=l:o=l+1}const s=getInsertionAncestor(n);return s&&(a=e.lastIndexOf(s,a-1)),a}function getInsertionAncestor(n){let e=n;for(;e=e.parent;)if(isMatchable(e)&&comparePathParserScore(n,e)===0)return e}function isMatchable({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function parseQuery(n){const e={};if(n===""||n==="?")return e;const o=(n[0]==="?"?n.slice(1):n).split("&");for(let a=0;a<o.length;++a){const s=o[a].replace(PLUS_RE," "),l=s.indexOf("="),c=decode(l<0?s:s.slice(0,l)),d=l<0?null:decode(s.slice(l+1));if(c in e){let u=e[c];isArray$1(u)||(u=e[c]=[u]),u.push(d)}else e[c]=d}return e}function stringifyQuery(n){let e="";for(let o in n){const a=n[o];if(o=encodeQueryKey(o),a==null){a!==void 0&&(e+=(e.length?"&":"")+o);continue}(isArray$1(a)?a.map(s=>s&&encodeQueryValue(s)):[a&&encodeQueryValue(a)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+o,s!=null&&(e+="="+s))})}return e}function normalizeQuery(n){const e={};for(const o in n){const a=n[o];a!==void 0&&(e[o]=isArray$1(a)?a.map(s=>s==null?null:""+s):a==null?a:""+a)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let n=[];function e(a){return n.push(a),()=>{const s=n.indexOf(a);s>-1&&n.splice(s,1)}}function o(){n=[]}return{add:e,list:()=>n.slice(),reset:o}}function guardToPromiseFn(n,e,o,a,s,l=c=>c()){const c=a&&(a.enterCallbacks[s]=a.enterCallbacks[s]||[]);return()=>new Promise((d,u)=>{const f=k=>{k===!1?u(createRouterError(4,{from:o,to:e})):k instanceof Error?u(k):isRouteLocation(k)?u(createRouterError(2,{from:e,to:k})):(c&&a.enterCallbacks[s]===c&&typeof k=="function"&&c.push(k),d())},v=l(()=>n.call(a&&a.instances[s],e,o,f));let b=Promise.resolve(v);n.length<3&&(b=b.then(f)),b.catch(k=>u(k))})}function extractComponentsGuards(n,e,o,a,s=l=>l()){const l=[];for(const c of n)for(const d in c.components){let u=c.components[d];if(!(e!=="beforeRouteEnter"&&!c.instances[d]))if(isRouteComponent(u)){const f=(u.__vccOpts||u)[e];f&&l.push(guardToPromiseFn(f,o,a,c,d,s))}else{let f=u();l.push(()=>f.then(v=>{if(!v)throw new Error(`Couldn't resolve component "${d}" at "${c.path}"`);const b=isESModule(v)?v.default:v;c.mods[d]=v,c.components[d]=b;const k=(b.__vccOpts||b)[e];return k&&guardToPromiseFn(k,o,a,c,d,s)()}))}}return l}function useLink(n){const e=inject(routerKey),o=inject(routeLocationKey),a=computed(()=>{const u=unref(n.to);return e.resolve(u)}),s=computed(()=>{const{matched:u}=a.value,{length:f}=u,v=u[f-1],b=o.matched;if(!v||!b.length)return-1;const k=b.findIndex(isSameRouteRecord.bind(null,v));if(k>-1)return k;const x=getOriginalPath(u[f-2]);return f>1&&getOriginalPath(v)===x&&b[b.length-1].path!==x?b.findIndex(isSameRouteRecord.bind(null,u[f-2])):k}),l=computed(()=>s.value>-1&&includesParams(o.params,a.value.params)),c=computed(()=>s.value>-1&&s.value===o.matched.length-1&&isSameRouteLocationParams(o.params,a.value.params));function d(u={}){if(guardEvent(u)){const f=e[unref(n.replace)?"replace":"push"](unref(n.to)).catch(noop$2);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>f),f}return Promise.resolve()}return{route:a,href:computed(()=>a.value.href),isActive:l,isExactActive:c,navigate:d}}function preferSingleVNode(n){return n.length===1?n[0]:n}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(n,{slots:e}){const o=reactive(useLink(n)),{options:a}=inject(routerKey),s=computed(()=>({[getLinkClass(n.activeClass,a.linkActiveClass,"router-link-active")]:o.isActive,[getLinkClass(n.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:o.isExactActive}));return()=>{const l=e.default&&preferSingleVNode(e.default(o));return n.custom?l:h("a",{"aria-current":o.isExactActive?n.ariaCurrentValue:null,href:o.href,onClick:o.navigate,class:s.value},l)}}}),RouterLink=RouterLinkImpl;function guardEvent(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function includesParams(n,e){for(const o in e){const a=e[o],s=n[o];if(typeof a=="string"){if(a!==s)return!1}else if(!isArray$1(s)||s.length!==a.length||a.some((l,c)=>l!==s[c]))return!1}return!0}function getOriginalPath(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const getLinkClass=(n,e,o)=>n??e??o,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:o}){const a=inject(routerViewLocationKey),s=computed(()=>n.route||a.value),l=inject(viewDepthKey,0),c=computed(()=>{let f=unref(l);const{matched:v}=s.value;let b;for(;(b=v[f])&&!b.components;)f++;return f}),d=computed(()=>s.value.matched[c.value]);provide(viewDepthKey,computed(()=>c.value+1)),provide(matchedRouteKey,d),provide(routerViewLocationKey,s);const u=ref();return watch(()=>[u.value,d.value,n.name],([f,v,b],[k,x,_])=>{v&&(v.instances[b]=f,x&&x!==v&&f&&f===k&&(v.leaveGuards.size||(v.leaveGuards=x.leaveGuards),v.updateGuards.size||(v.updateGuards=x.updateGuards))),f&&v&&(!x||!isSameRouteRecord(v,x)||!k)&&(v.enterCallbacks[b]||[]).forEach(E=>E(f))},{flush:"post"}),()=>{const f=s.value,v=n.name,b=d.value,k=b&&b.components[v];if(!k)return normalizeSlot(o.default,{Component:k,route:f});const x=b.props[v],_=x?x===!0?f.params:typeof x=="function"?x(f):x:null,E=h(k,assign({},_,e,{onVnodeUnmounted:B=>{B.component.isUnmounted&&(b.instances[v]=null)},ref:u}));return normalizeSlot(o.default,{Component:E,route:f})||E}}});function normalizeSlot(n,e){if(!n)return null;const o=n(e);return o.length===1?o[0]:o}const RouterView=RouterViewImpl;function createRouter(n){const e=createRouterMatcher(n.routes,n),o=n.parseQuery||parseQuery,a=n.stringifyQuery||stringifyQuery,s=n.history,l=useCallbacks(),c=useCallbacks(),d=useCallbacks(),u=shallowRef(START_LOCATION_NORMALIZED);let f=START_LOCATION_NORMALIZED;isBrowser&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const v=applyToParams.bind(null,Te=>""+Te),b=applyToParams.bind(null,encodeParam),k=applyToParams.bind(null,decode);function x(Te,Ce){let we,ce;return isRouteName(Te)?(we=e.getRecordMatcher(Te),ce=Ce):ce=Te,e.addRoute(ce,we)}function _(Te){const Ce=e.getRecordMatcher(Te);Ce&&e.removeRoute(Ce)}function E(){return e.getRoutes().map(Te=>Te.record)}function B(Te){return!!e.getRecordMatcher(Te)}function M(Te,Ce){if(Ce=assign({},Ce||u.value),typeof Te=="string"){const ge=parseURL(o,Te,Ce.path),_e=e.resolve({path:ge.path},Ce),ke=s.createHref(ge.fullPath);return assign(ge,_e,{params:k(_e.params),hash:decode(ge.hash),redirectedFrom:void 0,href:ke})}let we;if(Te.path!=null)we=assign({},Te,{path:parseURL(o,Te.path,Ce.path).path});else{const ge=assign({},Te.params);for(const _e in ge)ge[_e]==null&&delete ge[_e];we=assign({},Te,{params:b(ge)}),Ce.params=b(Ce.params)}const ce=e.resolve(we,Ce),ee=Te.hash||"";ce.params=v(k(ce.params));const oe=stringifyURL(a,assign({},Te,{hash:encodeHash(ee),path:ce.path})),se=s.createHref(oe);return assign({fullPath:oe,hash:ee,query:a===stringifyQuery?normalizeQuery(Te.query):Te.query||{}},ce,{redirectedFrom:void 0,href:se})}function V(Te){return typeof Te=="string"?parseURL(o,Te,u.value.path):assign({},Te)}function F(Te,Ce){if(f!==Te)return createRouterError(8,{from:Ce,to:Te})}function I(Te){return Z(Te)}function L(Te){return I(assign(V(Te),{replace:!0}))}function U(Te){const Ce=Te.matched[Te.matched.length-1];if(Ce&&Ce.redirect){const{redirect:we}=Ce;let ce=typeof we=="function"?we(Te):we;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=V(ce):{path:ce},ce.params={}),assign({query:Te.query,hash:Te.hash,params:ce.path!=null?{}:Te.params},ce)}}function Z(Te,Ce){const we=f=M(Te),ce=u.value,ee=Te.state,oe=Te.force,se=Te.replace===!0,ge=U(we);if(ge)return Z(assign(V(ge),{state:typeof ge=="object"?assign({},ee,ge.state):ee,force:oe,replace:se}),Ce||we);const _e=we;_e.redirectedFrom=Ce;let ke;return!oe&&isSameRouteLocation(a,ce,we)&&(ke=createRouterError(16,{to:_e,from:ce}),ze(ce,ce,!0,!1)),(ke?Promise.resolve(ke):W(_e,ce)).catch(Ee=>isNavigationFailure(Ee)?isNavigationFailure(Ee,2)?Ee:We(Ee):Ve(Ee,_e,ce)).then(Ee=>{if(Ee){if(isNavigationFailure(Ee,2))return Z(assign({replace:se},V(Ee.to),{state:typeof Ee.to=="object"?assign({},ee,Ee.to.state):ee,force:oe}),Ce||_e)}else Ee=G(_e,ce,!0,se,ee);return Y(_e,ce,Ee),Ee})}function K(Te,Ce){const we=F(Te,Ce);return we?Promise.reject(we):Promise.resolve()}function j(Te){const Ce=Xe.values().next().value;return Ce&&typeof Ce.runWithContext=="function"?Ce.runWithContext(Te):Te()}function W(Te,Ce){let we;const[ce,ee,oe]=extractChangingRecords(Te,Ce);we=extractComponentsGuards(ce.reverse(),"beforeRouteLeave",Te,Ce);for(const ge of ce)ge.leaveGuards.forEach(_e=>{we.push(guardToPromiseFn(_e,Te,Ce))});const se=K.bind(null,Te,Ce);return we.push(se),ft(we).then(()=>{we=[];for(const ge of l.list())we.push(guardToPromiseFn(ge,Te,Ce));return we.push(se),ft(we)}).then(()=>{we=extractComponentsGuards(ee,"beforeRouteUpdate",Te,Ce);for(const ge of ee)ge.updateGuards.forEach(_e=>{we.push(guardToPromiseFn(_e,Te,Ce))});return we.push(se),ft(we)}).then(()=>{we=[];for(const ge of oe)if(ge.beforeEnter)if(isArray$1(ge.beforeEnter))for(const _e of ge.beforeEnter)we.push(guardToPromiseFn(_e,Te,Ce));else we.push(guardToPromiseFn(ge.beforeEnter,Te,Ce));return we.push(se),ft(we)}).then(()=>(Te.matched.forEach(ge=>ge.enterCallbacks={}),we=extractComponentsGuards(oe,"beforeRouteEnter",Te,Ce,j),we.push(se),ft(we))).then(()=>{we=[];for(const ge of c.list())we.push(guardToPromiseFn(ge,Te,Ce));return we.push(se),ft(we)}).catch(ge=>isNavigationFailure(ge,8)?ge:Promise.reject(ge))}function Y(Te,Ce,we){d.list().forEach(ce=>j(()=>ce(Te,Ce,we)))}function G(Te,Ce,we,ce,ee){const oe=F(Te,Ce);if(oe)return oe;const se=Ce===START_LOCATION_NORMALIZED,ge=isBrowser?history.state:{};we&&(ce||se?s.replace(Te.fullPath,assign({scroll:se&&ge&&ge.scroll},ee)):s.push(Te.fullPath,ee)),u.value=Te,ze(Te,Ce,we,se),We()}let fe;function le(){fe||(fe=s.listen((Te,Ce,we)=>{if(!Ge.listening)return;const ce=M(Te),ee=U(ce);if(ee){Z(assign(ee,{replace:!0,force:!0}),ce).catch(noop$2);return}f=ce;const oe=u.value;isBrowser&&saveScrollPosition(getScrollKey(oe.fullPath,we.delta),computeScrollPosition()),W(ce,oe).catch(se=>isNavigationFailure(se,12)?se:isNavigationFailure(se,2)?(Z(assign(V(se.to),{force:!0}),ce).then(ge=>{isNavigationFailure(ge,20)&&!we.delta&&we.type===NavigationType.pop&&s.go(-1,!1)}).catch(noop$2),Promise.reject()):(we.delta&&s.go(-we.delta,!1),Ve(se,ce,oe))).then(se=>{se=se||G(ce,oe,!1),se&&(we.delta&&!isNavigationFailure(se,8)?s.go(-we.delta,!1):we.type===NavigationType.pop&&isNavigationFailure(se,20)&&s.go(-1,!1)),Y(ce,oe,se)}).catch(noop$2)}))}let pe=useCallbacks(),ue=useCallbacks(),Ne;function Ve(Te,Ce,we){We(Te);const ce=ue.list();return ce.length?ce.forEach(ee=>ee(Te,Ce,we)):console.error(Te),Promise.reject(Te)}function Ze(){return Ne&&u.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Te,Ce)=>{pe.add([Te,Ce])})}function We(Te){return Ne||(Ne=!Te,le(),pe.list().forEach(([Ce,we])=>Te?we(Te):Ce()),pe.reset()),Te}function ze(Te,Ce,we,ce){const{scrollBehavior:ee}=n;if(!isBrowser||!ee)return Promise.resolve();const oe=!we&&getSavedScrollPosition(getScrollKey(Te.fullPath,0))||(ce||!we)&&history.state&&history.state.scroll||null;return nextTick().then(()=>ee(Te,Ce,oe)).then(se=>se&&scrollToPosition(se)).catch(se=>Ve(se,Te,Ce))}const qe=Te=>s.go(Te);let dt;const Xe=new Set,Ge={currentRoute:u,listening:!0,addRoute:x,removeRoute:_,clearRoutes:e.clearRoutes,hasRoute:B,getRoutes:E,resolve:M,options:n,push:I,replace:L,go:qe,back:()=>qe(-1),forward:()=>qe(1),beforeEach:l.add,beforeResolve:c.add,afterEach:d.add,onError:ue.add,isReady:Ze,install(Te){const Ce=this;Te.component("RouterLink",RouterLink),Te.component("RouterView",RouterView),Te.config.globalProperties.$router=Ce,Object.defineProperty(Te.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(u)}),isBrowser&&!dt&&u.value===START_LOCATION_NORMALIZED&&(dt=!0,I(s.location).catch(ee=>{}));const we={};for(const ee in START_LOCATION_NORMALIZED)Object.defineProperty(we,ee,{get:()=>u.value[ee],enumerable:!0});Te.provide(routerKey,Ce),Te.provide(routeLocationKey,shallowReactive(we)),Te.provide(routerViewLocationKey,u);const ce=Te.unmount;Xe.add(Te),Te.unmount=function(){Xe.delete(Te),Xe.size<1&&(f=START_LOCATION_NORMALIZED,fe&&fe(),fe=null,u.value=START_LOCATION_NORMALIZED,dt=!1,Ne=!1),ce()}}};function ft(Te){return Te.reduce((Ce,we)=>Ce.then(()=>j(we)),Promise.resolve())}return Ge}function extractChangingRecords(n,e){const o=[],a=[],s=[],l=Math.max(e.matched.length,n.matched.length);for(let c=0;c<l;c++){const d=e.matched[c];d&&(n.matched.find(f=>isSameRouteRecord(f,d))?a.push(d):o.push(d));const u=n.matched[c];u&&(e.matched.find(f=>isSameRouteRecord(f,u))||s.push(u))}return[o,a,s]}function useRouter(){return inject(routerKey)}function useRoute(n){return inject(routeLocationKey)}const paramsSchema=z.object({serverUrl:z.string().optional(),location:z.string().optional(),rootBLockId:z.string().optional(),focusedBlockId:z.string().optional()}),useRouterParams=()=>{const n=useRoute(),e=useRouter();return computed({get:()=>{const o=paramsSchema.safeParse({serverUrl:n.params.serverUrl,location:n.params.location,rootBLockId:n.params.rootBLockId,focusedBlockId:n.params.focusedBlockId});if(!o.success)return;const{serverUrl:a,location:s,rootBLockId:l,focusedBlockId:c}=o.data;return{serverUrl:a?decodeURIComponent(a):void 0,location:s?decodeURIComponent(s):void 0,rootBLockId:l?decodeURIComponent(l):void 0,focusedBlockId:c?decodeURIComponent(c):void 0}},set:o=>{const a=paramsSchema.safeParse(o);if(!a.success){console.error("invalid router params",o);return}const{serverUrl:s,location:l,rootBLockId:c,focusedBlockId:d}=a.data;e.push({params:{serverUrl:s?encodeURIComponent(s):void 0,location:l?encodeURIComponent(l):void 0,rootBLockId:c?encodeURIComponent(c):void 0,focusedBlockId:d?encodeURIComponent(d):void 0}})}})},KbInfoContext=createContext(()=>{const n=ref({}),e=useRouterParams(),o=computed(()=>{var l;const s=(l=e.value)==null?void 0:l.location;return s==null?null:n.value[s]??null}),a=async(s,l,c)=>{const d=await getAllKbInfo({});if(!d.success){c==null||c(d);return}n.value=d.data.reduce((u,f)=>(u[f.location]={name:f.name,location:f.location},u),{}),l==null||l(d)};return watch(()=>{var s;return(s=e.value)==null?void 0:s.serverUrl},()=>{var s;((s=e.value)==null?void 0:s.serverUrl)!=null&&a()},{immediate:!0}),{kbs:n,refreshKbList:a,currKbInfo:o}}),JwtPayloadSchema=z.discriminatedUnion("role",[z.object({role:z.literal("admin"),serverUrl:z.string()}),z.object({role:z.literal("kb-editor"),serverUrl:z.string(),location:z.string()})]);function tryOnScopeDispose(n){return getCurrentScope()?(onScopeDispose(n),!0):!1}const localProvidedStateMap=new WeakMap,injectLocal=(...n)=>{var e;const o=n[0],a=(e=getCurrentInstance())==null?void 0:e.proxy;if(a==null&&!hasInjectionContext())throw new Error("injectLocal must be called in setup");return a&&localProvidedStateMap.has(a)&&o in localProvidedStateMap.get(a)?localProvidedStateMap.get(a)[o]:inject(...n)},isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const isDef=n=>typeof n<"u",toString$1=Object.prototype.toString,isObject$1=n=>toString$1.call(n)==="[object Object]",noop$1=()=>{};function createFilterWrapper(n,e){function o(...a){return new Promise((s,l)=>{Promise.resolve(n(()=>e.apply(this,a),{fn:e,thisArg:this,args:a})).then(s).catch(l)})}return o}const bypassFilter=n=>n();function debounceFilter(n,e={}){let o,a,s=noop$1;const l=c=>{clearTimeout(c),s(),s=noop$1};return c=>{const d=toValue$2(n),u=toValue$2(e.maxWait);return o&&l(o),d<=0||u!==void 0&&u<=0?(a&&(l(a),a=null),Promise.resolve(c())):new Promise((f,v)=>{s=e.rejectOnCancel?v:f,u&&!a&&(a=setTimeout(()=>{o&&l(o),a=null,f(c())},u)),o=setTimeout(()=>{a&&l(a),a=null,f(c())},d)})}}function throttleFilter(...n){let e=0,o,a=!0,s=noop$1,l,c,d,u,f;!isRef(n[0])&&typeof n[0]=="object"?{delay:c,trailing:d=!0,leading:u=!0,rejectOnCancel:f=!1}=n[0]:[c,d=!0,u=!0,f=!1]=n;const v=()=>{o&&(clearTimeout(o),o=void 0,s(),s=noop$1)};return b=>{const k=toValue$2(c),x=Date.now()-e,_=()=>l=b();return v(),k<=0?(e=Date.now(),_()):(x>k&&(u||!a)?(e=Date.now(),_()):d&&(l=new Promise((E,B)=>{s=f?B:E,o=setTimeout(()=>{e=Date.now(),a=!0,E(_()),v()},Math.max(0,k-x))})),!u&&!o&&(o=setTimeout(()=>a=!0,k)),a=!1,l)}}function pausableFilter(n=bypassFilter){const e=ref(!0);function o(){e.value=!1}function a(){e.value=!0}const s=(...l)=>{e.value&&n(...l)};return{isActive:readonly(e),pause:o,resume:a,eventFilter:s}}function pxValue(n){return n.endsWith("rem")?Number.parseFloat(n)*16:Number.parseFloat(n)}function getLifeCycleTarget(n){return getCurrentInstance()}function toArray$1(n){return Array.isArray(n)?n:[n]}function toRef(...n){if(n.length!==1)return toRef$1(...n);const e=n[0];return typeof e=="function"?readonly(customRef(()=>({get:e,set:noop$1}))):ref(e)}function useDebounceFn(n,e=200,o={}){return createFilterWrapper(debounceFilter(e,o),n)}function useThrottleFn(n,e=200,o=!1,a=!0,s=!1){return createFilterWrapper(throttleFilter(e,o,a,s),n)}function watchWithFilter(n,e,o={}){const{eventFilter:a=bypassFilter,...s}=o;return watch(n,createFilterWrapper(a,e),s)}function watchPausable(n,e,o={}){const{eventFilter:a,...s}=o,{eventFilter:l,pause:c,resume:d,isActive:u}=pausableFilter(a);return{stop:watchWithFilter(n,e,{...s,eventFilter:l}),pause:c,resume:d,isActive:u}}function syncRef(n,e,...[o]){const{flush:a="sync",deep:s=!1,immediate:l=!0,direction:c="both",transform:d={}}=o||{},u=[],f="ltr"in d&&d.ltr||(b=>b),v="rtl"in d&&d.rtl||(b=>b);return(c==="both"||c==="ltr")&&u.push(watchPausable(n,b=>{u.forEach(k=>k.pause()),e.value=f(b),u.forEach(k=>k.resume())},{flush:a,deep:s,immediate:l})),(c==="both"||c==="rtl")&&u.push(watchPausable(e,b=>{u.forEach(k=>k.pause()),n.value=v(b),u.forEach(k=>k.resume())},{flush:a,deep:s,immediate:l})),()=>{u.forEach(b=>b.stop())}}function tryOnMounted(n,e=!0,o){getLifeCycleTarget()?onMounted(n,o):e?n():nextTick(n)}const defaultWindow=isClient?window:void 0;function unrefElement(n){var e;const o=toValue$2(n);return(e=o==null?void 0:o.$el)!=null?e:o}function useEventListener(...n){let e,o,a,s;if(typeof n[0]=="string"||Array.isArray(n[0])?([o,a,s]=n,e=defaultWindow):[e,o,a,s]=n,!e)return noop$1;o=toArray$1(o),a=toArray$1(a);const l=[],c=()=>{l.forEach(v=>v()),l.length=0},d=(v,b,k,x)=>(v.addEventListener(b,k,x),()=>v.removeEventListener(b,k,x)),u=watch(()=>[unrefElement(e),toValue$2(s)],([v,b])=>{if(c(),!v)return;const k=isObject$1(b)?{...b}:b;l.push(...o.flatMap(x=>a.map(_=>d(v,x,_,k))))},{immediate:!0,flush:"post"}),f=()=>{u(),c()};return tryOnScopeDispose(f),f}function useMounted(){const n=ref(!1),e=getCurrentInstance();return e&&onMounted(()=>{n.value=!0},e),n}function useSupported(n){const e=useMounted();return computed(()=>(e.value,!!n()))}const ssrWidthSymbol=Symbol("vueuse-ssr-width");function useSSRWidth(){const n=hasInjectionContext()?injectLocal(ssrWidthSymbol,null):null;return typeof n=="number"?n:void 0}function useMediaQuery(n,e={}){const{window:o=defaultWindow,ssrWidth:a=useSSRWidth()}=e,s=useSupported(()=>o&&"matchMedia"in o&&typeof o.matchMedia=="function"),l=ref(typeof a=="number");let c;const d=ref(!1),u=b=>{d.value=b.matches},f=()=>{c&&("removeEventListener"in c?c.removeEventListener("change",u):c.removeListener(u))},v=watchEffect(()=>{if(l.value){l.value=!s.value;const b=toValue$2(n).split(",");d.value=b.some(k=>{const x=k.includes("not all"),_=k.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),E=k.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let B=!!(_||E);return _&&B&&(B=a>=pxValue(_[1])),E&&B&&(B=a<=pxValue(E[1])),x?!B:B});return}s.value&&(f(),c=o.matchMedia(toValue$2(n)),"addEventListener"in c?c.addEventListener("change",u):c.addListener(u),d.value=c.matches)});return tryOnScopeDispose(()=>{v(),f(),c=void 0}),computed(()=>d.value)}function cloneFnJSON(n){return JSON.parse(JSON.stringify(n))}const _global$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers$2=getHandlers();function getHandlers(){return globalKey in _global$1||(_global$1[globalKey]=_global$1[globalKey]||{}),_global$1[globalKey]}function getSSRHandler(n,e){return handlers$2[n]||e}function usePreferredDark(n){return useMediaQuery("(prefers-color-scheme: dark)",n)}function guessSerializerType(n){return n==null?"any":n instanceof Set?"set":n instanceof Map?"map":n instanceof Date?"date":typeof n=="boolean"?"boolean":typeof n=="string"?"string":typeof n=="object"?"object":Number.isNaN(n)?"any":"number"}const StorageSerializers={boolean:{read:n=>n==="true",write:n=>String(n)},object:{read:n=>JSON.parse(n),write:n=>JSON.stringify(n)},number:{read:n=>Number.parseFloat(n),write:n=>String(n)},any:{read:n=>n,write:n=>String(n)},string:{read:n=>n,write:n=>String(n)},map:{read:n=>new Map(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n.entries()))},set:{read:n=>new Set(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n))},date:{read:n=>new Date(n),write:n=>n.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(n,e,o,a={}){var s;const{flush:l="pre",deep:c=!0,listenToStorageChanges:d=!0,writeDefaults:u=!0,mergeDefaults:f=!1,shallow:v,window:b=defaultWindow,eventFilter:k,onError:x=W=>{console.error(W)},initOnMounted:_}=a,E=(v?shallowRef:ref)(typeof e=="function"?e():e);if(!o)try{o=getSSRHandler("getDefaultStorage",()=>{var W;return(W=defaultWindow)==null?void 0:W.localStorage})()}catch(W){x(W)}if(!o)return E;const B=toValue$2(e),M=guessSerializerType(B),V=(s=a.serializer)!=null?s:StorageSerializers[M],{pause:F,resume:I}=watchPausable(E,()=>U(E.value),{flush:l,deep:c,eventFilter:k});b&&d&&tryOnMounted(()=>{o instanceof Storage?useEventListener(b,"storage",K):useEventListener(b,customStorageEventName,j),_&&K()}),_||K();function L(W,Y){if(b){const G={key:n,oldValue:W,newValue:Y,storageArea:o};b.dispatchEvent(o instanceof Storage?new StorageEvent("storage",G):new CustomEvent(customStorageEventName,{detail:G}))}}function U(W){try{const Y=o.getItem(n);if(W==null)L(Y,null),o.removeItem(n);else{const G=V.write(W);Y!==G&&(o.setItem(n,G),L(Y,G))}}catch(Y){x(Y)}}function Z(W){const Y=W?W.newValue:o.getItem(n);if(Y==null)return u&&B!=null&&o.setItem(n,V.write(B)),B;if(!W&&f){const G=V.read(Y);return typeof f=="function"?f(G,B):M==="object"&&!Array.isArray(G)?{...B,...G}:G}else return typeof Y!="string"?Y:V.read(Y)}function K(W){if(!(W&&W.storageArea!==o)){if(W&&W.key==null){E.value=B;return}if(!(W&&W.key!==n)){F();try{(W==null?void 0:W.newValue)!==V.write(E.value)&&(E.value=Z(W))}catch(Y){x(Y)}finally{W?nextTick(I):I()}}}}function j(W){K(W.detail)}return E}const CSS_DISABLE_TRANS="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function useColorMode(n={}){const{selector:e="html",attribute:o="class",initialValue:a="auto",window:s=defaultWindow,storage:l,storageKey:c="vueuse-color-scheme",listenToStorageChanges:d=!0,storageRef:u,emitAuto:f,disableTransition:v=!0}=n,b={auto:"",light:"light",dark:"dark",...n.modes||{}},k=usePreferredDark({window:s}),x=computed(()=>k.value?"dark":"light"),_=u||(c==null?toRef(a):useStorage(c,a,l,{window:s,listenToStorageChanges:d})),E=computed(()=>_.value==="auto"?x.value:_.value),B=getSSRHandler("updateHTMLAttrs",(I,L,U)=>{const Z=typeof I=="string"?s==null?void 0:s.document.querySelector(I):unrefElement(I);if(!Z)return;const K=new Set,j=new Set;let W=null;if(L==="class"){const G=U.split(/\s/g);Object.values(b).flatMap(fe=>(fe||"").split(/\s/g)).filter(Boolean).forEach(fe=>{G.includes(fe)?K.add(fe):j.add(fe)})}else W={key:L,value:U};if(K.size===0&&j.size===0&&W===null)return;let Y;v&&(Y=s.document.createElement("style"),Y.appendChild(document.createTextNode(CSS_DISABLE_TRANS)),s.document.head.appendChild(Y));for(const G of K)Z.classList.add(G);for(const G of j)Z.classList.remove(G);W&&Z.setAttribute(W.key,W.value),v&&(s.getComputedStyle(Y).opacity,document.head.removeChild(Y))});function M(I){var L;B(e,o,(L=b[I])!=null?L:I)}function V(I){n.onChanged?n.onChanged(I,M):M(I)}watch(E,V,{flush:"post",immediate:!0}),tryOnMounted(()=>V(E.value));const F=computed({get(){return f?_.value:E.value},set(I){_.value=I}});return Object.assign(F,{store:_,system:x,state:E})}function useLocalStorage(n,e,o={}){const{window:a=defaultWindow}=o;return useStorage(n,e,a==null?void 0:a.localStorage,o)}function useVModel(n,e,o,a={}){var s,l,c;const{clone:d=!1,passive:u=!1,eventName:f,deep:v=!1,defaultValue:b,shouldEmit:k}=a,x=getCurrentInstance(),_=o||(x==null?void 0:x.emit)||((s=x==null?void 0:x.$emit)==null?void 0:s.bind(x))||((c=(l=x==null?void 0:x.proxy)==null?void 0:l.$emit)==null?void 0:c.bind(x==null?void 0:x.proxy));let E=f;E=E||`update:${e.toString()}`;const B=F=>d?typeof d=="function"?d(F):cloneFnJSON(F):F,M=()=>isDef(n[e])?B(n[e]):b,V=F=>{k?k(F)&&_(E,F):_(E,F)};if(u){const F=M(),I=ref(F);let L=!1;return watch(()=>n[e],U=>{L||(L=!0,I.value=B(U),nextTick(()=>L=!1))}),watch(I,U=>{!L&&(U!==n[e]||v)&&V(U)},{deep:v}),I}else return computed({get(){return M()},set(F){V(F)}})}const useLocalStorage2=(n,e)=>{const o=ref(e);return watch(n,(a,s,l)=>{if(!a)return;const c=useLocalStorage(a,e),d=syncRef(o,c,{immediate:!0,direction:"rtl"}),u=syncRef(o,c,{direction:"ltr"});l(()=>{d(),u()})},{immediate:!0}),o};function bind$1(n,e){return function(){return n.apply(e,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(n=>e=>{const o=toString.call(e);return n[o]||(n[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=n=>(n=n.toLowerCase(),e=>kindOf(e)===n),typeOfTest=n=>e=>typeof e===n,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&isFunction(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&isArrayBuffer(n.buffer),e}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=n=>n!==null&&typeof n=="object",isBoolean=n=>n===!0||n===!1,isPlainObject=n=>{if(kindOf(n)!=="object")return!1;const e=getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=n=>isObject(n)&&isFunction(n.pipe),isFormData=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||isFunction(n.append)&&((e=kindOf(n))==="formdata"||e==="object"&&isFunction(n.toString)&&n.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(n,e,{allOwnKeys:o=!1}={}){if(n===null||typeof n>"u")return;let a,s;if(typeof n!="object"&&(n=[n]),isArray(n))for(a=0,s=n.length;a<s;a++)e.call(null,n[a],a,n);else{const l=o?Object.getOwnPropertyNames(n):Object.keys(n),c=l.length;let d;for(a=0;a<c;a++)d=l[a],e.call(null,n[d],d,n)}}function findKey(n,e){e=e.toLowerCase();const o=Object.keys(n);let a=o.length,s;for(;a-- >0;)if(s=o[a],e===s.toLowerCase())return s;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=n=>!isUndefined(n)&&n!==_global;function merge(){const{caseless:n}=isContextDefined(this)&&this||{},e={},o=(a,s)=>{const l=n&&findKey(e,s)||s;isPlainObject(e[l])&&isPlainObject(a)?e[l]=merge(e[l],a):isPlainObject(a)?e[l]=merge({},a):isArray(a)?e[l]=a.slice():e[l]=a};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&forEach(arguments[a],o);return e}const extend=(n,e,o,{allOwnKeys:a}={})=>(forEach(e,(s,l)=>{o&&isFunction(s)?n[l]=bind$1(s,o):n[l]=s},{allOwnKeys:a}),n),stripBOM=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),inherits=(n,e,o,a)=>{n.prototype=Object.create(e.prototype,a),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),o&&Object.assign(n.prototype,o)},toFlatObject=(n,e,o,a)=>{let s,l,c;const d={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),l=s.length;l-- >0;)c=s[l],(!a||a(c,n,e))&&!d[c]&&(e[c]=n[c],d[c]=!0);n=o!==!1&&getPrototypeOf(n)}while(n&&(!o||o(n,e))&&n!==Object.prototype);return e},endsWith=(n,e,o)=>{n=String(n),(o===void 0||o>n.length)&&(o=n.length),o-=e.length;const a=n.indexOf(e,o);return a!==-1&&a===o},toArray=n=>{if(!n)return null;if(isArray(n))return n;let e=n.length;if(!isNumber(e))return null;const o=new Array(e);for(;e-- >0;)o[e]=n[e];return o},isTypedArray=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(n,e)=>{const o=(n&&n[Symbol.iterator]).call(n);let a;for(;(a=o.next())&&!a.done;){const s=a.value;e.call(n,s[0],s[1])}},matchAll=(n,e)=>{let o;const a=[];for(;(o=n.exec(e))!==null;)a.push(o);return a},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,o,a){return o.toUpperCase()+a}),hasOwnProperty=(({hasOwnProperty:n})=>(e,o)=>n.call(e,o))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(n,e)=>{const o=Object.getOwnPropertyDescriptors(n),a={};forEach(o,(s,l)=>{let c;(c=e(s,l,n))!==!1&&(a[l]=c||s)}),Object.defineProperties(n,a)},freezeMethods=n=>{reduceDescriptors(n,(e,o)=>{if(isFunction(n)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const a=n[o];if(isFunction(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},toObjectSet=(n,e)=>{const o={},a=s=>{s.forEach(l=>{o[l]=!0})};return isArray(n)?a(n):a(String(n).split(e)),o},noop=()=>{},toFiniteNumber=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(n=16,e=ALPHABET.ALPHA_DIGIT)=>{let o="";const{length:a}=e;for(;n--;)o+=e[Math.random()*a|0];return o};function isSpecCompliantForm(n){return!!(n&&isFunction(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const toJSONObject=n=>{const e=new Array(10),o=(a,s)=>{if(isObject(a)){if(e.indexOf(a)>=0)return;if(!("toJSON"in a)){e[s]=a;const l=isArray(a)?[]:{};return forEach(a,(c,d)=>{const u=o(c,s+1);!isUndefined(u)&&(l[d]=u)}),e[s]=void 0,l}}return a};return o(n,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=n=>n&&(isObject(n)||isFunction(n))&&isFunction(n.then)&&isFunction(n.catch),_setImmediate=((n,e)=>n?setImmediate:e?((o,a)=>(_global.addEventListener("message",({source:s,data:l})=>{s===_global&&l===o&&a.length&&a.shift()()},!1),s=>{a.push(s),_global.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$2={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(n,e,o,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),o&&(this.config=o),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}utils$2.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$2.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{descriptors[n]={value:n}}),Object.defineProperties(AxiosError,descriptors),Object.defineProperty(prototype$1,"isAxiosError",{value:!0}),AxiosError.from=(n,e,o,a,s,l)=>{const c=Object.create(prototype$1);return utils$2.toFlatObject(n,c,function(d){return d!==Error.prototype},d=>d!=="isAxiosError"),AxiosError.call(c,n.message,e,o,a,s),c.cause=n,c.name=n.name,l&&Object.assign(c,l),c};const httpAdapter=null;function isVisitable(n){return utils$2.isPlainObject(n)||utils$2.isArray(n)}function removeBrackets(n){return utils$2.endsWith(n,"[]")?n.slice(0,-2):n}function renderKey(n,e,o){return n?n.concat(e).map(function(a,s){return a=removeBrackets(a),!o&&s?"["+a+"]":a}).join(o?".":""):e}function isFlatArray(n){return utils$2.isArray(n)&&!n.some(isVisitable)}const predicates=utils$2.toFlatObject(utils$2,{},null,function(n){return/^is[A-Z]/.test(n)});function toFormData(n,e,o){if(!utils$2.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,o=utils$2.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,_){return!utils$2.isUndefined(_[x])});const a=o.metaTokens,s=o.visitor||f,l=o.dots,c=o.indexes,d=(o.Blob||typeof Blob<"u"&&Blob)&&utils$2.isSpecCompliantForm(e);if(!utils$2.isFunction(s))throw new TypeError("visitor must be a function");function u(x){if(x===null)return"";if(utils$2.isDate(x))return x.toISOString();if(!d&&utils$2.isBlob(x))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$2.isArrayBuffer(x)||utils$2.isTypedArray(x)?d&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function f(x,_,E){let B=x;if(x&&!E&&typeof x=="object"){if(utils$2.endsWith(_,"{}"))_=a?_:_.slice(0,-2),x=JSON.stringify(x);else if(utils$2.isArray(x)&&isFlatArray(x)||(utils$2.isFileList(x)||utils$2.endsWith(_,"[]"))&&(B=utils$2.toArray(x)))return _=removeBrackets(_),B.forEach(function(M,V){!(utils$2.isUndefined(M)||M===null)&&e.append(c===!0?renderKey([_],V,l):c===null?_:_+"[]",u(M))}),!1}return isVisitable(x)?!0:(e.append(renderKey(E,_,l),u(x)),!1)}const v=[],b=Object.assign(predicates,{defaultVisitor:f,convertValue:u,isVisitable});function k(x,_){if(!utils$2.isUndefined(x)){if(v.indexOf(x)!==-1)throw Error("Circular reference detected in "+_.join("."));v.push(x),utils$2.forEach(x,function(E,B){(!(utils$2.isUndefined(E)||E===null)&&s.call(e,E,utils$2.isString(B)?B.trim():B,_,b))===!0&&k(E,_?_.concat(B):[B])}),v.pop()}}if(!utils$2.isObject(n))throw new TypeError("data must be an object");return k(n),e}function encode$2(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(o){return e[o]})}function AxiosURLSearchParams(n,e){this._pairs=[],n&&toFormData(n,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(n,e){this._pairs.push([n,e])},prototype.toString=function(n){const e=n?function(o){return n.call(this,o,encode$2)}:encode$2;return this._pairs.map(function(o){return e(o[0])+"="+e(o[1])},"").join("&")};function encode$1(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(n,e,o){if(!e)return n;const a=o&&o.encode||encode$1;utils$2.isFunction(o)&&(o={serialize:o});const s=o&&o.serialize;let l;if(s?l=s(e,o):l=utils$2.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,o).toString(a),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class InterceptorManager{constructor(){this.handlers=[]}use(e,o,a){return this.handlers.push({fulfilled:e,rejected:o,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$2.forEach(this.handlers,function(o){o!==null&&e(o)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils$1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils$1,...platform$1};function toURLEncodedForm(n,e){return toFormData(n,new platform.classes.URLSearchParams,Object.assign({visitor:function(o,a,s,l){return platform.isNode&&utils$2.isBuffer(o)?(this.append(a,o.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(n){return utils$2.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(n){const e={},o=Object.keys(n);let a;const s=o.length;let l;for(a=0;a<s;a++)l=o[a],e[l]=n[l];return e}function formDataToJSON(n){function e(o,a,s,l){let c=o[l++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),u=l>=o.length;return c=!c&&utils$2.isArray(s)?s.length:c,u?(utils$2.hasOwnProp(s,c)?s[c]=[s[c],a]:s[c]=a,!d):((!s[c]||!utils$2.isObject(s[c]))&&(s[c]=[]),e(o,a,s[c],l)&&utils$2.isArray(s[c])&&(s[c]=arrayToObject(s[c])),!d)}if(utils$2.isFormData(n)&&utils$2.isFunction(n.entries)){const o={};return utils$2.forEachEntry(n,(a,s)=>{e(parsePropPath(a),s,o,0)}),o}return null}function stringifySafely(n,e,o){if(utils$2.isString(n))try{return(e||JSON.parse)(n),utils$2.trim(n)}catch(a){if(a.name!=="SyntaxError")throw a}return(0,JSON.stringify)(n)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(n,e){const o=e.getContentType()||"",a=o.indexOf("application/json")>-1,s=utils$2.isObject(n);if(s&&utils$2.isHTMLForm(n)&&(n=new FormData(n)),utils$2.isFormData(n))return a?JSON.stringify(formDataToJSON(n)):n;if(utils$2.isArrayBuffer(n)||utils$2.isBuffer(n)||utils$2.isStream(n)||utils$2.isFile(n)||utils$2.isBlob(n)||utils$2.isReadableStream(n))return n;if(utils$2.isArrayBufferView(n))return n.buffer;if(utils$2.isURLSearchParams(n))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let l;if(s){if(o.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(n,this.formSerializer).toString();if((l=utils$2.isFileList(n))||o.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return toFormData(l?{"files[]":n}:n,c&&new c,this.formSerializer)}}return s||a?(e.setContentType("application/json",!1),stringifySafely(n)):n}],transformResponse:[function(n){const e=this.transitional||defaults$1.transitional,o=e&&e.forcedJSONParsing,a=this.responseType==="json";if(utils$2.isResponse(n)||utils$2.isReadableStream(n))return n;if(n&&utils$2.isString(n)&&(o&&!this.responseType||a)){const s=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(n)}catch(l){if(s)throw l.name==="SyntaxError"?AxiosError.from(l,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):l}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$2.forEach(["delete","get","head","post","put","patch"],n=>{defaults$1.headers[n]={}});const ignoreDuplicateOf=utils$2.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=n=>{const e={};let o,a,s;return n&&n.split(`
`).forEach(function(l){s=l.indexOf(":"),o=l.substring(0,s).trim().toLowerCase(),a=l.substring(s+1).trim(),!(!o||e[o]&&ignoreDuplicateOf[o])&&(o==="set-cookie"?e[o]?e[o].push(a):e[o]=[a]:e[o]=e[o]?e[o]+", "+a:a)}),e},$internals=Symbol("internals");function normalizeHeader(n){return n&&String(n).trim().toLowerCase()}function normalizeValue(n){return n===!1||n==null?n:utils$2.isArray(n)?n.map(normalizeValue):String(n)}function parseTokens(n){const e=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=o.exec(n);)e[a[1]]=a[2];return e}const isValidHeaderName=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function matchHeaderValue(n,e,o,a,s){if(utils$2.isFunction(a))return a.call(this,e,o);if(s&&(e=o),!!utils$2.isString(e)){if(utils$2.isString(a))return e.indexOf(a)!==-1;if(utils$2.isRegExp(a))return a.test(e)}}function formatHeader(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,o,a)=>o.toUpperCase()+a)}function buildAccessors(n,e){const o=utils$2.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(n,a+o,{value:function(s,l,c){return this[a].call(this,e,s,l,c)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,o,a){const s=this;function l(d,u,f){const v=normalizeHeader(u);if(!v)throw new Error("header name must be a non-empty string");const b=utils$2.findKey(s,v);(!b||s[b]===void 0||f===!0||f===void 0&&s[b]!==!1)&&(s[b||u]=normalizeValue(d))}const c=(d,u)=>utils$2.forEach(d,(f,v)=>l(f,v,u));if(utils$2.isPlainObject(e)||e instanceof this.constructor)c(e,o);else if(utils$2.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))c(parseHeaders(e),o);else if(utils$2.isHeaders(e))for(const[d,u]of e.entries())l(u,d,a);else e!=null&&l(o,e,a);return this}get(e,o){if(e=normalizeHeader(e),e){const a=utils$2.findKey(this,e);if(a){const s=this[a];if(!o)return s;if(o===!0)return parseTokens(s);if(utils$2.isFunction(o))return o.call(this,s,a);if(utils$2.isRegExp(o))return o.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,o){if(e=normalizeHeader(e),e){const a=utils$2.findKey(this,e);return!!(a&&this[a]!==void 0&&(!o||matchHeaderValue(this,this[a],a,o)))}return!1}delete(e,o){const a=this;let s=!1;function l(c){if(c=normalizeHeader(c),c){const d=utils$2.findKey(a,c);d&&(!o||matchHeaderValue(a,a[d],d,o))&&(delete a[d],s=!0)}}return utils$2.isArray(e)?e.forEach(l):l(e),s}clear(e){const o=Object.keys(this);let a=o.length,s=!1;for(;a--;){const l=o[a];(!e||matchHeaderValue(this,this[l],l,e,!0))&&(delete this[l],s=!0)}return s}normalize(e){const o=this,a={};return utils$2.forEach(this,(s,l)=>{const c=utils$2.findKey(a,l);if(c){o[c]=normalizeValue(s),delete o[l];return}const d=e?formatHeader(l):String(l).trim();d!==l&&delete o[l],o[d]=normalizeValue(s),a[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const o=Object.create(null);return utils$2.forEach(this,(a,s)=>{a!=null&&a!==!1&&(o[s]=e&&utils$2.isArray(a)?a.join(", "):a)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,o])=>e+": "+o).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...o){const a=new this(e);return o.forEach(s=>a.set(s)),a}static accessor(e){const o=(this[$internals]=this[$internals]={accessors:{}}).accessors,a=this.prototype;function s(l){const c=normalizeHeader(l);o[c]||(buildAccessors(a,l),o[c]=!0)}return utils$2.isArray(e)?e.forEach(s):s(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),utils$2.reduceDescriptors(AxiosHeaders.prototype,({value:n},e)=>{let o=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(a){this[o]=a}}}),utils$2.freezeMethods(AxiosHeaders);function transformData(n,e){const o=this||defaults$1,a=e||o,s=AxiosHeaders.from(a.headers);let l=a.data;return utils$2.forEach(n,function(c){l=c.call(o,l,s.normalize(),e?e.status:void 0)}),s.normalize(),l}function isCancel(n){return!!(n&&n.__CANCEL__)}function CanceledError(n,e,o){AxiosError.call(this,n??"canceled",AxiosError.ERR_CANCELED,e,o),this.name="CanceledError"}utils$2.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(n,e,o){const a=o.config.validateStatus;!o.status||!a||a(o.status)?n(o):e(new AxiosError("Request failed with status code "+o.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function parseProtocol(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function speedometer(n,e){n=n||10;const o=new Array(n),a=new Array(n);let s=0,l=0,c;return e=e!==void 0?e:1e3,function(d){const u=Date.now(),f=a[l];c||(c=u),o[s]=d,a[s]=u;let v=l,b=0;for(;v!==s;)b+=o[v++],v=v%n;if(s=(s+1)%n,s===l&&(l=(l+1)%n),u-c<e)return;const k=f&&u-f;return k?Math.round(b*1e3/k):void 0}}function throttle(n,e){let o=0,a=1e3/e,s,l;const c=(d,u=Date.now())=>{o=u,s=null,l&&(clearTimeout(l),l=null),n.apply(null,d)};return[(...d)=>{const u=Date.now(),f=u-o;f>=a?c(d,u):(s=d,l||(l=setTimeout(()=>{l=null,c(s)},a-f)))},()=>s&&c(s)]}const progressEventReducer=(n,e,o=3)=>{let a=0;const s=speedometer(50,250);return throttle(l=>{const c=l.loaded,d=l.lengthComputable?l.total:void 0,u=c-a,f=s(u),v=c<=d;a=c;const b={loaded:c,total:d,progress:d?c/d:void 0,bytes:u,rate:f||void 0,estimated:f&&d&&v?(d-c)/f:void 0,event:l,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(b)},o)},progressEventDecorator=(n,e)=>{const o=n!=null;return[a=>e[0]({lengthComputable:o,total:n,loaded:a}),e[1]]},asyncDecorator=n=>(...e)=>utils$2.asap(()=>n(...e)),isURLSameOrigin=platform.hasStandardBrowserEnv?((n,e)=>o=>(o=new URL(o,platform.origin),n.protocol===o.protocol&&n.host===o.host&&(e||n.port===o.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(n,e,o,a,s,l){const c=[n+"="+encodeURIComponent(e)];utils$2.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),utils$2.isString(a)&&c.push("path="+a),utils$2.isString(s)&&c.push("domain="+s),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function combineURLs(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function buildFullPath(n,e){return n&&!isAbsoluteURL(e)?combineURLs(n,e):e}const headersToObject=n=>n instanceof AxiosHeaders?{...n}:n;function mergeConfig(n,e){e=e||{};const o={};function a(f,v,b,k){return utils$2.isPlainObject(f)&&utils$2.isPlainObject(v)?utils$2.merge.call({caseless:k},f,v):utils$2.isPlainObject(v)?utils$2.merge({},v):utils$2.isArray(v)?v.slice():v}function s(f,v,b,k){if(utils$2.isUndefined(v)){if(!utils$2.isUndefined(f))return a(void 0,f,b,k)}else return a(f,v,b,k)}function l(f,v){if(!utils$2.isUndefined(v))return a(void 0,v)}function c(f,v){if(utils$2.isUndefined(v)){if(!utils$2.isUndefined(f))return a(void 0,f)}else return a(void 0,v)}function d(f,v,b){if(b in e)return a(f,v);if(b in n)return a(void 0,f)}const u={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(f,v,b)=>s(headersToObject(f),headersToObject(v),b,!0)};return utils$2.forEach(Object.keys(Object.assign({},n,e)),function(f){const v=u[f]||s,b=v(n[f],e[f],f);utils$2.isUndefined(b)&&v!==d||(o[f]=b)}),o}const resolveConfig=n=>{const e=mergeConfig({},n);let{data:o,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:l,headers:c,auth:d}=e;e.headers=c=AxiosHeaders.from(c),e.url=buildURL(buildFullPath(e.baseURL,e.url),n.params,n.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let u;if(utils$2.isFormData(o)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((u=c.getContentType())!==!1){const[f,...v]=u?u.split(";").map(b=>b.trim()).filter(Boolean):[];c.setContentType([f||"multipart/form-data",...v].join("; "))}}if(platform.hasStandardBrowserEnv&&(a&&utils$2.isFunction(a)&&(a=a(e)),a||a!==!1&&isURLSameOrigin(e.url))){const f=s&&l&&cookies.read(l);f&&c.set(s,f)}return e},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(n){return new Promise(function(e,o){const a=resolveConfig(n);let s=a.data;const l=AxiosHeaders.from(a.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:u}=a,f,v,b,k,x;function _(){k&&k(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let E=new XMLHttpRequest;E.open(a.method.toUpperCase(),a.url,!0),E.timeout=a.timeout;function B(){if(!E)return;const V=AxiosHeaders.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),F={data:!c||c==="text"||c==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:V,config:n,request:E};settle(function(I){e(I),_()},function(I){o(I),_()},F),E=null}"onloadend"in E?E.onloadend=B:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(B)},E.onabort=function(){E&&(o(new AxiosError("Request aborted",AxiosError.ECONNABORTED,n,E)),E=null)},E.onerror=function(){o(new AxiosError("Network Error",AxiosError.ERR_NETWORK,n,E)),E=null},E.ontimeout=function(){let V=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const F=a.transitional||transitionalDefaults;a.timeoutErrorMessage&&(V=a.timeoutErrorMessage),o(new AxiosError(V,F.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,n,E)),E=null},s===void 0&&l.setContentType(null),"setRequestHeader"in E&&utils$2.forEach(l.toJSON(),function(V,F){E.setRequestHeader(F,V)}),utils$2.isUndefined(a.withCredentials)||(E.withCredentials=!!a.withCredentials),c&&c!=="json"&&(E.responseType=a.responseType),u&&([b,x]=progressEventReducer(u,!0),E.addEventListener("progress",b)),d&&E.upload&&([v,k]=progressEventReducer(d),E.upload.addEventListener("progress",v),E.upload.addEventListener("loadend",k)),(a.cancelToken||a.signal)&&(f=V=>{E&&(o(!V||V.type?new CanceledError(null,n,E):V),E.abort(),E=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const M=parseProtocol(a.url);if(M&&platform.protocols.indexOf(M)===-1){o(new AxiosError("Unsupported protocol "+M+":",AxiosError.ERR_BAD_REQUEST,n));return}E.send(s||null)})},composeSignals=(n,e)=>{const{length:o}=n=n?n.filter(Boolean):[];if(e||o){let a=new AbortController,s;const l=function(f){if(!s){s=!0,d();const v=f instanceof Error?f:this.reason;a.abort(v instanceof AxiosError?v:new CanceledError(v instanceof Error?v.message:v))}};let c=e&&setTimeout(()=>{c=null,l(new AxiosError(`timeout ${e} of ms exceeded`,AxiosError.ETIMEDOUT))},e);const d=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(f=>{f.unsubscribe?f.unsubscribe(l):f.removeEventListener("abort",l)}),n=null)};n.forEach(f=>f.addEventListener("abort",l));const{signal:u}=a;return u.unsubscribe=()=>utils$2.asap(d),u}},streamChunk=function*(n,e){let o=n.byteLength;if(o<e){yield n;return}let a=0,s;for(;a<o;)s=a+e,yield n.slice(a,s),a=s},readBytes=async function*(n,e){for await(const o of readStream(n))yield*streamChunk(o,e)},readStream=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:o,value:a}=await e.read();if(o)break;yield a}}finally{await e.cancel()}},trackStream=(n,e,o,a)=>{const s=readBytes(n,e);let l=0,c,d=u=>{c||(c=!0,a&&a(u))};return new ReadableStream({async pull(u){try{const{done:f,value:v}=await s.next();if(f){d(),u.close();return}let b=v.byteLength;if(o){let k=l+=b;o(k)}u.enqueue(new Uint8Array(v))}catch(f){throw d(f),f}},cancel(u){return d(u),s.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),test=(n,...e)=>{try{return!!n(...e)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let n=!1;const e=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$2.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(n=>n.body)};isFetchSupported&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!resolvers[e]&&(resolvers[e]=utils$2.isFunction(n[e])?o=>o[e]():(o,a)=>{throw new AxiosError(`Response type '${e}' is not supported`,AxiosError.ERR_NOT_SUPPORT,a)})})})(new Response);const getBodyLength=async n=>{if(n==null)return 0;if(utils$2.isBlob(n))return n.size;if(utils$2.isSpecCompliantForm(n))return(await new Request(platform.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(utils$2.isArrayBufferView(n)||utils$2.isArrayBuffer(n))return n.byteLength;if(utils$2.isURLSearchParams(n)&&(n=n+""),utils$2.isString(n))return(await encodeText(n)).byteLength},resolveBodyLength=async(n,e)=>utils$2.toFiniteNumber(n.getContentLength())??getBodyLength(e),fetchAdapter=isFetchSupported&&(async n=>{let{url:e,method:o,data:a,signal:s,cancelToken:l,timeout:c,onDownloadProgress:d,onUploadProgress:u,responseType:f,headers:v,withCredentials:b="same-origin",fetchOptions:k}=resolveConfig(n);f=f?(f+"").toLowerCase():"text";let x=composeSignals([s,l&&l.toAbortSignal()],c),_;const E=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let B;try{if(u&&supportsRequestStream&&o!=="get"&&o!=="head"&&(B=await resolveBodyLength(v,a))!==0){let L=new Request(e,{method:"POST",body:a,duplex:"half"}),U;if(utils$2.isFormData(a)&&(U=L.headers.get("content-type"))&&v.setContentType(U),L.body){const[Z,K]=progressEventDecorator(B,progressEventReducer(asyncDecorator(u)));a=trackStream(L.body,DEFAULT_CHUNK_SIZE,Z,K)}}utils$2.isString(b)||(b=b?"include":"omit");const M="credentials"in Request.prototype;_=new Request(e,{...k,signal:x,method:o.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:M?b:void 0});let V=await fetch(_);const F=supportsResponseStream&&(f==="stream"||f==="response");if(supportsResponseStream&&(d||F&&E)){const L={};["status","statusText","headers"].forEach(j=>{L[j]=V[j]});const U=utils$2.toFiniteNumber(V.headers.get("content-length")),[Z,K]=d&&progressEventDecorator(U,progressEventReducer(asyncDecorator(d),!0))||[];V=new Response(trackStream(V.body,DEFAULT_CHUNK_SIZE,Z,()=>{K&&K(),E&&E()}),L)}f=f||"text";let I=await resolvers[utils$2.findKey(resolvers,f)||"text"](V,n);return!F&&E&&E(),await new Promise((L,U)=>{settle(L,U,{data:I,headers:AxiosHeaders.from(V.headers),status:V.status,statusText:V.statusText,config:n,request:_})})}catch(M){throw E&&E(),M&&M.name==="TypeError"&&/fetch/i.test(M.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,n,_),{cause:M.cause||M}):AxiosError.from(M,M&&M.code,n,_)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$2.forEach(knownAdapters,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const renderReason=n=>`- ${n}`,isResolvedHandle=n=>utils$2.isFunction(n)||n===null||n===!1,adapters={getAdapter:n=>{n=utils$2.isArray(n)?n:[n];const{length:e}=n;let o,a;const s={};for(let l=0;l<e;l++){o=n[l];let c;if(a=o,!isResolvedHandle(o)&&(a=knownAdapters[(c=String(o)).toLowerCase()],a===void 0))throw new AxiosError(`Unknown adapter '${c}'`);if(a)break;s[c||"#"+l]=a}if(!a){const l=Object.entries(s).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(renderReason).join(`
`):" "+renderReason(l[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return a},adapters:knownAdapters};function throwIfCancellationRequested(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new CanceledError(null,n)}function dispatchRequest(n){return throwIfCancellationRequested(n),n.headers=AxiosHeaders.from(n.headers),n.data=transformData.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(n.adapter||defaults$1.adapter)(n).then(function(e){return throwIfCancellationRequested(n),e.data=transformData.call(n,n.transformResponse,e),e.headers=AxiosHeaders.from(e.headers),e},function(e){return isCancel(e)||(throwIfCancellationRequested(n),e&&e.response&&(e.response.data=transformData.call(n,n.transformResponse,e.response),e.response.headers=AxiosHeaders.from(e.response.headers))),Promise.reject(e)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{validators$1[n]=function(o){return typeof o===n||"a"+(e<1?"n ":" ")+n}});const deprecatedWarnings={};validators$1.transitional=function(n,e,o){function a(s,l){return"[Axios v"+VERSION+"] Transitional option '"+s+"'"+l+(o?". "+o:"")}return(s,l,c)=>{if(n===!1)throw new AxiosError(a(l," has been removed"+(e?" in "+e:"")),AxiosError.ERR_DEPRECATED);return e&&!deprecatedWarnings[l]&&(deprecatedWarnings[l]=!0,console.warn(a(l," has been deprecated since v"+e+" and will be removed in the near future"))),n?n(s,l,c):!0}},validators$1.spelling=function(n){return(e,o)=>(console.warn(`${o} is likely a misspelling of ${n}`),!0)};function assertOptions(n,e,o){if(typeof n!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const a=Object.keys(n);let s=a.length;for(;s-- >0;){const l=a[s],c=e[l];if(c){const d=n[l],u=d===void 0||c(d,l,n);if(u!==!0)throw new AxiosError("option "+l+" must be "+u,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new AxiosError("Unknown option "+l,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,o){try{return await this._request(e,o)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(e,o){typeof e=="string"?(o=o||{},o.url=e):o=e||{},o=mergeConfig(this.defaults,o);const{transitional:a,paramsSerializer:s,headers:l}=o;a!==void 0&&validator.assertOptions(a,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),s!=null&&(utils$2.isFunction(s)?o.paramsSerializer={serialize:s}:validator.assertOptions(s,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(o,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let c=l&&utils$2.merge(l.common,l[o.method]);l&&utils$2.forEach(["delete","get","head","post","put","patch","common"],_=>{delete l[_]}),o.headers=AxiosHeaders.concat(c,l);const d=[];let u=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(o)===!1||(u=u&&_.synchronous,d.unshift(_.fulfilled,_.rejected))});const f=[];this.interceptors.response.forEach(function(_){f.push(_.fulfilled,_.rejected)});let v,b=0,k;if(!u){const _=[dispatchRequest.bind(this),void 0];for(_.unshift.apply(_,d),_.push.apply(_,f),k=_.length,v=Promise.resolve(o);b<k;)v=v.then(_[b++],_[b++]);return v}k=d.length;let x=o;for(b=0;b<k;){const _=d[b++],E=d[b++];try{x=_(x)}catch(B){E.call(this,B);break}}try{v=dispatchRequest.call(this,x)}catch(_){return Promise.reject(_)}for(b=0,k=f.length;b<k;)v=v.then(f[b++],f[b++]);return v}getUri(e){e=mergeConfig(this.defaults,e);const o=buildFullPath(e.baseURL,e.url);return buildURL(o,e.params,e.paramsSerializer)}}utils$2.forEach(["delete","get","head","options"],function(n){Axios.prototype[n]=function(e,o){return this.request(mergeConfig(o||{},{method:n,url:e,data:(o||{}).data}))}}),utils$2.forEach(["post","put","patch"],function(n){function e(o){return function(a,s,l){return this.request(mergeConfig(l||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Axios.prototype[n]=e(),Axios.prototype[n+"Form"]=e(!0)});class CancelToken{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(s){o=s});const a=this;this.promise.then(s=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](s);a._listeners=null}),this.promise.then=s=>{let l;const c=new Promise(d=>{a.subscribe(d),l=d}).then(s);return c.cancel=function(){a.unsubscribe(l)},c},e(function(s,l,c){a.reason||(a.reason=new CanceledError(s,l,c),o(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const o=this._listeners.indexOf(e);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const e=new AbortController,o=a=>{e.abort(a)};return this.subscribe(o),e.signal.unsubscribe=()=>this.unsubscribe(o),e.signal}static source(){let e;return{token:new CancelToken(function(o){e=o}),cancel:e}}}function spread(n){return function(e){return n.apply(null,e)}}function isAxiosError(n){return utils$2.isObject(n)&&n.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([n,e])=>{HttpStatusCode[e]=n});function createInstance(n){const e=new Axios(n),o=bind$1(Axios.prototype.request,e);return utils$2.extend(o,Axios.prototype,e,{allOwnKeys:!0}),utils$2.extend(o,e,null,{allOwnKeys:!0}),o.create=function(a){return createInstance(mergeConfig(n,a))},o}const axios=createInstance(defaults$1);axios.Axios=Axios,axios.CanceledError=CanceledError,axios.CancelToken=CancelToken,axios.isCancel=isCancel,axios.VERSION=VERSION,axios.toFormData=toFormData,axios.AxiosError=AxiosError,axios.Cancel=axios.CanceledError,axios.all=function(n){return Promise.all(n)},axios.spread=spread,axios.isAxiosError=isAxiosError,axios.mergeConfig=mergeConfig,axios.AxiosHeaders=AxiosHeaders,axios.formToJSON=n=>formDataToJSON(utils$2.isHTMLForm(n)?new FormData(n):n),axios.getAdapter=adapters.getAdapter,axios.HttpStatusCode=HttpStatusCode,axios.default=axios;const ServerInfoContext=createContext(()=>{const n=ref(""),e=useRoute(),o=useRouterParams(),a=computed(()=>{var B,M;const _=(B=o.value)==null?void 0:B.serverUrl,E=(M=o.value)==null?void 0:M.location;return!_||!E?null:`${_}-${E}-`}),s=_=>`${_}-admin-token`,l=(_,E)=>`${_}-${E}-token`,c=computed(()=>{var B,M;const _=(B=o.value)==null?void 0:B.serverUrl,E=(M=o.value)==null?void 0:M.location;return _&&!E?s(_):_&&E?l(_,E):null}),d=useLocalStorage2(c,""),u=_=>{const E=_.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),B=decodeURIComponent(window.atob(E).split("").map(function(V){return"%"+("00"+V.charCodeAt(0).toString(16)).slice(-2)}).join("")),M=z.string().transform(V=>{try{return JSON.parse(V)}catch{return null}}).pipe(JwtPayloadSchema).safeParse(B);return M.success?M.data:null},f=computed(()=>d.value?u(d.value):null),v=()=>{d.value="",n.value="",router.replace("/login/admin")};watch(()=>e.params.serverUrl,_=>{_!=null?n.value=_:n.value=""},{immediate:!0});const b=computed(()=>axios.create({baseURL:n.value,timeout:1e4,headers:{Authorization:d.value}})),k=()=>b.value,x={token:d,buildKbEditorTokenKey:l,buildAdminTokenKey:s,tokenPayload:f,extractTokenPayload:u,kbPrefix:a,serverUrl:n,getAxios:k,logout:v};return globalThis.getAxios=k,globalThis.getServerInfoContext=()=>x,x}),toKebabCase=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const Icon=({size:n,strokeWidth:e=2,absoluteStrokeWidth:o,color:a,iconNode:s,name:l,class:c,...d},{slots:u})=>h("svg",{...defaultAttributes,width:n||defaultAttributes.width,height:n||defaultAttributes.height,stroke:a||defaultAttributes.stroke,"stroke-width":o?Number(e)*24/Number(n):e,class:["lucide",`lucide-${toKebabCase(l??"icon")}`],...d},[...s.map(f=>h(...f)),...u.default?[u.default()]:[]]),createLucideIcon=(n,e)=>(o,{slots:a})=>h(Icon,{...o,iconNode:e,name:n},a),ArrowDownAZ=createLucideIcon("ArrowDownAZIcon",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]),ArrowDownWideNarrow=createLucideIcon("ArrowDownWideNarrowIcon",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]),ArrowLeft=createLucideIcon("ArrowLeftIcon",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ArrowRight=createLucideIcon("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ArrowUpAZ=createLucideIcon("ArrowUpAZIcon",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]),ArrowUpNarrowWide=createLucideIcon("ArrowUpNarrowWideIcon",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),Bell=createLucideIcon("BellIcon",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Blend=createLucideIcon("BlendIcon",[["circle",{cx:"9",cy:"9",r:"7",key:"p2h5vp"}],["circle",{cx:"15",cy:"15",r:"7",key:"19ennj"}]]),Bookmark=createLucideIcon("BookmarkIcon",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),CalendarArrowDown=createLucideIcon("CalendarArrowDownIcon",[["path",{d:"m14 18 4 4 4-4",key:"1waygx"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M18 14v8",key:"irew45"}],["path",{d:"M21 11.354V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7.343",key:"bse4f3"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]]),CalendarArrowUp=createLucideIcon("CalendarArrowUpIcon",[["path",{d:"m14 18 4-4 4 4",key:"ftkppy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M18 22v-8",key:"su0gjh"}],["path",{d:"M21 11.343V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9",key:"1exg90"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]]),CalendarDays=createLucideIcon("CalendarDaysIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),Check=createLucideIcon("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),ChevronDown=createLucideIcon("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ChevronLeft=createLucideIcon("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ChevronRight=createLucideIcon("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ChevronUp=createLucideIcon("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ChevronsRight=createLucideIcon("ChevronsRightIcon",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),CircleCheck=createLucideIcon("CircleCheckIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),CircleHelp=createLucideIcon("CircleHelpIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Circle=createLucideIcon("CircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Clipboard=createLucideIcon("ClipboardIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),Command=createLucideIcon("CommandIcon",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),Copy=createLucideIcon("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Database=createLucideIcon("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Delete=createLucideIcon("DeleteIcon",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]),Diamond=createLucideIcon("DiamondIcon",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]),Dot=createLucideIcon("DotIcon",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]),Download=createLucideIcon("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),EllipsisVertical=createLucideIcon("EllipsisVerticalIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Ellipsis=createLucideIcon("EllipsisIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Eye=createLucideIcon("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),FileScan=createLucideIcon("FileScanIcon",[["path",{d:"M20 10V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4",key:"1rdf37"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M16 14a2 2 0 0 0-2 2",key:"ceaadl"}],["path",{d:"M20 14a2 2 0 0 1 2 2",key:"1ny6zw"}],["path",{d:"M20 22a2 2 0 0 0 2-2",key:"1l9q4k"}],["path",{d:"M16 22a2 2 0 0 1-2-2",key:"1wqh5n"}]]),File=createLucideIcon("FileIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),Filter=createLucideIcon("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),FlipHorizontal=createLucideIcon("FlipHorizontalIcon",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]),Focus=createLucideIcon("FocusIcon",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),FolderClosed=createLucideIcon("FolderClosedIcon",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]]),FolderInput=createLucideIcon("FolderInputIcon",[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]]),Folder=createLucideIcon("FolderIcon",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Globe=createLucideIcon("GlobeIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),History=createLucideIcon("HistoryIcon",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Image$1=createLucideIcon("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Info=createLucideIcon("InfoIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Kanban=createLucideIcon("KanbanIcon",[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]]),Keyboard=createLucideIcon("KeyboardIcon",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),Link2=createLucideIcon("Link2Icon",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),Link=createLucideIcon("LinkIcon",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ListTree=createLucideIcon("ListTreeIcon",[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]]),List=createLucideIcon("ListIcon",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),LoaderCircle=createLucideIcon("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),LogOut=createLucideIcon("LogOutIcon",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),MessageSquareMore=createLucideIcon("MessageSquareMoreIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M16 10h.01",key:"1m94wz"}]]),Moon=createLucideIcon("MoonIcon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Paintbrush=createLucideIcon("PaintbrushIcon",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]),PanelBottom=createLucideIcon("PanelBottomIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 15h18",key:"5xshup"}]]),PanelLeft=createLucideIcon("PanelLeftIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),PanelRight=createLucideIcon("PanelRightIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),PanelsTopLeft=createLucideIcon("PanelsTopLeftIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),Pencil=createLucideIcon("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Plus=createLucideIcon("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),RefreshCcw=createLucideIcon("RefreshCcwIcon",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),RefreshCw=createLucideIcon("RefreshCwIcon",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Search=createLucideIcon("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Settings$1=createLucideIcon("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),SlidersHorizontal=createLucideIcon("SlidersHorizontalIcon",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),Sun=createLucideIcon("SunIcon",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Table=createLucideIcon("TableIcon",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),Trash2=createLucideIcon("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Triangle=createLucideIcon("TriangleIcon",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),Upload=createLucideIcon("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),X=createLucideIcon("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_sfc_main$2j=defineComponent({__name:"AlertDialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(n,{emit:e}){const o=xe(n,e);return(a,s)=>(openBlock(),createBlock(unref($v),normalizeProps(guardReactiveProps(unref(o))),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),_sfc_main$2i=defineComponent({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Av),mergeProps(o.value,{class:unref(cn)(unref(buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$2h=defineComponent({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=computed(()=>{const{class:c,...d}=o;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(Iv),null,{default:withCtx(()=>[createVNode(unref(Rv),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),createVNode(unref(Tv),mergeProps(unref(l),{class:unref(cn)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",o.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_sfc_main$2g=defineComponent({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(kv),mergeProps(o.value,{class:unref(cn)("text-sm text-muted-foreground",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$2f=defineComponent({__name:"AlertDialogFooter",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$2e=defineComponent({__name:"AlertDialogHeader",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("flex flex-col gap-y-2 text-center sm:text-left",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$2d=defineComponent({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Ov),mergeProps(o.value,{class:unref(cn)("text-lg font-semibold",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$2c=defineComponent({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(Bv),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_sfc_main$2b=defineComponent({__name:"DeleteKbDialog",props:{location:{},name:{}},setup(n){const e=n,o=ref(!1),a=ref("idle");async function s(){if(a.value!=="deleting"){if(a.value==="deleteSuccess"||a.value==="deleteFailed"){a.value="idle";return}a.value="deleting",(await deleteKb({location:e.location})).success?(a.value="deleteSuccess",setTimeout(()=>{a.value="idle",o.value=!1},1e3)):(a.value="deleteFailed",setTimeout(()=>{a.value="idle",o.value=!1},1e3))}}return(l,c)=>(openBlock(),createBlock(unref(_sfc_main$2j),{open:o.value,"onUpdate:open":c[0]||(c[0]=d=>o.value=d)},{default:withCtx(()=>[createVNode(unref(_sfc_main$2c),{asChild:""},{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3}),createVNode(unref(_sfc_main$2h),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2e),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2d),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.kbManagement.deleteKbDialog.title")),1)]),_:1}),createVNode(unref(_sfc_main$2g),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.kbManagement.deleteKbDialog.description",{location:e.location,name:e.name})),1)]),_:1})]),_:1}),createVNode(unref(_sfc_main$2f),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2i),{disabled:a.value==="deleting"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.kbManagement.deleteKbDialog.cancelBtn")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$2u),{variant:"destructive",disabled:a.value==="deleting",onClick:s},{default:withCtx(()=>[a.value==="deleting"?(openBlock(),createBlock(unref(LoaderCircle),{key:0,class:"size-4 mr-2 animate-spin"})):a.value==="deleteSuccess"?(openBlock(),createBlock(unref(Check),{key:1,class:"size-4 mr-2"})):a.value==="deleteFailed"?(openBlock(),createBlock(unref(X),{key:2,class:"size-4 mr-2"})):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(l.$t(`adminDashboard.kbManagement.deleteKbDialog.status.${a.value}`)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["open"]))}}),_sfc_main$2a=defineComponent({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(n,{emit:e}){const o=xe(n,e);return(a,s)=>(openBlock(),createBlock(unref(eu),normalizeProps(guardReactiveProps(unref(o))),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),_sfc_main$29=defineComponent({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=computed(()=>{const{class:c,...d}=o;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(Dv),null,{default:withCtx(()=>[createVNode(unref(Eu),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),createVNode(unref(xu),mergeProps(unref(l),{class:unref(cn)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",o.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default"),createVNode(unref(Gl),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:withCtx(()=>[createVNode(unref(X),{class:"w-4 h-4"}),d[0]||(d[0]=createBaseVNode("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),_sfc_main$28=defineComponent({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Du),mergeProps(unref(a),{class:unref(cn)("text-sm text-muted-foreground",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$27=defineComponent({__name:"DialogFooter",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$26=defineComponent({__name:"DialogHeader",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("flex flex-col gap-y-1.5 text-center sm:text-left",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$25=defineComponent({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Pu),mergeProps(unref(a),{class:unref(cn)("text-lg font-semibold leading-none tracking-tight",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$24=defineComponent({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(tu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_sfc_main$23=defineComponent({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(n,{emit:e}){const o=n,a=useVModel(o,"modelValue",e,{passive:!0,defaultValue:o.defaultValue});return(s,l)=>withDirectives((openBlock(),createElementBlock("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>isRef(a)?a.value=c:null),class:normalizeClass(unref(cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o.class))},null,2)),[[vModelText,unref(a)]])}}),_hoisted_1$J={class:"grid gap-4 py-4"},_hoisted_2$p={class:"grid grid-cols-4 items-center gap-4"},_hoisted_3$j={for:"name",class:"text-right"},_hoisted_4$g={class:"grid grid-cols-4 items-center gap-4"},_hoisted_5$9={for:"location",class:"text-right"},_hoisted_6$4={class:"grid grid-cols-4 items-center gap-4"},_hoisted_7$3={for:"password",class:"text-right"},_sfc_main$22=defineComponent({__name:"NewKbDialog",setup(n){const e=ref(!1),o=ref(""),a=ref(""),s=ref(""),l=ref("idle"),c=()=>{o.value="",a.value="",s.value="",l.value="idle"};async function d(){if(l.value!=="creating"){if(l.value==="createSuccess"||l.value==="createFailed"){l.value="idle";return}l.value="creating",(await createKb({name:o.value,location:a.value,password:s.value})).success?(l.value="createSuccess",setTimeout(()=>{c(),e.value=!1},1e3)):(l.value="createFailed",setTimeout(()=>{c(),e.value=!1},1e3))}}function u(){c(),e.value=!1}return(f,v)=>(openBlock(),createBlock(unref(_sfc_main$2a),{open:e.value,"onUpdate:open":v[3]||(v[3]=b=>e.value=b)},{default:withCtx(()=>[createVNode(unref(_sfc_main$24),{asChild:""},{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3}),createVNode(unref(_sfc_main$29),{class:"sm:max-w-[425px]"},{default:withCtx(()=>[createVNode(unref(_sfc_main$26),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$25),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(f.$t("adminDashboard.kbManagement.newKbDialog.title")),1)]),_:1}),createVNode(unref(_sfc_main$28),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(f.$t("adminDashboard.kbManagement.newKbDialog.description")),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$J,[createBaseVNode("div",_hoisted_2$p,[createBaseVNode("label",_hoisted_3$j,toDisplayString$1(f.$t("adminDashboard.kbManagement.newKbDialog.nameLabel")),1),createVNode(unref(_sfc_main$23),{id:"name",modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=b=>o.value=b),class:"col-span-3",placeholder:f.$t("adminDashboard.kbManagement.newKbDialog.namePlaceholder")},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_4$g,[createBaseVNode("label",_hoisted_5$9,toDisplayString$1(f.$t("adminDashboard.kbManagement.newKbDialog.locationLabel")),1),createVNode(unref(_sfc_main$23),{id:"location",modelValue:a.value,"onUpdate:modelValue":v[1]||(v[1]=b=>a.value=b),class:"col-span-3",placeholder:f.$t("adminDashboard.kbManagement.newKbDialog.locationPlaceholder")},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_6$4,[createBaseVNode("label",_hoisted_7$3,toDisplayString$1(f.$t("adminDashboard.kbManagement.newKbDialog.passwordLabel")),1),createVNode(unref(_sfc_main$23),{id:"password",modelValue:s.value,"onUpdate:modelValue":v[2]||(v[2]=b=>s.value=b),type:"password",class:"col-span-3",placeholder:f.$t("adminDashboard.kbManagement.newKbDialog.passwordPlaceholder")},null,8,["modelValue","placeholder"])])]),createVNode(unref(_sfc_main$27),{class:"flex gap-2"},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"outline",onClick:u},{default:withCtx(()=>[createTextVNode(toDisplayString$1(f.$t("adminDashboard.kbManagement.newKbDialog.cancelBtn")),1)]),_:1}),createVNode(unref(_sfc_main$2u),{type:"submit",onClick:d,disabled:l.value==="creating"},{default:withCtx(()=>[l.value==="creating"?(openBlock(),createBlock(unref(LoaderCircle),{key:0,class:"size-4 mr-2 animate-spin"})):l.value==="createSuccess"?(openBlock(),createBlock(unref(Check),{key:1,class:"size-4 mr-2"})):l.value==="createFailed"?(openBlock(),createBlock(unref(X),{key:2,class:"size-4 mr-2"})):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(f.$t(`adminDashboard.kbManagement.newKbDialog.createBtn.${l.value}`)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["open"]))}}),_hoisted_1$I={class:"flex-1 space-y-4 p-8 pt-6"},_hoisted_2$o={class:"flex items-center justify-between space-y-2"},_hoisted_3$i={class:"flex items-baseline"},_hoisted_4$f={class:"text-3xl font-bold tracking-tight"},_hoisted_5$8={class:"text-muted-foreground ml-4"},_hoisted_6$3={class:"flex items-center space-x-2"},_hoisted_7$2={class:"flex flex-col space-y-2"},_hoisted_8$2={class:"flex items-center space-x-2"},_hoisted_9$2={class:"space-y-2"},_hoisted_10$2={key:0,class:"flex flex-col items-center justify-center py-8 text-center space-y-2"},_hoisted_11$2={class:"text-2xl font-semibold text-muted-foreground"},_hoisted_12={class:"text-sm text-muted-foreground"},_hoisted_13={class:"space-y-1"},_hoisted_14={class:"font-medium"},_hoisted_15={class:"text-sm text-muted-foreground"},_hoisted_16={class:"flex space-x-2"},_sfc_main$21=defineComponent({__name:"AdminDashboard",setup(n){const{serverUrl:e,logout:o}=ServerInfoContext.useContext(),{kbs:a,refreshKbList:s}=KbInfoContext.useContext();return watch(e,()=>{s(e.value)},{immediate:!0}),(l,c)=>(openBlock(),createElementBlock("div",_hoisted_1$I,[createBaseVNode("div",_hoisted_2$o,[createBaseVNode("div",_hoisted_3$i,[createBaseVNode("h2",_hoisted_4$f,toDisplayString$1(l.$t("adminDashboard.title")),1),createBaseVNode("div",_hoisted_5$8,toDisplayString$1(unref(e)),1)]),createBaseVNode("div",_hoisted_6$3,[createVNode(unref(_sfc_main$2u),{variant:"outline",onClick:unref(o)},{default:withCtx(()=>[createVNode(unref(LogOut),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(l.$t("adminDashboard.logout")),1)]),_:1},8,["onClick"])])]),createVNode(unref(_sfc_main$2n),{"default-value":"kbManagement",class:"space-y-4"},{default:withCtx(()=>[createVNode(unref(_sfc_main$2l),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2k),{value:"kbManagement"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.tabs.kbManagement")),1)]),_:1}),createVNode(unref(_sfc_main$2k),{value:"logsAndAnalytics"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.tabs.logsAndAnalytics")),1)]),_:1})]),_:1}),createVNode(unref(_sfc_main$2m),{value:"kbManagement",class:"space-y-4"},{default:withCtx(()=>[createVNode(unref(_sfc_main$2t),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2p),{class:"flex flex-row items-center justify-between"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_7$2,[createVNode(unref(_sfc_main$2o),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.kbManagement.allKbs")),1)]),_:1}),createVNode(unref(_sfc_main$2r),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("adminDashboard.kbManagement.allKbsDescription")),1)]),_:1})]),createBaseVNode("div",_hoisted_8$2,[createVNode(unref(_sfc_main$2u),{size:"sm",variant:"outline",onClick:unref(s)},{default:withCtx(()=>[createVNode(unref(RefreshCcw),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(l.$t("adminDashboard.kbManagement.kbActions.refreshKbList")),1)]),_:1},8,["onClick"]),createVNode(_sfc_main$22,null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{size:"sm"},{default:withCtx(()=>[createVNode(unref(Plus),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(l.$t("adminDashboard.kbManagement.kbActions.addKb")),1)]),_:1})]),_:1})])]),_:1}),createVNode(unref(_sfc_main$2s),null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_9$2,[Object.keys(unref(a)).length===0?(openBlock(),createElementBlock("div",_hoisted_10$2,[createBaseVNode("div",_hoisted_11$2,toDisplayString$1(l.$t("adminDashboard.kbManagement.noKbs")),1),createBaseVNode("div",_hoisted_12,toDisplayString$1(l.$t("adminDashboard.kbManagement.noKbsDescription")),1)])):(openBlock(!0),createElementBlock(Fragment$1,{key:1},renderList(unref(a),(d,u)=>(openBlock(),createElementBlock("div",{key:u,class:"flex items-center justify-between p-4 border rounded-lg"},[createBaseVNode("div",_hoisted_13,[createBaseVNode("h4",_hoisted_14,toDisplayString$1(d.name),1),createBaseVNode("p",_hoisted_15,toDisplayString$1(u),1)]),createBaseVNode("div",_hoisted_16,[createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm"},{default:withCtx(()=>[createVNode(unref(Pencil),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(l.$t("adminDashboard.kbManagement.kbActions.edit")),1)]),_:1}),createVNode(_sfc_main$2b,{location:u,name:d.name},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"destructive",size:"sm"},{default:withCtx(()=>[createVNode(unref(Trash2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(l.$t("adminDashboard.kbManagement.kbActions.delete")),1)]),_:1})]),_:2},1032,["location","name"])])]))),128))])]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$2m),{value:"logsAndAnalytics",class:"space-y-4"})]),_:1})]))}}),createPromise=()=>{let n;return{promise:new Promise(e=>{n=e}),resolve:n}},createSyncLayer=()=>{const n=_mitt(),{promise:e,resolve:o}=createPromise(),a=new Worker(new URL(""+new URL("syncWorker-l2Mz1j2i.js",import.meta.url).href,import.meta.url),{type:"module"});a.addEventListener("message",k=>{const x=k.data;if(x.type==="init"){o(void 0);return}console.debug("[syncLayer] Received message from syncWorker:",x),n.emit(x.type,x)});const s=k=>{(async()=>(await e,a.postMessage(k)))()},l=(k,x,_)=>{s({type:"connect",serverUrl:k,location:x,token:_})},c=()=>{s({type:"disconnect"})},d=k=>{s({type:"loadDataDoc",docId:k})},u=k=>{s({type:"unloadDataDoc",docId:k})},f=k=>{s({type:"_printBlockInfo",blockId:k})},v=(k,x)=>{s({type:"_printBlockData",docId:k,blockId:x})},b=k=>{const x={_tr:{patches:[],origin:k},upsertBlockInfo:(_,E)=>{x._tr.patches.push({op:"upsertBlockInfo",blockId:_,blockInfo:E})},deleteBlockInfo:_=>{x._tr.patches.push({op:"deleteBlockInfo",blockId:_})},upsertBlockData:(_,E,B)=>{x._tr.patches.push({op:"upsertBlockData",docId:_,blockId:E,blockData:B})},deleteBlockData:(_,E)=>{x._tr.patches.push({op:"deleteBlockData",docId:_,blockId:E})},commit:()=>{x._tr.patches.length!==0&&s({type:"postYjsLayerTransaction",transaction:x._tr})}};return x};return{connect:l,disconnect:c,on:n.on,off:n.off,createSyncLayerTransaction:b,loadDataDoc:d,unloadDataDoc:u,_printBlockInfo:f,_printBlockData:v}},extractBlockStatus=n=>{const e=n&3,o=n&4;return{type:e==0?"normalBlock":e==1?"mirrorBlock":"virtualBlock",fold:o!=0}},calcBlockStatus=(n,e)=>(n=="normalBlock"?0:n=="mirrorBlock"?1:2)|(e?4:0),TextContentSchema=z.tuple([z.literal(BLOCK_CONTENT_TYPES.TEXT),z.any()]),ImageFilterSchema=z.enum(["blend","circle","invert","invertW","outline","blendLuminosity"]),ImageContentSchema=z.tuple([z.literal(BLOCK_CONTENT_TYPES.IMAGE),z.string(),z.enum(["left","center"]),z.string().nullable(),z.number().nullable(),z.array(ImageFilterSchema).nullable()]);z.tuple([z.literal(BLOCK_CONTENT_TYPES.CAROUSEL),z.array(z.string()),z.string().nullable(),z.number().nullable(),z.array(ImageFilterSchema).nullable()]);const CodeContentSchema=z.tuple([z.literal(BLOCK_CONTENT_TYPES.CODE),z.string(),z.string()]),MathDisplayContentSchema=z.tuple([z.literal(BLOCK_CONTENT_TYPES.MATH),z.string()]),QueryContentSchema=z.tuple([z.literal(BLOCK_CONTENT_TYPES.QUERY),z.any(),z.string(),z.boolean(),z.boolean()]),BlockContentSchema=z.union([TextContentSchema,ImageContentSchema,CodeContentSchema,MathDisplayContentSchema,QueryContentSchema]);z.tuple([BlockContentSchema.nullable(),z.record(z.any())]);const BlockIdSchema=z.string(),BlockStatusSchema=z.number().min(0).max(5);z.tuple([BlockStatusSchema,BlockIdSchema,z.array(BlockIdSchema),z.number().nullable(),BlockIdSchema.nullable()]);const getPlatform=()=>{const n=globalThis.process;if(typeof n<"u"&&n.platform)switch(n.platform){case"win32":return"win32";case"darwin":return"macos";case"linux":return"linux";default:throw new Error("Unsupported platform")}if(typeof navigator<"u"){const e=navigator.platform.toLowerCase();if(e.includes("win"))return"win32";if(e.includes("mac"))return"macos";if(e.includes("linux"))return"linux";throw new Error("Unsupported platform")}throw new Error("Platform detection failed")},getSeperator=()=>getPlatform()==="win32"?"\\":"/",getPathSegments=n=>n.split(getSeperator()),joinPathSegments=n=>{const e=getSeperator(),o=[];for(const a of n){let s=a;s.startsWith(e)&&(s=s.slice(1)),s.endsWith(e)&&(s=s.slice(0,-1)),s.length!==0&&o.push(s)}return o.join(e)},getBasename=n=>{const e=getPathSegments(n);return e[e.length-1]};function OrderedMap(n){this.content=n}OrderedMap.prototype={constructor:OrderedMap,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,o){var a=o&&o!=n?this.remove(o):this,s=a.find(n),l=a.content.slice();return s==-1?l.push(o||n,e):(l[s+1]=e,o&&(l[s]=o)),new OrderedMap(l)},remove:function(n){var e=this.find(n);if(e==-1)return this;var o=this.content.slice();return o.splice(e,2),new OrderedMap(o)},addToStart:function(n,e){return new OrderedMap([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var o=this.remove(n).content.slice();return o.push(n,e),new OrderedMap(o)},addBefore:function(n,e,o){var a=this.remove(e),s=a.content.slice(),l=a.find(n);return s.splice(l==-1?s.length:l,0,e,o),new OrderedMap(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=OrderedMap.from(n),n.size?new OrderedMap(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=OrderedMap.from(n),n.size?new OrderedMap(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=OrderedMap.from(n);for(var o=0;o<n.content.length;o+=2)e=e.remove(n.content[o]);return e},toObject:function(){var n={};return this.forEach(function(e,o){n[e]=o}),n},get size(){return this.content.length>>1}},OrderedMap.from=function(n){if(n instanceof OrderedMap)return n;var e=[];if(n)for(var o in n)e.push(o,n[o]);return new OrderedMap(e)};function findDiffStart(n,e,o){for(let a=0;;a++){if(a==n.childCount||a==e.childCount)return n.childCount==e.childCount?null:o;let s=n.child(a),l=e.child(a);if(s==l){o+=s.nodeSize;continue}if(!s.sameMarkup(l))return o;if(s.isText&&s.text!=l.text){for(let c=0;s.text[c]==l.text[c];c++)o++;return o}if(s.content.size||l.content.size){let c=findDiffStart(s.content,l.content,o+1);if(c!=null)return c}o+=s.nodeSize}}function findDiffEnd(n,e,o,a){for(let s=n.childCount,l=e.childCount;;){if(s==0||l==0)return s==l?null:{a:o,b:a};let c=n.child(--s),d=e.child(--l),u=c.nodeSize;if(c==d){o-=u,a-=u;continue}if(!c.sameMarkup(d))return{a:o,b:a};if(c.isText&&c.text!=d.text){let f=0,v=Math.min(c.text.length,d.text.length);for(;f<v&&c.text[c.text.length-f-1]==d.text[d.text.length-f-1];)f++,o--,a--;return{a:o,b:a}}if(c.content.size||d.content.size){let f=findDiffEnd(c.content,d.content,o-1,a-1);if(f)return f}o-=u,a-=u}}class Fragment{constructor(e,o){if(this.content=e,this.size=o||0,o==null)for(let a=0;a<e.length;a++)this.size+=e[a].nodeSize}nodesBetween(e,o,a,s=0,l){for(let c=0,d=0;d<o;c++){let u=this.content[c],f=d+u.nodeSize;if(f>e&&a(u,s+d,l||null,c)!==!1&&u.content.size){let v=d+1;u.nodesBetween(Math.max(0,e-v),Math.min(u.content.size,o-v),a,s+v)}d=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,o,a,s){let l="",c=!0;return this.nodesBetween(e,o,(d,u)=>{let f=d.isText?d.text.slice(Math.max(e,u)-u,o-u):d.isLeaf?s?typeof s=="function"?s(d):s:d.type.spec.leafText?d.type.spec.leafText(d):"":"";d.isBlock&&(d.isLeaf&&f||d.isTextblock)&&a&&(c?c=!1:l+=a),l+=f},0),l}append(e){if(!e.size)return this;if(!this.size)return e;let o=this.lastChild,a=e.firstChild,s=this.content.slice(),l=0;for(o.isText&&o.sameMarkup(a)&&(s[s.length-1]=o.withText(o.text+a.text),l=1);l<e.content.length;l++)s.push(e.content[l]);return new Fragment(s,this.size+e.size)}cut(e,o=this.size){if(e==0&&o==this.size)return this;let a=[],s=0;if(o>e)for(let l=0,c=0;c<o;l++){let d=this.content[l],u=c+d.nodeSize;u>e&&((c<e||u>o)&&(d.isText?d=d.cut(Math.max(0,e-c),Math.min(d.text.length,o-c)):d=d.cut(Math.max(0,e-c-1),Math.min(d.content.size,o-c-1))),a.push(d),s+=d.nodeSize),c=u}return new Fragment(a,s)}cutByIndex(e,o){return e==o?Fragment.empty:e==0&&o==this.content.length?this:new Fragment(this.content.slice(e,o))}replaceChild(e,o){let a=this.content[e];if(a==o)return this;let s=this.content.slice(),l=this.size+o.nodeSize-a.nodeSize;return s[e]=o,new Fragment(s,l)}addToStart(e){return new Fragment([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Fragment(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let o=0;o<this.content.length;o++)if(!this.content[o].eq(e.content[o]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let o=this.content[e];if(!o)throw new RangeError("Index "+e+" out of range for "+this);return o}maybeChild(e){return this.content[e]||null}forEach(e){for(let o=0,a=0;o<this.content.length;o++){let s=this.content[o];e(s,a,o),a+=s.nodeSize}}findDiffStart(e,o=0){return findDiffStart(this,e,o)}findDiffEnd(e,o=this.size,a=e.size){return findDiffEnd(this,e,o,a)}findIndex(e,o=-1){if(e==0)return retIndex(0,e);if(e==this.size)return retIndex(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let a=0,s=0;;a++){let l=this.child(a),c=s+l.nodeSize;if(c>=e)return c==e||o>0?retIndex(a+1,c):retIndex(a,s);s=c}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,o){if(!o)return Fragment.empty;if(!Array.isArray(o))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(o.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Fragment.empty;let o,a=0;for(let s=0;s<e.length;s++){let l=e[s];a+=l.nodeSize,s&&l.isText&&e[s-1].sameMarkup(l)?(o||(o=e.slice(0,s)),o[o.length-1]=l.withText(o[o.length-1].text+l.text)):o&&o.push(l)}return new Fragment(o||e,a)}static from(e){if(!e)return Fragment.empty;if(e instanceof Fragment)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Fragment([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(n,e){return found.index=n,found.offset=e,found}function compareDeep(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let o=Array.isArray(n);if(Array.isArray(e)!=o)return!1;if(o){if(n.length!=e.length)return!1;for(let a=0;a<n.length;a++)if(!compareDeep(n[a],e[a]))return!1}else{for(let a in n)if(!(a in e)||!compareDeep(n[a],e[a]))return!1;for(let a in e)if(!(a in n))return!1}return!0}class Mark{constructor(e,o){this.type=e,this.attrs=o}addToSet(e){let o,a=!1;for(let s=0;s<e.length;s++){let l=e[s];if(this.eq(l))return e;if(this.type.excludes(l.type))o||(o=e.slice(0,s));else{if(l.type.excludes(this.type))return e;!a&&l.type.rank>this.type.rank&&(o||(o=e.slice(0,s)),o.push(this),a=!0),o&&o.push(l)}}return o||(o=e.slice()),a||o.push(this),o}removeFromSet(e){for(let o=0;o<e.length;o++)if(this.eq(e[o]))return e.slice(0,o).concat(e.slice(o+1));return e}isInSet(e){for(let o=0;o<e.length;o++)if(this.eq(e[o]))return!0;return!1}eq(e){return this==e||this.type==e.type&&compareDeep(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let o in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,o){if(!o)throw new RangeError("Invalid input for Mark.fromJSON");let a=e.marks[o.type];if(!a)throw new RangeError(`There is no mark type ${o.type} in this schema`);let s=a.create(o.attrs);return a.checkAttrs(s.attrs),s}static sameSet(e,o){if(e==o)return!0;if(e.length!=o.length)return!1;for(let a=0;a<e.length;a++)if(!e[a].eq(o[a]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Mark.none;if(e instanceof Mark)return[e];let o=e.slice();return o.sort((a,s)=>a.type.rank-s.type.rank),o}}Mark.none=[];class ReplaceError extends Error{}class Slice{constructor(e,o,a){this.content=e,this.openStart=o,this.openEnd=a}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,o){let a=insertInto(this.content,e+this.openStart,o);return a&&new Slice(a,this.openStart,this.openEnd)}removeBetween(e,o){return new Slice(removeRange(this.content,e+this.openStart,o+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,o){if(!o)return Slice.empty;let a=o.openStart||0,s=o.openEnd||0;if(typeof a!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(e,o.content),a,s)}static maxOpen(e,o=!0){let a=0,s=0;for(let l=e.firstChild;l&&!l.isLeaf&&(o||!l.type.spec.isolating);l=l.firstChild)a++;for(let l=e.lastChild;l&&!l.isLeaf&&(o||!l.type.spec.isolating);l=l.lastChild)s++;return new Slice(e,a,s)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(n,e,o){let{index:a,offset:s}=n.findIndex(e),l=n.maybeChild(a),{index:c,offset:d}=n.findIndex(o);if(s==e||l.isText){if(d!=o&&!n.child(c).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(o))}if(a!=c)throw new RangeError("Removing non-flat range");return n.replaceChild(a,l.copy(removeRange(l.content,e-s-1,o-s-1)))}function insertInto(n,e,o,a){let{index:s,offset:l}=n.findIndex(e),c=n.maybeChild(s);if(l==e||c.isText)return n.cut(0,e).append(o).append(n.cut(e));let d=insertInto(c.content,e-l-1,o);return d&&n.replaceChild(s,c.copy(d))}function replace$2(n,e,o){if(o.openStart>n.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(n.depth-o.openStart!=e.depth-o.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(n,e,o,0)}function replaceOuter(n,e,o,a){let s=n.index(a),l=n.node(a);if(s==e.index(a)&&a<n.depth-o.openStart){let c=replaceOuter(n,e,o,a+1);return l.copy(l.content.replaceChild(s,c))}else if(o.content.size)if(!o.openStart&&!o.openEnd&&n.depth==a&&e.depth==a){let c=n.parent,d=c.content;return close$1(c,d.cut(0,n.parentOffset).append(o.content).append(d.cut(e.parentOffset)))}else{let{start:c,end:d}=prepareSliceForReplace(o,n);return close$1(l,replaceThreeWay(n,c,d,e,a))}else return close$1(l,replaceTwoWay(n,e,a))}function checkJoin(n,e){if(!e.type.compatibleContent(n.type))throw new ReplaceError("Cannot join "+e.type.name+" onto "+n.type.name)}function joinable(n,e,o){let a=n.node(o);return checkJoin(a,e.node(o)),a}function addNode(n,e){let o=e.length-1;o>=0&&n.isText&&n.sameMarkup(e[o])?e[o]=n.withText(e[o].text+n.text):e.push(n)}function addRange$1(n,e,o,a){let s=(e||n).node(o),l=0,c=e?e.index(o):s.childCount;n&&(l=n.index(o),n.depth>o?l++:n.textOffset&&(addNode(n.nodeAfter,a),l++));for(let d=l;d<c;d++)addNode(s.child(d),a);e&&e.depth==o&&e.textOffset&&addNode(e.nodeBefore,a)}function close$1(n,e){return n.type.checkContent(e),n.copy(e)}function replaceThreeWay(n,e,o,a,s){let l=n.depth>s&&joinable(n,e,s+1),c=a.depth>s&&joinable(o,a,s+1),d=[];return addRange$1(null,n,s,d),l&&c&&e.index(s)==o.index(s)?(checkJoin(l,c),addNode(close$1(l,replaceThreeWay(n,e,o,a,s+1)),d)):(l&&addNode(close$1(l,replaceTwoWay(n,e,s+1)),d),addRange$1(e,o,s,d),c&&addNode(close$1(c,replaceTwoWay(o,a,s+1)),d)),addRange$1(a,null,s,d),new Fragment(d)}function replaceTwoWay(n,e,o){let a=[];if(addRange$1(null,n,o,a),n.depth>o){let s=joinable(n,e,o+1);addNode(close$1(s,replaceTwoWay(n,e,o+1)),a)}return addRange$1(e,null,o,a),new Fragment(a)}function prepareSliceForReplace(n,e){let o=e.depth-n.openStart,a=e.node(o).copy(n.content);for(let s=o-1;s>=0;s--)a=e.node(s).copy(Fragment.from(a));return{start:a.resolveNoCache(n.openStart+o),end:a.resolveNoCache(a.content.size-n.openEnd-o)}}class ResolvedPos{constructor(e,o,a){this.pos=e,this.path=o,this.parentOffset=a,this.depth=o.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,o=this.index(this.depth);if(o==e.childCount)return null;let a=this.pos-this.path[this.path.length-1],s=e.child(o);return a?e.child(o).cut(a):s}get nodeBefore(){let e=this.index(this.depth),o=this.pos-this.path[this.path.length-1];return o?this.parent.child(e).cut(0,o):e==0?null:this.parent.child(e-1)}posAtIndex(e,o){o=this.resolveDepth(o);let a=this.path[o*3],s=o==0?0:this.path[o*3-1]+1;for(let l=0;l<e;l++)s+=a.child(l).nodeSize;return s}marks(){let e=this.parent,o=this.index();if(e.content.size==0)return Mark.none;if(this.textOffset)return e.child(o).marks;let a=e.maybeChild(o-1),s=e.maybeChild(o);if(!a){let d=a;a=s,s=d}let l=a.marks;for(var c=0;c<l.length;c++)l[c].type.spec.inclusive===!1&&(!s||!l[c].isInSet(s.marks))&&(l=l[c--].removeFromSet(l));return l}marksAcross(e){let o=this.parent.maybeChild(this.index());if(!o||!o.isInline)return null;let a=o.marks,s=e.parent.maybeChild(e.index());for(var l=0;l<a.length;l++)a[l].type.spec.inclusive===!1&&(!s||!a[l].isInSet(s.marks))&&(a=a[l--].removeFromSet(a));return a}sharedDepth(e){for(let o=this.depth;o>0;o--)if(this.start(o)<=e&&this.end(o)>=e)return o;return 0}blockRange(e=this,o){if(e.pos<this.pos)return e.blockRange(this);for(let a=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);a>=0;a--)if(e.pos<=this.end(a)&&(!o||o(this.node(a))))return new NodeRange(this,e,a);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let o=1;o<=this.depth;o++)e+=(e?"/":"")+this.node(o).type.name+"_"+this.index(o-1);return e+":"+this.parentOffset}static resolve(e,o){if(!(o>=0&&o<=e.content.size))throw new RangeError("Position "+o+" out of range");let a=[],s=0,l=o;for(let c=e;;){let{index:d,offset:u}=c.content.findIndex(l),f=l-u;if(a.push(c,d,s+u),!f||(c=c.child(d),c.isText))break;l=f-1,s+=u+1}return new ResolvedPos(o,a,l)}static resolveCached(e,o){let a=resolveCache.get(e);if(a)for(let l=0;l<a.elts.length;l++){let c=a.elts[l];if(c.pos==o)return c}else resolveCache.set(e,a=new ResolveCache);let s=a.elts[a.i]=ResolvedPos.resolve(e,o);return a.i=(a.i+1)%resolveCacheSize,s}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(e,o,a){this.$from=e,this.$to=o,this.depth=a}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$1=class rn{constructor(e,o,a,s=Mark.none){this.type=e,this.attrs=o,this.marks=s,this.content=a||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,o,a,s=0){this.content.nodesBetween(e,o,a,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,o,a,s){return this.content.textBetween(e,o,a,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,o,a){return this.type==e&&compareDeep(this.attrs,o||e.defaultAttrs||emptyAttrs)&&Mark.sameSet(this.marks,a||Mark.none)}copy(e=null){return e==this.content?this:new rn(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new rn(this.type,this.attrs,this.content,e)}cut(e,o=this.content.size){return e==0&&o==this.content.size?this:this.copy(this.content.cut(e,o))}slice(e,o=this.content.size,a=!1){if(e==o)return Slice.empty;let s=this.resolve(e),l=this.resolve(o),c=a?0:s.sharedDepth(o),d=s.start(c),u=s.node(c).content.cut(s.pos-d,l.pos-d);return new Slice(u,s.depth-c,l.depth-c)}replace(e,o,a){return replace$2(this.resolve(e),this.resolve(o),a)}nodeAt(e){for(let o=this;;){let{index:a,offset:s}=o.content.findIndex(e);if(o=o.maybeChild(a),!o)return null;if(s==e||o.isText)return o;e-=s+1}}childAfter(e){let{index:o,offset:a}=this.content.findIndex(e);return{node:this.content.maybeChild(o),index:o,offset:a}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:o,offset:a}=this.content.findIndex(e);if(a<e)return{node:this.content.child(o),index:o,offset:a};let s=this.content.child(o-1);return{node:s,index:o-1,offset:a-s.nodeSize}}resolve(e){return ResolvedPos.resolveCached(this,e)}resolveNoCache(e){return ResolvedPos.resolve(this,e)}rangeHasMark(e,o,a){let s=!1;return o>e&&this.nodesBetween(e,o,l=>(a.isInSet(l.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wrapMarks$1(this.marks,e)}contentMatchAt(e){let o=this.type.contentMatch.matchFragment(this.content,0,e);if(!o)throw new Error("Called contentMatchAt on a node with invalid content");return o}canReplace(e,o,a=Fragment.empty,s=0,l=a.childCount){let c=this.contentMatchAt(e).matchFragment(a,s,l),d=c&&c.matchFragment(this.content,o);if(!d||!d.validEnd)return!1;for(let u=s;u<l;u++)if(!this.type.allowsMarks(a.child(u).marks))return!1;return!0}canReplaceWith(e,o,a,s){if(s&&!this.type.allowsMarks(s))return!1;let l=this.contentMatchAt(e).matchType(a),c=l&&l.matchFragment(this.content,o);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mark.none;for(let o=0;o<this.marks.length;o++){let a=this.marks[o];a.type.checkAttrs(a.attrs),e=a.addToSet(e)}if(!Mark.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(o=>o.type.name)}`);this.content.forEach(o=>o.check())}toJSON(){let e={type:this.type.name};for(let o in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(o=>o.toJSON())),e}static fromJSON(e,o){if(!o)throw new RangeError("Invalid input for Node.fromJSON");let a;if(o.marks){if(!Array.isArray(o.marks))throw new RangeError("Invalid mark data for Node.fromJSON");a=o.marks.map(e.markFromJSON)}if(o.type=="text"){if(typeof o.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(o.text,a)}let s=Fragment.fromJSON(e,o.content),l=e.nodeType(o.type).create(o.attrs,s,a);return l.type.checkAttrs(l.attrs),l}};Node$1.prototype.text=void 0;let TextNode$2=class an extends Node$1{constructor(e,o,a,s){if(super(e,o,null,s),!a)throw new RangeError("Empty text nodes are not allowed");this.text=a}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks$1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,o){return this.text.slice(e,o)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new an(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new an(this.type,this.attrs,e,this.marks)}cut(e=0,o=this.text.length){return e==0&&o==this.text.length?this:this.withText(this.text.slice(e,o))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function wrapMarks$1(n,e){for(let o=n.length-1;o>=0;o--)e=n[o].type.name+"("+e+")";return e}class ContentMatch{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,o){let a=new TokenStream(e,o);if(a.next==null)return ContentMatch.empty;let s=parseExpr(a);a.next&&a.err("Unexpected trailing text");let l=dfa(nfa(s));return checkForDeadEnds(l,a),l}matchType(e){for(let o=0;o<this.next.length;o++)if(this.next[o].type==e)return this.next[o].next;return null}matchFragment(e,o=0,a=e.childCount){let s=this;for(let l=o;s&&l<a;l++)s=s.matchType(e.child(l).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:o}=this.next[e];if(!(o.isText||o.hasRequiredAttrs()))return o}return null}compatible(e){for(let o=0;o<this.next.length;o++)for(let a=0;a<e.next.length;a++)if(this.next[o].type==e.next[a].type)return!0;return!1}fillBefore(e,o=!1,a=0){let s=[this];function l(c,d){let u=c.matchFragment(e,a);if(u&&(!o||u.validEnd))return Fragment.from(d.map(f=>f.createAndFill()));for(let f=0;f<c.next.length;f++){let{type:v,next:b}=c.next[f];if(!(v.isText||v.hasRequiredAttrs())&&s.indexOf(b)==-1){s.push(b);let k=l(b,d.concat(v));if(k)return k}}return null}return l(this,[])}findWrapping(e){for(let a=0;a<this.wrapCache.length;a+=2)if(this.wrapCache[a]==e)return this.wrapCache[a+1];let o=this.computeWrapping(e);return this.wrapCache.push(e,o),o}computeWrapping(e){let o=Object.create(null),a=[{match:this,type:null,via:null}];for(;a.length;){let s=a.shift(),l=s.match;if(l.matchType(e)){let c=[];for(let d=s;d.type;d=d.via)c.push(d.type);return c.reverse()}for(let c=0;c<l.next.length;c++){let{type:d,next:u}=l.next[c];!d.isLeaf&&!d.hasRequiredAttrs()&&!(d.name in o)&&(!s.type||u.validEnd)&&(a.push({match:d.contentMatch,type:d,via:s}),o[d.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function o(a){e.push(a);for(let s=0;s<a.next.length;s++)e.indexOf(a.next[s].next)==-1&&o(a.next[s].next)}return o(this),e.map((a,s)=>{let l=s+(a.validEnd?"*":" ")+" ";for(let c=0;c<a.next.length;c++)l+=(c?", ":"")+a.next[c].type.name+"->"+e.indexOf(a.next[c].next);return l}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(e,o){this.string=e,this.nodeTypes=o,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function parseExpr(n){let e=[];do e.push(parseExprSeq(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function parseExprSeq(n){let e=[];do e.push(parseExprSubscript(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function parseExprSubscript(n){let e=parseExprAtom(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=parseExprRange(n,e);else break;return e}function parseNum(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function parseExprRange(n,e){let o=parseNum(n),a=o;return n.eat(",")&&(n.next!="}"?a=parseNum(n):a=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:o,max:a,expr:e}}function resolveName(n,e){let o=n.nodeTypes,a=o[e];if(a)return[a];let s=[];for(let l in o){let c=o[l];c.isInGroup(e)&&s.push(c)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function parseExprAtom(n){if(n.eat("(")){let e=parseExpr(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=resolveName(n,n.next).map(o=>(n.inline==null?n.inline=o.isInline:n.inline!=o.isInline&&n.err("Mixing inline and block content"),{type:"name",value:o}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function nfa(n){let e=[[]];return s(l(n,0),o()),e;function o(){return e.push([])-1}function a(c,d,u){let f={term:u,to:d};return e[c].push(f),f}function s(c,d){c.forEach(u=>u.to=d)}function l(c,d){if(c.type=="choice")return c.exprs.reduce((u,f)=>u.concat(l(f,d)),[]);if(c.type=="seq")for(let u=0;;u++){let f=l(c.exprs[u],d);if(u==c.exprs.length-1)return f;s(f,d=o())}else if(c.type=="star"){let u=o();return a(d,u),s(l(c.expr,u),u),[a(u)]}else if(c.type=="plus"){let u=o();return s(l(c.expr,d),u),s(l(c.expr,u),u),[a(u)]}else{if(c.type=="opt")return[a(d)].concat(l(c.expr,d));if(c.type=="range"){let u=d;for(let f=0;f<c.min;f++){let v=o();s(l(c.expr,u),v),u=v}if(c.max==-1)s(l(c.expr,u),u);else for(let f=c.min;f<c.max;f++){let v=o();a(u,v),s(l(c.expr,u),v),u=v}return[a(u)]}else{if(c.type=="name")return[a(d,void 0,c.value)];throw new Error("Unknown expr type")}}}}function cmp(n,e){return e-n}function nullFrom(n,e){let o=[];return a(e),o.sort(cmp);function a(s){let l=n[s];if(l.length==1&&!l[0].term)return a(l[0].to);o.push(s);for(let c=0;c<l.length;c++){let{term:d,to:u}=l[c];!d&&o.indexOf(u)==-1&&a(u)}}}function dfa(n){let e=Object.create(null);return o(nullFrom(n,0));function o(a){let s=[];a.forEach(c=>{n[c].forEach(({term:d,to:u})=>{if(!d)return;let f;for(let v=0;v<s.length;v++)s[v][0]==d&&(f=s[v][1]);nullFrom(n,u).forEach(v=>{f||s.push([d,f=[]]),f.indexOf(v)==-1&&f.push(v)})})});let l=e[a.join(",")]=new ContentMatch(a.indexOf(n.length-1)>-1);for(let c=0;c<s.length;c++){let d=s[c][1].sort(cmp);l.next.push({type:s[c][0],next:e[d.join(",")]||o(d)})}return l}}function checkForDeadEnds(n,e){for(let o=0,a=[n];o<a.length;o++){let s=a[o],l=!s.validEnd,c=[];for(let d=0;d<s.next.length;d++){let{type:u,next:f}=s.next[d];c.push(u.name),l&&!(u.isText||u.hasRequiredAttrs())&&(l=!1),a.indexOf(f)==-1&&a.push(f)}l&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(n){let e=Object.create(null);for(let o in n){let a=n[o];if(!a.hasDefault)return null;e[o]=a.default}return e}function computeAttrs(n,e){let o=Object.create(null);for(let a in n){let s=e&&e[a];if(s===void 0){let l=n[a];if(l.hasDefault)s=l.default;else throw new RangeError("No value supplied for attribute "+a)}o[a]=s}return o}function checkAttrs(n,e,o,a){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${o} of type ${s}`);for(let s in n){let l=n[s];l.validate&&l.validate(e[s])}}function initAttrs(n,e){let o=Object.create(null);if(e)for(let a in e)o[a]=new Attribute(n,a,e[a]);return o}let NodeType$2=class un{constructor(e,o,a){this.name=e,this.schema=o,this.spec=a,this.markSet=null,this.groups=a.group?a.group.split(" "):[],this.attrs=initAttrs(e,a.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(a.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,e)}create(e=null,o,a){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$1(this,this.computeAttrs(e),Fragment.from(o),Mark.setFrom(a))}createChecked(e=null,o,a){return o=Fragment.from(o),this.checkContent(o),new Node$1(this,this.computeAttrs(e),o,Mark.setFrom(a))}createAndFill(e=null,o,a){if(e=this.computeAttrs(e),o=Fragment.from(o),o.size){let c=this.contentMatch.fillBefore(o);if(!c)return null;o=c.append(o)}let s=this.contentMatch.matchFragment(o),l=s&&s.fillBefore(Fragment.empty,!0);return l?new Node$1(this,e,o.append(l),Mark.setFrom(a)):null}validContent(e){let o=this.contentMatch.matchFragment(e);if(!o||!o.validEnd)return!1;for(let a=0;a<e.childCount;a++)if(!this.allowsMarks(e.child(a).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){checkAttrs(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let o=0;o<e.length;o++)if(!this.allowsMarkType(e[o].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let o;for(let a=0;a<e.length;a++)this.allowsMarkType(e[a].type)?o&&o.push(e[a]):o||(o=e.slice(0,a));return o?o.length?o:Mark.none:e}static compile(e,o){let a=Object.create(null);e.forEach((l,c)=>a[l]=new un(l,o,c));let s=o.spec.topNode||"doc";if(!a[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!a.text)throw new RangeError("Every schema needs a 'text' type");for(let l in a.text.attrs)throw new RangeError("The text node type should not have attributes");return a}};function validateType(n,e,o){let a=o.split("|");return s=>{let l=s===null?"null":typeof s;if(a.indexOf(l)<0)throw new RangeError(`Expected value of type ${a} for attribute ${e} on type ${n}, got ${l}`)}}class Attribute{constructor(e,o,a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default,this.validate=typeof a.validate=="string"?validateType(e,o,a.validate):a.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(e,o,a,s){this.name=e,this.rank=o,this.schema=a,this.spec=s,this.attrs=initAttrs(e,s.attrs),this.excluded=null;let l=defaultAttrs(this.attrs);this.instance=l?new Mark(this,l):null}create(e=null){return!e&&this.instance?this.instance:new Mark(this,computeAttrs(this.attrs,e))}static compile(e,o){let a=Object.create(null),s=0;return e.forEach((l,c)=>a[l]=new MarkType(l,s++,o,c)),a}removeFromSet(e){for(var o=0;o<e.length;o++)e[o].type==this&&(e=e.slice(0,o).concat(e.slice(o+1)),o--);return e}isInSet(e){for(let o=0;o<e.length;o++)if(e[o].type==this)return e[o]}checkAttrs(e){checkAttrs(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Schema{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let o=this.spec={};for(let s in e)o[s]=e[s];o.nodes=OrderedMap.from(e.nodes),o.marks=OrderedMap.from(e.marks||{}),this.nodes=NodeType$2.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let a=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let l=this.nodes[s],c=l.spec.content||"",d=l.spec.marks;if(l.contentMatch=a[c]||(a[c]=ContentMatch.parse(c,this.nodes)),l.inlineContent=l.contentMatch.inlineContent,l.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!l.isInline||!l.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=l}l.markSet=d=="_"?null:d?gatherMarks(this,d.split(" ")):d==""||!l.inlineContent?[]:null}for(let s in this.marks){let l=this.marks[s],c=l.spec.excludes;l.excluded=c==null?[l]:c==""?[]:gatherMarks(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,o=null,a,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof NodeType$2){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(o,a,s)}text(e,o){let a=this.nodes.text;return new TextNode$2(a,a.defaultAttrs,e,Mark.setFrom(o))}mark(e,o){return typeof e=="string"&&(e=this.marks[e]),e.create(o)}nodeFromJSON(e){return Node$1.fromJSON(this,e)}markFromJSON(e){return Mark.fromJSON(this,e)}nodeType(e){let o=this.nodes[e];if(!o)throw new RangeError("Unknown node type: "+e);return o}}function gatherMarks(n,e){let o=[];for(let a=0;a<e.length;a++){let s=e[a],l=n.marks[s],c=l;if(l)o.push(l);else for(let d in n.marks){let u=n.marks[d];(s=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(s)>-1)&&o.push(c=u)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[a]+"'")}return o}function isTagRule(n){return n.tag!=null}function isStyleRule(n){return n.style!=null}let DOMParser$1=class sn{constructor(e,o){this.schema=e,this.rules=o,this.tags=[],this.styles=[];let a=this.matchedStyles=[];o.forEach(s=>{if(isTagRule(s))this.tags.push(s);else if(isStyleRule(s)){let l=/[^=]*/.exec(s.style)[0];a.indexOf(l)<0&&a.push(l),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let l=e.nodes[s.node];return l.contentMatch.matchType(l)})}parse(e,o={}){let a=new ParseContext$1(this,o,!1);return a.addAll(e,Mark.none,o.from,o.to),a.finish()}parseSlice(e,o={}){let a=new ParseContext$1(this,o,!0);return a.addAll(e,Mark.none,o.from,o.to),Slice.maxOpen(a.finish())}matchTag(e,o,a){for(let s=a?this.tags.indexOf(a)+1:0;s<this.tags.length;s++){let l=this.tags[s];if(matches(e,l.tag)&&(l.namespace===void 0||e.namespaceURI==l.namespace)&&(!l.context||o.matchesContext(l.context))){if(l.getAttrs){let c=l.getAttrs(e);if(c===!1)continue;l.attrs=c||void 0}return l}}}matchStyle(e,o,a,s){for(let l=s?this.styles.indexOf(s)+1:0;l<this.styles.length;l++){let c=this.styles[l],d=c.style;if(!(d.indexOf(e)!=0||c.context&&!a.matchesContext(c.context)||d.length>e.length&&(d.charCodeAt(e.length)!=61||d.slice(e.length+1)!=o))){if(c.getAttrs){let u=c.getAttrs(o);if(u===!1)continue;c.attrs=u||void 0}return c}}}static schemaRules(e){let o=[];function a(s){let l=s.priority==null?50:s.priority,c=0;for(;c<o.length;c++){let d=o[c];if((d.priority==null?50:d.priority)<l)break}o.splice(c,0,s)}for(let s in e.marks){let l=e.marks[s].spec.parseDOM;l&&l.forEach(c=>{a(c=copy(c)),c.mark||c.ignore||c.clearMark||(c.mark=s)})}for(let s in e.nodes){let l=e.nodes[s].spec.parseDOM;l&&l.forEach(c=>{a(c=copy(c)),c.node||c.ignore||c.mark||(c.node=s)})}return o}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new sn(e,sn.schemaRules(e)))}};const blockTags$1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags$1={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(n,e,o){return e!=null?(e?OPT_PRESERVE_WS:0)|(e==="full"?OPT_PRESERVE_WS_FULL:0):n&&n.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:o&-5}class NodeContext{constructor(e,o,a,s,l,c){this.type=e,this.attrs=o,this.marks=a,this.solid=s,this.options=c,this.content=[],this.activeMarks=Mark.none,this.match=l||(c&OPT_OPEN_LEFT?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let o=this.type.contentMatch.fillBefore(Fragment.from(e));if(o)this.match=this.type.contentMatch.matchFragment(o);else{let a=this.type.contentMatch,s;return(s=a.findWrapping(e.type))?(this.match=a,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&OPT_PRESERVE_WS)){let a=this.content[this.content.length-1],s;if(a&&a.isText&&(s=/[ \t\r\n\u000c]+$/.exec(a.text))){let l=a;a.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=l.withText(l.text.slice(0,l.text.length-s[0].length))}}let o=Fragment.from(this.content);return!e&&this.match&&(o=o.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!blockTags$1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}let ParseContext$1=class{constructor(n,e,o){this.parser=n,this.options=e,this.isOpen=o,this.open=0,this.localPreserveWS=!1;let a=e.topNode,s,l=wsOptionsFor(null,e.preserveWhitespace,0)|(o?OPT_OPEN_LEFT:0);a?s=new NodeContext(a.type,a.attrs,Mark.none,!0,e.topMatch||a.type.contentMatch,l):o?s=new NodeContext(null,null,Mark.none,!0,null,l):s=new NodeContext(n.schema.topNodeType,null,Mark.none,!0,null,l),this.nodes=[s],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(n,e){n.nodeType==3?this.addTextNode(n,e):n.nodeType==1&&this.addElement(n,e)}addTextNode(n,e){let o=n.nodeValue,a=this.top,s=a.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(a.options&OPT_PRESERVE_WS)>0;if(s==="full"||a.inlineContext(n)||/[^ \t\r\n\u000c]/.test(o)){if(s)s!=="full"?o=o.replace(/\r?\n|\r/g," "):o=o.replace(/\r\n?/g,`
`);else if(o=o.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(o)&&this.open==this.nodes.length-1){let l=a.content[a.content.length-1],c=n.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(o=o.slice(1))}o&&this.insertNode(this.parser.schema.text(o),e),this.findInText(n)}else this.findInside(n)}addElement(n,e,o){let a=this.localPreserveWS,s=this.top;(n.tagName=="PRE"||/pre/.test(n.style&&n.style.whiteSpace))&&(this.localPreserveWS=!0);let l=n.nodeName.toLowerCase(),c;listTags.hasOwnProperty(l)&&this.parser.normalizeLists&&normalizeList(n);let d=this.options.ruleFromNode&&this.options.ruleFromNode(n)||(c=this.parser.matchTag(n,this,o));e:if(d?d.ignore:ignoreTags$1.hasOwnProperty(l))this.findInside(n),this.ignoreFallback(n,e);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(n=d.skip);let u,f=this.needsBlock;if(blockTags$1.hasOwnProperty(l))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!n.firstChild){this.leafFallback(n,e);break e}let v=d&&d.skip?e:this.readStyles(n,e);v&&this.addAll(n,v),u&&this.sync(s),this.needsBlock=f}else{let u=this.readStyles(n,e);u&&this.addElementByRule(n,d,u,d.consuming===!1?c:void 0)}this.localPreserveWS=a}leafFallback(n,e){n.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(n.ownerDocument.createTextNode(`
`),e)}ignoreFallback(n,e){n.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),e)}readStyles(n,e){let o=n.style;if(o&&o.length)for(let a=0;a<this.parser.matchedStyles.length;a++){let s=this.parser.matchedStyles[a],l=o.getPropertyValue(s);if(l)for(let c=void 0;;){let d=this.parser.matchStyle(s,l,this,c);if(!d)break;if(d.ignore)return null;if(d.clearMark?e=e.filter(u=>!d.clearMark(u)):e=e.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)c=d;else break}}return e}addElementByRule(n,e,o,a){let s,l;if(e.node)if(l=this.parser.schema.nodes[e.node],l.isLeaf)this.insertNode(l.create(e.attrs),o)||this.leafFallback(n,o);else{let d=this.enter(l,e.attrs||null,o,e.preserveWhitespace);d&&(s=!0,o=d)}else{let d=this.parser.schema.marks[e.mark];o=o.concat(d.create(e.attrs))}let c=this.top;if(l&&l.isLeaf)this.findInside(n);else if(a)this.addElement(n,o,a);else if(e.getContent)this.findInside(n),e.getContent(n,this.parser.schema).forEach(d=>this.insertNode(d,o));else{let d=n;typeof e.contentElement=="string"?d=n.querySelector(e.contentElement):typeof e.contentElement=="function"?d=e.contentElement(n):e.contentElement&&(d=e.contentElement),this.findAround(n,d,!0),this.addAll(d,o),this.findAround(n,d,!1)}s&&this.sync(c)&&this.open--}addAll(n,e,o,a){let s=o||0;for(let l=o?n.childNodes[o]:n.firstChild,c=a==null?null:n.childNodes[a];l!=c;l=l.nextSibling,++s)this.findAtPoint(n,s),this.addDOM(l,e);this.findAtPoint(n,s)}findPlace(n,e){let o,a;for(let s=this.open;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(n);if(c&&(!o||o.length>c.length)&&(o=c,a=l,!c.length)||l.solid)break}if(!o)return null;this.sync(a);for(let s=0;s<o.length;s++)e=this.enterInner(o[s],null,e,!1);return e}insertNode(n,e){if(n.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(e=this.enterInner(a,null,e))}let o=this.findPlace(n,e);if(o){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(n.type));let s=Mark.none;for(let l of o.concat(n.marks))(a.type?a.type.allowsMarkType(l.type):markMayApply(l.type,n.type))&&(s=l.addToSet(s));return a.content.push(n.mark(s)),!0}return!1}enter(n,e,o,a){let s=this.findPlace(n.create(e),o);return s&&(s=this.enterInner(n,e,o,!0,a)),s}enterInner(n,e,o,a=!1,s){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(n);let c=wsOptionsFor(n,s,l.options);l.options&OPT_OPEN_LEFT&&l.content.length==0&&(c|=OPT_OPEN_LEFT);let d=Mark.none;return o=o.filter(u=>(l.type?l.type.allowsMarkType(u.type):markMayApply(u.type,n))?(d=u.addToSet(d),!1):!0),this.nodes.push(new NodeContext(n,e,d,a,null,c)),this.open++,o}closeExtra(n=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(n));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(n){for(let e=this.open;e>=0;e--){if(this.nodes[e]==n)return this.open=e,!0;this.localPreserveWS&&(this.nodes[e].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let n=0;for(let e=this.open;e>=0;e--){let o=this.nodes[e].content;for(let a=o.length-1;a>=0;a--)n+=o[a].nodeSize;e&&n++}return n}findAtPoint(n,e){if(this.find)for(let o=0;o<this.find.length;o++)this.find[o].node==n&&this.find[o].offset==e&&(this.find[o].pos=this.currentPos)}findInside(n){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&n.nodeType==1&&n.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(n,e,o){if(n!=e&&this.find)for(let a=0;a<this.find.length;a++)this.find[a].pos==null&&n.nodeType==1&&n.contains(this.find[a].node)&&e.compareDocumentPosition(this.find[a].node)&(o?2:4)&&(this.find[a].pos=this.currentPos)}findInText(n){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==n&&(this.find[e].pos=this.currentPos-(n.nodeValue.length-this.find[e].offset))}matchesContext(n){if(n.indexOf("|")>-1)return n.split(/\s*\|\s*/).some(this.matchesContext,this);let e=n.split("/"),o=this.options.context,a=!this.isOpen&&(!o||o.parent.type==this.nodes[0].type),s=-(o?o.depth+1:0)+(a?0:1),l=(c,d)=>{for(;c>=0;c--){let u=e[c];if(u==""){if(c==e.length-1||c==0)continue;for(;d>=s;d--)if(l(c-1,d))return!0;return!1}else{let f=d>0||d==0&&a?this.nodes[d].type:o&&d>=s?o.node(d-s).type:null;if(!f||f.name!=u&&!f.isInGroup(u))return!1;d--}}return!0};return l(e.length-1,this.open)}textblockFromContext(){let n=this.options.context;if(n)for(let e=n.depth;e>=0;e--){let o=n.node(e).contentMatchAt(n.indexAfter(e)).defaultType;if(o&&o.isTextblock&&o.defaultAttrs)return o}for(let e in this.parser.schema.nodes){let o=this.parser.schema.nodes[e];if(o.isTextblock&&o.defaultAttrs)return o}}};function normalizeList(n){for(let e=n.firstChild,o=null;e;e=e.nextSibling){let a=e.nodeType==1?e.nodeName.toLowerCase():null;a&&listTags.hasOwnProperty(a)&&o?(o.appendChild(e),e=o):a=="li"?o=e:a&&(o=null)}}function matches(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function copy(n){let e={};for(let o in n)e[o]=n[o];return e}function markMayApply(n,e){let o=e.schema.nodes;for(let a in o){let s=o[a];if(!s.allowsMarkType(n))continue;let l=[],c=d=>{l.push(d);for(let u=0;u<d.edgeCount;u++){let{type:f,next:v}=d.edge(u);if(f==e||l.indexOf(v)<0&&c(v))return!0}};if(c(s.contentMatch))return!0}}class DOMSerializer{constructor(e,o){this.nodes=e,this.marks=o}serializeFragment(e,o={},a){a||(a=doc$2(o).createDocumentFragment());let s=a,l=[];return e.forEach(c=>{if(l.length||c.marks.length){let d=0,u=0;for(;d<l.length&&u<c.marks.length;){let f=c.marks[u];if(!this.marks[f.type.name]){u++;continue}if(!f.eq(l[d][0])||f.type.spec.spanning===!1)break;d++,u++}for(;d<l.length;)s=l.pop()[1];for(;u<c.marks.length;){let f=c.marks[u++],v=this.serializeMark(f,c.isInline,o);v&&(l.push([f,s]),s.appendChild(v.dom),s=v.contentDOM||v.dom)}}s.appendChild(this.serializeNodeInner(c,o))}),a}serializeNodeInner(e,o){let{dom:a,contentDOM:s}=renderSpec(doc$2(o),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,o,s)}return a}serializeNode(e,o={}){let a=this.serializeNodeInner(e,o);for(let s=e.marks.length-1;s>=0;s--){let l=this.serializeMark(e.marks[s],e.isInline,o);l&&((l.contentDOM||l.dom).appendChild(a),a=l.dom)}return a}serializeMark(e,o,a={}){let s=this.marks[e.type.name];return s&&renderSpec(doc$2(a),s(e,o),null,e.attrs)}static renderSpec(e,o,a=null,s){return renderSpec(e,o,a,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let o=gatherToDOM(e.nodes);return o.text||(o.text=a=>a.text),o}static marksFromSchema(e){return gatherToDOM(e.marks)}}function gatherToDOM(n){let e={};for(let o in n){let a=n[o].spec.toDOM;a&&(e[o]=a)}return e}function doc$2(n){return n.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(n){let e=suspiciousAttributeCache.get(n);return e===void 0&&suspiciousAttributeCache.set(n,e=suspiciousAttributesInner(n)),e}function suspiciousAttributesInner(n){let e=null;function o(a){if(a&&typeof a=="object")if(Array.isArray(a))if(typeof a[0]=="string")e||(e=[]),e.push(a);else for(let s=0;s<a.length;s++)o(a[s]);else for(let s in a)o(a[s])}return o(n),e}function renderSpec(n,e,o,a){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],l;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(a&&(l=suspiciousAttributes(a))&&l.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=s.indexOf(" ");c>0&&(o=s.slice(0,c),s=s.slice(c+1));let d,u=o?n.createElementNS(o,s):n.createElement(s),f=e[1],v=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){v=2;for(let b in f)if(f[b]!=null){let k=b.indexOf(" ");k>0?u.setAttributeNS(b.slice(0,k),b.slice(k+1),f[b]):u.setAttribute(b,f[b])}}for(let b=v;b<e.length;b++){let k=e[b];if(k===0){if(b<e.length-1||b>v)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:x,contentDOM:_}=renderSpec(n,k,o,a);if(u.appendChild(x),_){if(d)throw new RangeError("Multiple content holes");d=_}}}return{dom:u,contentDOM:d}}const getPmSchema=n=>new Schema({nodes:{doc:{content:"inline*"},text:{group:"inline"},pathRef:{inline:!0,atom:!0,attrs:{path:{}},group:"inline",selectable:!0,toDOM:e=>{const o=document.createElement("span");o.classList.add("path-ref"),o.dataset.path=e.attrs.path;const a=getBasename(e.attrs.path);return o.innerHTML=a,o},parseDOM:[{tag:"span.path-ref",getAttrs:e=>({path:e.getAttribute("path")})}],leafText:e=>e.attrs.path},blockRef_v2:{inline:!0,atom:!0,attrs:{toBlockId:{},tag:{default:!1}},group:"inline",selectable:!0,toDOM:e=>{const{toBlockId:o}=e.attrs,a=document.createElement("span");a.classList.add("block-ref-v2"),e.attrs.tag&&a.classList.add("tag"),a.addEventListener("click",l=>{var d,u;l.preventDefault(),l.stopPropagation(),(d=n.pushHistoryItem)==null||d.call(n);const c=(u=n.getMainTree)==null?void 0:u.call(n);c&&c.focusBlock(o,{highlight:!0,expandIfFold:!0})});const s=n.getBlockRef(o);return watch(s,l=>{var c,d;if(l){const u=l.ctext??"";a.innerHTML=u.trim(),a.dataset.blockId=l.id,a.dataset.ctext=u,(c=l.metadata)!=null&&c.blockRefColor?a.dataset.blockRefColor=(d=l.metadata)==null?void 0:d.blockRefColor:delete a.dataset.blockRefColor,a.classList.remove("invalid")}else a.innerHTML="Invalid Ref",a.classList.add("invalid")},{immediate:!0}),a},parseDOM:[{tag:"span.block-ref-v2",getAttrs(e){return e instanceof HTMLElement?{toBlockId:e.dataset.blockId,tag:e.classList.contains("tag")}:{}}}],leafText:e=>{var a;const{toBlockId:o}=e.attrs;return o?((a=n.getBlockRef(o).value)==null?void 0:a.ctext)??"":""}},mathInline:{inline:!0,atom:!0,attrs:{src:{}},leafText:e=>e.attrs.src,group:"inline",selectable:!0,toDOM:e=>["span",{class:"math-inline",src:e.attrs.src,contenteditable:!0}],parseDOM:[{tag:"span.math-inline",getAttrs:e=>({src:e.getAttribute("src")})}]},hardBreak:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}},marks:{link:{attrs:{href:{}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href")})}],toDOM(e){const{href:o}=e.attrs,a=document.createElement("a");return a.href=o,a.spellcheck=!1,a.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),window.open(o,"_blank")}),a}},code:{parseDOM:[{tag:"code"}],toDOM(){return["code",{spellcheck:!1},0]}},italic:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:e=>e.type.name=="em"}],toDOM(){return["em",0]}},bold:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong",0]},strikethrough:{parseDOM:[{tag:"s"},{tag:"del"},{style:"text-decoration: line-through"}],toDOM:()=>["s",0]},underline:{parseDOM:[{tag:"u"},{style:"text-decoration: underline"}],toDOM:()=>["u",0]},cloze:{attrs:{clozeId:{}},inclusive:!1,toDOM(e){const o=document.createElement("span");return o.classList.add("cloze"),o.setAttribute("clozeid",e.attrs.clozeId),{dom:o,contentDom:o}},parseDOM:[{tag:"span.cloze",getAttrs:e=>({clozeId:e.getAttribute("clozeId")})}]},highlight:{attrs:{bg:{default:"bg4"},fg:{default:null}},inclusive:!1,toDOM(e){const{bg:o,fg:a}=e.attrs;return["span",{class:"highlight",bg:o,fg:a},0]},parseDOM:[{tag:"span.highlight",getAttrs:e=>({bg:e.getAttribute("bg"),fg:e.getAttribute("fg")})}]}}}),HTTP_LINK_REGEX=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/g,linkify=function(n,e){const o=[];return n.forEach(a=>{if(a.isText){const s=a.text;let l=0,c;for(;c=HTTP_LINK_REGEX.exec(s);){const d=c.index,u=d+c[0].length,f=a.type.schema.marks.link;d>0&&o.push(a.cut(l,d));const v=s.slice(d,u),b=f.create({href:v});o.push(a.cut(d,u).mark(b.addToSet(a.marks))),e.push(v),l=u}l<s.length&&o.push(a.cut(l))}else o.push(a.copy(linkify(a.content,e)))}),Fragment.fromArray(o)},contentNodesToPmNode=n=>[BLOCK_CONTENT_TYPES.TEXT,{type:"doc",content:n.map(e=>e.toJSON())}],plainTextToPmNode=(n,e)=>{let o;if(n.length===0)o=Fragment.empty;else{const a=e.text(n);o=linkify(Fragment.from(a),[])}return e.nodes.doc.create({},o)},plainTextToTextContent=(n,e)=>{let o;if(n.length===0)o=Fragment.empty;else{const s=e.text(n);o=linkify(Fragment.from(s),[])}const a=e.nodes.doc.create({},o);return[BLOCK_CONTENT_TYPES.TEXT,a.toJSON()]},blockRefToTextContent=n=>[BLOCK_CONTENT_TYPES.TEXT,{type:"doc",content:[{type:"blockRef_v2",attrs:{toBlockId:n,tag:!1}}]}];var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dayjs_min={exports:{}};(function(n,e){(function(o,a){n.exports=a()})(commonjsGlobal,function(){var o=1e3,a=6e4,s=36e5,l="millisecond",c="second",d="minute",u="hour",f="day",v="week",b="month",k="quarter",x="year",_="date",E="Invalid Date",B=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,V={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(le){var pe=["th","st","nd","rd"],ue=le%100;return"["+le+(pe[(ue-20)%10]||pe[ue]||pe[0])+"]"}},F=function(le,pe,ue){var Ne=String(le);return!Ne||Ne.length>=pe?le:""+Array(pe+1-Ne.length).join(ue)+le},I={s:F,z:function(le){var pe=-le.utcOffset(),ue=Math.abs(pe),Ne=Math.floor(ue/60),Ve=ue%60;return(pe<=0?"+":"-")+F(Ne,2,"0")+":"+F(Ve,2,"0")},m:function le(pe,ue){if(pe.date()<ue.date())return-le(ue,pe);var Ne=12*(ue.year()-pe.year())+(ue.month()-pe.month()),Ve=pe.clone().add(Ne,b),Ze=ue-Ve<0,We=pe.clone().add(Ne+(Ze?-1:1),b);return+(-(Ne+(ue-Ve)/(Ze?Ve-We:We-Ve))||0)},a:function(le){return le<0?Math.ceil(le)||0:Math.floor(le)},p:function(le){return{M:b,y:x,w:v,d:f,D:_,h:u,m:d,s:c,ms:l,Q:k}[le]||String(le||"").toLowerCase().replace(/s$/,"")},u:function(le){return le===void 0}},L="en",U={};U[L]=V;var Z="$isDayjsObject",K=function(le){return le instanceof G||!(!le||!le[Z])},j=function le(pe,ue,Ne){var Ve;if(!pe)return L;if(typeof pe=="string"){var Ze=pe.toLowerCase();U[Ze]&&(Ve=Ze),ue&&(U[Ze]=ue,Ve=Ze);var We=pe.split("-");if(!Ve&&We.length>1)return le(We[0])}else{var ze=pe.name;U[ze]=pe,Ve=ze}return!Ne&&Ve&&(L=Ve),Ve||!Ne&&L},W=function(le,pe){if(K(le))return le.clone();var ue=typeof pe=="object"?pe:{};return ue.date=le,ue.args=arguments,new G(ue)},Y=I;Y.l=j,Y.i=K,Y.w=function(le,pe){return W(le,{locale:pe.$L,utc:pe.$u,x:pe.$x,$offset:pe.$offset})};var G=function(){function le(ue){this.$L=j(ue.locale,null,!0),this.parse(ue),this.$x=this.$x||ue.x||{},this[Z]=!0}var pe=le.prototype;return pe.parse=function(ue){this.$d=function(Ne){var Ve=Ne.date,Ze=Ne.utc;if(Ve===null)return new Date(NaN);if(Y.u(Ve))return new Date;if(Ve instanceof Date)return new Date(Ve);if(typeof Ve=="string"&&!/Z$/i.test(Ve)){var We=Ve.match(B);if(We){var ze=We[2]-1||0,qe=(We[7]||"0").substring(0,3);return Ze?new Date(Date.UTC(We[1],ze,We[3]||1,We[4]||0,We[5]||0,We[6]||0,qe)):new Date(We[1],ze,We[3]||1,We[4]||0,We[5]||0,We[6]||0,qe)}}return new Date(Ve)}(ue),this.init()},pe.init=function(){var ue=this.$d;this.$y=ue.getFullYear(),this.$M=ue.getMonth(),this.$D=ue.getDate(),this.$W=ue.getDay(),this.$H=ue.getHours(),this.$m=ue.getMinutes(),this.$s=ue.getSeconds(),this.$ms=ue.getMilliseconds()},pe.$utils=function(){return Y},pe.isValid=function(){return this.$d.toString()!==E},pe.isSame=function(ue,Ne){var Ve=W(ue);return this.startOf(Ne)<=Ve&&Ve<=this.endOf(Ne)},pe.isAfter=function(ue,Ne){return W(ue)<this.startOf(Ne)},pe.isBefore=function(ue,Ne){return this.endOf(Ne)<W(ue)},pe.$g=function(ue,Ne,Ve){return Y.u(ue)?this[Ne]:this.set(Ve,ue)},pe.unix=function(){return Math.floor(this.valueOf()/1e3)},pe.valueOf=function(){return this.$d.getTime()},pe.startOf=function(ue,Ne){var Ve=this,Ze=!!Y.u(Ne)||Ne,We=Y.p(ue),ze=function(we,ce){var ee=Y.w(Ve.$u?Date.UTC(Ve.$y,ce,we):new Date(Ve.$y,ce,we),Ve);return Ze?ee:ee.endOf(f)},qe=function(we,ce){return Y.w(Ve.toDate()[we].apply(Ve.toDate("s"),(Ze?[0,0,0,0]:[23,59,59,999]).slice(ce)),Ve)},dt=this.$W,Xe=this.$M,Ge=this.$D,ft="set"+(this.$u?"UTC":"");switch(We){case x:return Ze?ze(1,0):ze(31,11);case b:return Ze?ze(1,Xe):ze(0,Xe+1);case v:var Te=this.$locale().weekStart||0,Ce=(dt<Te?dt+7:dt)-Te;return ze(Ze?Ge-Ce:Ge+(6-Ce),Xe);case f:case _:return qe(ft+"Hours",0);case u:return qe(ft+"Minutes",1);case d:return qe(ft+"Seconds",2);case c:return qe(ft+"Milliseconds",3);default:return this.clone()}},pe.endOf=function(ue){return this.startOf(ue,!1)},pe.$set=function(ue,Ne){var Ve,Ze=Y.p(ue),We="set"+(this.$u?"UTC":""),ze=(Ve={},Ve[f]=We+"Date",Ve[_]=We+"Date",Ve[b]=We+"Month",Ve[x]=We+"FullYear",Ve[u]=We+"Hours",Ve[d]=We+"Minutes",Ve[c]=We+"Seconds",Ve[l]=We+"Milliseconds",Ve)[Ze],qe=Ze===f?this.$D+(Ne-this.$W):Ne;if(Ze===b||Ze===x){var dt=this.clone().set(_,1);dt.$d[ze](qe),dt.init(),this.$d=dt.set(_,Math.min(this.$D,dt.daysInMonth())).$d}else ze&&this.$d[ze](qe);return this.init(),this},pe.set=function(ue,Ne){return this.clone().$set(ue,Ne)},pe.get=function(ue){return this[Y.p(ue)]()},pe.add=function(ue,Ne){var Ve,Ze=this;ue=Number(ue);var We=Y.p(Ne),ze=function(Xe){var Ge=W(Ze);return Y.w(Ge.date(Ge.date()+Math.round(Xe*ue)),Ze)};if(We===b)return this.set(b,this.$M+ue);if(We===x)return this.set(x,this.$y+ue);if(We===f)return ze(1);if(We===v)return ze(7);var qe=(Ve={},Ve[d]=a,Ve[u]=s,Ve[c]=o,Ve)[We]||1,dt=this.$d.getTime()+ue*qe;return Y.w(dt,this)},pe.subtract=function(ue,Ne){return this.add(-1*ue,Ne)},pe.format=function(ue){var Ne=this,Ve=this.$locale();if(!this.isValid())return Ve.invalidDate||E;var Ze=ue||"YYYY-MM-DDTHH:mm:ssZ",We=Y.z(this),ze=this.$H,qe=this.$m,dt=this.$M,Xe=Ve.weekdays,Ge=Ve.months,ft=Ve.meridiem,Te=function(ce,ee,oe,se){return ce&&(ce[ee]||ce(Ne,Ze))||oe[ee].slice(0,se)},Ce=function(ce){return Y.s(ze%12||12,ce,"0")},we=ft||function(ce,ee,oe){var se=ce<12?"AM":"PM";return oe?se.toLowerCase():se};return Ze.replace(M,function(ce,ee){return ee||function(oe){switch(oe){case"YY":return String(Ne.$y).slice(-2);case"YYYY":return Y.s(Ne.$y,4,"0");case"M":return dt+1;case"MM":return Y.s(dt+1,2,"0");case"MMM":return Te(Ve.monthsShort,dt,Ge,3);case"MMMM":return Te(Ge,dt);case"D":return Ne.$D;case"DD":return Y.s(Ne.$D,2,"0");case"d":return String(Ne.$W);case"dd":return Te(Ve.weekdaysMin,Ne.$W,Xe,2);case"ddd":return Te(Ve.weekdaysShort,Ne.$W,Xe,3);case"dddd":return Xe[Ne.$W];case"H":return String(ze);case"HH":return Y.s(ze,2,"0");case"h":return Ce(1);case"hh":return Ce(2);case"a":return we(ze,qe,!0);case"A":return we(ze,qe,!1);case"m":return String(qe);case"mm":return Y.s(qe,2,"0");case"s":return String(Ne.$s);case"ss":return Y.s(Ne.$s,2,"0");case"SSS":return Y.s(Ne.$ms,3,"0");case"Z":return We}return null}(ce)||We.replace(":","")})},pe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},pe.diff=function(ue,Ne,Ve){var Ze,We=this,ze=Y.p(Ne),qe=W(ue),dt=(qe.utcOffset()-this.utcOffset())*a,Xe=this-qe,Ge=function(){return Y.m(We,qe)};switch(ze){case x:Ze=Ge()/12;break;case b:Ze=Ge();break;case k:Ze=Ge()/3;break;case v:Ze=(Xe-dt)/6048e5;break;case f:Ze=(Xe-dt)/864e5;break;case u:Ze=Xe/s;break;case d:Ze=Xe/a;break;case c:Ze=Xe/o;break;default:Ze=Xe}return Ve?Ze:Y.a(Ze)},pe.daysInMonth=function(){return this.endOf(b).$D},pe.$locale=function(){return U[this.$L]},pe.locale=function(ue,Ne){if(!ue)return this.$L;var Ve=this.clone(),Ze=j(ue,Ne,!0);return Ze&&(Ve.$L=Ze),Ve},pe.clone=function(){return Y.w(this.$d,this)},pe.toDate=function(){return new Date(this.valueOf())},pe.toJSON=function(){return this.isValid()?this.toISOString():null},pe.toISOString=function(){return this.$d.toISOString()},pe.toString=function(){return this.$d.toUTCString()},le}(),fe=G.prototype;return W.prototype=fe,[["$ms",l],["$s",c],["$m",d],["$H",u],["$W",f],["$M",b],["$y",x],["$D",_]].forEach(function(le){fe[le[1]]=function(pe){return this.$g(pe,le[0],le[1])}}),W.extend=function(le,pe){return le.$i||(le(pe,G,W),le.$i=!0),W},W.locale=j,W.isDayjs=K,W.unix=function(le){return W(1e3*le)},W.en=U[L],W.Ls=U,W.p={},W})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports),urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let nanoid=(n=21)=>{let e="",o=crypto.getRandomValues(new Uint8Array(n|=0));for(;n--;)e+=urlAlphabet[o[n]&63];return e};function useBlockTransaction(n){const{mainRootBlockId:e,lastFocusedBlockTree:o,lastFocusedDiId:a,blocks:s,latestBlockInfos:l,latestBlockDatas:c,yjsLayer:d,getBlockRef:u,getCtext:f,getMtext:v,getOlinks:b}=n,k=useEventBus(),x=I=>{const L={origin:I,patches:[],reversePatches:[],meta:{isUndoRedo:!1,autoAddUndoPoint:!0,canUndo:!0,envUndoStrategy:"beforeCommit"},envInfo:{onCreate:_(),beforeCommit:null,afterCommit:null},addBlock:U=>(L.patches.push({op:"add",block:U}),L.reversePatches.push({op:"delete",blockId:U.id}),L),updateBlock:U=>{var K;const Z=(K=s.get(U.id))==null?void 0:K.value;if(!Z)throw new Error(`Cannot find old block ${U.id}, maybe you should add it first?`);return L.patches.push({op:"update",block:U}),L.reversePatches.push({op:"update",block:B(Z)}),L},deleteBlock:U=>{var K;const Z=(K=s.get(U))==null?void 0:K.value;if(!Z)throw new Error(`Cannot find old block ${U}, maybe you should add it first?`);return L.patches.push({op:"delete",blockId:U}),L.reversePatches.push({op:"add",block:B(Z)}),L},commit:()=>{L.envInfo.beforeCommit=_(),E(L),L.envInfo.afterCommit=_()},setMeta:(U,Z)=>(L.meta[U]=Z,L),addTransaction:U=>(L.patches.push(...U.patches),L.reversePatches.push(...U.reversePatches),L),addReverseTransaction:U=>(L.patches.push(...U.reversePatches),L.reversePatches.push(...U.patches),L),getLatestBlock:(U,Z=!0)=>{var j;for(let W=L.patches.length-1;W>=0;W--){const Y=L.patches[W];if(Y.op==="update"&&Y.block.id===U)return Z?cloneMinimalBlock(Y.block):Y.block}const K=(j=s.get(U))==null?void 0:j.value;return K?Z?cloneMinimalBlock(B(K)):B(K):null}};return L},_=()=>{var Z,K,j;const I=((Z=o.value)==null?void 0:Z.getId())??null,L=a.value??null,U=((j=L?(K=o.value)==null?void 0:K.getEditorView(L):null)==null?void 0:j.state.selection.toJSON())??null;return{rootBlockId:e.value,focusedTreeId:I,focusedItemId:L,selection:U}},E=I=>{const{origin:L,patches:U}=I;console.debug("Committing transaction",I);const Z=L.type==="ui"?d.createSyncLayerTransaction(L):void 0;for(const K of U){const{op:j}=K;if(j=="add"||j=="update"){const W=K.block,Y=Object.assign({origin:L},M(W));Y&&V(Y.id,Y,Z)}else if(j=="delete"){const{blockId:W}=K;F(W,Z)}}Z==null||Z.commit(),k.emit("afterBlocksTrCommit",[I])},B=I=>{if(I.type=="normalBlock")return{type:"normalBlock",id:I.id,fold:I.fold,parentId:I.parentId,childrenIds:I.childrenIds,content:I.content,metadata:I.metadata};if(I.type=="mirrorBlock")return{type:I.type,id:I.id,fold:I.fold,parentId:I.parentId,childrenIds:I.childrenIds,src:I.src};if(I.type=="virtualBlock")return{type:I.type,id:I.id,fold:I.fold,parentId:I.parentId,childrenIds:I.childrenIds,src:I.src,childrenCreated:I.childrenCreated};throw new Error("Invalid block type")},M=I=>{if(I.type=="normalBlock")return{type:"normalBlock",id:I.id,parentId:I.parentId,parentRef:u(I.parentId),childrenIds:I.childrenIds,childrenRefs:I.childrenIds.map(L=>u(L)),fold:I.fold,deleted:!1,content:I.content,ctext:f(I.content),metadata:I.metadata,mtext:v(I.metadata),olinks:I.content[0]===BLOCK_CONTENT_TYPES.TEXT?b(I.content[1]):[],boosting:0,acturalSrc:I.id,docId:0};if(I.type=="mirrorBlock"){const L=u(I.src).value;return L?{type:"mirrorBlock",id:I.id,parentId:I.parentId,parentRef:u(I.parentId),childrenIds:I.childrenIds,childrenRefs:I.childrenIds.map(U=>u(U)),fold:I.fold,deleted:!1,content:I.content??L.content,ctext:f(I.content),metadata:I.metadata??L.metadata,mtext:v(I.metadata),olinks:I.content[0]===BLOCK_CONTENT_TYPES.TEXT?b(I.content[1]):[],boosting:I.boosting??L.boosting,acturalSrc:I.acturalSrc??L.acturalSrc,src:I.src}:(console.error(`mirror block ${I.id} \u7684\u6E90\u5757 ${I.src} \u4E0D\u5B58\u5728`),null)}else if(I.type=="virtualBlock"){const L=u(I.src).value;return L?{type:"virtualBlock",id:I.id,parentId:I.parentId,parentRef:u(I.parentId),childrenIds:I.childrenIds,childrenRefs:I.childrenIds.map(U=>u(U)),fold:I.fold,deleted:!1,content:I.content??L.content,ctext:f(I.content),metadata:I.metadata??L.metadata,mtext:v(I.metadata),olinks:I.content[0]===BLOCK_CONTENT_TYPES.TEXT?b(I.content[1]):[],boosting:I.boosting??L.boosting,acturalSrc:I.acturalSrc??L.acturalSrc,src:I.src,childrenCreated:I.childrenCreated}:(console.error(`virtual block ${I.id} \u7684\u6E90\u5757 ${I.src} \u4E0D\u5B58\u5728`),null)}throw new Error("Invalid block type")},V=(I,L,U)=>{var K;const Z=(K=s.get(I))==null?void 0:K.value;if(s.has(I))s.get(I).value=L;else{const j=shallowRef(L);s.set(I,j)}if(L&&U){l.get(I);const j=[calcBlockStatus(L.type,L.fold),L.parentId,L.childrenIds,"docId"in L?L.docId:null,"src"in L?L.src:null];if(U.upsertBlockInfo(I,j),L.type=="normalBlock"){c.get(I);const W=[L.content,L.metadata];U.upsertBlockData(L.docId,I,W)}(Z==null?void 0:Z.type)=="normalBlock"&&L.type!="normalBlock"&&U.deleteBlockData(Z.docId,I)}},F=(I,L)=>{var Z;const U=(Z=s.get(I))==null?void 0:Z.value;U&&L&&(U.deleted=!0,s.delete(I),L.deleteBlockInfo(I),U.type=="normalBlock"&&L.deleteBlockData(U.docId,I))};return{createBlockTransaction:x,addBlock:(I,L)=>x(L).addBlock(I).commit(),updateBlock:(I,L)=>x(L).updateBlock(I).commit(),deleteBlock:(I,L)=>x(L).deleteBlock(I).commit()}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(n,e){return n+e*factor16}function recoverIndex(n){return n&lower16}function recoverOffset(n){return(n-(n&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(e,o,a){this.pos=e,this.delInfo=o,this.recover=a}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(e,o=!1){if(this.ranges=e,this.inverted=o,!e.length&&StepMap.empty)return StepMap.empty}recover(e){let o=0,a=recoverIndex(e);if(!this.inverted)for(let s=0;s<a;s++)o+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[a*3]+o+recoverOffset(e)}mapResult(e,o=1){return this._map(e,o,!1)}map(e,o=1){return this._map(e,o,!0)}_map(e,o,a){let s=0,l=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let u=this.ranges[d]-(this.inverted?s:0);if(u>e)break;let f=this.ranges[d+l],v=this.ranges[d+c],b=u+f;if(e<=b){let k=f?e==u?-1:e==b?1:o:o,x=u+s+(k<0?0:v);if(a)return x;let _=e==(o<0?u:b)?null:makeRecover(d/3,e-u),E=e==u?DEL_AFTER:e==b?DEL_BEFORE:DEL_ACROSS;return(o<0?e!=u:e!=b)&&(E|=DEL_SIDE),new MapResult(x,E,_)}s+=v-f}return a?e+s:new MapResult(e+s,0,null)}touches(e,o){let a=0,s=recoverIndex(o),l=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let u=this.ranges[d]-(this.inverted?a:0);if(u>e)break;let f=this.ranges[d+l],v=u+f;if(e<=v&&d==s*3)return!0;a+=this.ranges[d+c]-f}return!1}forEach(e){let o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0,l=0;s<this.ranges.length;s+=3){let c=this.ranges[s],d=c-(this.inverted?l:0),u=c+(this.inverted?0:l),f=this.ranges[s+o],v=this.ranges[s+a];e(d,d+f,u,u+v),l+=v-f}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?StepMap.empty:new StepMap(e<0?[0,-e,0]:[0,0,e])}}StepMap.empty=new StepMap([]);class Mapping{constructor(e=[],o,a=0,s=e.length){this.maps=e,this.mirror=o,this.from=a,this.to=s}slice(e=0,o=this.maps.length){return new Mapping(this.maps,this.mirror,e,o)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,o){this.to=this.maps.push(e),o!=null&&this.setMirror(this.maps.length-1,o)}appendMapping(e){for(let o=0,a=this.maps.length;o<e.maps.length;o++){let s=e.getMirror(o);this.appendMap(e.maps[o],s!=null&&s<o?a+s:void 0)}}getMirror(e){if(this.mirror){for(let o=0;o<this.mirror.length;o++)if(this.mirror[o]==e)return this.mirror[o+(o%2?-1:1)]}}setMirror(e,o){this.mirror||(this.mirror=[]),this.mirror.push(e,o)}appendMappingInverted(e){for(let o=e.maps.length-1,a=this.maps.length+e.maps.length;o>=0;o--){let s=e.getMirror(o);this.appendMap(e.maps[o].invert(),s!=null&&s>o?a-s-1:void 0)}}invert(){let e=new Mapping;return e.appendMappingInverted(this),e}map(e,o=1){if(this.mirror)return this._map(e,o,!0);for(let a=this.from;a<this.to;a++)e=this.maps[a].map(e,o);return e}mapResult(e,o=1){return this._map(e,o,!1)}_map(e,o,a){let s=0;for(let l=this.from;l<this.to;l++){let c=this.maps[l],d=c.mapResult(e,o);if(d.recover!=null){let u=this.getMirror(l);if(u!=null&&u>l&&u<this.to){l=u,e=this.maps[u].recover(d.recover);continue}}s|=d.delInfo,e=d.pos}return a?e:new MapResult(e,s,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(e){return null}static fromJSON(e,o){if(!o||!o.stepType)throw new RangeError("Invalid input for Step.fromJSON");let a=stepsByID[o.stepType];if(!a)throw new RangeError(`No step type ${o.stepType} defined`);return a.fromJSON(e,o)}static jsonID(e,o){if(e in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+e);return stepsByID[e]=o,o.prototype.jsonID=e,o}}class StepResult{constructor(e,o){this.doc=e,this.failed=o}static ok(e){return new StepResult(e,null)}static fail(e){return new StepResult(null,e)}static fromReplace(e,o,a,s){try{return StepResult.ok(e.replace(o,a,s))}catch(l){if(l instanceof ReplaceError)return StepResult.fail(l.message);throw l}}}function mapFragment(n,e,o){let a=[];for(let s=0;s<n.childCount;s++){let l=n.child(s);l.content.size&&(l=l.copy(mapFragment(l.content,e,l))),l.isInline&&(l=e(l,o,s)),a.push(l)}return Fragment.fromArray(a)}class AddMarkStep extends Step{constructor(e,o,a){super(),this.from=e,this.to=o,this.mark=a}apply(e){let o=e.slice(this.from,this.to),a=e.resolve(this.from),s=a.node(a.sharedDepth(this.to)),l=new Slice(mapFragment(o.content,(c,d)=>!c.isAtom||!d.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),s),o.openStart,o.openEnd);return StepResult.fromReplace(e,this.from,this.to,l)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(e){let o=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return o.deleted&&a.deleted||o.pos>=a.pos?null:new AddMarkStep(o.pos,a.pos,this.mark)}merge(e){return e instanceof AddMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new AddMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(o.from,o.to,e.markFromJSON(o.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(e,o,a){super(),this.from=e,this.to=o,this.mark=a}apply(e){let o=e.slice(this.from,this.to),a=new Slice(mapFragment(o.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),o.openStart,o.openEnd);return StepResult.fromReplace(e,this.from,this.to,a)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(e){let o=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return o.deleted&&a.deleted||o.pos>=a.pos?null:new RemoveMarkStep(o.pos,a.pos,this.mark)}merge(e){return e instanceof RemoveMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new RemoveMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(o.from,o.to,e.markFromJSON(o.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(e,o){super(),this.pos=e,this.mark=o}apply(e){let o=e.nodeAt(this.pos);if(!o)return StepResult.fail("No node at mark step's position");let a=o.type.create(o.attrs,null,this.mark.addToSet(o.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(a),0,o.isLeaf?0:1))}invert(e){let o=e.nodeAt(this.pos);if(o){let a=this.mark.addToSet(o.marks);if(a.length==o.marks.length){for(let s=0;s<o.marks.length;s++)if(!o.marks[s].isInSet(a))return new AddNodeMarkStep(this.pos,o.marks[s]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(e){let o=e.mapResult(this.pos,1);return o.deletedAfter?null:new AddNodeMarkStep(o.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,o){if(typeof o.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(o.pos,e.markFromJSON(o.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(e,o){super(),this.pos=e,this.mark=o}apply(e){let o=e.nodeAt(this.pos);if(!o)return StepResult.fail("No node at mark step's position");let a=o.type.create(o.attrs,null,this.mark.removeFromSet(o.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(a),0,o.isLeaf?0:1))}invert(e){let o=e.nodeAt(this.pos);return!o||!this.mark.isInSet(o.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(e){let o=e.mapResult(this.pos,1);return o.deletedAfter?null:new RemoveNodeMarkStep(o.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,o){if(typeof o.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(o.pos,e.markFromJSON(o.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(e,o,a,s=!1){super(),this.from=e,this.to=o,this.slice=a,this.structure=s}apply(e){return this.structure&&contentBetween(e,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(e){return new ReplaceStep(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let o=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return o.deletedAcross&&a.deletedAcross?null:new ReplaceStep(o.pos,Math.max(o.pos,a.pos),this.slice)}merge(e){if(!(e instanceof ReplaceStep)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let o=this.slice.size+e.slice.size==0?Slice.empty:new Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ReplaceStep(this.from,this.to+(e.to-e.from),o,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let o=this.slice.size+e.slice.size==0?Slice.empty:new Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ReplaceStep(e.from,this.to,o,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(o.from,o.to,Slice.fromJSON(e,o.slice),!!o.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(e,o,a,s,l,c,d=!1){super(),this.from=e,this.to=o,this.gapFrom=a,this.gapTo=s,this.slice=l,this.insert=c,this.structure=d}apply(e){if(this.structure&&(contentBetween(e,this.from,this.gapFrom)||contentBetween(e,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let o=e.slice(this.gapFrom,this.gapTo);if(o.openStart||o.openEnd)return StepResult.fail("Gap is not a flat range");let a=this.slice.insertAt(this.insert,o.content);return a?StepResult.fromReplace(e,this.from,this.to,a):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let o=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+o,this.from+this.insert,this.from+this.insert+o,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let o=e.mapResult(this.from,1),a=e.mapResult(this.to,-1),s=this.from==this.gapFrom?o.pos:e.map(this.gapFrom,-1),l=this.to==this.gapTo?a.pos:e.map(this.gapTo,1);return o.deletedAcross&&a.deletedAcross||s<o.pos||l>a.pos?null:new ReplaceAroundStep(o.pos,a.pos,s,l,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,o){if(typeof o.from!="number"||typeof o.to!="number"||typeof o.gapFrom!="number"||typeof o.gapTo!="number"||typeof o.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(o.from,o.to,o.gapFrom,o.gapTo,Slice.fromJSON(e,o.slice),o.insert,!!o.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(n,e,o){let a=n.resolve(e),s=o-e,l=a.depth;for(;s>0&&l>0&&a.indexAfter(l)==a.node(l).childCount;)l--,s--;if(s>0){let c=a.node(l).maybeChild(a.indexAfter(l));for(;s>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,s--}}return!1}function addMark(n,e,o,a){let s=[],l=[],c,d;n.doc.nodesBetween(e,o,(u,f,v)=>{if(!u.isInline)return;let b=u.marks;if(!a.isInSet(b)&&v.type.allowsMarkType(a.type)){let k=Math.max(f,e),x=Math.min(f+u.nodeSize,o),_=a.addToSet(b);for(let E=0;E<b.length;E++)b[E].isInSet(_)||(c&&c.to==k&&c.mark.eq(b[E])?c.to=x:s.push(c=new RemoveMarkStep(k,x,b[E])));d&&d.to==k?d.to=x:l.push(d=new AddMarkStep(k,x,a))}}),s.forEach(u=>n.step(u)),l.forEach(u=>n.step(u))}function removeMark(n,e,o,a){let s=[],l=0;n.doc.nodesBetween(e,o,(c,d)=>{if(!c.isInline)return;l++;let u=null;if(a instanceof MarkType){let f=c.marks,v;for(;v=a.isInSet(f);)(u||(u=[])).push(v),f=v.removeFromSet(f)}else a?a.isInSet(c.marks)&&(u=[a]):u=c.marks;if(u&&u.length){let f=Math.min(d+c.nodeSize,o);for(let v=0;v<u.length;v++){let b=u[v],k;for(let x=0;x<s.length;x++){let _=s[x];_.step==l-1&&b.eq(s[x].style)&&(k=_)}k?(k.to=f,k.step=l):s.push({style:b,from:Math.max(d,e),to:f,step:l})}}}),s.forEach(c=>n.step(new RemoveMarkStep(c.from,c.to,c.style)))}function clearIncompatible(n,e,o,a=o.contentMatch,s=!0){let l=n.doc.nodeAt(e),c=[],d=e+1;for(let u=0;u<l.childCount;u++){let f=l.child(u),v=d+f.nodeSize,b=a.matchType(f.type);if(!b)c.push(new ReplaceStep(d,v,Slice.empty));else{a=b;for(let k=0;k<f.marks.length;k++)o.allowsMarkType(f.marks[k].type)||n.step(new RemoveMarkStep(d,v,f.marks[k]));if(s&&f.isText&&o.whitespace!="pre"){let k,x=/\r?\n|\r/g,_;for(;k=x.exec(f.text);)_||(_=new Slice(Fragment.from(o.schema.text(" ",o.allowedMarks(f.marks))),0,0)),c.push(new ReplaceStep(d+k.index,d+k.index+k[0].length,_))}}d=v}if(!a.validEnd){let u=a.fillBefore(Fragment.empty,!0);n.replace(d,d,new Slice(u,0,0))}for(let u=c.length-1;u>=0;u--)n.step(c[u])}function lift(n,e,o){let{$from:a,$to:s,depth:l}=e,c=a.before(l+1),d=s.after(l+1),u=c,f=d,v=Fragment.empty,b=0;for(let _=l,E=!1;_>o;_--)E||a.index(_)>0?(E=!0,v=Fragment.from(a.node(_).copy(v)),b++):u--;let k=Fragment.empty,x=0;for(let _=l,E=!1;_>o;_--)E||s.after(_+1)<s.end(_)?(E=!0,k=Fragment.from(s.node(_).copy(k)),x++):f++;n.step(new ReplaceAroundStep(u,f,c,d,new Slice(v.append(k),b,x),v.size-b,!0))}function wrap(n,e,o){let a=Fragment.empty;for(let c=o.length-1;c>=0;c--){if(a.size){let d=o[c].type.contentMatch.matchFragment(a);if(!d||!d.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}a=Fragment.from(o[c].type.create(o[c].attrs,a))}let s=e.start,l=e.end;n.step(new ReplaceAroundStep(s,l,s,l,new Slice(a,0,0),o.length,!0))}function setBlockType(n,e,o,a,s){if(!a.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let l=n.steps.length;n.doc.nodesBetween(e,o,(c,d)=>{let u=typeof s=="function"?s(c):s;if(c.isTextblock&&!c.hasMarkup(a,u)&&canChangeType(n.doc,n.mapping.slice(l).map(d),a)){let f=null;if(a.schema.linebreakReplacement){let x=a.whitespace=="pre",_=!!a.contentMatch.matchType(a.schema.linebreakReplacement);x&&!_?f=!1:!x&&_&&(f=!0)}f===!1&&replaceLinebreaks(n,c,d,l),clearIncompatible(n,n.mapping.slice(l).map(d,1),a,void 0,f===null);let v=n.mapping.slice(l),b=v.map(d,1),k=v.map(d+c.nodeSize,1);return n.step(new ReplaceAroundStep(b,k,b+1,k-1,new Slice(Fragment.from(a.create(u,null,c.marks)),0,0),1,!0)),f===!0&&replaceNewlines(n,c,d,l),!1}})}function replaceNewlines(n,e,o,a){e.forEach((s,l)=>{if(s.isText){let c,d=/\r?\n|\r/g;for(;c=d.exec(s.text);){let u=n.mapping.slice(a).map(o+1+l+c.index);n.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(n,e,o,a){e.forEach((s,l)=>{if(s.type==s.type.schema.linebreakReplacement){let c=n.mapping.slice(a).map(o+1+l);n.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function canChangeType(n,e,o){let a=n.resolve(e),s=a.index();return a.parent.canReplaceWith(s,s+1,o)}function setNodeMarkup(n,e,o,a,s){let l=n.doc.nodeAt(e);if(!l)throw new RangeError("No node at given position");o||(o=l.type);let c=o.create(a,null,s||l.marks);if(l.isLeaf)return n.replaceWith(e,e+l.nodeSize,c);if(!o.validContent(l.content))throw new RangeError("Invalid content for node type "+o.name);n.step(new ReplaceAroundStep(e,e+l.nodeSize,e+1,e+l.nodeSize-1,new Slice(Fragment.from(c),0,0),1,!0))}function split(n,e,o=1,a){let s=n.doc.resolve(e),l=Fragment.empty,c=Fragment.empty;for(let d=s.depth,u=s.depth-o,f=o-1;d>u;d--,f--){l=Fragment.from(s.node(d).copy(l));let v=a&&a[f];c=Fragment.from(v?v.type.create(v.attrs,c):s.node(d).copy(c))}n.step(new ReplaceStep(e,e,new Slice(l.append(c),o,o),!0))}function join(n,e,o){let a=null,{linebreakReplacement:s}=n.doc.type.schema,l=n.doc.resolve(e-o),c=l.node().type;if(s&&c.inlineContent){let v=c.whitespace=="pre",b=!!c.contentMatch.matchType(s);v&&!b?a=!1:!v&&b&&(a=!0)}let d=n.steps.length;if(a===!1){let v=n.doc.resolve(e+o);replaceLinebreaks(n,v.node(),v.before(),d)}c.inlineContent&&clearIncompatible(n,e+o-1,c,l.node().contentMatchAt(l.index()),a==null);let u=n.mapping.slice(d),f=u.map(e-o);if(n.step(new ReplaceStep(f,u.map(e+o,-1),Slice.empty,!0)),a===!0){let v=n.doc.resolve(f);replaceNewlines(n,v.node(),v.before(),n.steps.length)}return n}function insertPoint(n,e,o){let a=n.resolve(e);if(a.parent.canReplaceWith(a.index(),a.index(),o))return e;if(a.parentOffset==0)for(let s=a.depth-1;s>=0;s--){let l=a.index(s);if(a.node(s).canReplaceWith(l,l,o))return a.before(s+1);if(l>0)return null}if(a.parentOffset==a.parent.content.size)for(let s=a.depth-1;s>=0;s--){let l=a.indexAfter(s);if(a.node(s).canReplaceWith(l,l,o))return a.after(s+1);if(l<a.node(s).childCount)return null}return null}function dropPoint(n,e,o){let a=n.resolve(e);if(!o.content.size)return e;let s=o.content;for(let l=0;l<o.openStart;l++)s=s.firstChild.content;for(let l=1;l<=(o.openStart==0&&o.size?2:1);l++)for(let c=a.depth;c>=0;c--){let d=c==a.depth?0:a.pos<=(a.start(c+1)+a.end(c+1))/2?-1:1,u=a.index(c)+(d>0?1:0),f=a.node(c),v=!1;if(l==1)v=f.canReplace(u,u,s);else{let b=f.contentMatchAt(u).findWrapping(s.firstChild.type);v=b&&f.canReplaceWith(u,u,b[0])}if(v)return d==0?a.pos:d<0?a.before(c+1):a.after(c+1)}return null}function replaceStep(n,e,o=e,a=Slice.empty){if(e==o&&!a.size)return null;let s=n.resolve(e),l=n.resolve(o);return fitsTrivially(s,l,a)?new ReplaceStep(e,o,a):new Fitter(s,l,a).fit()}function fitsTrivially(n,e,o){return!o.openStart&&!o.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),o.content)}class Fitter{constructor(e,o,a){this.$from=e,this.$to=o,this.unplaced=a,this.frontier=[],this.placed=Fragment.empty;for(let s=0;s<=e.depth;s++){let l=e.node(s);this.frontier.push({type:l.type,match:l.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Fragment.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),o=this.placed.size-this.depth-this.$from.depth,a=this.$from,s=this.close(e<0?this.$to:a.doc.resolve(e));if(!s)return null;let l=this.placed,c=a.depth,d=s.depth;for(;c&&d&&l.childCount==1;)l=l.firstChild.content,c--,d--;let u=new Slice(l,c,d);return e>-1?new ReplaceAroundStep(a.pos,e,this.$to.pos,this.$to.end(),u,o):u.size||a.pos!=this.$to.pos?new ReplaceStep(a.pos,s.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let o=this.unplaced.content,a=0,s=this.unplaced.openEnd;a<e;a++){let l=o.firstChild;if(o.childCount>1&&(s=0),l.type.spec.isolating&&s<=a){e=a;break}o=l.content}for(let o=1;o<=2;o++)for(let a=o==1?e:this.unplaced.openStart;a>=0;a--){let s,l=null;a?(l=contentAt(this.unplaced.content,a-1).firstChild,s=l.content):s=this.unplaced.content;let c=s.firstChild;for(let d=this.depth;d>=0;d--){let{type:u,match:f}=this.frontier[d],v,b=null;if(o==1&&(c?f.matchType(c.type)||(b=f.fillBefore(Fragment.from(c),!1)):l&&u.compatibleContent(l.type)))return{sliceDepth:a,frontierDepth:d,parent:l,inject:b};if(o==2&&c&&(v=f.findWrapping(c.type)))return{sliceDepth:a,frontierDepth:d,parent:l,wrap:v};if(l&&f.matchType(l.type))break}}}openMore(){let{content:e,openStart:o,openEnd:a}=this.unplaced,s=contentAt(e,o);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Slice(e,o+1,Math.max(a,s.size+o>=e.size-a?o+1:0)),!0)}dropNode(){let{content:e,openStart:o,openEnd:a}=this.unplaced,s=contentAt(e,o);if(s.childCount<=1&&o>0){let l=e.size-o<=o+s.size;this.unplaced=new Slice(dropFromFragment(e,o-1,1),o-1,l?o-1:a)}else this.unplaced=new Slice(dropFromFragment(e,o,1),o,a)}placeNodes({sliceDepth:e,frontierDepth:o,parent:a,inject:s,wrap:l}){for(;this.depth>o;)this.closeFrontierNode();if(l)for(let E=0;E<l.length;E++)this.openFrontierNode(l[E]);let c=this.unplaced,d=a?a.content:c.content,u=c.openStart-e,f=0,v=[],{match:b,type:k}=this.frontier[o];if(s){for(let E=0;E<s.childCount;E++)v.push(s.child(E));b=b.matchFragment(s)}let x=d.size+e-(c.content.size-c.openEnd);for(;f<d.childCount;){let E=d.child(f),B=b.matchType(E.type);if(!B)break;f++,(f>1||u==0||E.content.size)&&(b=B,v.push(closeNodeStart(E.mark(k.allowedMarks(E.marks)),f==1?u:0,f==d.childCount?x:-1)))}let _=f==d.childCount;_||(x=-1),this.placed=addToFragment(this.placed,o,Fragment.from(v)),this.frontier[o].match=b,_&&x<0&&a&&a.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,B=d;E<x;E++){let M=B.lastChild;this.frontier.push({type:M.type,match:M.contentMatchAt(M.childCount)}),B=M.content}this.unplaced=_?e==0?Slice.empty:new Slice(dropFromFragment(c.content,e-1,1),e-1,x<0?c.openEnd:e-1):new Slice(dropFromFragment(c.content,e,f),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],o;if(!e.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(o=this.findCloseLevel(this.$to))&&o.depth==this.depth)return-1;let{depth:a}=this.$to,s=this.$to.after(a);for(;a>1&&s==this.$to.end(--a);)++s;return s}findCloseLevel(e){e:for(let o=Math.min(this.depth,e.depth);o>=0;o--){let{match:a,type:s}=this.frontier[o],l=o<e.depth&&e.end(o+1)==e.pos+(e.depth-(o+1)),c=contentAfterFits(e,o,s,a,l);if(c){for(let d=o-1;d>=0;d--){let{match:u,type:f}=this.frontier[d],v=contentAfterFits(e,d,f,u,!0);if(!v||v.childCount)continue e}return{depth:o,fit:c,move:l?e.doc.resolve(e.after(o+1)):e}}}}close(e){let o=this.findCloseLevel(e);if(!o)return null;for(;this.depth>o.depth;)this.closeFrontierNode();o.fit.childCount&&(this.placed=addToFragment(this.placed,o.depth,o.fit)),e=o.move;for(let a=o.depth+1;a<=e.depth;a++){let s=e.node(a),l=s.type.contentMatch.fillBefore(s.content,!0,e.index(a));this.openFrontierNode(s.type,s.attrs,l)}return e}openFrontierNode(e,o=null,a){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=addToFragment(this.placed,this.depth,Fragment.from(e.create(o,a))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(Fragment.empty,!0);e.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,e))}}function dropFromFragment(n,e,o){return e==0?n.cutByIndex(o,n.childCount):n.replaceChild(0,n.firstChild.copy(dropFromFragment(n.firstChild.content,e-1,o)))}function addToFragment(n,e,o){return e==0?n.append(o):n.replaceChild(n.childCount-1,n.lastChild.copy(addToFragment(n.lastChild.content,e-1,o)))}function contentAt(n,e){for(let o=0;o<e;o++)n=n.firstChild.content;return n}function closeNodeStart(n,e,o){if(e<=0)return n;let a=n.content;return e>1&&(a=a.replaceChild(0,closeNodeStart(a.firstChild,e-1,a.childCount==1?o-1:0))),e>0&&(a=n.type.contentMatch.fillBefore(a).append(a),o<=0&&(a=a.append(n.type.contentMatch.matchFragment(a).fillBefore(Fragment.empty,!0)))),n.copy(a)}function contentAfterFits(n,e,o,a,s){let l=n.node(e),c=s?n.indexAfter(e):n.index(e);if(c==l.childCount&&!o.compatibleContent(l.type))return null;let d=a.fillBefore(l.content,!0,c);return d&&!invalidMarks(o,l.content,c)?d:null}function invalidMarks(n,e,o){for(let a=o;a<e.childCount;a++)if(!n.allowsMarks(e.child(a).marks))return!0;return!1}function definesContent(n){return n.spec.defining||n.spec.definingForContent}function replaceRange$1(n,e,o,a){if(!a.size)return n.deleteRange(e,o);let s=n.doc.resolve(e),l=n.doc.resolve(o);if(fitsTrivially(s,l,a))return n.step(new ReplaceStep(e,o,a));let c=coveredDepths(s,n.doc.resolve(o));c[c.length-1]==0&&c.pop();let d=-(s.depth+1);c.unshift(d);for(let k=s.depth,x=s.pos-1;k>0;k--,x--){let _=s.node(k).type.spec;if(_.defining||_.definingAsContext||_.isolating)break;c.indexOf(k)>-1?d=k:s.before(k)==x&&c.splice(1,0,-k)}let u=c.indexOf(d),f=[],v=a.openStart;for(let k=a.content,x=0;;x++){let _=k.firstChild;if(f.push(_),x==a.openStart)break;k=_.content}for(let k=v-1;k>=0;k--){let x=f[k],_=definesContent(x.type);if(_&&!x.sameMarkup(s.node(Math.abs(d)-1)))v=k;else if(_||!x.type.isTextblock)break}for(let k=a.openStart;k>=0;k--){let x=(k+v+1)%(a.openStart+1),_=f[x];if(_)for(let E=0;E<c.length;E++){let B=c[(E+u)%c.length],M=!0;B<0&&(M=!1,B=-B);let V=s.node(B-1),F=s.index(B-1);if(V.canReplaceWith(F,F,_.type,_.marks))return n.replace(s.before(B),M?l.after(B):o,new Slice(closeFragment(a.content,0,a.openStart,x),x,a.openEnd))}}let b=n.steps.length;for(let k=c.length-1;k>=0&&(n.replace(e,o,a),!(n.steps.length>b));k--){let x=c[k];x<0||(e=s.before(x),o=l.after(x))}}function closeFragment(n,e,o,a,s){if(e<o){let l=n.firstChild;n=n.replaceChild(0,l.copy(closeFragment(l.content,e+1,o,a,l)))}if(e>a){let l=s.contentMatchAt(0),c=l.fillBefore(n).append(n);n=c.append(l.matchFragment(c).fillBefore(Fragment.empty,!0))}return n}function replaceRangeWith(n,e,o,a){if(!a.isInline&&e==o&&n.doc.resolve(e).parent.content.size){let s=insertPoint(n.doc,e,a.type);s!=null&&(e=o=s)}n.replaceRange(e,o,new Slice(Fragment.from(a),0,0))}function deleteRange(n,e,o){let a=n.doc.resolve(e),s=n.doc.resolve(o),l=coveredDepths(a,s);for(let c=0;c<l.length;c++){let d=l[c],u=c==l.length-1;if(u&&d==0||a.node(d).type.contentMatch.validEnd)return n.delete(a.start(d),s.end(d));if(d>0&&(u||a.node(d-1).canReplace(a.index(d-1),s.indexAfter(d-1))))return n.delete(a.before(d),s.after(d))}for(let c=1;c<=a.depth&&c<=s.depth;c++)if(e-a.start(c)==a.depth-c&&o>a.end(c)&&s.end(c)-o!=s.depth-c&&a.start(c-1)==s.start(c-1)&&a.node(c-1).canReplace(a.index(c-1),s.index(c-1)))return n.delete(a.before(c),o);n.delete(e,o)}function coveredDepths(n,e){let o=[],a=Math.min(n.depth,e.depth);for(let s=a;s>=0;s--){let l=n.start(s);if(l<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(l==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==l-1)&&o.push(s)}return o}class AttrStep extends Step{constructor(e,o,a){super(),this.pos=e,this.attr=o,this.value=a}apply(e){let o=e.nodeAt(this.pos);if(!o)return StepResult.fail("No node at attribute step's position");let a=Object.create(null);for(let l in o.attrs)a[l]=o.attrs[l];a[this.attr]=this.value;let s=o.type.create(a,null,o.marks);return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(s),0,o.isLeaf?0:1))}getMap(){return StepMap.empty}invert(e){return new AttrStep(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let o=e.mapResult(this.pos,1);return o.deletedAfter?null:new AttrStep(o.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,o){if(typeof o.pos!="number"||typeof o.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(o.pos,o.attr,o.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(e,o){super(),this.attr=e,this.value=o}apply(e){let o=Object.create(null);for(let s in e.attrs)o[s]=e.attrs[s];o[this.attr]=this.value;let a=e.type.create(o,e.content,e.marks);return StepResult.ok(a)}getMap(){return StepMap.empty}invert(e){return new DocAttrStep(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,o){if(typeof o.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(o.attr,o.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function n(e){let o=Error.call(this,e);return o.__proto__=n.prototype,o},TransformError.prototype=Object.create(Error.prototype),TransformError.prototype.constructor=TransformError,TransformError.prototype.name="TransformError";class Transform{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let o=this.maybeStep(e);if(o.failed)throw new TransformError(o.failed);return this}maybeStep(e){let o=e.apply(this.doc);return o.failed||this.addStep(e,o.doc),o}get docChanged(){return this.steps.length>0}addStep(e,o){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=o}replace(e,o=e,a=Slice.empty){let s=replaceStep(this.doc,e,o,a);return s&&this.step(s),this}replaceWith(e,o,a){return this.replace(e,o,new Slice(Fragment.from(a),0,0))}delete(e,o){return this.replace(e,o,Slice.empty)}insert(e,o){return this.replaceWith(e,e,o)}replaceRange(e,o,a){return replaceRange$1(this,e,o,a),this}replaceRangeWith(e,o,a){return replaceRangeWith(this,e,o,a),this}deleteRange(e,o){return deleteRange(this,e,o),this}lift(e,o){return lift(this,e,o),this}join(e,o=1){return join(this,e,o),this}wrap(e,o){return wrap(this,e,o),this}setBlockType(e,o=e,a,s=null){return setBlockType(this,e,o,a,s),this}setNodeMarkup(e,o,a=null,s){return setNodeMarkup(this,e,o,a,s),this}setNodeAttribute(e,o,a){return this.step(new AttrStep(e,o,a)),this}setDocAttribute(e,o){return this.step(new DocAttrStep(e,o)),this}addNodeMark(e,o){return this.step(new AddNodeMarkStep(e,o)),this}removeNodeMark(e,o){if(!(o instanceof Mark)){let a=this.doc.nodeAt(e);if(!a)throw new RangeError("No node at position "+e);if(o=o.isInSet(a.marks),!o)return this}return this.step(new RemoveNodeMarkStep(e,o)),this}split(e,o=1,a){return split(this,e,o,a),this}addMark(e,o,a){return addMark(this,e,o,a),this}removeMark(e,o,a){return removeMark(this,e,o,a),this}clearIncompatible(e,o,a){return clearIncompatible(this,e,o,a),this}}const classesById=Object.create(null);class Selection{constructor(e,o,a){this.$anchor=e,this.$head=o,this.ranges=a||[new SelectionRange$1(e.min(o),e.max(o))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let o=0;o<e.length;o++)if(e[o].$from.pos!=e[o].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,o=Slice.empty){let a=o.content.lastChild,s=null;for(let d=0;d<o.openEnd;d++)s=a,a=a.lastChild;let l=e.steps.length,c=this.ranges;for(let d=0;d<c.length;d++){let{$from:u,$to:f}=c[d],v=e.mapping.slice(l);e.replaceRange(v.map(u.pos),v.map(f.pos),d?Slice.empty:o),d==0&&selectionToInsertionEnd(e,l,(a?a.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,o){let a=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:c,$to:d}=s[l],u=e.mapping.slice(a),f=u.map(c.pos),v=u.map(d.pos);l?e.deleteRange(f,v):(e.replaceRangeWith(f,v,o),selectionToInsertionEnd(e,a,o.isInline?-1:1))}}static findFrom(e,o,a=!1){let s=e.parent.inlineContent?new TextSelection(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),o,a);if(s)return s;for(let l=e.depth-1;l>=0;l--){let c=o<0?findSelectionIn(e.node(0),e.node(l),e.before(l+1),e.index(l),o,a):findSelectionIn(e.node(0),e.node(l),e.after(l+1),e.index(l)+1,o,a);if(c)return c}return null}static near(e,o=1){return this.findFrom(e,o)||this.findFrom(e,-o)||new AllSelection(e.node(0))}static atStart(e){return findSelectionIn(e,e,0,0,1)||new AllSelection(e)}static atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new AllSelection(e)}static fromJSON(e,o){if(!o||!o.type)throw new RangeError("Invalid input for Selection.fromJSON");let a=classesById[o.type];if(!a)throw new RangeError(`No selection type ${o.type} defined`);return a.fromJSON(e,o)}static jsonID(e,o){if(e in classesById)throw new RangeError("Duplicate use of selection JSON ID "+e);return classesById[e]=o,o.prototype.jsonID=e,o}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;let SelectionRange$1=class{constructor(n,e){this.$from=n,this.$to=e}},warnedAboutTextSelection=!1;function checkTextSelection(n){!warnedAboutTextSelection&&!n.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class TextSelection extends Selection{constructor(e,o=e){checkTextSelection(e),checkTextSelection(o),super(e,o)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,o){let a=e.resolve(o.map(this.head));if(!a.parent.inlineContent)return Selection.near(a);let s=e.resolve(o.map(this.anchor));return new TextSelection(s.parent.inlineContent?s:a,a)}replace(e,o=Slice.empty){if(super.replace(e,o),o==Slice.empty){let a=this.$from.marksAcross(this.$to);a&&e.ensureMarks(a)}}eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,o){if(typeof o.anchor!="number"||typeof o.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(o.anchor),e.resolve(o.head))}static create(e,o,a=o){let s=e.resolve(o);return new this(s,a==o?s:e.resolve(a))}static between(e,o,a){let s=e.pos-o.pos;if((!a||s)&&(a=s>=0?1:-1),!o.parent.inlineContent){let l=Selection.findFrom(o,a,!0)||Selection.findFrom(o,-a,!0);if(l)o=l.$head;else return Selection.near(o,a)}return e.parent.inlineContent||(s==0?e=o:(e=(Selection.findFrom(e,-a,!0)||Selection.findFrom(e,a,!0)).$anchor,e.pos<o.pos!=s<0&&(e=o))),new TextSelection(e,o)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(e,o){this.anchor=e,this.head=o}map(e){return new TextBookmark(e.map(this.anchor),e.map(this.head))}resolve(e){return TextSelection.between(e.resolve(this.anchor),e.resolve(this.head))}}class NodeSelection extends Selection{constructor(e){let o=e.nodeAfter,a=e.node(0).resolve(e.pos+o.nodeSize);super(e,a),this.node=o}map(e,o){let{deleted:a,pos:s}=o.mapResult(this.anchor),l=e.resolve(s);return a?Selection.near(l):new NodeSelection(l)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(e,o){if(typeof o.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(o.anchor))}static create(e,o){return new NodeSelection(e.resolve(o))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1,Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(e){this.anchor=e}map(e){let{deleted:o,pos:a}=e.mapResult(this.anchor);return o?new TextBookmark(a,a):new NodeBookmark(a)}resolve(e){let o=e.resolve(this.anchor),a=o.nodeAfter;return a&&NodeSelection.isSelectable(a)?new NodeSelection(o):Selection.near(o)}}class AllSelection extends Selection{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,o=Slice.empty){if(o==Slice.empty){e.delete(0,e.doc.content.size);let a=Selection.atStart(e.doc);a.eq(e.selection)||e.setSelection(a)}else super.replace(e,o)}toJSON(){return{type:"all"}}static fromJSON(e){return new AllSelection(e)}map(e){return new AllSelection(e)}eq(e){return e instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(n){return new AllSelection(n)}};function findSelectionIn(n,e,o,a,s,l=!1){if(e.inlineContent)return TextSelection.create(n,o);for(let c=a-(s>0?0:1);s>0?c<e.childCount:c>=0;c+=s){let d=e.child(c);if(d.isAtom){if(!l&&NodeSelection.isSelectable(d))return NodeSelection.create(n,o-(s<0?d.nodeSize:0))}else{let u=findSelectionIn(n,d,o+s,s<0?d.childCount:0,s,l);if(u)return u}o+=d.nodeSize*s}return null}function selectionToInsertionEnd(n,e,o){let a=n.steps.length-1;if(a<e)return;let s=n.steps[a];if(!(s instanceof ReplaceStep||s instanceof ReplaceAroundStep))return;let l=n.mapping.maps[a],c;l.forEach((d,u,f,v)=>{c==null&&(c=v)}),n.setSelection(Selection.near(n.doc.resolve(c),o))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;let Transaction$1=class extends Transform{constructor(n){super(n.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=n.selection,this.storedMarks=n.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(n){if(n.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=n,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(n){return this.storedMarks=n,this.updated|=UPDATED_MARKS,this}ensureMarks(n){return Mark.sameSet(this.storedMarks||this.selection.$from.marks(),n)||this.setStoredMarks(n),this}addStoredMark(n){return this.ensureMarks(n.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(n){return this.ensureMarks(n.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(n,e){super.addStep(n,e),this.updated=this.updated&-3,this.storedMarks=null}setTime(n){return this.time=n,this}replaceSelection(n){return this.selection.replace(this,n),this}replaceSelectionWith(n,e=!0){let o=this.selection;return e&&(n=n.mark(this.storedMarks||(o.empty?o.$from.marks():o.$from.marksAcross(o.$to)||Mark.none))),o.replaceWith(this,n),this}deleteSelection(){return this.selection.replace(this),this}insertText(n,e,o){let a=this.doc.type.schema;if(e==null)return n?this.replaceSelectionWith(a.text(n),!0):this.deleteSelection();{if(o==null&&(o=e),o=o??e,!n)return this.deleteRange(e,o);let s=this.storedMarks;if(!s){let l=this.doc.resolve(e);s=o==e?l.marks():l.marksAcross(this.doc.resolve(o))}return this.replaceRangeWith(e,o,a.text(n,s)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(n,e){return this.meta[typeof n=="string"?n:n.key]=e,this}getMeta(n){return this.meta[typeof n=="string"?n:n.key]}get isGeneric(){for(let n in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}};function bind(n,e){return!e||!n?n:n.bind(e)}class FieldDesc{constructor(e,o,a){this.name=e,this.init=bind(o.init,a),this.apply=bind(o.apply,a)}}const baseFields=[new FieldDesc("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new FieldDesc("selection",{init(n,e){return n.selection||Selection.atStart(e.doc)},apply(n){return n.selection}}),new FieldDesc("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,o,a){return a.selection.$cursor?n.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];let Configuration$1=class{constructor(n,e){this.schema=n,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),e&&e.forEach(o=>{if(this.pluginsByKey[o.key])throw new RangeError("Adding different instances of a keyed plugin ("+o.key+")");this.plugins.push(o),this.pluginsByKey[o.key]=o,o.spec.state&&this.fields.push(new FieldDesc(o.key,o.spec.state,o))})}},EditorState$1=class en{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,o=-1){for(let a=0;a<this.config.plugins.length;a++)if(a!=o){let s=this.config.plugins[a];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let o=[e],a=this.applyInner(e),s=null;for(;;){let l=!1;for(let c=0;c<this.config.plugins.length;c++){let d=this.config.plugins[c];if(d.spec.appendTransaction){let u=s?s[c].n:0,f=s?s[c].state:this,v=u<o.length&&d.spec.appendTransaction.call(d,u?o.slice(u):o,f,a);if(v&&a.filterTransaction(v,c)){if(v.setMeta("appendedTransaction",e),!s){s=[];for(let b=0;b<this.config.plugins.length;b++)s.push(b<c?{state:a,n:o.length}:{state:this,n:0})}o.push(v),a=a.applyInner(v),l=!0}s&&(s[c]={state:a,n:o.length})}}if(!l)return{state:a,transactions:o}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let o=new en(this.config),a=this.config.fields;for(let s=0;s<a.length;s++){let l=a[s];o[l.name]=l.apply(e,this[l.name],this,o)}return o}get tr(){return new Transaction$1(this)}static create(e){let o=new Configuration$1(e.doc?e.doc.type.schema:e.schema,e.plugins),a=new en(o);for(let s=0;s<o.fields.length;s++)a[o.fields[s].name]=o.fields[s].init(e,a);return a}reconfigure(e){let o=new Configuration$1(this.schema,e.plugins),a=o.fields,s=new en(o);for(let l=0;l<a.length;l++){let c=a[l].name;s[c]=this.hasOwnProperty(c)?this[c]:a[l].init(e,s)}return s}toJSON(e){let o={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(o.storedMarks=this.storedMarks.map(a=>a.toJSON())),e&&typeof e=="object")for(let a in e){if(a=="doc"||a=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[a],l=s.spec.state;l&&l.toJSON&&(o[a]=l.toJSON.call(s,this[s.key]))}return o}static fromJSON(e,o,a){if(!o)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Configuration$1(e.schema,e.plugins),l=new en(s);return s.fields.forEach(c=>{if(c.name=="doc")l.doc=Node$1.fromJSON(e.schema,o.doc);else if(c.name=="selection")l.selection=Selection.fromJSON(l.doc,o.selection);else if(c.name=="storedMarks")o.storedMarks&&(l.storedMarks=o.storedMarks.map(e.schema.markFromJSON));else{if(a)for(let d in a){let u=a[d],f=u.spec.state;if(u.key==c.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(o,d)){l[c.name]=f.fromJSON.call(u,e,o[d],l);return}}l[c.name]=c.init(e,l)}}),l}};function bindProps(n,e,o){for(let a in n){let s=n[a];s instanceof Function?s=s.bind(e):a=="handleDOMEvents"&&(s=bindProps(s,e,{})),o[a]=s}return o}class Plugin{constructor(e){this.spec=e,this.props={},e.props&&bindProps(e.props,this,this.props),this.key=e.key?e.key.key:createKey("plugin")}getState(e){return e[this.key]}}const keys=Object.create(null);function createKey(n){return n in keys?n+"$"+ ++keys[n]:(keys[n]=0,n+"$")}const domIndex$1=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},parentNode=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let reusedRange=null;const textRange$1=function(n,e,o){let a=reusedRange||(reusedRange=document.createRange());return a.setEnd(n,o??n.nodeValue.length),a.setStart(n,e||0),a},clearReusedRange=function(){reusedRange=null},isEquivalentPosition$1=function(n,e,o,a){return o&&(scanFor$1(n,e,o,a,-1)||scanFor$1(n,e,o,a,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor$1(n,e,o,a,s){for(;;){if(n==o&&e==a)return!0;if(e==(s<0?0:nodeSize$1(n))){let l=n.parentNode;if(!l||l.nodeType!=1||hasBlockDesc(n)||atomElements.test(n.nodeName)||n.contentEditable=="false")return!1;e=domIndex$1(n)+(s<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.contentEditable=="false")return!1;e=s<0?nodeSize$1(n):0}else return!1}}function nodeSize$1(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function textNodeBefore$1(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=nodeSize$1(n)}else if(n.parentNode&&!hasBlockDesc(n))e=domIndex$1(n),n=n.parentNode;else return null}}function textNodeAfter$1(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!hasBlockDesc(n))e=domIndex$1(n)+1,n=n.parentNode;else return null}}function isOnEdge(n,e,o){for(let a=e==0,s=e==nodeSize$1(n);a||s;){if(n==o)return!0;let l=domIndex$1(n);if(n=n.parentNode,!n)return!1;a=a&&l==0,s=s&&l==nodeSize$1(n)}}function hasBlockDesc(n){let e;for(let o=n;o&&!(e=o.pmViewDesc);o=o.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const selectionCollapsed=function(n){return n.focusNode&&isEquivalentPosition$1(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function keyEvent(n,e){let o=document.createEvent("Event");return o.initEvent("keydown",!0,!0),o.keyCode=n,o.key=o.code=e,o}function deepActiveElement(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function caretFromPoint(n,e,o){if(n.caretPositionFromPoint)try{let a=n.caretPositionFromPoint(e,o);if(a)return{node:a.offsetNode,offset:Math.min(nodeSize$1(a.offsetNode),a.offset)}}catch{}if(n.caretRangeFromPoint){let a=n.caretRangeFromPoint(e,o);if(a)return{node:a.startContainer,offset:Math.min(nodeSize$1(a.startContainer),a.startOffset)}}}const nav$1=typeof navigator<"u"?navigator:null,doc$1=typeof document<"u"?document:null,agent=nav$1&&nav$1.userAgent||"",ie_edge$1=/Edge\/(\d+)/.exec(agent),ie_upto10$1=/MSIE \d/.exec(agent),ie_11up$1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$2=!!(ie_upto10$1||ie_11up$1||ie_edge$1),ie_version=ie_upto10$1?document.documentMode:ie_11up$1?+ie_11up$1[1]:ie_edge$1?+ie_edge$1[1]:0,gecko$1=!ie$2&&/gecko\/(\d+)/i.test(agent);gecko$1&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$2&&/Chrome\/(\d+)/.exec(agent),chrome$1=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari$1=!ie$2&&!!nav$1&&/Apple Computer/.test(nav$1.vendor),ios$1=safari$1&&(/Mobile\/\w+/.test(agent)||!!nav$1&&nav$1.maxTouchPoints>2),mac$2=ios$1||(nav$1?/Mac/.test(nav$1.platform):!1),windows=nav$1?/Win/.test(nav$1.platform):!1,android$1=/Android \d/.test(agent),webkit$1=!!doc$1&&"webkitFontSmoothing"in doc$1.documentElement.style,webkit_version=webkit$1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect$1(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function getSide(n,e){return typeof n=="number"?n:n[e]}function clientRect(n){let e=n.getBoundingClientRect(),o=e.width/n.offsetWidth||1,a=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*o,top:e.top,bottom:e.top+n.clientHeight*a}}function scrollRectIntoView$1(n,e,o){let a=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,l=n.dom.ownerDocument;for(let c=o||n.dom;c;c=parentNode(c)){if(c.nodeType!=1)continue;let d=c,u=d==l.body,f=u?windowRect$1(l):clientRect(d),v=0,b=0;if(e.top<f.top+getSide(a,"top")?b=-(f.top-e.top+getSide(s,"top")):e.bottom>f.bottom-getSide(a,"bottom")&&(b=e.bottom-e.top>f.bottom-f.top?e.top+getSide(s,"top")-f.top:e.bottom-f.bottom+getSide(s,"bottom")),e.left<f.left+getSide(a,"left")?v=-(f.left-e.left+getSide(s,"left")):e.right>f.right-getSide(a,"right")&&(v=e.right-f.right+getSide(s,"right")),v||b)if(u)l.defaultView.scrollBy(v,b);else{let k=d.scrollLeft,x=d.scrollTop;b&&(d.scrollTop+=b),v&&(d.scrollLeft+=v);let _=d.scrollLeft-k,E=d.scrollTop-x;e={left:e.left-_,top:e.top-E,right:e.right-_,bottom:e.bottom-E}}if(u||/^(fixed|sticky)$/.test(getComputedStyle(c).position))break}}function storeScrollPos(n){let e=n.dom.getBoundingClientRect(),o=Math.max(0,e.top),a,s;for(let l=(e.left+e.right)/2,c=o+1;c<Math.min(innerHeight,e.bottom);c+=5){let d=n.root.elementFromPoint(l,c);if(!d||d==n.dom||!n.dom.contains(d))continue;let u=d.getBoundingClientRect();if(u.top>=o-20){a=d,s=u.top;break}}return{refDOM:a,refTop:s,stack:scrollStack(n.dom)}}function scrollStack(n){let e=[],o=n.ownerDocument;for(let a=n;a&&(e.push({dom:a,top:a.scrollTop,left:a.scrollLeft}),n!=o);a=parentNode(a));return e}function resetScrollPos({refDOM:n,refTop:e,stack:o}){let a=n?n.getBoundingClientRect().top:0;restoreScrollStack(o,a==0?0:a-e)}function restoreScrollStack(n,e){for(let o=0;o<n.length;o++){let{dom:a,top:s,left:l}=n[o];a.scrollTop!=s+e&&(a.scrollTop=s+e),a.scrollLeft!=l&&(a.scrollLeft=l)}}let preventScrollSupported$1=null;function focusPreventScroll$1(n){if(n.setActive)return n.setActive();if(preventScrollSupported$1)return n.focus(preventScrollSupported$1);let e=scrollStack(n);n.focus(preventScrollSupported$1==null?{get preventScroll(){return preventScrollSupported$1={preventScroll:!0},!0}}:void 0),preventScrollSupported$1||(preventScrollSupported$1=!1,restoreScrollStack(e,0))}function findOffsetInNode(n,e){let o,a=2e8,s,l=0,c=e.top,d=e.top,u,f;for(let v=n.firstChild,b=0;v;v=v.nextSibling,b++){let k;if(v.nodeType==1)k=v.getClientRects();else if(v.nodeType==3)k=textRange$1(v).getClientRects();else continue;for(let x=0;x<k.length;x++){let _=k[x];if(_.top<=c&&_.bottom>=d){c=Math.max(_.bottom,c),d=Math.min(_.top,d);let E=_.left>e.left?_.left-e.left:_.right<e.left?e.left-_.right:0;if(E<a){o=v,a=E,s=E&&o.nodeType==3?{left:_.right<e.left?_.right:_.left,top:e.top}:e,v.nodeType==1&&E&&(l=b+(e.left>=(_.left+_.right)/2?1:0));continue}}else _.top>e.top&&!u&&_.left<=e.left&&_.right>=e.left&&(u=v,f={left:Math.max(_.left,Math.min(_.right,e.left)),top:_.top});!o&&(e.left>=_.right&&e.top>=_.top||e.left>=_.left&&e.top>=_.bottom)&&(l=b+1)}}return!o&&u&&(o=u,s=f,a=0),o&&o.nodeType==3?findOffsetInText(o,s):!o||a&&o.nodeType==1?{node:n,offset:l}:findOffsetInNode(o,s)}function findOffsetInText(n,e){let o=n.nodeValue.length,a=document.createRange();for(let s=0;s<o;s++){a.setEnd(n,s+1),a.setStart(n,s);let l=singleRect(a,1);if(l.top!=l.bottom&&inRect(e,l))return{node:n,offset:s+(e.left>=(l.left+l.right)/2?1:0)}}return{node:n,offset:0}}function inRect(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function targetKludge(n,e){let o=n.parentNode;return o&&/^li$/i.test(o.nodeName)&&e.left<n.getBoundingClientRect().left?o:n}function posFromElement(n,e,o){let{node:a,offset:s}=findOffsetInNode(e,o),l=-1;if(a.nodeType==1&&!a.firstChild){let c=a.getBoundingClientRect();l=c.left!=c.right&&o.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(a,s,l)}function posFromCaret(n,e,o,a){let s=-1;for(let l=e,c=!1;l!=n.dom;){let d=n.docView.nearestDesc(l,!0),u;if(!d)return null;if(d.dom.nodeType==1&&(d.node.isBlock&&d.parent||!d.contentDOM)&&((u=d.dom.getBoundingClientRect()).width||u.height)&&(d.node.isBlock&&d.parent&&(!c&&u.left>a.left||u.top>a.top?s=d.posBefore:(!c&&u.right<a.left||u.bottom<a.top)&&(s=d.posAfter),c=!0),!d.contentDOM&&s<0&&!d.node.isText))return(d.node.isBlock?a.top<(u.top+u.bottom)/2:a.left<(u.left+u.right)/2)?d.posBefore:d.posAfter;l=d.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,o,-1)}function elementFromPoint(n,e,o){let a=n.childNodes.length;if(a&&o.top<o.bottom)for(let s=Math.max(0,Math.min(a-1,Math.floor(a*(e.top-o.top)/(o.bottom-o.top))-2)),l=s;;){let c=n.childNodes[l];if(c.nodeType==1){let d=c.getClientRects();for(let u=0;u<d.length;u++){let f=d[u];if(inRect(e,f))return elementFromPoint(c,e,f)}}if((l=(l+1)%a)==s)break}return n}function posAtCoords$1(n,e){let o=n.dom.ownerDocument,a,s=0,l=caretFromPoint(o,e.left,e.top);l&&({node:a,offset:s}=l);let c=(n.root.elementFromPoint?n.root:o).elementFromPoint(e.left,e.top),d;if(!c||!n.dom.contains(c.nodeType!=1?c.parentNode:c)){let f=n.dom.getBoundingClientRect();if(!inRect(e,f)||(c=elementFromPoint(n.dom,e,f),!c))return null}if(safari$1)for(let f=c;a&&f;f=parentNode(f))f.draggable&&(a=void 0);if(c=targetKludge(c,e),a){if(gecko$1&&a.nodeType==1&&(s=Math.min(s,a.childNodes.length),s<a.childNodes.length)){let v=a.childNodes[s],b;v.nodeName=="IMG"&&(b=v.getBoundingClientRect()).right<=e.left&&b.bottom>e.top&&s++}let f;webkit$1&&s&&a.nodeType==1&&(f=a.childNodes[s-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&s--,a==n.dom&&s==a.childNodes.length-1&&a.lastChild.nodeType==1&&e.top>a.lastChild.getBoundingClientRect().bottom?d=n.state.doc.content.size:(s==0||a.nodeType!=1||a.childNodes[s-1].nodeName!="BR")&&(d=posFromCaret(n,a,s,e))}d==null&&(d=posFromElement(n,c,e));let u=n.docView.nearestDesc(c,!0);return{pos:d,inside:u?u.posAtStart-u.border:-1}}function nonZero(n){return n.top<n.bottom||n.left<n.right}function singleRect(n,e){let o=n.getClientRects();if(o.length){let a=o[e<0?0:o.length-1];if(nonZero(a))return a}return Array.prototype.find.call(o,nonZero)||n.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(n,e,o){let{node:a,offset:s,atom:l}=n.docView.domFromPos(e,o<0?-1:1),c=webkit$1||gecko$1;if(a.nodeType==3)if(c&&(BIDI.test(a.nodeValue)||(o<0?!s:s==a.nodeValue.length))){let d=singleRect(textRange$1(a,s,s),o);if(gecko$1&&s&&/\s/.test(a.nodeValue[s-1])&&s<a.nodeValue.length){let u=singleRect(textRange$1(a,s-1,s-1),-1);if(u.top==d.top){let f=singleRect(textRange$1(a,s,s+1),-1);if(f.top!=d.top)return flattenV(f,f.left<u.left)}}return d}else{let d=s,u=s,f=o<0?1:-1;return o<0&&!s?(u++,f=-1):o>=0&&s==a.nodeValue.length?(d--,f=1):o<0?d--:u++,flattenV(singleRect(textRange$1(a,d,u),f),f<0)}if(!n.state.doc.resolve(e-(l||0)).parent.inlineContent){if(l==null&&s&&(o<0||s==nodeSize$1(a))){let d=a.childNodes[s-1];if(d.nodeType==1)return flattenH(d.getBoundingClientRect(),!1)}if(l==null&&s<nodeSize$1(a)){let d=a.childNodes[s];if(d.nodeType==1)return flattenH(d.getBoundingClientRect(),!0)}return flattenH(a.getBoundingClientRect(),o>=0)}if(l==null&&s&&(o<0||s==nodeSize$1(a))){let d=a.childNodes[s-1],u=d.nodeType==3?textRange$1(d,nodeSize$1(d)-(c?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(u)return flattenV(singleRect(u,1),!1)}if(l==null&&s<nodeSize$1(a)){let d=a.childNodes[s];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let u=d?d.nodeType==3?textRange$1(d,0,c?0:1):d.nodeType==1?d:null:null;if(u)return flattenV(singleRect(u,-1),!0)}return flattenV(singleRect(a.nodeType==3?textRange$1(a):a,-o),o>=0)}function flattenV(n,e){if(n.width==0)return n;let o=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:o,right:o}}function flattenH(n,e){if(n.height==0)return n;let o=e?n.top:n.bottom;return{top:o,bottom:o,left:n.left,right:n.right}}function withFlushedState(n,e,o){let a=n.state,s=n.root.activeElement;a!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return o()}finally{a!=e&&n.updateState(a),s!=n.dom&&s&&s.focus()}}function endOfTextblockVertical(n,e,o){let a=e.selection,s=o=="up"?a.$from:a.$to;return withFlushedState(n,e,()=>{let{node:l}=n.docView.domFromPos(s.pos,o=="up"?-1:1);for(;;){let d=n.docView.nearestDesc(l,!0);if(!d)break;if(d.node.isBlock){l=d.contentDOM||d.dom;break}l=d.dom.parentNode}let c=coordsAtPos(n,s.pos,1);for(let d=l.firstChild;d;d=d.nextSibling){let u;if(d.nodeType==1)u=d.getClientRects();else if(d.nodeType==3)u=textRange$1(d,0,d.nodeValue.length).getClientRects();else continue;for(let f=0;f<u.length;f++){let v=u[f];if(v.bottom>v.top+1&&(o=="up"?c.top-v.top>(v.bottom-c.top)*2:v.bottom-c.bottom>(c.bottom-v.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(n,e,o){let{$head:a}=e.selection;if(!a.parent.isTextblock)return!1;let s=a.parentOffset,l=!s,c=s==a.parent.content.size,d=n.domSelection();return d?!maybeRTL.test(a.parent.textContent)||!d.modify?o=="left"||o=="backward"?l:c:withFlushedState(n,e,()=>{let{focusNode:u,focusOffset:f,anchorNode:v,anchorOffset:b}=n.domSelectionRange(),k=d.caretBidiLevel;d.modify("move",o,"character");let x=a.depth?n.docView.domAfterPos(a.before()):n.dom,{focusNode:_,focusOffset:E}=n.domSelectionRange(),B=_&&!x.contains(_.nodeType==1?_:_.parentNode)||u==_&&f==E;try{d.collapse(v,b),u&&(u!=v||f!=b)&&d.extend&&d.extend(u,f)}catch{}return k!=null&&(d.caretBidiLevel=k),B}):a.pos==a.start()||a.pos==a.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(n,e,o){return cachedState==e&&cachedDir==o?cachedResult:(cachedState=e,cachedDir=o,cachedResult=o=="up"||o=="down"?endOfTextblockVertical(n,e,o):endOfTextblockHorizontal(n,e,o))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(e,o,a,s){this.parent=e,this.children=o,this.dom=a,this.contentDOM=s,this.dirty=NOT_DIRTY,a.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,o,a){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let o=0;o<this.children.length;o++)e+=this.children[o].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let o=0,a=this.posAtStart;;o++){let s=this.children[o];if(s==e)return a;a+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,o,a){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(a<0){let l,c;if(e==this.contentDOM)l=e.childNodes[o-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.previousSibling}for(;l&&!((c=l.pmViewDesc)&&c.parent==this);)l=l.previousSibling;return l?this.posBeforeChild(c)+c.size:this.posAtStart}else{let l,c;if(e==this.contentDOM)l=e.childNodes[o];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.nextSibling}for(;l&&!((c=l.pmViewDesc)&&c.parent==this);)l=l.nextSibling;return l?this.posBeforeChild(c):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=o>domIndex$1(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(o==0)for(let l=e;;l=l.parentNode){if(l==this.dom){s=!1;break}if(l.previousSibling)break}if(s==null&&o==e.childNodes.length)for(let l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.nextSibling)break}}return s??a>0?this.posAtEnd:this.posAtStart}nearestDesc(e,o=!1){for(let a=!0,s=e;s;s=s.parentNode){let l=this.getDesc(s),c;if(l&&(!o||l.node))if(a&&(c=l.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))a=!1;else return l}}getDesc(e){let o=e.pmViewDesc;for(let a=o;a;a=a.parent)if(a==this)return o}posFromDOM(e,o,a){for(let s=e;s;s=s.parentNode){let l=this.getDesc(s);if(l)return l.localPosFromDOM(e,o,a)}return-1}descAt(e){for(let o=0,a=0;o<this.children.length;o++){let s=this.children[o],l=a+s.size;if(a==e&&l!=a){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(e<l)return s.descAt(e-a-s.border);a=l}}domFromPos(e,o){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let a=0,s=0;for(let l=0;a<this.children.length;a++){let c=this.children[a],d=l+c.size;if(d>e||c instanceof TrailingHackViewDesc){s=e-l;break}l=d}if(s)return this.children[a].domFromPos(s-this.children[a].border,o);for(let l;a&&!(l=this.children[a-1]).size&&l instanceof WidgetViewDesc&&l.side>=0;a--);if(o<=0){let l,c=!0;for(;l=a?this.children[a-1]:null,!(!l||l.dom.parentNode==this.contentDOM);a--,c=!1);return l&&o&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,o):{node:this.contentDOM,offset:l?domIndex$1(l.dom)+1:0}}else{let l,c=!0;for(;l=a<this.children.length?this.children[a]:null,!(!l||l.dom.parentNode==this.contentDOM);a++,c=!1);return l&&c&&!l.border&&!l.domAtom?l.domFromPos(0,o):{node:this.contentDOM,offset:l?domIndex$1(l.dom):this.contentDOM.childNodes.length}}}parseRange(e,o,a=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:o,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,l=-1;for(let c=a,d=0;;d++){let u=this.children[d],f=c+u.size;if(s==-1&&e<=f){let v=c+u.border;if(e>=v&&o<=f-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,o,v);e=c;for(let b=d;b>0;b--){let k=this.children[b-1];if(k.size&&k.dom.parentNode==this.contentDOM&&!k.emptyChildAt(1)){s=domIndex$1(k.dom)+1;break}e-=k.size}s==-1&&(s=0)}if(s>-1&&(f>o||d==this.children.length-1)){o=f;for(let v=d+1;v<this.children.length;v++){let b=this.children[v];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(-1)){l=domIndex$1(b.dom);break}o+=b.size}l==-1&&(l=this.contentDOM.childNodes.length);break}c=f}return{node:this.contentDOM,from:e,to:o,fromOffset:s,toOffset:l}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let o=this.children[e<0?0:this.children.length-1];return o.size==0||o.emptyChildAt(e)}domAfterPos(e){let{node:o,offset:a}=this.domFromPos(e,0);if(o.nodeType!=1||a==o.childNodes.length)throw new RangeError("No node after pos "+e);return o.childNodes[a]}setSelection(e,o,a,s=!1){let l=Math.min(e,o),c=Math.max(e,o);for(let x=0,_=0;x<this.children.length;x++){let E=this.children[x],B=_+E.size;if(l>_&&c<B)return E.setSelection(e-_-E.border,o-_-E.border,a,s);_=B}let d=this.domFromPos(e,e?-1:1),u=o==e?d:this.domFromPos(o,o?-1:1),f=a.root.getSelection(),v=a.domSelectionRange(),b=!1;if((gecko$1||safari$1)&&e==o){let{node:x,offset:_}=d;if(x.nodeType==3){if(b=!!(_&&x.nodeValue[_-1]==`
`),b&&_==x.nodeValue.length)for(let E=x,B;E;E=E.parentNode){if(B=E.nextSibling){B.nodeName=="BR"&&(d=u={node:B.parentNode,offset:domIndex$1(B)+1});break}let M=E.pmViewDesc;if(M&&M.node&&M.node.isBlock)break}}else{let E=x.childNodes[_-1];b=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(gecko$1&&v.focusNode&&v.focusNode!=u.node&&v.focusNode.nodeType==1){let x=v.focusNode.childNodes[v.focusOffset];x&&x.contentEditable=="false"&&(s=!0)}if(!(s||b&&safari$1)&&isEquivalentPosition$1(d.node,d.offset,v.anchorNode,v.anchorOffset)&&isEquivalentPosition$1(u.node,u.offset,v.focusNode,v.focusOffset))return;let k=!1;if((f.extend||e==o)&&!b){f.collapse(d.node,d.offset);try{e!=o&&f.extend(u.node,u.offset),k=!0}catch{}}if(!k){if(e>o){let _=d;d=u,u=_}let x=document.createRange();x.setEnd(u.node,u.offset),x.setStart(d.node,d.offset),f.removeAllRanges(),f.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,o){for(let a=0,s=0;s<this.children.length;s++){let l=this.children[s],c=a+l.size;if(a==c?e<=c&&o>=a:e<c&&o>a){let d=a+l.border,u=c-l.border;if(e>=d&&o<=u){this.dirty=e==a||o==c?CONTENT_DIRTY:CHILD_DIRTY,e==d&&o==u&&(l.contentLost||l.dom.parentNode!=this.contentDOM)?l.dirty=NODE_DIRTY:l.markDirty(e-d,o-d);return}else l.dirty=l.dom==l.contentDOM&&l.dom.parentNode==this.contentDOM&&!l.children.length?CONTENT_DIRTY:NODE_DIRTY}a=c}this.dirty=CONTENT_DIRTY}markParentsDirty(){let e=1;for(let o=this.parent;o;o=o.parent,e++){let a=e==1?CONTENT_DIRTY:CHILD_DIRTY;o.dirty<a&&(o.dirty=a)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class WidgetViewDesc extends ViewDesc{constructor(e,o,a,s){let l,c=o.type.toDOM;if(typeof c=="function"&&(c=c(a,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)})),!o.type.spec.raw){if(c.nodeType!=1){let d=document.createElement("span");d.appendChild(c),c=d}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=o,this.widget=o,l=this}matchesWidget(e){return this.dirty==NOT_DIRTY&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let o=this.widget.spec.stopEvent;return o?o(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(e,o,a,s){super(e,[],o,null),this.textDOM=a,this.text=s}get size(){return this.text.length}localPosFromDOM(e,o){return e!=this.textDOM?this.posAtStart+(o?this.size:0):this.posAtStart+o}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class MarkViewDesc extends ViewDesc{constructor(e,o,a,s,l){super(e,[],a,s),this.mark=o,this.spec=l}static create(e,o,a,s){let l=s.nodeViews[o.type.name],c=l&&l(o,s,a);return(!c||!c.dom)&&(c=DOMSerializer.renderSpec(document,o.type.spec.toDOM(o,a),null,o.attrs)),new MarkViewDesc(e,o,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=NODE_DIRTY&&this.mark.eq(e)}markDirty(e,o){if(super.markDirty(e,o),this.dirty!=NOT_DIRTY){let a=this.parent;for(;!a.node;)a=a.parent;a.dirty<this.dirty&&(a.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(e,o,a){let s=MarkViewDesc.create(this.parent,this.mark,!0,a),l=this.children,c=this.size;o<c&&(l=replaceNodes(l,o,c,a)),e>0&&(l=replaceNodes(l,0,e,a));for(let d=0;d<l.length;d++)l[d].parent=s;return s.children=l,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(e,o,a,s,l,c,d,u,f){super(e,[],l,c),this.node=o,this.outerDeco=a,this.innerDeco=s,this.nodeDOM=d}static create(e,o,a,s,l,c){let d=l.nodeViews[o.type.name],u,f=d&&d(o,l,()=>{if(!u)return c;if(u.parent)return u.parent.posBeforeChild(u)},a,s),v=f&&f.dom,b=f&&f.contentDOM;if(o.isText){if(!v)v=document.createTextNode(o.text);else if(v.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else v||({dom:v,contentDOM:b}=DOMSerializer.renderSpec(document,o.type.spec.toDOM(o),null,o.attrs));!b&&!o.isText&&v.nodeName!="BR"&&(v.hasAttribute("contenteditable")||(v.contentEditable="false"),o.type.spec.draggable&&(v.draggable=!0));let k=v;return v=applyOuterDeco(v,a,o),f?u=new CustomNodeViewDesc(e,o,a,s,v,b||null,k,f,l,c+1):o.isText?new TextViewDesc(e,o,a,s,v,k,l):new NodeViewDesc(e,o,a,s,v,b||null,k,l,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let o=this.children.length-1;o>=0;o--){let a=this.children[o];if(this.dom.contains(a.dom.parentNode)){e.contentElement=a.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Fragment.empty)}return e}matchesNode(e,o,a){return this.dirty==NOT_DIRTY&&e.eq(this.node)&&sameOuterDeco(o,this.outerDeco)&&a.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,o){let a=this.node.inlineContent,s=o,l=e.composing?this.localCompositionInfo(e,o):null,c=l&&l.pos>-1?l:null,d=l&&l.pos<0,u=new ViewTreeUpdater(this,c&&c.node,e);iterDeco(this.node,this.innerDeco,(f,v,b)=>{f.spec.marks?u.syncToMarks(f.spec.marks,a,e):f.type.side>=0&&!b&&u.syncToMarks(v==this.node.childCount?Mark.none:this.node.child(v).marks,a,e),u.placeWidget(f,e,s)},(f,v,b,k)=>{u.syncToMarks(f.marks,a,e);let x;u.findNodeMatch(f,v,b,k)||d&&e.state.selection.from>s&&e.state.selection.to<s+f.nodeSize&&(x=u.findIndexWithChild(l.node))>-1&&u.updateNodeAt(f,v,b,x,e)||u.updateNextNode(f,v,b,e,k,s)||u.addNode(f,v,b,e,s),s+=f.nodeSize}),u.syncToMarks([],a,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==CONTENT_DIRTY)&&(c&&this.protectLocalComposition(e,c),renderDescs(this.contentDOM,this.children,e),ios$1&&iosHacks(this.dom))}localCompositionInfo(e,o){let{from:a,to:s}=e.state.selection;if(!(e.state.selection instanceof TextSelection)||a<o||s>o+this.node.content.size)return null;let l=e.input.compositionNode;if(!l||!this.dom.contains(l.parentNode))return null;if(this.node.inlineContent){let c=l.nodeValue,d=findTextInFragment(this.node.content,c,a-o,s-o);return d<0?null:{node:l,pos:d,text:c}}else return{node:l,pos:-1,text:""}}protectLocalComposition(e,{node:o,pos:a,text:s}){if(this.getDesc(o))return;let l=o;for(;l.parentNode!=this.contentDOM;l=l.parentNode){for(;l.previousSibling;)l.parentNode.removeChild(l.previousSibling);for(;l.nextSibling;)l.parentNode.removeChild(l.nextSibling);l.pmViewDesc&&(l.pmViewDesc=void 0)}let c=new CompositionViewDesc(this,l,o,s);e.input.compositionNodes.push(c),this.children=replaceNodes(this.children,a,a+s.length,e,c)}update(e,o,a,s){return this.dirty==NODE_DIRTY||!e.sameMarkup(this.node)?!1:(this.updateInner(e,o,a,s),!0)}updateInner(e,o,a,s){this.updateOuterDeco(o),this.node=e,this.innerDeco=a,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(e){if(sameOuterDeco(e,this.outerDeco))return;let o=this.nodeDOM.nodeType!=1,a=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,o),computeOuterDeco(e,this.node,o)),this.dom!=a&&(a.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(n,e,o,a,s){applyOuterDeco(a,e,n);let l=new NodeViewDesc(void 0,n,e,o,a,a,a,s,0);return l.contentDOM&&l.updateChildren(s,0),l}class TextViewDesc extends NodeViewDesc{constructor(e,o,a,s,l,c,d){super(e,o,a,s,l,null,c,d,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,o,a,s){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(o),(this.dirty!=NOT_DIRTY||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=NOT_DIRTY,!0)}inParent(){let e=this.parent.contentDOM;for(let o=this.nodeDOM;o;o=o.parentNode)if(o==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,o,a){return e==this.nodeDOM?this.posAtStart+Math.min(o,this.node.text.length):super.localPosFromDOM(e,o,a)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,o,a){let s=this.node.cut(e,o),l=document.createTextNode(s.text);return new TextViewDesc(this.parent,s,this.outerDeco,this.innerDeco,l,l,a)}markDirty(e,o){super.markDirty(e,o),this.dom!=this.nodeDOM&&(e==0||o==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(e){return this.node.text==e}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==NOT_DIRTY&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(e,o,a,s,l,c,d,u,f,v){super(e,o,a,s,l,c,d,f,v),this.spec=u}update(e,o,a,s){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let l=this.spec.update(e,o,a);return l&&this.updateInner(e,o,a,s),l}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,o,a,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,o,a,s){this.spec.setSelection?this.spec.setSelection(e,o,a.root):super.setSelection(e,o,a,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function renderDescs(n,e,o){let a=n.firstChild,s=!1;for(let l=0;l<e.length;l++){let c=e[l],d=c.dom;if(d.parentNode==n){for(;d!=a;)a=rm(a),s=!0;a=a.nextSibling}else s=!0,n.insertBefore(d,a);if(c instanceof MarkViewDesc){let u=a?a.previousSibling:n.lastChild;renderDescs(c.contentDOM,c.children,o),a=u?u.nextSibling:n.firstChild}}for(;a;)a=rm(a),s=!0;s&&o.trackWrites==n&&(o.trackWrites=null)}const OuterDecoLevel=function(n){n&&(this.nodeName=n)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(n,e,o){if(n.length==0)return noDeco;let a=o?noDeco[0]:new OuterDecoLevel,s=[a];for(let l=0;l<n.length;l++){let c=n[l].type.attrs;if(c){c.nodeName&&s.push(a=new OuterDecoLevel(c.nodeName));for(let d in c){let u=c[d];u!=null&&(o&&s.length==1&&s.push(a=new OuterDecoLevel(e.isInline?"span":"div")),d=="class"?a.class=(a.class?a.class+" ":"")+u:d=="style"?a.style=(a.style?a.style+";":"")+u:d!="nodeName"&&(a[d]=u))}}}return s}function patchOuterDeco(n,e,o,a){if(o==noDeco&&a==noDeco)return e;let s=e;for(let l=0;l<a.length;l++){let c=a[l],d=o[l];if(l){let u;d&&d.nodeName==c.nodeName&&s!=n&&(u=s.parentNode)&&u.nodeName.toLowerCase()==c.nodeName||(u=document.createElement(c.nodeName),u.pmIsDeco=!0,u.appendChild(s),d=noDeco[0]),s=u}patchAttributes(s,d||noDeco[0],c)}return s}function patchAttributes(n,e,o){for(let a in e)a!="class"&&a!="style"&&a!="nodeName"&&!(a in o)&&n.removeAttribute(a);for(let a in o)a!="class"&&a!="style"&&a!="nodeName"&&o[a]!=e[a]&&n.setAttribute(a,o[a]);if(e.class!=o.class){let a=e.class?e.class.split(" ").filter(Boolean):[],s=o.class?o.class.split(" ").filter(Boolean):[];for(let l=0;l<a.length;l++)s.indexOf(a[l])==-1&&n.classList.remove(a[l]);for(let l=0;l<s.length;l++)a.indexOf(s[l])==-1&&n.classList.add(s[l]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=o.style){if(e.style){let a=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=a.exec(e.style);)n.style.removeProperty(s[1])}o.style&&(n.style.cssText+=o.style)}}function applyOuterDeco(n,e,o){return patchOuterDeco(n,n,noDeco,computeOuterDeco(e,o,n.nodeType!=1))}function sameOuterDeco(n,e){if(n.length!=e.length)return!1;for(let o=0;o<n.length;o++)if(!n[o].type.eq(e[o].type))return!1;return!0}function rm(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class ViewTreeUpdater{constructor(e,o,a){this.lock=o,this.view=a,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=preMatch(e.node.content,e)}destroyBetween(e,o){if(e!=o){for(let a=e;a<o;a++)this.top.children[a].destroy();this.top.children.splice(e,o-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,o,a){let s=0,l=this.stack.length>>1,c=Math.min(l,e.length);for(;s<c&&(s==l-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<l;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let d=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let f=this.top.children[u];if(f.matchesMark(e[l])&&!this.isLocked(f.dom)){d=u;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let u=MarkViewDesc.create(this.top,e[l],o,a);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,l++}}findNodeMatch(e,o,a,s){let l=-1,c;if(s>=this.preMatch.index&&(c=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&c.matchesNode(e,o,a))l=this.top.children.indexOf(c,this.index);else for(let d=this.index,u=Math.min(this.top.children.length,d+5);d<u;d++){let f=this.top.children[d];if(f.matchesNode(e,o,a)&&!this.preMatch.matched.has(f)){l=d;break}}return l<0?!1:(this.destroyBetween(this.index,l),this.index++,!0)}updateNodeAt(e,o,a,s,l){let c=this.top.children[s];return c.dirty==NODE_DIRTY&&c.dom==c.contentDOM&&(c.dirty=CONTENT_DIRTY),c.update(e,o,a,l)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let o=e.parentNode;if(!o)return-1;if(o==this.top.contentDOM){let a=e.pmViewDesc;if(a){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==a)return s}return-1}e=o}}updateNextNode(e,o,a,s,l,c){for(let d=this.index;d<this.top.children.length;d++){let u=this.top.children[d];if(u instanceof NodeViewDesc){let f=this.preMatch.matched.get(u);if(f!=null&&f!=l)return!1;let v=u.dom,b,k=this.isLocked(v)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=NODE_DIRTY&&sameOuterDeco(o,u.outerDeco));if(!k&&u.update(e,o,a,s))return this.destroyBetween(this.index,d),u.dom!=v&&(this.changed=!0),this.index++,!0;if(!k&&(b=this.recreateWrapper(u,e,o,a,s,c)))return this.destroyBetween(this.index,d),this.top.children[this.index]=b,b.contentDOM&&(b.dirty=CONTENT_DIRTY,b.updateChildren(s,c+1),b.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,o,a,s,l,c){if(e.dirty||o.isAtom||!e.children.length||!e.node.content.eq(o.content)||!sameOuterDeco(a,e.outerDeco)||!s.eq(e.innerDeco))return null;let d=NodeViewDesc.create(this.top,o,a,s,l,c);if(d.contentDOM){d.children=e.children,e.children=[];for(let u of d.children)u.parent=d}return e.destroy(),d}addNode(e,o,a,s,l){let c=NodeViewDesc.create(this.top,e,o,a,s,l);c.contentDOM&&c.updateChildren(s,l+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,o,a){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let l=new WidgetViewDesc(this.top,e,o,a);this.top.children.splice(this.index++,0,l),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],o=this.top;for(;e instanceof MarkViewDesc;)o=e,e=o.children[o.children.length-1];(!e||!(e instanceof TextViewDesc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((safari$1||chrome$1)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",o),this.addHackNode("BR",this.top))}addHackNode(e,o){if(o==this.top&&this.index<o.children.length&&o.children[this.index].matchesHack(e))this.index++;else{let a=document.createElement(e);e=="IMG"&&(a.className="ProseMirror-separator",a.alt=""),e=="BR"&&(a.className="ProseMirror-trailingBreak");let s=new TrailingHackViewDesc(this.top,[],a,null);o!=this.top?o.children.push(s):o.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function preMatch(n,e){let o=e,a=o.children.length,s=n.childCount,l=new Map,c=[];e:for(;s>0;){let d;for(;;)if(a){let f=o.children[a-1];if(f instanceof MarkViewDesc)o=f,a=f.children.length;else{d=f,a--;break}}else{if(o==e)break e;a=o.parent.children.indexOf(o),o=o.parent}let u=d.node;if(u){if(u!=n.child(s-1))break;--s,l.set(d,s),c.push(d)}}return{index:s,matched:l,matches:c.reverse()}}function compareSide(n,e){return n.type.side-e.type.side}function iterDeco(n,e,o,a){let s=e.locals(n),l=0;if(s.length==0){for(let f=0;f<n.childCount;f++){let v=n.child(f);a(v,s,e.forChild(l,v),f),l+=v.nodeSize}return}let c=0,d=[],u=null;for(let f=0;;){let v,b;for(;c<s.length&&s[c].to==l;){let B=s[c++];B.widget&&(v?(b||(b=[v])).push(B):v=B)}if(v)if(b){b.sort(compareSide);for(let B=0;B<b.length;B++)o(b[B],f,!!u)}else o(v,f,!!u);let k,x;if(u)x=-1,k=u,u=null;else if(f<n.childCount)x=f,k=n.child(f++);else break;for(let B=0;B<d.length;B++)d[B].to<=l&&d.splice(B--,1);for(;c<s.length&&s[c].from<=l&&s[c].to>l;)d.push(s[c++]);let _=l+k.nodeSize;if(k.isText){let B=_;c<s.length&&s[c].from<B&&(B=s[c].from);for(let M=0;M<d.length;M++)d[M].to<B&&(B=d[M].to);B<_&&(u=k.cut(B-l),k=k.cut(0,B-l),_=B,x=-1)}else for(;c<s.length&&s[c].to<_;)c++;let E=k.isInline&&!k.isLeaf?d.filter(B=>!B.inline):d.slice();a(k,E,e.forChild(l,k),x),l=_}}function iosHacks(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function findTextInFragment(n,e,o,a){for(let s=0,l=0;s<n.childCount&&l<=a;){let c=n.child(s++),d=l;if(l+=c.nodeSize,!c.isText)continue;let u=c.text;for(;s<n.childCount;){let f=n.child(s++);if(l+=f.nodeSize,!f.isText)break;u+=f.text}if(l>=o){if(l>=a&&u.slice(a-e.length-d,a-d)==e)return a-e.length;let f=d<a?u.lastIndexOf(e,a-d-1):-1;if(f>=0&&f+e.length+d>=o)return d+f;if(o==a&&u.length>=a+e.length-d&&u.slice(a-d,a-d+e.length)==e)return a}}return-1}function replaceNodes(n,e,o,a,s){let l=[];for(let c=0,d=0;c<n.length;c++){let u=n[c],f=d,v=d+=u.size;f>=o||v<=e?l.push(u):(f<e&&l.push(u.slice(0,e-f,a)),s&&(l.push(s),s=void 0),v>o&&l.push(u.slice(o-f,u.size,a)))}return l}function selectionFromDOM(n,e=null){let o=n.domSelectionRange(),a=n.state.doc;if(!o.focusNode)return null;let s=n.docView.nearestDesc(o.focusNode),l=s&&s.size==0,c=n.docView.posFromDOM(o.focusNode,o.focusOffset,1);if(c<0)return null;let d=a.resolve(c),u,f;if(selectionCollapsed(o)){for(u=c;s&&!s.node;)s=s.parent;let b=s.node;if(s&&b.isAtom&&NodeSelection.isSelectable(b)&&s.parent&&!(b.isInline&&isOnEdge(o.focusNode,o.focusOffset,s.dom))){let k=s.posBefore;f=new NodeSelection(c==k?d:a.resolve(k))}}else{if(o instanceof n.dom.ownerDocument.defaultView.Selection&&o.rangeCount>1){let b=c,k=c;for(let x=0;x<o.rangeCount;x++){let _=o.getRangeAt(x);b=Math.min(b,n.docView.posFromDOM(_.startContainer,_.startOffset,1)),k=Math.max(k,n.docView.posFromDOM(_.endContainer,_.endOffset,-1))}if(b<0)return null;[u,c]=k==n.state.selection.anchor?[k,b]:[b,k],d=a.resolve(c)}else u=n.docView.posFromDOM(o.anchorNode,o.anchorOffset,1);if(u<0)return null}let v=a.resolve(u);if(!f){let b=e=="pointer"||n.state.selection.head<d.pos&&!l?1:-1;f=selectionBetween(n,v,d,b)}return f}function editorOwnsSelection(n){return n.editable?n.hasFocus():hasSelection$1(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function selectionToDOM(n,e=!1){let o=n.state.selection;if(syncNodeSelection(n,o),!!editorOwnsSelection(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&chrome$1){let a=n.domSelectionRange(),s=n.domObserver.currentSelection;if(a.anchorNode&&s.anchorNode&&isEquivalentPosition$1(a.anchorNode,a.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)selectCursorWrapper(n);else{let{anchor:a,head:s}=o,l,c;brokenSelectBetweenUneditable&&!(o instanceof TextSelection)&&(o.$from.parent.inlineContent||(l=temporarilyEditableNear(n,o.from)),!o.empty&&!o.$from.parent.inlineContent&&(c=temporarilyEditableNear(n,o.to))),n.docView.setSelection(a,s,n,e),brokenSelectBetweenUneditable&&(l&&resetEditable(l),c&&resetEditable(c)),o.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari$1||chrome$1&&chrome_version<63;function temporarilyEditableNear(n,e){let{node:o,offset:a}=n.docView.domFromPos(e,0),s=a<o.childNodes.length?o.childNodes[a]:null,l=a?o.childNodes[a-1]:null;if(safari$1&&s&&s.contentEditable=="false")return setEditable(s);if((!s||s.contentEditable=="false")&&(!l||l.contentEditable=="false")){if(s)return setEditable(s);if(l)return setEditable(l)}}function setEditable(n){return n.contentEditable="true",safari$1&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function resetEditable(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function removeClassOnSelectionChange(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let o=n.domSelectionRange(),a=o.anchorNode,s=o.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(o.anchorNode!=a||o.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(n){let e=n.domSelection(),o=document.createRange();if(!e)return;let a=n.cursorWrapper.dom,s=a.nodeName=="IMG";s?o.setStart(a.parentNode,domIndex$1(a)+1):o.setStart(a,0),o.collapse(!0),e.removeAllRanges(),e.addRange(o),!s&&!n.state.selection.visible&&ie$2&&ie_version<=11&&(a.disabled=!0,a.disabled=!1)}function syncNodeSelection(n,e){if(e instanceof NodeSelection){let o=n.docView.descAt(e.from);o!=n.lastSelectedViewDesc&&(clearNodeSelection(n),o&&o.selectNode(),n.lastSelectedViewDesc=o)}else clearNodeSelection(n)}function clearNodeSelection(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function selectionBetween(n,e,o,a){return n.someProp("createSelectionBetween",s=>s(n,e,o))||TextSelection.between(e,o,a)}function hasFocusAndSelection(n){return n.editable&&!n.hasFocus()?!1:hasSelection$1(n)}function hasSelection$1(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function anchorInRightPlace(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),o=n.domSelectionRange();return isEquivalentPosition$1(e.node,e.offset,o.anchorNode,o.anchorOffset)}function moveSelectionBlock(n,e){let{$anchor:o,$head:a}=n.selection,s=e>0?o.max(a):o.min(a),l=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return l&&Selection.findFrom(l,e)}function apply(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function selectHorizontally(n,e,o){let a=n.state.selection;if(a instanceof TextSelection)if(o.indexOf("s")>-1){let{$head:s}=a,l=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let c=n.state.doc.resolve(s.pos+l.nodeSize*(e<0?-1:1));return apply(n,new TextSelection(a.$anchor,c))}else if(a.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=moveSelectionBlock(n.state,e);return s&&s instanceof NodeSelection?apply(n,s):!1}else if(!(mac$2&&o.indexOf("m")>-1)){let s=a.$head,l=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,c;if(!l||l.isText)return!1;let d=e<0?s.pos-l.nodeSize:s.pos;return l.isAtom||(c=n.docView.descAt(d))&&!c.contentDOM?NodeSelection.isSelectable(l)?apply(n,new NodeSelection(e<0?n.state.doc.resolve(s.pos-l.nodeSize):s)):webkit$1?apply(n,new TextSelection(n.state.doc.resolve(e<0?d:d+l.nodeSize))):!1:!1}}else return!1;else{if(a instanceof NodeSelection&&a.node.isInline)return apply(n,new TextSelection(e>0?a.$to:a.$from));{let s=moveSelectionBlock(n.state,e);return s?apply(n,s):!1}}}function nodeLen(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function isIgnorable(n,e){let o=n.pmViewDesc;return o&&o.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function skipIgnoredNodes(n,e){return e<0?skipIgnoredNodesBefore(n):skipIgnoredNodesAfter(n)}function skipIgnoredNodesBefore(n){let e=n.domSelectionRange(),o=e.focusNode,a=e.focusOffset;if(!o)return;let s,l,c=!1;for(gecko$1&&o.nodeType==1&&a<nodeLen(o)&&isIgnorable(o.childNodes[a],-1)&&(c=!0);;)if(a>0){if(o.nodeType!=1)break;{let d=o.childNodes[a-1];if(isIgnorable(d,-1))s=o,l=--a;else if(d.nodeType==3)o=d,a=o.nodeValue.length;else break}}else{if(isBlockNode(o))break;{let d=o.previousSibling;for(;d&&isIgnorable(d,-1);)s=o.parentNode,l=domIndex$1(d),d=d.previousSibling;if(d)o=d,a=nodeLen(o);else{if(o=o.parentNode,o==n.dom)break;a=0}}}c?setSelFocus(n,o,a):s&&setSelFocus(n,s,l)}function skipIgnoredNodesAfter(n){let e=n.domSelectionRange(),o=e.focusNode,a=e.focusOffset;if(!o)return;let s=nodeLen(o),l,c;for(;;)if(a<s){if(o.nodeType!=1)break;let d=o.childNodes[a];if(isIgnorable(d,1))l=o,c=++a;else break}else{if(isBlockNode(o))break;{let d=o.nextSibling;for(;d&&isIgnorable(d,1);)l=d.parentNode,c=domIndex$1(d)+1,d=d.nextSibling;if(d)o=d,a=0,s=nodeLen(o);else{if(o=o.parentNode,o==n.dom)break;a=s=0}}}l&&setSelFocus(n,l,c)}function isBlockNode(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function textNodeAfter$2(n,e){for(;n&&e==n.childNodes.length&&!hasBlockDesc(n);)e=domIndex$1(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let o=n.childNodes[e];if(o.nodeType==3)return o;if(o.nodeType==1&&o.contentEditable=="false")break;n=o,e=0}}function textNodeBefore$2(n,e){for(;n&&!e&&!hasBlockDesc(n);)e=domIndex$1(n),n=n.parentNode;for(;n&&e;){let o=n.childNodes[e-1];if(o.nodeType==3)return o;if(o.nodeType==1&&o.contentEditable=="false")break;n=o,e=n.childNodes.length}}function setSelFocus(n,e,o){if(e.nodeType!=3){let l,c;(c=textNodeAfter$2(e,o))?(e=c,o=0):(l=textNodeBefore$2(e,o))&&(e=l,o=l.nodeValue.length)}let a=n.domSelection();if(!a)return;if(selectionCollapsed(a)){let l=document.createRange();l.setEnd(e,o),l.setStart(e,o),a.removeAllRanges(),a.addRange(l)}else a.extend&&a.extend(e,o);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&selectionToDOM(n)},50)}function findDirection(n,e){let o=n.state.doc.resolve(e);if(!(chrome$1||windows)&&o.parent.inlineContent){let a=n.coordsAtPos(e);if(e>o.start()){let s=n.coordsAtPos(e-1),l=(s.top+s.bottom)/2;if(l>a.top&&l<a.bottom&&Math.abs(s.left-a.left)>1)return s.left<a.left?"ltr":"rtl"}if(e<o.end()){let s=n.coordsAtPos(e+1),l=(s.top+s.bottom)/2;if(l>a.top&&l<a.bottom&&Math.abs(s.left-a.left)>1)return s.left>a.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(n,e,o){let a=n.state.selection;if(a instanceof TextSelection&&!a.empty||o.indexOf("s")>-1||mac$2&&o.indexOf("m")>-1)return!1;let{$from:s,$to:l}=a;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let c=moveSelectionBlock(n.state,e);if(c&&c instanceof NodeSelection)return apply(n,c)}if(!s.parent.inlineContent){let c=e<0?s:l,d=a instanceof AllSelection?Selection.near(c,e):Selection.findFrom(c,e);return d?apply(n,d):!1}return!1}function stopNativeHorizontalDelete(n,e){if(!(n.state.selection instanceof TextSelection))return!0;let{$head:o,$anchor:a,empty:s}=n.state.selection;if(!o.sameParent(a))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let l=!o.textOffset&&(e<0?o.nodeBefore:o.nodeAfter);if(l&&!l.isText){let c=n.state.tr;return e<0?c.delete(o.pos-l.nodeSize,o.pos):c.delete(o.pos,o.pos+l.nodeSize),n.dispatch(c),!0}return!1}function switchEditable(n,e,o){n.domObserver.stop(),e.contentEditable=o,n.domObserver.start()}function safariDownArrowBug(n){if(!safari$1||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:o}=n.domSelectionRange();if(e&&e.nodeType==1&&o==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let a=e.firstChild;switchEditable(n,a,"true"),setTimeout(()=>switchEditable(n,a,"false"),20)}return!1}function getMods(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function captureKeyDown(n,e){let o=e.keyCode,a=getMods(e);if(o==8||mac$2&&o==72&&a=="c")return stopNativeHorizontalDelete(n,-1)||skipIgnoredNodes(n,-1);if(o==46&&!e.shiftKey||mac$2&&o==68&&a=="c")return stopNativeHorizontalDelete(n,1)||skipIgnoredNodes(n,1);if(o==13||o==27)return!0;if(o==37||mac$2&&o==66&&a=="c"){let s=o==37?findDirection(n,n.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(n,s,a)||skipIgnoredNodes(n,s)}else if(o==39||mac$2&&o==70&&a=="c"){let s=o==39?findDirection(n,n.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(n,s,a)||skipIgnoredNodes(n,s)}else{if(o==38||mac$2&&o==80&&a=="c")return selectVertically(n,-1,a)||skipIgnoredNodes(n,-1);if(o==40||mac$2&&o==78&&a=="c")return safariDownArrowBug(n)||selectVertically(n,1,a)||skipIgnoredNodes(n,1);if(a==(mac$2?"m":"c")&&(o==66||o==73||o==89||o==90))return!0}return!1}function serializeForClipboard(n,e){n.someProp("transformCopied",x=>{e=x(e,n)});let o=[],{content:a,openStart:s,openEnd:l}=e;for(;s>1&&l>1&&a.childCount==1&&a.firstChild.childCount==1;){s--,l--;let x=a.firstChild;o.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),a=x.content}let c=n.someProp("clipboardSerializer")||DOMSerializer.fromSchema(n.state.schema),d=detachedDoc(),u=d.createElement("div");u.appendChild(c.serializeFragment(a,{document:d}));let f=u.firstChild,v,b=0;for(;f&&f.nodeType==1&&(v=wrapMap[f.nodeName.toLowerCase()]);){for(let x=v.length-1;x>=0;x--){let _=d.createElement(v[x]);for(;u.firstChild;)_.appendChild(u.firstChild);u.appendChild(_),b++}f=u.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${s} ${l}${b?` -${b}`:""} ${JSON.stringify(o)}`);let k=n.someProp("clipboardTextSerializer",x=>x(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:k,slice:e}}function parseFromClipboard(n,e,o,a,s){let l=s.parent.type.spec.code,c,d;if(!o&&!e)return null;let u=e&&(a||l||!o);if(u){if(n.someProp("transformPastedText",k=>{e=k(e,l||a,n)}),l)return e?new Slice(Fragment.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Slice.empty;let b=n.someProp("clipboardTextParser",k=>k(e,s,a,n));if(b)d=b;else{let k=s.marks(),{schema:x}=n.state,_=DOMSerializer.fromSchema(x);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let B=c.appendChild(document.createElement("p"));E&&B.appendChild(_.serializeNode(x.text(E,k)))})}}else n.someProp("transformPastedHTML",b=>{o=b(o,n)}),c=readHTML(o),webkit$1&&restoreReplacedSpaces(c);let f=c&&c.querySelector("[data-pm-slice]"),v=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(v&&v[3])for(let b=+v[3];b>0;b--){let k=c.firstChild;for(;k&&k.nodeType!=1;)k=k.nextSibling;if(!k)break;c=k}if(d||(d=(n.someProp("clipboardParser")||n.someProp("domParser")||DOMParser$1.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!!(u||v),context:s,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!inlineParents.test(b.parentNode.nodeName)?{ignore:!0}:null}})),v)d=addContext(closeSlice(d,+v[1],+v[2]),v[4]);else if(d=Slice.maxOpen(normalizeSiblings(d.content,s),!0),d.openStart||d.openEnd){let b=0,k=0;for(let x=d.content.firstChild;b<d.openStart&&!x.type.spec.isolating;b++,x=x.firstChild);for(let x=d.content.lastChild;k<d.openEnd&&!x.type.spec.isolating;k++,x=x.lastChild);d=closeSlice(d,b,k)}return n.someProp("transformPasted",b=>{d=b(d,n)}),d}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(n,e){if(n.childCount<2)return n;for(let o=e.depth;o>=0;o--){let a=e.node(o).contentMatchAt(e.index(o)),s,l=[];if(n.forEach(c=>{if(!l)return;let d=a.findWrapping(c.type),u;if(!d)return l=null;if(u=l.length&&s.length&&addToSibling(d,s,c,l[l.length-1],0))l[l.length-1]=u;else{l.length&&(l[l.length-1]=closeRight(l[l.length-1],s.length));let f=withWrappers(c,d);l.push(f),a=a.matchType(f.type),s=d}}),l)return Fragment.from(l)}return n}function withWrappers(n,e,o=0){for(let a=e.length-1;a>=o;a--)n=e[a].create(null,Fragment.from(n));return n}function addToSibling(n,e,o,a,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let l=addToSibling(n,e,o,a.lastChild,s+1);if(l)return a.copy(a.content.replaceChild(a.childCount-1,l));if(a.contentMatchAt(a.childCount).matchType(s==n.length-1?o.type:n[s+1]))return a.copy(a.content.append(Fragment.from(withWrappers(o,n,s+1))))}}function closeRight(n,e){if(e==0)return n;let o=n.content.replaceChild(n.childCount-1,closeRight(n.lastChild,e-1)),a=n.contentMatchAt(n.childCount).fillBefore(Fragment.empty,!0);return n.copy(o.append(a))}function closeRange(n,e,o,a,s,l){let c=e<0?n.firstChild:n.lastChild,d=c.content;return n.childCount>1&&(l=0),s<a-1&&(d=closeRange(d,e,o,a,s+1,l)),s>=o&&(d=e<0?c.contentMatchAt(0).fillBefore(d,l<=s).append(d):d.append(c.contentMatchAt(c.childCount).fillBefore(Fragment.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,c.copy(d))}function closeSlice(n,e,o){return e<n.openStart&&(n=new Slice(closeRange(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),o<n.openEnd&&(n=new Slice(closeRange(n.content,1,o,n.openEnd,0,0),n.openStart,o)),n}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(n){let e=window.trustedTypes;return e?(_policy||(_policy=e.createPolicy("ProseMirrorClipboard",{createHTML:o=>o})),_policy.createHTML(n)):n}function readHTML(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let o=detachedDoc().createElement("div"),a=/<([a-z][^>\s]+)/i.exec(n),s;if((s=a&&wrapMap[a[1].toLowerCase()])&&(n=s.map(l=>"<"+l+">").join("")+n+s.map(l=>"</"+l+">").reverse().join("")),o.innerHTML=maybeWrapTrusted(n),s)for(let l=0;l<s.length;l++)o=o.querySelector(s[l])||o;return o}function restoreReplacedSpaces(n){let e=n.querySelectorAll(chrome$1?"span:not([class]):not([style])":"span.Apple-converted-space");for(let o=0;o<e.length;o++){let a=e[o];a.childNodes.length==1&&a.textContent=="\xA0"&&a.parentNode&&a.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),a)}}function addContext(n,e){if(!n.size)return n;let o=n.content.firstChild.type.schema,a;try{a=JSON.parse(e)}catch{return n}let{content:s,openStart:l,openEnd:c}=n;for(let d=a.length-2;d>=0;d-=2){let u=o.nodes[a[d]];if(!u||u.hasRequiredAttrs())break;s=Fragment.from(u.create(a[d+1],s)),l++,c++}return new Slice(s,l,c)}const handlers$1={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};let InputState$1=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function initInput(n){for(let e in handlers$1){let o=handlers$1[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=a=>{eventBelongsToView(n,a)&&!runCustomHandler(n,a)&&(n.editable||!(a.type in editHandlers))&&o(n,a)},passiveHandlers[e]?{passive:!0}:void 0)}safari$1&&n.dom.addEventListener("input",()=>null),ensureListeners(n)}function setSelectionOrigin(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function destroyInput(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function ensureListeners(n){n.someProp("handleDOMEvents",e=>{for(let o in e)n.input.eventHandlers[o]||n.dom.addEventListener(o,n.input.eventHandlers[o]=a=>runCustomHandler(n,a))})}function runCustomHandler(n,e){return n.someProp("handleDOMEvents",o=>{let a=o[e.type];return a?a(n,e)||e.defaultPrevented:!1})}function eventBelongsToView(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let o=e.target;o!=n.dom;o=o.parentNode)if(!o||o.nodeType==11||o.pmViewDesc&&o.pmViewDesc.stopEvent(e))return!1;return!0}function dispatchEvent(n,e){!runCustomHandler(n,e)&&handlers$1[e.type]&&(n.editable||!(e.type in editHandlers))&&handlers$1[e.type](n,e)}editHandlers.keydown=(n,e)=>{let o=e;if(n.input.shiftKey=o.keyCode==16||o.shiftKey,!inOrNearComposition(n,o)&&(n.input.lastKeyCode=o.keyCode,n.input.lastKeyCodeTime=Date.now(),!(android$1&&chrome$1&&o.keyCode==13)))if(o.keyCode!=229&&n.domObserver.forceFlush(),ios$1&&o.keyCode==13&&!o.ctrlKey&&!o.altKey&&!o.metaKey){let a=Date.now();n.input.lastIOSEnter=a,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==a&&(n.someProp("handleKeyDown",s=>s(n,keyEvent(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",a=>a(n,o))||captureKeyDown(n,o)?o.preventDefault():setSelectionOrigin(n,"key")},editHandlers.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)},editHandlers.keypress=(n,e)=>{let o=e;if(inOrNearComposition(n,o)||!o.charCode||o.ctrlKey&&!o.altKey||mac$2&&o.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,o))){o.preventDefault();return}let a=n.state.selection;if(!(a instanceof TextSelection)||!a.$from.sameParent(a.$to)){let s=String.fromCharCode(o.charCode);!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",l=>l(n,a.$from.pos,a.$to.pos,s))&&n.dispatch(n.state.tr.insertText(s).scrollIntoView()),o.preventDefault()}};function eventCoords(n){return{left:n.clientX,top:n.clientY}}function isNear(n,e){let o=e.x-n.clientX,a=e.y-n.clientY;return o*o+a*a<100}function runHandlerOnContext(n,e,o,a,s){if(a==-1)return!1;let l=n.state.doc.resolve(a);for(let c=l.depth+1;c>0;c--)if(n.someProp(e,d=>c>l.depth?d(n,o,l.nodeAfter,l.before(c),s,!0):d(n,o,l.node(c),l.before(c),s,!1)))return!0;return!1}function updateSelection(n,e,o){if(n.focused||n.focus(),n.state.selection.eq(e))return;let a=n.state.tr.setSelection(e);a.setMeta("pointer",!0),n.dispatch(a)}function selectClickedLeaf(n,e){if(e==-1)return!1;let o=n.state.doc.resolve(e),a=o.nodeAfter;return a&&a.isAtom&&NodeSelection.isSelectable(a)?(updateSelection(n,new NodeSelection(o)),!0):!1}function selectClickedNode(n,e){if(e==-1)return!1;let o=n.state.selection,a,s;o instanceof NodeSelection&&(a=o.node);let l=n.state.doc.resolve(e);for(let c=l.depth+1;c>0;c--){let d=c>l.depth?l.nodeAfter:l.node(c);if(NodeSelection.isSelectable(d)){a&&o.$from.depth>0&&c>=o.$from.depth&&l.before(o.$from.depth+1)==o.$from.pos?s=l.before(o.$from.depth):s=l.before(c);break}}return s!=null?(updateSelection(n,NodeSelection.create(n.state.doc,s)),!0):!1}function handleSingleClick(n,e,o,a,s){return runHandlerOnContext(n,"handleClickOn",e,o,a)||n.someProp("handleClick",l=>l(n,e,a))||(s?selectClickedNode(n,o):selectClickedLeaf(n,o))}function handleDoubleClick(n,e,o,a){return runHandlerOnContext(n,"handleDoubleClickOn",e,o,a)||n.someProp("handleDoubleClick",s=>s(n,e,a))}function handleTripleClick(n,e,o,a){return runHandlerOnContext(n,"handleTripleClickOn",e,o,a)||n.someProp("handleTripleClick",s=>s(n,e,a))||defaultTripleClick(n,o,a)}function defaultTripleClick(n,e,o){if(o.button!=0)return!1;let a=n.state.doc;if(e==-1)return a.inlineContent?(updateSelection(n,TextSelection.create(a,0,a.content.size)),!0):!1;let s=a.resolve(e);for(let l=s.depth+1;l>0;l--){let c=l>s.depth?s.nodeAfter:s.node(l),d=s.before(l);if(c.inlineContent)updateSelection(n,TextSelection.create(a,d+1,d+1+c.content.size));else if(NodeSelection.isSelectable(c))updateSelection(n,NodeSelection.create(a,d));else continue;return!0}}function forceDOMFlush(n){return endComposition(n)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers$1.mousedown=(n,e)=>{let o=e;n.input.shiftKey=o.shiftKey;let a=forceDOMFlush(n),s=Date.now(),l="singleClick";s-n.input.lastClick.time<500&&isNear(o,n.input.lastClick)&&!o[selectNodeModifier]&&(n.input.lastClick.type=="singleClick"?l="doubleClick":n.input.lastClick.type=="doubleClick"&&(l="tripleClick")),n.input.lastClick={time:s,x:o.clientX,y:o.clientY,type:l};let c=n.posAtCoords(eventCoords(o));c&&(l=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new MouseDown(n,c,o,!!a)):(l=="doubleClick"?handleDoubleClick:handleTripleClick)(n,c.pos,c.inside,o)?o.preventDefault():setSelectionOrigin(n,"pointer"))};class MouseDown{constructor(e,o,a,s){this.view=e,this.pos=o,this.event=a,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!a[selectNodeModifier],this.allowDefault=a.shiftKey;let l,c;if(o.inside>-1)l=e.state.doc.nodeAt(o.inside),c=o.inside;else{let v=e.state.doc.resolve(o.pos);l=v.parent,c=v.depth?v.before():0}const d=s?null:a.target,u=d?e.docView.nearestDesc(d,!0):null;this.target=u&&u.dom.nodeType==1?u.dom:null;let{selection:f}=e.state;(a.button==0&&l.type.spec.draggable&&l.type.spec.selectable!==!1||f instanceof NodeSelection&&f.from<=c&&f.to>c)&&(this.mightDrag={node:l,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko$1&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let o=this.pos;this.view.state.doc!=this.startDoc&&(o=this.view.posAtCoords(eventCoords(e))),this.updateAllowDefault(e),this.allowDefault||!o?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,o.pos,o.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||safari$1&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome$1&&!this.view.state.selection.visible&&Math.min(Math.abs(o.pos-this.view.state.selection.from),Math.abs(o.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(o.pos))),e.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(e){this.updateAllowDefault(e),setSelectionOrigin(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}handlers$1.touchstart=n=>{n.input.lastTouch=Date.now(),forceDOMFlush(n),setSelectionOrigin(n,"pointer")},handlers$1.touchmove=n=>{n.input.lastTouch=Date.now(),setSelectionOrigin(n,"pointer")},handlers$1.contextmenu=n=>forceDOMFlush(n);function inOrNearComposition(n,e){return n.composing?!0:safari$1&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android$1?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,o=e.selection.$to;if(e.selection instanceof TextSelection&&(e.storedMarks||!o.textOffset&&o.parentOffset&&o.nodeBefore.marks.some(a=>a.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||o.marks(),endComposition(n,!0),n.markCursor=null;else if(endComposition(n,!e.selection.empty),gecko$1&&e.selection.empty&&o.parentOffset&&!o.textOffset&&o.nodeBefore.marks.length){let a=n.domSelectionRange();for(let s=a.focusNode,l=a.focusOffset;s&&s.nodeType==1&&l!=0;){let c=l<0?s.lastChild:s.childNodes[l-1];if(!c)break;if(c.nodeType==3){let d=n.domSelection();d&&d.collapse(c,c.nodeValue.length);break}else s=c,l=-1}}n.input.composing=!0}scheduleComposeEnd(n,timeoutComposition)},editHandlers.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,scheduleComposeEnd(n,20))};function scheduleComposeEnd(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>endComposition(n),e))}function clearComposition(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=timestampFromCustomEvent());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode$1(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let o=textNodeBefore$1(e.focusNode,e.focusOffset),a=textNodeAfter$1(e.focusNode,e.focusOffset);if(o&&a&&o!=a){let s=a.pmViewDesc,l=n.domObserver.lastChangedTextNode;if(o==l||a==l)return l;if(!s||!s.isText(a.nodeValue))return a;if(n.input.compositionNode==a){let c=o.pmViewDesc;if(!(!c||!c.isText(o.nodeValue)))return a}}return o||a}function timestampFromCustomEvent(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function endComposition(n,e=!1){if(!(android$1&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),clearComposition(n),e||n.docView&&n.docView.dirty){let o=selectionFromDOM(n);return o&&!o.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(o)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function captureCopy$1(n,e){if(!n.dom.parentNode)return;let o=n.dom.parentNode.appendChild(document.createElement("div"));o.appendChild(e),o.style.cssText="position: fixed; left: -10000px; top: 10px";let a=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),a.removeAllRanges(),a.addRange(s),setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o),n.focus()},50)}const brokenClipboardAPI$1=ie$2&&ie_version<15||ios$1&&webkit_version<604;handlers$1.copy=editHandlers.cut=(n,e)=>{let o=e,a=n.state.selection,s=o.type=="cut";if(a.empty)return;let l=brokenClipboardAPI$1?null:o.clipboardData,c=a.content(),{dom:d,text:u}=serializeForClipboard(n,c);l?(o.preventDefault(),l.clearData(),l.setData("text/html",d.innerHTML),l.setData("text/plain",u)):captureCopy$1(n,d),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function capturePaste$1(n,e){if(!n.dom.parentNode)return;let o=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,a=n.dom.parentNode.appendChild(document.createElement(o?"textarea":"div"));o||(a.contentEditable="true"),a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),a.parentNode&&a.parentNode.removeChild(a),o?doPaste$1(n,a.value,null,s,e):doPaste$1(n,a.textContent,a.innerHTML,s,e)},50)}function doPaste$1(n,e,o,a,s){let l=parseFromClipboard(n,e,o,a,n.state.selection.$from);if(n.someProp("handlePaste",u=>u(n,s,l||Slice.empty)))return!0;if(!l)return!1;let c=sliceSingleNode(l),d=c?n.state.tr.replaceSelectionWith(c,a):n.state.tr.replaceSelection(l);return n.dispatch(d.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let o=n.getData("text/uri-list");return o?o.replace(/\r?\n/g," "):""}editHandlers.paste=(n,e)=>{let o=e;if(n.composing&&!android$1)return;let a=brokenClipboardAPI$1?null:o.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;a&&doPaste$1(n,getText(a),a.getData("text/html"),s,o)?o.preventDefault():capturePaste$1(n,o)};class Dragging{constructor(e,o,a){this.slice=e,this.move=o,this.node=a}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";handlers$1.dragstart=(n,e)=>{let o=e,a=n.input.mouseDown;if(a&&a.done(),!o.dataTransfer)return;let s=n.state.selection,l=s.empty?null:n.posAtCoords(eventCoords(o)),c;if(!(l&&l.pos>=s.from&&l.pos<=(s instanceof NodeSelection?s.to-1:s.to))){if(a&&a.mightDrag)c=NodeSelection.create(n.state.doc,a.mightDrag.pos);else if(o.target&&o.target.nodeType==1){let b=n.docView.nearestDesc(o.target,!0);b&&b.node.type.spec.draggable&&b!=n.docView&&(c=NodeSelection.create(n.state.doc,b.posBefore))}}let d=(c||n.state.selection).content(),{dom:u,text:f,slice:v}=serializeForClipboard(n,d);(!o.dataTransfer.files.length||!chrome$1||chrome_version>120)&&o.dataTransfer.clearData(),o.dataTransfer.setData(brokenClipboardAPI$1?"Text":"text/html",u.innerHTML),o.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI$1||o.dataTransfer.setData("text/plain",f),n.dragging=new Dragging(v,!o[dragCopyModifier],c)},handlers$1.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)},editHandlers.dragover=editHandlers.dragenter=(n,e)=>e.preventDefault(),editHandlers.drop=(n,e)=>{let o=e,a=n.dragging;if(n.dragging=null,!o.dataTransfer)return;let s=n.posAtCoords(eventCoords(o));if(!s)return;let l=n.state.doc.resolve(s.pos),c=a&&a.slice;c?n.someProp("transformPasted",_=>{c=_(c,n)}):c=parseFromClipboard(n,getText(o.dataTransfer),brokenClipboardAPI$1?null:o.dataTransfer.getData("text/html"),!1,l);let d=!!(a&&!o[dragCopyModifier]);if(n.someProp("handleDrop",_=>_(n,o,c||Slice.empty,d))){o.preventDefault();return}if(!c)return;o.preventDefault();let u=c?dropPoint(n.state.doc,l.pos,c):l.pos;u==null&&(u=l.pos);let f=n.state.tr;if(d){let{node:_}=a;_?_.replace(f):f.deleteSelection()}let v=f.mapping.map(u),b=c.openStart==0&&c.openEnd==0&&c.content.childCount==1,k=f.doc;if(b?f.replaceRangeWith(v,v,c.content.firstChild):f.replaceRange(v,v,c),f.doc.eq(k))return;let x=f.doc.resolve(v);if(b&&NodeSelection.isSelectable(c.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(c.content.firstChild))f.setSelection(new NodeSelection(x));else{let _=f.mapping.map(u);f.mapping.maps[f.mapping.maps.length-1].forEach((E,B,M,V)=>_=V),f.setSelection(selectionBetween(n,x,f.doc.resolve(_)))}n.focus(),n.dispatch(f.setMeta("uiEvent","drop"))},handlers$1.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&selectionToDOM(n)},20))},handlers$1.blur=(n,e)=>{let o=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),o.relatedTarget&&n.dom.contains(o.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)},handlers$1.beforeinput=(n,e)=>{if(chrome$1&&android$1&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:o}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=o||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,keyEvent(8,"Backspace")))))return;let{$cursor:a}=n.state.selection;a&&a.pos>0&&n.dispatch(n.state.tr.delete(a.pos-1,a.pos).scrollIntoView())},50)}};for(let n in editHandlers)handlers$1[n]=editHandlers[n];function compareObjs(n,e){if(n==e)return!0;for(let o in n)if(n[o]!==e[o])return!1;for(let o in e)if(!(o in n))return!1;return!0}let WidgetType$1=class hn{constructor(e,o){this.toDOM=e,this.spec=o||noSpec,this.side=this.spec.side||0}map(e,o,a,s){let{pos:l,deleted:c}=e.mapResult(o.from+s,this.side<0?-1:1);return c?null:new Decoration$1(l-a,l-a,this)}valid(){return!0}eq(e){return this==e||e instanceof hn&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&compareObjs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}};class InlineType{constructor(e,o){this.attrs=e,this.spec=o||noSpec}map(e,o,a,s){let l=e.map(o.from+s,this.spec.inclusiveStart?-1:1)-a,c=e.map(o.to+s,this.spec.inclusiveEnd?1:-1)-a;return l>=c?null:new Decoration$1(l,c,this)}valid(e,o){return o.from<o.to}eq(e){return this==e||e instanceof InlineType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}static is(e){return e.type instanceof InlineType}destroy(){}}let NodeType$1=class pn{constructor(e,o){this.attrs=e,this.spec=o||noSpec}map(e,o,a,s){let l=e.mapResult(o.from+s,1);if(l.deleted)return null;let c=e.mapResult(o.to+s,-1);return c.deleted||c.pos<=l.pos?null:new Decoration$1(l.pos-a,c.pos-a,this)}valid(e,o){let{index:a,offset:s}=e.content.findIndex(o.from),l;return s==o.from&&!(l=e.child(a)).isText&&s+l.nodeSize==o.to}eq(e){return this==e||e instanceof pn&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}destroy(){}},Decoration$1=class tn{constructor(e,o,a){this.from=e,this.to=o,this.type=a}copy(e,o){return new tn(e,o,this.type)}eq(e,o=0){return this.type.eq(e.type)&&this.from+o==e.from&&this.to+o==e.to}map(e,o,a){return this.type.map(e,this,o,a)}static widget(e,o,a){return new tn(e,e,new WidgetType$1(o,a))}static inline(e,o,a,s){return new tn(e,o,new InlineType(a,s))}static node(e,o,a,s){return new tn(e,o,new NodeType$1(a,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType$1}};const none$2=[],noSpec={};class DecorationSet{constructor(e,o){this.local=e.length?e:none$2,this.children=o.length?o:none$2}static create(e,o){return o.length?buildTree$2(o,e,0,noSpec):empty}find(e,o,a){let s=[];return this.findInner(e??0,o??1e9,s,0,a),s}findInner(e,o,a,s,l){for(let c=0;c<this.local.length;c++){let d=this.local[c];d.from<=o&&d.to>=e&&(!l||l(d.spec))&&a.push(d.copy(d.from+s,d.to+s))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<o&&this.children[c+1]>e){let d=this.children[c]+1;this.children[c+2].findInner(e-d,o-d,a,s+d,l)}}map(e,o,a){return this==empty||e.maps.length==0?this:this.mapInner(e,o,0,0,a||noSpec)}mapInner(e,o,a,s,l){let c;for(let d=0;d<this.local.length;d++){let u=this.local[d].map(e,a,s);u&&u.type.valid(o,u)?(c||(c=[])).push(u):l.onRemove&&l.onRemove(this.local[d].spec)}return this.children.length?mapChildren(this.children,c||[],e,o,a,s,l):c?new DecorationSet(c.sort(byPos),none$2):empty}add(e,o){return o.length?this==empty?DecorationSet.create(e,o):this.addInner(e,o,0):this}addInner(e,o,a){let s,l=0;e.forEach((d,u)=>{let f=u+a,v;if(v=takeSpansForNode(o,d,f)){for(s||(s=this.children.slice());l<s.length&&s[l]<u;)l+=3;s[l]==u?s[l+2]=s[l+2].addInner(d,v,f+1):s.splice(l,0,u,u+d.nodeSize,buildTree$2(v,d,f+1,noSpec)),l+=3}});let c=moveSpans(l?withoutNulls(o):o,-a);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||c.splice(d--,1);return new DecorationSet(c.length?this.local.concat(c).sort(byPos):this.local,s||this.children)}remove(e){return e.length==0||this==empty?this:this.removeInner(e,0)}removeInner(e,o){let a=this.children,s=this.local;for(let l=0;l<a.length;l+=3){let c,d=a[l]+o,u=a[l+1]+o;for(let v=0,b;v<e.length;v++)(b=e[v])&&b.from>d&&b.to<u&&(e[v]=null,(c||(c=[])).push(b));if(!c)continue;a==this.children&&(a=this.children.slice());let f=a[l+2].removeInner(c,d+1);f!=empty?a[l+2]=f:(a.splice(l,3),l-=3)}if(s.length){for(let l=0,c;l<e.length;l++)if(c=e[l])for(let d=0;d<s.length;d++)s[d].eq(c,o)&&(s==this.local&&(s=this.local.slice()),s.splice(d--,1))}return a==this.children&&s==this.local?this:s.length||a.length?new DecorationSet(s,a):empty}forChild(e,o){if(this==empty)return this;if(o.isLeaf)return DecorationSet.empty;let a,s;for(let d=0;d<this.children.length;d+=3)if(this.children[d]>=e){this.children[d]==e&&(a=this.children[d+2]);break}let l=e+1,c=l+o.content.size;for(let d=0;d<this.local.length;d++){let u=this.local[d];if(u.from<c&&u.to>l&&u.type instanceof InlineType){let f=Math.max(l,u.from)-l,v=Math.min(c,u.to)-l;f<v&&(s||(s=[])).push(u.copy(f,v))}}if(s){let d=new DecorationSet(s.sort(byPos),none$2);return a?new DecorationGroup([d,a]):d}return a||empty}eq(e){if(this==e)return!0;if(!(e instanceof DecorationSet)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let o=0;o<this.local.length;o++)if(!this.local[o].eq(e.local[o]))return!1;for(let o=0;o<this.children.length;o+=3)if(this.children[o]!=e.children[o]||this.children[o+1]!=e.children[o+1]||!this.children[o+2].eq(e.children[o+2]))return!1;return!0}locals(e){return removeOverlap(this.localsInner(e))}localsInner(e){if(this==empty)return none$2;if(e.inlineContent||!this.local.some(InlineType.is))return this.local;let o=[];for(let a=0;a<this.local.length;a++)this.local[a].type instanceof InlineType||o.push(this.local[a]);return o}forEachSet(e){e(this)}}DecorationSet.empty=new DecorationSet([],[]),DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(e){this.members=e}map(e,o){const a=this.members.map(s=>s.map(e,o,noSpec));return DecorationGroup.from(a)}forChild(e,o){if(o.isLeaf)return DecorationSet.empty;let a=[];for(let s=0;s<this.members.length;s++){let l=this.members[s].forChild(e,o);l!=empty&&(l instanceof DecorationGroup?a=a.concat(l.members):a.push(l))}return DecorationGroup.from(a)}eq(e){if(!(e instanceof DecorationGroup)||e.members.length!=this.members.length)return!1;for(let o=0;o<this.members.length;o++)if(!this.members[o].eq(e.members[o]))return!1;return!0}locals(e){let o,a=!0;for(let s=0;s<this.members.length;s++){let l=this.members[s].localsInner(e);if(l.length)if(!o)o=l;else{a&&(o=o.slice(),a=!1);for(let c=0;c<l.length;c++)o.push(l[c])}}return o?removeOverlap(a?o:o.sort(byPos)):none$2}static from(e){switch(e.length){case 0:return empty;case 1:return e[0];default:return new DecorationGroup(e.every(o=>o instanceof DecorationSet)?e:e.reduce((o,a)=>o.concat(a instanceof DecorationSet?a:a.members),[]))}}forEachSet(e){for(let o=0;o<this.members.length;o++)this.members[o].forEachSet(e)}}function mapChildren(n,e,o,a,s,l,c){let d=n.slice();for(let f=0,v=l;f<o.maps.length;f++){let b=0;o.maps[f].forEach((k,x,_,E)=>{let B=E-_-(x-k);for(let M=0;M<d.length;M+=3){let V=d[M+1];if(V<0||k>V+v-b)continue;let F=d[M]+v-b;x>=F?d[M+1]=k<=F?-2:-1:k>=v&&B&&(d[M]+=B,d[M+1]+=B)}b+=B}),v=o.maps[f].map(v,-1)}let u=!1;for(let f=0;f<d.length;f+=3)if(d[f+1]<0){if(d[f+1]==-2){u=!0,d[f+1]=-1;continue}let v=o.map(n[f]+l),b=v-s;if(b<0||b>=a.content.size){u=!0;continue}let k=o.map(n[f+1]+l,-1),x=k-s,{index:_,offset:E}=a.content.findIndex(b),B=a.maybeChild(_);if(B&&E==b&&E+B.nodeSize==x){let M=d[f+2].mapInner(o,B,v+1,n[f]+l+1,c);M!=empty?(d[f]=b,d[f+1]=x,d[f+2]=M):(d[f+1]=-2,u=!0)}else u=!0}if(u){let f=mapAndGatherRemainingDecorations(d,n,e,o,s,l,c),v=buildTree$2(f,a,0,c);e=v.local;for(let b=0;b<d.length;b+=3)d[b+1]<0&&(d.splice(b,3),b-=3);for(let b=0,k=0;b<v.children.length;b+=3){let x=v.children[b];for(;k<d.length&&d[k]<x;)k+=3;d.splice(k,0,v.children[b],v.children[b+1],v.children[b+2])}}return new DecorationSet(e.sort(byPos),d)}function moveSpans(n,e){if(!e||!n.length)return n;let o=[];for(let a=0;a<n.length;a++){let s=n[a];o.push(new Decoration$1(s.from+e,s.to+e,s.type))}return o}function mapAndGatherRemainingDecorations(n,e,o,a,s,l,c){function d(u,f){for(let v=0;v<u.local.length;v++){let b=u.local[v].map(a,s,f);b?o.push(b):c.onRemove&&c.onRemove(u.local[v].spec)}for(let v=0;v<u.children.length;v+=3)d(u.children[v+2],u.children[v]+f+1)}for(let u=0;u<n.length;u+=3)n[u+1]==-1&&d(n[u+2],e[u]+l+1);return o}function takeSpansForNode(n,e,o){if(e.isLeaf)return null;let a=o+e.nodeSize,s=null;for(let l=0,c;l<n.length;l++)(c=n[l])&&c.from>o&&c.to<a&&((s||(s=[])).push(c),n[l]=null);return s}function withoutNulls(n){let e=[];for(let o=0;o<n.length;o++)n[o]!=null&&e.push(n[o]);return e}function buildTree$2(n,e,o,a){let s=[],l=!1;e.forEach((d,u)=>{let f=takeSpansForNode(n,d,u+o);if(f){l=!0;let v=buildTree$2(f,d,o+u+1,a);v!=empty&&s.push(u,u+d.nodeSize,v)}});let c=moveSpans(l?withoutNulls(n):n,-o).sort(byPos);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||(a.onRemove&&a.onRemove(c[d].spec),c.splice(d--,1));return c.length||s.length?new DecorationSet(c,s):empty}function byPos(n,e){return n.from-e.from||n.to-e.to}function removeOverlap(n){let e=n;for(let o=0;o<e.length-1;o++){let a=e[o];if(a.from!=a.to)for(let s=o+1;s<e.length;s++){let l=e[s];if(l.from==a.from){l.to!=a.to&&(e==n&&(e=n.slice()),e[s]=l.copy(l.from,a.to),insertAhead(e,s+1,l.copy(a.to,l.to)));continue}else{l.from<a.to&&(e==n&&(e=n.slice()),e[o]=a.copy(a.from,l.from),insertAhead(e,s,a.copy(l.from,a.to)));break}}}return e}function insertAhead(n,e,o){for(;e<n.length&&byPos(o,n[e])>0;)e++;n.splice(e,0,o)}function viewDecorations(n){let e=[];return n.someProp("decorations",o=>{let a=o(n.state);a&&a!=empty&&e.push(a)}),n.cursorWrapper&&e.push(DecorationSet.create(n.state.doc,[n.cursorWrapper.deco])),DecorationGroup.from(e)}const observeOptions$1={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData$1=ie$2&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}let DOMObserver$1=class{constructor(n,e){this.view=n,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(o=>{for(let a=0;a<o.length;a++)this.queue.push(o[a]);ie$2&&ie_version<=11&&o.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData$1&&(this.onCharData=o=>{this.queue.push({target:o.target,type:"characterData",oldValue:o.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions$1)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let n=this.observer.takeRecords();if(n.length){for(let e=0;e<n.length;e++)this.queue.push(n[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$2&&ie_version<=11&&!this.view.state.selection.empty){let n=this.view.domSelectionRange();if(n.focusNode&&isEquivalentPosition$1(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(n){if(!n.focusNode)return!0;let e=new Set,o;for(let s=n.focusNode;s;s=parentNode(s))e.add(s);for(let s=n.anchorNode;s;s=parentNode(s))if(e.has(s)){o=s;break}let a=o&&this.view.docView.nearestDesc(o);if(a&&a.ignoreMutation({type:"selection",target:o.nodeType==3?o.parentNode:o}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let n of this.observer.takeRecords())this.queue.push(n);return this.queue}flush(){let{view:n}=this;if(!n.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let o=n.domSelectionRange(),a=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(o)&&hasFocusAndSelection(n)&&!this.ignoreSelectionChange(o),s=-1,l=-1,c=!1,d=[];if(n.editable)for(let f=0;f<e.length;f++){let v=this.registerMutation(e[f],d);v&&(s=s<0?v.from:Math.min(v.from,s),l=l<0?v.to:Math.max(v.to,l),v.typeOver&&(c=!0))}if(gecko$1&&d.length){let f=d.filter(v=>v.nodeName=="BR");if(f.length==2){let[v,b]=f;v.parentNode&&v.parentNode.parentNode==b.parentNode?b.remove():v.remove()}else{let{focusNode:v}=this.currentSelection;for(let b of f){let k=b.parentNode;k&&k.nodeName=="LI"&&(!v||blockParent(n,v)!=k)&&b.remove()}}}let u=null;s<0&&a&&n.input.lastFocus>Date.now()-200&&Math.max(n.input.lastTouch,n.input.lastClick.time)<Date.now()-300&&selectionCollapsed(o)&&(u=selectionFromDOM(n))&&u.eq(Selection.near(n.state.doc.resolve(0),1))?(n.input.lastFocus=0,selectionToDOM(n),this.currentSelection.set(o),n.scrollToSelection()):(s>-1||a)&&(s>-1&&(n.docView.markDirty(s,l),checkCSS(n)),this.handleDOMChange(s,l,c,d),n.docView&&n.docView.dirty?n.updateState(n.state):this.currentSelection.eq(o)||selectionToDOM(n),this.currentSelection.set(o))}registerMutation(n,e){if(e.indexOf(n.target)>-1)return null;let o=this.view.docView.nearestDesc(n.target);if(n.type=="attributes"&&(o==this.view.docView||n.attributeName=="contenteditable"||n.attributeName=="style"&&!n.oldValue&&!n.target.getAttribute("style"))||!o||o.ignoreMutation(n))return null;if(n.type=="childList"){for(let f=0;f<n.addedNodes.length;f++){let v=n.addedNodes[f];e.push(v),v.nodeType==3&&(this.lastChangedTextNode=v)}if(o.contentDOM&&o.contentDOM!=o.dom&&!o.contentDOM.contains(n.target))return{from:o.posBefore,to:o.posAfter};let a=n.previousSibling,s=n.nextSibling;if(ie$2&&ie_version<=11&&n.addedNodes.length)for(let f=0;f<n.addedNodes.length;f++){let{previousSibling:v,nextSibling:b}=n.addedNodes[f];(!v||Array.prototype.indexOf.call(n.addedNodes,v)<0)&&(a=v),(!b||Array.prototype.indexOf.call(n.addedNodes,b)<0)&&(s=b)}let l=a&&a.parentNode==n.target?domIndex$1(a)+1:0,c=o.localPosFromDOM(n.target,l,-1),d=s&&s.parentNode==n.target?domIndex$1(s):n.target.childNodes.length,u=o.localPosFromDOM(n.target,d,1);return{from:c,to:u}}else return n.type=="attributes"?{from:o.posAtStart-o.border,to:o.posAtEnd+o.border}:(this.lastChangedTextNode=n.target,{from:o.posAtStart,to:o.posAtEnd,typeOver:n.target.nodeValue==n.oldValue})}},cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(n){if(!cssChecked.has(n)&&(cssChecked.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=gecko$1,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(n,e){let o=e.startContainer,a=e.startOffset,s=e.endContainer,l=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return isEquivalentPosition$1(c.node,c.offset,s,l)&&([o,a,s,l]=[s,l,o,a]),{anchorNode:o,anchorOffset:a,focusNode:s,focusOffset:l}}function safariShadowSelectionRange(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return rangeToSelectionRange(n,s)}let o;function a(s){s.preventDefault(),s.stopImmediatePropagation(),o=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",a,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",a,!0),o?rangeToSelectionRange(n,o):null}function blockParent(n,e){for(let o=e.parentNode;o&&o!=n.dom;o=o.parentNode){let a=n.docView.nearestDesc(o,!0);if(a&&a.node.isBlock)return o}return null}function parseBetween(n,e,o){let{node:a,fromOffset:s,toOffset:l,from:c,to:d}=n.docView.parseRange(e,o),u=n.domSelectionRange(),f,v=u.anchorNode;if(v&&n.dom.contains(v.nodeType==1?v:v.parentNode)&&(f=[{node:v,offset:u.anchorOffset}],selectionCollapsed(u)||f.push({node:u.focusNode,offset:u.focusOffset})),chrome$1&&n.input.lastKeyCode===8)for(let B=l;B>s;B--){let M=a.childNodes[B-1],V=M.pmViewDesc;if(M.nodeName=="BR"&&!V){l=B;break}if(!V||V.size)break}let b=n.state.doc,k=n.someProp("domParser")||DOMParser$1.fromSchema(n.state.schema),x=b.resolve(c),_=null,E=k.parse(a,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:s,to:l,preserveWhitespace:x.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode,context:x});if(f&&f[0].pos!=null){let B=f[0].pos,M=f[1]&&f[1].pos;M==null&&(M=B),_={anchor:B+c,head:M+c}}return{doc:E,sel:_,from:c,to:d}}function ruleFromNode(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(safari$1&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let o=document.createElement("div");return o.appendChild(document.createElement("li")),{skip:o}}else if(n.parentNode.lastChild==n||safari$1&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(n,e,o,a,s){let l=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let j=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,W=selectionFromDOM(n,j);if(W&&!n.state.selection.eq(W)){if(chrome$1&&android$1&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",G=>G(n,keyEvent(13,"Enter"))))return;let Y=n.state.tr.setSelection(W);j=="pointer"?Y.setMeta("pointer",!0):j=="key"&&Y.scrollIntoView(),l&&Y.setMeta("composition",l),n.dispatch(Y)}return}let c=n.state.doc.resolve(e),d=c.sharedDepth(o);e=c.before(d+1),o=n.state.doc.resolve(o).after(d+1);let u=n.state.selection,f=parseBetween(n,e,o),v=n.state.doc,b=v.slice(f.from,f.to),k,x;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(k=n.state.selection.to,x="end"):(k=n.state.selection.from,x="start"),n.input.lastKeyCode=null;let _=findDiff$1(b.content,f.doc.content,f.from,k,x);if(_&&n.input.domChangeCount++,(ios$1&&n.input.lastIOSEnter>Date.now()-225||android$1)&&s.some(j=>j.nodeType==1&&!isInline.test(j.nodeName))&&(!_||_.endA>=_.endB)&&n.someProp("handleKeyDown",j=>j(n,keyEvent(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!_)if(a&&u instanceof TextSelection&&!u.empty&&u.$head.sameParent(u.$anchor)&&!n.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))_={start:u.from,endA:u.to,endB:u.to};else{if(f.sel){let j=resolveSelection(n,n.state.doc,f.sel);if(j&&!j.eq(n.state.selection)){let W=n.state.tr.setSelection(j);l&&W.setMeta("composition",l),n.dispatch(W)}}return}n.state.selection.from<n.state.selection.to&&_.start==_.endB&&n.state.selection instanceof TextSelection&&(_.start>n.state.selection.from&&_.start<=n.state.selection.from+2&&n.state.selection.from>=f.from?_.start=n.state.selection.from:_.endA<n.state.selection.to&&_.endA>=n.state.selection.to-2&&n.state.selection.to<=f.to&&(_.endB+=n.state.selection.to-_.endA,_.endA=n.state.selection.to)),ie$2&&ie_version<=11&&_.endB==_.start+1&&_.endA==_.start&&_.start>f.from&&f.doc.textBetween(_.start-f.from-1,_.start-f.from+1)==" \xA0"&&(_.start--,_.endA--,_.endB--);let E=f.doc.resolveNoCache(_.start-f.from),B=f.doc.resolveNoCache(_.endB-f.from),M=v.resolve(_.start),V=E.sameParent(B)&&E.parent.inlineContent&&M.end()>=_.endA,F;if((ios$1&&n.input.lastIOSEnter>Date.now()-225&&(!V||s.some(j=>j.nodeName=="DIV"||j.nodeName=="P"))||!V&&E.pos<f.doc.content.size&&!E.sameParent(B)&&(F=Selection.findFrom(f.doc.resolve(E.pos+1),1,!0))&&F.head==B.pos)&&n.someProp("handleKeyDown",j=>j(n,keyEvent(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>_.start&&looksLikeBackspace(v,_.start,_.endA,E,B)&&n.someProp("handleKeyDown",j=>j(n,keyEvent(8,"Backspace")))){android$1&&chrome$1&&n.domObserver.suppressSelectionUpdates();return}chrome$1&&_.endB==_.start&&(n.input.lastChromeDelete=Date.now()),android$1&&!V&&E.start()!=B.start()&&B.parentOffset==0&&E.depth==B.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==_.endA&&(_.endB-=2,B=f.doc.resolveNoCache(_.endB-f.from),setTimeout(()=>{n.someProp("handleKeyDown",function(j){return j(n,keyEvent(13,"Enter"))})},20));let I=_.start,L=_.endA,U,Z,K;if(V){if(E.pos==B.pos)ie$2&&ie_version<=11&&E.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(n),20)),U=n.state.tr.delete(I,L),Z=v.resolve(_.start).marksAcross(v.resolve(_.endA));else if(_.endA==_.endB&&(K=isMarkChange(E.parent.content.cut(E.parentOffset,B.parentOffset),M.parent.content.cut(M.parentOffset,_.endA-M.start()))))U=n.state.tr,K.type=="add"?U.addMark(I,L,K.mark):U.removeMark(I,L,K.mark);else if(E.parent.child(E.index()).isText&&E.index()==B.index()-(B.textOffset?0:1)){let j=E.parent.textBetween(E.parentOffset,B.parentOffset);if(n.someProp("handleTextInput",W=>W(n,I,L,j)))return;U=n.state.tr.insertText(j,I,L)}}if(U||(U=n.state.tr.replace(I,L,f.doc.slice(_.start-f.from,_.endB-f.from))),f.sel){let j=resolveSelection(n,U.doc,f.sel);j&&!(chrome$1&&n.composing&&j.empty&&(_.start!=_.endB||n.input.lastChromeDelete<Date.now()-100)&&(j.head==I||j.head==U.mapping.map(L)-1)||ie$2&&j.empty&&j.head==I)&&U.setSelection(j)}Z&&U.ensureMarks(Z),l&&U.setMeta("composition",l),n.dispatch(U.scrollIntoView())}function resolveSelection(n,e,o){return Math.max(o.anchor,o.head)>e.content.size?null:selectionBetween(n,e.resolve(o.anchor),e.resolve(o.head))}function isMarkChange(n,e){let o=n.firstChild.marks,a=e.firstChild.marks,s=o,l=a,c,d,u;for(let v=0;v<a.length;v++)s=a[v].removeFromSet(s);for(let v=0;v<o.length;v++)l=o[v].removeFromSet(l);if(s.length==1&&l.length==0)d=s[0],c="add",u=v=>v.mark(d.addToSet(v.marks));else if(s.length==0&&l.length==1)d=l[0],c="remove",u=v=>v.mark(d.removeFromSet(v.marks));else return null;let f=[];for(let v=0;v<e.childCount;v++)f.push(u(e.child(v)));if(Fragment.from(f).eq(n))return{mark:d,type:c}}function looksLikeBackspace(n,e,o,a,s){if(o-e<=s.pos-a.pos||skipClosingAndOpening(a,!0,!1)<s.pos)return!1;let l=n.resolve(e);if(!a.parent.isTextblock){let d=l.nodeAfter;return d!=null&&o==e+d.nodeSize}if(l.parentOffset<l.parent.content.size||!l.parent.isTextblock)return!1;let c=n.resolve(skipClosingAndOpening(l,!0,!0));return!c.parent.isTextblock||c.pos>o||skipClosingAndOpening(c,!0,!1)<o?!1:a.parent.content.cut(a.parentOffset).eq(c.parent.content)}function skipClosingAndOpening(n,e,o){let a=n.depth,s=e?n.end():n.pos;for(;a>0&&(e||n.indexAfter(a)==n.node(a).childCount);)a--,s++,e=!1;if(o){let l=n.node(a).maybeChild(n.indexAfter(a));for(;l&&!l.isLeaf;)l=l.firstChild,s++}return s}function findDiff$1(n,e,o,a,s){let l=n.findDiffStart(e,o);if(l==null)return null;let{a:c,b:d}=n.findDiffEnd(e,o+n.size,o+e.size);if(s=="end"){let u=Math.max(0,l-Math.min(c,d));a-=c+u-l}if(c<l&&n.size<e.size){let u=a<=l&&a>=c?l-a:0;l-=u,l&&l<e.size&&isSurrogatePair(e.textBetween(l-1,l+1))&&(l+=u?1:-1),d=l+(d-c),c=l}else if(d<l){let u=a<=l&&a>=d?l-a:0;l-=u,l&&l<n.size&&isSurrogatePair(n.textBetween(l-1,l+1))&&(l+=u?1:-1),c=l+(c-d),d=l}return{start:l,endA:c,endB:d}}function isSurrogatePair(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),o=n.charCodeAt(1);return e>=56320&&e<=57343&&o>=55296&&o<=56319}let EditorView$1=class{constructor(n,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState$1,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=n&&n.mount||document.createElement("div"),n&&(n.appendChild?n.appendChild(this.dom):typeof n=="function"?n(this.dom):n.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver$1(this,(o,a,s,l)=>readDOMChange(this,o,a,s,l)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let n=this._props;this._props={};for(let e in n)this._props[e]=n[e];this._props.state=this.state}return this._props}update(n){n.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let e=this._props;this._props=n,n.plugins&&(n.plugins.forEach(checkStateComponent),this.directPlugins=n.plugins),this.updateStateInner(n.state,e)}setProps(n){let e={};for(let o in this._props)e[o]=this._props[o];e.state=this.state;for(let o in n)e[o]=n[o];this.update(e)}updateState(n){this.updateStateInner(n,this._props)}updateStateInner(n,e){var o;let a=this.state,s=!1,l=!1;n.storedMarks&&this.composing&&(clearComposition(this),l=!0),this.state=n;let c=a.plugins!=n.plugins||this._props.plugins!=e.plugins;if(c||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let k=buildNodeViews(this);changedNodeViews(k,this.nodeViews)&&(this.nodeViews=k,s=!0)}(c||e.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let d=viewDecorations(this),u=computeDocDeco(this),f=a.plugins!=n.plugins&&!a.doc.eq(n.doc)?"reset":n.scrollToSelection>a.scrollToSelection?"to selection":"preserve",v=s||!this.docView.matchesNode(n.doc,u,d);(v||!n.selection.eq(a.selection))&&(l=!0);let b=f=="preserve"&&l&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(l){this.domObserver.stop();let k=v&&(ie$2||chrome$1)&&!this.composing&&!a.selection.empty&&!n.selection.empty&&selectionContextChanged(a.selection,n.selection);if(v){let x=chrome$1?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode$1(this)),(s||!this.docView.update(n.doc,u,d,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=docViewDesc(n.doc,u,d,this.dom,this)),x&&!this.trackWrites&&(k=!0)}k||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,k):(syncNodeSelection(this,n.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(a),!((o=this.dragging)===null||o===void 0)&&o.node&&!a.doc.eq(n.doc)&&this.updateDraggedNode(this.dragging,a),f=="reset"?this.dom.scrollTop=0:f=="to selection"?this.scrollToSelection():b&&resetScrollPos(b)}scrollToSelection(){let n=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",e=>e(this)))if(this.state.selection instanceof NodeSelection){let e=this.docView.domAfterPos(this.state.selection.from);e.nodeType==1&&scrollRectIntoView$1(this,e.getBoundingClientRect(),n)}else scrollRectIntoView$1(this,this.coordsAtPos(this.state.selection.head,1),n)}destroyPluginViews(){let n;for(;n=this.pluginViews.pop();)n.destroy&&n.destroy()}updatePluginViews(n){if(!n||n.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let o=this.directPlugins[e];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let o=this.state.plugins[e];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}else for(let e=0;e<this.pluginViews.length;e++){let o=this.pluginViews[e];o.update&&o.update(this,n)}}updateDraggedNode(n,e){let o=n.node,a=-1;if(this.state.doc.nodeAt(o.from)==o.node)a=o.from;else{let s=o.from+(this.state.doc.content.size-e.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==o.node&&(a=s)}this.dragging=new Dragging(n.slice,n.move,a<0?void 0:NodeSelection.create(this.state.doc,a))}someProp(n,e){let o=this._props&&this._props[n],a;if(o!=null&&(a=e?e(o):o))return a;for(let l=0;l<this.directPlugins.length;l++){let c=this.directPlugins[l].props[n];if(c!=null&&(a=e?e(c):c))return a}let s=this.state.plugins;if(s)for(let l=0;l<s.length;l++){let c=s[l].props[n];if(c!=null&&(a=e?e(c):c))return a}}hasFocus(){if(ie$2){let n=this.root.activeElement;if(n==this.dom)return!0;if(!n||!this.dom.contains(n))return!1;for(;n&&this.dom!=n&&this.dom.contains(n);){if(n.contentEditable=="false")return!1;n=n.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll$1(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let n=this._root;if(n==null){for(let e=this.dom.parentNode;e;e=e.parentNode)if(e.nodeType==9||e.nodeType==11&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return n||document}updateRoot(){this._root=null}posAtCoords(n){return posAtCoords$1(this,n)}coordsAtPos(n,e=1){return coordsAtPos(this,n,e)}domAtPos(n,e=0){return this.docView.domFromPos(n,e)}nodeDOM(n){let e=this.docView.descAt(n);return e?e.nodeDOM:null}posAtDOM(n,e,o=-1){let a=this.docView.posFromDOM(n,e,o);if(a==null)throw new RangeError("DOM position not inside the editor");return a}endOfTextblock(n,e){return endOfTextblock(this,e||this.state,n)}pasteHTML(n,e){return doPaste$1(this,"",n,!1,e||new ClipboardEvent("paste"))}pasteText(n,e){return doPaste$1(this,n,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(n){return dispatchEvent(this,n)}dispatch(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))}domSelectionRange(){let n=this.domSelection();return n?safari$1&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,n)||n:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};function computeDocDeco(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",o=>{if(typeof o=="function"&&(o=o(n.state)),o)for(let a in o)a=="class"?e.class+=" "+o[a]:a=="style"?e.style=(e.style?e.style+";":"")+o[a]:!e[a]&&a!="contenteditable"&&a!="nodeName"&&(e[a]=String(o[a]))}),e.translate||(e.translate="no"),[Decoration$1.node(0,n.state.doc.content.size,e)]}function updateCursorWrapper(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Decoration$1.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function getEditable(n){return!n.someProp("editable",e=>e(n.state)===!1)}function selectionContextChanged(n,e){let o=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(o)!=e.$anchor.start(o)}function buildNodeViews(n){let e=Object.create(null);function o(a){for(let s in a)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=a[s])}return n.someProp("nodeViews",o),n.someProp("markViews",o),e}function changedNodeViews(n,e){let o=0,a=0;for(let s in n){if(n[s]!=e[s])return!0;o++}for(let s in e)a++;return o!=a}function checkStateComponent(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}let rangeFrom=[],rangeTo=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,o=0;e<n.length;e++)(e%2?rangeTo:rangeFrom).push(o=o+n[e])})();function isExtendingChar(n){if(n<768)return!1;for(let e=0,o=rangeFrom.length;;){let a=e+o>>1;if(n<rangeFrom[a])o=a;else if(n>=rangeTo[a])e=a+1;else return!0;if(e==o)return!1}}function isRegionalIndicator(n){return n>=127462&&n<=127487}const ZWJ=8205;function findClusterBreak$1(n,e,o=!0,a=!0){return(o?nextClusterBreak:prevClusterBreak)(n,e,a)}function nextClusterBreak(n,e,o){if(e==n.length)return e;e&&surrogateLow$1(n.charCodeAt(e))&&surrogateHigh$1(n.charCodeAt(e-1))&&e--;let a=codePointAt$1(n,e);for(e+=codePointSize$1(a);e<n.length;){let s=codePointAt$1(n,e);if(a==ZWJ||s==ZWJ||o&&isExtendingChar(s))e+=codePointSize$1(s),a=s;else if(isRegionalIndicator(s)){let l=0,c=e-2;for(;c>=0&&isRegionalIndicator(codePointAt$1(n,c));)l++,c-=2;if(l%2==0)break;e+=2}else break}return e}function prevClusterBreak(n,e,o){for(;e>0;){let a=nextClusterBreak(n,e-2,o);if(a<e)return a;e--}return 0}function codePointAt$1(n,e){let o=n.charCodeAt(e);if(!surrogateHigh$1(o)||e+1==n.length)return o;let a=n.charCodeAt(e+1);return surrogateLow$1(a)?(o-55296<<10)+(a-56320)+65536:o}function surrogateLow$1(n){return n>=56320&&n<57344}function surrogateHigh$1(n){return n>=55296&&n<56320}function codePointSize$1(n){return n<65536?1:2}class Text{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,o,a){[e,o]=clip$1(this,e,o);let s=[];return this.decompose(0,e,s,2),a.length&&a.decompose(0,a.length,s,3),this.decompose(o,this.length,s,1),TextNode$1.from(s,this.length-(o-e)+a.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,o=this.length){[e,o]=clip$1(this,e,o);let a=[];return this.decompose(e,o,a,0),TextNode$1.from(a,o-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let o=this.scanIdentical(e,1),a=this.length-this.scanIdentical(e,-1),s=new RawTextCursor(this),l=new RawTextCursor(e);for(let c=o,d=o;;){if(s.next(c),l.next(c),c=0,s.lineBreak!=l.lineBreak||s.done!=l.done||s.value!=l.value)return!1;if(d+=s.value.length,s.done||d>=a)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,o=this.length){return new PartialTextCursor(this,e,o)}iterLines(e,o){let a;if(e==null)a=this.iter();else{o==null&&(o=this.lines+1);let s=this.line(e).from;a=this.iterRange(s,Math.max(s,o==this.lines+1?this.length:o<=1?0:this.line(o-1).to))}return new LineCursor(a)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Text.empty:e.length<=32?new TextLeaf(e):TextNode$1.from(TextLeaf.split(e,[]))}}class TextLeaf extends Text{constructor(e,o=textLength(e)){super(),this.text=e,this.length=o}get lines(){return this.text.length}get children(){return null}lineInner(e,o,a,s){for(let l=0;;l++){let c=this.text[l],d=s+c.length;if((o?a:d)>=e)return new Line(s,d,a,c);s=d+1,a++}}decompose(e,o,a,s){let l=e<=0&&o>=this.length?this:new TextLeaf(sliceText(this.text,e,o),Math.min(o,this.length)-Math.max(0,e));if(s&1){let c=a.pop(),d=appendText(l.text,c.text.slice(),0,l.length);if(d.length<=32)a.push(new TextLeaf(d,c.length+l.length));else{let u=d.length>>1;a.push(new TextLeaf(d.slice(0,u)),new TextLeaf(d.slice(u)))}}else a.push(l)}replace(e,o,a){if(!(a instanceof TextLeaf))return super.replace(e,o,a);[e,o]=clip$1(this,e,o);let s=appendText(this.text,appendText(a.text,sliceText(this.text,0,e)),o),l=this.length+a.length-(o-e);return s.length<=32?new TextLeaf(s,l):TextNode$1.from(TextLeaf.split(s,[]),l)}sliceString(e,o=this.length,a=`
`){[e,o]=clip$1(this,e,o);let s="";for(let l=0,c=0;l<=o&&c<this.text.length;c++){let d=this.text[c],u=l+d.length;l>e&&c&&(s+=a),e<u&&o>l&&(s+=d.slice(Math.max(0,e-l),o-l)),l=u+1}return s}flatten(e){for(let o of this.text)e.push(o)}scanIdentical(){return 0}static split(e,o){let a=[],s=-1;for(let l of e)a.push(l),s+=l.length+1,a.length==32&&(o.push(new TextLeaf(a,s)),a=[],s=-1);return s>-1&&o.push(new TextLeaf(a,s)),o}}let TextNode$1=class Xt extends Text{constructor(e,o){super(),this.children=e,this.length=o,this.lines=0;for(let a of e)this.lines+=a.lines}lineInner(e,o,a,s){for(let l=0;;l++){let c=this.children[l],d=s+c.length,u=a+c.lines-1;if((o?u:d)>=e)return c.lineInner(e,o,a,s);s=d+1,a=u+1}}decompose(e,o,a,s){for(let l=0,c=0;c<=o&&l<this.children.length;l++){let d=this.children[l],u=c+d.length;if(e<=u&&o>=c){let f=s&((c<=e?1:0)|(u>=o?2:0));c>=e&&u<=o&&!f?a.push(d):d.decompose(e-c,o-c,a,f)}c=u+1}}replace(e,o,a){if([e,o]=clip$1(this,e,o),a.lines<this.lines)for(let s=0,l=0;s<this.children.length;s++){let c=this.children[s],d=l+c.length;if(e>=l&&o<=d){let u=c.replace(e-l,o-l,a),f=this.lines-c.lines+u.lines;if(u.lines<f>>4&&u.lines>f>>6){let v=this.children.slice();return v[s]=u,new Xt(v,this.length-(o-e)+a.length)}return super.replace(l,d,u)}l=d+1}return super.replace(e,o,a)}sliceString(e,o=this.length,a=`
`){[e,o]=clip$1(this,e,o);let s="";for(let l=0,c=0;l<this.children.length&&c<=o;l++){let d=this.children[l],u=c+d.length;c>e&&l&&(s+=a),e<u&&o>c&&(s+=d.sliceString(e-c,o-c,a)),c=u+1}return s}flatten(e){for(let o of this.children)o.flatten(e)}scanIdentical(e,o){if(!(e instanceof Xt))return 0;let a=0,[s,l,c,d]=o>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=o,l+=o){if(s==c||l==d)return a;let u=this.children[s],f=e.children[l];if(u!=f)return a+u.scanIdentical(f,o);a+=u.length+1}}static from(e,o=e.reduce((a,s)=>a+s.length+1,-1)){let a=0;for(let x of e)a+=x.lines;if(a<32){let x=[];for(let _ of e)_.flatten(x);return new TextLeaf(x,o)}let s=Math.max(32,a>>5),l=s<<1,c=s>>1,d=[],u=0,f=-1,v=[];function b(x){let _;if(x.lines>l&&x instanceof Xt)for(let E of x.children)b(E);else x.lines>c&&(u>c||!u)?(k(),d.push(x)):x instanceof TextLeaf&&u&&(_=v[v.length-1])instanceof TextLeaf&&x.lines+_.lines<=32?(u+=x.lines,f+=x.length+1,v[v.length-1]=new TextLeaf(_.text.concat(x.text),_.length+1+x.length)):(u+x.lines>s&&k(),u+=x.lines,f+=x.length+1,v.push(x))}function k(){u!=0&&(d.push(v.length==1?v[0]:Xt.from(v,f)),f=-1,u=v.length=0)}for(let x of e)b(x);return k(),d.length==1?d[0]:new Xt(d,o)}};Text.empty=new TextLeaf([""],0);function textLength(n){let e=-1;for(let o of n)e+=o.length+1;return e}function appendText(n,e,o=0,a=1e9){for(let s=0,l=0,c=!0;l<n.length&&s<=a;l++){let d=n[l],u=s+d.length;u>=o&&(u>a&&(d=d.slice(0,a-s)),s<o&&(d=d.slice(o-s)),c?(e[e.length-1]+=d,c=!1):e.push(d)),s=u+1}return e}function sliceText(n,e,o){return appendText(n,[""],e,o)}class RawTextCursor{constructor(e,o=1){this.dir=o,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[o>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,o){for(this.done=this.lineBreak=!1;;){let a=this.nodes.length-1,s=this.nodes[a],l=this.offsets[a],c=l>>1,d=s instanceof TextLeaf?s.text.length:s.children.length;if(c==(o>0?d:0)){if(a==0)return this.done=!0,this.value="",this;o>0&&this.offsets[a-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(o>0?0:1)){if(this.offsets[a]+=o,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof TextLeaf){let u=s.text[c+(o<0?-1:0)];if(this.offsets[a]+=o,u.length>Math.max(0,e))return this.value=e==0?u:o>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=s.children[c+(o<0?-1:0)];e>u.length?(e-=u.length,this.offsets[a]+=o):(o<0&&this.offsets[a]--,this.nodes.push(u),this.offsets.push(o>0?1:(u instanceof TextLeaf?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,o,a){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,o>a?-1:1),this.pos=o>a?e.length:0,this.from=Math.min(o,a),this.to=Math.max(o,a)}nextInner(e,o){if(o<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,o<0?this.pos-this.to:this.from-this.pos);let a=o<0?this.pos-this.from:this.to-this.pos;e>a&&(e=a),a-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*o,this.value=s.length<=a?s:o<0?s.slice(s.length-a):s.slice(0,a),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:o,lineBreak:a,value:s}=this.inner.next(e);return o&&this.afterBreak?(this.value="",this.afterBreak=!1):o?(this.done=!0,this.value=""):a?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(e,o,a,s){this.from=e,this.to=o,this.number=a,this.text=s}get length(){return this.to-this.from}}function clip$1(n,e,o){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,o))]}function findClusterBreak(n,e,o=!0,a=!0){return findClusterBreak$1(n,e,o,a)}function surrogateLow(n){return n>=56320&&n<57344}function surrogateHigh(n){return n>=55296&&n<56320}function codePointAt(n,e){let o=n.charCodeAt(e);if(!surrogateHigh(o)||e+1==n.length)return o;let a=n.charCodeAt(e+1);return surrogateLow(a)?(o-55296<<10)+(a-56320)+65536:o}function fromCodePoint(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function codePointSize(n){return n<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let o=0;o<this.sections.length;o+=2)e+=this.sections[o];return e}get newLength(){let e=0;for(let o=0;o<this.sections.length;o+=2){let a=this.sections[o+1];e+=a<0?this.sections[o]:a}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let o=0,a=0,s=0;o<this.sections.length;){let l=this.sections[o++],c=this.sections[o++];c<0?(e(a,s,l),s+=l):s+=c,a+=l}}iterChangedRanges(e,o=!1){iterChanges(this,e,o)}get invertedDesc(){let e=[];for(let o=0;o<this.sections.length;){let a=this.sections[o++],s=this.sections[o++];s<0?e.push(a,s):e.push(s,a)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,o=!1){return e.empty?this:mapSet(this,e,o)}mapPos(e,o=-1,a=MapMode.Simple){let s=0,l=0;for(let c=0;c<this.sections.length;){let d=this.sections[c++],u=this.sections[c++],f=s+d;if(u<0){if(f>e)return l+(e-s);l+=d}else{if(a!=MapMode.Simple&&f>=e&&(a==MapMode.TrackDel&&s<e&&f>e||a==MapMode.TrackBefore&&s<e||a==MapMode.TrackAfter&&f>e))return null;if(f>e||f==e&&o<0&&!d)return e==s||o<0?l:l+u;l+=u}s=f}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return l}touchesRange(e,o=e){for(let a=0,s=0;a<this.sections.length&&s<=o;){let l=this.sections[a++],c=this.sections[a++],d=s+l;if(c>=0&&s<=o&&d>=e)return s<e&&d>o?"cover":!0;s=d}return!1}toString(){let e="";for(let o=0;o<this.sections.length;){let a=this.sections[o++],s=this.sections[o++];e+=(e?" ":"")+a+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(o=>typeof o!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,o){super(e),this.inserted=o}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(o,a,s,l,c)=>e=e.replace(s,s+(a-o),c),!1),e}mapDesc(e,o=!1){return mapSet(this,e,o,!0)}invert(e){let o=this.sections.slice(),a=[];for(let s=0,l=0;s<o.length;s+=2){let c=o[s],d=o[s+1];if(d>=0){o[s]=d,o[s+1]=c;let u=s>>1;for(;a.length<u;)a.push(Text.empty);a.push(c?e.slice(l,l+c):Text.empty)}l+=c}return new ChangeSet(o,a)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,o=!1){return e.empty?this:mapSet(this,e,o,!0)}iterChanges(e,o=!1){iterChanges(this,e,o)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let o=[],a=[],s=[],l=new SectionIter(this);e:for(let c=0,d=0;;){let u=c==e.length?1e9:e[c++];for(;d<u||d==u&&l.len==0;){if(l.done)break e;let v=Math.min(l.len,u-d);addSection(s,v,-1);let b=l.ins==-1?-1:l.off==0?l.ins:0;addSection(o,v,b),b>0&&addInsert(a,o,l.text),l.forward(v),d+=v}let f=e[c++];for(;d<f;){if(l.done)break e;let v=Math.min(l.len,f-d);addSection(o,v,-1),addSection(s,v,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(v),d+=v}}return{changes:new ChangeSet(o,a),filtered:ChangeDesc.create(s)}}toJSON(){let e=[];for(let o=0;o<this.sections.length;o+=2){let a=this.sections[o],s=this.sections[o+1];s<0?e.push(a):s==0?e.push([a]):e.push([a].concat(this.inserted[o>>1].toJSON()))}return e}static of(e,o,a){let s=[],l=[],c=0,d=null;function u(v=!1){if(!v&&!s.length)return;c<o&&addSection(s,o-c,-1);let b=new ChangeSet(s,l);d=d?d.compose(b.map(d)):b,s=[],l=[],c=0}function f(v){if(Array.isArray(v))for(let b of v)f(b);else if(v instanceof ChangeSet){if(v.length!=o)throw new RangeError(`Mismatched change set length (got ${v.length}, expected ${o})`);u(),d=d?d.compose(v.map(d)):v}else{let{from:b,to:k=b,insert:x}=v;if(b>k||b<0||k>o)throw new RangeError(`Invalid change range ${b} to ${k} (in doc of length ${o})`);let _=x?typeof x=="string"?Text.of(x.split(a||DefaultSplit)):x:Text.empty,E=_.length;if(b==k&&E==0)return;b<c&&u(),b>c&&addSection(s,b-c,-1),addSection(s,k-b,E),addInsert(l,s,_),c=k}}return f(e),u(!d),d}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let o=[],a=[];for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")o.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((c,d)=>d&&typeof c!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)o.push(l[0],0);else{for(;a.length<s;)a.push(Text.empty);a[s]=Text.of(l.slice(1)),o.push(l[0],a[s].length)}}}return new ChangeSet(o,a)}static createSet(e,o){return new ChangeSet(e,o)}}function addSection(n,e,o,a=!1){if(e==0&&o<=0)return;let s=n.length-2;s>=0&&o<=0&&o==n[s+1]?n[s]+=e:s>=0&&e==0&&n[s]==0?n[s+1]+=o:a?(n[s]+=e,n[s+1]+=o):n.push(e,o)}function addInsert(n,e,o){if(o.length==0)return;let a=e.length-2>>1;if(a<n.length)n[n.length-1]=n[n.length-1].append(o);else{for(;n.length<a;)n.push(Text.empty);n.push(o)}}function iterChanges(n,e,o){let a=n.inserted;for(let s=0,l=0,c=0;c<n.sections.length;){let d=n.sections[c++],u=n.sections[c++];if(u<0)s+=d,l+=d;else{let f=s,v=l,b=Text.empty;for(;f+=d,v+=u,u&&a&&(b=b.append(a[c-2>>1])),!(o||c==n.sections.length||n.sections[c+1]<0);)d=n.sections[c++],u=n.sections[c++];e(s,f,l,v,b),s=f,l=v}}}function mapSet(n,e,o,a=!1){let s=[],l=a?[]:null,c=new SectionIter(n),d=new SectionIter(e);for(let u=-1;;){if(c.done&&d.len||d.done&&c.len)throw new Error("Mismatched change set lengths");if(c.ins==-1&&d.ins==-1){let f=Math.min(c.len,d.len);addSection(s,f,-1),c.forward(f),d.forward(f)}else if(d.ins>=0&&(c.ins<0||u==c.i||c.off==0&&(d.len<c.len||d.len==c.len&&!o))){let f=d.len;for(addSection(s,d.ins,-1);f;){let v=Math.min(c.len,f);c.ins>=0&&u<c.i&&c.len<=v&&(addSection(s,0,c.ins),l&&addInsert(l,s,c.text),u=c.i),c.forward(v),f-=v}d.next()}else if(c.ins>=0){let f=0,v=c.len;for(;v;)if(d.ins==-1){let b=Math.min(v,d.len);f+=b,v-=b,d.forward(b)}else if(d.ins==0&&d.len<v)v-=d.len,d.next();else break;addSection(s,f,u<c.i?c.ins:0),l&&u<c.i&&addInsert(l,s,c.text),u=c.i,c.forward(c.len-v)}else{if(c.done&&d.done)return l?ChangeSet.createSet(s,l):ChangeDesc.create(s);throw new Error("Mismatched change set lengths")}}}function composeSets(n,e,o=!1){let a=[],s=o?[]:null,l=new SectionIter(n),c=new SectionIter(e);for(let d=!1;;){if(l.done&&c.done)return s?ChangeSet.createSet(a,s):ChangeDesc.create(a);if(l.ins==0)addSection(a,l.len,0,d),l.next();else if(c.len==0&&!c.done)addSection(a,0,c.ins,d),s&&addInsert(s,a,c.text),c.next();else{if(l.done||c.done)throw new Error("Mismatched change set lengths");{let u=Math.min(l.len2,c.len),f=a.length;if(l.ins==-1){let v=c.ins==-1?-1:c.off?0:c.ins;addSection(a,u,v,d),s&&v&&addInsert(s,a,c.text)}else c.ins==-1?(addSection(a,l.off?0:l.len,u,d),s&&addInsert(s,a,l.textBit(u))):(addSection(a,l.off?0:l.len,c.off?0:c.ins,d),s&&!c.off&&addInsert(s,a,c.text));d=(l.ins>u||c.ins>=0&&c.len>u)&&(d||a.length>f),l.forward2(u),c.forward(u)}}}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,o=this.i-2>>1;return o>=e.length?Text.empty:e[o]}textBit(e){let{inserted:o}=this.set,a=this.i-2>>1;return a>=o.length&&!e?Text.empty:o[a].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,o,a){this.from=e,this.to=o,this.flags=a}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,o=-1){let a,s;return this.empty?a=s=e.mapPos(this.from,o):(a=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),a==this.from&&s==this.to?this:new SelectionRange(a,s,this.flags)}extend(e,o=e){if(e<=this.anchor&&o>=this.anchor)return EditorSelection.range(e,o);let a=Math.abs(e-this.anchor)>Math.abs(o-this.anchor)?e:o;return EditorSelection.range(this.anchor,a)}eq(e,o=!1){return this.anchor==e.anchor&&this.head==e.head&&(!o||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,o,a){return new SelectionRange(e,o,a)}}EditorSelection=class{constructor(n,e){this.ranges=n,this.mainIndex=e}map(n,e=-1){return n.empty?this:EditorSelection.create(this.ranges.map(o=>o.map(n,e)),this.mainIndex)}eq(n,e=!1){if(this.ranges.length!=n.ranges.length||this.mainIndex!=n.mainIndex)return!1;for(let o=0;o<this.ranges.length;o++)if(!this.ranges[o].eq(n.ranges[o],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(n,e=!0){return EditorSelection.create([n].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(n,e=this.mainIndex){let o=this.ranges.slice();return o[e]=n,EditorSelection.create(o,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(n=>n.toJSON()),main:this.mainIndex}}static fromJSON(n){if(!n||!Array.isArray(n.ranges)||typeof n.main!="number"||n.main>=n.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(n.ranges.map(e=>SelectionRange.fromJSON(e)),n.main)}static single(n,e=n){return new EditorSelection([EditorSelection.range(n,e)],0)}static create(n,e=0){if(n.length==0)throw new RangeError("A selection needs at least one range");for(let o=0,a=0;a<n.length;a++){let s=n[a];if(s.empty?s.from<=o:s.from<o)return EditorSelection.normalized(n.slice(),e);o=s.to}return new EditorSelection(n,e)}static cursor(n,e=0,o,a){return SelectionRange.create(n,n,(e==0?0:e<0?8:16)|(o==null?7:Math.min(6,o))|(a??16777215)<<6)}static range(n,e,o,a){let s=(o??16777215)<<6|(a==null?7:Math.min(6,a));return e<n?SelectionRange.create(e,n,48|s):SelectionRange.create(n,e,(e>n?8:0)|s)}static normalized(n,e=0){let o=n[e];n.sort((a,s)=>a.from-s.from),e=n.indexOf(o);for(let a=1;a<n.length;a++){let s=n[a],l=n[a-1];if(s.empty?s.from<=l.to:s.from<l.to){let c=l.from,d=Math.max(s.to,l.to);a<=e&&e--,n.splice(--a,2,s.anchor>s.head?EditorSelection.range(d,c):EditorSelection.range(c,d))}}return new EditorSelection(n,e)}};function checkSelection(n,e){for(let o of n.ranges)if(o.to>e)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,o,a,s,l){this.combine=e,this.compareInput=o,this.compare=a,this.isStatic=s,this.id=nextID++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new Facet(e.combine||(o=>o),e.compareInput||((o,a)=>o===a),e.compare||(e.combine?(o,a)=>o===a:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,o){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,o)}computeN(e,o){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,o)}from(e,o){return o||(o=a=>a),this.compute([e],a=>o(a.field(e)))}}function sameArray$1(n,e){return n==e||n.length==e.length&&n.every((o,a)=>o===e[a])}class FacetProvider{constructor(e,o,a,s){this.dependencies=e,this.facet=o,this.type=a,this.value=s,this.id=nextID++}dynamicSlot(e){var o;let a=this.value,s=this.facet.compareInput,l=this.id,c=e[l]>>1,d=this.type==2,u=!1,f=!1,v=[];for(let b of this.dependencies)b=="doc"?u=!0:b=="selection"?f=!0:((o=e[b.id])!==null&&o!==void 0?o:1)&1||v.push(e[b.id]);return{create(b){return b.values[c]=a(b),1},update(b,k){if(u&&k.docChanged||f&&(k.docChanged||k.selection)||ensureAll(b,v)){let x=a(b);if(d?!compareArray(x,b.values[c],s):!s(x,b.values[c]))return b.values[c]=x,1}return 0},reconfigure:(b,k)=>{let x,_=k.config.address[l];if(_!=null){let E=getAddr(k,_);if(this.dependencies.every(B=>B instanceof Facet?k.facet(B)===b.facet(B):B instanceof StateField?k.field(B,!1)==b.field(B,!1):!0)||(d?compareArray(x=a(b),E,s):s(x=a(b),E)))return b.values[c]=E,0}else x=a(b);return b.values[c]=x,1}}}}function compareArray(n,e,o){if(n.length!=e.length)return!1;for(let a=0;a<n.length;a++)if(!o(n[a],e[a]))return!1;return!0}function ensureAll(n,e){let o=!1;for(let a of e)ensureAddr(n,a)&1&&(o=!0);return o}function dynamicFacetSlot(n,e,o){let a=o.map(u=>n[u.id]),s=o.map(u=>u.type),l=a.filter(u=>!(u&1)),c=n[e.id]>>1;function d(u){let f=[];for(let v=0;v<a.length;v++){let b=getAddr(u,a[v]);if(s[v]==2)for(let k of b)f.push(k);else f.push(b)}return e.combine(f)}return{create(u){for(let f of a)ensureAddr(u,f);return u.values[c]=d(u),1},update(u,f){if(!ensureAll(u,l))return 0;let v=d(u);return e.compare(v,u.values[c])?0:(u.values[c]=v,1)},reconfigure(u,f){let v=ensureAll(u,a),b=f.config.facets[e.id],k=f.facet(e);if(b&&!v&&sameArray$1(o,b))return u.values[c]=k,0;let x=d(u);return e.compare(x,k)?(u.values[c]=k,0):(u.values[c]=x,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,o,a,s,l){this.id=e,this.createF=o,this.updateF=a,this.compareF=s,this.spec=l,this.provides=void 0}static define(e){let o=new StateField(nextID++,e.create,e.update,e.compare||((a,s)=>a===s),e);return e.provide&&(o.provides=e.provide(o)),o}create(e){let o=e.facet(initField).find(a=>a.field==this);return((o==null?void 0:o.create)||this.createF)(e)}slot(e){let o=e[this.id]>>1;return{create:a=>(a.values[o]=this.create(a),1),update:(a,s)=>{let l=a.values[o],c=this.updateF(l,s);return this.compareF(l,c)?0:(a.values[o]=c,1)},reconfigure:(a,s)=>s.config.address[this.id]!=null?(a.values[o]=s.field(this),0):(a.values[o]=this.create(a),1)}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(n){return e=>new PrecExtension(e,n)}Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,o){this.inner=e,this.prec=o}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,o){this.compartment=e,this.inner=o}}class Configuration{constructor(e,o,a,s,l,c){for(this.base=e,this.compartments=o,this.dynamicSlots=a,this.address=s,this.staticValues=l,this.facets=c,this.statusTemplate=[];this.statusTemplate.length<a.length;)this.statusTemplate.push(0)}staticFacet(e){let o=this.address[e.id];return o==null?e.default:this.staticValues[o>>1]}static resolve(e,o,a){let s=[],l=Object.create(null),c=new Map;for(let k of flatten(e,o,c))k instanceof StateField?s.push(k):(l[k.facet.id]||(l[k.facet.id]=[])).push(k);let d=Object.create(null),u=[],f=[];for(let k of s)d[k.id]=f.length<<1,f.push(x=>k.slot(x));let v=a==null?void 0:a.config.facets;for(let k in l){let x=l[k],_=x[0].facet,E=v&&v[k]||[];if(x.every(B=>B.type==0))if(d[_.id]=u.length<<1|1,sameArray$1(E,x))u.push(a.facet(_));else{let B=_.combine(x.map(M=>M.value));u.push(a&&_.compare(B,a.facet(_))?a.facet(_):B)}else{for(let B of x)B.type==0?(d[B.id]=u.length<<1|1,u.push(B.value)):(d[B.id]=f.length<<1,f.push(M=>B.dynamicSlot(M)));d[_.id]=f.length<<1,f.push(B=>dynamicFacetSlot(B,_,x))}}let b=f.map(k=>k(d));return new Configuration(e,c,b,d,u,l)}}function flatten(n,e,o){let a=[[],[],[],[],[]],s=new Map;function l(c,d){let u=s.get(c);if(u!=null){if(u<=d)return;let f=a[u].indexOf(c);f>-1&&a[u].splice(f,1),c instanceof CompartmentInstance&&o.delete(c.compartment)}if(s.set(c,d),Array.isArray(c))for(let f of c)l(f,d);else if(c instanceof CompartmentInstance){if(o.has(c.compartment))throw new RangeError("Duplicate use of compartment in extensions");let f=e.get(c.compartment)||c.inner;o.set(c.compartment,f),l(f,d)}else if(c instanceof PrecExtension)l(c.inner,c.prec);else if(c instanceof StateField)a[d].push(c),c.provides&&l(c.provides,d);else if(c instanceof FacetProvider)a[d].push(c),c.facet.extensions&&l(c.facet.extensions,Prec_.default);else{let f=c.extension;if(!f)throw new Error(`Unrecognized extension value in extension set (${c}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(f,d)}}return l(n,Prec_.default),a.reduce((c,d)=>c.concat(d))}function ensureAddr(n,e){if(e&1)return 2;let o=e>>1,a=n.status[o];if(a==4)throw new Error("Cyclic dependency between fields and/or facets");if(a&2)return a;n.status[o]=4;let s=n.computeSlot(n,n.config.dynamicSlots[o]);return n.status[o]=2|s}function getAddr(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:n=>n.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:n=>n.length?n[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:n=>n.length?n[0]:!1});class Annotation{constructor(e,o){this.type=e,this.value=o}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,o){this.type=e,this.value=o}map(e){let o=this.type.map(this.value,e);return o===void 0?void 0:o==this.value?this:new StateEffect(this.type,o)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(o=>o))}static mapEffects(e,o){if(!e.length)return e;let a=[];for(let s of e){let l=s.map(o);l&&a.push(l)}return a}}StateEffect.reconfigure=StateEffect.define(),StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,o,a,s,l,c){this.startState=e,this.changes=o,this.selection=a,this.effects=s,this.annotations=l,this.scrollIntoView=c,this._doc=null,this._state=null,a&&checkSelection(a,o.newLength),l.some(d=>d.type==Transaction.time)||(this.annotations=l.concat(Transaction.time.of(Date.now())))}static create(e,o,a,s,l,c){return new Transaction(e,o,a,s,l,c)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let o of this.annotations)if(o.type==e)return o.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let o=this.annotation(Transaction.userEvent);return!!(o&&(o==e||o.length>e.length&&o.slice(0,e.length)==e&&o[e.length]=="."))}}Transaction.time=Annotation.define(),Transaction.userEvent=Annotation.define(),Transaction.addToHistory=Annotation.define(),Transaction.remote=Annotation.define();function joinRanges(n,e){let o=[];for(let a=0,s=0;;){let l,c;if(a<n.length&&(s==e.length||e[s]>=n[a]))l=n[a++],c=n[a++];else if(s<e.length)l=e[s++],c=e[s++];else return o;!o.length||o[o.length-1]<l?o.push(l,c):o[o.length-1]<c&&(o[o.length-1]=c)}}function mergeTransaction(n,e,o){var a;let s,l,c;return o?(s=e.changes,l=ChangeSet.empty(e.changes.length),c=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),l=n.changes.mapDesc(e.changes,!0),c=n.changes.compose(s)),{changes:c,selection:e.selection?e.selection.map(l):(a=n.selection)===null||a===void 0?void 0:a.map(s),effects:StateEffect.mapEffects(n.effects,s).concat(StateEffect.mapEffects(e.effects,l)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function resolveTransactionInner(n,e,o){let a=e.selection,s=asArray(e.annotations);return e.userEvent&&(s=s.concat(Transaction.userEvent.of(e.userEvent))),{changes:e.changes instanceof ChangeSet?e.changes:ChangeSet.of(e.changes||[],o,n.facet(lineSeparator)),selection:a&&(a instanceof EditorSelection?a:EditorSelection.single(a.anchor,a.head)),effects:asArray(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function resolveTransaction(n,e,o){let a=resolveTransactionInner(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(o=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(o=!1);let c=!!e[l].sequential;a=mergeTransaction(a,resolveTransactionInner(n,e[l],c?a.changes.newLength:n.doc.length),c)}let s=Transaction.create(n,a.changes,a.selection,a.effects,a.annotations,a.scrollIntoView);return extendTransaction(o?filterTransaction(s):s)}function filterTransaction(n){let e=n.startState,o=!0;for(let s of e.facet(changeFilter)){let l=s(n);if(l===!1){o=!1;break}Array.isArray(l)&&(o=o===!0?l:joinRanges(o,l))}if(o!==!0){let s,l;if(o===!1)l=n.changes.invertedDesc,s=ChangeSet.empty(e.doc.length);else{let c=n.changes.filter(o);s=c.changes,l=c.filtered.mapDesc(c.changes).invertedDesc}n=Transaction.create(e,s,n.selection&&n.selection.map(l),StateEffect.mapEffects(n.effects,l),n.annotations,n.scrollIntoView)}let a=e.facet(transactionFilter);for(let s=a.length-1;s>=0;s--){let l=a[s](n);l instanceof Transaction?n=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Transaction?n=l[0]:n=resolveTransaction(e,asArray(l),!1)}return n}function extendTransaction(n){let e=n.startState,o=e.facet(transactionExtender),a=n;for(let s=o.length-1;s>=0;s--){let l=o[s](n);l&&Object.keys(l).length&&(a=mergeTransaction(a,resolveTransactionInner(e,l,n.changes.newLength),!0))}return a==n?n:Transaction.create(e,n.changes,n.selection,a.effects,a.annotations,a.scrollIntoView)}const none$1=[];function asArray(n){return n==null?none$1:Array.isArray(n)?n:[n]}var CharCategory=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(n){if(wordChar)return wordChar.test(n);for(let e=0;e<n.length;e++){let o=n[e];if(/\w/.test(o)||o>"\x80"&&(o.toUpperCase()!=o.toLowerCase()||nonASCIISingleCaseWordChar.test(o)))return!0}return!1}function makeCategorizer(n){return e=>{if(!/\S/.test(e))return CharCategory.Space;if(hasWordChar(e))return CharCategory.Word;for(let o=0;o<n.length;o++)if(e.indexOf(n[o])>-1)return CharCategory.Word;return CharCategory.Other}}EditorState=class{constructor(n,e,o,a,s,l){this.config=n,this.doc=e,this.selection=o,this.values=a,this.status=n.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)ensureAddr(this,c<<1);this.computeSlot=null}field(n,e=!0){let o=this.config.address[n.id];if(o==null){if(e)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,o),getAddr(this,o)}update(...n){return resolveTransaction(this,n,!0)}applyTransaction(n){let e=this.config,{base:o,compartments:a}=e;for(let c of n.effects)c.is(Compartment.reconfigure)?(e&&(a=new Map,e.compartments.forEach((d,u)=>a.set(u,d)),e=null),a.set(c.value.compartment,c.value.extension)):c.is(StateEffect.reconfigure)?(e=null,o=c.value):c.is(StateEffect.appendConfig)&&(e=null,o=asArray(o).concat(c.value));let s;e?s=n.startState.values.slice():(e=Configuration.resolve(o,a,this),s=new EditorState(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(c,d)=>d.reconfigure(c,this),null).values);let l=n.startState.facet(allowMultipleSelections)?n.newSelection:n.newSelection.asSingle();new EditorState(e,n.newDoc,l,s,(c,d)=>d.update(c,n),n)}replaceSelection(n){return typeof n=="string"&&(n=this.toText(n)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:n},range:EditorSelection.cursor(e.from+n.length)}))}changeByRange(n){let e=this.selection,o=n(e.ranges[0]),a=this.changes(o.changes),s=[o.range],l=asArray(o.effects);for(let c=1;c<e.ranges.length;c++){let d=n(e.ranges[c]),u=this.changes(d.changes),f=u.map(a);for(let b=0;b<c;b++)s[b]=s[b].map(f);let v=a.mapDesc(u,!0);s.push(d.range.map(v)),a=a.compose(f),l=StateEffect.mapEffects(l,f).concat(StateEffect.mapEffects(asArray(d.effects),v))}return{changes:a,selection:EditorSelection.create(s,e.mainIndex),effects:l}}changes(n=[]){return n instanceof ChangeSet?n:ChangeSet.of(n,this.doc.length,this.facet(EditorState.lineSeparator))}toText(n){return Text.of(n.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(n=0,e=this.doc.length){return this.doc.sliceString(n,e,this.lineBreak)}facet(n){let e=this.config.address[n.id];return e==null?n.default:(ensureAddr(this,e),getAddr(this,e))}toJSON(n){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(n)for(let o in n){let a=n[o];a instanceof StateField&&this.config.address[a.id]!=null&&(e[o]=a.spec.toJSON(this.field(n[o]),this))}return e}static fromJSON(n,e={},o){if(!n||typeof n.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let a=[];if(o){for(let s in o)if(Object.prototype.hasOwnProperty.call(n,s)){let l=o[s],c=n[s];a.push(l.init(d=>l.spec.fromJSON(c,d)))}}return EditorState.create({doc:n.doc,selection:EditorSelection.fromJSON(n.selection),extensions:e.extensions?a.concat([e.extensions]):a})}static create(n={}){let e=Configuration.resolve(n.extensions||[],new Map),o=n.doc instanceof Text?n.doc:Text.of((n.doc||"").split(e.staticFacet(EditorState.lineSeparator)||DefaultSplit)),a=n.selection?n.selection instanceof EditorSelection?n.selection:EditorSelection.single(n.selection.anchor,n.selection.head):EditorSelection.single(0);return checkSelection(a,o.length),e.staticFacet(allowMultipleSelections)||(a=a.asSingle()),new EditorState(e,o,a,e.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(n,...e){for(let o of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(o,n)){n=o[n];break}return e.length&&(n=n.replace(/\$(\$|\d*)/g,(o,a)=>{if(a=="$")return"$";let s=+(a||1);return!s||s>e.length?o:e[s-1]})),n}languageDataAt(n,e,o=-1){let a=[];for(let s of this.facet(languageData))for(let l of s(this,e,o))Object.prototype.hasOwnProperty.call(l,n)&&a.push(l[n]);return a}charCategorizer(n){return makeCategorizer(this.languageDataAt("wordChars",n).join(""))}wordAt(n){let{text:e,from:o,length:a}=this.doc.lineAt(n),s=this.charCategorizer(n),l=n-o,c=n-o;for(;l>0;){let d=findClusterBreak(e,l,!1);if(s(e.slice(d,l))!=CharCategory.Word)break;l=d}for(;c<a;){let d=findClusterBreak(e,c);if(s(e.slice(c,d))!=CharCategory.Word)break;c=d}return l==c?null:EditorSelection.range(l+o,c+o)}},EditorState.allowMultipleSelections=allowMultipleSelections,EditorState.tabSize=Facet.define({combine:n=>n.length?n[0]:4}),EditorState.lineSeparator=lineSeparator,EditorState.readOnly=readOnly,EditorState.phrases=Facet.define({compare(n,e){let o=Object.keys(n),a=Object.keys(e);return o.length==a.length&&o.every(s=>n[s]==e[s])}}),EditorState.languageData=languageData,EditorState.changeFilter=changeFilter,EditorState.transactionFilter=transactionFilter,EditorState.transactionExtender=transactionExtender,Compartment.reconfigure=StateEffect.define();function combineConfig(n,e,o={}){let a={};for(let s of n)for(let l of Object.keys(s)){let c=s[l],d=a[l];if(d===void 0)a[l]=c;else if(!(d===c||c===void 0))if(Object.hasOwnProperty.call(o,l))a[l]=o[l](d,c);else throw new Error("Config merge conflict for field "+l)}for(let s in e)a[s]===void 0&&(a[s]=e[s]);return a}class RangeValue{eq(e){return this==e}range(e,o=e){return Range$1.create(e,o,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0,RangeValue.prototype.point=!1,RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class yn{constructor(e,o,a){this.from=e,this.to=o,this.value=a}static create(e,o,a){return new yn(e,o,a)}};function cmpRange(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Chunk{constructor(e,o,a,s){this.from=e,this.to=o,this.value=a,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,o,a,s=0){let l=a?this.to:this.from;for(let c=s,d=l.length;;){if(c==d)return c;let u=c+d>>1,f=l[u]-e||(a?this.value[u].endSide:this.value[u].startSide)-o;if(u==c)return f>=0?c:d;f>=0?d=u:c=u+1}}between(e,o,a,s){for(let l=this.findIndex(o,-1e9,!0),c=this.findIndex(a,1e9,!1,l);l<c;l++)if(s(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,o){let a=[],s=[],l=[],c=-1,d=-1;for(let u=0;u<this.value.length;u++){let f=this.value[u],v=this.from[u]+e,b=this.to[u]+e,k,x;if(v==b){let _=o.mapPos(v,f.startSide,f.mapMode);if(_==null||(k=x=_,f.startSide!=f.endSide&&(x=o.mapPos(v,f.endSide),x<k)))continue}else if(k=o.mapPos(v,f.startSide),x=o.mapPos(b,f.endSide),k>x||k==x&&f.startSide>0&&f.endSide<=0)continue;(x-k||f.endSide-f.startSide)<0||(c<0&&(c=k),f.point&&(d=Math.max(d,x-k)),a.push(f),s.push(k-c),l.push(x-c))}return{mapped:a.length?new Chunk(s,l,a,d):null,pos:c}}}class RangeSet{constructor(e,o,a,s){this.chunkPos=e,this.chunk=o,this.nextLayer=a,this.maxPoint=s}static create(e,o,a,s){return new RangeSet(e,o,a,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let o of this.chunk)e+=o.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:o=[],sort:a=!1,filterFrom:s=0,filterTo:l=this.length}=e,c=e.filter;if(o.length==0&&!c)return this;if(a&&(o=o.slice().sort(cmpRange)),this.isEmpty)return o.length?RangeSet.of(o):this;let d=new LayerCursor(this,null,-1).goto(0),u=0,f=[],v=new RangeSetBuilder;for(;d.value||u<o.length;)if(u<o.length&&(d.from-o[u].from||d.startSide-o[u].value.startSide)>=0){let b=o[u++];v.addInner(b.from,b.to,b.value)||f.push(b)}else d.rangeIndex==1&&d.chunkIndex<this.chunk.length&&(u==o.length||this.chunkEnd(d.chunkIndex)<o[u].from)&&(!c||s>this.chunkEnd(d.chunkIndex)||l<this.chunkPos[d.chunkIndex])&&v.addChunk(this.chunkPos[d.chunkIndex],this.chunk[d.chunkIndex])?d.nextChunk():((!c||s>d.to||l<d.from||c(d.from,d.to,d.value))&&(v.addInner(d.from,d.to,d.value)||f.push(Range$1.create(d.from,d.to,d.value))),d.next());return v.finishInner(this.nextLayer.isEmpty&&!f.length?RangeSet.empty:this.nextLayer.update({add:f,filter:c,filterFrom:s,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let o=[],a=[],s=-1;for(let c=0;c<this.chunk.length;c++){let d=this.chunkPos[c],u=this.chunk[c],f=e.touchesRange(d,d+u.length);if(f===!1)s=Math.max(s,u.maxPoint),o.push(u),a.push(e.mapPos(d));else if(f===!0){let{mapped:v,pos:b}=u.map(d,e);v&&(s=Math.max(s,v.maxPoint),o.push(v),a.push(b))}}let l=this.nextLayer.map(e);return o.length==0?l:new RangeSet(a,o,l||RangeSet.empty,s)}between(e,o,a){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],c=this.chunk[s];if(o>=l&&e<=l+c.length&&c.between(l,e-l,o-l,a)===!1)return}this.nextLayer.between(e,o,a)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,o=0){return HeapCursor.from(e).goto(o)}static compare(e,o,a,s,l=-1){let c=e.filter(b=>b.maxPoint>0||!b.isEmpty&&b.maxPoint>=l),d=o.filter(b=>b.maxPoint>0||!b.isEmpty&&b.maxPoint>=l),u=findSharedChunks(c,d,a),f=new SpanCursor(c,u,l),v=new SpanCursor(d,u,l);a.iterGaps((b,k,x)=>compare(f,b,v,k,x,s)),a.empty&&a.length==0&&compare(f,0,v,0,0,s)}static eq(e,o,a=0,s){s==null&&(s=999999999);let l=e.filter(v=>!v.isEmpty&&o.indexOf(v)<0),c=o.filter(v=>!v.isEmpty&&e.indexOf(v)<0);if(l.length!=c.length)return!1;if(!l.length)return!0;let d=findSharedChunks(l,c),u=new SpanCursor(l,d,0).goto(a),f=new SpanCursor(c,d,0).goto(a);for(;;){if(u.to!=f.to||!sameValues(u.active,f.active)||u.point&&(!f.point||!u.point.eq(f.point)))return!1;if(u.to>s)return!0;u.next(),f.next()}}static spans(e,o,a,s,l=-1){let c=new SpanCursor(e,null,l).goto(o),d=o,u=c.openStart;for(;;){let f=Math.min(c.to,a);if(c.point){let v=c.activeForPoint(c.to),b=c.pointFrom<o?v.length+1:c.point.startSide<0?v.length:Math.min(v.length,u);s.point(d,f,c.point,v,b,c.pointRank),u=Math.min(c.openEnd(f),v.length)}else f>d&&(s.span(d,f,c.active,u),u=c.openEnd(f));if(c.to>a)return u+(c.point&&c.to>a?1:0);d=c.to,c.next()}}static of(e,o=!1){let a=new RangeSetBuilder;for(let s of e instanceof Range$1?[e]:o?lazySort(e):e)a.add(s.from,s.to,s.value);return a.finish()}static join(e){if(!e.length)return RangeSet.empty;let o=e[e.length-1];for(let a=e.length-2;a>=0;a--)for(let s=e[a];s!=RangeSet.empty;s=s.nextLayer)o=new RangeSet(s.chunkPos,s.chunk,o,Math.max(s.maxPoint,o.maxPoint));return o}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(n){if(n.length>1)for(let e=n[0],o=1;o<n.length;o++){let a=n[o];if(cmpRange(e,a)>0)return n.slice().sort(cmpRange);e=a}return n}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,o,a){this.addInner(e,o,a)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,o,a)}addInner(e,o,a){let s=e-this.lastTo||a.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||a.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(o-this.chunkStart),this.last=a,this.lastFrom=e,this.lastTo=o,this.value.push(a),a.point&&(this.maxPoint=Math.max(this.maxPoint,o-e)),!0)}addChunk(e,o){if((e-this.lastTo||o.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,o.maxPoint),this.chunks.push(o),this.chunkPos.push(e);let a=o.value.length-1;return this.last=o.value[a],this.lastFrom=o.from[a]+e,this.lastTo=o.to[a]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let o=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,o}}function findSharedChunks(n,e,o){let a=new Map;for(let l of n)for(let c=0;c<l.chunk.length;c++)l.chunk[c].maxPoint<=0&&a.set(l.chunk[c],l.chunkPos[c]);let s=new Set;for(let l of e)for(let c=0;c<l.chunk.length;c++){let d=a.get(l.chunk[c]);d!=null&&(o?o.mapPos(d):d)==l.chunkPos[c]&&!(o!=null&&o.touchesRange(d,d+l.chunk[c].length))&&s.add(l.chunk[c])}return s}class LayerCursor{constructor(e,o,a,s=0){this.layer=e,this.skip=o,this.minPoint=a,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,o=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,o,!1),this}gotoInner(e,o,a){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,a=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],o,!0);(!a||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,o){(this.to-e||this.endSide-o)<0&&this.gotoInner(e,o,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],o=this.layer.chunk[this.chunkIndex],a=e+o.from[this.rangeIndex];if(this.from=a,this.to=e+o.to[this.rangeIndex],this.value=o.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,o=null,a=-1){let s=[];for(let l=0;l<e.length;l++)for(let c=e[l];!c.isEmpty;c=c.nextLayer)c.maxPoint>=a&&s.push(new LayerCursor(c,o,a,l));return s.length==1?s[0]:new HeapCursor(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,o=-1e9){for(let a of this.heap)a.goto(e,o);for(let a=this.heap.length>>1;a>=0;a--)heapBubble(this.heap,a);return this.next(),this}forward(e,o){for(let a of this.heap)a.forward(e,o);for(let a=this.heap.length>>1;a>=0;a--)heapBubble(this.heap,a);(this.to-e||this.value.endSide-o)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(n,e){for(let o=n[e];;){let a=(e<<1)+1;if(a>=n.length)break;let s=n[a];if(a+1<n.length&&s.compare(n[a+1])>=0&&(s=n[a+1],a++),o.compare(s)<0)break;n[a]=o,n[e]=s,e=a}}class SpanCursor{constructor(e,o,a){this.minPoint=a,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,o,a)}goto(e,o=-1e9){return this.cursor.goto(e,o),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=o,this.openStart=-1,this.next(),this}forward(e,o){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-o)<0;)this.removeActive(this.minActive);this.cursor.forward(e,o)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let o=0,{value:a,to:s,rank:l}=this.cursor;for(;o<this.activeRank.length&&(l-this.activeRank[o]||s-this.activeTo[o])>0;)o++;insert(this.active,o,a),insert(this.activeTo,o,s),insert(this.activeRank,o,l),e&&insert(e,o,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,o=this.point;this.point=null;let a=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),a&&remove(a,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(a),this.cursor.next();else if(o&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(a){this.openStart=0;for(let s=a.length-1;s>=0&&a[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let o=[];for(let a=this.active.length-1;a>=0&&!(this.activeRank[a]<this.pointRank);a--)(this.activeTo[a]>e||this.activeTo[a]==e&&this.active[a].endSide>=this.point.endSide)&&o.push(this.active[a]);return o.reverse()}openEnd(e){let o=0;for(let a=this.activeTo.length-1;a>=0&&this.activeTo[a]>e;a--)o++;return o}}function compare(n,e,o,a,s,l){n.goto(e),o.goto(a);let c=a+s,d=a,u=a-e;for(;;){let f=n.to+u-o.to,v=f||n.endSide-o.endSide,b=v<0?n.to+u:o.to,k=Math.min(b,c);if(n.point||o.point?n.point&&o.point&&(n.point==o.point||n.point.eq(o.point))&&sameValues(n.activeForPoint(n.to),o.activeForPoint(o.to))||l.comparePoint(d,k,n.point,o.point):k>d&&!sameValues(n.active,o.active)&&l.compareRange(d,k,n.active,o.active),b>c)break;(f||n.openEnd!=o.openEnd)&&l.boundChange&&l.boundChange(b),d=b,v<=0&&n.next(),v>=0&&o.next()}}function sameValues(n,e){if(n.length!=e.length)return!1;for(let o=0;o<n.length;o++)if(n[o]!=e[o]&&!n[o].eq(e[o]))return!1;return!0}function remove(n,e){for(let o=e,a=n.length-1;o<a;o++)n[o]=n[o+1];n.pop()}function insert(n,e,o){for(let a=n.length-1;a>=e;a--)n[a+1]=n[a];n[e]=o}function findMinIndex(n,e){let o=-1,a=1e9;for(let s=0;s<e.length;s++)(e[s]-a||n[s].endSide-n[o].endSide)<0&&(o=s,a=e[s]);return o}countColumn=function(n,e,o=n.length){let a=0;for(let s=0;s<o;)n.charCodeAt(s)==9?(a+=e-a%e,s++):(a++,s=findClusterBreak(n,s));return a};function findColumn(n,e,o,a){for(let s=0,l=0;;){if(l>=e)return s;if(s==n.length)break;l+=n.charCodeAt(s)==9?o-l%o:1,s=findClusterBreak(n,s)}return a===!0?-1:n.length}const C="\u037C",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(e,o){this.rules=[];let{finish:a}=o||{};function s(c){return/^@/.test(c)?[c]:c.split(/,\s*/)}function l(c,d,u,f){let v=[],b=/^@(\w+)\b/.exec(c[0]),k=b&&b[1]=="keyframes";if(b&&d==null)return u.push(c[0]+";");for(let x in d){let _=d[x];if(/&/.test(x))l(x.split(/,\s*/).map(E=>c.map(B=>E.replace(/&/,B))).reduce((E,B)=>E.concat(B)),_,u);else if(_&&typeof _=="object"){if(!b)throw new RangeError("The value of a property ("+x+") should be a primitive value.");l(s(x),_,v,k)}else _!=null&&v.push(x.replace(/_.*/,"").replace(/[A-Z]/g,E=>"-"+E.toLowerCase())+": "+_+";")}(v.length||k)&&u.push((a&&!b&&!f?c.map(a):c).join(", ")+" {"+v.join(" ")+"}")}for(let c in e)l(s(c),e[c],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C+e.toString(36)}static mount(e,o,a){let s=e[SET],l=a&&a.nonce;s?l&&s.setNonce(l):s=new StyleSet(e,l),s.mount(Array.isArray(o)?o:[o],e)}}let adoptedSet=new Map;class StyleSet{constructor(e,o){let a=e.ownerDocument||e,s=a.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let l=adoptedSet.get(a);if(l)return e[SET]=l;this.sheet=new s.CSSStyleSheet,adoptedSet.set(a,this)}else this.styleTag=a.createElement("style"),o&&this.styleTag.setAttribute("nonce",o);this.modules=[],e[SET]=this}mount(e,o){let a=this.sheet,s=0,l=0;for(let c=0;c<e.length;c++){let d=e[c],u=this.modules.indexOf(d);if(u<l&&u>-1&&(this.modules.splice(u,1),l--,u=-1),u==-1){if(this.modules.splice(l++,0,d),a)for(let f=0;f<d.rules.length;f++)a.insertRule(d.rules[f],s++)}else{for(;l<u;)s+=this.modules[l++].rules.length;s+=d.rules.length,l++}}if(a)o.adoptedStyleSheets.indexOf(this.sheet)<0&&(o.adoptedStyleSheets=[this.sheet,...o.adoptedStyleSheets]);else{let c="";for(let u=0;u<this.modules.length;u++)c+=this.modules[u].getRules()+`
`;this.styleTag.textContent=c;let d=o.head||o;this.styleTag.parentNode!=d&&d.insertBefore(this.styleTag,d.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),i$1=0;i$1<10;i$1++)base[48+i$1]=base[96+i$1]=String(i$1);for(var i$1=1;i$1<=24;i$1++)base[i$1+111]="F"+i$1;for(var i$1=65;i$1<=90;i$1++)base[i$1]=String.fromCharCode(i$1+32),shift[i$1]=String.fromCharCode(i$1);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(n){var e=mac$1&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||ie$1&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",o=!e&&n.key||(n.shiftKey?shift:base)[n.keyCode]||n.key||"Unidentified";return o=="Esc"&&(o="Escape"),o=="Del"&&(o="Delete"),o=="Left"&&(o="ArrowLeft"),o=="Up"&&(o="ArrowUp"),o=="Right"&&(o="ArrowRight"),o=="Down"&&(o="ArrowDown"),o}function getSelection$1(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function contains$1(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function hasSelection(n,e){if(!e.anchorNode)return!1;try{return contains$1(n,e.anchorNode)}catch{return!1}}function clientRectsFor(n){return n.nodeType==3?textRange(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function isEquivalentPosition(n,e,o,a){return o?scanFor(n,e,o,a,-1)||scanFor(n,e,o,a,1):!1}function domIndex(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function isBlockElement(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function scanFor(n,e,o,a,s){for(;;){if(n==o&&e==a)return!0;if(e==(s<0?0:maxOffset(n))){if(n.nodeName=="DIV")return!1;let l=n.parentNode;if(!l||l.nodeType!=1)return!1;e=domIndex(n)+(s<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?maxOffset(n):0}else return!1}}function maxOffset(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function flattenRect(n,e){let o=e?n.left:n.right;return{left:o,right:o,top:n.top,bottom:n.bottom}}function windowRect(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function getScale(n,e){let o=e.width/n.offsetWidth,a=e.height/n.offsetHeight;return(o>.995&&o<1.005||!isFinite(o)||Math.abs(e.width-n.offsetWidth)<1)&&(o=1),(a>.995&&a<1.005||!isFinite(a)||Math.abs(e.height-n.offsetHeight)<1)&&(a=1),{scaleX:o,scaleY:a}}function scrollRectIntoView(n,e,o,a,s,l,c,d){let u=n.ownerDocument,f=u.defaultView||window;for(let v=n,b=!1;v&&!b;)if(v.nodeType==1){let k,x=v==u.body,_=1,E=1;if(x)k=windowRect(f);else{if(/^(fixed|sticky)$/.test(getComputedStyle(v).position)&&(b=!0),v.scrollHeight<=v.clientHeight&&v.scrollWidth<=v.clientWidth){v=v.assignedSlot||v.parentNode;continue}let V=v.getBoundingClientRect();({scaleX:_,scaleY:E}=getScale(v,V)),k={left:V.left,right:V.left+v.clientWidth*_,top:V.top,bottom:V.top+v.clientHeight*E}}let B=0,M=0;if(s=="nearest")e.top<k.top?(M=-(k.top-e.top+c),o>0&&e.bottom>k.bottom+M&&(M=e.bottom-k.bottom+M+c)):e.bottom>k.bottom&&(M=e.bottom-k.bottom+c,o<0&&e.top-M<k.top&&(M=-(k.top+M-e.top+c)));else{let V=e.bottom-e.top,F=k.bottom-k.top;M=(s=="center"&&V<=F?e.top+V/2-F/2:s=="start"||s=="center"&&o<0?e.top-c:e.bottom-F+c)-k.top}if(a=="nearest"?e.left<k.left?(B=-(k.left-e.left+l),o>0&&e.right>k.right+B&&(B=e.right-k.right+B+l)):e.right>k.right&&(B=e.right-k.right+l,o<0&&e.left<k.left+B&&(B=-(k.left+B-e.left+l))):B=(a=="center"?e.left+(e.right-e.left)/2-(k.right-k.left)/2:a=="start"==d?e.left-l:e.right-(k.right-k.left)+l)-k.left,B||M)if(x)f.scrollBy(B,M);else{let V=0,F=0;if(M){let I=v.scrollTop;v.scrollTop+=M/E,F=(v.scrollTop-I)*E}if(B){let I=v.scrollLeft;v.scrollLeft+=B/_,V=(v.scrollLeft-I)*_}e={left:e.left-V,top:e.top-F,right:e.right-V,bottom:e.bottom-F},V&&Math.abs(V-B)<1&&(a="nearest"),F&&Math.abs(F-M)<1&&(s="nearest")}if(x)break;v=v.assignedSlot||v.parentNode}else if(v.nodeType==11)v=v.host;else break}function scrollableParents(n){let e=n.ownerDocument,o,a;for(let s=n.parentNode;s&&!(s==e.body||o&&a);)if(s.nodeType==1)!a&&s.scrollHeight>s.clientHeight&&(a=s),!o&&s.scrollWidth>s.clientWidth&&(o=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:o,y:a}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:o,focusNode:a}=e;this.set(o,Math.min(e.anchorOffset,o?maxOffset(o):0),a,Math.min(e.focusOffset,a?maxOffset(a):0))}set(e,o,a,s){this.anchorNode=e,this.anchorOffset=o,this.focusNode=a,this.focusOffset=s}}let preventScrollSupported=null;function focusPreventScroll(n){if(n.setActive)return n.setActive();if(preventScrollSupported)return n.focus(preventScrollSupported);let e=[];for(let o=n;o&&(e.push(o,o.scrollTop,o.scrollLeft),o!=o.ownerDocument);o=o.parentNode);if(n.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let o=0;o<e.length;){let a=e[o++],s=e[o++],l=e[o++];a.scrollTop!=s&&(a.scrollTop=s),a.scrollLeft!=l&&(a.scrollLeft=l)}}}let scratchRange;function textRange(n,e,o=e){let a=scratchRange||(scratchRange=document.createRange());return a.setEnd(n,o),a.setStart(n,e),a}function dispatchKey(n,e,o,a){let s={key:e,code:e,keyCode:o,which:o,cancelable:!0};a&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=a);let l=new KeyboardEvent("keydown",s);l.synthetic=!0,n.dispatchEvent(l);let c=new KeyboardEvent("keyup",s);return c.synthetic=!0,n.dispatchEvent(c),l.defaultPrevented||c.defaultPrevented}function getRoot(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function clearAttributes(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function atElementStart(n,e){let o=e.focusNode,a=e.focusOffset;if(!o||e.anchorNode!=o||e.anchorOffset!=a)return!1;for(a=Math.min(a,maxOffset(o));;)if(a){if(o.nodeType!=1)return!1;let s=o.childNodes[a-1];s.contentEditable=="false"?a--:(o=s,a=maxOffset(o))}else{if(o==n)return!0;a=domIndex(o),o=o.parentNode}}function isScrolledToBottom(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function textNodeBefore(n,e){for(let o=n,a=e;;){if(o.nodeType==3&&a>0)return{node:o,offset:a};if(o.nodeType==1&&a>0){if(o.contentEditable=="false")return null;o=o.childNodes[a-1],a=maxOffset(o)}else if(o.parentNode&&!isBlockElement(o))a=domIndex(o),o=o.parentNode;else return null}}function textNodeAfter(n,e){for(let o=n,a=e;;){if(o.nodeType==3&&a<o.nodeValue.length)return{node:o,offset:a};if(o.nodeType==1&&a<o.childNodes.length){if(o.contentEditable=="false")return null;o=o.childNodes[a],a=0}else if(o.parentNode&&!isBlockElement(o))a=domIndex(o)+1,o=o.parentNode;else return null}}class DOMPos{constructor(e,o,a=!0){this.node=e,this.offset=o,this.precise=a}static before(e,o){return new DOMPos(e.parentNode,domIndex(e),o)}static after(e,o){return new DOMPos(e.parentNode,domIndex(e)+1,o)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let o=this.posAtStart;for(let a of this.children){if(a==e)return o;o+=a.length+a.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,o){if(this.flags&2){let a=this.dom,s=null,l;for(let c of this.children){if(c.flags&7){if(!c.dom&&(l=s?s.nextSibling:a.firstChild)){let d=ContentView.get(l);(!d||!d.parent&&d.canReuseDOM(c))&&c.reuseDOM(l)}c.sync(e,o),c.flags&=-8}if(l=s?s.nextSibling:a.firstChild,o&&!o.written&&o.node==a&&l!=c.dom&&(o.written=!0),c.dom.parentNode==a)for(;l&&l!=c.dom;)l=rm$1(l);else a.insertBefore(c.dom,l);s=c.dom}for(l=s?s.nextSibling:a.firstChild,l&&o&&o.node==a&&(o.written=!0);l;)l=rm$1(l)}else if(this.flags&1)for(let a of this.children)a.flags&7&&(a.sync(e,o),a.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,o){let a;if(e==this.dom)a=this.dom.childNodes[o];else{let s=maxOffset(e)==0?0:o==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;s==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?s=-1:s=1),e=l}s<0?a=e:a=e.nextSibling}if(a==this.dom.firstChild)return 0;for(;a&&!ContentView.get(a);)a=a.nextSibling;if(!a)return this.length;for(let s=0,l=0;;s++){let c=this.children[s];if(c.dom==a)return l;l+=c.length+c.breakAfter}}domBoundsAround(e,o,a=0){let s=-1,l=-1,c=-1,d=-1;for(let u=0,f=a,v=a;u<this.children.length;u++){let b=this.children[u],k=f+b.length;if(f<e&&k>o)return b.domBoundsAround(e,o,f);if(k>=e&&s==-1&&(s=u,l=f),f>o&&b.dom.parentNode==this.dom){c=u,d=v;break}v=k,f=k+b.breakAfter}return{from:l,to:d<0?a+this.length:d,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:c<this.children.length&&c>=0?this.children[c].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let o=this.parent;o;o=o.parent){if(e&&(o.flags|=2),o.flags&1)return;o.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let o=e.parent;if(!o)return e;e=o}}replaceChildren(e,o,a=noChildren){this.markDirty();for(let s=e;s<o;s++){let l=this.children[s];l.parent==this&&a.indexOf(l)<0&&l.destroy()}a.length<250?this.children.splice(e,o-e,...a):this.children=[].concat(this.children.slice(0,e),a,this.children.slice(o));for(let s=0;s<a.length;s++)a[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ChildCursor(this.children,e,this.children.length)}childPos(e,o=1){return this.childCursor().findPos(e,o)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,o,a,s,l,c){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class ChildCursor{constructor(e,o,a){this.children=e,this.pos=o,this.i=a,this.off=0}findPos(e,o=1){for(;;){if(e>this.pos||e==this.pos&&(o>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let a=this.children[--this.i];this.pos-=a.length+a.breakAfter}}}function replaceRange(n,e,o,a,s,l,c,d,u){let{children:f}=n,v=f.length?f[e]:null,b=l.length?l[l.length-1]:null,k=b?b.breakAfter:c;if(!(e==a&&v&&!c&&!k&&l.length<2&&v.merge(o,s,l.length?b:null,o==0,d,u))){if(a<f.length){let x=f[a];x&&(s<x.length||x.breakAfter&&(b!=null&&b.breakAfter))?(e==a&&(x=x.split(s),s=0),!k&&b&&x.merge(0,s,b,!0,0,u)?l[l.length-1]=x:((s||x.children.length&&!x.children[0].length)&&x.merge(0,s,null,!1,0,u),l.push(x))):x!=null&&x.breakAfter&&(b?b.breakAfter=1:c=1),a++}for(v&&(v.breakAfter=c,o>0&&(!c&&l.length&&v.merge(o,v.length,l[0],!1,d,0)?v.breakAfter=l.shift().breakAfter:(o<v.length||v.children.length&&v.children[v.children.length-1].length==0)&&v.merge(o,v.length,null,!1,d,0),e++));e<a&&l.length;)if(f[a-1].become(l[l.length-1]))a--,l.pop(),u=l.length?0:d;else if(f[e].become(l[0]))e++,l.shift(),d=l.length?0:u;else break;!l.length&&e&&a<f.length&&!f[e-1].breakAfter&&f[a].merge(0,0,f[e-1],!1,d,u)&&e--,(e<a||l.length)&&n.replaceChildren(e,a,l)}}function mergeChildrenInto(n,e,o,a,s,l){let c=n.childCursor(),{i:d,off:u}=c.findPos(o,1),{i:f,off:v}=c.findPos(e,-1),b=e-o;for(let k of a)b+=k.length;n.length+=b,replaceRange(n,f,v,d,u,a,0,s,l)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,o){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(o&&o.node==this.dom&&(o.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,o,a){return this.flags&8||a&&(!(a instanceof TextView)||this.length-(o-e)+a.length>MaxJoinLen||a.flags&8)?!1:(this.text=this.text.slice(0,e)+(a?a.text:"")+this.text.slice(o),this.markDirty(),!0)}split(e){let o=new TextView(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),o.flags|=this.flags&8,o}localPosFromDOM(e,o){return e==this.dom?o:o?this.text.length:0}domAtPos(e){return new DOMPos(this.dom,e)}domBoundsAround(e,o,a){return{from:a,to:a+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,o){return textCoords(this.dom,e,o)}}class MarkView extends ContentView{constructor(e,o=[],a=0){super(),this.mark=e,this.children=o,this.length=a;for(let s of o)s.setParent(this)}setAttrs(e){if(clearAttributes(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let o in this.mark.attrs)e.setAttribute(o,this.mark.attrs[o]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,o){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,o)}merge(e,o,a,s,l,c){return a&&(!(a instanceof MarkView&&a.mark.eq(this.mark))||e&&l<=0||o<this.length&&c<=0)?!1:(mergeChildrenInto(this,e,o,a?a.children.slice():[],l-1,c-1),this.markDirty(),!0)}split(e){let o=[],a=0,s=-1,l=0;for(let d of this.children){let u=a+d.length;u>e&&o.push(a<e?d.split(e-a):d),s<0&&a>=e&&(s=l),a=u,l++}let c=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new MarkView(this.mark,o,c)}domAtPos(e){return inlineDOMAtPos(this,e)}coordsAt(e,o){return coordsInChildren(this,e,o)}}function textCoords(n,e,o){let a=n.nodeValue.length;e>a&&(e=a);let s=e,l=e,c=0;e==0&&o<0||e==a&&o>=0?browser.chrome||browser.gecko||(e?(s--,c=1):l<a&&(l++,c=-1)):o<0?s--:l<a&&l++;let d=textRange(n,s,l).getClientRects();if(!d.length)return null;let u=d[(c?c<0:o>=0)?0:d.length-1];return browser.safari&&!c&&u.width==0&&(u=Array.prototype.find.call(d,f=>f.width)||u),c?flattenRect(u,c<0):u||null}class WidgetView extends ContentView{static create(e,o,a){return new WidgetView(e,o,a)}constructor(e,o,a){super(),this.widget=e,this.length=o,this.side=a,this.prevWidget=null}split(e){let o=WidgetView.create(this.widget,this.length-e,this.side);return this.length-=e,o}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,o,a,s,l,c){return a&&(!(a instanceof WidgetView)||!this.widget.compare(a.widget)||e>0&&l<=0||o<this.length&&c<=0)?!1:(this.length=e+(a?a.length:0)+(this.length-o),!0)}become(e){return e instanceof WidgetView&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Text.empty;let e=this;for(;e.parent;)e=e.parent;let{view:o}=e,a=o&&o.state.doc,s=this.posAtStart;return a?a.slice(s,s+this.length):Text.empty}domAtPos(e){return(this.length?e==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,o){let a=this.widget.coordsAt(this.dom,e,o);if(a)return a;let s=this.dom.getClientRects(),l=null;if(!s.length)return null;let c=this.side?this.side<0:e>0;for(let d=c?s.length-1:0;l=s[d],!(e>0?d==0:d==s.length-1||l.top<l.bottom);d+=c?-1:1);return flattenRect(l,!c)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof WidgetBufferView&&e.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(n,e){let o=n.dom,{children:a}=n,s=0;for(let l=0;s<a.length;s++){let c=a[s],d=l+c.length;if(!(d==l&&c.getSide()<=0)){if(e>l&&e<d&&c.dom.parentNode==o)return c.domAtPos(e-l);if(e<=l)break;l=d}}for(let l=s;l>0;l--){let c=a[l-1];if(c.dom.parentNode==o)return c.domAtPos(c.length)}for(let l=s;l<a.length;l++){let c=a[l];if(c.dom.parentNode==o)return c.domAtPos(0)}return new DOMPos(o,0)}function joinInlineInto(n,e,o){let a,{children:s}=n;o>0&&e instanceof MarkView&&s.length&&(a=s[s.length-1])instanceof MarkView&&a.mark.eq(e.mark)?joinInlineInto(a,e.children[0],o-1):(s.push(e),e.setParent(n)),n.length+=e.length}function coordsInChildren(n,e,o){let a=null,s=-1,l=null,c=-1;function d(f,v){for(let b=0,k=0;b<f.children.length&&k<=v;b++){let x=f.children[b],_=k+x.length;_>=v&&(x.children.length?d(x,v-k):(!l||l.isHidden&&o>0)&&(_>v||k==_&&x.getSide()>0)?(l=x,c=v-k):(k<v||k==_&&x.getSide()<0&&!x.isHidden)&&(a=x,s=v-k)),k=_}}d(n,e);let u=(o<0?a:l)||a||l;return u?u.coordsAt(Math.max(0,u==a?s:c),o):fallbackRect(n)}function fallbackRect(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let o=clientRectsFor(e);return o[o.length-1]||null}function combineAttrs(n,e){for(let o in n)o=="class"&&e.class?e.class+=" "+n.class:o=="style"&&e.style?e.style+=";"+n.style:e[o]=n[o];return e}const noAttrs=Object.create(null);function attrsEq(n,e,o){if(n==e)return!0;n||(n=noAttrs),e||(e=noAttrs);let a=Object.keys(n),s=Object.keys(e);if(a.length-(o&&a.indexOf(o)>-1?1:0)!=s.length-(o&&s.indexOf(o)>-1?1:0))return!1;for(let l of a)if(l!=o&&(s.indexOf(l)==-1||n[l]!==e[l]))return!1;return!0}function updateAttrs(n,e,o){let a=!1;if(e)for(let s in e)o&&s in o||(a=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(o)for(let s in o)e&&e[s]==o[s]||(a=!0,s=="style"?n.style.cssText=o[s]:n.setAttribute(s,o[s]));return a}function getAttrs(n){let e=Object.create(null);for(let o=0;o<n.attributes.length;o++){let a=n.attributes[o];e[a.name]=a.value}return e}class WidgetType{eq(e){return!1}updateDOM(e,o){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,o,a){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var BlockType=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,o,a,s){super(),this.startSide=e,this.endSide=o,this.widget=a,this.spec=s}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let o=Math.max(-1e4,Math.min(1e4,e.side||0)),a=!!e.block;return o+=a&&!e.inlineOrder?o>0?3e8:-4e8:o>0?1e8:-1e8,new PointDecoration(e,o,o,a,e.widget||null,!1)}static replace(e){let o=!!e.block,a,s;if(e.isBlockGap)a=-5e8,s=4e8;else{let{start:l,end:c}=getInclusive(e,o);a=(l?o?-3e8:-1:5e8)-1,s=(c?o?2e8:1:-6e8)+1}return new PointDecoration(e,a,s,o,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,o=!1){return RangeSet.of(e,o)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:o,end:a}=getInclusive(e);super(o?-1:5e8,a?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var o,a;return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&(this.class||((o=this.attrs)===null||o===void 0?void 0:o.class))==(e.class||((a=e.attrs)===null||a===void 0?void 0:a.class))&&attrsEq(this.attrs,e.attrs,"class")}range(e,o=e){if(e>=o)throw new RangeError("Mark decorations may not be empty");return super.range(e,o)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,o=e){if(o!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,o)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore,LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,o,a,s,l,c){super(o,a,l,e),this.block=s,this.isReplace=c,this.mapMode=s?o<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,o=e){if(this.isReplace&&(e>o||e==o&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&o!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,o)}}PointDecoration.prototype.point=!0;function getInclusive(n,e=!1){let{inclusiveStart:o,inclusiveEnd:a}=n;return o==null&&(o=n.inclusive),a==null&&(a=n.inclusive),{start:o??e,end:a??e}}function widgetsEq(n,e){return n==e||!!(n&&e&&n.compare(e))}function addRange(n,e,o,a=0){let s=o.length-1;s>=0&&o[s]+a>=n?o[s]=Math.max(o[s],e):o.push(n,e)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,o,a,s,l,c){if(a){if(!(a instanceof LineView))return!1;this.dom||a.transferDOM(this)}return s&&this.setDeco(a?a.attrs:null),mergeChildrenInto(this,e,o,a?a.children.slice():[],l,c),!0}split(e){let o=new LineView;if(o.breakAfter=this.breakAfter,this.length==0)return o;let{i:a,off:s}=this.childPos(e);s&&(o.append(this.children[a].split(s),0),this.children[a].merge(s,this.children[a].length,null,!1,0,0),a++);for(let l=a;l<this.children.length;l++)o.append(this.children[l],0);for(;a>0&&this.children[a-1].length==0;)this.children[--a].destroy();return this.children.length=a,this.markDirty(),this.length=e,o}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){attrsEq(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,o){joinInlineInto(this,e,o)}addLineDeco(e){let o=e.spec.attributes,a=e.spec.class;o&&(this.attrs=combineAttrs(o,this.attrs||{})),a&&(this.attrs=combineAttrs({class:a},this.attrs||{}))}domAtPos(e){return inlineDOMAtPos(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,o){var a;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,o);let s=this.dom.lastChild;for(;s&&ContentView.get(s)instanceof MarkView;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((a=ContentView.get(s))===null||a===void 0?void 0:a.isEditable)==!1&&(!browser.ios||!this.children.some(l=>l instanceof TextView))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,o;for(let a of this.children){if(!(a instanceof TextView)||/[^ -~]/.test(a.text))return null;let s=clientRectsFor(a.dom);if(s.length!=1)return null;e+=s[0].width,o=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:o}:null}coordsAt(e,o){let a=coordsInChildren(this,e,o);if(!this.children.length&&a&&this.parent){let{heightOracle:s}=this.parent.view.viewState,l=a.bottom-a.top;if(Math.abs(l-s.lineHeight)<2&&s.textHeight<l){let c=(l-s.textHeight)/2;return{top:a.top+c,bottom:a.bottom-c,left:a.left,right:a.left}}}return a}become(e){return e instanceof LineView&&this.children.length==0&&e.children.length==0&&attrsEq(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,o){for(let a=0,s=0;a<e.children.length;a++){let l=e.children[a],c=s+l.length;if(c>=o){if(l instanceof LineView)return l;if(c>o)break}s=c+l.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(e,o,a){super(),this.widget=e,this.length=o,this.deco=a,this.breakAfter=0,this.prevWidget=null}merge(e,o,a,s,l,c){return a&&(!(a instanceof BlockWidgetView)||!this.widget.compare(a.widget)||e>0&&l<=0||o<this.length&&c<=0)?!1:(this.length=e+(a?a.length:0)+(this.length-o),!0)}domAtPos(e){return e==0?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}split(e){let o=this.length-e;this.length=e;let a=new BlockWidgetView(this.widget,o,this.deco);return a.breakAfter=this.breakAfter,a}get children(){return noChildren}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(e){return e instanceof BlockWidgetView&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,o){return this.widget.coordsAt(this.dom,e,o)||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?e==0:o<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:o,endSide:a}=this.deco;return o==a?!1:e<0?o<0:a>0}}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(e,o,a,s){this.doc=e,this.pos=o,this.end=a,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=o}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof BlockWidgetView&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(e,o,a){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:c,done:d}=this.cursor.next(this.skip);if(this.skip=0,d)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(o.slice(o.length-a)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+s)),o),a),this.atCursorPos=!0,this.textOff+=s,e-=s,a=0}}span(e,o,a,s){this.buildText(o-e,a,s),this.pos=o,this.openStart<0&&(this.openStart=s)}point(e,o,a,s,l,c){if(this.disallowBlockEffectsFor[c]&&a instanceof PointDecoration){if(a.block)throw new RangeError("Block decorations may not be specified via plugins");if(o>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let d=o-e;if(a instanceof PointDecoration)if(a.block)a.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(a.widget||NullWidget.block,d,a));else{let u=WidgetView.create(a.widget||NullWidget.inline,d,d?0:a.startSide),f=this.atCursorPos&&!u.isEditable&&l<=s.length&&(e<o||a.startSide>0),v=!u.isEditable&&(e<o||l>s.length||a.startSide<=0),b=this.getLine();this.pendingBuffer==2&&!f&&!u.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),f&&(b.append(wrapMarks(new WidgetBufferView(1),s),l),l=s.length+Math.max(0,l-s.length)),b.append(wrapMarks(u,s),l),this.atCursorPos=v,this.pendingBuffer=v?e<o||l>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(a);d&&(this.textOff+d<=this.text.length?this.textOff+=d:(this.skip+=d-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=o),this.openStart<0&&(this.openStart=l)}static build(e,o,a,s,l){let c=new ContentBuilder(e,o,a,l);return c.openEnd=RangeSet.spans(s,o,a,c),c.openStart<0&&(c.openStart=c.openEnd),c.finish(c.openEnd),c}}function wrapMarks(n,e){for(let o of e)n=new MarkView(o,[n],n.length);return n}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span"),NullWidget.block=new NullWidget("div");var Direction=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(n){let e=[];for(let o=0;o<n.length;o++)e.push(1<<+n[o]);return e}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),o=n.charCodeAt(1);Brackets[e]=o,Brackets[o]=-e}function charType(n){return n<=247?LowTypes[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?ArabicTypes[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(e,o,a){this.from=e,this.to=o,this.level=a}side(e,o){return this.dir==o==e?this.to:this.from}forward(e,o){return e==(this.dir==o)}static find(e,o,a,s){let l=-1;for(let c=0;c<e.length;c++){let d=e[c];if(d.from<=o&&d.to>=o){if(d.level==a)return c;(l<0||(s!=0?s<0?d.from<o:d.to>o:e[l].level>d.level))&&(l=c)}}if(l<0)throw new RangeError("Index out of range");return l}}function isolatesEq(n,e){if(n.length!=e.length)return!1;for(let o=0;o<n.length;o++){let a=n[o],s=e[o];if(a.from!=s.from||a.to!=s.to||a.direction!=s.direction||!isolatesEq(a.inner,s.inner))return!1}return!0}const types=[];function computeCharTypes(n,e,o,a,s){for(let l=0;l<=a.length;l++){let c=l?a[l-1].to:e,d=l<a.length?a[l].from:o,u=l?256:s;for(let f=c,v=u,b=u;f<d;f++){let k=charType(n.charCodeAt(f));k==512?k=v:k==8&&b==4&&(k=16),types[f]=k==4?2:k,k&7&&(b=k),v=k}for(let f=c,v=u,b=u;f<d;f++){let k=types[f];if(k==128)f<d-1&&v==types[f+1]&&v&24?k=types[f]=v:types[f]=256;else if(k==64){let x=f+1;for(;x<d&&types[x]==64;)x++;let _=f&&v==8||x<o&&types[x]==8?b==1?1:8:256;for(let E=f;E<x;E++)types[E]=_;f=x-1}else k==8&&b==1&&(types[f]=1);v=k,k&7&&(b=k)}}}function processBracketPairs(n,e,o,a,s){let l=s==1?2:1;for(let c=0,d=0,u=0;c<=a.length;c++){let f=c?a[c-1].to:e,v=c<a.length?a[c].from:o;for(let b=f,k,x,_;b<v;b++)if(x=Brackets[k=n.charCodeAt(b)])if(x<0){for(let E=d-3;E>=0;E-=3)if(BracketStack[E+1]==-x){let B=BracketStack[E+2],M=B&2?s:B&4?B&1?l:s:0;M&&(types[b]=types[BracketStack[E]]=M),d=E;break}}else{if(BracketStack.length==189)break;BracketStack[d++]=b,BracketStack[d++]=k,BracketStack[d++]=u}else if((_=types[b])==2||_==1){let E=_==s;u=E?0:1;for(let B=d-3;B>=0;B-=3){let M=BracketStack[B+2];if(M&2)break;if(E)BracketStack[B+2]|=2;else{if(M&4)break;BracketStack[B+2]|=4}}}}}function processNeutrals(n,e,o,a){for(let s=0,l=a;s<=o.length;s++){let c=s?o[s-1].to:n,d=s<o.length?o[s].from:e;for(let u=c;u<d;){let f=types[u];if(f==256){let v=u+1;for(;;)if(v==d){if(s==o.length)break;v=o[s++].to,d=s<o.length?o[s].from:e}else if(types[v]==256)v++;else break;let b=l==1,k=(v<e?types[v]:a)==1,x=b==k?b?1:2:a;for(let _=v,E=s,B=E?o[E-1].to:n;_>u;)_==B&&(_=o[--E].from,B=E?o[E-1].to:n),types[--_]=x;u=v}else l=f,u++}}}function emitSpans(n,e,o,a,s,l,c){let d=a%2?2:1;if(a%2==s%2)for(let u=e,f=0;u<o;){let v=!0,b=!1;if(f==l.length||u<l[f].from){let E=types[u];E!=d&&(v=!1,b=E==16)}let k=!v&&d==1?[]:null,x=v?a:a+1,_=u;e:for(;;)if(f<l.length&&_==l[f].from){if(b)break e;let E=l[f];if(!v)for(let B=E.to,M=f+1;;){if(B==o)break e;if(M<l.length&&l[M].from==B)B=l[M++].to;else{if(types[B]==d)break e;break}}if(f++,k)k.push(E);else{E.from>u&&c.push(new BidiSpan(u,E.from,x));let B=E.direction==LTR!=!(x%2);computeSectionOrder(n,B?a+1:a,s,E.inner,E.from,E.to,c),u=E.to}_=E.to}else{if(_==o||(v?types[_]!=d:types[_]==d))break;_++}k?emitSpans(n,u,_,a+1,s,k,c):u<_&&c.push(new BidiSpan(u,_,x)),u=_}else for(let u=o,f=l.length;u>e;){let v=!0,b=!1;if(!f||u>l[f-1].to){let E=types[u-1];E!=d&&(v=!1,b=E==16)}let k=!v&&d==1?[]:null,x=v?a:a+1,_=u;e:for(;;)if(f&&_==l[f-1].to){if(b)break e;let E=l[--f];if(!v)for(let B=E.from,M=f;;){if(B==e)break e;if(M&&l[M-1].to==B)B=l[--M].from;else{if(types[B-1]==d)break e;break}}if(k)k.push(E);else{E.to<u&&c.push(new BidiSpan(E.to,u,x));let B=E.direction==LTR!=!(x%2);computeSectionOrder(n,B?a+1:a,s,E.inner,E.from,E.to,c),u=E.from}_=E.from}else{if(_==e||(v?types[_-1]!=d:types[_-1]==d))break;_--}k?emitSpans(n,_,u,a+1,s,k,c):_<u&&c.push(new BidiSpan(_,u,x)),u=_}}function computeSectionOrder(n,e,o,a,s,l,c){let d=e%2?2:1;computeCharTypes(n,s,l,a,d),processBracketPairs(n,s,l,a,d),processNeutrals(s,l,a,d),emitSpans(n,s,l,e,o,a,c)}function computeOrder(n,e,o){if(!n)return[new BidiSpan(0,0,e==RTL?1:0)];if(e==LTR&&!o.length&&!BidiRE.test(n))return trivialOrder(n.length);if(o.length)for(;n.length>types.length;)types[types.length]=256;let a=[],s=e==LTR?0:1;return computeSectionOrder(n,s,s,o,0,n.length,a),a}function trivialOrder(n){return[new BidiSpan(0,n,0)]}let movedOver="";function moveVisually(n,e,o,a,s){var l;let c=a.head-n.from,d=BidiSpan.find(e,c,(l=a.bidiLevel)!==null&&l!==void 0?l:-1,a.assoc),u=e[d],f=u.side(s,o);if(c==f){let k=d+=s?1:-1;if(k<0||k>=e.length)return null;u=e[d=k],c=u.side(!s,o),f=u.side(s,o)}let v=findClusterBreak(n.text,c,u.forward(s,o));(v<u.from||v>u.to)&&(v=f),movedOver=n.text.slice(Math.min(c,v),Math.max(c,v));let b=d==(s?e.length-1:0)?null:e[d+(s?1:-1)];return b&&v==f&&b.level+(s?0:1)<u.level?EditorSelection.cursor(b.side(!s,o)+n.from,b.forward(s,o)?1:-1,b.level):EditorSelection.cursor(v+n.from,u.forward(s,o)?-1:1,u.level)}function autoDirection(n,e,o){for(let a=e;a<o;a++){let s=charType(n.charCodeAt(a));if(s==1)return LTR;if(s==2||s==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:n=>n.some(e=>e)}),nativeSelectionHidden=Facet.define({combine:n=>n.some(e=>e)}),scrollHandler=Facet.define();class ScrollTarget{constructor(e,o="nearest",a="nearest",s=5,l=5,c=!1){this.range=e,this.y=o,this.x=a,this.yMargin=s,this.xMargin=l,this.isSnapshot=c}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ScrollTarget(EditorSelection.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView=StateEffect.define({map:(n,e)=>n.map(e)}),setEditContextFormatting=StateEffect.define();function logException(n,e,o){let a=n.facet(exceptionSink);a.length?a[0](e):window.onerror?window.onerror(String(e),o,void 0,void 0,e):o?console.error(o+":",e):console.error(e)}const editable=Facet.define({combine:n=>n.length?n[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(e,o,a,s,l){this.id=e,this.create=o,this.domEventHandlers=a,this.domEventObservers=s,this.extension=l(this)}static define(e,o){const{eventHandlers:a,eventObservers:s,provide:l,decorations:c}=o||{};return new ViewPlugin(nextPluginID++,e,a,s,d=>{let u=[viewPlugin.of(d)];return c&&u.push(decorations.of(f=>{let v=f.plugin(d);return v?c(v):Decoration.none})),l&&u.push(l(d)),u})}static fromClass(e,o){return ViewPlugin.define(a=>new e(a),o)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let o=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(o)}catch(a){if(logException(o.state,a,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(o){logException(e.state,o,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var o;if(!((o=this.value)===null||o===void 0)&&o.destroy)try{this.value.destroy()}catch(a){logException(e.state,a,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(n,e){let o=n.state.facet(bidiIsolatedRanges);if(!o.length)return o;let a=o.map(l=>l instanceof Function?l(n):l),s=[];return RangeSet.spans(a,e.from,e.to,{point(){},span(l,c,d,u){let f=l-e.from,v=c-e.from,b=s;for(let k=d.length-1;k>=0;k--,u--){let x=d[k].spec.bidiIsolate,_;if(x==null&&(x=autoDirection(e.text,f,v)),u>0&&b.length&&(_=b[b.length-1]).to==f&&_.direction==x)_.to=v,b=_.inner;else{let E={from:f,to:v,direction:x,inner:[]};b.push(E),b=E.inner}}}}),s}const scrollMargins=Facet.define();function getScrollMargins(n){let e=0,o=0,a=0,s=0;for(let l of n.state.facet(scrollMargins)){let c=l(n);c&&(c.left!=null&&(e=Math.max(e,c.left)),c.right!=null&&(o=Math.max(o,c.right)),c.top!=null&&(a=Math.max(a,c.top)),c.bottom!=null&&(s=Math.max(s,c.bottom)))}return{left:e,right:o,top:a,bottom:s}}const styleModule=Facet.define();class ChangedRange{constructor(e,o,a,s){this.fromA=e,this.toA=o,this.fromB=a,this.toB=s}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let o=e.length,a=this;for(;o>0;o--){let s=e[o-1];if(!(s.fromA>a.toA)){if(s.toA<a.fromA)break;a=a.join(s),e.splice(o-1,1)}}return e.splice(o,0,a),e}static extendWithRanges(e,o){if(o.length==0)return e;let a=[];for(let s=0,l=0,c=0,d=0;;s++){let u=s==e.length?null:e[s],f=c-d,v=u?u.fromB:1e9;for(;l<o.length&&o[l]<v;){let b=o[l],k=o[l+1],x=Math.max(d,b),_=Math.min(v,k);if(x<=_&&new ChangedRange(x+f,_+f,x,_).addToSet(a),k>v)break;l+=2}if(!u)return a;new ChangedRange(u.fromA,u.toA,u.fromB,u.toB).addToSet(a),c=u.toA,d=u.toB}}}class ViewUpdate{constructor(e,o,a){this.view=e,this.state=o,this.transactions=a,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let l of a)this.changes=this.changes.compose(l.changes);let s=[];this.changes.iterChangedRanges((l,c,d,u)=>s.push(new ChangedRange(l,c,d,u))),this.changedRanges=s}static create(e,o,a){return new ViewUpdate(e,o,a)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],0,null)}update(e){var o;let a=e.changedRanges;this.minWidth>0&&a.length&&(a.every(({fromA:f,toA:v})=>v<this.minWidthFrom||f>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((o=this.domChanged)===null||o===void 0)&&o.newSel?s=this.domChanged.newSel.head:!touchesComposition(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let l=s>-1?findCompositionRange(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:f,to:v}=this.hasComposition;a=new ChangedRange(f,v,e.changes.mapPos(f,-1),e.changes.mapPos(v,1)).addToSet(a.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(browser.ie||browser.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let c=this.decorations,d=this.updateDeco(),u=findChangedDeco(c,d,e.changes);return a=ChangedRange.extendWithRanges(a,u),!(this.flags&7)&&a.length==0?!1:(this.updateInner(a,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,o,a){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,o,a);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let c=browser.chrome||browser.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,c),this.flags&=-8,c&&(c.written||s.selectionRange.focusNode!=c.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(c=>c.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let c of this.children)c instanceof BlockWidgetView&&c.widget instanceof BlockGapWidget&&l.push(c.dom);s.updateGaps(l)}updateChildren(e,o,a){let s=a?a.range.addToSet(e.slice()):e,l=this.childCursor(o);for(let c=s.length-1;;c--){let d=c>=0?s[c]:null;if(!d)break;let{fromA:u,toA:f,fromB:v,toB:b}=d,k,x,_,E;if(a&&a.range.fromB<b&&a.range.toB>v){let I=ContentBuilder.build(this.view.state.doc,v,a.range.fromB,this.decorations,this.dynamicDecorationMap),L=ContentBuilder.build(this.view.state.doc,a.range.toB,b,this.decorations,this.dynamicDecorationMap);x=I.breakAtStart,_=I.openStart,E=L.openEnd;let U=this.compositionView(a);L.breakAtStart?U.breakAfter=1:L.content.length&&U.merge(U.length,U.length,L.content[0],!1,L.openStart,0)&&(U.breakAfter=L.content[0].breakAfter,L.content.shift()),I.content.length&&U.merge(0,0,I.content[I.content.length-1],!0,0,I.openEnd)&&I.content.pop(),k=I.content.concat(U).concat(L.content)}else({content:k,breakAtStart:x,openStart:_,openEnd:E}=ContentBuilder.build(this.view.state.doc,v,b,this.decorations,this.dynamicDecorationMap));let{i:B,off:M}=l.findPos(f,1),{i:V,off:F}=l.findPos(u,-1);replaceRange(this,V,F,B,M,k,x,_,E)}a&&this.fixCompositionDOM(a)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let o of e.transactions)for(let a of o.effects)a.is(setEditContextFormatting)&&(this.editContextFormatting=a.value)}compositionView(e){let o=new TextView(e.text.nodeValue);o.flags|=8;for(let{deco:s}of e.marks)o=new MarkView(s,[o],o.length);let a=new LineView;return a.append(o,0),a}fixCompositionDOM(e){let o=(l,c)=>{c.flags|=8|(c.children.some(u=>u.flags&7)?1:0),this.markedForComposition.add(c);let d=ContentView.get(l);d&&d!=c&&(d.dom=null),c.setDOM(l)},a=this.childPos(e.range.fromB,1),s=this.children[a.i];o(e.line,s);for(let l=e.marks.length-1;l>=-1;l--)a=s.childPos(a.off,1),s=s.children[a.i],o(l>=0?e.marks[l].node:e.text,s)}updateSelection(e=!1,o=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let a=this.view.root.activeElement,s=a==this.dom,l=!s&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(a&&this.dom.contains(a));if(!(s||o||l))return;let c=this.forceSelection;this.forceSelection=!1;let d=this.view.state.selection.main,u=this.moveToLine(this.domAtPos(d.anchor)),f=d.empty?u:this.moveToLine(this.domAtPos(d.head));if(browser.gecko&&d.empty&&!this.hasComposition&&betweenUneditable(u)){let b=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(b,u.node.childNodes[u.offset]||null)),u=f=new DOMPos(b,0),c=!0}let v=this.view.observer.selectionRange;(c||!v.focusNode||(!isEquivalentPosition(u.node,u.offset,v.anchorNode,v.anchorOffset)||!isEquivalentPosition(f.node,f.offset,v.focusNode,v.focusOffset))&&!this.suppressWidgetCursorChange(v,d))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(v.focusNode)&&inUneditable(v.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let b=getSelection$1(this.view.root);if(b)if(d.empty){if(browser.gecko){let k=nextToUneditable(u.node,u.offset);if(k&&k!=3){let x=(k==1?textNodeBefore:textNodeAfter)(u.node,u.offset);x&&(u=new DOMPos(x.node,x.offset))}}b.collapse(u.node,u.offset),d.bidiLevel!=null&&b.caretBidiLevel!==void 0&&(b.caretBidiLevel=d.bidiLevel)}else if(b.extend){b.collapse(u.node,u.offset);try{b.extend(f.node,f.offset)}catch{}}else{let k=document.createRange();d.anchor>d.head&&([u,f]=[f,u]),k.setEnd(f.node,f.offset),k.setStart(u.node,u.offset),b.removeAllRanges(),b.addRange(k)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),a&&a.focus())}),this.view.observer.setSelectionRange(u,f)),this.impreciseAnchor=u.precise?null:new DOMPos(v.anchorNode,v.anchorOffset),this.impreciseHead=f.precise?null:new DOMPos(v.focusNode,v.focusOffset)}suppressWidgetCursorChange(e,o){return this.hasComposition&&o.empty&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==o.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,o=e.state.selection.main,a=getSelection$1(e.root),{anchorNode:s,anchorOffset:l}=e.observer.selectionRange;if(!a||!o.empty||!o.assoc||!a.modify)return;let c=LineView.find(this,o.head);if(!c)return;let d=c.posAtStart;if(o.head==d||o.head==d+c.length)return;let u=this.coordsAt(o.head,-1),f=this.coordsAt(o.head,1);if(!u||!f||u.bottom>f.top)return;let v=this.domAtPos(o.head+o.assoc);a.collapse(v.node,v.offset),a.modify("move",o.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let b=e.observer.selectionRange;e.docView.posFromDOM(b.anchorNode,b.anchorOffset)!=o.from&&a.collapse(s,l)}moveToLine(e){let o=this.dom,a;if(e.node!=o)return e;for(let s=e.offset;!a&&s<o.childNodes.length;s++){let l=ContentView.get(o.childNodes[s]);l instanceof LineView&&(a=l.domAtPos(0))}for(let s=e.offset-1;!a&&s>=0;s--){let l=ContentView.get(o.childNodes[s]);l instanceof LineView&&(a=l.domAtPos(l.length))}return a?new DOMPos(a.node,a.offset,!0):e}nearest(e){for(let o=e;o;){let a=ContentView.get(o);if(a&&a.rootView==this)return a;o=o.parentNode}return null}posFromDOM(e,o){let a=this.nearest(e);if(!a)throw new RangeError("Trying to find position for a DOM position outside of the document");return a.localPosFromDOM(e,o)+a.posAtStart}domAtPos(e){let{i:o,off:a}=this.childCursor().findPos(e,-1);for(;o<this.children.length-1;){let s=this.children[o];if(a<s.length||s instanceof LineView)break;o++,a=0}return this.children[o].domAtPos(a)}coordsAt(e,o){let a=null,s=0;for(let l=this.length,c=this.children.length-1;c>=0;c--){let d=this.children[c],u=l-d.breakAfter,f=u-d.length;if(u<e)break;if(f<=e&&(f<e||d.covers(-1))&&(u>e||d.covers(1))&&(!a||d instanceof LineView&&!(a instanceof LineView&&o>=0)))a=d,s=f;else if(a&&f==e&&u==e&&d instanceof BlockWidgetView&&Math.abs(o)<2){if(d.deco.startSide<0)break;c&&(a=null)}l=f}return a?a.coordsAt(e-s,o):null}coordsForChar(e){let{i:o,off:a}=this.childPos(e,1),s=this.children[o];if(!(s instanceof LineView))return null;for(;s.children.length;){let{i:d,off:u}=s.childPos(a,1);for(;;d++){if(d==s.children.length)return null;if((s=s.children[d]).length)break}a=u}if(!(s instanceof TextView))return null;let l=findClusterBreak(s.text,a);if(l==a)return null;let c=textRange(s.dom,a,l).getClientRects();for(let d=0;d<c.length;d++){let u=c[d];if(d==c.length-1||u.top<u.bottom&&u.left<u.right)return u}return null}measureVisibleLineHeights(e){let o=[],{from:a,to:s}=e,l=this.view.contentDOM.clientWidth,c=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,d=-1,u=this.view.textDirection==Direction.LTR;for(let f=0,v=0;v<this.children.length;v++){let b=this.children[v],k=f+b.length;if(k>s)break;if(f>=a){let x=b.dom.getBoundingClientRect();if(o.push(x.height),c){let _=b.dom.lastChild,E=_?clientRectsFor(_):[];if(E.length){let B=E[E.length-1],M=u?B.right-x.left:x.right-B.left;M>d&&(d=M,this.minWidth=l,this.minWidthFrom=f,this.minWidthTo=k)}}}f=k+b.breakAfter}return o}textDirectionAt(e){let{i:o}=this.childPos(e,1);return getComputedStyle(this.children[o].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let l of this.children)if(l instanceof LineView){let c=l.measureTextSize();if(c)return c}let e=document.createElement("div"),o,a,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=clientRectsFor(e.firstChild)[0];o=e.getBoundingClientRect().height,a=l?l.width/27:7,s=l?l.height:o,e.remove()}),{lineHeight:o,charWidth:a,textHeight:s}}childCursor(e=this.length){let o=this.children.length;return o&&(e-=this.children[--o].length),new ChildCursor(this.children,e,o)}computeBlockGapDeco(){let e=[],o=this.view.viewState;for(let a=0,s=0;;s++){let l=s==o.viewports.length?null:o.viewports[s],c=l?l.from-1:this.length;if(c>a){let d=(o.lineBlockAt(c).bottom-o.lineBlockAt(a).top)/this.view.scaleY;e.push(Decoration.replace({widget:new BlockGapWidget(d),block:!0,inclusive:!0,isBlockGap:!0}).range(a,c))}if(!l)break;a=l.to+1}return Decoration.set(e)}updateDeco(){let e=1,o=this.view.state.facet(decorations).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),a=!1,s=this.view.state.facet(outerDecorations).map((l,c)=>{let d=typeof l=="function";return d&&(a=!0),d?l(this.view):l});for(s.length&&(this.dynamicDecorationMap[e++]=a,o.push(RangeSet.join(s))),this.decorations=[this.editContextFormatting,...o,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let f=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=f.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let f of this.view.state.facet(scrollHandler))try{if(f(this.view,e.range,e))return!0}catch(v){logException(this.view.state,v,"scroll handler")}let{range:o}=e,a=this.coordsAt(o.head,o.empty?o.assoc:o.head>o.anchor?-1:1),s;if(!a)return;!o.empty&&(s=this.coordsAt(o.anchor,o.anchor>o.head?-1:1))&&(a={left:Math.min(a.left,s.left),top:Math.min(a.top,s.top),right:Math.max(a.right,s.right),bottom:Math.max(a.bottom,s.bottom)});let l=getScrollMargins(this.view),c={left:a.left-l.left,top:a.top-l.top,right:a.right+l.right,bottom:a.bottom+l.bottom},{offsetWidth:d,offsetHeight:u}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,c,o.head<o.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,d),-d),Math.max(Math.min(e.yMargin,u),-u),this.view.textDirection==Direction.LTR)}}function betweenUneditable(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function findCompositionNode(n,e){let o=n.observer.selectionRange;if(!o.focusNode)return null;let a=textNodeBefore(o.focusNode,o.focusOffset),s=textNodeAfter(o.focusNode,o.focusOffset),l=a||s;if(s&&a&&s.node!=a.node){let d=ContentView.get(s.node);if(!d||d instanceof TextView&&d.text!=s.node.nodeValue)l=s;else if(n.docView.lastCompositionAfterCursor){let u=ContentView.get(a.node);!u||u instanceof TextView&&u.text!=a.node.nodeValue||(l=s)}}if(n.docView.lastCompositionAfterCursor=l!=a,!l)return null;let c=e-l.offset;return{from:c,to:c+l.node.nodeValue.length,node:l.node}}function findCompositionRange(n,e,o){let a=findCompositionNode(n,o);if(!a)return null;let{node:s,from:l,to:c}=a,d=s.nodeValue;if(/[\n\r]/.test(d)||n.state.doc.sliceString(a.from,a.to)!=d)return null;let u=e.invertedDesc,f=new ChangedRange(u.mapPos(l),u.mapPos(c),l,c),v=[];for(let b=s.parentNode;;b=b.parentNode){let k=ContentView.get(b);if(k instanceof MarkView)v.push({node:b,deco:k.mark});else{if(k instanceof LineView||b.nodeName=="DIV"&&b.parentNode==n.contentDOM)return{range:f,text:s,marks:v,line:b};if(b!=n.contentDOM)v.push({node:b,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(b),tagName:b.tagName.toLowerCase()})});else return null}}}function nextToUneditable(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(n,e){addRange(n,e,this.changes)}comparePoint(n,e){addRange(n,e,this.changes)}boundChange(n){addRange(n,n,this.changes)}};function findChangedDeco(n,e,o){let a=new DecorationComparator$1;return RangeSet.compare(n,e,o,a),a.changes}function inUneditable(n,e){for(let o=n;o&&o!=e;o=o.assignedSlot||o.parentNode)if(o.nodeType==1&&o.contentEditable=="false")return!0;return!1}function touchesComposition(n,e){let o=!1;return e&&n.iterChangedRanges((a,s)=>{a<e.to&&s>e.from&&(o=!0)}),o}function groupAt(n,e,o=1){let a=n.charCategorizer(e),s=n.doc.lineAt(e),l=e-s.from;if(s.length==0)return EditorSelection.cursor(e);l==0?o=1:l==s.length&&(o=-1);let c=l,d=l;o<0?c=findClusterBreak(s.text,l,!1):d=findClusterBreak(s.text,l);let u=a(s.text.slice(c,d));for(;c>0;){let f=findClusterBreak(s.text,c,!1);if(a(s.text.slice(f,c))!=u)break;c=f}for(;d<s.length;){let f=findClusterBreak(s.text,d);if(a(s.text.slice(d,f))!=u)break;d=f}return EditorSelection.range(c+s.from,d+s.from)}function getdx(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function getdy(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function yOverlap(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function upTop(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function upBot(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function domPosAtCoords(n,e,o){let a,s,l,c,d=!1,u,f,v,b;for(let _=n.firstChild;_;_=_.nextSibling){let E=clientRectsFor(_);for(let B=0;B<E.length;B++){let M=E[B];s&&yOverlap(s,M)&&(M=upTop(upBot(M,s.bottom),s.top));let V=getdx(e,M),F=getdy(o,M);if(V==0&&F==0)return _.nodeType==3?domPosInText(_,e,o):domPosAtCoords(_,e,o);if(!a||c>F||c==F&&l>V){a=_,s=M,l=V,c=F;let I=F?o<M.top?-1:1:V?e<M.left?-1:1:0;d=!I||(I>0?B<E.length-1:B>0)}V==0?o>M.bottom&&(!v||v.bottom<M.bottom)?(u=_,v=M):o<M.top&&(!b||b.top>M.top)&&(f=_,b=M):v&&yOverlap(v,M)?v=upBot(v,M.bottom):b&&yOverlap(b,M)&&(b=upTop(b,M.top))}}if(v&&v.bottom>=o?(a=u,s=v):b&&b.top<=o&&(a=f,s=b),!a)return{node:n,offset:0};let k=Math.max(s.left,Math.min(s.right,e));if(a.nodeType==3)return domPosInText(a,k,o);if(d&&a.contentEditable!="false")return domPosAtCoords(a,k,o);let x=Array.prototype.indexOf.call(n.childNodes,a)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:x}}function domPosInText(n,e,o){let a=n.nodeValue.length,s=-1,l=1e9,c=0;for(let d=0;d<a;d++){let u=textRange(n,d,d+1).getClientRects();for(let f=0;f<u.length;f++){let v=u[f];if(v.top==v.bottom)continue;c||(c=e-v.left);let b=(v.top>o?v.top-o:o-v.bottom)-1;if(v.left-1<=e&&v.right+1>=e&&b<l){let k=e>=(v.left+v.right)/2,x=k;if((browser.chrome||browser.gecko)&&textRange(n,d).getBoundingClientRect().left==v.right&&(x=!k),b<=0)return{node:n,offset:d+(x?1:0)};s=d+(x?1:0),l=b}}}return{node:n,offset:s>-1?s:c>0?n.nodeValue.length:0}}function posAtCoords(n,e,o,a=-1){var s,l;let c=n.contentDOM.getBoundingClientRect(),d=c.top+n.viewState.paddingTop,u,{docHeight:f}=n.viewState,{x:v,y:b}=e,k=b-d;if(k<0)return 0;if(k>f)return n.state.doc.length;for(let I=n.viewState.heightOracle.textHeight/2,L=!1;u=n.elementAtHeight(k),u.type!=BlockType.Text;)for(;k=a>0?u.bottom+I:u.top-I,!(k>=0&&k<=f);){if(L)return o?null:0;L=!0,a=-a}b=d+k;let x=u.from;if(x<n.viewport.from)return n.viewport.from==0?0:o?null:posAtCoordsImprecise(n,c,u,v,b);if(x>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:o?null:posAtCoordsImprecise(n,c,u,v,b);let _=n.dom.ownerDocument,E=n.root.elementFromPoint?n.root:_,B=E.elementFromPoint(v,b);B&&!n.contentDOM.contains(B)&&(B=null),B||(v=Math.max(c.left+1,Math.min(c.right-1,v)),B=E.elementFromPoint(v,b),B&&!n.contentDOM.contains(B)&&(B=null));let M,V=-1;if(B&&((s=n.docView.nearest(B))===null||s===void 0?void 0:s.isEditable)!=!1){if(_.caretPositionFromPoint){let I=_.caretPositionFromPoint(v,b);I&&({offsetNode:M,offset:V}=I)}else if(_.caretRangeFromPoint){let I=_.caretRangeFromPoint(v,b);I&&({startContainer:M,startOffset:V}=I,(!n.contentDOM.contains(M)||browser.safari&&isSuspiciousSafariCaretResult(M,V,v)||browser.chrome&&isSuspiciousChromeCaretResult(M,V,v))&&(M=void 0))}M&&(V=Math.min(maxOffset(M),V))}if(!M||!n.docView.dom.contains(M)){let I=LineView.find(n.docView,x);if(!I)return k>u.top+u.height/2?u.to:u.from;({node:M,offset:V}=domPosAtCoords(I.dom,v,b))}let F=n.docView.nearest(M);if(!F)return null;if(F.isWidget&&((l=F.dom)===null||l===void 0?void 0:l.nodeType)==1){let I=F.dom.getBoundingClientRect();return e.y<I.top||e.y<=I.bottom&&e.x<=(I.left+I.right)/2?F.posAtStart:F.posAtEnd}else return F.localPosFromDOM(M,V)+F.posAtStart}function posAtCoordsImprecise(n,e,o,a,s){let l=Math.round((a-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&o.height>n.defaultLineHeight*1.5){let d=n.viewState.heightOracle.textHeight,u=Math.floor((s-o.top-(n.defaultLineHeight-d)*.5)/d);l+=u*n.viewState.heightOracle.lineLength}let c=n.state.sliceDoc(o.from,o.to);return o.from+findColumn(c,l,n.state.tabSize)}function isSuspiciousSafariCaretResult(n,e,o){let a;if(n.nodeType!=3||e!=(a=n.nodeValue.length))return!1;for(let s=n.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return textRange(n,a-1,a).getBoundingClientRect().left>o}function isSuspiciousChromeCaretResult(n,e,o){if(e!=0)return!1;for(let s=n;;){let l=s.parentNode;if(!l||l.nodeType!=1||l.firstChild!=s)return!1;if(l.classList.contains("cm-line"))break;s=l}let a=n.nodeType==1?n.getBoundingClientRect():textRange(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return o-a.left>5}function blockAt(n,e){let o=n.lineBlockAt(e);if(Array.isArray(o.type)){for(let a of o.type)if(a.to>e||a.to==e&&(a.to==o.to||a.type==BlockType.Text))return a}return o}function moveToLineBoundary(n,e,o,a){let s=blockAt(n,e.head),l=!a||s.type!=BlockType.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(l){let c=n.dom.getBoundingClientRect(),d=n.textDirectionAt(s.from),u=n.posAtCoords({x:o==(d==Direction.LTR)?c.right-1:c.left+1,y:(l.top+l.bottom)/2});if(u!=null)return EditorSelection.cursor(u,o?-1:1)}return EditorSelection.cursor(o?s.to:s.from,o?-1:1)}function moveByChar(n,e,o,a){let s=n.state.doc.lineAt(e.head),l=n.bidiSpans(s),c=n.textDirectionAt(s.from);for(let d=e,u=null;;){let f=moveVisually(s,l,c,d,o),v=movedOver;if(!f){if(s.number==(o?n.state.doc.lines:1))return d;v=`
`,s=n.state.doc.line(s.number+(o?1:-1)),l=n.bidiSpans(s),f=n.visualLineSide(s,!o)}if(u){if(!u(v))return d}else{if(!a)return f;u=a(v)}d=f}}function byGroup(n,e,o){let a=n.state.charCategorizer(e),s=a(o);return l=>{let c=a(l);return s==CharCategory.Space&&(s=c),s==c}}function moveVertically(n,e,o,a){let s=e.head,l=o?1:-1;if(s==(o?n.state.doc.length:0))return EditorSelection.cursor(s,e.assoc);let c=e.goalColumn,d,u=n.contentDOM.getBoundingClientRect(),f=n.coordsAtPos(s,e.assoc||-1),v=n.documentTop;if(f)c==null&&(c=f.left-u.left),d=l<0?f.top:f.bottom;else{let x=n.viewState.lineBlockAt(s);c==null&&(c=Math.min(u.right-u.left,n.defaultCharacterWidth*(s-x.from))),d=(l<0?x.top:x.bottom)+v}let b=u.left+c,k=a??n.viewState.heightOracle.textHeight>>1;for(let x=0;;x+=10){let _=d+(k+x)*l,E=posAtCoords(n,{x:b,y:_},!1,l);if(_<u.top||_>u.bottom||(l<0?E<s:E>s)){let B=n.docView.coordsForChar(E),M=!B||_<B.top?-1:1;return EditorSelection.cursor(E,M,void 0,c)}}}function skipAtomicRanges(n,e,o){for(;;){let a=0;for(let s of n)s.between(e-1,e+1,(l,c,d)=>{if(e>l&&e<c){let u=a||o||(e-l<c-e?-1:1);e=u<0?l:c,a=u}});if(!a)return e}}function skipAtoms(n,e,o){let a=skipAtomicRanges(n.state.facet(atomicRanges).map(s=>s(n)),o.from,e.head>o.from?-1:1);return a==o.from?o:EditorSelection.cursor(a,a<o.from?1:-1)}const LineBreakPlaceholder="\uFFFF";class DOMReader{constructor(e,o){this.points=e,this.text="",this.lineSeparator=o.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,o){if(!e)return this;let a=e.parentNode;for(let s=e;;){this.findPointBefore(a,s);let l=this.text.length;this.readNode(s);let c=s.nextSibling;if(c==o)break;let d=ContentView.get(s),u=ContentView.get(c);(d&&u?d.breakAfter:(d?d.breakAfter:isBlockElement(s))||isBlockElement(c)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>l)&&this.lineBreak(),s=c}return this.findPointBefore(a,o),this}readTextNode(e){let o=e.nodeValue;for(let a of this.points)a.node==e&&(a.pos=this.text.length+Math.min(a.offset,o.length));for(let a=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,c=1,d;if(this.lineSeparator?(l=o.indexOf(this.lineSeparator,a),c=this.lineSeparator.length):(d=s.exec(o))&&(l=d.index,c=d[0].length),this.append(o.slice(a,l<0?o.length:l)),l<0)break;if(this.lineBreak(),c>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=c-1);a=l+c}}readNode(e){if(e.cmIgnore)return;let o=ContentView.get(e),a=o&&o.overrideDOMText;if(a!=null){this.findPointInside(e,a.length);for(let s=a.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,o){for(let a of this.points)a.node==e&&e.childNodes[a.offset]==o&&(a.pos=this.text.length)}findPointInside(e,o){for(let a of this.points)(e.nodeType==3?a.node==e:e.contains(a.node))&&(a.pos=this.text.length+(isAtEnd(e,a.node,a.offset)?o:0))}}function isAtEnd(n,e,o){for(;;){if(!e||o<maxOffset(e))return!1;if(e==n)return!0;o=domIndex(e)+1,e=e.parentNode}}class DOMPoint{constructor(e,o){this.node=e,this.offset=o,this.pos=-1}}class DOMChange{constructor(e,o,a,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=o>-1;let{impreciseHead:l,impreciseAnchor:c}=e.docView;if(e.state.readOnly&&o>-1)this.newSel=null;else if(o>-1&&(this.bounds=e.docView.domBoundsAround(o,a,0))){let d=l||c?[]:selectionPoints(e),u=new DOMReader(d,e.state);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=selectionFromPoints(d,this.bounds.from)}else{let d=e.observer.selectionRange,u=l&&l.node==d.focusNode&&l.offset==d.focusOffset||!contains$1(e.contentDOM,d.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(d.focusNode,d.focusOffset),f=c&&c.node==d.anchorNode&&c.offset==d.anchorOffset||!contains$1(e.contentDOM,d.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(d.anchorNode,d.anchorOffset),v=e.viewport;if((browser.ios||browser.chrome)&&e.state.selection.main.empty&&u!=f&&(v.from>0||v.to<e.state.doc.length)){let b=Math.min(u,f),k=Math.max(u,f),x=v.from-b,_=v.to-k;(x==0||x==1||b==0)&&(_==0||_==-1||k==e.state.doc.length)&&(u=0,f=e.state.doc.length)}this.newSel=EditorSelection.single(f,u)}}}function applyDOMChange(n,e){let o,{newSel:a}=e,s=n.state.selection.main,l=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:c,to:d}=e.bounds,u=s.from,f=null;(l===8||browser.android&&e.text.length<d-c)&&(u=s.to,f="end");let v=findDiff(n.state.doc.sliceString(c,d,LineBreakPlaceholder),e.text,u-c,f);v&&(browser.chrome&&l==13&&v.toB==v.from+2&&e.text.slice(v.from,v.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&v.toB--,o={from:c+v.from,to:c+v.toA,insert:Text.of(e.text.slice(v.from,v.toB).split(LineBreakPlaceholder))})}else a&&(!n.hasFocus&&n.state.facet(editable)||a.main.eq(s))&&(a=null);if(!o&&!a)return!1;if(!o&&e.typeOver&&!s.empty&&a&&a.main.empty?o={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:(browser.mac||browser.android)&&o&&o.from==o.to&&o.from==s.head-1&&/^\. ?$/.test(o.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(a&&o.insert.length==2&&(a=EditorSelection.single(a.main.anchor-1,a.main.head-1)),o={from:o.from,to:o.to,insert:Text.of([o.insert.toString().replace("."," ")])}):o&&o.from>=s.from&&o.to<=s.to&&(o.from!=s.from||o.to!=s.to)&&s.to-s.from-(o.to-o.from)<=4?o={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,o.from).append(o.insert).append(n.state.doc.slice(o.to,s.to))}:browser.chrome&&o&&o.from==o.to&&o.from==s.head&&o.insert.toString()==`
 `&&n.lineWrapping&&(a&&(a=EditorSelection.single(a.main.anchor-1,a.main.head-1)),o={from:s.from,to:s.to,insert:Text.of([" "])}),o)return applyDOMChangeInner(n,o,a,l);if(a&&!a.main.eq(s)){let c=!1,d="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(c=!0),d=n.inputState.lastSelectionOrigin),n.dispatch({selection:a,scrollIntoView:c,userEvent:d}),!0}else return!1}function applyDOMChangeInner(n,e,o,a=-1){if(browser.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(browser.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&dispatchKey(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||a==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&dispatchKey(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&dispatchKey(n.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let c,d=()=>c||(c=applyDefaultInsert(n,e,o));return n.state.facet(inputHandler$1).some(u=>u(n,e.from,e.to,l,d))||n.dispatch(d()),!0}function applyDefaultInsert(n,e,o){let a,s=n.state,l=s.selection.main;if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!o||o.main.empty&&o.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let d=l.from<e.from?s.sliceDoc(l.from,e.from):"",u=l.to>e.to?s.sliceDoc(e.to,l.to):"";a=s.replaceSelection(n.state.toText(d+e.insert.sliceString(0,void 0,n.state.lineBreak)+u))}else{let d=s.changes(e),u=o&&o.main.to<=d.newLength?o.main:void 0;if(s.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=l.to&&e.to>=l.to-10){let f=n.state.sliceDoc(e.from,e.to),v,b=o&&findCompositionNode(n,o.main.head);if(b){let _=e.insert.length-(e.to-e.from);v={from:b.from,to:b.to-_}}else v=n.state.doc.lineAt(l.head);let k=l.to-e.to,x=l.to-l.from;a=s.changeByRange(_=>{if(_.from==l.from&&_.to==l.to)return{changes:d,range:u||_.map(d)};let E=_.to-k,B=E-f.length;if(_.to-_.from!=x||n.state.sliceDoc(B,E)!=f||_.to>=v.from&&_.from<=v.to)return{range:_};let M=s.changes({from:B,to:E,insert:e.insert}),V=_.to-l.to;return{changes:M,range:u?EditorSelection.range(Math.max(0,u.anchor+V),Math.max(0,u.head+V)):_.map(M)}})}else a={changes:d,selection:u&&s.selection.replaceRange(u)}}let c="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),s.update(a,{userEvent:c,scrollIntoView:!0})}function findDiff(n,e,o,a){let s=Math.min(n.length,e.length),l=0;for(;l<s&&n.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==s&&n.length==e.length)return null;let c=n.length,d=e.length;for(;c>0&&d>0&&n.charCodeAt(c-1)==e.charCodeAt(d-1);)c--,d--;if(a=="end"){let u=Math.max(0,l-Math.min(c,d));o-=c+u-l}if(c<l&&n.length<e.length){let u=o<=l&&o>=c?l-o:0;l-=u,d=l+(d-c),c=l}else if(d<l){let u=o<=l&&o>=d?l-o:0;l-=u,c=l+(c-d),d=l}return{from:l,toA:c,toB:d}}function selectionPoints(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:o,anchorOffset:a,focusNode:s,focusOffset:l}=n.observer.selectionRange;return o&&(e.push(new DOMPoint(o,a)),(s!=o||l!=a)&&e.push(new DOMPoint(s,l))),e}function selectionFromPoints(n,e){if(n.length==0)return null;let o=n[0].pos,a=n.length==2?n[1].pos:o;return o>-1&&a>-1?EditorSelection.single(o+e,a+e):null}class InputState{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(e.contentDOM.ownerDocument)}handleEvent(e){!eventBelongsToEditor(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,o){let a=this.handlers[e];if(a){for(let s of a.observers)s(this.view,o);for(let s of a.handlers){if(o.defaultPrevented)break;if(s(this.view,o)){o.preventDefault();break}}}}ensureHandlers(e){let o=computeHandlers(e),a=this.handlers,s=this.view.contentDOM;for(let l in o)if(l!="scroll"){let c=!o[l].handlers.length,d=a[l];d&&c!=!d.handlers.length&&(s.removeEventListener(l,this.handleEvent),d=null),d||s.addEventListener(l,this.handleEvent,{passive:c})}for(let l in a)l!="scroll"&&!o[l]&&s.removeEventListener(l,this.handleEvent);this.handlers=o}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&modifierCodes.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let o;return browser.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((o=PendingKeys.find(a=>a.keyCode==e.keyCode))&&!e.ctrlKey||EmacsyPendingKeys.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=o||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let o=this.pendingIOSKey;return!o||o.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,o.key,o.keyCode,o instanceof KeyboardEvent?o:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(n,e){return(o,a)=>{try{return e.call(n,a,o)}catch(s){logException(o.state,s)}}}function computeHandlers(n){let e=Object.create(null);function o(a){return e[a]||(e[a]={observers:[],handlers:[]})}for(let a of n){let s=a.spec;if(s&&s.domEventHandlers)for(let l in s.domEventHandlers){let c=s.domEventHandlers[l];c&&o(l).handlers.push(bindHandler(a.value,c))}if(s&&s.domEventObservers)for(let l in s.domEventObservers){let c=s.domEventObservers[l];c&&o(l).observers.push(bindHandler(a.value,c))}}for(let a in handlers)o(a).handlers.push(handlers[a]);for(let a in observers)o(a).observers.push(observers[a]);return e}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(n){return Math.max(0,n)*.7+8}function dist(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class MouseSelection{constructor(e,o,a,s){this.view=e,this.startEvent=o,this.style=a,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=o,this.scrollParents=scrollableParents(e.contentDOM),this.atoms=e.state.facet(atomicRanges).map(c=>c(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=o.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,o),this.dragging=isInPrimarySelection(e,o)&&getClickType(o)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let o=0,a=0,s=0,l=0,c=this.view.win.innerWidth,d=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:c}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:d}=this.scrollParents.y.getBoundingClientRect());let u=getScrollMargins(this.view);e.clientX-u.left<=s+dragScrollMargin?o=-dragScrollSpeed(s-e.clientX):e.clientX+u.right>=c-dragScrollMargin&&(o=dragScrollSpeed(e.clientX-c)),e.clientY-u.top<=l+dragScrollMargin?a=-dragScrollSpeed(l-e.clientY):e.clientY+u.bottom>=d-dragScrollMargin&&(a=dragScrollSpeed(e.clientY-d)),this.setScrollSpeed(o,a)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,o){this.scrollSpeed={x:e,y:o},e||o?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:o}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),o&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=o,o=0),(e||o)&&this.view.win.scrollBy(e,o),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let o=null;for(let a=0;a<e.ranges.length;a++){let s=e.ranges[a],l=null;if(s.empty){let c=skipAtomicRanges(this.atoms,s.from,0);c!=s.from&&(l=EditorSelection.cursor(c,-1))}else{let c=skipAtomicRanges(this.atoms,s.from,-1),d=skipAtomicRanges(this.atoms,s.to,1);(c!=s.from||d!=s.to)&&(l=EditorSelection.range(s.from==s.anchor?c:d,s.from==s.head?c:d))}l&&(o||(o=e.ranges.slice()),o[a]=l)}return o?EditorSelection.create(o,e.mainIndex):e}select(e){let{view:o}=this,a=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!a.eq(o.state.selection,this.dragging===!1))&&this.view.dispatch({selection:a,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(o=>o.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(n,e){let o=n.state.facet(clickAddsSelectionRange);return o.length?o[0](e):browser.mac?e.metaKey:e.ctrlKey}function dragMovesSelection(n,e){let o=n.state.facet(dragMovesSelection$1);return o.length?o[0](e):browser.mac?!e.altKey:!e.ctrlKey}function isInPrimarySelection(n,e){let{main:o}=n.state.selection;if(o.empty)return!1;let a=getSelection$1(n.root);if(!a||a.rangeCount==0)return!0;let s=a.getRangeAt(0).getClientRects();for(let l=0;l<s.length;l++){let c=s[l];if(c.left<=e.clientX&&c.right>=e.clientX&&c.top<=e.clientY&&c.bottom>=e.clientY)return!0}return!1}function eventBelongsToEditor(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let o=e.target,a;o!=n.contentDOM;o=o.parentNode)if(!o||o.nodeType==11||(a=ContentView.get(o))&&a.ignoreEvent(e))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(n){let e=n.dom.parentNode;if(!e)return;let o=e.appendChild(document.createElement("textarea"));o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout(()=>{n.focus(),o.remove(),doPaste(n,o.value)},50)}function textFilter(n,e,o){for(let a of n.facet(e))o=a(o,n);return o}function doPaste(n,e){e=textFilter(n.state,clipboardInputFilter,e);let{state:o}=n,a,s=1,l=o.toText(e),c=l.lines==o.selection.ranges.length;if(lastLinewiseCopy!=null&&o.selection.ranges.every(d=>d.empty)&&lastLinewiseCopy==l.toString()){let d=-1;a=o.changeByRange(u=>{let f=o.doc.lineAt(u.from);if(f.from==d)return{range:u};d=f.from;let v=o.toText((c?l.line(s++).text:e)+o.lineBreak);return{changes:{from:f.from,insert:v},range:EditorSelection.cursor(u.from+v.length)}})}else c?a=o.changeByRange(d=>{let u=l.line(s++);return{changes:{from:d.from,to:d.to,insert:u.text},range:EditorSelection.cursor(d.from+u.length)}}):a=o.replaceSelection(l);n.dispatch(a,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft},handlers.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1),observers.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")},observers.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")},handlers.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let o=null;for(let a of n.state.facet(mouseSelectionStyle))if(o=a(n,e),o)break;if(!o&&e.button==0&&(o=basicMouseSelection(n,e)),o){let a=!n.hasFocus;n.inputState.startMouseSelection(new MouseSelection(n,e,o,a)),a&&n.observer.ignore(()=>{focusPreventScroll(n.contentDOM);let l=n.root.activeElement;l&&!l.contains(n.contentDOM)&&l.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function rangeForClick(n,e,o,a){if(a==1)return EditorSelection.cursor(e,o);if(a==2)return groupAt(n.state,e,o);{let s=LineView.find(n.docView,e),l=n.state.doc.lineAt(s?s.posAtEnd:e),c=s?s.posAtStart:l.from,d=s?s.posAtEnd:l.to;return d<n.state.doc.length&&d==l.to&&d++,EditorSelection.range(c,d)}}let inside=(n,e,o)=>e>=o.top&&e<=o.bottom&&n>=o.left&&n<=o.right;function findPositionSide(n,e,o,a){let s=LineView.find(n.docView,e);if(!s)return 1;let l=e-s.posAtStart;if(l==0)return 1;if(l==s.length)return-1;let c=s.coordsAt(l,-1);if(c&&inside(o,a,c))return-1;let d=s.coordsAt(l,1);return d&&inside(o,a,d)?1:c&&c.bottom>=a?-1:1}function queryPos(n,e){let o=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:o,bias:findPositionSide(n,o,e.clientX,e.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(n){if(!BadMouseDetail)return n.detail;let e=lastMouseDown,o=lastMouseDownTime;return lastMouseDown=n,lastMouseDownTime=Date.now(),lastMouseDownCount=!e||o>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(n,e){let o=queryPos(n,e),a=getClickType(e),s=n.state.selection;return{update(l){l.docChanged&&(o.pos=l.changes.mapPos(o.pos),s=s.map(l.changes))},get(l,c,d){let u=queryPos(n,l),f,v=rangeForClick(n,u.pos,u.bias,a);if(o.pos!=u.pos&&!c){let b=rangeForClick(n,o.pos,o.bias,a),k=Math.min(b.from,v.from),x=Math.max(b.to,v.to);v=k<v.from?EditorSelection.range(k,x):EditorSelection.range(x,k)}return c?s.replaceRange(s.main.extend(v.from,v.to)):d&&a==1&&s.ranges.length>1&&(f=removeRangeAround(s,u.pos))?f:d?s.addRange(v):EditorSelection.create([v])}}}function removeRangeAround(n,e){for(let o=0;o<n.ranges.length;o++){let{from:a,to:s}=n.ranges[o];if(a<=e&&s>=e)return EditorSelection.create(n.ranges.slice(0,o).concat(n.ranges.slice(o+1)),n.mainIndex==o?0:n.mainIndex-(n.mainIndex>o?1:0))}return null}handlers.dragstart=(n,e)=>{let{selection:{main:o}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let l=s.posAtStart,c=l+s.length;(l>=o.to||c<=o.from)&&(o=EditorSelection.range(l,c))}}let{inputState:a}=n;return a.mouseSelection&&(a.mouseSelection.dragging=!0),a.draggedContent=o,e.dataTransfer&&(e.dataTransfer.setData("Text",textFilter(n.state,clipboardOutputFilter,n.state.sliceDoc(o.from,o.to))),e.dataTransfer.effectAllowed="copyMove"),!1},handlers.dragend=n=>(n.inputState.draggedContent=null,!1);function dropText(n,e,o,a){if(o=textFilter(n.state,clipboardInputFilter,o),!o)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=n.inputState,c=a&&l&&dragMovesSelection(n,e)?{from:l.from,to:l.to}:null,d={from:s,insert:o},u=n.state.changes(c?[c,d]:d);n.focus(),n.dispatch({changes:u,selection:{anchor:u.mapPos(s,-1),head:u.mapPos(s,1)},userEvent:c?"move.drop":"input.drop"}),n.inputState.draggedContent=null}handlers.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let o=e.dataTransfer.files;if(o&&o.length){let a=Array(o.length),s=0,l=()=>{++s==o.length&&dropText(n,e,a.filter(c=>c!=null).join(n.state.lineBreak),!1)};for(let c=0;c<o.length;c++){let d=new FileReader;d.onerror=l,d.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(d.result)||(a[c]=d.result),l()},d.readAsText(o[c])}return!0}else{let a=e.dataTransfer.getData("Text");if(a)return dropText(n,e,a,!0),!0}return!1},handlers.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let o=brokenClipboardAPI?null:e.clipboardData;return o?(doPaste(n,o.getData("text/plain")||o.getData("text/uri-list")),!0):(capturePaste(n),!1)};function captureCopy(n,e){let o=n.dom.parentNode;if(!o)return;let a=o.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.value=e,a.focus(),a.selectionEnd=e.length,a.selectionStart=0,setTimeout(()=>{a.remove(),n.focus()},50)}function copiedRange(n){let e=[],o=[],a=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),o.push(s));if(!e.length){let s=-1;for(let{from:l}of n.selection.ranges){let c=n.doc.lineAt(l);c.number>s&&(e.push(c.text),o.push({from:c.from,to:Math.min(n.doc.length,c.to+1)})),s=c.number}a=!0}return{text:textFilter(n,clipboardOutputFilter,e.join(n.lineBreak)),ranges:o,linewise:a}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(n,e)=>{let{text:o,ranges:a,linewise:s}=copiedRange(n.state);if(!o&&!s)return!1;lastLinewiseCopy=s?o:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:a,scrollIntoView:!0,userEvent:"delete.cut"});let l=brokenClipboardAPI?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",o),!0):(captureCopy(n,o),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(n,e){let o=[];for(let a of n.facet(focusChangeEffect)){let s=a(n,e);s&&o.push(s)}return o?n.update({effects:o,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let o=focusChangeTransaction(n.state,e);o?n.dispatch(o):n.update([])}},10)}observers.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),updateForFocusChange(n)},observers.blur=n=>{n.observer.clearSelectionRange(),updateForFocusChange(n)},observers.compositionstart=observers.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))},observers.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,browser.chrome&&browser.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))},observers.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()},handlers.beforeinput=(n,e)=>{var o,a;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let l=(o=e.dataTransfer)===null||o===void 0?void 0:o.getData("text/plain"),c=e.getTargetRanges();if(l&&c.length){let d=c[0],u=n.posAtDOM(d.startContainer,d.startOffset),f=n.posAtDOM(d.endContainer,d.endOffset);return applyDOMChangeInner(n,{from:u,to:f,insert:n.state.toText(l)},null),!0}}let s;if(browser.chrome&&browser.android&&(s=PendingKeys.find(l=>l.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let l=((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0;setTimeout(()=>{var c;(((c=window.visualViewport)===null||c===void 0?void 0:c.height)||0)>l+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return browser.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),browser.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>observers.compositionend(n,e),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(n){appliedFirefoxHack.has(n)||(appliedFirefoxHack.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,o){let a=this.doc.lineAt(o).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(a+=Math.max(0,Math.ceil((o-e-a*this.lineLength*.5)/this.lineLength))),this.lineHeight*a}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let o=!1;for(let a=0;a<e.length;a++){let s=e[a];s<0?a++:this.heightSamples[Math.floor(s*10)]||(o=!0,this.heightSamples[Math.floor(s*10)]=!0)}return o}refresh(e,o,a,s,l,c){let d=wrappingWhiteSpace.indexOf(e)>-1,u=Math.round(o)!=Math.round(this.lineHeight)||this.lineWrapping!=d;if(this.lineWrapping=d,this.lineHeight=o,this.charWidth=a,this.textHeight=s,this.lineLength=l,u){this.heightSamples={};for(let f=0;f<c.length;f++){let v=c[f];v<0?f++:this.heightSamples[Math.floor(v*10)]=!0}}return u}}class MeasuredHeights{constructor(e,o){this.from=e,this.heights=o,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,o,a,s,l){this.from=e,this.length=o,this.top=a,this.height=s,this._content=l}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let o=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,o)}}var QueryType=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(QueryType||(QueryType={}));const Epsilon=.001;class HeightMap{constructor(e,o,a=2){this.length=e,this.height=o,this.flags=a}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Epsilon&&(heightChangeFlag=!0),this.height=e)}replace(e,o,a){return HeightMap.of(a)}decomposeLeft(e,o){o.push(this)}decomposeRight(e,o){o.push(this)}applyChanges(e,o,a,s){let l=this,c=a.doc;for(let d=s.length-1;d>=0;d--){let{fromA:u,toA:f,fromB:v,toB:b}=s[d],k=l.lineAt(u,QueryType.ByPosNoHeight,a.setDoc(o),0,0),x=k.to>=f?k:l.lineAt(f,QueryType.ByPosNoHeight,a,0,0);for(b+=x.to-f,f=x.to;d>0&&k.from<=s[d-1].toA;)u=s[d-1].fromA,v=s[d-1].fromB,d--,u<k.from&&(k=l.lineAt(u,QueryType.ByPosNoHeight,a,0,0));v+=k.from-u,u=k.from;let _=NodeBuilder.build(a.setDoc(c),e,v,b);l=replace$1(l,l.replace(u,f,_))}return l.updateHeight(a,0)}static empty(){return new HeightMapText(0,0)}static of(e){if(e.length==1)return e[0];let o=0,a=e.length,s=0,l=0;for(;;)if(o==a)if(s>l*2){let d=e[o-1];d.break?e.splice(--o,1,d.left,null,d.right):e.splice(--o,1,d.left,d.right),a+=1+d.break,s-=d.size}else if(l>s*2){let d=e[a];d.break?e.splice(a,1,d.left,null,d.right):e.splice(a,1,d.left,d.right),a+=2+d.break,l-=d.size}else break;else if(s<l){let d=e[o++];d&&(s+=d.size)}else{let d=e[--a];d&&(l+=d.size)}let c=0;return e[o-1]==null?(c=1,o--):e[o]==null&&(c=1,a++),new HeightMapBranch(HeightMap.of(e.slice(0,o)),c,HeightMap.of(e.slice(a)))}}function replace$1(n,e){return n==e?n:(n.constructor!=e.constructor&&(heightChangeFlag=!0),e)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(e,o,a){super(e,o),this.deco=a}blockAt(e,o,a,s){return new BlockInfo(s,this.length,a,this.height,this.deco||0)}lineAt(e,o,a,s,l){return this.blockAt(0,a,s,l)}forEachLine(e,o,a,s,l,c){e<=l+this.length&&o>=l&&c(this.blockAt(0,a,s,l))}updateHeight(e,o=0,a=!1,s){return s&&s.from<=o&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,o){super(e,o,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,o,a,s){return new BlockInfo(s,this.length,a,this.height,this.breaks)}replace(e,o,a){let s=a[0];return a.length==1&&(s instanceof HeightMapText||s instanceof HeightMapGap&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof HeightMapGap?s=new HeightMapText(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):HeightMap.of(a)}updateHeight(e,o=0,a=!1,s){return s&&s.from<=o&&s.more?this.setHeight(s.heights[s.index++]):(a||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,o){let a=e.doc.lineAt(o).number,s=e.doc.lineAt(o+this.length).number,l=s-a+1,c,d=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*l);c=u/l,this.length>l+1&&(d=(this.height-u)/(this.length-l-1))}else c=this.height/l;return{firstLine:a,lastLine:s,perLine:c,perChar:d}}blockAt(e,o,a,s){let{firstLine:l,lastLine:c,perLine:d,perChar:u}=this.heightMetrics(o,s);if(o.lineWrapping){let f=s+(e<o.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-a)/this.height))*this.length)),v=o.doc.lineAt(f),b=d+v.length*u,k=Math.max(a,e-b/2);return new BlockInfo(v.from,v.length,k,b,0)}else{let f=Math.max(0,Math.min(c-l,Math.floor((e-a)/d))),{from:v,length:b}=o.doc.line(l+f);return new BlockInfo(v,b,a+d*f,d,0)}}lineAt(e,o,a,s,l){if(o==QueryType.ByHeight)return this.blockAt(e,a,s,l);if(o==QueryType.ByPosNoHeight){let{from:x,to:_}=a.doc.lineAt(e);return new BlockInfo(x,_-x,0,0,0)}let{firstLine:c,perLine:d,perChar:u}=this.heightMetrics(a,l),f=a.doc.lineAt(e),v=d+f.length*u,b=f.number-c,k=s+d*b+u*(f.from-l-b);return new BlockInfo(f.from,f.length,Math.max(s,Math.min(k,s+this.height-v)),v,0)}forEachLine(e,o,a,s,l,c){e=Math.max(e,l),o=Math.min(o,l+this.length);let{firstLine:d,perLine:u,perChar:f}=this.heightMetrics(a,l);for(let v=e,b=s;v<=o;){let k=a.doc.lineAt(v);if(v==e){let _=k.number-d;b+=u*_+f*(e-l-_)}let x=u+f*k.length;c(new BlockInfo(k.from,k.length,b,x,0)),b+=x,v=k.to+1}}replace(e,o,a){let s=this.length-o;if(s>0){let l=a[a.length-1];l instanceof HeightMapGap?a[a.length-1]=new HeightMapGap(l.length+s):a.push(null,new HeightMapGap(s-1))}if(e>0){let l=a[0];l instanceof HeightMapGap?a[0]=new HeightMapGap(e+l.length):a.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(a)}decomposeLeft(e,o){o.push(new HeightMapGap(e-1),null)}decomposeRight(e,o){o.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,o=0,a=!1,s){let l=o+this.length;if(s&&s.from<=o+this.length&&s.more){let c=[],d=Math.max(o,s.from),u=-1;for(s.from>o&&c.push(new HeightMapGap(s.from-o-1).updateHeight(e,o));d<=l&&s.more;){let v=e.doc.lineAt(d).length;c.length&&c.push(null);let b=s.heights[s.index++];u==-1?u=b:Math.abs(b-u)>=Epsilon&&(u=-2);let k=new HeightMapText(v,b);k.outdated=!1,c.push(k),d+=v+1}d<=l&&c.push(null,new HeightMapGap(l-d).updateHeight(e,d));let f=HeightMap.of(c);return(u<0||Math.abs(f.height-this.height)>=Epsilon||Math.abs(u-this.heightMetrics(e,o).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace$1(this,f)}else(a||this.outdated)&&(this.setHeight(e.heightForGap(o,o+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,o,a){super(e.length+o+a.length,e.height+a.height,o|(e.outdated||a.outdated?2:0)),this.left=e,this.right=a,this.size=e.size+a.size}get break(){return this.flags&1}blockAt(e,o,a,s){let l=a+this.left.height;return e<l?this.left.blockAt(e,o,a,s):this.right.blockAt(e,o,l,s+this.left.length+this.break)}lineAt(e,o,a,s,l){let c=s+this.left.height,d=l+this.left.length+this.break,u=o==QueryType.ByHeight?e<c:e<d,f=u?this.left.lineAt(e,o,a,s,l):this.right.lineAt(e,o,a,c,d);if(this.break||(u?f.to<d:f.from>d))return f;let v=o==QueryType.ByPosNoHeight?QueryType.ByPosNoHeight:QueryType.ByPos;return u?f.join(this.right.lineAt(d,v,a,c,d)):this.left.lineAt(d,v,a,s,l).join(f)}forEachLine(e,o,a,s,l,c){let d=s+this.left.height,u=l+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,o,a,s,l,c),o>=u&&this.right.forEachLine(e,o,a,d,u,c);else{let f=this.lineAt(u,QueryType.ByPos,a,s,l);e<f.from&&this.left.forEachLine(e,f.from-1,a,s,l,c),f.to>=e&&f.from<=o&&c(f),o>f.to&&this.right.forEachLine(f.to+1,o,a,d,u,c)}}replace(e,o,a){let s=this.left.length+this.break;if(o<s)return this.balanced(this.left.replace(e,o,a),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,o-s,a));let l=[];e>0&&this.decomposeLeft(e,l);let c=l.length;for(let d of a)l.push(d);if(e>0&&mergeGaps(l,c-1),o<this.length){let d=l.length;this.decomposeRight(o,l),mergeGaps(l,d)}return HeightMap.of(l)}decomposeLeft(e,o){let a=this.left.length;if(e<=a)return this.left.decomposeLeft(e,o);o.push(this.left),this.break&&(a++,e>=a&&o.push(null)),e>a&&this.right.decomposeLeft(e-a,o)}decomposeRight(e,o){let a=this.left.length,s=a+this.break;if(e>=s)return this.right.decomposeRight(e-s,o);e<a&&this.left.decomposeRight(e,o),this.break&&e<s&&o.push(null),o.push(this.right)}balanced(e,o){return e.size>2*o.size||o.size>2*e.size?HeightMap.of(this.break?[e,null,o]:[e,o]):(this.left=replace$1(this.left,e),this.right=replace$1(this.right,o),this.setHeight(e.height+o.height),this.outdated=e.outdated||o.outdated,this.size=e.size+o.size,this.length=e.length+this.break+o.length,this)}updateHeight(e,o=0,a=!1,s){let{left:l,right:c}=this,d=o+l.length+this.break,u=null;return s&&s.from<=o+l.length&&s.more?u=l=l.updateHeight(e,o,a,s):l.updateHeight(e,o,a),s&&s.from<=d+c.length&&s.more?u=c=c.updateHeight(e,d,a,s):c.updateHeight(e,d,a),u?this.balanced(l,c):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(n,e){let o,a;n[e]==null&&(o=n[e-1])instanceof HeightMapGap&&(a=n[e+1])instanceof HeightMapGap&&n.splice(e-1,3,new HeightMapGap(o.length+1+a.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,o){this.pos=e,this.oracle=o,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,o){if(this.lineStart>-1){let a=Math.min(o,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof HeightMapText?s.length+=a-this.pos:(a>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(a-this.pos,-1)),this.writtenTo=a,o>a&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=o}point(e,o,a){if(e<o||a.heightRelevant){let s=a.widget?a.widget.estimatedHeight:0,l=a.widget?a.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let c=o-e;a.block?this.addBlock(new HeightMapBlock(c,s,a)):(c||l||s>=relevantWidgetHeight)&&this.addLineDeco(s,l,c)}else o>e&&this.span(e,o);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:o}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=o,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,o){let a=new HeightMapGap(o-e);return this.oracle.doc.lineAt(e).to==o&&(a.flags|=4),a}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let o=new HeightMapText(0,-1);return this.nodes.push(o),o}addBlock(e){this.enterLine();let o=e.deco;o&&o.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,o&&o.endSide>0&&(this.covering=e)}addLineDeco(e,o,a){let s=this.ensureLine();s.length+=a,s.collapsed+=a,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=o,this.writtenTo=this.pos=this.pos+a}finish(e){let o=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(o instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||o==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let a=e;for(let s of this.nodes)s instanceof HeightMapText&&s.updateHeight(this.oracle,a),a+=s?s.length:1;return this.nodes}static build(e,o,a,s){let l=new NodeBuilder(a,e);return RangeSet.spans(o,a,s,l,0),l.finish(a)}}function heightRelevantDecoChanges(n,e,o){let a=new DecorationComparator;return RangeSet.compare(n,e,o,a,0),a.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,o,a,s){(e<o||a&&a.heightRelevant||s&&s.heightRelevant)&&addRange(e,o,this.changes,5)}}function visiblePixelRange(n,e){let o=n.getBoundingClientRect(),a=n.ownerDocument,s=a.defaultView||window,l=Math.max(0,o.left),c=Math.min(s.innerWidth,o.right),d=Math.max(0,o.top),u=Math.min(s.innerHeight,o.bottom);for(let f=n.parentNode;f&&f!=a.body;)if(f.nodeType==1){let v=f,b=window.getComputedStyle(v);if((v.scrollHeight>v.clientHeight||v.scrollWidth>v.clientWidth)&&b.overflow!="visible"){let k=v.getBoundingClientRect();l=Math.max(l,k.left),c=Math.min(c,k.right),d=Math.max(d,k.top),u=Math.min(f==n.parentNode?s.innerHeight:u,k.bottom)}f=b.position=="absolute"||b.position=="fixed"?v.offsetParent:v.parentNode}else if(f.nodeType==11)f=f.host;else break;return{left:l-o.left,right:Math.max(l,c)-o.left,top:d-(o.top+e),bottom:Math.max(d,u)-(o.top+e)}}function inWindow(n){let e=n.getBoundingClientRect(),o=n.ownerDocument.defaultView||window;return e.left<o.innerWidth&&e.right>0&&e.top<o.innerHeight&&e.bottom>0}function fullPixelRange(n,e){let o=n.getBoundingClientRect();return{left:0,right:o.right-o.left,top:e,bottom:o.bottom-(o.top+e)}}class LineGap{constructor(e,o,a,s){this.from=e,this.to=o,this.size=a,this.displaySize=s}static same(e,o){if(e.length!=o.length)return!1;for(let a=0;a<e.length;a++){let s=e[a],l=o[a];if(s.from!=l.from||s.to!=l.to||s.size!=l.size)return!1}return!0}draw(e,o){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(o?e.scaleY:e.scaleX),o)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,o){super(),this.size=e,this.vertical=o}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let o=e.facet(contentAttributes).some(a=>typeof a!="function"&&a.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(o),this.stateDeco=e.facet(decorations).filter(a=>typeof a!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]);for(let a=0;a<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());a++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(a=>a.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:o}=this.state.selection;for(let a=0;a<=1;a++){let s=a?o.head:o.anchor;if(!e.some(({from:l,to:c})=>s>=l&&s<=c)){let{from:l,to:c}=this.lineBlockAt(s);e.push(new Viewport(l,c))}}return this.viewports=e.sort((a,s)=>a.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(scaleBlock(e,this.scaler))})}update(e,o=null){this.state=e.state;let a=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(v=>typeof v!="function");let s=e.changedRanges,l=ChangedRange.extendWithRanges(s,heightRelevantDecoChanges(a,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),c=this.heightMap.height,d=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=c||heightChangeFlag)&&(e.flags|=2),d?(this.scrollAnchorPos=e.changes.mapPos(d.from,-1),this.scrollAnchorHeight=d.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let u=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(o&&(o.range.head<u.from||o.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,o));let f=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(f||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),o&&(this.scrollTarget=o),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let o=e.contentDOM,a=window.getComputedStyle(o),s=this.heightOracle,l=a.whiteSpace;this.defaultTextDirection=a.direction=="rtl"?Direction.RTL:Direction.LTR;let c=this.heightOracle.mustRefreshForWrapping(l),d=o.getBoundingClientRect(),u=c||this.mustMeasureContent||this.contentDOMHeight!=d.height;this.contentDOMHeight=d.height,this.mustMeasureContent=!1;let f=0,v=0;if(d.width&&d.height){let{scaleX:I,scaleY:L}=getScale(o,d);(I>.005&&Math.abs(this.scaleX-I)>.005||L>.005&&Math.abs(this.scaleY-L)>.005)&&(this.scaleX=I,this.scaleY=L,f|=16,c=u=!0)}let b=(parseInt(a.paddingTop)||0)*this.scaleY,k=(parseInt(a.paddingBottom)||0)*this.scaleY;(this.paddingTop!=b||this.paddingBottom!=k)&&(this.paddingTop=b,this.paddingBottom=k,f|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,f|=16);let x=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=x&&(this.scrollAnchorHeight=-1,this.scrollTop=x),this.scrolledToBottom=isScrolledToBottom(e.scrollDOM);let _=(this.printing?fullPixelRange:visiblePixelRange)(o,this.paddingTop),E=_.top-this.pixelViewport.top,B=_.bottom-this.pixelViewport.bottom;this.pixelViewport=_;let M=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(M!=this.inView&&(this.inView=M,M&&(u=!0)),!this.inView&&!this.scrollTarget&&!inWindow(e.dom))return 0;let V=d.width;if((this.contentDOMWidth!=V||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=d.width,this.editorHeight=e.scrollDOM.clientHeight,f|=16),u){let I=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(I)&&(c=!0),c||s.lineWrapping&&Math.abs(V-this.contentDOMWidth)>s.charWidth){let{lineHeight:L,charWidth:U,textHeight:Z}=e.docView.measureTextSize();c=L>0&&s.refresh(l,L,U,Z,V/U,I),c&&(e.docView.minWidth=0,f|=16)}E>0&&B>0?v=Math.max(E,B):E<0&&B<0&&(v=Math.min(E,B)),clearHeightChangeFlag();for(let L of this.viewports){let U=L.from==this.viewport.from?I:e.docView.measureVisibleLineHeights(L);this.heightMap=(c?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,c,new MeasuredHeights(L.from,U))}heightChangeFlag&&(f|=2)}let F=!this.viewportIsAppropriate(this.viewport,v)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return F&&(f&2&&(f|=this.updateScaler()),this.viewport=this.getViewport(v,this.scrollTarget),f|=this.updateForViewport()),(f&2||F)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps,e)),f|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),f}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,o){let a=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,l=this.heightOracle,{visibleTop:c,visibleBottom:d}=this,u=new Viewport(s.lineAt(c-a*1e3,QueryType.ByHeight,l,0,0).from,s.lineAt(d+(1-a)*1e3,QueryType.ByHeight,l,0,0).to);if(o){let{head:f}=o.range;if(f<u.from||f>u.to){let v=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),b=s.lineAt(f,QueryType.ByPos,l,0,0),k;o.y=="center"?k=(b.top+b.bottom)/2-v/2:o.y=="start"||o.y=="nearest"&&f<u.from?k=b.top:k=b.bottom-v,u=new Viewport(s.lineAt(k-500,QueryType.ByHeight,l,0,0).from,s.lineAt(k+v+500,QueryType.ByHeight,l,0,0).to)}}return u}mapViewport(e,o){let a=o.mapPos(e.from,-1),s=o.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(a,QueryType.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,QueryType.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:o},a=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,QueryType.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(o,QueryType.ByPos,this.heightOracle,0,0),{visibleTop:c,visibleBottom:d}=this;return(e==0||s<=c-Math.max(10,Math.min(-a,250)))&&(o==this.state.doc.length||l>=d+Math.max(10,Math.min(a,250)))&&s>c-2e3&&l<d+2e3}mapLineGaps(e,o){if(!e.length||o.empty)return e;let a=[];for(let s of e)o.touchesRange(s.from,s.to)||a.push(new LineGap(o.mapPos(s.from),o.mapPos(s.to),s.size,s.displaySize));return a}ensureLineGaps(e,o){let a=this.heightOracle.lineWrapping,s=a?1e4:2e3,l=s>>1,c=s<<1;if(this.defaultTextDirection!=Direction.LTR&&!a)return[];let d=[],u=(v,b,k,x)=>{if(b-v<l)return;let _=this.state.selection.main,E=[_.from];_.empty||E.push(_.to);for(let M of E)if(M>v&&M<b){u(v,M-10,k,x),u(M+10,b,k,x);return}let B=find(e,M=>M.from>=k.from&&M.to<=k.to&&Math.abs(M.from-v)<l&&Math.abs(M.to-b)<l&&!E.some(V=>M.from<V&&M.to>V));if(!B){if(b<k.to&&o&&a&&o.visibleRanges.some(F=>F.from<=b&&F.to>=b)){let F=o.moveToLineBoundary(EditorSelection.cursor(b),!1,!0).head;F>v&&(b=F)}let M=this.gapSize(k,v,b,x),V=a||M<2e6?M:2e6;B=new LineGap(v,b,M,V)}d.push(B)},f=v=>{if(v.length<c||v.type!=BlockType.Text)return;let b=lineStructure(v.from,v.to,this.stateDeco);if(b.total<c)return;let k=this.scrollTarget?this.scrollTarget.range.head:null,x,_;if(a){let E=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,B,M;if(k!=null){let V=findFraction(b,k),F=((this.visibleBottom-this.visibleTop)/2+E)/v.height;B=V-F,M=V+F}else B=(this.visibleTop-v.top-E)/v.height,M=(this.visibleBottom-v.top+E)/v.height;x=findPosition(b,B),_=findPosition(b,M)}else{let E=b.total*this.heightOracle.charWidth,B=s*this.heightOracle.charWidth,M=0;if(E>2e6)for(let U of e)U.from>=v.from&&U.from<v.to&&U.size!=U.displaySize&&U.from*this.heightOracle.charWidth+M<this.pixelViewport.left&&(M=U.size-U.displaySize);let V=this.pixelViewport.left+M,F=this.pixelViewport.right+M,I,L;if(k!=null){let U=findFraction(b,k),Z=((F-V)/2+B)/E;I=U-Z,L=U+Z}else I=(V-B)/E,L=(F+B)/E;x=findPosition(b,I),_=findPosition(b,L)}x>v.from&&u(v.from,x,v,b),_<v.to&&u(_,v.to,v,b)};for(let v of this.viewportLines)Array.isArray(v.type)?v.type.forEach(f):f(v);return d}gapSize(e,o,a,s){let l=findFraction(s,a)-findFraction(s,o);return this.heightOracle.lineWrapping?e.height*l:s.total*this.heightOracle.charWidth*l}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(o=>o.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let o=this.stateDeco;this.lineGaps.length&&(o=o.concat(this.lineGapDeco));let a=[];RangeSet.spans(o,this.viewport.from,this.viewport.to,{span(l,c){a.push({from:l,to:c})},point(){}},20);let s=0;if(a.length!=this.visibleRanges.length)s=12;else for(let l=0;l<a.length&&!(s&8);l++){let c=this.visibleRanges[l],d=a[l];(c.from!=d.from||c.to!=d.to)&&(s|=4,e&&e.mapPos(c.from,-1)==d.from&&e.mapPos(c.to,1)==d.to||(s|=8))}return this.visibleRanges=a,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(o=>o.from<=e&&o.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(o=>o.top<=e&&o.bottom>=e)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let o=this.lineBlockAtHeight(e+8);return o.from>=this.viewport.from||this.viewportLines[0].top-e>200?o:this.viewportLines[0]}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,o){this.from=e,this.to=o}}function lineStructure(n,e,o){let a=[],s=n,l=0;return RangeSet.spans(o,n,e,{span(){},point(c,d){c>s&&(a.push({from:s,to:c}),l+=c-s),s=d}},20),s<e&&(a.push({from:s,to:e}),l+=e-s),{total:l,ranges:a}}function findPosition({total:n,ranges:e},o){if(o<=0)return e[0].from;if(o>=1)return e[e.length-1].to;let a=Math.floor(n*o);for(let s=0;;s++){let{from:l,to:c}=e[s],d=c-l;if(a<=d)return l+a;a-=d}}function findFraction(n,e){let o=0;for(let{from:a,to:s}of n.ranges){if(e<=s){o+=e-a;break}o+=s-a}return o/n.total}function find(n,e){for(let o of n)if(e(o))return o}const IdScaler={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class BigScaler{constructor(e,o,a){let s=0,l=0,c=0;this.viewports=a.map(({from:d,to:u})=>{let f=o.lineAt(d,QueryType.ByPos,e,0,0).top,v=o.lineAt(u,QueryType.ByPos,e,0,0).bottom;return s+=v-f,{from:d,to:u,top:f,bottom:v,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(o.height-s);for(let d of this.viewports)d.domTop=c+(d.top-l)*this.scale,c=d.domBottom=d.domTop+(d.bottom-d.top),l=d.bottom}toDOM(e){for(let o=0,a=0,s=0;;o++){let l=o<this.viewports.length?this.viewports[o]:null;if(!l||e<l.top)return s+(e-a)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);a=l.bottom,s=l.domBottom}}fromDOM(e){for(let o=0,a=0,s=0;;o++){let l=o<this.viewports.length?this.viewports[o]:null;if(!l||e<l.domTop)return a+(e-s)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);a=l.bottom,s=l.domBottom}}eq(e){return e instanceof BigScaler?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((o,a)=>o.from==e.viewports[a].from&&o.to==e.viewports[a].to):!1}}function scaleBlock(n,e){if(e.scale==1)return n;let o=e.toDOM(n.top),a=e.toDOM(n.bottom);return new BlockInfo(n.from,n.length,o,a-o,Array.isArray(n._content)?n._content.map(s=>scaleBlock(s,e)):n._content)}const theme=Facet.define({combine:n=>n.join(" ")}),darkTheme=Facet.define({combine:n=>n.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(n,e,o){return new StyleModule(e,{finish(a){return/&/.test(a)?a.replace(/&\w*/,s=>{if(s=="&")return n;if(!o||!o[s])throw new RangeError(`Unsupported selector: ${s}`);return o[s]}):n+" "+a}})}const baseTheme$1$1=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(o=>{for(let a of o)this.queue.push(a);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&o.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(e),e.state.facet(editable)&&(e.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=o=>{this.queue.push({target:o.target,type:"characterData",oldValue:o.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var o;((o=this.view.docView)===null||o===void 0?void 0:o.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(o=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),o.length>0&&o[o.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(o=>{o.length>0&&o[o.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((o,a)=>o!=e[a]))){this.gapIntersection.disconnect();for(let o of e)this.gapIntersection.observe(o);this.gaps=e}}onSelectionChange(e){let o=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:a}=this,s=this.selectionRange;if(a.state.facet(editable)?a.root.activeElement!=this.dom:!hasSelection(this.dom,s))return;let l=s.anchorNode&&a.docView.nearest(s.anchorNode);if(l&&l.ignoreEvent(e)){o||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!a.state.selection.main.empty&&s.focusNode&&isEquivalentPosition(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,o=getSelection$1(e.root);if(!o)return!1;let a=browser.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,o)||o;if(!a||this.selectionRange.eq(a))return!1;let s=hasSelection(this.dom,a);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,a)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(a),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,o){this.selectionRange.set(e.node,e.offset,o.node,o.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,o=null;for(let a=this.dom;a;)if(a.nodeType==1)!o&&e<this.scrollTargets.length&&this.scrollTargets[e]==a?e++:o||(o=this.scrollTargets.slice(0,e)),o&&o.push(a),a=a.assignedSlot||a.parentNode;else if(a.nodeType==11)a=a.host;else break;if(e<this.scrollTargets.length&&!o&&(o=this.scrollTargets.slice(0,e)),o){for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);for(let a of this.scrollTargets=o)a.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,o){var a;if(!this.delayedAndroidKey){let s=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&dispatchKey(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:o,force:this.lastChange<Date.now()-50||!!(!((a=this.delayedAndroidKey)===null||a===void 0)&&a.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let o=-1,a=-1,s=!1;for(let l of e){let c=this.readMutation(l);c&&(c.typeOver&&(s=!0),o==-1?{from:o,to:a}=c:(o=Math.min(c.from,o),a=Math.max(c.to,a)))}return{from:o,to:a,typeOver:s}}readChange(){let{from:e,to:o,typeOver:a}=this.processRecords(),s=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new DOMChange(this.view,e,o,a);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let o=this.readChange();if(!o)return this.view.requestMeasure(),!1;let a=this.view.state,s=applyDOMChange(this.view,o);return this.view.state==a&&(o.domChanged||o.newSel&&!o.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let o=this.view.docView.nearest(e.target);if(!o||o.ignoreMutation(e))return null;if(o.markDirty(e.type=="attributes"),e.type=="attributes"&&(o.flags|=4),e.type=="childList"){let a=findChild(o,e.previousSibling||e.target.previousSibling,-1),s=findChild(o,e.nextSibling||e.target.nextSibling,1);return{from:a?o.posAfter(a):o.posAtStart,to:s?o.posBefore(s):o.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:o.posAtStart,to:o.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(editable)!=e.state.facet(editable)&&(e.view.contentDOM.editContext=e.state.facet(editable)?this.editContext.editContext:null))}destroy(){var e,o,a;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(o=this.gapIntersection)===null||o===void 0||o.disconnect(),(a=this.resizeScroll)===null||a===void 0||a.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(n,e,o){for(;e;){let a=ContentView.get(e);if(a&&a.parent==n)return a;let s=e.parentNode;e=s!=n.dom?s:o>0?e.nextSibling:e.previousSibling}return null}function buildSelectionRangeFromRange(n,e){let o=e.startContainer,a=e.startOffset,s=e.endContainer,l=e.endOffset,c=n.docView.domAtPos(n.state.selection.main.anchor);return isEquivalentPosition(c.node,c.offset,s,l)&&([o,a,s,l]=[s,l,o,a]),{anchorNode:o,anchorOffset:a,focusNode:s,focusOffset:l}}function safariSelectionRangeHack(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return buildSelectionRangeFromRange(n,s)}let o=null;function a(s){s.preventDefault(),s.stopImmediatePropagation(),o=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",a,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",a,!0),o?buildSelectionRangeFromRange(n,o):null}class EditContextManager{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let o=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=a=>{let s=e.state.selection.main,{anchor:l,head:c}=s,d=this.toEditorPos(a.updateRangeStart),u=this.toEditorPos(a.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:a.updateRangeStart,editorBase:d,drifted:!1});let f={from:d,to:u,insert:Text.of(a.text.split(`
`))};if(f.from==this.from&&l<this.from?f.from=l:f.to==this.to&&l>this.to&&(f.to=l),f.from==f.to&&!f.insert.length){let v=EditorSelection.single(this.toEditorPos(a.selectionStart),this.toEditorPos(a.selectionEnd));v.main.eq(s)||e.dispatch({selection:v,userEvent:"select"});return}if((browser.mac||browser.android)&&f.from==c-1&&/^\. ?$/.test(a.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:d,to:u,insert:Text.of([a.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let v=this.to-this.from+(f.to-f.from+f.insert.length);applyDOMChangeInner(e,f,EditorSelection.single(this.toEditorPos(a.selectionStart,v),this.toEditorPos(a.selectionEnd,v)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=a=>{let s=[],l=null;for(let c=this.toEditorPos(a.rangeStart),d=this.toEditorPos(a.rangeEnd);c<d;c++){let u=e.coordsForChar(c);l=u&&new DOMRect(u.left,u.top,u.right-u.left,u.bottom-u.top)||l||new DOMRect,s.push(l)}o.updateCharacterBounds(a.rangeStart,s)},this.handlers.textformatupdate=a=>{let s=[];for(let l of a.getTextFormats()){let c=l.underlineStyle,d=l.underlineThickness;if(c!="None"&&d!="None"){let u=this.toEditorPos(l.rangeStart),f=this.toEditorPos(l.rangeEnd);if(u<f){let v=`text-decoration: underline ${c=="Dashed"?"dashed ":c=="Squiggle"?"wavy ":""}${d=="Thin"?1:2}px`;s.push(Decoration.mark({attributes:{style:v}}).range(u,f))}}}e.dispatch({effects:setEditContextFormatting.of(Decoration.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:a}=this.composing;this.composing=null,a&&this.reset(e.state)}};for(let a in this.handlers)o.addEventListener(a,this.handlers[a]);this.measureReq={read:a=>{this.editContext.updateControlBounds(a.contentDOM.getBoundingClientRect());let s=getSelection$1(a.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let o=0,a=!1,s=this.pendingContextChange;return e.changes.iterChanges((l,c,d,u,f)=>{if(a)return;let v=f.length-(c-l);if(s&&c>=s.to)if(s.from==l&&s.to==c&&s.insert.eq(f)){s=this.pendingContextChange=null,o+=v,this.to+=v;return}else s=null,this.revertPending(e.state);if(l+=o,c+=o,c<=this.from)this.from+=v,this.to+=v;else if(l<this.to){if(l<this.from||c>this.to||this.to-this.from+f.length>3e4){a=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(c),f.toString()),this.to+=v}o+=v}),s&&!a&&this.revertPending(e.state),!a}update(e){let o=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(a=>!a.isUserEvent("input.type")&&a.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||o)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:o}=e.selection.main;this.from=Math.max(0,o-1e4),this.to=Math.min(e.doc.length,o+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let o=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(o.from),this.toContextPos(o.from+o.insert.length),e.doc.sliceString(o.from,o.to))}setSelection(e){let{main:o}=e.selection,a=this.toContextPos(Math.max(this.from,Math.min(this.to,o.anchor))),s=this.toContextPos(o.head);(this.editContext.selectionStart!=a||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(a,s)}rangeIsValid(e){let{head:o}=e.selection.main;return!(this.from>0&&o-this.from<500||this.to<e.doc.length&&this.to-o<500||this.to-this.from>3e4)}toEditorPos(e,o=this.to-this.from){e=Math.min(e,o);let a=this.composing;return a&&a.drifted?a.editorBase+(e-a.contextBase):e+this.from}toContextPos(e){let o=this.composing;return o&&o.drifted?o.contextBase+(e-o.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}EditorView=class{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(n={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),n.parent&&n.parent.appendChild(this.dom);let{dispatch:o}=n;this.dispatchTransactions=n.dispatchTransactions||o&&(a=>a.forEach(s=>o(s,this)))||(a=>this.update(a)),this.dispatch=this.dispatch.bind(this),this._root=n.root||getRoot(n.parent)||document,this.viewState=new ViewState(n.state||EditorState.create(n)),n.scrollTo&&n.scrollTo.is(scrollIntoView)&&(this.viewState.scrollTarget=n.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(a=>new PluginInstance(a));for(let a of this.plugins)a.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((e=document.fonts)===null||e===void 0)&&e.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...n){let e=n.length==1&&n[0]instanceof Transaction?n:n.length==1&&Array.isArray(n[0])?n[0]:[this.state.update(...n)];this.dispatchTransactions(e,this)}update(n){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e=!1,o=!1,a,s=this.state;for(let b of n){if(b.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=b.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,c=0,d=null;n.some(b=>b.annotation(isFocusChange))?(this.inputState.notifiedFocused=l,c=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,d=focusChangeTransaction(s,l),d||(c=1));let u=this.observer.delayedAndroidKey,f=null;if(u?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(f=null)):this.observer.clear(),s.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(s);a=ViewUpdate.create(this,s,n),a.flags|=c;let v=this.viewState.scrollTarget;try{this.updateState=2;for(let b of n){if(v&&(v=v.map(b.changes)),b.scrollIntoView){let{main:k}=b.state.selection;v=new ScrollTarget(k.empty?k:EditorSelection.cursor(k.head,k.head>k.anchor?-1:1))}for(let k of b.effects)k.is(scrollIntoView)&&(v=k.value.clip(this.state))}this.viewState.update(a,v),this.bidiCache=CachedOrder.update(this.bidiCache,a.changes),a.empty||(this.updatePlugins(a),this.inputState.update(a)),e=this.docView.update(a),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),o=this.updateAttrs(),this.showAnnouncements(n),this.docView.updateSelection(e,n.some(b=>b.isUserEvent("select.pointer")))}finally{this.updateState=0}if(a.startState.facet(theme)!=a.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(e||o||v||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),e&&this.docViewUpdate(),!a.empty)for(let b of this.state.facet(updateListener))try{b(a)}catch(k){logException(this.state,k,"update listener")}(d||f)&&Promise.resolve().then(()=>{d&&this.state==d.startState&&this.dispatch(d),f&&!applyDOMChange(this,f)&&u.force&&dispatchKey(this.contentDOM,u.key,u.keyCode)})}setState(n){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=n;return}this.updateState=2;let e=this.hasFocus;try{for(let o of this.plugins)o.destroy(this);this.viewState=new ViewState(n),this.plugins=n.facet(viewPlugin).map(o=>new PluginInstance(o)),this.pluginMap.clear();for(let o of this.plugins)o.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(n){let e=n.startState.facet(viewPlugin),o=n.state.facet(viewPlugin);if(e!=o){let a=[];for(let s of o){let l=e.indexOf(s);if(l<0)a.push(new PluginInstance(s));else{let c=this.plugins[l];c.mustUpdate=n,a.push(c)}}for(let s of this.plugins)s.mustUpdate!=n&&s.destroy(this);this.plugins=a,this.pluginMap.clear()}else for(let a of this.plugins)a.mustUpdate=n;for(let a=0;a<this.plugins.length;a++)this.plugins[a].update(this);e!=o&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let n of this.plugins){let e=n.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(o){logException(this.state,o,"doc view update listener")}}}measure(n=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,n&&this.observer.forceFlush();let e=null,o=this.scrollDOM,a=o.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(a-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(l<0)if(isScrolledToBottom(o))s=-1,l=this.viewState.heightMap.height;else{let k=this.viewState.scrollAnchorAt(a);s=k.from,l=k.top}this.updateState=1;let d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];d&4||([this.measureRequests,u]=[u,this.measureRequests]);let f=u.map(k=>{try{return k.read(this)}catch(x){return logException(this.state,x),BadMeasure}}),v=ViewUpdate.create(this,this.state,[]),b=!1;v.flags|=d,e?e.flags|=d:e=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),b=this.docView.update(v),b&&this.docViewUpdate());for(let k=0;k<u.length;k++)if(f[k]!=BadMeasure)try{let x=u[k];x.write&&x.write(f[k],this)}catch(x){logException(this.state,x)}if(b&&this.docView.updateSelection(!0),!v.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let k=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(k>1||k<-1){a=a+k,o.scrollTop=a/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let c of this.state.facet(updateListener))c(e)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let n=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,e);let o=this.observer.ignore(()=>{let a=updateAttrs(this.contentDOM,this.contentAttrs,e),s=updateAttrs(this.dom,this.editorAttrs,n);return a||s});return this.editorAttrs=n,this.contentAttrs=e,o}showAnnouncements(n){let e=!0;for(let o of n)for(let a of o.effects)if(a.is(EditorView.announce)){e&&(this.announceDOM.textContent=""),e=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=a.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let n=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$1).reverse(),n?{nonce:n}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(n){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),n){if(this.measureRequests.indexOf(n)>-1)return;if(n.key!=null){for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===n.key){this.measureRequests[e]=n;return}}this.measureRequests.push(n)}}plugin(n){let e=this.pluginMap.get(n);return(e===void 0||e&&e.spec!=n)&&this.pluginMap.set(n,e=this.plugins.find(o=>o.spec==n)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(n){return this.readMeasured(),this.viewState.elementAtHeight(n)}lineBlockAtHeight(n){return this.readMeasured(),this.viewState.lineBlockAtHeight(n)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(n){return this.viewState.lineBlockAt(n)}get contentHeight(){return this.viewState.contentHeight}moveByChar(n,e,o){return skipAtoms(this,n,moveByChar(this,n,e,o))}moveByGroup(n,e){return skipAtoms(this,n,moveByChar(this,n,e,o=>byGroup(this,n.head,o)))}visualLineSide(n,e){let o=this.bidiSpans(n),a=this.textDirectionAt(n.from),s=o[e?o.length-1:0];return EditorSelection.cursor(s.side(e,a)+n.from,s.forward(!e,a)?1:-1)}moveToLineBoundary(n,e,o=!0){return moveToLineBoundary(this,n,e,o)}moveVertically(n,e,o){return skipAtoms(this,n,moveVertically(this,n,e,o))}domAtPos(n){return this.docView.domAtPos(n)}posAtDOM(n,e=0){return this.docView.posFromDOM(n,e)}posAtCoords(n,e=!0){return this.readMeasured(),posAtCoords(this,n,e)}coordsAtPos(n,e=1){this.readMeasured();let o=this.docView.coordsAt(n,e);if(!o||o.left==o.right)return o;let a=this.state.doc.lineAt(n),s=this.bidiSpans(a),l=s[BidiSpan.find(s,n-a.from,-1,e)];return flattenRect(o,l.dir==Direction.LTR==e>0)}coordsForChar(n){return this.readMeasured(),this.docView.coordsForChar(n)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(n){return!this.state.facet(perLineTextDirection)||n<this.viewport.from||n>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(n))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(n){if(n.length>MaxBidiLine)return trivialOrder(n.length);let e=this.textDirectionAt(n.from),o;for(let s of this.bidiCache)if(s.from==n.from&&s.dir==e&&(s.fresh||isolatesEq(s.isolates,o=getIsolatedRanges(this,n))))return s.order;o||(o=getIsolatedRanges(this,n));let a=computeOrder(n.text,e,o);return this.bidiCache.push(new CachedOrder(n.from,n.to,e,o,!0,a)),a}get hasFocus(){var n;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((n=this.inputState)===null||n===void 0?void 0:n.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(n){this._root!=n&&(this._root=n,this.observer.setWindow((n.nodeType==9?n:n.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let n of this.plugins)n.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(n,e={}){return scrollIntoView.of(new ScrollTarget(typeof n=="number"?EditorSelection.cursor(n):n,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:n,scrollLeft:e}=this.scrollDOM,o=this.viewState.scrollAnchorAt(n);return scrollIntoView.of(new ScrollTarget(EditorSelection.cursor(o.from),"start","start",o.top-n,e,!0))}setTabFocusMode(n){n==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof n=="boolean"?this.inputState.tabFocusMode=n?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+n)}static domEventHandlers(n){return ViewPlugin.define(()=>({}),{eventHandlers:n})}static domEventObservers(n){return ViewPlugin.define(()=>({}),{eventObservers:n})}static theme(n,e){let o=StyleModule.newName(),a=[theme.of(o),styleModule.of(buildTheme(`.${o}`,n))];return e&&e.dark&&a.push(darkTheme.of(!0)),a}static baseTheme(n){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,n,lightDarkIDs)))}static findFromDOM(n){var e;let o=n.querySelector(".cm-content"),a=o&&ContentView.get(o)||ContentView.get(n);return((e=a==null?void 0:a.rootView)===null||e===void 0?void 0:e.view)||null}},EditorView.styleModule=styleModule,EditorView.inputHandler=inputHandler$1,EditorView.clipboardInputFilter=clipboardInputFilter,EditorView.clipboardOutputFilter=clipboardOutputFilter,EditorView.scrollHandler=scrollHandler,EditorView.focusChangeEffect=focusChangeEffect,EditorView.perLineTextDirection=perLineTextDirection,EditorView.exceptionSink=exceptionSink,EditorView.updateListener=updateListener,EditorView.editable=editable,EditorView.mouseSelectionStyle=mouseSelectionStyle,EditorView.dragMovesSelection=dragMovesSelection$1,EditorView.clickAddsSelectionRange=clickAddsSelectionRange,EditorView.decorations=decorations,EditorView.outerDecorations=outerDecorations,EditorView.atomicRanges=atomicRanges,EditorView.bidiIsolatedRanges=bidiIsolatedRanges,EditorView.scrollMargins=scrollMargins,EditorView.darkTheme=darkTheme,EditorView.cspNonce=Facet.define({combine:n=>n.length?n[0]:""}),EditorView.contentAttributes=contentAttributes,EditorView.editorAttributes=editorAttributes,EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"}),EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,o,a,s,l,c){this.from=e,this.to=o,this.dir=a,this.isolates=s,this.fresh=l,this.order=c}static update(e,o){if(o.empty&&!e.some(l=>l.fresh))return e;let a=[],s=e.length?e[e.length-1].dir:Direction.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let c=e[l];c.dir==s&&!o.touchesRange(c.from,c.to)&&a.push(new CachedOrder(o.mapPos(c.from,1),o.mapPos(c.to,-1),c.dir,c.isolates,!1,c.order))}return a}}function attrsFromFacet(n,e,o){for(let a=n.state.facet(e),s=a.length-1;s>=0;s--){let l=a[s],c=typeof l=="function"?l(n):l;c&&combineAttrs(c,o)}return o}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName$1(n,e){const o=n.split(/-(?!$)/);let a=o[o.length-1];a=="Space"&&(a=" ");let s,l,c,d;for(let u=0;u<o.length-1;++u){const f=o[u];if(/^(cmd|meta|m)$/i.test(f))d=!0;else if(/^a(lt)?$/i.test(f))s=!0;else if(/^(c|ctrl|control)$/i.test(f))l=!0;else if(/^s(hift)?$/i.test(f))c=!0;else if(/^mod$/i.test(f))e=="mac"?d=!0:l=!0;else throw new Error("Unrecognized modifier name: "+f)}return s&&(a="Alt-"+a),l&&(a="Ctrl-"+a),d&&(a="Meta-"+a),c&&(a="Shift-"+a),a}function modifiers$1(n,e,o){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),o!==!1&&e.shiftKey&&(n="Shift-"+n),n}let handleKeyEvents,Keymaps;handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(n,e){return runHandlers(getKeymap(e.state),n,e,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(n){let e=n.facet(keymap),o=Keymaps.get(e);return o||Keymaps.set(e,o=buildKeymap(e.reduce((a,s)=>a.concat(s),[]))),o}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(n,e=currentPlatform){let o=Object.create(null),a=Object.create(null),s=(c,d)=>{let u=a[c];if(u==null)a[c]=d;else if(u!=d)throw new Error("Key binding "+c+" is used both as a regular binding and as a multi-stroke prefix")},l=(c,d,u,f,v)=>{var b,k;let x=o[c]||(o[c]=Object.create(null)),_=d.split(/ (?!$)/).map(M=>normalizeKeyName$1(M,e));for(let M=1;M<_.length;M++){let V=_.slice(0,M).join(" ");s(V,!0),x[V]||(x[V]={preventDefault:!0,stopPropagation:!1,run:[F=>{let I=storedPrefix={view:F,prefix:V,scope:c};return setTimeout(()=>{storedPrefix==I&&(storedPrefix=null)},PrefixTimeout),!0}]})}let E=_.join(" ");s(E,!1);let B=x[E]||(x[E]={preventDefault:!1,stopPropagation:!1,run:((k=(b=x._any)===null||b===void 0?void 0:b.run)===null||k===void 0?void 0:k.slice())||[]});u&&B.run.push(u),f&&(B.preventDefault=!0),v&&(B.stopPropagation=!0)};for(let c of n){let d=c.scope?c.scope.split(" "):["editor"];if(c.any)for(let f of d){let v=o[f]||(o[f]=Object.create(null));v._any||(v._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:b}=c;for(let k in v)v[k].run.push(x=>b(x,currentKeyEvent))}let u=c[e]||c.key;if(u)for(let f of d)l(f,u,c.run,c.preventDefault,c.stopPropagation),c.shift&&l(f,"Shift-"+u,c.shift,c.preventDefault,c.stopPropagation)}return o}let currentKeyEvent=null;function runHandlers(n,e,o,a){currentKeyEvent=e;let s=keyName(e),l=codePointAt(s,0),c=codePointSize(l)==s.length&&s!=" ",d="",u=!1,f=!1,v=!1;storedPrefix&&storedPrefix.view==o&&storedPrefix.scope==a&&(d=storedPrefix.prefix+" ",modifierCodes.indexOf(e.keyCode)<0&&(f=!0,storedPrefix=null));let b=new Set,k=B=>{if(B){for(let M of B.run)if(!b.has(M)&&(b.add(M),M(o)))return B.stopPropagation&&(v=!0),!0;B.preventDefault&&(B.stopPropagation&&(v=!0),f=!0)}return!1},x=n[a],_,E;return x&&(k(x[d+modifiers$1(s,e,!c)])?u=!0:c&&(e.altKey||e.metaKey||e.ctrlKey)&&!(browser.windows&&e.ctrlKey&&e.altKey)&&(_=base[e.keyCode])&&_!=s?(k(x[d+modifiers$1(_,e,!0)])||e.shiftKey&&(E=shift[e.keyCode])!=s&&E!=_&&k(x[d+modifiers$1(E,e,!1)]))&&(u=!0):c&&e.shiftKey&&k(x[d+modifiers$1(s,e,!0)])&&(u=!0),!u&&k(x._any)&&(u=!0)),f&&(u=!0),u&&v&&e.stopPropagation(),currentKeyEvent=null,u}class RectangleMarker{constructor(e,o,a,s,l){this.className=e,this.left=o,this.top=a,this.width=s,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,o){return o.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,o,a){if(a.empty){let s=e.coordsAtPos(a.head,a.assoc||1);if(!s)return[];let l=getBase(e);return[new RectangleMarker(o,s.left-l.left,s.top-l.top,null,s.bottom-s.top)]}else return rectanglesForRange(e,o,a)}}function getBase(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Direction.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function wrappedLine(n,e,o,a){let s=n.coordsAtPos(e,o*2);if(!s)return a;let l=n.dom.getBoundingClientRect(),c=(s.top+s.bottom)/2,d=n.posAtCoords({x:l.left+1,y:c}),u=n.posAtCoords({x:l.right-1,y:c});return d==null||u==null?a:{from:Math.max(a.from,Math.min(d,u)),to:Math.min(a.to,Math.max(d,u))}}function rectanglesForRange(n,e,o){if(o.to<=n.viewport.from||o.from>=n.viewport.to)return[];let a=Math.max(o.from,n.viewport.from),s=Math.min(o.to,n.viewport.to),l=n.textDirection==Direction.LTR,c=n.contentDOM,d=c.getBoundingClientRect(),u=getBase(n),f=c.querySelector(".cm-line"),v=f&&window.getComputedStyle(f),b=d.left+(v?parseInt(v.paddingLeft)+Math.min(0,parseInt(v.textIndent)):0),k=d.right-(v?parseInt(v.paddingRight):0),x=blockAt(n,a),_=blockAt(n,s),E=x.type==BlockType.Text?x:null,B=_.type==BlockType.Text?_:null;if(E&&(n.lineWrapping||x.widgetLineBreaks)&&(E=wrappedLine(n,a,1,E)),B&&(n.lineWrapping||_.widgetLineBreaks)&&(B=wrappedLine(n,s,-1,B)),E&&B&&E.from==B.from&&E.to==B.to)return V(F(o.from,o.to,E));{let L=E?F(o.from,null,E):I(x,!1),U=B?F(null,o.to,B):I(_,!0),Z=[];return(E||x).to<(B||_).from-(E&&B?1:0)||x.widgetLineBreaks>1&&L.bottom+n.defaultLineHeight/2<U.top?Z.push(M(b,L.bottom,k,U.top)):L.bottom<U.top&&n.elementAtHeight((L.bottom+U.top)/2).type==BlockType.Text&&(L.bottom=U.top=(L.bottom+U.top)/2),V(L).concat(Z).concat(V(U))}function M(L,U,Z,K){return new RectangleMarker(e,L-u.left,U-u.top,Z-L,K-U)}function V({top:L,bottom:U,horizontal:Z}){let K=[];for(let j=0;j<Z.length;j+=2)K.push(M(Z[j],L,Z[j+1],U));return K}function F(L,U,Z){let K=1e9,j=-1e9,W=[];function Y(le,pe,ue,Ne,Ve){let Ze=n.coordsAtPos(le,le==Z.to?-2:2),We=n.coordsAtPos(ue,ue==Z.from?2:-2);!Ze||!We||(K=Math.min(Ze.top,We.top,K),j=Math.max(Ze.bottom,We.bottom,j),Ve==Direction.LTR?W.push(l&&pe?b:Ze.left,l&&Ne?k:We.right):W.push(!l&&Ne?b:We.left,!l&&pe?k:Ze.right))}let G=L??Z.from,fe=U??Z.to;for(let le of n.visibleRanges)if(le.to>G&&le.from<fe)for(let pe=Math.max(le.from,G),ue=Math.min(le.to,fe);;){let Ne=n.state.doc.lineAt(pe);for(let Ve of n.bidiSpans(Ne)){let Ze=Ve.from+Ne.from,We=Ve.to+Ne.from;if(Ze>=ue)break;We>pe&&Y(Math.max(Ze,pe),L==null&&Ze<=G,Math.min(We,ue),U==null&&We>=fe,Ve.dir)}if(pe=Ne.to+1,pe>=ue)break}return W.length==0&&Y(G,L==null,fe,U==null,n.textDirection),{top:K,bottom:j,horizontal:W}}function I(L,U){let Z=d.top+(U?L.top:L.bottom);return{top:Z,bottom:Z,horizontal:[]}}}function sameMarker(n,e){return n.constructor==e.constructor&&n.eq(e)}class LayerView{constructor(e,o){this.view=e,this.layer=o,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),o.above&&this.dom.classList.add("cm-layer-above"),o.class&&this.dom.classList.add(o.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),o.mount&&o.mount(this.dom,e)}update(e){e.startState.facet(layerOrder)!=e.state.facet(layerOrder)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let o=0,a=e.facet(layerOrder);for(;o<a.length&&a[o]!=this.layer;)o++;this.dom.style.zIndex=String((this.layer.above?150:-1)-o)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:o}=this.view;(e!=this.scaleX||o!=this.scaleY)&&(this.scaleX=e,this.scaleY=o,this.dom.style.transform=`scale(${1/e}, ${1/o})`)}draw(e){if(e.length!=this.drawn.length||e.some((o,a)=>!sameMarker(o,this.drawn[a]))){let o=this.dom.firstChild,a=0;for(let s of e)s.update&&o&&s.constructor&&this.drawn[a].constructor&&s.update(o,this.drawn[a])?(o=o.nextSibling,a++):this.dom.insertBefore(s.draw(),o);for(;o;){let s=o.nextSibling;o.remove(),o=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(n){return[ViewPlugin.define(e=>new LayerView(e,n)),layerOrder.of(n)]}const CanHidePrimary=!(browser.ios&&browser.webkit&&browser.webkit_version<534),selectionConfig=Facet.define({combine(n){return combineConfig(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,o)=>Math.min(e,o),drawRangeCursor:(e,o)=>e||o})}});function drawSelection(n={}){return[selectionConfig.of(n),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(n){return n.startState.facet(selectionConfig)!=n.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(n){let{state:e}=n,o=e.facet(selectionConfig),a=[];for(let s of e.selection.ranges){let l=s==e.selection.main;if(s.empty?!l||CanHidePrimary:o.drawRangeCursor){let c=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",d=s.empty?s:EditorSelection.cursor(s.head,s.head>s.anchor?-1:1);for(let u of RectangleMarker.forRange(n,c,d))a.push(u)}}return a},update(n,e){n.transactions.some(a=>a.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let o=configChanged(n);return o&&setBlinkRate(n.state,e),n.docChanged||n.selectionSet||o},mount(n,e){setBlinkRate(e.state,n)},class:"cm-cursorLayer"});function setBlinkRate(n,e){e.style.animationDuration=n.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:RectangleMarker.forRange(n,"cm-selectionBackground",e)).reduce((e,o)=>e.concat(o))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||configChanged(n)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor=themeSpec[".cm-content"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec));function iterMatches(n,e,o,a,s){e.lastIndex=0;for(let l=n.iterRange(o,a),c=o,d;!l.next().done;c+=l.value.length)if(!l.lineBreak)for(;d=e.exec(l.value);)s(c+d.index,d)}function matchRanges(n,e){let o=n.visibleRanges;if(o.length==1&&o[0].from==n.viewport.from&&o[0].to==n.viewport.to)return o;let a=[];for(let{from:s,to:l}of o)s=Math.max(n.state.doc.lineAt(s).from,s-e),l=Math.min(n.state.doc.lineAt(l).to,l+e),a.length&&a[a.length-1].to>=s?a[a.length-1].to=l:a.push({from:s,to:l});return a}class MatchDecorator{constructor(e){const{regexp:o,decoration:a,decorate:s,boundary:l,maxLength:c=1e3}=e;if(!o.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=o,s)this.addMatch=(d,u,f,v)=>s(v,f,f+d[0].length,d,u);else if(typeof a=="function")this.addMatch=(d,u,f,v)=>{let b=a(d,u,f);b&&v(f,f+d[0].length,b)};else if(a)this.addMatch=(d,u,f,v)=>v(f,f+d[0].length,a);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=l,this.maxLength=c}createDeco(e){let o=new RangeSetBuilder,a=o.add.bind(o);for(let{from:s,to:l}of matchRanges(e,this.maxLength))iterMatches(e.state.doc,this.regexp,s,l,(c,d)=>this.addMatch(d,e,c,a));return o.finish()}updateDeco(e,o){let a=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((l,c,d,u)=>{u>=e.view.viewport.from&&d<=e.view.viewport.to&&(a=Math.min(d,a),s=Math.max(u,s))}),e.viewportMoved||s-a>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,o.map(e.changes),a,s):o}updateRange(e,o,a,s){for(let l of e.visibleRanges){let c=Math.max(l.from,a),d=Math.min(l.to,s);if(d>c){let u=e.state.doc.lineAt(c),f=u.to<d?e.state.doc.lineAt(d):u,v=Math.max(l.from,u.from),b=Math.min(l.to,f.to);if(this.boundary){for(;c>u.from;c--)if(this.boundary.test(u.text[c-1-u.from])){v=c;break}for(;d<f.to;d++)if(this.boundary.test(f.text[d-f.from])){b=d;break}}let k=[],x,_=(E,B,M)=>k.push(M.range(E,B));if(u==f)for(this.regexp.lastIndex=v-u.from;(x=this.regexp.exec(u.text))&&x.index<b-u.from;)this.addMatch(x,e,x.index+u.from,_);else iterMatches(e.state.doc,this.regexp,v,b,(E,B)=>this.addMatch(B,e,E,_));o=o.update({filterFrom:v,filterTo:b,filter:(E,B)=>E<v||B>b,add:k})}}return o}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var n;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let e=document.body.style;_supportsTabSize=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(n){let e=combineConfig(n,{render:null,specialChars:Specials,addSpecialChars:null});return(e.replaceTabs=!supportsTabSize())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,UnicodeRegexpSupport)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,UnicodeRegexpSupport)),e}});function highlightSpecialChars(n={}){return[specialCharConfig.of(n),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new MatchDecorator({regexp:n.specialChars,decoration:(e,o,a)=>{let{doc:s}=o.state,l=codePointAt(e[0],0);if(l==9){let c=s.lineAt(a),d=o.state.tabSize,u=countColumn(c.text,d,a-c.from);return Decoration.replace({widget:new TabWidget((d-u%d)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[l]||(this.decorationCache[l]=Decoration.replace({widget:new SpecialCharWidget(n,l)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(specialCharConfig);n.startState.facet(specialCharConfig)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const DefaultPlaceholder="\u2022";function placeholder$1(n){return n>=32?DefaultPlaceholder:n==10?"\u2424":String.fromCharCode(9216+n)}class SpecialCharWidget extends WidgetType{constructor(e,o){super(),this.options=e,this.code=o}eq(e){return e.code==this.code}toDOM(e){let o=placeholder$1(this.code),a=e.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,a,o);if(s)return s;let l=document.createElement("span");return l.textContent=o,l.title=a,l.setAttribute("aria-label",a),l.className="cm-specialChar",l}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="",GutterMarker.prototype.toDOM=void 0,GutterMarker.prototype.mapMode=MapMode.TrackBefore,GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1,GutterMarker.prototype.point=!0;function createUndoManager(n){const{createBlockTransaction:e}=n,o=useEventBus(),a=shallowReactive([]),s=shallowReactive([]);let l=0;const c=()=>{s.length=0,a.length=0,l=0},d=()=>{const u=a.length;s.push(u)};return o.on("afterBlocksTrCommit",([u])=>{!u.meta.isUndoRedo&&u.meta.canUndo&&(a.length=l,a.push(u),l=a.length,u.meta.autoAddUndoPoint&&d()),(!u.meta.canUndo||u.origin.type!=="ui")&&c()}),{undo:()=>{var V;const u=s[s.length-1];l>u&&s.push(l);const f=s.indexOf(l);if(f==-1||f==0)return;const v=s[f-1],b=[...a.slice(v,l)];b.reverse(),(V=document.activeElement)==null||V.blur();const k=e({type:"ui"}).setMeta("isUndoRedo",!0);for(const F of b)k.addReverseTransaction(F);k.commit();const x=b[0].meta.envUndoStrategy==="beforeCommit"?b[0].envInfo.beforeCommit:b[0].envInfo.onCreate,{rootBlockId:_,focusedTreeId:E,focusedItemId:B,selection:M}=x??{};setTimeout(()=>{try{if(n.mainRootBlockId.value=_??null,E){const F=n.getBlockTree(E);if(F&&B&&(F.focusDi(B),M!=null)){const I=F.getEditorView(B);if(I instanceof EditorView$1){const L=Selection.fromJSON(I.state.doc,M),U=I.state.tr.setSelection(L);I.dispatch(U)}else if(I instanceof EditorView){const L=EditorSelection.fromJSON(M);I.dispatch({selection:L})}}}}catch{}}),l=v},redo:()=>{var M;const u=s.indexOf(l);if(u==-1)return;if(u==s.length-1){console.warn("Already reached the last state, cannot redo");return}const f=s[u+1],v=[...a.slice(l,f)];(M=document.activeElement)==null||M.blur();const b=e({type:"ui"}).setMeta("isUndoRedo",!0);for(const V of v)b.addTransaction(V);b.commit();const k=v[0].meta.envUndoStrategy==="beforeCommit"?v[0].envInfo.beforeCommit:v[0].envInfo.onCreate,{rootBlockId:x,focusedTreeId:_,focusedItemId:E,selection:B}=k??{};setTimeout(()=>{try{if(n.mainRootBlockId.value=x??null,_){const V=n.getBlockTree(_);if(V&&E&&(V.focusDi(E),B!=null)){const F=V.getEditorView(E);if(F instanceof EditorView$1){const I=Selection.fromJSON(F.state.doc,B),L=F.state.tr.setSelection(I);F.dispatch(L)}else if(F instanceof EditorView){const I=EditorSelection.fromJSON(B);F.dispatch({selection:I})}}}}catch{}}),l=f},addUndoPoint:d,clearUndoRedoHistory:c}}const DI_FILTERS={isBlockDi:n=>n.type==="basic-block"||n.type==="backlink-block"||n.type==="backlink-descendant"||n.type==="potential-links-block"||n.type==="potential-links-descendant"},BlockTreeContext=createContext(()=>{const n=new Map;return{registerBlockTree:e=>{n.set(e.getId(),e)},getBlockTree:e=>n.get(e),unregisterBlockTree:e=>{n.delete(e)}}}),LastFocusContext=createContext(()=>{const n=shallowRef(null),e=shallowRef(null);return{lastFocusedDiId:n,lastFocusedBlockTree:e}}),MainTreeContext=createContext(()=>{const{kbPrefix:n}=ServerInfoContext.useContext(),e="main.rootBlockId",o=computed(()=>`${n.value}${e}`);return{mainRootBlockId:useLocalStorage2(o,"root")}}),INTERNAL_BLOCK_PARENT_ID="_internal";z.any().pipe(z.union([z.object({type:z.literal("ui"),changeSources:z.array(z.string()).optional()}),z.object({type:z.literal("local")}),z.object({type:z.literal("remote")})]));const cloneMinimalBlock=n=>n?{type:n.type,id:n.id,fold:n.fold,parentId:n.parentId,childrenIds:[...n.childrenIds],...n.type=="normalBlock"?{content:JSON.parse(JSON.stringify(n.content)),metadata:JSON.parse(JSON.stringify(n.metadata))}:{},...n.type=="mirrorBlock"?{src:n.src}:{},...n.type=="virtualBlock"?{src:n.src,childrenCreated:n.childrenCreated}:{}}:null,cloneBlock=n=>n?{type:n.type,id:n.id,parentId:n.parentId,parentRef:n.parentRef,childrenIds:[...n.childrenIds],childrenRefs:[...n.childrenRefs],fold:n.fold,deleted:n.deleted,content:JSON.parse(JSON.stringify(n.content)),ctext:n.ctext,metadata:JSON.parse(JSON.stringify(n.metadata)),mtext:n.mtext,olinks:[...n.olinks],boosting:n.boosting,acturalSrc:n.acturalSrc,...n.type=="normalBlock"?{docId:n.docId}:{},...n.type=="mirrorBlock"?{src:n.src}:{},...n.type=="virtualBlock"?{src:n.src,childrenCreated:n.childrenCreated}:{},origin:n.origin}:null,createBlocksManager=n=>{const e=useEventBus(),o=new Map,a=new Map,s=new Map,l=new Map,c=new Set,{lastFocusedBlockTree:d,lastFocusedDiId:u}=LastFocusContext.useContext(),{mainRootBlockId:f}=MainTreeContext.useContext(),{getBlockTree:v}=BlockTreeContext.useContext(),b=ref(!1),k=ref(new Map);n.on("docSynced",({docId:ze,hasSyncEvent:qe})=>{qe?k.value.set(ze,"waitForEventProcessing"):(k.value.set(ze,"synced"),b.value==!1&&ze==BLOCK_INFO_DOC_NAME&&(b.value=!0))}),n.on("disconnected",()=>{for(const ze of k.value.keys())k.value.set(ze,"disconnected");b.value=!1});const x={getBlockInfo:new Map,getBlockData:new Map},_=ze=>{let qe=o.get(ze);return qe||(qe=shallowRef(null),o.set(ze,qe)),qe},E=(ze,qe=!0)=>{const dt=_(ze);return dt.value?qe?cloneBlock(dt.value):dt.value:null},B=ze=>{const qe=E(ze);return!qe||qe.parentId=="null"?null:E(qe.acturalSrc)||null},M=ze=>{let qe=_(ze);if(!qe)return[];const dt=[];for(;qe.value&&(dt.push(qe.value),qe.value.id!="root");){const Xe=qe.value.parentRef;Xe.value?qe=Xe:qe=_(qe.value.parentId)}return dt},V=ze=>M(ze).length-1,F=({onEachBlock:ze,onMissingBlock:qe,rootBlockId:dt,afterLeavingChildrens:Xe,rootBlockLevel:Ge,nonFoldOnly:ft,includeSelf:Te,ignore:Ce})=>{if(ft??(ft=!0),Te??(Te=!0),Ge==null){const ee=M(dt);if(!ee){console.error("[blocksManager] cannot get path of ",dt);return}Ge=ee.length-1}const we=(ee,oe)=>{const se=Ce==null?void 0:Ce(ee,oe);if(se!=="ignore-self-and-descendants"&&((Te||ee.id!=dt)&&ze(ee,oe),se!=="ignore-descendants"&&!(se!=="keep-self-and-descendants"&&ft&&ee.fold)&&typeof ee.childrenIds!="string")){for(let ge=0;ge<ee.childrenIds.length;ge++){const _e=ee.childrenIds[ge],ke=ee.childrenRefs[ge];if(ke.value){const Ee=toRaw(ke.value);we(Ee,oe+1)}else a.set(_e,ee.id),qe==null||qe(_e,ee.id,oe+1)}Xe&&Xe(ee,oe)}},ce=E(dt);if(!ce){console.error("[blocksManager] Cannot find root block",dt);return}we(ce,Ge)},I=({onEachBlock:ze,rootBlockId:qe,afterLeavingChildrens:dt,rootBlockLevel:Xe,nonFoldOnly:Ge,includeSelf:ft,ignore:Te})=>{if(Ge??(Ge=!0),ft??(ft=!0),Xe==null){const ce=M(qe);if(!ce){console.error("[blocksManager] cannot get path of ",qe);return}Xe=ce.length-1}const Ce=(ce,ee)=>{const oe=Te==null?void 0:Te(ce,ee);if(oe!=="ignore-self-and-descendants"&&((ft||ce.id!=qe)&&ze(ce,ee),oe!=="ignore-descendants"&&!(oe!=="keep-self-and-descendants"&&Ge&&ce.fold)&&typeof ce.childrenIds!="string")){for(const se of ce.childrenRefs)if(se.value&&!se.value.deleted){const ge=toRaw(se.value);Ce(ge,ee+1)}dt&&dt(ce,ee)}},we=E(qe);if(!we){console.error("[blocksManager] Cannot find root block",qe);return}Ce(we,Xe)},L=(ze,qe)=>{if(ze[0]===BLOCK_CONTENT_TYPES.TEXT){const dt=getPmSchema({getBlockRef:_}),Xe=Node$1.fromJSON(dt,ze[1]),Ge=[];return Xe.descendants(ft=>{!qe&&ft.type.name=="blockRef_v2"&&ft.attrs.tag||Ge.push(ft.textContent)}),Ge.join("")}else return ze[0]==BLOCK_CONTENT_TYPES.CODE?`${ze[1]} (${ze[2]})`:ze[0]==BLOCK_CONTENT_TYPES.MATH?ze[1]:(console.warn("[blocksManager] unsupported block content type"),"")},U=ze=>{const qe=Ge=>/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(Ge),dt=[],Xe=["specs","status","no","ncols","paragraph"];for(const[Ge,ft]of Object.entries(ze??{})){if(Xe.includes(Ge))continue;dt.push(Ge),dt.push(": ");let Te;if(typeof ft=="string")Te=[ft];else if(Array.isArray(ft))Te=ft;else continue;for(const Ce of Te){if(qe(Ce)){const we=E(Ce);if(!we)continue;const ce=L(we.content);dt.push(ce)}else dt.push(Ce);dt.push(", ")}dt.pop(),dt.push("; ")}return dt.pop(),dt.join("")},Z=(ze,qe="both")=>{const dt=getPmSchema({getBlockRef:_}),Xe=Node$1.fromJSON(dt,ze),Ge=[];return Xe.descendants(ft=>{ft.isAtom&&ft.type.name=="blockRef_v2"&&(qe==="blockRef"&&!ft.attrs.tag||qe==="tag"&&ft.attrs.tag||qe==="both")&&Ge.push(ft.attrs.toBlockId)}),Ge},K=async ze=>{const qe=x.getBlockInfo.get(ze);qe&&await qe.promise;let dt=s.get(ze)??null;if(!dt){let Xe,Ge;const ft=new Promise((Te,Ce)=>{Xe=Te,Ge=Ce});x.getBlockInfo.set(ze,{promise:ft,resolve:Xe,reject:Ge,desc:"getBlockInfo of "+ze}),await ft}return dt=s.get(ze)??null,dt},j=async(ze,qe)=>{const dt=x.getBlockData.get(ze);dt&&await dt.promise;let Xe;const Ge=E(ze);if(Ge?Xe=[Ge.content,Ge.metadata]:Xe=l.get(ze)??null,!Xe){c.has(qe)||(n.loadDataDoc(qe),c.add(qe));let ft,Te;const Ce=new Promise((we,ce)=>{ft=we,Te=ce});x.getBlockData.set(ze,{promise:Ce,resolve:ft,reject:Te,desc:"getBlockData of "+ze}),await Ce}return Xe=l.get(ze)??null,Xe};n.on("blockDataMapChange",({docId:ze,origin:qe,changes:dt})=>{const Xe=fe(qe);if(qe.type!="ui"){console.debug("[blocksManager] in app, blockDataMapChange",dayjs().valueOf(),dt);for(const Ge of dt)if(Ge.op=="upsert"){if(Ge.value==null){console.log("[blocksManager] invalid change (no value), ignored!");continue}l.set(Ge.key,Ge.value);const ft=x.getBlockData.get(Ge.key);ft&&(ft.resolve(Ge.value),x.getBlockData.delete(Ge.key));const Te=_(Ge.key);if(Te.value!=null&&Te.value.type==="normalBlock"){const[Ce,we]=Ge.value;if(Ce==null){console.error("[blocksManager] blockDataMap changed, but normal block doesn't have content",Ge.key);continue}Xe.updateBlock({...Te.value,content:Ce,metadata:we})}}else Ge.op=="delete"&&l.delete(Ge.key);Xe.patches.length>0&&Xe.commit(),k.value.set(`${BLOCK_DATA_DOC_NAME_PREFIX}${ze}`,"synced")}}),n.on("blockInfoMapChange",({origin:ze,changes:qe})=>{const dt=fe(ze);if(ze.type==="ui")return;console.debug("[blocksManager] in app, blockInfoMapChange",dayjs().valueOf(),qe);const Xe=[];for(const Ge of qe)if(Ge.op=="delete")s.delete(Ge.key),o.get(Ge.key)&&(console.debug("[blocksManager] Deleting block from loadedBlocks:",Ge.key),dt.deleteBlock(Ge.key));else if(Ge.op=="upsert"){if(Ge.value==null){console.log("[blocksManager] invalid change (no value), ignored!");continue}const[ft,Te,Ce,we,ce]=Ge.value,{type:ee,fold:oe}=extractBlockStatus(ft);if(s.set(Ge.key,Ge.value),ee=="normalBlock"){if(we==null||!Ge.value)continue;const se=(async()=>{const ge=await j(Ge.key,we);if(!ge){console.error("[blocksManager] Cannot find block data for block",Ge.key);return}dt.addBlock({type:"normalBlock",id:Ge.key,parentId:Te,childrenIds:Ce,fold:oe,content:ge[0],metadata:ge[1],docId:we})})();Xe.push(se)}else{if(!ce||!Ge.value)continue;const se=(async()=>{const ge=await K(ce);if(!ge){console.error("[blocksManager] Cannot find block info for block",ce);return}const[_e,ke,Ee,te]=ge,{type:re,fold:de}=extractBlockStatus(_e);if(re=="normalBlock"){if(te==null){console.error("[blocksManager] Src doc id is null, this should not happen",Ge.key);return}if(console.debug("[blocksManager] getBlockDataOrWait",ce,te),!await j(ce,te)){console.error("[blocksManager] Cannot find block data for block",ce);return}dt.addBlock({type:ee,id:Ge.key,parentId:Te,childrenIds:Ce,fold:oe,src:ce,...ee==="virtualBlock"?{childrenCreated:Ee.length==Ce.length}:{}})}else{console.error("[blocksManager] Src type must be normalBlock, but got",re);return}})();Xe.push(se)}}Promise.all(Xe).then(()=>{console.debug("[blocksManager] in app, all resolved",dayjs().valueOf()),dt.commit(),k.value.set(BLOCK_INFO_DOC_NAME,"synced"),b.value=!0,console.debug("[blocksManager] in app, transaction commit",dayjs().valueOf())})});const W=async()=>{const ze=nanoid(),qe=getPmSchema({getBlockRef:_});fe({type:"ui"}).addBlock({type:"normalBlock",id:ze,fold:!1,parentId:"root",childrenIds:[],content:plainTextToTextContent("This is a test block",qe),metadata:{}}).addBlock({type:"normalBlock",id:"root",fold:!1,parentId:"root",childrenIds:[ze],content:plainTextToTextContent("\u{1F44B} Welcome to Next Outliner!",qe),metadata:{}}).commit()},Y=()=>_("root"),G=()=>{o.clear(),x.getBlockInfo.clear(),x.getBlockData.clear(),e.emit("blocksDestroy")},{createBlockTransaction:fe,addBlock:le,updateBlock:pe,deleteBlock:ue}=useBlockTransaction({blocks:o,yjsLayer:n,latestBlockInfos:s,latestBlockDatas:l,getBlockRef:_,getCtext:L,getMtext:U,getOlinks:Z,mainRootBlockId:f,lastFocusedBlockTree:d,lastFocusedDiId:u}),{undo:Ne,redo:Ve,addUndoPoint:Ze,clearUndoRedoHistory:We}=createUndoManager({createBlockTransaction:fe,mainRootBlockId:f,getBlockTree:v});return{loadedBlocks:o,latestBlockInfos:s,latestBlockDatas:l,pendingTasks:x,missingBlockParents:a,synced:b,getBlock:E,getBlockRef:_,getRootBlockRef:Y,getBlockPath:M,getBlockLevel:V,forDescendants:I,forDescendantsWithMissingBlock:F,createBlockTransaction:fe,addBlock:le,updateBlock:pe,deleteBlock:ue,destroy:G,undo:Ne,redo:Ve,getCtext:L,getMtext:U,getOlinks:Z,getSrcBlock:B,createNewTree:W,addUndoPoint:Ze,clearUndoRedoHistory:We}},getActuralSrcBlock=(n,e)=>{if(n.type==="normalBlock")return n;if(n.type==="mirrorBlock"||n.type==="virtualBlock"){const o=e.getLatestBlock(n.src);if(!o)throw new Error(`Cannot get srcBlock, blockId=${n.id}`);return getActuralSrcBlock(o,e)}throw new Error("Invalid block type")},createBlocksEditor=(n,e,o)=>{const a=l=>{if("parentId"in l)if(typeof l.childIndex=="string"){const c=n.getBlock(l.parentId);return c?{parentId:l.parentId,childIndex:l.childIndex=="first"?0:l.childIndex=="last"?c.childrenIds.length-1:c.childrenIds.length}:null}else return l;else{const c=n.getBlock(l.baseBlockId);if(!c||c.id=="root")return null;const d=c.parentRef.value;if(!d)return null;const u=d.childrenIds.indexOf(l.baseBlockId);return{parentId:d.id,childIndex:Math.min(d.childrenIds.length,Math.max(0,u+l.offset))}}},s=(l,c)=>{const d=n.getBlock(l);d&&(c??(c=!d.fold),d.fold!=c&&(d.fold=c,n.updateBlock(d,{type:"ui"})))};return{normalizePos:a,changeBlockContent:l=>{let{blockId:c,content:d,tr:u,commit:f}=l;u??(u=n.createBlockTransaction({type:"ui",changeSources:[c]})),f??(f=!0);const v=o(),b=u.getLatestBlock(c),k=getActuralSrcBlock(b,u),x=v.getOccurs(k.id),_=n.getCtext(d),E=d[0]===BLOCK_CONTENT_TYPES.TEXT?n.getOlinks(d[1]):[],B=0;for(const M of x){const V=u.getLatestBlock(M);V&&(V.content=d,V.ctext=_,V.olinks=E,V.boosting=B,u.updateBlock(V))}f&&u.commit()},setBlockMetadata:l=>{let{blockId:c,metadata:d,tr:u,commit:f}=l;u??(u=n.createBlockTransaction({type:"ui",changeSources:[c]})),f??(f=!0);const v=o(),b=u.getLatestBlock(c),k=getActuralSrcBlock(b,u),x=v.getOccurs(k.id);for(const _ of x){const E=u.getLatestBlock(_);E&&(E.metadata=d,u.updateBlock(E))}f&&u.commit()},insertNormalBlock:l=>{let{pos:c,content:d,meta:u,childrenIds:f,tr:v,commit:b}=l;f??(f=[]),v??(v=n.createBlockTransaction({type:"ui"})),b??(b=!0);const k=o(),{parentId:x,childIndex:_}=a(c),E=v.getLatestBlock(x),B=getActuralSrcBlock(E,v);if(!B)return;const M=nanoid();v.addBlock({id:M,type:"normalBlock",parentId:x,childrenIds:f,fold:!0,content:d,metadata:u??{}}),B.childrenIds.splice(_,0,M),v.updateBlock(B);const V=k.getOccurs(B.id,!1);for(const F of V){const I=v.getLatestBlock(F);if(!I||I.type=="virtualBlock"&&!I.childrenCreated)continue;const L=nanoid();v.addBlock({id:L,type:"virtualBlock",childrenIds:[],fold:!0,parentId:I.id,src:M,childrenCreated:!1}),I.childrenIds.splice(_,0,L),v.updateBlock(I)}return E.fold&&(E.fold=!1,v.updateBlock(E)),b&&v.commit(),{newNormalBlockId:M}},insertNormalBlocks:l=>{let{pos:c,blocks:d,tr:u,commit:f}=l;if(d.length===0)return;u??(u=n.createBlockTransaction({type:"ui"})),f??(f=!0);const v=o(),{parentId:b,childIndex:k}=a(c),x=u.getLatestBlock(b),_=getActuralSrcBlock(x,u),E=d.map(M=>M.id??nanoid());d.forEach(({content:M,meta:V,childrenIds:F},I)=>{const L=E[I];u.addBlock({id:L,type:"normalBlock",parentId:b,childrenIds:F??[],fold:!1,content:M,metadata:V??{}})}),_.childrenIds.splice(k,0,...E),_.fold&&(_.fold=!1),u.updateBlock(_);const B=v.getOccurs(_.id,!1);for(const M of B){const V=u.getLatestBlock(M);if(!V||V.type=="virtualBlock"&&!V.childrenCreated)continue;const F=E.map(I=>{const L=nanoid();return u.addBlock({id:L,type:"virtualBlock",childrenIds:[],fold:!0,parentId:V.id,src:I,childrenCreated:!1}),L});V.childrenIds.splice(k,0,...F),u.updateBlock(V)}return x.fold&&(x.fold=!1,u.updateBlock(x)),f&&u.commit(),{newNormalBlockIds:E}},insertMirrorBlock:l=>{let{pos:c,srcBlockId:d,tr:u,commit:f}=l;u??(u=n.createBlockTransaction({type:"ui"})),f??(f=!0);const v=o(),{parentId:b,childIndex:k}=a(c),x=u.getLatestBlock(b),_=getActuralSrcBlock(x,u),E=u.getLatestBlock(d),B=getActuralSrcBlock(E,u),M=nanoid(),V=[];for(const L of B.childrenIds){const U=u.getLatestBlock(L);if(!U)continue;const Z={...U,id:nanoid(),parentId:M,type:"virtualBlock",fold:!0,src:L,acturalSrc:"src"in U?U.src:U.id,childrenCreated:!1};u.addBlock(Z),V.push(Z.id)}const F={...E,id:M,parentId:b,type:"mirrorBlock",childrenIds:V,fold:!0,src:d};u.addBlock(F),_.childrenIds.splice(k,0,F.id),u.updateBlock(_);const I=v.getOccurs(_.id,!1);for(const L of I){const U=u.getLatestBlock(L);if(!U)continue;const Z={...F,id:nanoid(),parentId:L,type:"virtualBlock",childrenIds:[],fold:!0,src:F.id,childrenCreated:!1};U.type==="virtualBlock"&&!U.childrenCreated||(U.childrenIds.splice(k,0,Z.id),u.updateBlock(U))}return x.fold&&(x.fold=!1,u.updateBlock(x)),f&&u.commit(),{}},deleteBlock:l=>{let{blockId:c,tr:d,commit:u}=l;u??(u=!0);const f=o();d??(d=n.createBlockTransaction({type:"ui"}));const v=d.getLatestBlock(c);if(!v){const x=n.missingBlockParents.get(c);if(!x)return;const _=d.getLatestBlock(x);if(!_)return;const E=_.childrenIds.indexOf(c);if(E<0)return;const B=getActuralSrcBlock(_,d),M=f.getOccurs(B.id,!0);for(const V of M){const F=d.getLatestBlock(V);F&&(F.childrenIds.splice(E,1),d.updateBlock(F))}d.commit();return}const b=[],k=x=>{if(x.type=="normalBlock"||x.type=="virtualBlock"){const _=getActuralSrcBlock(x,d),E=f.getOccurs(_.id,!0).map(B=>d.getLatestBlock(B)).filter(B=>B!=null);b.push(...E);for(const B of E)for(const M of B.childrenIds){const V=d.getLatestBlock(M);V&&k(V)}}else if(x.type=="mirrorBlock"){b.push(x);for(const _ of x.childrenIds){const E=d.getLatestBlock(_);E&&k(E)}}};k(v);for(const x of b)d.deleteBlock(x.id);if(v.type=="normalBlock"||v.type=="virtualBlock"){const x=d.getLatestBlock(v.parentId);if(!x)return;const _=getActuralSrcBlock(x,d),E=x.childrenIds.indexOf(v.id);if(E<0)return;const B=f.getOccurs(_.id,!0);for(const M of B){const V=d.getLatestBlock(M);V&&(V.childrenIds.splice(E,1),d.updateBlock(V))}}else{const x=d.getLatestBlock(v.parentId);if(!x)return;const _=x.childrenIds.indexOf(v.id);if(_<0)return;x.childrenIds.splice(_,1),d.updateBlock(x)}u&&d.commit()},promoteBlock:l=>{let{blockId:c,tr:d,commit:u}=l;d??(d=n.createBlockTransaction({type:"ui"})),u??(u=!0);const f=o(),v=d.getLatestBlock(c);if(v.id=="root")return{success:!1};const b=getActuralSrcBlock(v,d),k=d.getLatestBlock(v.parentId),x=getActuralSrcBlock(k,d),_=k.childrenIds.indexOf(v.id);if(_<=0)return{success:!1};const E=d.getLatestBlock(k.childrenIds[_-1]);if(!E)return{success:!1};const B=getActuralSrcBlock(E,d),M=x.childrenIds.splice(_,1)[0],V=d.getLatestBlock(M);if(!V)return{success:!1};d.updateBlock(x),B.childrenIds.push(M),d.updateBlock(B),V.parentId=B.id,d.updateBlock(V);const F=f.getOccurs(x.id,!1);for(const L of F){const U=d.getLatestBlock(L);if(!U||U.type=="virtualBlock"&&!U.childrenCreated)continue;const Z=U.childrenIds.splice(_,1)[0];d.updateBlock(U),d.deleteBlock(Z)}const I=f.getOccurs(B.id,!1);for(const L of I){const U=d.getLatestBlock(L);if(!U||U.type=="virtualBlock"&&!U.childrenCreated)continue;const Z={...b,id:nanoid(),parentId:U.id,type:"virtualBlock",fold:!0,src:b.id,childrenCreated:!1};U.childrenIds.push(Z.id),L==E.id&&(U.fold=!1),d.updateBlock(U),d.addBlock(Z)}return E.fold&&(E.fold=!1,d.updateBlock(E)),u&&d.commit(),{success:!0}},demoteBlock:l=>{let{blockId:c,tr:d,commit:u}=l;d??(d=n.createBlockTransaction({type:"ui"})),u??(u=!0);const f=o(),v=d.getLatestBlock(c);if(v.parentId=="null")return{success:!1};const b=getActuralSrcBlock(v,d),k=d.getLatestBlock(v.parentId);if(k.parentId=="null")return{success:!1};const x=getActuralSrcBlock(k,d),_=d.getLatestBlock(k.parentId),E=getActuralSrcBlock(_,d),B=x.childrenIds.indexOf(b.id),M=x.childrenIds.splice(B,1)[0],V=d.getLatestBlock(M);if(!V)return{success:!1};d.updateBlock(x);let F;k.type=="mirrorBlock"&&_.type=="normalBlock"?(F=_.childrenIds.indexOf(k.id),_.childrenIds.splice(F+1,0,M),d.updateBlock(_),V.parentId=_.id,d.updateBlock(V)):(F=E.childrenIds.indexOf(x.id),E.childrenIds.splice(F+1,0,M),d.updateBlock(E),V.parentId=E.id,d.updateBlock(V));const I=f.getOccurs(x.id,!1);for(const U of I){const Z=d.getLatestBlock(U);if(!Z||Z.type=="virtualBlock"&&!Z.childrenCreated)continue;const K=Z.childrenIds.splice(B,1)[0];d.updateBlock(Z),d.deleteBlock(K)}const L=f.getOccurs(E.id,!1);for(const U of L){const Z=d.getLatestBlock(U);if(!Z||Z.type=="virtualBlock"&&!Z.childrenCreated)continue;const K={...b,id:nanoid(),parentId:Z.id,type:"virtualBlock",fold:!0,src:b.id,childrenCreated:!1};Z.childrenIds.splice(F+1,0,K.id),d.updateBlock(Z),d.addBlock(K)}return u&&d.commit(),{success:!0}},toggleFold:s,moveBlock:l=>{let{blockId:c,pos:d,tr:u,commit:f}=l;f??(f=!0),u??(u=n.createBlockTransaction({type:"ui"}));const v=o(),{parentId:b,childIndex:k}=a(d),x=u.getLatestBlock(c),_=getActuralSrcBlock(x,u),E=u.getLatestBlock(_.parentId),B=u.getLatestBlock(b),M=getActuralSrcBlock(B,u),V=E.childrenIds.indexOf(_.id);if(V==-1)return null;let F;if(E.id===M.id?F=V<k?k-1:k:F=k,F<0||F>M.childrenIds.length)return null;if(E.id==M.id){if(V==k||V+1==k)return null;E.childrenIds.splice(V,1),E.childrenIds.splice(F,0,_.id),u.updateBlock(E)}else E.childrenIds.splice(V,1),u.updateBlock(E),M.childrenIds.splice(F,0,_.id),u.updateBlock(M),_.parentId=M.id,u.updateBlock(_);const I=v.getOccurs(E.id,!1);for(const U of I){const Z=u.getLatestBlock(U);if(!Z||Z.type=="virtualBlock"&&!Z.childrenCreated)continue;const K=Z.childrenIds.splice(V,1)[0];u.updateBlock(Z),u.deleteBlock(K)}const L=v.getOccurs(M.id,!1);for(const U of L){const Z=u.getLatestBlock(U);if(!Z||Z.type=="virtualBlock"&&!Z.childrenCreated)continue;const K={...structuredClone(_),id:nanoid(),parentId:Z.id,type:"virtualBlock",childrenIds:[],fold:!0,src:_.id,childrenCreated:!1};Z.childrenIds.splice(F,0,K.id),u.updateBlock(Z),u.addBlock(K)}return f&&u.commit(),{}},moveBlocks:l=>{let{blockIds:c,pos:d,tr:u,commit:f}=l;f??(f=!0),u??(u=n.createBlockTransaction({type:"ui"}));const v=o(),{parentId:b,childIndex:k}=a(d),x=c[0],_=u.getLatestBlock(x),E=u.getLatestBlock(_.parentId),B=E.childrenIds.indexOf(x);if(B==-1)return null;for(let U=1;U<c.length;U++){const Z=c[U],K=E.childrenIds[B+U];if(Z!==K)return null}const M=B+c.length-1,V=getActuralSrcBlock(E,u),F=u.getLatestBlock(b),I=getActuralSrcBlock(F,u);let L;if(V.id===I.id){if(k>=B&&k<=M+1)return null;L=V.childrenIds.splice(B,c.length);const U=k<B?k:k-c.length;V.childrenIds.splice(U,0,...L),u.updateBlock(V);const Z=v.getOccurs(V.id,!1);for(const K of Z){const j=u.getLatestBlock(K);if(!j||j.type=="virtualBlock"&&!j.childrenCreated)continue;const W=j.childrenIds.splice(B,c.length);j.childrenIds.splice(U,0,...W),u.updateBlock(j)}}else{L=V.childrenIds.splice(B,c.length),u.updateBlock(V),I.childrenIds.splice(k,0,...L),u.updateBlock(I);for(const K of L){const j=u.getLatestBlock(K);j&&(j.parentId=I.id,u.updateBlock(j))}const U=v.getOccurs(V.id,!1);for(const K of U){const j=u.getLatestBlock(K);!j||j.type=="virtualBlock"&&!j.childrenCreated||(j.childrenIds.splice(B,c.length),u.updateBlock(j))}const Z=v.getOccurs(I.id,!1);for(const K of Z){const j=u.getLatestBlock(K);if(!j||j.type=="virtualBlock"&&!j.childrenCreated)continue;const W=[];for(const Y of L){const G=u.getLatestBlock(Y);if(!G)continue;const fe={...G,id:nanoid(),parentId:j.id,type:"virtualBlock",childrenIds:[],fold:!0,src:G.id,childrenCreated:!1};W.push(fe.id),u.addBlock(fe)}j.childrenIds.splice(k,0,...W),u.updateBlock(j)}}return f&&u.commit(),{}},locateBlock:async(l,c)=>{const d=[e.value],u=n.getBlockPath(l);if(u==null)return;let f,v;for(const b of d)if(v=u.findIndex(k=>k.id===b),v!=-1){f=b;break}if(f&&v!=null&&v>0)for(let b=v;b>0;b--){const k=u[b];k.fold&&await s(k.id,!1)}else{if((c==null?void 0:c.getId())!=="main")return;const b=n.getBlockPath(d[0]);if(!b)return;let k=b.length-1,x=u.length-1;for(;k>=0&&x>=0&&b[k].id==u[x].id;)k--,x--;const _=k<0?b[0]:x<0?u[0]:b[k+1],E=k<0?u.slice(0,x+1):x<0?b.slice(0,k+1):u.slice(x);e.value=_.id;for(const B of E)B.fold&&await s(B.id,!1)}}}},kbViewRegistry=createContext(()=>{const n={};return{register:(e,o)=>{n[e]=o},get:e=>n[e]}}),BlocksContext=createContext(()=>{const n=useRouterParams(),{token:e}=ServerInfoContext.useContext(),{get:o}=kbViewRegistry.useContext(),{mainRootBlockId:a}=MainTreeContext.useContext(),s=()=>o("index"),l=createSyncLayer(),c=createBlocksManager(l),d=createBlocksEditor(c,a,s);return watch(n,u=>{l.disconnect();const{serverUrl:f,location:v}=u??{};!f||!v||!e.value||l.connect(decodeURIComponent(f),decodeURIComponent(v),e.value)},{immediate:!0}),{blocksManager:c,blockEditor:d,syncLayer:l,synced:c.synced}}),FocusModeContext=createContext(()=>{const n=ref(!1),e=ref(!1);return{focusModeEnabled:n,focusNow:e}}),SPACE_OR_PUNCTUATION=/[|\n\r\s!"'&()*,\-./:;<=>?@[\\\]^_`{}~\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u,CJK=/[\u4E00-\u9FA5]/,ngramSplit=(n,e)=>{const o=[];for(let a=0;a<n.length-e+1;a++)o.push(n.slice(a<0?0:a,a+e));return o},extractAllPrefixies=n=>{const e=[];for(let o=1;o<=n.length;o++)e.push(n.slice(0,o));return e},splitByCjk=(n,e,o,a={})=>{let s=!1;const l=[],c=(d,u)=>{a.caseSensitive||(d=d.toLowerCase()),u?e(d):o(d)};for(const d of n)if(SPACE_OR_PUNCTUATION.test(d))l.length>0&&(c(l.join(""),s),l.length=0);else if(l.length==0)l.push(d),s=CJK.test(d);else{const u=CJK.test(d);u!=s?(c(l.join(""),s),l.length=0,l.push(d),s=u):l.push(d)}l.length>0&&c(l.join(""),s)},hybridTokenize=(n,e=!1,o=2,a=!0)=>{const s=[];return splitByCjk(n,l=>s.push(...ngramSplit(l,o)),l=>{s.push(l),a&&s.push(...extractAllPrefixies(l).slice(0,-1))},{caseSensitive:e}),s},calcMatchScore=(n,e)=>{let o=0;const a=e.toLowerCase();for(const s of n)a.includes(s)&&(o+=s.length);return o/e.length};function parse_option(n,e){return typeof n<"u"?n:e}function create_object_array(n){const e=Array(n);for(let o=0;o<n;o++)e[o]=create_object();return e}function get_keys(n){return Object.keys(n)}function create_object(){return Object.create(null)}function concat(n){return[].concat.apply([],n)}function sort_by_length_down(n,e){return e.length-n.length}function is_array(n){return n.constructor===Array}function is_string(n){return typeof n=="string"}function is_object(n){return typeof n=="object"}function is_function(n){return typeof n=="function"}function pipeline(n,e,o,a){if(n&&(e&&(n=replace(n,e)),this.matcher&&(n=replace(n,this.matcher)),this.stemmer&&1<n.length&&(n=replace(n,this.stemmer)),a&&1<n.length&&(n=collapse(n)),o||o==="")){const s=n.split(o);return this.filter?filter(s,this.filter):s}return n}const regex_whitespace=/[\p{Z}\p{S}\p{P}\p{C}]+/u;function init_filter(n){const e=create_object();for(let o=0,a=n.length;o<a;o++)e[n[o]]=1;return e}function init_stemmer_or_matcher(n,e){const o=get_keys(n),a=o.length,s=[];let l="",c=0;for(let d=0,u,f;d<a;d++)u=o[d],f=n[u],f?(s[c++]=regex(e?"(?!\\b)"+u+"(\\b|_)":u),s[c++]=f):l+=(l?"|":"")+u;return l&&(s[c++]=regex(e?"(?!\\b)("+l+")(\\b|_)":"("+l+")"),s[c]=""),s}function replace(n,e){for(let o=0,a=e.length;o<a&&(n=n.replace(e[o],e[o+1]),!!n);o+=2);return n}function regex(n){return new RegExp(n,"g")}function collapse(n){let e="",o="";for(let a=0,s=n.length,l;a<s;a++)(l=n[a])!==o&&(e+=o=l);return e}function filter(n,e){const o=n.length,a=[];for(let s=0,l=0;s<o;s++){const c=n[s];c&&!e[c]&&(a[l++]=c)}return a}function encode(n){return pipeline.call(this,(""+n).toLowerCase(),!1,regex_whitespace,!1)}const global_lang={},global_charset={};function apply_async(n){register$1(n,"add"),register$1(n,"append"),register$1(n,"search"),register$1(n,"update"),register$1(n,"remove")}function register$1(n,e){n[e+"Async"]=function(){const o=this,a=arguments,s=a[a.length-1];let l;is_function(s)&&(l=s,delete a[a.length-1]);const c=new Promise(function(d){setTimeout(function(){o.async=!0;const u=o[e].apply(o,a);o.async=!1,d(u)})});return l?(c.then(l),this):c}}function intersect(n,e,o,a){const s=n.length;let l=[],c,d,u=0;a&&(a=[]);for(let f=s-1;0<=f;f--){const v=n[f],b=v.length,k=create_object();let x=!c;for(let _=0;_<b;_++){const E=v[_],B=E.length;if(B)for(let M=0,V,F;M<B;M++)if(F=E[M],c){if(c[F]){if(!f){if(o)o--;else if(l[u++]=F,u===e)return l}(f||a)&&(k[F]=1),x=!0}if(a&&(V=(d[F]||0)+1,d[F]=V,V<s)){const I=a[V-2]||(a[V-2]=[]);I[I.length]=F}}else k[F]=1}if(a)c||(d=k);else if(!x)return[];c=k}if(a)for(let f=a.length-1,v,b;0<=f;f--){v=a[f],b=v.length;for(let k=0,x;k<b;k++)if(x=v[k],!c[x]){if(o)o--;else if(l[u++]=x,u===e)return l;c[x]=1}}return l}function intersect_union(n,e){const o=create_object(),a=create_object(),s=[];for(let l=0;l<n.length;l++)o[n[l]]=1;for(let l=0,c;l<e.length;l++){c=e[l];for(let d=0,u;d<c.length;d++)u=c[d],o[u]&&(a[u]||(a[u]=1,s[s.length]=u))}return s}function CacheClass(n){this.limit=n!==!0&&n,this.cache=create_object(),this.queue=[]}function searchCache(n,e,o){is_object(n)&&(n=n.query);let a=this.cache.get(n);return a||(a=this.search(n,e,o),this.cache.set(n,a)),a}CacheClass.prototype.set=function(n,e){if(!this.cache[n]){let o=this.queue.length;o===this.limit?delete this.cache[this.queue[o-1]]:o++;for(let a=o-1;0<a;a--)this.queue[a]=this.queue[a-1];this.queue[0]=n}this.cache[n]=e},CacheClass.prototype.get=function(n){const e=this.cache[n];if(this.limit&&e){const o=this.queue.indexOf(n);if(o){const a=this.queue[o-1];this.queue[o-1]=this.queue[o],this.queue[o]=a}}return e},CacheClass.prototype.del=function(n){for(let e=0,o,a;e<this.queue.length;e++)a=this.queue[e],o=this.cache[a],o.includes(n)&&(this.queue.splice(e--,1),delete this.cache[a])};const preset={memory:{charset:"latin:extra",resolution:3,minlength:4,fastupdate:!1},performance:{resolution:3,minlength:3,optimize:!1,context:{depth:2,resolution:1}},match:{charset:"latin:extra",tokenize:"reverse"},score:{charset:"latin:advanced",resolution:20,minlength:3,context:{depth:3,resolution:9}},default:{}};function apply_preset(n){if(is_string(n))n=preset[n];else{const e=n.preset;e&&(n=Object.assign({},e[e],n))}return n}function async(n,e,o,a,s,l,c,d){setTimeout(function(){const u=n(o?o+"."+a:a,JSON.stringify(c));u&&u.then?u.then(function(){e.export(n,e,o,s,l+1,d)}):e.export(n,e,o,s,l+1,d)})}function exportIndex(n,e,o,a,s,l){let c=!0;typeof l>"u"&&(c=new Promise(f=>{l=f}));let d,u;switch(s||(s=0)){case 0:if(d="reg",this.fastupdate){u=create_object();for(let f in this.register)u[f]=1}else u=this.register;break;case 1:d="cfg",u={doc:0,opt:this.optimize?1:0};break;case 2:d="map",u=this.map;break;case 3:d="ctx",u=this.ctx;break;default:typeof o>"u"&&l&&l();return}return async(n,e||this,o,d,a,s,u,l),c}function importIndex(n,e){if(e)switch(is_string(e)&&(e=JSON.parse(e)),n){case"cfg":this.optimize=!!e.opt;break;case"reg":this.fastupdate=!1,this.register=e;break;case"map":this.map=e;break;case"ctx":this.ctx=e;break}}function exportDocument(n,e,o,a,s,l){let c;if(typeof l>"u"&&(c=new Promise(d=>{l=d})),s||(s=0),a||(a=0),a<this.field.length){const d=this.field[a],u=this.index[d];e=this,setTimeout(function(){u.export(n,e,s?d:"",a,s++,l)||(a++,s=1,e.export(n,e,d,a,s,l))})}else{let d,u;switch(s){case 1:d="tag",u=this.tagindex,o=null;break;case 2:d="store",u=this.store,o=null;break;default:l();return}async(n,this,o,d,a,s,u,l)}return c}function importDocument(n,e){if(e)switch(is_string(e)&&(e=JSON.parse(e)),n){case"tag":this.tagindex=e;break;case"reg":this.fastupdate=!1,this.register=e;for(let a=0,s;a<this.field.length;a++)s=this.index[this.field[a]],s.register=e,s.fastupdate=!1;break;case"store":this.store=e;break;default:n=n.split(".");const o=n[0];n=n[1],o&&n&&this.index[o].import(n,e)}}function Index(n,e){if(!(this instanceof Index))return new Index(n);let o,a,s;n?(n=apply_preset(n),o=n.charset,a=n.lang,is_string(o)&&(o.indexOf(":")===-1&&(o+=":default"),o=global_charset[o]),is_string(a)&&(a=global_lang[a])):n={};let l,c,d=n.context||{};this.encode=n.encode||o&&o.encode||encode,this.register=e||create_object(),this.resolution=l=n.resolution||9,this.tokenize=s=o&&o.tokenize||n.tokenize||"strict",this.depth=s==="strict"&&d.depth,this.bidirectional=parse_option(d.bidirectional,!0),this.optimize=c=parse_option(n.optimize,!0),this.fastupdate=parse_option(n.fastupdate,!0),this.minlength=n.minlength||1,this.boost=n.boost,this.map=c?create_object_array(l):create_object(),this.resolution_ctx=l=d.resolution||1,this.ctx=c?create_object_array(l):create_object(),this.rtl=o&&o.rtl||n.rtl,this.matcher=(s=n.matcher||a&&a.matcher)&&init_stemmer_or_matcher(s,!1),this.stemmer=(s=n.stemmer||a&&a.stemmer)&&init_stemmer_or_matcher(s,!0),this.filter=(s=n.filter||a&&a.filter)&&init_filter(s),this.cache=(s=n.cache)&&new CacheClass(s)}Index.prototype.append=function(n,e){return this.add(n,e,!0)},Index.prototype.add=function(n,e,o,a){if(e&&(n||n===0)){if(!a&&!o&&this.register[n])return this.update(n,e);e=this.encode(""+e);const s=e.length;if(s){const l=create_object(),c=create_object(),d=this.depth,u=this.resolution;for(let f=0;f<s;f++){let v=e[this.rtl?s-1-f:f],b=v.length;if(v&&b>=this.minlength&&(d||!c[v])){let k=get_score(u,s,f),x="";switch(this.tokenize){case"full":if(2<b){for(let _=0;_<b;_++)for(let E=b;E>_;E--)if(E-_>=this.minlength){const B=get_score(u,s,f,b,_);x=v.substring(_,E),this.push_index(c,x,B,n,o)}break}case"reverse":if(1<b){for(let _=b-1;0<_;_--)if(x=v[_]+x,x.length>=this.minlength){const E=get_score(u,s,f,b,_);this.push_index(c,x,E,n,o)}x=""}case"forward":if(1<b){for(let _=0;_<b;_++)x+=v[_],x.length>=this.minlength&&this.push_index(c,x,k,n,o);break}default:if(this.boost&&(k=Math.min(0|k/this.boost(e,v,f),u-1)),this.push_index(c,v,k,n,o),d&&1<s&&f<s-1){const _=create_object(),E=this.resolution_ctx,B=v,M=Math.min(d+1,s-f);_[B]=1;for(let V=1;V<M;V++)if(v=e[this.rtl?s-1-f-V:f+V],v&&v.length>=this.minlength&&!_[v]){_[v]=1;const F=get_score(E+(s/2>E?0:1),s,f,M-1,V-1),I=this.bidirectional&&v>B;this.push_index(l,I?B:v,F,n,o,I?v:B)}}}}}this.fastupdate||(this.register[n]=1)}}return this};function get_score(n,e,o,a,s){return o&&1<n?e+(a||0)<=n?o+(s||0):0|(n-1)/(e+(a||0))*(o+(s||0))+1:0}Index.prototype.push_index=function(n,e,o,a,s,l){let c=l?this.ctx:this.map;if((!n[e]||l&&!n[e][l])&&(this.optimize&&(c=c[o]),l?(n=n[e]||(n[e]=create_object()),n[l]=1,c=c[l]||(c[l]=create_object())):n[e]=1,c=c[e]||(c[e]=[]),this.optimize||(c=c[o]||(c[o]=[])),(!s||!c.includes(a))&&(c[c.length]=a,this.fastupdate))){const d=this.register[a]||(this.register[a]=[]);d[d.length]=c}},Index.prototype.search=function(n,e,o){o||(!e&&is_object(n)?(o=n,n=o.query):is_object(e)&&(o=e));let a=[],s,l,c,d=0;if(o&&(n=o.query||n,e=o.limit,d=o.offset||0,l=o.context,c=o.suggest),n&&(n=this.encode(""+n),s=n.length,1<s)){const b=create_object(),k=[];for(let x=0,_=0,E;x<s;x++)if(E=n[x],E&&E.length>=this.minlength&&!b[E]){if(!this.optimize&&!c&&!this.map[E])return a;k[_++]=E,b[E]=1}n=k,s=n.length}if(!s)return a;e||(e=100);let u=this.depth&&1<s&&l!==!1,f=0,v;u?(v=n[0],f=1):1<s&&n.sort(sort_by_length_down);for(let b,k;f<s;f++){if(k=n[f],u?(b=this.add_result(a,c,e,d,s===2,k,v),(!c||b!==!1||!a.length)&&(v=k)):b=this.add_result(a,c,e,d,s===1,k),b)return b;if(c&&f==s-1){let x=a.length;if(x){if(x===1)return single_result(a[0],e,d)}else{if(u){u=0,f=-1;continue}return a}}}return intersect(a,e,d,c)},Index.prototype.add_result=function(n,e,o,a,s,l,c){let d=[],u=c?this.ctx:this.map;if(this.optimize||(u=get_array(u,l,c,this.bidirectional)),u){let f=0;const v=Math.min(u.length,c?this.resolution_ctx:this.resolution);for(let b=0,k=0,x,_;b<v&&(x=u[b],!(x&&(this.optimize&&(x=get_array(x,l,c,this.bidirectional)),a&&x&&s&&(_=x.length,_<=a?(a-=_,x=null):(x=x.slice(a),a=0)),x&&(d[f++]=x,s&&(k+=x.length,k>=o)))));b++);if(f){if(s)return single_result(d,o,0);n[n.length]=d;return}}return!e&&d};function single_result(n,e,o){return n.length===1?n=n[0]:n=concat(n),o||n.length>e?n.slice(o,o+e):n}function get_array(n,e,o,a){if(o){const s=a&&e>o;n=n[s?e:o],n=n&&n[s?o:e]}else n=n[e];return n}Index.prototype.contain=function(n){return!!this.register[n]},Index.prototype.update=function(n,e){return this.remove(n).add(n,e)},Index.prototype.remove=function(n,e){const o=this.register[n];if(o){if(this.fastupdate)for(let a=0,s;a<o.length;a++)s=o[a],s.splice(s.indexOf(n),1);else remove_index(this.map,n,this.resolution,this.optimize),this.depth&&remove_index(this.ctx,n,this.resolution_ctx,this.optimize);e||delete this.register[n],this.cache&&this.cache.del(n)}return this};function remove_index(n,e,o,a,s){let l=0;if(is_array(n))if(s){const c=n.indexOf(e);c!==-1?1<n.length&&(n.splice(c,1),l++):l++}else{s=Math.min(n.length,o);for(let c=0,d;c<s;c++)d=n[c],d&&(l=remove_index(d,e,o,a,s),!a&&!l&&delete n[c])}else for(let c in n)l=remove_index(n[c],e,o,a,s),l||delete n[c];return l}Index.prototype.searchCache=searchCache,Index.prototype.export=exportIndex,Index.prototype.import=importIndex,apply_async(Index.prototype);function handler(n){n=n.data;const e=self._index,o=n.args,a=n.task;switch(a){case"init":const s=n.options||{},l=n.factory,c=s.encode;s.cache=!1,c&&c.indexOf("function")===0&&(s.encode=Function("return "+c)()),l?(Function("return "+l)()(self),self._index=new self.FlexSearch.Index(s),delete self.FlexSearch):self._index=new Index(s);break;default:const d=n.id,u=e[a].apply(e,o);postMessage(a==="search"?{id:d,msg:u}:{id:d})}}let pid=0;function WorkerIndex(n){if(!(this instanceof WorkerIndex))return new WorkerIndex(n);let e;n?is_function(e=n.encode)&&(n.encode=e.toString()):n={};let o=(self||window)._factory;o&&(o=o.toString());const a=typeof window>"u"&&self.exports,s=this;this.worker=create(o,a,n.worker),this.resolver=create_object(),this.worker&&(a?this.worker.on("message",function(l){s.resolver[l.id](l.msg),delete s.resolver[l.id]}):this.worker.onmessage=function(l){l=l.data,s.resolver[l.id](l.msg),delete s.resolver[l.id]},this.worker.postMessage({task:"init",factory:o,options:n}))}register("add"),register("append"),register("search"),register("update"),register("remove");function register(n){WorkerIndex.prototype[n]=WorkerIndex.prototype[n+"Async"]=function(){const e=this,o=[].slice.call(arguments),a=o[o.length-1];let s;is_function(a)&&(s=a,o.splice(o.length-1,1));const l=new Promise(function(c){setTimeout(function(){e.resolver[++pid]=c,e.worker.postMessage({task:n,id:pid,args:o})})});return s?(l.then(s),this):l}}function create(factory,is_node_js,worker_path){let worker;try{worker=is_node_js?eval('new (require("worker_threads")["Worker"])(__dirname + "/node/node.js")'):factory?new Worker(URL.createObjectURL(new Blob(["onmessage="+handler.toString()],{type:"text/javascript"}))):new Worker(is_string(worker_path)?worker_path:"worker/worker.js",{type:"module"})}catch(n){}return worker}function Document(n){if(!(this instanceof Document))return new Document(n);const e=n.document||n.doc||n;let o;this.tree=[],this.field=[],this.marker=[],this.register=create_object(),this.key=(o=e.key||e.id)&&parse_tree(o,this.marker)||"id",this.fastupdate=parse_option(n.fastupdate,!0),this.storetree=(o=e.store)&&o!==!0&&[],this.store=o&&create_object(),this.tag=(o=e.tag)&&parse_tree(o,this.marker),this.tagindex=o&&create_object(),this.cache=(o=n.cache)&&new CacheClass(o),n.cache=!1,this.worker=n.worker,this.async=!1,this.index=parse_descriptor.call(this,n,e)}function parse_descriptor(n,e){const o=create_object();let a=e.index||e.field||e;is_string(a)&&(a=[a]);for(let s=0,l,c;s<a.length;s++)l=a[s],is_string(l)||(c=l,l=l.field),c=is_object(c)?Object.assign({},n,c):n,this.worker&&(o[l]=new WorkerIndex(c),o[l].worker||(this.worker=!1)),this.worker||(o[l]=new Index(c,this.register)),this.tree[s]=parse_tree(l,this.marker),this.field[s]=l;if(this.storetree){let s=e.store;is_string(s)&&(s=[s]);for(let l=0;l<s.length;l++)this.storetree[l]=parse_tree(s[l],this.marker)}return o}function parse_tree(n,e){const o=n.split(":");let a=0;for(let s=0;s<o.length;s++)n=o[s],0<=n.indexOf("[]")&&(n=n.substring(0,n.length-2),n&&(e[a]=!0)),n&&(o[a++]=n);return a<o.length&&(o.length=a),1<a?o:o[0]}function parse_simple(n,e){if(is_string(e))n=n[e];else for(let o=0;n&&o<e.length;o++)n=n[e[o]];return n}function store_value(n,e,o,a,s){if(n=n[s],a===o.length-1)e[s]=n;else if(n)if(is_array(n)){e=e[s]=Array(n.length);for(let l=0;l<n.length;l++)store_value(n,e,o,a,l)}else e=e[s]||(e[s]=create_object()),s=o[++a],store_value(n,e,o,a,s)}function add_index(n,e,o,a,s,l,c,d){if(n=n[c],n)if(a===e.length-1){if(is_array(n)){if(o[a]){for(let u=0;u<n.length;u++)s.add(l,n[u],!0,!0);return}n=n.join(" ")}s.add(l,n,d,!0)}else if(is_array(n))for(let u=0;u<n.length;u++)add_index(n,e,o,a,s,l,u,d);else c=e[++a],add_index(n,e,o,a,s,l,c,d)}Document.prototype.add=function(n,e,o){if(is_object(n)&&(e=n,n=parse_simple(e,this.key)),e&&(n||n===0)){if(!o&&this.register[n])return this.update(n,e);for(let a=0,s,l;a<this.field.length;a++)l=this.field[a],s=this.tree[a],is_string(s)&&(s=[s]),add_index(e,s,this.marker,0,this.index[l],n,s[0],o);if(this.tag){let a=parse_simple(e,this.tag),s=create_object();is_string(a)&&(a=[a]);for(let l=0,c,d;l<a.length;l++)if(c=a[l],!s[c]&&(s[c]=1,d=this.tagindex[c]||(this.tagindex[c]=[]),(!o||!d.includes(n))&&(d[d.length]=n,this.fastupdate))){const u=this.register[n]||(this.register[n]=[]);u[u.length]=d}}if(this.store&&(!o||!this.store[n])){let a;if(this.storetree){a=create_object();for(let s=0,l;s<this.storetree.length;s++)l=this.storetree[s],is_string(l)?a[l]=e[l]:store_value(e,a,l,0,l[0])}this.store[n]=a||e}}return this},Document.prototype.append=function(n,e){return this.add(n,e,!0)},Document.prototype.update=function(n,e){return this.remove(n).add(n,e)},Document.prototype.remove=function(n){if(is_object(n)&&(n=parse_simple(n,this.key)),this.register[n]){for(let e=0;e<this.field.length&&(this.index[this.field[e]].remove(n,!this.worker),!this.fastupdate);e++);if(this.tag&&!this.fastupdate)for(let e in this.tagindex){const o=this.tagindex[e],a=o.indexOf(n);a!==-1&&(1<o.length?o.splice(a,1):delete this.tagindex[e])}this.store&&delete this.store[n],delete this.register[n]}return this},Document.prototype.search=function(n,e,o,a){o||(!e&&is_object(n)?(o=n,n=""):is_object(e)&&(o=e,e=0));let s=[],l=[],c,d,u,f,v,b,k=0;if(o)if(is_array(o))u=o,o=null;else{if(n=o.query||n,c=o.pluck,u=c||o.index||o.field,f=o.tag,d=this.store&&o.enrich,v=o.bool==="and",e=o.limit||e||100,b=o.offset||0,f&&(is_string(f)&&(f=[f]),!n)){for(let _=0,E;_<f.length;_++)E=get_tag.call(this,f[_],e,b,d),E&&(s[s.length]=E,k++);return k?s:[]}is_string(u)&&(u=[u])}u||(u=this.field),v=v&&(1<u.length||f&&1<f.length);const x=!a&&(this.worker||this.async)&&[];for(let _=0,E,B,M;_<u.length;_++){let V;if(B=u[_],is_string(B)||(V=B,B=V.field,n=V.query||n,e=V.limit||e,d=V.enrich||d),x){x[_]=this.index[B].searchAsync(n,e,V||o);continue}else a?E=a[_]:E=this.index[B].search(n,e,V||o);if(M=E&&E.length,f&&M){const F=[];let I=0;v&&(F[0]=[E]);for(let L=0,U,Z;L<f.length;L++)U=f[L],Z=this.tagindex[U],M=Z&&Z.length,M&&(I++,F[F.length]=v?[Z]:Z);I&&(v?E=intersect(F,e||100,b||0):E=intersect_union(E,F),M=E.length)}if(M)l[k]=B,s[k++]=E;else if(v)return[]}if(x){const _=this;return new Promise(function(E){Promise.all(x).then(function(B){E(_.search(n,e,o,B))})})}if(!k)return[];if(c&&(!d||!this.store))return s[0];for(let _=0,E;_<l.length;_++){if(E=s[_],E.length&&d&&(E=apply_enrich.call(this,E)),c)return E;s[_]={field:l[_],result:E}}return s};function get_tag(n,e,o){let a=this.tagindex[n];a&&a.length-o}function apply_enrich(n){const e=Array(n.length);for(let o=0,a;o<n.length;o++)a=n[o],e[o]={id:a,doc:this.store[a]};return e}Document.prototype.contain=function(n){return!!this.register[n]},Document.prototype.get=function(n){return this.store[n]},Document.prototype.set=function(n,e){return this.store[n]=e,this},Document.prototype.searchCache=searchCache,Document.prototype.export=exportDocument,Document.prototype.import=importDocument,apply_async(Document.prototype);const IndexContext=createContext(()=>{const n=useEventBus(),{blocksManager:e}=BlocksContext.useContext(),{register:o}=kbViewRegistry.useContext(),a=shallowReactive(new Map),s=shallowReactive(new Map),l=(F,I,L)=>{L=L||a;const U=L.get(F);U?U.add(I):L.set(F,new Set([I]))},c=(F,I,L)=>{L=L||s;const U=L.get(F);U?U.add(I):L.set(F,new Set([I]))},d=(F,I,L)=>{L=L||a;const U=L.get(F);U&&(U.delete(I),U.size==0&&L.delete(F))},u=(F,I,L)=>{L=L||s;const U=L.get(F);U&&(U.delete(I),U.size==0&&L.delete(F))},f=F=>a.get(F)??new Set,v=F=>s.get(F)??new Set,b=(F,I=!0)=>{const L=[];return L.push(...f(F)),L.push(...v(F)),I&&L.push(F),L};n.on("afterBlocksTrCommit",([F])=>{for(let I=0;I<F.patches.length;I++){const L=F.patches[I],U=F.reversePatches[I];if(L.op==="add"){const Z=L.block;Z.type==="mirrorBlock"?l(Z.src,Z.id):Z.type==="virtualBlock"&&c(Z.src,Z.id)}else if(L.op==="delete"&&U.op==="add"){const Z=U.block;Z.type==="mirrorBlock"?d(Z.src,Z.id):Z.type==="virtualBlock"&&u(Z.src,Z.id)}}}),n.on("blocksDestroy",()=>{a.clear(),s.clear()});const k=ref({}),x=ref({});n.on("afterBlocksTrCommit",([F])=>{var I,L,U,Z;for(let K=0;K<F.patches.length;K++){const j=F.patches[K],W=F.reversePatches[K];if(j.op==="delete"){if(delete k.value[j.blockId],delete x.value[j.blockId],W.op!=="add")continue;const Y=W.block;if(Y.type!=="normalBlock"||Y.content[0]!==BLOCK_CONTENT_TYPES.TEXT)continue;const G=e.getOlinks(Y.content[1]);for(const fe of G)(I=k.value[fe])==null||I.delete(Y.id),(L=x.value[fe])==null||L.delete(Y.id)}else if(j.op==="add"||j.op==="update"){const Y=j.block;if(Y.type!=="normalBlock"||Y.content[0]!==BLOCK_CONTENT_TYPES.TEXT)continue;const G=W.op==="delete"?[]:W.block.type!=="normalBlock"||W.block.content[0]!==BLOCK_CONTENT_TYPES.TEXT?[]:e.getOlinks(W.block.content[1],"blockRef"),fe=W.op==="delete"?[]:W.block.type!=="normalBlock"||W.block.content[0]!==BLOCK_CONTENT_TYPES.TEXT?[]:e.getOlinks(W.block.content[1],"tag"),le=e.getOlinks(Y.content[1],"blockRef"),pe=e.getOlinks(Y.content[1],"tag"),ue=le.filter(We=>!G.includes(We)),Ne=G.filter(We=>!le.includes(We));for(const We of ue)k.value[We]=(k.value[We]??new Set).add(Y.id);for(const We of Ne)(U=k.value[We])==null||U.delete(Y.id);const Ve=pe.filter(We=>!fe.includes(We)),Ze=fe.filter(We=>!pe.includes(We));for(const We of Ve)x.value[We]=(x.value[We]??new Set).add(Y.id);for(const We of Ze)(Z=x.value[We])==null||Z.delete(Y.id)}}}),n.on("blocksDestroy",()=>{k.value={},x.value={}});const _=(F,I="both")=>{if(I==="blockRef")return k.value[F]??new Set;if(I==="tag")return x.value[F]??new Set;{const L=k.value[F]??new Set,U=x.value[F]??new Set;return new Set([...L,...U])}},E=new Document({document:{id:"id",index:"text",store:["text"]},encode:F=>hybridTokenize(F)}),B=new Set;n.on("afterBlocksTrCommit",([F])=>{for(const I of F.patches)I.op==="delete"?B.add(I.blockId):B.add(I.block.id)}),n.on("blocksDestroy",()=>{B.clear()});const M=()=>{if(B.size!==0){for(const F of B){const I=e.getBlock(F);if(I==null&&E.contain(F))E.remove(F);else if(I&&I.type==="normalBlock"){E.contain(F)&&E.remove(F);const L=I.ctext+" "+I.mtext;E.add(F,{id:F,text:L})}}B.clear()}},V={fulltextIndex:E,blockRefsIndex:k,tagIndex:x,search:(F,I=50)=>{var K,j;M();const L=(j=(K=E.search(F,{limit:I,enrich:!0}))==null?void 0:K[0])==null?void 0:j.result;if(!L)return[];const U=hybridTokenize(F,!1,1,!1),Z=L.map(W=>{const Y=calcMatchScore(U,W.doc.text);return{id:W.id,score:Y}});return Z.sort((W,Y)=>Y.score-W.score),Z.map(W=>W.id)},getMirrors:f,getVirtuals:v,getOccurs:b,getBacklinks:_};return o("index",V),V}),FusionCommandContext=createContext(()=>{const{blocksManager:n}=BlocksContext.useContext(),{search:e}=IndexContext.useContext(),o=ref(""),a=computed(()=>o.value.startsWith("/")?"searchCommand":"searchBlock"),s=ref([]),l=ref(-1),c=ref(null),d=ref(!1),u=ref(!1),f=ref([!0,!1,!1,!1,!1]),v=computed(()=>o.value.length==0?[]:hybridTokenize(o.value,!1,1,!1)??[]);return{inputText:o,mode:a,blockSearchResult:s,focusIndex:l,contentEl:c,suppressMouseOver:d,open:u,allowedBlockTypes:f,queryTerms:v,updateBlockSearchResult:()=>{const b=o.value.trim();if(b===""){s.value=[];return}s.value=e(b).map(k=>n.getBlock(k)).filter(k=>k!==null).filter(k=>k.type=="normalBlock"&&f.value[k.content[0]]),l.value=s.value.length>0?0:-1},openFusionCommand:b=>{o.value=b,u.value=!0,nextTick(()=>{var x;const k=(x=c.value)==null?void 0:x.querySelector("input");k instanceof HTMLElement&&k.focus()})}}});function markApplies(n,e,o,a){for(let s=0;s<e.length;s++){let{$from:l,$to:c}=e[s],d=l.depth==0?n.inlineContent&&n.type.allowsMarkType(o):!1;if(n.nodesBetween(l.pos,c.pos,(u,f)=>{if(d)return!1;d=u.inlineContent&&u.type.allowsMarkType(o)}),d)return!0}return!1}function toggleMark(n,e=null,o){return function(a,s){let{empty:l,$cursor:c,ranges:d}=a.selection;if(l&&!c||!markApplies(a.doc,d,n))return!1;if(s)if(c)n.isInSet(a.storedMarks||c.marks())?s(a.tr.removeStoredMark(n)):s(a.tr.addStoredMark(n.create(e)));else{let u,f=a.tr;u=!d.some(v=>a.doc.rangeHasMark(v.$from.pos,v.$to.pos,n));for(let v=0;v<d.length;v++){let{$from:b,$to:k}=d[v];if(!u)f.removeMark(b.pos,k.pos,n);else{let x=b.pos,_=k.pos,E=b.nodeAfter,B=k.nodeBefore,M=E&&E.isText?/^\s*/.exec(E.text)[0].length:0,V=B&&B.isText?/\s*$/.exec(B.text)[0].length:0;x+M<_&&(x+=M,_-=V),f.addMark(x,_,n.create(e))}}s(f.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function withTimeout(n,e){return new Promise((o,a)=>{const s=setTimeout(()=>{a(new Error("Operation timed out"))},e);n.then(l=>{clearTimeout(s),o(l)},l=>{clearTimeout(s),a(l)})})}function timeout(n){return new Promise(e=>setTimeout(e,n))}class AsyncTaskQueue{constructor(e=2e3){Dt(this,"id",0);Dt(this,"queue",[]);Dt(this,"giveupQueue",[]);Dt(this,"ongoingTask",null);Dt(this,"defaultTimeout");this.defaultTimeout=e}addTask(e,o={}){var x;const{type:a,delay:s,debounce:l,checker:c,timeout:d,meta:u}=o,f=this.id++;let v=[];if(l&&a!="null"){const _=this.queue.findIndex(E=>E.type==a);if(_!==-1){const E=this.queue[_];E.canceller&&E.canceller(),this.queue.splice(_,1),v.push(...E.awareness.mergedTasks),v.push(E)}}const b=(((x=new Error().stack)==null?void 0:x.split(`
`).filter(_=>_.includes("addTask")).length)??0)>1,k=this.ongoingTask?this.queue.findIndex(_=>_.id==this.ongoingTask.id):-1;if(s&&s>0){const _=setTimeout(async()=>{this._processQueue(f)},s),E=()=>{clearTimeout(_)};b?this.queue.splice(k+1,0,{id:f,callback:e,type:a??"null",canceller:E,recursive:!0,checker:c,timeout:d,meta:u,awareness:{mergedTasks:v}}):this.queue.push({id:f,callback:e,type:a??"null",canceller:E,timeout:d,checker:c,meta:u,awareness:{mergedTasks:v}})}else b?this.queue.splice(k+1,0,{id:f,callback:e,type:a??"null",recursive:!0,checker:c,timeout:d,meta:u,awareness:{mergedTasks:v}}):this.queue.push({id:f,callback:e,type:a??"null",checker:c,timeout:d,meta:u,awareness:{mergedTasks:v}}),this._processQueue(f)}async addTaskAndWait(e,o={}){return new Promise(a=>{const s=async l=>{await e(l),a(void 0)};this.addTask(s,o)})}async flushQueue(){await this.addTaskAndWait(()=>{},{})}async _processQueue(e){if(this.queue.length===0)return;if(this.ongoingTask&&!this.queue[0].recursive){this.giveupQueue.push(e);return}const o=this.queue.shift(),{id:a,callback:s,canceller:l,recursive:c,checker:d,timeout:u,meta:f,awareness:v}=o;if(this.ongoingTask=o,l&&l(),!d||d())try{console.log("callback",v);const b=s(v);if(b!=null)try{await withTimeout(b,u??this.defaultTimeout)}catch(k){console.warn(k)}}catch(b){console.error(b)}this.ongoingTask=null,a!==e&&await this._processQueue(e),!c&&this.giveupQueue.length>0&&queueMicrotask(()=>{for(const b of this.giveupQueue)this.giveupQueue.shift()&&this._processQueue(b)})}}let useTaskQueue,globalTaskQueue,taskQueuePlugin;useTaskQueue=()=>globalTaskQueue,globalTaskQueue=new AsyncTaskQueue,taskQueuePlugin={install(n){n.provide("taskQueue",globalTaskQueue)}},DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(e,o){this.from=e,this.to=o}}NodeProp=class{constructor(n={}){this.id=nextPropID++,this.perNode=!!n.perNode,this.deserialize=n.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(n){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof n!="function"&&(n=NodeType.match(n)),e=>{let o=n(e);return o===void 0?null:[this,o]}}},NodeProp.closedBy=new NodeProp({deserialize:n=>n.split(" ")}),NodeProp.openedBy=new NodeProp({deserialize:n=>n.split(" ")}),NodeProp.group=new NodeProp({deserialize:n=>n.split(" ")}),NodeProp.isolate=new NodeProp({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}}),NodeProp.contextHash=new NodeProp({perNode:!0}),NodeProp.lookAhead=new NodeProp({perNode:!0}),NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(e,o,a){this.tree=e,this.overlay=o,this.parser=a}static get(e){return e&&e.props&&e.props[NodeProp.mounted.id]}}const noProps=Object.create(null);NodeType=class{constructor(n,e,o,a=0){this.name=n,this.props=e,this.id=o,this.flags=a}static define(n){let e=n.props&&n.props.length?Object.create(null):noProps,o=(n.top?1:0)|(n.skipped?2:0)|(n.error?4:0)|(n.name==null?8:0),a=new NodeType(n.name||"",e,n.id,o);if(n.props){for(let s of n.props)if(Array.isArray(s)||(s=s(a)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[s[0].id]=s[1]}}return a}prop(n){return this.props[n.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(n){if(typeof n=="string"){if(this.name==n)return!0;let e=this.prop(NodeProp.group);return e?e.indexOf(n)>-1:!1}return this.id==n}static match(n){let e=Object.create(null);for(let o in n)for(let a of o.split(" "))e[a]=n[o];return o=>{for(let a=o.prop(NodeProp.group),s=-1;s<(a?a.length:0);s++){let l=e[s<0?o.name:a[s]];if(l)return l}}}},NodeType.none=new NodeType("",Object.create(null),0,8),NodeSet=class{constructor(n){this.types=n;for(let e=0;e<n.length;e++)if(n[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...n){let e=[];for(let o of this.types){let a=null;for(let s of n){let l=s(o);l&&(a||(a=Object.assign({},o.props)),a[l[0].id]=l[1])}e.push(a?new NodeType(o.name,a,o.id,o.flags):o)}return new NodeSet(e)}};const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={})),Tree=class{constructor(n,e,o,a,s){if(this.type=n,this.children=e,this.positions=o,this.length=a,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,c]of s)this.props[typeof l=="number"?l:l.id]=c}}toString(){let n=MountedTree.get(this);if(n&&!n.overlay)return n.tree.toString();let e="";for(let o of this.children){let a=o.toString();a&&(e&&(e+=","),e+=a)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(n=0){return new TreeCursor(this.topNode,n)}cursorAt(n,e=0,o=0){let a=CachedNode.get(this)||this.topNode,s=new TreeCursor(a);return s.moveTo(n,e),CachedNode.set(this,s._tree),s}get topNode(){return new TreeNode(this,0,0,null)}resolve(n,e=0){let o=resolveNode(CachedNode.get(this)||this.topNode,n,e,!1);return CachedNode.set(this,o),o}resolveInner(n,e=0){let o=resolveNode(CachedInnerNode.get(this)||this.topNode,n,e,!0);return CachedInnerNode.set(this,o),o}resolveStack(n,e=0){return stackIterator(this,n,e)}iterate(n){let{enter:e,leave:o,from:a=0,to:s=this.length}=n,l=n.mode||0,c=(l&IterMode.IncludeAnonymous)>0;for(let d=this.cursor(l|IterMode.IncludeAnonymous);;){let u=!1;if(d.from<=s&&d.to>=a&&(!c&&d.type.isAnonymous||e(d)!==!1)){if(d.firstChild())continue;u=!0}for(;u&&o&&(c||!d.type.isAnonymous)&&o(d),!d.nextSibling();){if(!d.parent())return;u=!0}}}prop(n){return n.perNode?this.props?this.props[n.id]:void 0:this.type.prop(n)}get propValues(){let n=[];if(this.props)for(let e in this.props)n.push([+e,this.props[e]]);return n}balance(n={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(e,o,a)=>new Tree(this.type,e,o,a,this.propValues),n.makeTree||((e,o,a)=>new Tree(NodeType.none,e,o,a)))}static build(n){return buildTree$1(n)}},Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,o){this.buffer=e,this.index=o}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,o,a){this.buffer=e,this.length=o,this.set=a}get type(){return NodeType.none}toString(){let e=[];for(let o=0;o<this.buffer.length;)e.push(this.childString(o)),o=this.buffer[o+3];return e.join(",")}childString(e){let o=this.buffer[e],a=this.buffer[e+3],s=this.set.types[o],l=s.name;if(/\W/.test(l)&&!s.isError&&(l=JSON.stringify(l)),e+=4,a==e)return l;let c=[];for(;e<a;)c.push(this.childString(e)),e=this.buffer[e+3];return l+"("+c.join(",")+")"}findChild(e,o,a,s,l){let{buffer:c}=this,d=-1;for(let u=e;u!=o&&!(checkSide(l,s,c[u+1],c[u+2])&&(d=u,a>0));u=c[u+3]);return d}slice(e,o,a){let s=this.buffer,l=new Uint16Array(o-e),c=0;for(let d=e,u=0;d<o;){l[u++]=s[d++],l[u++]=s[d++]-a;let f=l[u++]=s[d++]-a;l[u++]=s[d++]-e,c=Math.max(c,f)}return new TreeBuffer(l,c,this.set)}}function checkSide(n,e,o,a){switch(n){case-2:return o<e;case-1:return a>=e&&o<e;case 0:return o<e&&a>e;case 1:return o<=e&&a>e;case 2:return a>e;case 4:return!0}}function resolveNode(n,e,o,a){for(var s;n.from==n.to||(o<1?n.from>=e:n.from>e)||(o>-1?n.to<=e:n.to<e);){let c=!a&&n instanceof TreeNode&&n.index<0?null:n.parent;if(!c)return n;n=c}let l=a?0:IterMode.IgnoreOverlays;if(a)for(let c=n,d=c.parent;d;c=d,d=c.parent)c instanceof TreeNode&&c.index<0&&((s=d.enter(e,o,l))===null||s===void 0?void 0:s.from)!=c.from&&(n=d);for(;;){let c=n.enter(e,o,l);if(!c)return n;n=c}}class BaseNode{cursor(e=0){return new TreeCursor(this,e)}getChild(e,o=null,a=null){let s=getChildren(this,e,o,a);return s.length?s[0]:null}getChildren(e,o=null,a=null){return getChildren(this,e,o,a)}resolve(e,o=0){return resolveNode(this,e,o,!1)}resolveInner(e,o=0){return resolveNode(this,e,o,!0)}matchContext(e){return matchNodeContext(this.parent,e)}enterUnfinishedNodesBefore(e){let o=this.childBefore(e),a=this;for(;o;){let s=o.lastChild;if(!s||s.to!=o.to)break;s.type.isError&&s.from==s.to?(a=o,o=s.prevSibling):o=s}return a}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(e,o,a,s){super(),this._tree=e,this.from=o,this.index=a,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,o,a,s,l=0){for(let c=this;;){for(let{children:d,positions:u}=c._tree,f=o>0?d.length:-1;e!=f;e+=o){let v=d[e],b=u[e]+c.from;if(checkSide(s,a,b,b+v.length)){if(v instanceof TreeBuffer){if(l&IterMode.ExcludeBuffers)continue;let k=v.findChild(0,v.buffer.length,o,a-b,s);if(k>-1)return new BufferNode(new BufferContext(c,v,e,b),null,k)}else if(l&IterMode.IncludeAnonymous||!v.type.isAnonymous||hasChild(v)){let k;if(!(l&IterMode.IgnoreMounts)&&(k=MountedTree.get(v))&&!k.overlay)return new TreeNode(k.tree,b,e,c);let x=new TreeNode(v,b,e,c);return l&IterMode.IncludeAnonymous||!x.type.isAnonymous?x:x.nextChild(o<0?v.children.length-1:0,o,a,s)}}}if(l&IterMode.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?e=c.index+o:e=o<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,o,a=0){let s;if(!(a&IterMode.IgnoreOverlays)&&(s=MountedTree.get(this._tree))&&s.overlay){let l=e-this.from;for(let{from:c,to:d}of s.overlay)if((o>0?c<=l:c<l)&&(o<0?d>=l:d>l))return new TreeNode(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,o,a)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(n,e,o,a){let s=n.cursor(),l=[];if(!s.firstChild())return l;if(o!=null){for(let c=!1;!c;)if(c=s.type.is(o),!s.nextSibling())return l}for(;;){if(a!=null&&s.type.is(a))return l;if(s.type.is(e)&&l.push(s.node),!s.nextSibling())return a==null?l:[]}}function matchNodeContext(n,e,o=e.length-1){for(let a=n;o>=0;a=a.parent){if(!a)return!1;if(!a.type.isAnonymous){if(e[o]&&e[o]!=a.name)return!1;o--}}return!0}class BufferContext{constructor(e,o,a,s){this.parent=e,this.buffer=o,this.index=a,this.start=s}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,o,a){super(),this.context=e,this._parent=o,this.index=a,this.type=e.buffer.set.types[e.buffer.buffer[a]]}child(e,o,a){let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],e,o-this.context.start,a);return l<0?null:new BufferNode(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,o,a=0){if(a&IterMode.ExcludeBuffers)return null;let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],o>0?1:-1,e-this.context.start,o);return l<0?null:new BufferNode(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,o=e.buffer[this.index+3];return o<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,o):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,o=this._parent?this._parent.index+4:0;return this.index==o?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(o,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],o=[],{buffer:a}=this.context,s=this.index+4,l=a.buffer[this.index+3];if(l>s){let c=a.buffer[this.index+1];e.push(a.slice(s,l,c)),o.push(0)}return new Tree(this.type,e,o,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(n){if(!n.length)return null;let e=0,o=n[0];for(let l=1;l<n.length;l++){let c=n[l];(c.from>o.from||c.to<o.to)&&(o=c,e=l)}let a=o instanceof TreeNode&&o.index<0?null:o.parent,s=n.slice();return a?s[e]=a:s.splice(e,1),new StackIterator(s,o)}class StackIterator{constructor(e,o){this.heads=e,this.node=o}get next(){return iterStack(this.heads)}}function stackIterator(n,e,o){let a=n.resolveInner(e,o),s=null;for(let l=a instanceof TreeNode?a:a.context.parent;l;l=l.parent)if(l.index<0){let c=l.parent;(s||(s=[a])).push(c.resolve(e,o)),l=c}else{let c=MountedTree.get(l.tree);if(c&&c.overlay&&c.overlay[0].from<=e&&c.overlay[c.overlay.length-1].to>=e){let d=new TreeNode(c.tree,c.overlay[0].from+l.from,-1,l);(s||(s=[a])).push(resolveNode(d,e,o,!1))}}return s?iterStack(s):a}class TreeCursor{get name(){return this.type.name}constructor(e,o=0){if(this.mode=o,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let a=e._parent;a;a=a._parent)this.stack.unshift(a.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,o){this.index=e;let{start:a,buffer:s}=this.buffer;return this.type=o||s.set.types[s.buffer[e]],this.from=a+s.buffer[e+1],this.to=a+s.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,o,a){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,o,a,this.mode));let{buffer:s}=this.buffer,l=s.findChild(this.index+4,s.buffer[this.index+3],e,o-this.buffer.start,a);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,o,a=this.mode){return this.buffer?a&IterMode.ExcludeBuffers?!1:this.enterChild(1,e,o):this.yield(this._tree.enter(e,o,a))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:o}=this.buffer,a=this.stack.length-1;if(e<0){let s=a<0?0:this.stack[a]+4;if(this.index!=s)return this.yieldBuf(o.findChild(s,this.index,-1,0,4))}else{let s=o.buffer[this.index+3];if(s<(a<0?o.buffer.length:o.buffer[this.stack[a]+3]))return this.yieldBuf(s)}return a<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let o,a,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(s.buffer.buffer[l+3]<this.index)return!1;({index:o,parent:a}=s)}else({index:o,_parent:a}=this._tree);for(;a;{index:o,_parent:a}=a)if(o>-1)for(let l=o+e,c=e<0?-1:a._tree.children.length;l!=c;l+=e){let d=a._tree.children[l];if(this.mode&IterMode.IncludeAnonymous||d instanceof TreeBuffer||!d.type.isAnonymous||hasChild(d))return!1}return!0}move(e,o){if(o&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,o=0){for(;(this.from==this.to||(o<1?this.from>=e:this.from>e)||(o>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,o););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,o=null,a=0;if(e&&e.context==this.buffer)e:for(let s=this.index,l=this.stack.length;l>=0;){for(let c=e;c;c=c._parent)if(c.index==s){if(s==this.index)return c;o=c,a=l+1;break e}s=this.stack[--l]}for(let s=a;s<this.stack.length;s++)o=new BufferNode(this.buffer,o,this.stack[s]);return this.bufferNode=new BufferNode(this.buffer,o,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,o){for(let a=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){a++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&o&&o(this),s=this.type.isAnonymous,!a)return;if(this.nextSibling())break;this.parent(),a--,s=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node.parent,e);let{buffer:o}=this.buffer,{types:a}=o.set;for(let s=e.length-1,l=this.stack.length-1;s>=0;l--){if(l<0)return matchNodeContext(this._tree,e,s);let c=a[o.buffer[this.stack[l]]];if(!c.isAnonymous){if(e[s]&&e[s]!=c.name)return!1;s--}}return!0}}function hasChild(n){return n.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree$1(n){var e;let{buffer:o,nodeSet:a,maxBufferLength:s=DefaultBufferLength,reused:l=[],minRepeatType:c=a.types.length}=n,d=Array.isArray(o)?new FlatBufferCursor(o,o.length):o,u=a.types,f=0,v=0;function b(L,U,Z,K,j,W){let{id:Y,start:G,end:fe,size:le}=d,pe=v,ue=f;for(;le<0;)if(d.next(),le==-1){let ze=l[Y];Z.push(ze),K.push(G-L);return}else if(le==-3){f=Y;return}else if(le==-4){v=Y;return}else throw new RangeError(`Unrecognized record size: ${le}`);let Ne=u[Y],Ve,Ze,We=G-L;if(fe-G<=s&&(Ze=B(d.pos-U,j))){let ze=new Uint16Array(Ze.size-Ze.skip),qe=d.pos-Ze.size,dt=ze.length;for(;d.pos>qe;)dt=M(Ze.start,ze,dt);Ve=new TreeBuffer(ze,fe-Ze.start,a),We=Ze.start-L}else{let ze=d.pos-le;d.next();let qe=[],dt=[],Xe=Y>=c?Y:-1,Ge=0,ft=fe;for(;d.pos>ze;)Xe>=0&&d.id==Xe&&d.size>=0?(d.end<=ft-s&&(_(qe,dt,G,Ge,d.end,ft,Xe,pe,ue),Ge=qe.length,ft=d.end),d.next()):W>2500?k(G,ze,qe,dt):b(G,ze,qe,dt,Xe,W+1);if(Xe>=0&&Ge>0&&Ge<qe.length&&_(qe,dt,G,Ge,G,ft,Xe,pe,ue),qe.reverse(),dt.reverse(),Xe>-1&&Ge>0){let Te=x(Ne,ue);Ve=balanceRange(Ne,qe,dt,0,qe.length,0,fe-G,Te,Te)}else Ve=E(Ne,qe,dt,fe-G,pe-fe,ue)}Z.push(Ve),K.push(We)}function k(L,U,Z,K){let j=[],W=0,Y=-1;for(;d.pos>U;){let{id:G,start:fe,end:le,size:pe}=d;if(pe>4)d.next();else{if(Y>-1&&fe<Y)break;Y<0&&(Y=le-s),j.push(G,fe,le),W++,d.next()}}if(W){let G=new Uint16Array(W*4),fe=j[j.length-2];for(let le=j.length-3,pe=0;le>=0;le-=3)G[pe++]=j[le],G[pe++]=j[le+1]-fe,G[pe++]=j[le+2]-fe,G[pe++]=pe;Z.push(new TreeBuffer(G,j[2]-fe,a)),K.push(fe-L)}}function x(L,U){return(Z,K,j)=>{let W=0,Y=Z.length-1,G,fe;if(Y>=0&&(G=Z[Y])instanceof Tree){if(!Y&&G.type==L&&G.length==j)return G;(fe=G.prop(NodeProp.lookAhead))&&(W=K[Y]+G.length+fe)}return E(L,Z,K,j,W,U)}}function _(L,U,Z,K,j,W,Y,G,fe){let le=[],pe=[];for(;L.length>K;)le.push(L.pop()),pe.push(U.pop()+Z-j);L.push(E(a.types[Y],le,pe,W-j,G-W,fe)),U.push(j-Z)}function E(L,U,Z,K,j,W,Y){if(W){let G=[NodeProp.contextHash,W];Y=Y?[G].concat(Y):[G]}if(j>25){let G=[NodeProp.lookAhead,j];Y=Y?[G].concat(Y):[G]}return new Tree(L,U,Z,K,Y)}function B(L,U){let Z=d.fork(),K=0,j=0,W=0,Y=Z.end-s,G={size:0,start:0,skip:0};e:for(let fe=Z.pos-L;Z.pos>fe;){let le=Z.size;if(Z.id==U&&le>=0){G.size=K,G.start=j,G.skip=W,W+=4,K+=4,Z.next();continue}let pe=Z.pos-le;if(le<0||pe<fe||Z.start<Y)break;let ue=Z.id>=c?4:0,Ne=Z.start;for(Z.next();Z.pos>pe;){if(Z.size<0)if(Z.size==-3)ue+=4;else break e;else Z.id>=c&&(ue+=4);Z.next()}j=Ne,K+=le,W+=ue}return(U<0||K==L)&&(G.size=K,G.start=j,G.skip=W),G.size>4?G:void 0}function M(L,U,Z){let{id:K,start:j,end:W,size:Y}=d;if(d.next(),Y>=0&&K<c){let G=Z;if(Y>4){let fe=d.pos-(Y-4);for(;d.pos>fe;)Z=M(L,U,Z)}U[--Z]=G,U[--Z]=W-L,U[--Z]=j-L,U[--Z]=K}else Y==-3?f=K:Y==-4&&(v=K);return Z}let V=[],F=[];for(;d.pos>0;)b(n.start||0,n.bufferStart||0,V,F,-1,0);let I=(e=n.length)!==null&&e!==void 0?e:V.length?F[0]+V[0].length:0;return new Tree(u[n.topID],V.reverse(),F.reverse(),I)}const nodeSizeCache=new WeakMap;function nodeSize(n,e){if(!n.isAnonymous||e instanceof TreeBuffer||e.type!=n)return 1;let o=nodeSizeCache.get(e);if(o==null){o=1;for(let a of e.children){if(a.type!=n||!(a instanceof Tree)){o=1;break}o+=nodeSize(n,a)}nodeSizeCache.set(e,o)}return o}function balanceRange(n,e,o,a,s,l,c,d,u){let f=0;for(let _=a;_<s;_++)f+=nodeSize(n,e[_]);let v=Math.ceil(f*1.5/8),b=[],k=[];function x(_,E,B,M,V){for(let F=B;F<M;){let I=F,L=E[F],U=nodeSize(n,_[F]);for(F++;F<M;F++){let Z=nodeSize(n,_[F]);if(U+Z>=v)break;U+=Z}if(F==I+1){if(U>v){let Z=_[I];x(Z.children,Z.positions,0,Z.children.length,E[I]+V);continue}b.push(_[I])}else{let Z=E[F-1]+_[F-1].length-L;b.push(balanceRange(n,_,E,I,F,L,Z,null,u))}k.push(L+V-l)}}return x(e,o,a,s,0),(d||u)(b,k,c)}NodeWeakMap=class{constructor(){this.map=new WeakMap}setBuffer(n,e,o){let a=this.map.get(n);a||this.map.set(n,a=new Map),a.set(e,o)}getBuffer(n,e){let o=this.map.get(n);return o&&o.get(e)}set(n,e){n instanceof BufferNode?this.setBuffer(n.context.buffer,n.index,e):n instanceof TreeNode&&this.map.set(n.tree,e)}get(n){return n instanceof BufferNode?this.getBuffer(n.context.buffer,n.index):n instanceof TreeNode?this.map.get(n.tree):void 0}cursorSet(n,e){n.buffer?this.setBuffer(n.buffer.buffer,n.index,e):this.map.set(n.tree,e)}cursorGet(n){return n.buffer?this.getBuffer(n.buffer.buffer,n.index):this.map.get(n.tree)}};class TreeFragment{constructor(e,o,a,s,l=!1,c=!1){this.from=e,this.to=o,this.tree=a,this.offset=s,this.open=(l?1:0)|(c?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,o=[],a=!1){let s=[new TreeFragment(0,e.length,e,0,!1,a)];for(let l of o)l.to>e.length&&s.push(l);return s}static applyChanges(e,o,a=128){if(!o.length)return e;let s=[],l=1,c=e.length?e[0]:null;for(let d=0,u=0,f=0;;d++){let v=d<o.length?o[d]:null,b=v?v.fromA:1e9;if(b-u>=a)for(;c&&c.from<b;){let k=c;if(u>=k.from||b<=k.to||f){let x=Math.max(k.from,u)-f,_=Math.min(k.to,b)-f;k=x>=_?null:new TreeFragment(x,_,k.tree,k.offset+f,d>0,!!v)}if(k&&s.push(k),c.to>b)break;c=l<e.length?e[l++]:null}if(!v)break;u=v.toA,f=v.toA-v.toB}return s}}Parser$1=class{startParse(n,e,o){return typeof n=="string"&&(n=new StringInput(n)),o=o?o.length?o.map(a=>new Range(a.from,a.to)):[new Range(0,0)]:[new Range(0,n.length)],this.createParse(n,e||[],o)}parse(n,e,o){let a=this.startParse(n,e,o);for(;;){let s=a.advance();if(s)return s}}};class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,o){return this.string.slice(e,o)}}parseMixed=function(n){return(e,o,a,s)=>new MixedParse(e,n,o,a,s)};class InnerParse{constructor(e,o,a,s,l){this.parser=e,this.parse=o,this.overlay=a,this.target=s,this.from=l}}function checkRanges(n){if(!n.length||n.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(n))}class ActiveOverlay{constructor(e,o,a,s,l,c,d){this.parser=e,this.predicate=o,this.mounts=a,this.index=s,this.start=l,this.target=c,this.prev=d,this.depth=0,this.ranges=[]}}const stoppedInner=new NodeProp({perNode:!0});class MixedParse{constructor(e,o,a,s,l){this.nest=o,this.input=a,this.fragments=s,this.ranges=l,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let a=this.baseParse.advance();if(!a)return null;if(this.baseParse=null,this.baseTree=a,this.startInner(),this.stoppedAt!=null)for(let s of this.inner)s.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let a=this.baseTree;return this.stoppedAt!=null&&(a=new Tree(a.type,a.children,a.positions,a.length,a.propValues.concat([[stoppedInner,this.stoppedAt]]))),a}let e=this.inner[this.innerDone],o=e.parse.advance();if(o){this.innerDone++;let a=Object.assign(Object.create(null),e.target.props);a[NodeProp.mounted.id]=new MountedTree(o,e.overlay,e.parser),e.target.props=a}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let o=this.innerDone;o<this.inner.length;o++)this.inner[o].from<e&&(e=Math.min(e,this.inner[o].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let o=this.innerDone;o<this.inner.length;o++)this.inner[o].parse.stopAt(e)}startInner(){let e=new FragmentCursor(this.fragments),o=null,a=null,s=new TreeCursor(new TreeNode(this.baseTree,this.ranges[0].from,0,null),IterMode.IncludeAnonymous|IterMode.IgnoreMounts);e:for(let l,c;;){let d=!0,u;if(this.stoppedAt!=null&&s.from>=this.stoppedAt)d=!1;else if(e.hasNode(s)){if(o){let f=o.mounts.find(v=>v.frag.from<=s.from&&v.frag.to>=s.to&&v.mount.overlay);if(f)for(let v of f.mount.overlay){let b=v.from+f.pos,k=v.to+f.pos;b>=s.from&&k<=s.to&&!o.ranges.some(x=>x.from<k&&x.to>b)&&o.ranges.push({from:b,to:k})}}d=!1}else if(a&&(c=checkCover(a.ranges,s.from,s.to)))d=c!=2;else if(!s.type.isAnonymous&&(l=this.nest(s,this.input))&&(s.from<s.to||!l.overlay)){s.tree||materialize(s);let f=e.findMounts(s.from,l.parser);if(typeof l.overlay=="function")o=new ActiveOverlay(l.parser,l.overlay,f,this.inner.length,s.from,s.tree,o);else{let v=punchRanges(this.ranges,l.overlay||(s.from<s.to?[new Range(s.from,s.to)]:[]));v.length&&checkRanges(v),(v.length||!l.overlay)&&this.inner.push(new InnerParse(l.parser,v.length?l.parser.startParse(this.input,enterFragments(f,v),v):l.parser.startParse(""),l.overlay?l.overlay.map(b=>new Range(b.from-s.from,b.to-s.from)):null,s.tree,v.length?v[0].from:s.from)),l.overlay?v.length&&(a={ranges:v,depth:0,prev:a}):d=!1}}else if(o&&(u=o.predicate(s))&&(u===!0&&(u=new Range(s.from,s.to)),u.from<u.to)){let f=o.ranges.length-1;f>=0&&o.ranges[f].to==u.from?o.ranges[f]={from:o.ranges[f].from,to:u.to}:o.ranges.push(u)}if(d&&s.firstChild())o&&o.depth++,a&&a.depth++;else for(;!s.nextSibling();){if(!s.parent())break e;if(o&&!--o.depth){let f=punchRanges(this.ranges,o.ranges);f.length&&(checkRanges(f),this.inner.splice(o.index,0,new InnerParse(o.parser,o.parser.startParse(this.input,enterFragments(o.mounts,f),f),o.ranges.map(v=>new Range(v.from-o.start,v.to-o.start)),o.target,f[0].from))),o=o.prev}a&&!--a.depth&&(a=a.prev)}}}}function checkCover(n,e,o){for(let a of n){if(a.from>=o)break;if(a.to>e)return a.from<=e&&a.to>=o?2:1}return 0}function sliceBuf(n,e,o,a,s,l){if(e<o){let c=n.buffer[e+1];a.push(n.slice(e,o,c)),s.push(c-l)}}function materialize(n){let{node:e}=n,o=[],a=e.context.buffer;do o.push(n.index),n.parent();while(!n.tree);let s=n.tree,l=s.children.indexOf(a),c=s.children[l],d=c.buffer,u=[l];function f(v,b,k,x,_,E){let B=o[E],M=[],V=[];sliceBuf(c,v,B,M,V,x);let F=d[B+1],I=d[B+2];u.push(M.length);let L=E?f(B+4,d[B+3],c.set.types[d[B]],F,I-F,E-1):e.toTree();return M.push(L),V.push(F-x),sliceBuf(c,d[B+3],b,M,V,x),new Tree(k,M,V,_)}s.children[l]=f(0,d.length,NodeType.none,0,c.length,o.length-1);for(let v of u){let b=n.tree.children[v],k=n.tree.positions[v];n.yield(new TreeNode(b,k+n.from,v,n._tree))}}class StructureCursor{constructor(e,o){this.offset=o,this.done=!1,this.cursor=e.cursor(IterMode.IncludeAnonymous|IterMode.IgnoreMounts)}moveTo(e){let{cursor:o}=this,a=e-this.offset;for(;!this.done&&o.from<a;)o.to>=e&&o.enter(a,1,IterMode.IgnoreOverlays|IterMode.ExcludeBuffers)||o.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let o=this.cursor.tree;;){if(o==e.tree)return!0;if(o.children.length&&o.positions[0]==0&&o.children[0]instanceof Tree)o=o.children[0];else break}return!1}}class FragmentCursor{constructor(e){var o;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let a=this.curFrag=e[0];this.curTo=(o=a.tree.prop(stoppedInner))!==null&&o!==void 0?o:a.to,this.inner=new StructureCursor(a.tree,-a.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let o=this.curFrag=this.fragments[this.fragI];this.curTo=(e=o.tree.prop(stoppedInner))!==null&&e!==void 0?e:o.to,this.inner=new StructureCursor(o.tree,-o.offset)}}findMounts(e,o){var a;let s=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let l=this.inner.cursor.node;l;l=l.parent){let c=(a=l.tree)===null||a===void 0?void 0:a.prop(NodeProp.mounted);if(c&&c.parser==o)for(let d=this.fragI;d<this.fragments.length;d++){let u=this.fragments[d];if(u.from>=l.to)break;u.tree==this.curFrag.tree&&s.push({frag:u,pos:l.from-u.offset,mount:c})}}}return s}}function punchRanges(n,e){let o=null,a=e;for(let s=1,l=0;s<n.length;s++){let c=n[s-1].to,d=n[s].from;for(;l<a.length;l++){let u=a[l];if(u.from>=d)break;u.to<=c||(o||(a=o=e.slice()),u.from<c?(o[l]=new Range(u.from,c),u.to>d&&o.splice(l+1,0,new Range(d,u.to))):u.to>d?o[l--]=new Range(d,u.to):o.splice(l--,1))}}return a}function findCoverChanges(n,e,o,a){let s=0,l=0,c=!1,d=!1,u=-1e9,f=[];for(;;){let v=s==n.length?1e9:c?n[s].to:n[s].from,b=l==e.length?1e9:d?e[l].to:e[l].from;if(c!=d){let k=Math.max(u,o),x=Math.min(v,b,a);k<x&&f.push(new Range(k,x))}if(u=Math.min(v,b),u==1e9)break;v==u&&(c?(c=!1,s++):c=!0),b==u&&(d?(d=!1,l++):d=!0)}return f}function enterFragments(n,e){let o=[];for(let{pos:a,mount:s,frag:l}of n){let c=a+(s.overlay?s.overlay[0].from:0),d=c+s.tree.length,u=Math.max(l.from,c),f=Math.min(l.to,d);if(s.overlay){let v=s.overlay.map(k=>new Range(k.from+a,k.to+a)),b=findCoverChanges(e,v,u,f);for(let k=0,x=u;;k++){let _=k==b.length,E=_?f:b[k].from;if(E>x&&o.push(new TreeFragment(x,E,s.tree,-c,l.from>=x||l.openStart,l.to<=E||l.openEnd)),_)break;x=b[k].to}}else o.push(new TreeFragment(u,f,s.tree,-c,l.from>=c||l.openStart,l.to<=d||l.openEnd))}return o}let nextTagID=0;Tag=class{constructor(n,e,o,a){this.name=n,this.set=e,this.base=o,this.modified=a,this.id=nextTagID++}toString(){let{name:n}=this;for(let e of this.modified)e.name&&(n=`${e.name}(${n})`);return n}static define(n,e){let o=typeof n=="string"?n:"?";if(n instanceof Tag&&(e=n),e==null?void 0:e.base)throw new Error("Can not derive from a modified tag");let a=new Tag(o,[],null,[]);if(a.set.push(a),e)for(let s of e.set)a.set.push(s);return a}static defineModifier(n){let e=new Modifier(n);return o=>o.modified.indexOf(e)>-1?o:Modifier.get(o.base||o,o.modified.concat(e).sort((a,s)=>a.id-s.id))}};let nextModifierID=0;class Modifier{constructor(e){this.name=e,this.instances=[],this.id=nextModifierID++}static get(e,o){if(!o.length)return e;let a=o[0].instances.find(d=>d.base==e&&sameArray(o,d.modified));if(a)return a;let s=[],l=new Tag(e.name,s,e,o);for(let d of o)d.instances.push(l);let c=powerSet(o);for(let d of e.set)if(!d.modified.length)for(let u of c)s.push(Modifier.get(d,u));return l}}function sameArray(n,e){return n.length==e.length&&n.every((o,a)=>o==e[a])}function powerSet(n){let e=[[]];for(let o=0;o<n.length;o++)for(let a=0,s=e.length;a<s;a++)e.push(e[a].concat(n[o]));return e.sort((o,a)=>a.length-o.length)}styleTags=function(n){let e=Object.create(null);for(let o in n){let a=n[o];Array.isArray(a)||(a=[a]);for(let s of o.split(" "))if(s){let l=[],c=2,d=s;for(let b=0;;){if(d=="..."&&b>0&&b+3==s.length){c=1;break}let k=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(d);if(!k)throw new RangeError("Invalid path: "+s);if(l.push(k[0]=="*"?"":k[0][0]=='"'?JSON.parse(k[0]):k[0]),b+=k[0].length,b==s.length)break;let x=s[b++];if(b==s.length&&x=="!"){c=0;break}if(x!="/")throw new RangeError("Invalid path: "+s);d=s.slice(b)}let u=l.length-1,f=l[u];if(!f)throw new RangeError("Invalid path: "+s);let v=new Rule(a,c,u>0?l.slice(0,u):null);e[f]=v.sort(e[f])}}return ruleNodeProp.add(e)};const ruleNodeProp=new NodeProp;class Rule{constructor(e,o,a,s){this.tags=e,this.mode=o,this.context=a,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(n,e){let o=Object.create(null);for(let l of n)if(!Array.isArray(l.tag))o[l.tag.id]=l.class;else for(let c of l.tag)o[c.id]=l.class;let{scope:a,all:s=null}=e||{};return{style:l=>{let c=s;for(let d of l)for(let u of d.set){let f=o[u.id];if(f){c=c?c+" "+f:f;break}}return c},scope:a}}function highlightTags(n,e){let o=null;for(let a of n){let s=a.style(e);s&&(o=o?o+" "+s:s)}return o}function highlightTree(n,e,o,a=0,s=n.length){let l=new HighlightBuilder(a,Array.isArray(e)?e:[e],o);l.highlightRange(n.cursor(),a,s,"",l.highlighters),l.flush(s)}class HighlightBuilder{constructor(e,o,a){this.at=e,this.highlighters=o,this.span=a,this.class=""}startSpan(e,o){o!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=o)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,o,a,s,l){let{type:c,from:d,to:u}=e;if(d>=a||u<=o)return;c.isTop&&(l=this.highlighters.filter(x=>!x.scope||x.scope(c)));let f=s,v=getStyleTags(e)||Rule.empty,b=highlightTags(l,v.tags);if(b&&(f&&(f+=" "),f+=b,v.mode==1&&(s+=(s?" ":"")+b)),this.startSpan(Math.max(o,d),f),v.opaque)return;let k=e.tree&&e.tree.prop(NodeProp.mounted);if(k&&k.overlay){let x=e.node.enter(k.overlay[0].from+d,1),_=this.highlighters.filter(B=>!B.scope||B.scope(k.tree.type)),E=e.firstChild();for(let B=0,M=d;;B++){let V=B<k.overlay.length?k.overlay[B]:null,F=V?V.from+d:u,I=Math.max(o,M),L=Math.min(a,F);if(I<L&&E)for(;e.from<L&&(this.highlightRange(e,I,L,s,l),this.startSpan(Math.min(L,e.to),f),!(e.to>=F||!e.nextSibling())););if(!V||F>a)break;M=V.to+d,M>o&&(this.highlightRange(x.cursor(),Math.max(o,V.from+d),Math.min(a,M),"",_),this.startSpan(Math.min(a,M),f))}E&&e.parent()}else if(e.firstChild()){k&&(s="");do if(!(e.to<=o)){if(e.from>=a)break;this.highlightRange(e,o,a,s,l),this.startSpan(Math.min(a,e.to),f)}while(e.nextSibling());e.parent()}}}function getStyleTags(n){let e=n.type.prop(ruleNodeProp);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}let t,comment,name,typeName,propertyName,literal,string,number,content,heading,keyword,operator,punctuation,bracket,meta;t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let n in tags){let e=tags[n];e instanceof Tag&&(e.name=n)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;languageDataProp=new NodeProp,defineLanguageFacet=function(n){return Facet.define({combine:n?e=>e.concat(n):void 0})},sublanguageProp=new NodeProp,Language=class{constructor(n,e,o=[],a=""){this.data=n,this.name=a,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=e,this.extension=[language.of(this),EditorState.languageData.of((s,l,c)=>{let d=topNodeAt(s,l,c),u=d.type.prop(languageDataProp);if(!u)return[];let f=s.facet(u),v=d.type.prop(sublanguageProp);if(v){let b=d.resolve(l-d.from,c);for(let k of v)if(k.test(b,s)){let x=s.facet(k.facet);return k.type=="replace"?x:x.concat(f)}}return f})].concat(o)}isActiveAt(n,e,o=-1){return topNodeAt(n,e,o).type.prop(languageDataProp)==this.data}findRegions(n){let e=n.facet(language);if((e==null?void 0:e.data)==this.data)return[{from:0,to:n.doc.length}];if(!e||!e.allowsNesting)return[];let o=[],a=(s,l)=>{if(s.prop(languageDataProp)==this.data){o.push({from:l,to:l+s.length});return}let c=s.prop(NodeProp.mounted);if(c){if(c.tree.prop(languageDataProp)==this.data){if(c.overlay)for(let d of c.overlay)o.push({from:d.from+l,to:d.to+l});else o.push({from:l,to:l+s.length});return}else if(c.overlay){let d=o.length;if(a(c.tree,c.overlay[0].from+l),o.length>d)return}}for(let d=0;d<s.children.length;d++){let u=s.children[d];u instanceof Tree&&a(u,s.positions[d]+l)}};return a(syntaxTree(n),0),o}get allowsNesting(){return!0}},Language.setState=StateEffect.define();function topNodeAt(n,e,o){let a=n.facet(language),s=syntaxTree(n).topNode;if(!a||a.allowsNesting)for(let l=s;l;l=l.enter(e,o,IterMode.ExcludeBuffers))l.type.isTop&&(s=l);return s}LRLanguage=class extends Language{constructor(n,e,o){super(n,e,[],o),this.parser=e}static define(n){let e=defineLanguageFacet(n.languageData);return new LRLanguage(e,n.parser.configure({props:[languageDataProp.add(o=>o.isTop?e:void 0)]}),n.name)}configure(n,e){return new LRLanguage(this.data,this.parser.configure(n),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}},syntaxTree=function(n){let e=n.field(Language.state,!1);return e?e.tree:Tree.empty};class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,o){let a=this.cursorPos-this.string.length;return e<a||o>=this.cursorPos?this.doc.sliceString(e,o):this.string.slice(e-a,o-a)}}let currentContext=null;ParseContext=class{constructor(n,e,o=[],a,s,l,c,d){this.parser=n,this.state=e,this.fragments=o,this.tree=a,this.treeLen=s,this.viewport=l,this.skipped=c,this.scheduleOn=d,this.parse=null,this.tempSkipped=[]}static create(n,e,o){return new ParseContext(n,e,[],Tree.empty,0,o,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(n,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=Tree.empty&&this.isDone(e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var o;if(typeof n=="number"){let a=Date.now()+n;n=()=>Date.now()>a}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let a=this.parse.advance();if(a)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(a,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(o=this.parse.stoppedAt)!==null&&o!==void 0?o:this.state.doc.length,this.tree=a,this.parse=null,this.treeLen<(e??this.state.doc.length))this.parse=this.startParse();else return!0;if(n())return!1}})}takeTree(){let n,e;this.parse&&(n=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&this.parse.stopAt(n),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=n,this.tree=e,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(n){let e=currentContext;currentContext=this;try{return n()}finally{currentContext=e}}withoutTempSkipped(n){for(let e;e=this.tempSkipped.pop();)n=cutFragments(n,e.from,e.to);return n}changes(n,e){let{fragments:o,tree:a,treeLen:s,viewport:l,skipped:c}=this;if(this.takeTree(),!n.empty){let d=[];if(n.iterChangedRanges((u,f,v,b)=>d.push({fromA:u,toA:f,fromB:v,toB:b})),o=TreeFragment.applyChanges(o,d),a=Tree.empty,s=0,l={from:n.mapPos(l.from,-1),to:n.mapPos(l.to,1)},this.skipped.length){c=[];for(let u of this.skipped){let f=n.mapPos(u.from,1),v=n.mapPos(u.to,-1);f<v&&c.push({from:f,to:v})}}}return new ParseContext(this.parser,e,o,a,s,l,c,this.scheduleOn)}updateViewport(n){if(this.viewport.from==n.from&&this.viewport.to==n.to)return!1;this.viewport=n;let e=this.skipped.length;for(let o=0;o<this.skipped.length;o++){let{from:a,to:s}=this.skipped[o];a<n.to&&s>n.from&&(this.fragments=cutFragments(this.fragments,a,s),this.skipped.splice(o--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(n,e){this.skipped.push({from:n,to:e})}static getSkippingParser(n){return new class extends Parser$1{createParse(e,o,a){let s=a[0].from,l=a[a.length-1].to;return{parsedPos:s,advance(){let c=currentContext;if(c){for(let d of a)c.tempSkipped.push(d);n&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,n]):n)}return this.parsedPos=l,new Tree(NodeType.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(n){n=Math.min(n,this.state.doc.length);let e=this.fragments;return this.treeLen>=n&&e.length&&e[0].from==0&&e[0].to>=n}static get(){return currentContext}};function cutFragments(n,e,o){return TreeFragment.applyChanges(n,[{fromA:e,toA:o,fromB:e,toB:o}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let o=this.context.changes(e.changes,e.state),a=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),o.viewport.to);return o.work(20,a)||o.takeTree(),new LanguageState(o)}static init(e){let o=Math.min(3e3,e.doc.length),a=ParseContext.create(e.facet(language).parser,e,{from:0,to:o});return a.work(20,o)||a.takeTree(),new LanguageState(a)}}Language.state=StateField.define({create:LanguageState.init,update(n,e){for(let o of e.effects)if(o.is(Language.setState))return o.value;return e.startState.facet(language)!=e.state.facet(language)?LanguageState.init(e.state):n.apply(e)}});let requestIdle=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(requestIdle=n=>{let e=-1,o=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(o):cancelIdleCallback(e)});const isInputPending=typeof navigator<"u"&&!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(n){let e=this.view.state.field(Language.state).context;(e.updateViewport(n.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(n.docChanged||n.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:n}=this.view,e=n.field(Language.state);(e.tree!=e.context.tree||!e.context.isDone(n.doc.length))&&(this.working=requestIdle(this.work))}work(n){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:o,viewport:{to:a}}=this.view,s=o.field(Language.state);if(s.tree==s.context.tree&&s.context.isDone(a+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,n&&!isInputPending?Math.max(25,n.timeRemaining()-5):1e9),c=s.context.treeLen<a&&o.doc.length>a+1e3,d=s.context.work(()=>isInputPending&&isInputPending()||Date.now()>l,a+(c?0:1e5));this.chunkBudget-=Date.now()-e,(d||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(s.context))})),this.chunkBudget>0&&!(d&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(n){n.scheduleOn&&(this.workScheduled++,n.scheduleOn.then(()=>this.scheduleWork()).catch(e=>logException(this.view.state,e)).then(()=>this.workScheduled--),n.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(n){return n.length?n[0]:null},enables:n=>[Language.state,parseWorker,EditorView.contentAttributes.compute([n],e=>{let o=e.facet(n);return o&&o.name?{"data-language":o.name}:{}})]});LanguageSupport=class{constructor(n,e=[]){this.language=n,this.support=e,this.extension=[n,e]}},LanguageDescription=class{constructor(n,e,o,a,s,l=void 0){this.name=n,this.alias=e,this.extensions=o,this.filename=a,this.loadFunc=s,this.support=l,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(n=>this.support=n,n=>{throw this.loading=null,n}))}static of(n){let{load:e,support:o}=n;if(!e){if(!o)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");e=()=>Promise.resolve(o)}return new LanguageDescription(n.name,(n.alias||[]).concat(n.name).map(a=>a.toLowerCase()),n.extensions||[],n.filename,e,o)}static matchFilename(n,e){for(let a of n)if(a.filename&&a.filename.test(e))return a;let o=/\.([^.]+)$/.exec(e);if(o){for(let a of n)if(a.extensions.indexOf(o[1])>-1)return a}return null}static matchLanguageName(n,e,o=!0){e=e.toLowerCase();for(let a of n)if(a.alias.some(s=>s==e))return a;if(o)for(let a of n)for(let s of a.alias){let l=e.indexOf(s);if(l>-1&&(s.length>2||!/\w/.test(e[l-1])&&!/\w/.test(e[l+s.length])))return a}return null}};let indentService;indentService=Facet.define(),indentUnit=Facet.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(o=>o!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function getIndentUnit(n){let e=n.facet(indentUnit);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function indentString(n,e){let o="",a=n.tabSize,s=n.facet(indentUnit)[0];if(s=="	"){for(;e>=a;)o+="	",e-=a;s=" "}for(let l=0;l<e;l++)o+=s;return o}function getIndentation(n,e){n instanceof EditorState&&(n=new IndentContext(n));for(let a of n.state.facet(indentService)){let s=a(n,e);if(s!==void 0)return s}let o=syntaxTree(n.state);return o.length>=e?syntaxIndentation(n,o,e):null}class IndentContext{constructor(e,o={}){this.state=e,this.options=o,this.unit=getIndentUnit(e)}lineAt(e,o=1){let a=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:l}=this.options;return s!=null&&s>=a.from&&s<=a.to?l&&s==e?{text:"",from:e}:(o<0?s<e:s<=e)?{text:a.text.slice(s-a.from),from:s}:{text:a.text.slice(0,s-a.from),from:a.from}:a}textAfterPos(e,o=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:a,from:s}=this.lineAt(e,o);return a.slice(e-s,Math.min(a.length,e+100-s))}column(e,o=1){let{text:a,from:s}=this.lineAt(e,o),l=this.countColumn(a,e-s),c=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return c>-1&&(l+=c-this.countColumn(a,a.search(/\S|$/))),l}countColumn(e,o=e.length){return countColumn(e,this.state.tabSize,o)}lineIndent(e,o=1){let{text:a,from:s}=this.lineAt(e,o),l=this.options.overrideIndentation;if(l){let c=l(s);if(c>-1)return c}return this.countColumn(a,a.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}indentNodeProp=new NodeProp;function syntaxIndentation(n,e,o){let a=e.resolveStack(o),s=e.resolveInner(o,-1).resolve(o,0).enterUnfinishedNodesBefore(o);if(s!=a.node){let l=[];for(let c=s;c&&!(c.from==a.node.from&&c.type==a.node.type);c=c.parent)l.push(c);for(let c=l.length-1;c>=0;c--)a={node:l[c],next:a}}return indentFor(a,n,o)}function indentFor(n,e,o){for(let a=n;a;a=a.next){let s=indentStrategy(a.node);if(s)return s(TreeIndentContext.create(e,o,a))}return 0}function ignoreClosed(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function indentStrategy(n){let e=n.type.prop(indentNodeProp);if(e)return e;let o=n.firstChild,a;if(o&&(a=o.type.prop(NodeProp.closedBy))){let s=n.lastChild,l=s&&a.indexOf(s.name)>-1;return c=>delimitedStrategy(c,!0,1,void 0,l&&!ignoreClosed(c)?s.from:void 0)}return n.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(e,o,a){super(e.state,e.options),this.base=e,this.pos=o,this.context=a}get node(){return this.context.node}static create(e,o,a){return new TreeIndentContext(e,o,a)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let o=this.state.doc.lineAt(e.from);for(;;){let a=e.resolve(o.from);for(;a.parent&&a.parent.from==a.from;)a=a.parent;if(isParent(a,e))break;o=this.state.doc.lineAt(a.from)}return this.lineIndent(o.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(n,e){for(let o=e;o;o=o.parent)if(n==o)return!0;return!1}function bracketedAligned(n){let e=n.node,o=e.childAfter(e.from),a=e.lastChild;if(!o)return null;let s=n.options.simulateBreak,l=n.state.doc.lineAt(o.from),c=s==null||s<=l.from?l.to:Math.min(l.to,s);for(let d=o.to;;){let u=e.childAfter(d);if(!u||u==a)return null;if(!u.type.isSkipped){if(u.from>=c)return null;let f=/^ */.exec(l.text.slice(o.to-l.from))[0].length;return{from:o.from,to:o.to+f}}d=u.to}}delimitedIndent=function({closing:n,align:e=!0,units:o=1}){return a=>delimitedStrategy(a,e,o,n)};function delimitedStrategy(n,e,o,a,s){let l=n.textAfter,c=l.match(/^\s*/)[0].length,d=a&&l.slice(c,c+a.length)==a||s==n.pos+c,u=e?bracketedAligned(n):null;return u?d?n.column(u.from):n.column(u.to):n.baseIndent+(d?0:n.unit*o)}flatIndent=n=>n.baseIndent,continuedIndent=function({except:n,units:e=1}={}){return o=>{let a=n&&n.test(o.textAfter);return o.baseIndent+(a?0:e*o.unit)}};const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let o=n.newDoc,{head:a}=n.newSelection.main,s=o.lineAt(a);if(a>s.from+DontIndentBeyond)return n;let l=o.sliceString(s.from,a);if(!e.some(f=>f.test(l)))return n;let{state:c}=n,d=-1,u=[];for(let{head:f}of c.selection.ranges){let v=c.doc.lineAt(f);if(v.from==d)continue;d=v.from;let b=getIndentation(c,v.from);if(b==null)continue;let k=/^\s*/.exec(v.text)[0],x=indentString(c,b);k!=x&&u.push({from:v.from,to:v.from+k.length,insert:x})}return u.length?[n,{changes:u,sequential:!0}]:n})}foldService=Facet.define(),foldNodeProp=new NodeProp,foldInside=function(n){let e=n.firstChild,o=n.lastChild;return e&&e.to<o.from?{from:e.to,to:o.type.isError?n.to:o.from}:null};class HighlightStyle{constructor(e,o){this.specs=e;let a;function s(d){let u=StyleModule.newName();return(a||(a=Object.create(null)))["."+u]=d,u}const l=typeof o.all=="string"?o.all:o.all?s(o.all):void 0,c=o.scope;this.scope=c instanceof Language?d=>d.prop(languageDataProp)==c.data:c?d=>d==c:void 0,this.style=tagHighlighter(e.map(d=>({tag:d.tag,class:d.class||s(Object.assign({},d,{tag:null}))})),{all:l}).style,this.module=a?new StyleModule(a):null,this.themeType=o.themeType}static define(e,o){return new HighlightStyle(e,o||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(n){return n.length?[n[0]]:null}});function getHighlighters(n){let e=n.facet(highlighterFacet);return e.length?e:n.facet(fallbackHighlighter)}function syntaxHighlighting(n,e){let o=[treeHighlighter],a;return n instanceof HighlightStyle&&(n.module&&o.push(EditorView.styleModule.of(n.module)),a=n.themeType),e!=null&&e.fallback?o.push(fallbackHighlighter.of(n)):a?o.push(highlighterFacet.computeN([EditorView.darkTheme],s=>s.facet(EditorView.darkTheme)==(a=="dark")?[n]:[])):o.push(highlighterFacet.of(n)),o}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state)),this.decoratedTo=e.viewport.to}update(e){let o=syntaxTree(e.state),a=getHighlighters(e.state),s=a!=getHighlighters(e.startState),{viewport:l}=e.view,c=e.changes.mapPos(this.decoratedTo,1);o.length<l.to&&!s&&o.type==this.tree.type&&c>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=c):(o!=this.tree||e.viewportChanged||s)&&(this.tree=o,this.decorations=this.buildDeco(e.view,a),this.decoratedTo=l.to)}buildDeco(e,o){if(!o||!this.tree.length)return Decoration.none;let a=new RangeSetBuilder;for(let{from:s,to:l}of e.visibleRanges)highlightTree(this.tree,o,(c,d,u)=>{a.add(c,d,this.markCache[u]||(this.markCache[u]=Decoration.mark({class:u})))},s,l);return a.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:n=>n.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$1=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(n){return combineConfig(n,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(n){let e=[],o=n.matched?matchingMark:nonmatchingMark;return e.push(o.range(n.start.from,n.start.to)),n.end&&e.push(o.range(n.end.from,n.end.to)),e}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let o=[],a=e.state.facet(bracketMatchingConfig);for(let s of e.state.selection.ranges){if(!s.empty)continue;let l=matchBrackets(e.state,s.head,-1,a)||s.head>0&&matchBrackets(e.state,s.head-1,1,a)||a.afterCursor&&(matchBrackets(e.state,s.head,1,a)||s.head<e.state.doc.length&&matchBrackets(e.state,s.head+1,-1,a));l&&(o=o.concat(a.renderMatch(l,e.state)))}return Decoration.set(o,!0)},provide:n=>EditorView.decorations.from(n)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$1];function bracketMatching(n={}){return[bracketMatchingConfig.of(n),bracketMatchingUnique]}bracketMatchingHandle=new NodeProp;function matchingNodes(n,e,o){let a=n.prop(e<0?NodeProp.openedBy:NodeProp.closedBy);if(a)return a;if(n.name.length==1){let s=o.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[o[s+e]]}return null}function findHandle(n){let e=n.type.prop(bracketMatchingHandle);return e?e(n.node):n}function matchBrackets(n,e,o,a={}){let s=a.maxScanDistance||DefaultScanDist,l=a.brackets||DefaultBrackets,c=syntaxTree(n),d=c.resolveInner(e,o);for(let u=d;u;u=u.parent){let f=matchingNodes(u.type,o,l);if(f&&u.from<u.to){let v=findHandle(u);if(v&&(o>0?e>=v.from&&e<v.to:e>v.from&&e<=v.to))return matchMarkedBrackets(n,e,o,u,v,f,l)}}return matchPlainBrackets(n,e,o,c,d.type,s,l)}function matchMarkedBrackets(n,e,o,a,s,l,c){let d=a.parent,u={from:s.from,to:s.to},f=0,v=d==null?void 0:d.cursor();if(v&&(o<0?v.childBefore(a.from):v.childAfter(a.to)))do if(o<0?v.to<=a.from:v.from>=a.to){if(f==0&&l.indexOf(v.type.name)>-1&&v.from<v.to){let b=findHandle(v);return{start:u,end:b?{from:b.from,to:b.to}:void 0,matched:!0}}else if(matchingNodes(v.type,o,c))f++;else if(matchingNodes(v.type,-o,c)){if(f==0){let b=findHandle(v);return{start:u,end:b&&b.from<b.to?{from:b.from,to:b.to}:void 0,matched:!1}}f--}}while(o<0?v.prevSibling():v.nextSibling());return{start:u,matched:!1}}function matchPlainBrackets(n,e,o,a,s,l,c){let d=o<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),u=c.indexOf(d);if(u<0||u%2==0!=o>0)return null;let f={from:o<0?e-1:e,to:o>0?e+1:e},v=n.doc.iterRange(e,o>0?n.doc.length:0),b=0;for(let k=0;!v.next().done&&k<=l;){let x=v.value;o<0&&(k+=x.length);let _=e+k*o;for(let E=o>0?0:x.length-1,B=o>0?x.length:-1;E!=B;E+=o){let M=c.indexOf(x[E]);if(!(M<0||a.resolveInner(_+E,1).type!=s))if(M%2==0==o>0)b++;else{if(b==1)return{start:f,end:{from:_+E,to:_+E+1},matched:M>>1==u>>1};b--}}o>0&&(k+=x.length)}return v.done?{start:f,matched:!1}:null}function countCol(n,e,o,a=0,s=0){e==null&&(e=n.search(/[^\s\u00a0]/),e==-1&&(e=n.length));let l=s;for(let c=a;c<e;c++)n.charCodeAt(c)==9?l+=o-l%o:l++;return l}class StringStream{constructor(e,o,a,s){this.string=e,this.tabSize=o,this.indentUnit=a,this.overrideIndent=s,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let o=this.string.charAt(this.pos),a;if(typeof e=="string"?a=o==e:a=o&&(e instanceof RegExp?e.test(o):e(o)),a)return++this.pos,o}eatWhile(e){let o=this.pos;for(;this.eat(e););return this.pos>o}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let o=this.string.indexOf(e,this.pos);if(o>-1)return this.pos=o,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countCol(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:countCol(this.string,null,this.tabSize)}match(e,o,a){if(typeof e=="string"){let s=c=>a?c.toLowerCase():c,l=this.string.substr(this.pos,e.length);return s(l)==s(e)?(o!==!1&&(this.pos+=e.length),!0):null}else{let s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&o!==!1&&(this.pos+=s[0].length),s)}}current(){return this.string.slice(this.start,this.pos)}}function fullParser(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||defaultCopyState,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||noTokens}}function defaultCopyState(n){if(typeof n!="object")return n;let e={};for(let o in n){let a=n[o];e[o]=a instanceof Array?a.slice():a}return e}const IndentedFrom=new WeakMap;class StreamLanguage extends Language{constructor(e){let o=defineLanguageFacet(e.languageData),a=fullParser(e),s,l=new class extends Parser$1{createParse(c,d,u){return new Parse(s,c,d,u)}};super(o,l,[],e.name),this.topNode=docID(o,this),s=this,this.streamParser=a,this.stateAfter=new NodeProp({perNode:!0}),this.tokenTable=e.tokenTable?new TokenTable(a.tokenTable):defaultTokenTable}static define(e){return new StreamLanguage(e)}getIndent(e){let o,{overrideIndentation:a}=e.options;a&&(o=IndentedFrom.get(e.state),o!=null&&o<e.pos-1e4&&(o=void 0));let s=findState(this,e.node.tree,e.node.from,e.node.from,o??e.pos),l,c;if(s?(c=s.state,l=s.pos+1):(c=this.streamParser.startState(e.unit),l=e.node.from),e.pos-l>1e4)return null;for(;l<e.pos;){let u=e.state.doc.lineAt(l),f=Math.min(e.pos,u.to);if(u.length){let v=a?a(u.from):-1,b=new StringStream(u.text,e.state.tabSize,e.unit,v<0?void 0:v);for(;b.pos<f-u.from;)readToken(this.streamParser.token,b,c)}else this.streamParser.blankLine(c,e.unit);if(f==e.pos)break;l=u.to+1}let d=e.lineAt(e.pos);return a&&o==null&&IndentedFrom.set(e.state,d.from),this.streamParser.indent(c,/^\s*(.*)/.exec(d.text)[1],e)}get allowsNesting(){return!1}}function findState(n,e,o,a,s){let l=o>=a&&o+e.length<=s&&e.prop(n.stateAfter);if(l)return{state:n.streamParser.copyState(l),pos:o+e.length};for(let c=e.children.length-1;c>=0;c--){let d=e.children[c],u=o+e.positions[c],f=d instanceof Tree&&u<s&&findState(n,d,u,a,s);if(f)return f}return null}function cutTree(n,e,o,a,s){if(s&&o<=0&&a>=e.length)return e;!s&&o==0&&e.type==n.topNode&&(s=!0);for(let l=e.children.length-1;l>=0;l--){let c=e.positions[l],d=e.children[l],u;if(c<a&&d instanceof Tree){if(!(u=cutTree(n,d,o-c,a-c,s)))break;return s?new Tree(e.type,e.children.slice(0,l).concat(u),e.positions.slice(0,l+1),c+u.length):u}}return null}function findStartInFragments(n,e,o,a,s){for(let l of e){let c=l.from+(l.openStart?25:0),d=l.to-(l.openEnd?25:0),u=c<=o&&d>o&&findState(n,l.tree,0-l.offset,o,d),f;if(u&&u.pos<=a&&(f=cutTree(n,l.tree,o+l.offset,u.pos+l.offset,!1)))return{state:u.state,tree:f}}return{state:n.streamParser.startState(s?getIndentUnit(s):4),tree:Tree.empty}}class Parse{constructor(e,o,a,s){this.lang=e,this.input=o,this.fragments=a,this.ranges=s,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=s[s.length-1].to;let l=ParseContext.get(),c=s[0].from,{state:d,tree:u}=findStartInFragments(e,a,c,this.to,l==null?void 0:l.state);this.state=d,this.parsedPos=this.chunkStart=c+u.length;for(let f=0;f<u.children.length;f++)this.chunks.push(u.children[f]),this.chunkPos.push(u.positions[f]);l&&this.parsedPos<l.viewport.from-1e5&&s.some(f=>f.from<=l.viewport.from&&f.to>=l.viewport.from)&&(this.state=this.lang.streamParser.startState(getIndentUnit(l.state)),l.skipUntilInView(this.parsedPos,l.viewport.from),this.parsedPos=l.viewport.from),this.moveRangeIndex()}advance(){let e=ParseContext.get(),o=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),a=Math.min(o,this.chunkStart+2048);for(e&&(a=Math.min(a,e.viewport.to));this.parsedPos<a;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=o?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,o),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let o=this.input.chunk(e);if(this.input.lineChunks)o==`
`&&(o="");else{let a=o.indexOf(`
`);a>-1&&(o=o.slice(0,a))}return e+o.length<=this.to?o:o.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,o=this.lineAfter(e),a=e+o.length;for(let s=this.rangeIndex;;){let l=this.ranges[s].to;if(l>=a||(o=o.slice(0,l-(a-o.length)),s++,s==this.ranges.length))break;let c=this.ranges[s].from,d=this.lineAfter(c);o+=d,a=c+d.length}return{line:o,end:a}}skipGapsTo(e,o,a){for(;;){let s=this.ranges[this.rangeIndex].to,l=e+o;if(a>0?s>l:s>=l)break;let c=this.ranges[++this.rangeIndex].from;o+=c-s}return o}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,o,a,s){let l=4;if(this.ranges.length>1){s=this.skipGapsTo(o,s,1),o+=s;let d=this.chunk.length;s=this.skipGapsTo(a,s,-1),a+=s,l+=this.chunk.length-d}let c=this.chunk.length-4;return l==4&&c>=0&&this.chunk[c]==e&&this.chunk[c+2]==o?this.chunk[c+2]=a:this.chunk.push(e,o,a,l),s}parseLine(e){let{line:o,end:a}=this.nextLine(),s=0,{streamParser:l}=this.lang,c=new StringStream(o,e?e.state.tabSize:4,e?getIndentUnit(e.state):2);if(c.eol())l.blankLine(this.state,c.indentUnit);else for(;!c.eol();){let d=readToken(l.token,c,this.state);if(d&&(s=this.emitToken(this.lang.tokenTable.resolve(d),this.parsedPos+c.start,this.parsedPos+c.pos,s)),c.start>1e4)break}this.parsedPos=a,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Tree(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function readToken(n,e,o){e.start=e.pos;for(let a=0;a<10;a++){let s=n(e,o);if(e.pos>e.start)return s}throw new Error("Stream parser failed to advance stream.")}const noTokens=Object.create(null),typeArray=[NodeType.none],nodeSet=new NodeSet(typeArray),warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[n]=createTokenType(noTokens,e);class TokenTable{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),defaultTable)}resolve(e){return e?this.table[e]||(this.table[e]=createTokenType(this.extra,e)):0}}const defaultTokenTable=new TokenTable(noTokens);function warnForPart(n,e){warned.indexOf(n)>-1||(warned.push(n),console.warn(e))}function createTokenType(n,e){let o=[];for(let d of e.split(" ")){let u=[];for(let f of d.split(".")){let v=n[f]||tags[f];v?typeof v=="function"?u.length?u=u.map(v):warnForPart(f,`Modifier ${f} used at start of tag`):u.length?warnForPart(f,`Tag ${f} used as modifier`):u=Array.isArray(v)?v:[v]:warnForPart(f,`Unknown highlighting tag ${f}`)}for(let f of u)o.push(f)}if(!o.length)return 0;let a=e.replace(/ /g,"_"),s=a+" "+o.map(d=>d.id),l=byTag[s];if(l)return l.id;let c=byTag[s]=NodeType.define({id:typeArray.length,name:a,props:[styleTags({[a]:o})]});return typeArray.push(c),c.id}function docID(n,e){let o=NodeType.define({id:typeArray.length,name:"Document",props:[languageDataProp.add(()=>n),indentNodeProp.add(()=>a=>e.getIndent(a))],top:!0});return typeArray.push(o),o}Direction.RTL,Direction.LTR;const toggleComment=n=>{let{state:e}=n,o=e.doc.lineAt(e.selection.main.from),a=getConfig(n.state,o.from);return a.line?toggleLineComment(n):a.block?toggleBlockCommentByLine(n):!1};function command(n,e){return({state:o,dispatch:a})=>{if(o.readOnly)return!1;let s=n(e,o);return s?(a(o.update(s)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((n,e)=>changeBlockComment(n,e,selectedLineRanges(e)),0);function getConfig(n,e){let o=n.languageDataAt("commentTokens",e);return o.length?o[0]:{}}const SearchMargin=50;function findBlockComment(n,{open:e,close:o},a,s){let l=n.sliceDoc(a-SearchMargin,a),c=n.sliceDoc(s,s+SearchMargin),d=/\s*$/.exec(l)[0].length,u=/^\s*/.exec(c)[0].length,f=l.length-d;if(l.slice(f-e.length,f)==e&&c.slice(u,u+o.length)==o)return{open:{pos:a-d,margin:d&&1},close:{pos:s+u,margin:u&&1}};let v,b;s-a<=2*SearchMargin?v=b=n.sliceDoc(a,s):(v=n.sliceDoc(a,a+SearchMargin),b=n.sliceDoc(s-SearchMargin,s));let k=/^\s*/.exec(v)[0].length,x=/\s*$/.exec(b)[0].length,_=b.length-x-o.length;return v.slice(k,k+e.length)==e&&b.slice(_,_+o.length)==o?{open:{pos:a+k+e.length,margin:/\s/.test(v.charAt(k+e.length))?1:0},close:{pos:s-x-o.length,margin:/\s/.test(b.charAt(_-1))?1:0}}:null}function selectedLineRanges(n){let e=[];for(let o of n.selection.ranges){let a=n.doc.lineAt(o.from),s=o.to<=a.to?a:n.doc.lineAt(o.to);s.from>a.from&&s.from==o.to&&(s=o.to==a.to+1?a:n.doc.lineAt(o.to-1));let l=e.length-1;l>=0&&e[l].to>a.from?e[l].to=s.to:e.push({from:a.from+/^\s*/.exec(a.text)[0].length,to:s.to})}return e}function changeBlockComment(n,e,o=e.selection.ranges){let a=o.map(l=>getConfig(e,l.from).block);if(!a.every(l=>l))return null;let s=o.map((l,c)=>findBlockComment(e,a[c],l.from,l.to));if(n!=2&&!s.every(l=>l))return{changes:e.changes(o.map((l,c)=>s[c]?[]:[{from:l.from,insert:a[c].open+" "},{from:l.to,insert:" "+a[c].close}]))};if(n!=1&&s.some(l=>l)){let l=[];for(let c=0,d;c<s.length;c++)if(d=s[c]){let u=a[c],{open:f,close:v}=d;l.push({from:f.pos-u.open.length,to:f.pos+f.margin},{from:v.pos-v.margin,to:v.pos+u.close.length})}return{changes:l}}return null}function changeLineComment(n,e,o=e.selection.ranges){let a=[],s=-1;for(let{from:l,to:c}of o){let d=a.length,u=1e9,f=getConfig(e,l).line;if(f){for(let v=l;v<=c;){let b=e.doc.lineAt(v);if(b.from>s&&(l==c||c>b.from)){s=b.from;let k=/^\s*/.exec(b.text)[0].length,x=k==b.length,_=b.text.slice(k,k+f.length)==f?k:-1;k<b.text.length&&k<u&&(u=k),a.push({line:b,comment:_,token:f,indent:k,empty:x,single:!1})}v=b.to+1}if(u<1e9)for(let v=d;v<a.length;v++)a[v].indent<a[v].line.text.length&&(a[v].indent=u);a.length==d+1&&(a[d].single=!0)}}if(n!=2&&a.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:d,token:u,indent:f,empty:v,single:b}of a)(b||!v)&&l.push({from:d.from+f,insert:u+" "});let c=e.changes(l);return{changes:c,selection:e.selection.map(c,1)}}else if(n!=1&&a.some(l=>l.comment>=0)){let l=[];for(let{line:c,comment:d,token:u}of a)if(d>=0){let f=c.from+d,v=f+u.length;c.text[v-c.from]==" "&&v++,l.push({from:f,to:v})}return{changes:l}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(n){return combineConfig(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,o)=>o},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,o)=>(a,s)=>e(a,s)||o(a,s)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(n,e){let o=e.state.facet(historyConfig),a=e.annotation(fromHistory);if(a){let u=HistEvent.fromTransaction(e,a.selection),f=a.side,v=f==0?n.undone:n.done;return u?v=updateBranch(v,v.length,o.minDepth,u):v=addSelection(v,e.startState.selection),new HistoryState(f==0?a.rest:v,f==0?v:a.rest)}let s=e.annotation(isolateHistory);if((s=="full"||s=="before")&&(n=n.isolate()),e.annotation(Transaction.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let l=HistEvent.fromTransaction(e),c=e.annotation(Transaction.time),d=e.annotation(Transaction.userEvent);return l?n=n.addChanges(l,c,d,o,e):e.selection&&(n=n.addSelection(e.startState.selection,c,d,o.newGroupDelay)),(s=="full"||s=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new HistoryState(n.done.map(HistEvent.fromJSON),n.undone.map(HistEvent.fromJSON))}});function history$1(n={}){return[historyField_,historyConfig.of(n),EditorView.domEventHandlers({beforeinput(e,o){let a=e.inputType=="historyUndo"?undo:e.inputType=="historyRedo"?redo:null;return a?(e.preventDefault(),a(o)):!1}})]}function cmd(n,e){return function({state:o,dispatch:a}){if(!e&&o.readOnly)return!1;let s=o.field(historyField_,!1);if(!s)return!1;let l=s.pop(n,o,e);return l?(a(l),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(e,o,a,s,l){this.changes=e,this.effects=o,this.mapped=a,this.startSelection=s,this.selectionsAfter=l}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,o,a;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(o=this.mapped)===null||o===void 0?void 0:o.toJSON(),startSelection:(a=this.startSelection)===null||a===void 0?void 0:a.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,o){let a=none;for(let s of e.startState.facet(invertedEffects)){let l=s(e);l.length&&(a=a.concat(l))}return!a.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),a,void 0,o||e.startState.selection,none)}static selection(e){return new HistEvent(void 0,none,void 0,void 0,e)}}function updateBranch(n,e,o,a){let s=e+1>o+20?e-o-1:0,l=n.slice(s,e);return l.push(a),l}function isAdjacent(n,e){let o=[],a=!1;return n.iterChangedRanges((s,l)=>o.push(s,l)),e.iterChangedRanges((s,l,c,d)=>{for(let u=0;u<o.length;){let f=o[u++],v=o[u++];d>=f&&c<=v&&(a=!0)}}),a}function eqSelectionShape(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((o,a)=>o.empty!=e.ranges[a].empty).length===0}function conc(n,e){return n.length?e.length?n.concat(e):n:e}const none=[],MaxSelectionsPerEvent=200;function addSelection(n,e){if(n.length){let o=n[n.length-1],a=o.selectionsAfter.slice(Math.max(0,o.selectionsAfter.length-MaxSelectionsPerEvent));return a.length&&a[a.length-1].eq(e)?n:(a.push(e),updateBranch(n,n.length-1,1e9,o.setSelAfter(a)))}else return[HistEvent.selection([e])]}function popSelection(n){let e=n[n.length-1],o=n.slice();return o[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),o}function addMappingToBranch(n,e){if(!n.length)return n;let o=n.length,a=none;for(;o;){let s=mapEvent(n[o-1],e,a);if(s.changes&&!s.changes.empty||s.effects.length){let l=n.slice(0,o);return l[o-1]=s,l}else e=s.mapped,o--,a=s.selectionsAfter}return a.length?[HistEvent.selection(a)]:none}function mapEvent(n,e,o){let a=conc(n.selectionsAfter.length?n.selectionsAfter.map(d=>d.map(e)):none,o);if(!n.changes)return HistEvent.selection(a);let s=n.changes.map(e),l=e.mapDesc(n.changes,!0),c=n.mapped?n.mapped.composeDesc(l):l;return new HistEvent(s,StateEffect.mapEffects(n.effects,e),c,n.startSelection.map(l),a)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(e,o,a=0,s=void 0){this.done=e,this.undone=o,this.prevTime=a,this.prevUserEvent=s}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(e,o,a,s,l){let c=this.done,d=c[c.length-1];return d&&d.changes&&!d.changes.empty&&e.changes&&(!a||joinableUserEvent.test(a))&&(!d.selectionsAfter.length&&o-this.prevTime<s.newGroupDelay&&s.joinToEvent(l,isAdjacent(d.changes,e.changes))||a=="input.type.compose")?c=updateBranch(c,c.length-1,s.minDepth,new HistEvent(e.changes.compose(d.changes),conc(StateEffect.mapEffects(e.effects,d.changes),d.effects),d.mapped,d.startSelection,none)):c=updateBranch(c,c.length,s.minDepth,e),new HistoryState(c,none,o,a)}addSelection(e,o,a,s){let l=this.done.length?this.done[this.done.length-1].selectionsAfter:none;return l.length>0&&o-this.prevTime<s&&a==this.prevUserEvent&&a&&/^select($|\.)/.test(a)&&eqSelectionShape(l[l.length-1],e)?this:new HistoryState(addSelection(this.done,e),this.undone,o,a)}addMapping(e){return new HistoryState(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,o,a){let s=e==0?this.done:this.undone;if(s.length==0)return null;let l=s[s.length-1],c=l.selectionsAfter[0]||o.selection;if(a&&l.selectionsAfter.length)return o.update({selection:l.selectionsAfter[l.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(s),selection:c}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(l.changes){let d=s.length==1?none:s.slice(0,s.length-1);return l.mapped&&(d=addMappingToBranch(d,l.mapped)),o.update({changes:l.changes,selection:l.startSelection,effects:l.effects,annotations:fromHistory.of({side:e,rest:d,selection:c}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none,none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(n,e){return EditorSelection.create(n.ranges.map(e),n.mainIndex)}function setSel(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:n,dispatch:e},o){let a=updateSel(n.selection,o);return a.eq(n.selection,!0)?!1:(e(setSel(n,a)),!0)}function rangeEnd(n,e){return EditorSelection.cursor(e?n.to:n.from)}function cursorByChar(n,e){return moveSel(n,o=>o.empty?n.moveByChar(o,e):rangeEnd(o,e))}function ltrAtCursor(n){return n.textDirectionAt(n.state.selection.main.head)==Direction.LTR}const cursorCharLeft=n=>cursorByChar(n,!ltrAtCursor(n)),cursorCharRight=n=>cursorByChar(n,ltrAtCursor(n));function cursorByGroup(n,e){return moveSel(n,o=>o.empty?n.moveByGroup(o,e):rangeEnd(o,e))}const cursorGroupLeft=n=>cursorByGroup(n,!ltrAtCursor(n)),cursorGroupRight=n=>cursorByGroup(n,ltrAtCursor(n));function interestingNode(n,e,o){if(e.type.prop(o))return!0;let a=e.to-e.from;return a&&(a>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function moveBySyntax(n,e,o){let a=syntaxTree(n).resolveInner(e.head),s=o?NodeProp.closedBy:NodeProp.openedBy;for(let u=e.head;;){let f=o?a.childAfter(u):a.childBefore(u);if(!f)break;interestingNode(n,f,s)?a=f:u=o?f.to:f.from}let l=a.type.prop(s),c,d;return l&&(c=o?matchBrackets(n,a.from,1):matchBrackets(n,a.to,-1))&&c.matched?d=o?c.end.to:c.end.from:d=o?a.to:a.from,EditorSelection.cursor(d,o?-1:1)}const cursorSyntaxLeft=n=>moveSel(n,e=>moveBySyntax(n.state,e,!ltrAtCursor(n))),cursorSyntaxRight=n=>moveSel(n,e=>moveBySyntax(n.state,e,ltrAtCursor(n)));function cursorByLine(n,e){return moveSel(n,o=>{if(!o.empty)return rangeEnd(o,e);let a=n.moveVertically(o,e);return a.head!=o.head?a:n.moveToLineBoundary(o,e)})}const cursorLineUp=n=>cursorByLine(n,!1),cursorLineDown=n=>cursorByLine(n,!0);function pageInfo(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,o=0,a=0,s;if(e){for(let l of n.state.facet(EditorView.scrollMargins)){let c=l(n);c!=null&&c.top&&(o=Math.max(c==null?void 0:c.top,o)),c!=null&&c.bottom&&(a=Math.max(c==null?void 0:c.bottom,a))}s=n.scrollDOM.clientHeight-o-a}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:o,marginBottom:a,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function cursorByPage(n,e){let o=pageInfo(n),{state:a}=n,s=updateSel(a.selection,c=>c.empty?n.moveVertically(c,e,o.height):rangeEnd(c,e));if(s.eq(a.selection))return!1;let l;if(o.selfScroll){let c=n.coordsAtPos(a.selection.main.head),d=n.scrollDOM.getBoundingClientRect(),u=d.top+o.marginTop,f=d.bottom-o.marginBottom;c&&c.top>u&&c.bottom<f&&(l=EditorView.scrollIntoView(s.main.head,{y:"start",yMargin:c.top-u}))}return n.dispatch(setSel(a,s),{effects:l}),!0}const cursorPageUp=n=>cursorByPage(n,!1),cursorPageDown=n=>cursorByPage(n,!0);function moveByLineBoundary(n,e,o){let a=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,o);if(s.head==e.head&&s.head!=(o?a.to:a.from)&&(s=n.moveToLineBoundary(e,o,!1)),!o&&s.head==a.from&&a.length){let l=/^\s*/.exec(n.state.sliceDoc(a.from,Math.min(a.from+100,a.to)))[0].length;l&&e.head!=a.from+l&&(s=EditorSelection.cursor(a.from+l))}return s}const cursorLineBoundaryForward=n=>moveSel(n,e=>moveByLineBoundary(n,e,!0)),cursorLineBoundaryBackward=n=>moveSel(n,e=>moveByLineBoundary(n,e,!1)),cursorLineBoundaryLeft=n=>moveSel(n,e=>moveByLineBoundary(n,e,!ltrAtCursor(n))),cursorLineBoundaryRight=n=>moveSel(n,e=>moveByLineBoundary(n,e,ltrAtCursor(n))),cursorLineStart=n=>moveSel(n,e=>EditorSelection.cursor(n.lineBlockAt(e.head).from,1)),cursorLineEnd=n=>moveSel(n,e=>EditorSelection.cursor(n.lineBlockAt(e.head).to,-1));function toMatchingBracket(n,e,o){let a=!1,s=updateSel(n.selection,l=>{let c=matchBrackets(n,l.head,-1)||matchBrackets(n,l.head,1)||l.head>0&&matchBrackets(n,l.head-1,1)||l.head<n.doc.length&&matchBrackets(n,l.head+1,-1);if(!c||!c.end)return l;a=!0;let d=c.start.from==l.head?c.end.to:c.end.from;return EditorSelection.cursor(d)});return a?(e(setSel(n,s)),!0):!1}const cursorMatchingBracket=({state:n,dispatch:e})=>toMatchingBracket(n,e);function extendSel(n,e){let o=updateSel(n.state.selection,a=>{let s=e(a);return EditorSelection.range(a.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return o.eq(n.state.selection)?!1:(n.dispatch(setSel(n.state,o)),!0)}function selectByChar(n,e){return extendSel(n,o=>n.moveByChar(o,e))}const selectCharLeft=n=>selectByChar(n,!ltrAtCursor(n)),selectCharRight=n=>selectByChar(n,ltrAtCursor(n));function selectByGroup(n,e){return extendSel(n,o=>n.moveByGroup(o,e))}const selectGroupLeft=n=>selectByGroup(n,!ltrAtCursor(n)),selectGroupRight=n=>selectByGroup(n,ltrAtCursor(n)),selectSyntaxLeft=n=>extendSel(n,e=>moveBySyntax(n.state,e,!ltrAtCursor(n))),selectSyntaxRight=n=>extendSel(n,e=>moveBySyntax(n.state,e,ltrAtCursor(n)));function selectByLine(n,e){return extendSel(n,o=>n.moveVertically(o,e))}const selectLineUp=n=>selectByLine(n,!1),selectLineDown=n=>selectByLine(n,!0);function selectByPage(n,e){return extendSel(n,o=>n.moveVertically(o,e,pageInfo(n).height))}const selectPageUp=n=>selectByPage(n,!1),selectPageDown=n=>selectByPage(n,!0),selectLineBoundaryForward=n=>extendSel(n,e=>moveByLineBoundary(n,e,!0)),selectLineBoundaryBackward=n=>extendSel(n,e=>moveByLineBoundary(n,e,!1)),selectLineBoundaryLeft=n=>extendSel(n,e=>moveByLineBoundary(n,e,!ltrAtCursor(n))),selectLineBoundaryRight=n=>extendSel(n,e=>moveByLineBoundary(n,e,ltrAtCursor(n))),selectLineStart=n=>extendSel(n,e=>EditorSelection.cursor(n.lineBlockAt(e.head).from)),selectLineEnd=n=>extendSel(n,e=>EditorSelection.cursor(n.lineBlockAt(e.head).to)),cursorDocStart=({state:n,dispatch:e})=>(e(setSel(n,{anchor:0})),!0),cursorDocEnd=({state:n,dispatch:e})=>(e(setSel(n,{anchor:n.doc.length})),!0),selectDocStart=({state:n,dispatch:e})=>(e(setSel(n,{anchor:n.selection.main.anchor,head:0})),!0),selectDocEnd=({state:n,dispatch:e})=>(e(setSel(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),selectAll=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),selectLine=({state:n,dispatch:e})=>{let o=selectedLineBlocks(n).map(({from:a,to:s})=>EditorSelection.range(a,Math.min(s+1,n.doc.length)));return e(n.update({selection:EditorSelection.create(o),userEvent:"select"})),!0},selectParentSyntax=({state:n,dispatch:e})=>{let o=updateSel(n.selection,a=>{let s=syntaxTree(n),l=s.resolveStack(a.from,1);if(a.empty){let c=s.resolveStack(a.from,-1);c.node.from>=l.node.from&&c.node.to<=l.node.to&&(l=c)}for(let c=l;c;c=c.next){let{node:d}=c;if((d.from<a.from&&d.to>=a.to||d.to>a.to&&d.from<=a.from)&&c.next)return EditorSelection.range(d.to,d.from)}return a});return o.eq(n.selection)?!1:(e(setSel(n,o)),!0)},simplifySelection=({state:n,dispatch:e})=>{let o=n.selection,a=null;return o.ranges.length>1?a=EditorSelection.create([o.main]):o.main.empty||(a=EditorSelection.create([EditorSelection.cursor(o.main.head)])),a?(e(setSel(n,a)),!0):!1};function deleteBy(n,e){if(n.state.readOnly)return!1;let o="delete.selection",{state:a}=n,s=a.changeByRange(l=>{let{from:c,to:d}=l;if(c==d){let u=e(l);u<c?(o="delete.backward",u=skipAtomic(n,u,!1)):u>c&&(o="delete.forward",u=skipAtomic(n,u,!0)),c=Math.min(c,u),d=Math.max(d,u)}else c=skipAtomic(n,c,!1),d=skipAtomic(n,d,!0);return c==d?{range:l}:{changes:{from:c,to:d},range:EditorSelection.cursor(c,c<l.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(a.update(s,{scrollIntoView:!0,userEvent:o,effects:o=="delete.selection"?EditorView.announce.of(a.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(n,e,o){if(n instanceof EditorView)for(let a of n.state.facet(EditorView.atomicRanges).map(s=>s(n)))a.between(e,e,(s,l)=>{s<e&&l>e&&(e=o?l:s)});return e}const deleteByChar=(n,e,o)=>deleteBy(n,a=>{let s=a.from,{state:l}=n,c=l.doc.lineAt(s),d,u;if(o&&!e&&s>c.from&&s<c.from+200&&!/[^ \t]/.test(d=c.text.slice(0,s-c.from))){if(d[d.length-1]=="	")return s-1;let f=countColumn(d,l.tabSize),v=f%getIndentUnit(l)||getIndentUnit(l);for(let b=0;b<v&&d[d.length-1-b]==" ";b++)s--;u=s}else u=findClusterBreak(c.text,s-c.from,e,e)+c.from,u==s&&c.number!=(e?l.doc.lines:1)?u+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(c.text.slice(u-c.from,s-c.from))&&(u=findClusterBreak(c.text,u-c.from,!1,!1)+c.from);return u}),deleteCharBackward=n=>deleteByChar(n,!1,!0),deleteCharForward=n=>deleteByChar(n,!0,!1),deleteByGroup=(n,e)=>deleteBy(n,o=>{let a=o.head,{state:s}=n,l=s.doc.lineAt(a),c=s.charCategorizer(a);for(let d=null;;){if(a==(e?l.to:l.from)){a==o.head&&l.number!=(e?s.doc.lines:1)&&(a+=e?1:-1);break}let u=findClusterBreak(l.text,a-l.from,e)+l.from,f=l.text.slice(Math.min(a,u)-l.from,Math.max(a,u)-l.from),v=c(f);if(d!=null&&v!=d)break;(f!=" "||a!=o.head)&&(d=v),a=u}return a}),deleteGroupBackward=n=>deleteByGroup(n,!1),deleteGroupForward=n=>deleteByGroup(n,!0),deleteToLineEnd=n=>deleteBy(n,e=>{let o=n.lineBlockAt(e.head).to;return e.head<o?o:Math.min(n.state.doc.length,e.head+1)}),deleteLineBoundaryBackward=n=>deleteBy(n,e=>{let o=n.moveToLineBoundary(e,!1).head;return e.head>o?o:Math.max(0,e.head-1)}),deleteLineBoundaryForward=n=>deleteBy(n,e=>{let o=n.moveToLineBoundary(e,!0).head;return e.head<o?o:Math.min(n.state.doc.length,e.head+1)}),splitLine=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let o=n.changeByRange(a=>({changes:{from:a.from,to:a.to,insert:Text.of(["",""])},range:EditorSelection.cursor(a.from)}));return e(n.update(o,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let o=n.changeByRange(a=>{if(!a.empty||a.from==0||a.from==n.doc.length)return{range:a};let s=a.from,l=n.doc.lineAt(s),c=s==l.from?s-1:findClusterBreak(l.text,s-l.from,!1)+l.from,d=s==l.to?s+1:findClusterBreak(l.text,s-l.from,!0)+l.from;return{changes:{from:c,to:d,insert:n.doc.slice(s,d).append(n.doc.slice(c,s))},range:EditorSelection.cursor(d)}});return o.changes.empty?!1:(e(n.update(o,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(n){let e=[],o=-1;for(let a of n.selection.ranges){let s=n.doc.lineAt(a.from),l=n.doc.lineAt(a.to);if(!a.empty&&a.to==l.from&&(l=n.doc.lineAt(a.to-1)),o>=s.number){let c=e[e.length-1];c.to=l.to,c.ranges.push(a)}else e.push({from:s.from,to:l.to,ranges:[a]});o=l.number+1}return e}function moveLine(n,e,o){if(n.readOnly)return!1;let a=[],s=[];for(let l of selectedLineBlocks(n)){if(o?l.to==n.doc.length:l.from==0)continue;let c=n.doc.lineAt(o?l.to+1:l.from-1),d=c.length+1;if(o){a.push({from:l.to,to:c.to},{from:l.from,insert:c.text+n.lineBreak});for(let u of l.ranges)s.push(EditorSelection.range(Math.min(n.doc.length,u.anchor+d),Math.min(n.doc.length,u.head+d)))}else{a.push({from:c.from,to:l.from},{from:l.to,insert:n.lineBreak+c.text});for(let u of l.ranges)s.push(EditorSelection.range(u.anchor-d,u.head-d))}}return a.length?(e(n.update({changes:a,scrollIntoView:!0,selection:EditorSelection.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:n,dispatch:e})=>moveLine(n,e,!1),moveLineDown=({state:n,dispatch:e})=>moveLine(n,e,!0);function copyLine(n,e,o){if(n.readOnly)return!1;let a=[];for(let s of selectedLineBlocks(n))o?a.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):a.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:a,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:n,dispatch:e})=>copyLine(n,e,!1),copyLineDown=({state:n,dispatch:e})=>copyLine(n,e,!0),deleteLine=n=>{if(n.state.readOnly)return!1;let{state:e}=n,o=e.changes(selectedLineBlocks(e).map(({from:s,to:l})=>(s>0?s--:l<e.doc.length&&l++,{from:s,to:l}))),a=updateSel(e.selection,s=>{let l;if(n.lineWrapping){let c=n.lineBlockAt(s.head),d=n.coordsAtPos(s.head,s.assoc||1);d&&(l=c.bottom+n.documentTop-d.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,l)}).map(o);return n.dispatch({changes:o,selection:a,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let o=syntaxTree(n).resolveInner(e),a=o.childBefore(e),s=o.childAfter(e),l;return a&&s&&a.to<=e&&s.from>=e&&(l=a.type.prop(NodeProp.closedBy))&&l.indexOf(s.name)>-1&&n.doc.lineAt(a.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(a.to,s.from))?{from:a.to,to:s.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(n){return({state:e,dispatch:o})=>{if(e.readOnly)return!1;let a=e.changeByRange(s=>{let{from:l,to:c}=s,d=e.doc.lineAt(l),u=!n&&l==c&&isBetweenBrackets(e,l);n&&(l=c=(c<=d.to?d:e.doc.lineAt(c)).to);let f=new IndentContext(e,{simulateBreak:l,simulateDoubleBreak:!!u}),v=getIndentation(f,l);for(v==null&&(v=countColumn(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));c<d.to&&/\s/.test(d.text[c-d.from]);)c++;u?{from:l,to:c}=u:l>d.from&&l<d.from+100&&!/\S/.test(d.text.slice(0,l))&&(l=d.from);let b=["",indentString(e,v)];return u&&b.push(indentString(e,f.lineIndent(d.from,-1))),{changes:{from:l,to:c,insert:Text.of(b)},range:EditorSelection.cursor(l+1+b[1].length)}});return o(e.update(a,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(n,e){let o=-1;return n.changeByRange(a=>{let s=[];for(let c=a.from;c<=a.to;){let d=n.doc.lineAt(c);d.number>o&&(a.empty||a.to>d.from)&&(e(d,s,a),o=d.number),c=d.to+1}let l=n.changes(s);return{changes:s,range:EditorSelection.range(l.mapPos(a.anchor,1),l.mapPos(a.head,1))}})}const indentSelection=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let o=Object.create(null),a=new IndentContext(n,{overrideIndentation:l=>o[l]??-1}),s=changeBySelectedLine(n,(l,c,d)=>{let u=getIndentation(a,l.from);if(u==null)return;/\S/.test(l.text)||(u=0);let f=/^\s*/.exec(l.text)[0],v=indentString(n,u);(f!=v||d.from<l.from+f.length)&&(o[l.from]=u,c.push({from:l.from,to:l.from+f.length,insert:v}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},indentMore=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(changeBySelectedLine(n,(o,a)=>{a.push({from:o.from,insert:n.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(changeBySelectedLine(n,(o,a)=>{let s=/^\s*/.exec(o.text)[0];if(!s)return;let l=countColumn(s,n.tabSize),c=0,d=indentString(n,Math.max(0,l-getIndentUnit(n)));for(;c<s.length&&c<d.length&&s.charCodeAt(c)==d.charCodeAt(c);)c++;a.push({from:o.from+c,to:o.from+s.length,insert:d.slice(c)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=n=>(n.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),SettingsContext=createContext(()=>{const n=shallowRef({}),e=shallowRef({}),o=d=>{if(n.value[d.key]){console.warn(`Setting group with key ${d.key} already exists, ignored.`);return}n.value[d.key]=d},a=d=>{if(!n.value[d]){console.warn(`Setting group with key ${d} not found, ignored.`);return}delete n.value[d]},s=d=>{if(e.value[d.id]){console.warn(`Setting item with id ${d.id} already exists, ignored.`);return}if(!n.value[d.groupKey]){console.warn(`Setting group with key ${d.groupKey} not found, ignored.`);return}e.value[d.id]=d},l=d=>{if(!e.value[d]){console.warn(`Setting item with id ${d} not found, ignored.`);return}delete e.value[d]},c=d=>Object.values(e.value).filter(u=>u.groupKey===d);return{settingItems:readonly(e),settingGroups:readonly(n),registerSettingGroup:o,unregisterSettingGroup:a,registerSettingItem:s,unregisterSettingItem:l,getAllSettingItemsInGroup:c}}),SidebarContext=createContext(()=>{const{blocksManager:n}=BlocksContext.useContext(),{kbPrefix:e}=ServerInfoContext.useContext(),{getBlockTree:o}=BlockTreeContext.useContext(),a={sidePaneOpen:"sidePaneOpen",sidePaneDir:"sidePaneDir",sidePaneWidth:"sidePaneWidth",sidePaneHeight:"sidePaneHeight",sidePaneBlockIds:"sidePaneBlockIds"},s={sidePaneOpen:computed(()=>`${e.value}${a.sidePaneOpen}`),sidePaneDir:computed(()=>`${e.value}${a.sidePaneDir}`),sidePaneWidth:computed(()=>`${e.value}${a.sidePaneWidth}`),sidePaneHeight:computed(()=>`${e.value}${a.sidePaneHeight}`),sidePaneBlockIds:computed(()=>`${e.value}${a.sidePaneBlockIds}`)},l=useLocalStorage2(s.sidePaneOpen,!1),c=useLocalStorage2(s.sidePaneDir,"right"),d=useLocalStorage2(s.sidePaneWidth,500),u=useLocalStorage2(s.sidePaneHeight,300),f=ref(!0),v=useLocalStorage2(s.sidePaneBlockIds,[]),b=computed(()=>v.value.map(k=>n.getBlock(k)).filter(k=>!!k));return{sidePaneOpen:l,sidePaneDir:c,sidePaneWidth:d,sidePaneHeight:u,enableSidePaneAnimation:f,sidePaneBlockIds:v,sidePaneBlocks:b,addToSidePane:k=>{if(l.value||(l.value=!0),!v.value.includes(k))v.value=[...v.value,k],setTimeout(()=>{const x=o("side-pane");if(!x)return;const _=x.findDi(E=>E.type==="side-pane-header"&&E.blockId===k);_&&x.focusDi(_.itemId,{highlight:!0,scrollIntoView:!0})});else{const x=o("side-pane");if(!x)return;const _=x.findDi(E=>E.type==="side-pane-header"&&E.blockId===k);if(!_)return;x.focusDi(_.itemId,{highlight:!0,scrollIntoView:!0})}},focusNext:k=>{const x=o("side-pane");if(!x)return;const _=v.value.indexOf(k);if(_===-1)return;const E=_===v.value.length-1?0:_+1,B=v.value[E],M=x.findDi(V=>V.type==="basic-block"&&V.block.id===B);M&&x.focusDi(M.itemId,{highlight:!0,scrollIntoView:!0})},focusPrev:k=>{const x=o("side-pane");if(!x)return;const _=v.value.indexOf(k);if(_===-1)return;const E=_===0?v.value.length-1:_-1,B=v.value[E],M=x.findDi(V=>V.type==="basic-block"&&V.block.id===B);M&&x.focusDi(M.itemId,{highlight:!0,scrollIntoView:!0})}}}),BlockSelectDragContext=createContext(()=>{const n=ref({topLevelOnly:[],allNonFolded:[]}),e=ref(null),o=ref(!1);return{selectedBlockIds:n,draggingDropPos:e,dragging:o}}),mac=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function normalizeKeyName(n){let e=n.split(/-(?!$)/),o=e[e.length-1];o=="Space"&&(o=" ");let a,s,l,c;for(let d=0;d<e.length-1;d++){const u=e[d];if(/^(cmd|meta|m)$/i.test(u))c=!0;else if(/^a(lt)?$/i.test(u))a=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))mac?c=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return a&&(o="Alt-"+o),s&&(o="Ctrl-"+o),c&&(o="Meta-"+o),l&&(o="Shift-"+o),o}function normalize(n){const e=Object.create(null);for(const o in n)e[normalizeKeyName(o)]=n[o];return e}function modifiers(n,e,o=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),o&&e.shiftKey&&(n="Shift-"+n),n}function generateKeydownHandler(n,e,o){const a=normalize(n);return function(...s){const l=e(...s),c=o(...s);let d;const u=keyName(c),f=a[modifiers(u,c)];if(f&&f.run(...l))return f.stopPropagation&&c.stopPropagation(),f.preventDefault&&c.preventDefault(),!0;if(u.length==1&&u!=" "){if(c.shiftKey){const b=a[modifiers(u,c,!1)];if(b&&b.run(...l))return b.stopPropagation&&c.stopPropagation(),b.preventDefault&&c.preventDefault(),!0}if((c.shiftKey||c.altKey||c.metaKey||u.charCodeAt(0)>127)&&(d=base[c.keyCode])&&d!=u){const b=a[modifiers(d,c)];if(b&&b.run(...l))return b.stopPropagation&&c.stopPropagation(),b.preventDefault&&c.preventDefault(),!0}}const v=n["*"];return v&&v.run(...l)?(v.stopPropagation&&c.stopPropagation(),v.preventDefault&&c.preventDefault(),!0):!1}}function generateKeydownHandlerSimple(n){return generateKeydownHandler(n,e=>[e],e=>e)}const KeymapContext=createContext(()=>{const n=useTaskQueue(),{lastFocusedBlockTree:e,lastFocusedDiId:o}=LastFocusContext.useContext(),{blockEditor:a,blocksManager:s}=BlocksContext.useContext();SettingsContext.useContext();const l=ref(!1),{openFusionCommand:c}=FusionCommandContext.useContext(),{addToSidePane:d}=SidebarContext.useContext(),{selectedBlockIds:u}=BlockSelectDragContext.useContext(),f=ref({"Mod-z":{run:()=>(s.undo(),!0),stopPropagation:!0,preventDefault:!0},"Mod-Shift-z":{run:()=>(s.redo(),!0),stopPropagation:!0,preventDefault:!0},Enter:{run:()=>(n.addTask(async()=>{const K=e.value,j=o.value;if(!K||!j)return;const W=K.getEditorView(j),Y=K.getDi(j);if(!(W instanceof EditorView$1)||!Y||!DI_FILTERS.isBlockDi(Y))return;const G=W.state.selection,fe=W.state.schema,le=AllSelection.atEnd(W.state.doc),pe=K.getRootBlockIds().includes(Y.block.id);if(G.eq(le)){const ue=pe?a.normalizePos({parentId:Y.block.id,childIndex:"last-space"}):a.normalizePos({baseBlockId:Y.block.id,offset:1});if(!ue)return;if(document.activeElement.blur(),a.insertNormalBlock({pos:ue,content:plainTextToTextContent("",fe)}),K){await K.nextUpdate();const Ne=K.getDiBelow(j,DI_FILTERS.isBlockDi);Ne&&K.focusDi(Ne[0].itemId)}}else if(G.head==0){if(pe)return;const ue=a.normalizePos({baseBlockId:Y.block.id,offset:0});if(!ue)return;if(document.activeElement.blur(),a.insertNormalBlock({pos:ue,content:plainTextToTextContent("",fe)}),K){await K.nextUpdate();const Ne=K.getDiAbove(j,DI_FILTERS.isBlockDi);Ne&&K.focusDi(Ne[0].itemId)}}else{if(pe)return;const ue=W.state.selection,Ne=W.state.doc.cut(0,ue.anchor),Ve=W.state.doc.cut(ue.anchor),Ze=s.createBlockTransaction({type:"ui"});a.changeBlockContent({blockId:Y.block.id,content:[BLOCK_CONTENT_TYPES.TEXT,Ve.toJSON()],tr:Ze,commit:!1});const We=a.normalizePos({baseBlockId:Y.block.id,offset:0});if(!We)return;a.insertNormalBlock({pos:We,content:[BLOCK_CONTENT_TYPES.TEXT,Ne.toJSON()],tr:Ze,commit:!1}),document.activeElement.blur(),Ze.commit(),K&&(await K.nextUpdate(),K.focusDi(Y.itemId),K.moveCursorToBegin(Y.itemId))}}),!0),stopPropagation:!0},"Shift-Enter":{run:(K,j)=>{const W=K.schema.nodes.hardBreak.create(),Y=K.tr.replaceSelectionWith(W);return j(Y),!0},stopPropagation:!0},Backspace:{run:(K,j)=>(deleteUfeffBeforeCursor(K,j),n.addTask(async()=>{const W=e.value,Y=o.value;if(!W||!Y)return;const G=W.getEditorView(Y),fe=W.getDi(Y);if(!(G instanceof EditorView$1)||!fe||!DI_FILTERS.isBlockDi(fe))return;if(u.value.topLevelOnly.length>1){const Ze=s.createBlockTransaction({type:"ui"});for(const We of u.value.topLevelOnly)a.deleteBlock({blockId:We,tr:Ze,commit:!1});Ze.commit();return}const le=W.getDiAbove(Y,DI_FILTERS.isBlockDi),pe=W.getDiBelow(Y,DI_FILTERS.isBlockDi),ue=(le==null?void 0:le[0].itemId)||(pe==null?void 0:pe[0].itemId),Ne=G.state.selection,Ve=G.state.schema;if(Ne.empty){if(G.state.doc.content.size==0){document.activeElement.blur(),a.deleteBlock({blockId:fe.block.id}),ue&&W&&(await W.nextUpdate(),await W.focusDi(ue),W.moveCursorToTheEnd(ue));return}else if(Ne.from==0&&le){if(DI_FILTERS.isBlockDi(le[0])){const Ze=le[0].block;if(Ze.content[0]!=BLOCK_CONTENT_TYPES.TEXT||Ze.childrenIds.length>0||fe.block.parentId!=Ze.parentId||Ze.content[0]!=BLOCK_CONTENT_TYPES.TEXT)return;document.activeElement.blur();const We=Node$1.fromJSON(Ve,Ze.content[1]),ze=G.state.doc,qe=We.content.append(ze.content),dt=Ve.nodes.doc.create(null,qe),Xe=s.createBlockTransaction({type:"ui"});if(a.changeBlockContent({blockId:fe.block.id,content:[BLOCK_CONTENT_TYPES.TEXT,dt.toJSON()],tr:Xe,commit:!1}),a.deleteBlock({blockId:Ze.id,tr:Xe,commit:!1}),Xe.commit(),W){await W.nextUpdate();const Ge=W.getEditorView(fe.itemId);if(Ge instanceof EditorView$1){const ft=TextSelection.create(Ge.state.doc,We.content.size),Te=Ge.state.tr.setSelection(ft);Ge.dispatch(Te),Ge.focus()}}}return}}}),!1),preventDefault:!0,stopPropagation:!0},Delete:{run:(K,j)=>{deleteUfeffAfterCursor(K,j);const W=e.value,Y=o.value;if(!W||!Y)return!1;const G=W.getEditorView(Y),fe=W.getDi(Y);if(!(G instanceof EditorView$1)||!fe||!DI_FILTERS.isBlockDi(fe))return!1;const le=G.state.schema;if(u.value.topLevelOnly.length>1)return n.addTask(async()=>{const We=s.createBlockTransaction({type:"ui"});for(const ze of u.value.topLevelOnly)a.deleteBlock({blockId:ze,tr:We,commit:!1});We.commit()}),!0;const pe=W.getDiAbove(Y,DI_FILTERS.isBlockDi),ue=W.getDiBelow(Y,DI_FILTERS.isBlockDi),Ne=(ue==null?void 0:ue[0].itemId)||(pe==null?void 0:pe[0].itemId),Ve=G.state.selection,Ze=AllSelection.atEnd(G.state.doc);if(!Ve.empty)return!1;if(G.state.doc.content.size==0)return n.addTask(async()=>{a.deleteBlock({blockId:fe.block.id}),Ne&&W&&(await W.nextUpdate(),await W.focusDi(Ne))}),!0;if(Ve.eq(Ze)&&ue&&DI_FILTERS.isBlockDi(ue[0])){const We=ue[0].block;return We.content[0]===BLOCK_CONTENT_TYPES.TEXT&&Node$1.fromJSON(le,We.content[1]).content.size===0?(n.addTask(async()=>{a.deleteBlock({blockId:We.id})}),!0):We.content[0]!==BLOCK_CONTENT_TYPES.TEXT||fe.block.childrenIds.length>0||fe.block.parentId!==We.parentId?!1:(n.addTask(async()=>{if(We.content[0]!==BLOCK_CONTENT_TYPES.TEXT)return;const ze=Node$1.fromJSON(le,We.content[1]),qe=G.state.doc,dt=qe.content.append(ze.content),Xe=le.nodes.doc.create(null,dt),Ge=s.createBlockTransaction({type:"ui"});if(a.changeBlockContent({blockId:We.id,content:[BLOCK_CONTENT_TYPES.TEXT,Xe.toJSON()],tr:Ge,commit:!1}),a.deleteBlock({blockId:fe.block.id,tr:Ge,commit:!1}),Ge.commit(),W){await W.nextUpdate(),await W.focusDi(ue[0].itemId);const ft=W.getEditorView(ue[0].itemId);if(ft instanceof EditorView$1){const Te=TextSelection.create(ft.state.doc,qe.content.size),Ce=ft.state.tr.setSelection(Te);ft.dispatch(Ce)}}}),!0)}return!1},preventDefault:!0,stopPropagation:!0},"Mod-ArrowUp":{run:()=>(n.addTask(async()=>{const K=o.value,j=e.value;if(!K||!j)return;const W=j.getDi(K);(W==null?void 0:W.type)==="basic-block"&&await a.toggleFold(W.block.id,!0)}),!0),preventDefault:!0,stopPropagation:!0},"Mod-ArrowDown":{run:()=>(n.addTask(async()=>{const K=o.value,j=e.value;if(!K||!j)return;const W=j.getDi(K);(W==null?void 0:W.type)==="basic-block"&&await a.toggleFold(W.block.id,!1)}),!0),preventDefault:!0,stopPropagation:!0},"Alt-ArrowUp":{run:()=>u.value.topLevelOnly.length>1?(n.addTask(async()=>{const K={baseBlockId:u.value.topLevelOnly[0],offset:-1};a.moveBlocks({blockIds:u.value.topLevelOnly,pos:K})}),!0):(n.addTask(async()=>{const K=o.value,j=e.value;if(!K||!j)return;const W=j.getDi(K);if(!W||!DI_FILTERS.isBlockDi(W))return;const Y={baseBlockId:W.block.id,offset:-1};a.moveBlock({blockId:W.block.id,pos:Y}),await j.nextUpdate(),j.focusDi(K)}),!0),preventDefault:!0,stopPropagation:!0},"Alt-ArrowDown":{run:()=>u.value.topLevelOnly.length>1?(n.addTask(async()=>{const K=u.value.topLevelOnly,j={baseBlockId:K[K.length-1],offset:2};a.moveBlocks({blockIds:K,pos:j})}),!0):(n.addTask(async()=>{const K=o.value,j=e.value;if(!K||!j)return;const W=j.getDi(K);if(!W||!DI_FILTERS.isBlockDi(W))return;const Y=a.normalizePos({baseBlockId:W.block.id,offset:2});Y&&(a.moveBlock({blockId:W.block.id,pos:Y}),await j.nextUpdate(),j.focusDi(K))}),!0),preventDefault:!0,stopPropagation:!0},Tab:{run:()=>u.value.topLevelOnly.length>1?(n.addTask(async()=>{const K=s.createBlockTransaction({type:"ui"});for(const j of u.value.topLevelOnly)if(!a.promoteBlock({blockId:j,tr:K,commit:!1}).success)return;K.commit()}),!0):(n.addTask(async()=>{const K=o.value,j=e.value;if(!K||!j)return;const W=j.getDi(K);!W||!DI_FILTERS.isBlockDi(W)||!a.promoteBlock({blockId:W.block.id}).success||(await j.nextUpdate(),j.focusDi(K))}),!0),preventDefault:!0,stopPropagation:!0},"Shift-Tab":{run:()=>u.value.topLevelOnly.length>1?(n.addTask(async()=>{const K=s.createBlockTransaction({type:"ui"});for(const j of u.value.topLevelOnly)if(!a.demoteBlock({blockId:j,tr:K,commit:!1}).success)return;K.commit()}),!0):(n.addTask(async()=>{const K=o.value,j=e.value;if(!K||!j)return;const W=j.getDi(K);!W||!DI_FILTERS.isBlockDi(W)||!a.demoteBlock({blockId:W.block.id}).success||(await j.nextUpdate(),j.focusDi(K))}),!0),preventDefault:!0,stopPropagation:!0},ArrowUp:{run:()=>{var G;const K=e.value,j=o.value;if(!K||!j)return!1;const W=K.getEditorView(j),Y=K.getDi(j);if(!(W instanceof EditorView$1)||!Y||!DI_FILTERS.isBlockDi(Y))return!1;if(K&&W.endOfTextblock("up")){const fe=W.state.selection.anchor,le=W.coordsAtPos(fe),pe=K.getDiAbove(j,DI_FILTERS.isBlockDi);if(!pe)return!1;K.focusDi(pe[0].itemId);const ue=K.getEditorView(pe[0].itemId);if(!(ue instanceof EditorView$1))return!1;const Ne=((G=ue.posAtCoords({left:le.left,top:le.top-10}))==null?void 0:G.pos)??fe,Ve=ue.state.doc.content.size,Ze=TextSelection.create(ue.state.doc,Math.min(Ne,Ve)),We=ue.state.tr.setSelection(Ze);return ue.dispatch(We),!0}return!1},preventDefault:!0,stopPropagation:!0},ArrowDown:{run:()=>{var G;const K=e.value,j=o.value;if(!K||!j)return!1;const W=K.getEditorView(j),Y=K.getDi(j);if(!(W instanceof EditorView$1)||!Y||!DI_FILTERS.isBlockDi(Y))return!1;if(K&&W.endOfTextblock("down")){const fe=W.state.selection.anchor,le=W.coordsAtPos(fe),pe=K.getDiBelow(j,DI_FILTERS.isBlockDi);if(!pe)return!1;K.focusDi(pe[0].itemId);const ue=K.getEditorView(pe[0].itemId);if(!(ue instanceof EditorView$1))return!1;const Ne=((G=ue.posAtCoords({left:le.left,top:le.top+30}))==null?void 0:G.pos)??fe,Ve=ue.state.doc.content.size,Ze=TextSelection.create(ue.state.doc,Math.min(Ne,Ve)),We=ue.state.tr.setSelection(Ze);return ue.dispatch(We),!0}return!1},preventDefault:!0,stopPropagation:!0},"Alt-m":{run:(K,j,W)=>{if(j==null)return!1;const Y=W.state.schema.nodes.mathInline.create({src:""}),G=K.tr.replaceSelectionWith(Y),fe=G.doc.resolve(G.selection.anchor-G.selection.$anchor.nodeBefore.nodeSize);return G.setSelection(new NodeSelection(fe)),j(G),!0},preventDefault:!0,stopPropagation:!0},"Alt-Shift-m":{run:(K,j,W)=>{const Y=o.value,G=e.value;if(!Y||!G)return!1;const fe=G.getDi(Y);return!fe||!DI_FILTERS.isBlockDi(fe)?!1:(K.doc.content.size==0?n.addTask(async()=>{a.changeBlockContent({blockId:fe.block.id,content:[BLOCK_CONTENT_TYPES.MATH,""]}),await G.nextUpdate(),G.focusDi(Y,{scrollIntoView:!0})}):n.addTask(async()=>{const le=a.normalizePos({baseBlockId:fe.block.id,offset:1});if(le==null)return;a.insertNormalBlock({pos:le,content:[BLOCK_CONTENT_TYPES.MATH,""]});const pe=G.getDiBelow(Y,DI_FILTERS.isBlockDi);pe&&(await G.nextUpdate(),G.focusDi(pe[0].itemId,{scrollIntoView:!0}))}),!0)},preventDefault:!0,stopPropagation:!0},ArrowLeft:{run:(K,j,W)=>{skipOneUfeffBeforeCursor(K,j);const Y=o.value,G=e.value;if(!Y||!G)return!1;const fe=G.getDi(Y);if(!fe||!DI_FILTERS.isBlockDi(fe))return!1;const le=K.selection.empty&&K.selection.anchor==0;if(G&&le){const pe=G.getPredecessorDi(Y);return pe?(G.focusDi(pe[0].itemId),G.moveCursorToTheEnd(pe[0].itemId),!0):!1}return!1},preventDefault:!0,stopPropagation:!0},ArrowRight:{run:(K,j,W)=>{skipOneUfeffAfterCursor(K,j);const Y=o.value,G=e.value;if(!Y||!G)return!1;const fe=G.getDi(Y);if(!fe||!DI_FILTERS.isBlockDi(fe))return!1;const le=K.selection.empty&&K.selection.anchor==K.doc.content.size;if(G&&le){const pe=G.getSuccessorDi(Y);return pe?(G.focusDi(pe[0].itemId),G.moveCursorToTheEnd(pe[0].itemId),!0):!1}return!1},preventDefault:!0,stopPropagation:!0},"Mod-b":{run:(K,j,W)=>{const Y=W.state.schema;return toggleMark(Y.marks.bold)(K,j,W)},preventDefault:!0,stopPropagation:!0},"Mod-i":{run:(K,j,W)=>{const Y=W.state.schema;return toggleMark(Y.marks.italic)(K,j,W)},preventDefault:!0,stopPropagation:!0},"Mod-`":{run:(K,j,W)=>{const Y=W.state.schema;return toggleMark(Y.marks.code)(K,j,W)},preventDefault:!0,stopPropagation:!0},"Mod-=":{run:(K,j,W)=>{const Y=W.state.schema;toggleMark(Y.marks.highlight,{bg:"bg4"})(K,j,W);const G=W.state.selection,fe=TextSelection.near(G.$to);return j(W.state.tr.setSelection(fe)),!0},preventDefault:!0,stopPropagation:!0}}),v=ref({ArrowLeft:{key:"ArrowLeft",run:()=>{const K=o.value,j=e.value;if(!K||!j)return!1;const W=j.getDi(K),Y=j.getEditorView(K);if(!(Y instanceof EditorView)||!W||!DI_FILTERS.isBlockDi(W))return!1;const G=Y.state.selection;if(G.ranges.length==1){const fe=G.ranges[0];if(fe.from==fe.to&&fe.from==0){const le=j.getPredecessorDi(K);return le?(j.focusDi(le[0].itemId),j.moveCursorToTheEnd(le[0].itemId),!0):!1}}return cursorCharLeft(Y)},stopPropagation:!0},ArrowRight:{key:"ArrowRight",run:()=>{const K=o.value,j=e.value;if(!K||!j)return!1;const W=j.getDi(K),Y=j.getEditorView(K);if(!(Y instanceof EditorView)||!W||!DI_FILTERS.isBlockDi(W))return!1;const G=Y.state.selection,fe=Y.state.doc.length;if(G.ranges.length==1){const le=G.ranges[0];if(le.from==le.to&&le.from==fe){const pe=j.getSuccessorDi(K);return pe?(j.focusDi(pe[0].itemId),j.moveCursorToTheEnd(pe[0].itemId),!0):!1}}return cursorCharRight(Y)},stopPropagation:!0},ArrowUp:{key:"ArrowUp",run:()=>{const K=o.value,j=e.value;if(!K||!j)return!1;const W=j.getDi(K),Y=j.getEditorView(K);if(!(Y instanceof EditorView)||!W||!DI_FILTERS.isBlockDi(W))return!1;const G=Y.state.selection;if(G.ranges.length==1){const fe=G.ranges[0];if(fe.from==fe.to&&Y.state.doc.lineAt(fe.from).number==1){const le=j.getDiAbove(K);return le?(j.focusDi(le[0].itemId),j.moveCursorToTheEnd(le[0].itemId),!0):!1}}return cursorLineUp(Y)},stopPropagation:!0},ArrowDown:{key:"ArrowDown",run:()=>{const K=o.value,j=e.value;if(!K||!j)return!1;const W=j.getDi(K),Y=j.getEditorView(K);if(!(Y instanceof EditorView)||!W||!DI_FILTERS.isBlockDi(W))return!1;const G=Y.state.doc.lines,fe=Y.state.selection;if(fe.ranges.length==1){const le=fe.ranges[0];if(le.from==le.to&&Y.state.doc.lineAt(le.from).number==G){const pe=j.getDiBelow(K);return pe?(j.focusDi(pe[0].itemId),j.moveCursorToBegin(pe[0].itemId),!0):!1}}return cursorLineDown(Y)},stopPropagation:!0},Backspace:{key:"Backspace",run:()=>{const K=o.value,j=e.value;if(!K||!j)return!1;const W=j.getDi(K),Y=j.getEditorView(K);if(!(Y instanceof EditorView)||!W||!DI_FILTERS.isBlockDi(W))return!1;if(Y.state.doc.length==0){const G=j.getDiAbove(K);return n.addTask(async()=>{a.deleteBlock({blockId:W.block.id}),G&&(await j.nextUpdate(),j.focusDi(G[0].itemId),j.moveCursorToTheEnd(G[0].itemId))}),!0}return deleteCharBackward(Y)},stopPropagation:!0},Delete:{key:"Delete",run:()=>{const K=o.value,j=e.value;if(!K||!j)return!1;const W=j.getDi(K),Y=j.getEditorView(K);if(!(Y instanceof EditorView)||!W||!DI_FILTERS.isBlockDi(W))return!1;if(Y.state.doc.length==0){const G=j.getDiBelow(K);return n.addTask(async()=>{a.deleteBlock({blockId:W.block.id}),G&&(await j.nextUpdate(),j.focusDi(G[0].itemId),j.moveCursorToBegin(G[0].itemId))}),!0}return deleteCharForward(Y)},stopPropagation:!0},Tab:{key:"Tab",run:K=>indentMore(K),stopPropagation:!0},"Shift-Tab":{key:"Shift-Tab",run:K=>indentLess(K),stopPropagation:!0},Enter:{key:"Enter",run:K=>insertNewlineAndIndent(K),stopPropagation:!0}}),b=ref({"Mod-p":{run:()=>{const K=e.value,j=o.value;if(K&&j){const W=K.getEditorView(j);if(W instanceof EditorView$1){const Y=W.state.selection.content(),G=Y.content.textBetween(0,Y.content.size);return c(G),!0}}return c(""),!0},preventDefault:!0,stopPropagation:!0},"Mod-k":{run:()=>{const K=e.value,j=o.value;if(!K||!j)return!1;const W=K.getDi(j);return!W||!DI_FILTERS.isBlockDi(W)?!1:(d(W.block.id),!0)},preventDefault:!0,stopPropagation:!0}}),k=K=>f.value[K],x=K=>v.value[K],_=K=>b.value[K],E=(K,j)=>{if(f.value[K])throw new Error(`keybinding ${K} already exists`);f.value[K]=j},B=(K,j)=>{if(v.value[K])throw new Error(`keybinding ${K} already exists`);v.value[K]=j},M=(K,j)=>{if(b.value[K])throw new Error(`keybinding ${K} already exists`);b.value[K]=j},V=K=>{delete f.value[K]},F=K=>{delete v.value[K]},I=K=>{delete b.value[K]},L=(K,j,W)=>{const Y=j?f.value[j]:void 0;if(f.value[K])throw new Error(`keybinding ${K} already exists`);const G=Y??W;G&&(f.value[K]=G,j&&Y&&delete f.value[j])},U=(K,j,W)=>{const Y=j?v.value[j]:void 0;if(v.value[K])throw new Error(`keybinding ${K} already exists`);const G=Y??W;G&&(v.value[K]=G,j&&Y&&delete v.value[j])},Z=(K,j,W)=>{const Y=j?b.value[j]:void 0;if(b.value[K])throw new Error(`keybinding ${K} already exists`);const G=Y??W;G&&(b.value[K]=G,j&&Y&&delete b.value[j])};return watch(b,(K,j,W)=>{const Y=generateKeydownHandlerSimple(K);document.addEventListener("keydown",Y),W(()=>{document.removeEventListener("keydown",Y)})},{immediate:!0}),{openKeybindings:l,prosemirrorKeymap:f,codemirrorKeymap:v,globalKeymap:b,getProsemirrorKeybinding:k,getCodemirrorKeybinding:x,getGlobalKeybinding:_,addProsemirrorKeybinding:E,addCodemirrorKeybinding:B,addGlobalKeybinding:M,removeProsemirrorKeybinding:V,removeCodemirrorKeybinding:F,removeGlobalKeybinding:I,moveProsemirrorKeybinding:L,moveCodemirrorKeybinding:U,moveGlobalKeybinding:Z}}),skipOneUfeffAfterCursor=(n,e)=>{if(e==null)return!1;const o=n.selection;try{if(n.doc.textBetween(o.from,o.from+1)=="\uFEFF"){const a=n.tr.setSelection(TextSelection.create(n.doc,o.from+1));return e(a),!0}}catch{}return!1},skipOneUfeffBeforeCursor=(n,e)=>{if(e==null)return!1;const o=n.selection;if(n.doc.textBetween(o.from-1,o.from)=="\uFEFF"){const a=n.tr.setSelection(TextSelection.create(n.doc,o.from-1));return e(a),!0}return!1},deleteUfeffAfterCursor=(n,e)=>{const o=n.selection;try{if(n.doc.textBetween(o.from,o.from+1)=="\uFEFF"){const a=n.tr.delete(o.from,o.from+1);e(a)}}catch{}},deleteUfeffBeforeCursor=(n,e)=>{if(e==null)return!1;const o=n.selection;if(n.doc.textBetween(o.from-1,o.from)=="\uFEFF"){const a=n.tr.delete(o.from-1,o.from);e(a)}},useWritableComputedRef=n=>computed({get:()=>n.value,set:e=>{n.value=e}}),TimeMachineContext=createContext(()=>{const{registerSettingItem:n,registerSettingGroup:e}=SettingsContext.useContext(),{kbPrefix:o}=ServerInfoContext.useContext();e({key:"timeMachine",label:{zh:"\u65F6\u5149\u673A"}});const a=ref(!1),s={hourly:1,daily:1,weekly:1},l="timeMachine.autoBackup",c=computed(()=>`${o.value}${l}`),d=useLocalStorage2(c,s),u={hourly:10,daily:10,weekly:10},f="timeMachine.autoBackupKeepNumber",v=computed(()=>`${o.value}${f}`),b=useLocalStorage2(v,u);n({id:l+"weekly",groupKey:"timeMachine",label:{zh:"\u6BCF\u51E0\u5468\u81EA\u52A8\u751F\u6210\u5B58\u6863"},defaultValue:s.weekly,value:computed({get:()=>d.value.weekly,set:B=>d.value.weekly=B}),componentType:{type:"integerInput"}}),n({id:f+"weekly",groupKey:"timeMachine",label:{zh:"\u6700\u591A\u4FDD\u7559\u51E0\u4EFD\u6BCF\u5468\u81EA\u52A8\u5907\u4EFD"},desc:{zh:"\u5982\u679C\u6BCF\u5468\u5907\u4EFD\u6570\u91CF\u8FBE\u5230\u6B64\u503C\uFF0C\u5219\u5220\u9664\u6700\u65E9\u7684\u5907\u4EFD\u3002"},defaultValue:u.weekly,value:computed({get:()=>b.value.hourly,set:B=>b.value.hourly=B}),componentType:{type:"integerInput"}}),n({id:l+"daily",groupKey:"timeMachine",label:{zh:"\u6BCF\u51E0\u65E5\u81EA\u52A8\u751F\u6210\u5B58\u6863"},defaultValue:s.daily,value:computed({get:()=>d.value.daily,set:B=>d.value.daily=B}),componentType:{type:"integerInput"}}),n({id:f+"daily",groupKey:"timeMachine",label:{zh:"\u6700\u591A\u4FDD\u7559\u51E0\u4EFD\u6BCF\u65E5\u81EA\u52A8\u5907\u4EFD"},desc:{zh:"\u5982\u679C\u6BCF\u65E5\u5907\u4EFD\u6570\u91CF\u8FBE\u5230\u6B64\u503C\uFF0C\u5219\u5220\u9664\u6700\u65E9\u7684\u5907\u4EFD\u3002"},defaultValue:u.daily,value:computed({get:()=>b.value.daily,set:B=>b.value.daily=B}),componentType:{type:"integerInput"}}),n({id:l+"hourly",groupKey:"timeMachine",label:{zh:"\u6BCF\u51E0\u5C0F\u65F6\u81EA\u52A8\u751F\u6210\u5B58\u6863"},defaultValue:s.hourly,value:computed({get:()=>d.value.hourly,set:B=>d.value.hourly=B}),componentType:{type:"integerInput"}}),n({id:f+"hourly",groupKey:"timeMachine",label:{zh:"\u6700\u591A\u4FDD\u7559\u51E0\u4EFD\u6BCF\u5C0F\u65F6\u81EA\u52A8\u5907\u4EFD"},desc:{zh:"\u5982\u679C\u6BCF\u5C0F\u65F6\u5907\u4EFD\u6570\u91CF\u8FBE\u5230\u6B64\u503C\uFF0C\u5219\u5220\u9664\u6700\u65E9\u7684\u5907\u4EFD\u3002"},defaultValue:u.hourly,value:computed({get:()=>b.value.hourly,set:B=>b.value.hourly=B}),componentType:{type:"integerInput"}});const k=30,x="timeMachine.inactiveThreshold",_=computed(()=>`${o.value}${x}`),E=useLocalStorage2(_,k);return n({id:x,groupKey:"timeMachine",label:{zh:"\u4E0D\u6D3B\u8DC3\u68C0\u6D4B\u9608\u503C"},desc:{zh:"\u5982\u679C\u4E00\u6BB5\u65F6\u95F4\u65E0\u64CD\u4F5C\uFF0C\u5219\u4F1A\u81EA\u52A8\u751F\u6210\u4E0D\u6D3B\u8DC3\u5F52\u6863\u3002\u6B64\u503C\u63A7\u5236\u591A\u4E45\u65E0\u64CD\u4F5C\u7B97\u4E0D\u6D3B\u8DC3\uFF0C\u5355\u4F4D\uFF1A\u79D2\u3002"},defaultValue:k,value:useWritableComputedRef(E),componentType:{type:"integerInput"}}),{timeMachineOpen:a}}),FloatingMathInputContext=createContext(()=>{const n=ref(null);return{registerFloatingMathInput:e=>{n.value=e},openFloatingMathInput:(...e)=>{var o;(o=n.value)==null||o.call(n,...e)}}});CompletionContext=class{constructor(n,e,o,a){this.state=n,this.pos=e,this.explicit=o,this.view=a,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(n){let e=syntaxTree(this.state).resolveInner(this.pos,-1);for(;e&&n.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(n){let e=this.state.doc.lineAt(this.pos),o=Math.max(e.from,this.pos-250),a=e.text.slice(o-e.from,this.pos-e.from),s=a.search(ensureAnchor(n));return s<0?null:{from:o+s,to:this.pos,text:a.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(n,e,o){n=="abort"&&this.abortListeners&&(this.abortListeners.push(e),o&&o.onDocChange&&(this.abortOnDocChange=!0))}};function toSet(n){let e=Object.keys(n).join(""),o=/\w/.test(e);return o&&(e=e.replace(/\w/g,"")),`[${o?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(n){let e=Object.create(null),o=Object.create(null);for(let{label:s}of n){e[s[0]]=!0;for(let l=1;l<s.length;l++)o[s[l]]=!0}let a=toSet(e)+toSet(o)+"*$";return[new RegExp("^"+a),new RegExp(a)]}completeFromList=function(n){let e=n.map(s=>typeof s=="string"?{label:s}:s),[o,a]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:prefixMatch(e);return s=>{let l=s.matchBefore(a);return l||s.explicit?{from:l?l.from:s.pos,options:e,validFor:o}:null}},ifNotIn=function(n,e){return o=>{for(let a=syntaxTree(o.state).resolveInner(o.pos,-1);a;a=a.parent){if(n.indexOf(a.name)>-1)return null;if(a.type.isTop)break}return e(o)}};function ensureAnchor(n,e){var o;let{source:a}=n,s=a[a.length-1]!="$";return s?new RegExp(`(?:${a})${s?"$":""}`,(o=n.flags)!==null&&o!==void 0?o:n.ignoreCase?"i":""):n}const pickedCompletion=Annotation.define(),baseTheme=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(e,o,a,s){this.field=e,this.line=o,this.from=a,this.to=s}}class FieldRange{constructor(e,o,a){this.field=e,this.from=o,this.to=a}map(e){let o=e.mapPos(this.from,-1,MapMode.TrackDel),a=e.mapPos(this.to,1,MapMode.TrackDel);return o==null||a==null?null:new FieldRange(this.field,o,a)}}class Snippet{constructor(e,o){this.lines=e,this.fieldPositions=o}instantiate(e,o){let a=[],s=[o],l=e.doc.lineAt(o),c=/^\s*/.exec(l.text)[0];for(let u of this.lines){if(a.length){let f=c,v=/^\t*/.exec(u)[0].length;for(let b=0;b<v;b++)f+=e.facet(indentUnit);s.push(o+f.length-v),u=f+u.slice(v)}a.push(u),o+=u.length+1}let d=this.fieldPositions.map(u=>new FieldRange(u.field,s[u.line]+u.from,s[u.line]+u.to));return{text:a,ranges:d}}static parse(e){let o=[],a=[],s=[],l;for(let c of e.split(/\r\n?|\n/)){for(;l=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(c);){let d=l[1]?+l[1]:null,u=l[2]||l[3]||"",f=-1,v=u.replace(/\\[{}]/g,b=>b[1]);for(let b=0;b<o.length;b++)(d!=null?o[b].seq==d:v&&o[b].name==v)&&(f=b);if(f<0){let b=0;for(;b<o.length&&(d==null||o[b].seq!=null&&o[b].seq<d);)b++;o.splice(b,0,{seq:d,name:v}),f=b;for(let k of s)k.field>=f&&k.field++}s.push(new FieldPos(f,a.length,l.index,l.index+v.length)),c=c.slice(0,l.index)+u+c.slice(l.index+l[0].length)}c=c.replace(/\\([{}])/g,(d,u,f)=>{for(let v of s)v.line==a.length&&v.from>f&&(v.from--,v.to--);return u}),a.push(c)}return new Snippet(a,s)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(e,o){this.ranges=e,this.active=o,this.deco=Decoration.set(e.map(a=>(a.from==a.to?fieldMarker:fieldRange).range(a.from,a.to)))}map(e){let o=[];for(let a of this.ranges){let s=a.map(e);if(!s)return null;o.push(s)}return new ActiveSnippet(o,this.active)}selectionInsideField(e){return e.ranges.every(o=>this.ranges.some(a=>a.field==this.active&&a.from<=o.from&&a.to>=o.to))}}const setActive=StateEffect.define({map(n,e){return n&&n.map(e)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(n,e){for(let o of e.effects){if(o.is(setActive))return o.value;if(o.is(moveToField)&&n)return new ActiveSnippet(n.ranges,o.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>EditorView.decorations.from(n,e=>e?e.deco:Decoration.none)});function fieldSelection(n,e){return EditorSelection.create(n.filter(o=>o.field==e).map(o=>EditorSelection.range(o.from,o.to)))}function snippet(n){let e=Snippet.parse(n);return(o,a,s,l)=>{let{text:c,ranges:d}=e.instantiate(o.state,s),{main:u}=o.state.selection,f={changes:{from:s,to:l==u.from?u.to:l,insert:Text.of(c)},scrollIntoView:!0,annotations:a?[pickedCompletion.of(a),Transaction.userEvent.of("input.complete")]:void 0};if(d.length&&(f.selection=fieldSelection(d,0)),d.some(v=>v.field>0)){let v=new ActiveSnippet(d,0),b=f.effects=[setActive.of(v)];o.state.field(snippetState,!1)===void 0&&b.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme]))}o.dispatch(o.state.update(f))}}function moveField(n){return({state:e,dispatch:o})=>{let a=e.field(snippetState,!1);if(!a||n<0&&a.active==0)return!1;let s=a.active+n,l=n>0&&!a.ranges.some(c=>c.field==s+n);return o(e.update({selection:fieldSelection(a.ranges,s),effects:setActive.of(l?null:new ActiveSnippet(a.ranges,s)),scrollIntoView:!0})),!0}}const clearSnippet=({state:n,dispatch:e})=>n.field(snippetState,!1)?(e(n.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(n){return n.length?n[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],n=>n.facet(snippetKeymap)));snippetCompletion=function(n,e){return Object.assign(Object.assign({},e),{apply:snippet(n)})};const snippetPointerHandler=EditorView.domEventHandlers({mousedown(n,e){let o=e.state.field(snippetState,!1),a;if(!o||(a=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let s=o.ranges.find(l=>l.from<=a&&l.to>=a);return!s||s.field==o.active?!1:(e.dispatch({selection:fieldSelection(o.ranges,s.field),effects:setActive.of(o.ranges.some(l=>l.field>s.field)?new ActiveSnippet(o.ranges,s.field):null),scrollIntoView:!0}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(n,e){return e.mapPos(n,-1,MapMode.TrackAfter)??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1,closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(n,e){if(n=n.map(e.changes),e.selection){let o=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:a=>a>=o.from&&a<=o.to})}for(let o of e.effects)o.is(closeBracketEffect)&&(n=n.update({add:[closedBracket.range(o.value,o.value+1)]}));return n}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(n){for(let e=0;e<definedClosing.length;e+=2)if(definedClosing.charCodeAt(e)==n)return definedClosing.charAt(e+1);return fromCodePoint(n<128?n:n+1)}function config$1(n,e){return n.languageDataAt("closeBrackets",e)[0]||defaults}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((n,e,o,a)=>{if((android?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let s=n.state.selection.main;if(a.length>2||a.length==2&&codePointSize(codePointAt(a,0))==1||e!=s.from||o!=s.to)return!1;let l=insertBracket(n.state,a);return l?(n.dispatch(l),!0):!1});function insertBracket(n,e){let o=config$1(n,n.selection.main.head),a=o.brackets||defaults.brackets;for(let s of a){let l=closing(codePointAt(s,0));if(e==s)return l==s?handleSame(n,s,a.indexOf(s+s+s)>-1,o):handleOpen(n,s,l,o.before||defaults.before);if(e==l&&closedBracketAt(n,n.selection.main.from))return handleClose(n,s,l)}return null}function closedBracketAt(n,e){let o=!1;return n.field(bracketState).between(0,n.doc.length,a=>{a==e&&(o=!0)}),o}function nextChar(n,e){let o=n.sliceString(e,e+2);return o.slice(0,codePointSize(codePointAt(o,0)))}function handleOpen(n,e,o,a){let s=null,l=n.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:o,from:c.to}],effects:closeBracketEffect.of(c.to+e.length),range:EditorSelection.range(c.anchor+e.length,c.head+e.length)};let d=nextChar(n.doc,c.head);return!d||/\s/.test(d)||a.indexOf(d)>-1?{changes:{insert:e+o,from:c.head},effects:closeBracketEffect.of(c.head+e.length),range:EditorSelection.cursor(c.head+e.length)}:{range:s=c}});return s?null:n.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(n,e,o){let a=null,s=n.changeByRange(l=>l.empty&&nextChar(n.doc,l.head)==o?{changes:{from:l.head,to:l.head+o.length,insert:o},range:EditorSelection.cursor(l.head+o.length)}:a={range:l});return a?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(n,e,o,a){let s=a.stringPrefixes||defaults.stringPrefixes,l=null,c=n.changeByRange(d=>{if(!d.empty)return{changes:[{insert:e,from:d.from},{insert:e,from:d.to}],effects:closeBracketEffect.of(d.to+e.length),range:EditorSelection.range(d.anchor+e.length,d.head+e.length)};let u=d.head,f=nextChar(n.doc,u),v;if(f==e){if(nodeStart(n,u))return{changes:{insert:e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)};if(closedBracketAt(n,u)){let b=o&&n.sliceDoc(u,u+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:u,to:u+b.length,insert:b},range:EditorSelection.cursor(u+b.length)}}}else{if(o&&n.sliceDoc(u-2*e.length,u)==e+e&&(v=canStartStringAt(n,u-2*e.length,s))>-1&&nodeStart(n,v))return{changes:{insert:e+e+e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)};if(n.charCategorizer(u)(f)!=CharCategory.Word&&canStartStringAt(n,u,s)>-1&&!probablyInString(n,u,e,s))return{changes:{insert:e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)}}return{range:l=d}});return l?null:n.update(c,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(n,e){let o=syntaxTree(n).resolveInner(e+1);return o.parent&&o.from==e}function probablyInString(n,e,o,a){let s=syntaxTree(n).resolveInner(e,-1),l=a.reduce((c,d)=>Math.max(c,d.length),0);for(let c=0;c<5;c++){let d=n.sliceDoc(s.from,Math.min(s.to,s.from+o.length+l)),u=d.indexOf(o);if(!u||u>-1&&a.indexOf(d.slice(0,u))>-1){let v=s.firstChild;for(;v&&v.from==s.from&&v.to-v.from>o.length+u;){if(n.sliceDoc(v.to-o.length,v.to)==o)return!1;v=v.firstChild}return!0}let f=s.to==e&&s.parent;if(!f)break;s=f}return!1}function canStartStringAt(n,e,o){let a=n.charCategorizer(e);if(a(n.sliceDoc(e-1,e))!=CharCategory.Word)return e;for(let s of o){let l=e-s.length;if(n.sliceDoc(l,e)==s&&a(n.sliceDoc(l-1,l))!=CharCategory.Word)return l}return-1}const minimalSetup=[highlightSpecialChars(),history$1(),drawSelection(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),keymap.of([...defaultKeymap,...historyKeymap])],HistoryContext=createContext(()=>{const n=ref([]),e=ref(0),o=computed(()=>e.value>0),a=computed(()=>e.value<n.value.length),{mainRootBlockId:s}=MainTreeContext.useContext(),{getBlockTree:l}=BlockTreeContext.useContext(),{lastFocusedDiId:c,lastFocusedBlockTree:d}=LastFocusContext.useContext(),u=()=>{const b=d.value,k=c.value;if(!b||!k)return null;const x=b.getEditorView(k),_=x instanceof EditorView$1||x instanceof EditorView?x.state.selection.toJSON():null;return{focusedDiId:k,rootBlockId:s.value,selection:_}},f=b=>{b??(b=u()??void 0),b&&(n.value.splice(e.value),n.value.push(b),e.value=n.value.length)},v=b=>{s.value=b.rootBlockId;const k=l("main");k&&k.focusDi(b.focusedDiId,{highlight:!0})};return{historyItems:n,currentIndex:e,pushHistoryItem:f,goPrev:()=>{if(e.value<=0)return;const b=e.value===n.value.length?u():void 0;e.value--,v(n.value[e.value]),b&&n.value.push(b)},goNext:()=>{e.value>=n.value.length||(e.value++,v(n.value[e.value]))},canGoPrev:o,canGoNext:a}}),DirentsSchema=z.record(z.string(),z.discriminatedUnion("isDirectory",[z.object({isDirectory:z.literal(!0),name:z.string(),subDirents:z.lazy(()=>DirentsSchema)}),z.object({isDirectory:z.literal(!1),name:z.string()})])),FsLsSchema={request:z.object({basePath:z.string(),includeHidden:z.boolean().optional(),recursive:z.boolean().optional(),maxDepth:z.number().optional()}),result:DirentsSchema};z.object({path:z.string()}),z.object({ctime:z.coerce.date(),mtime:z.coerce.date(),size:z.number()});const FsUploadSchema={request:z.object({overwrite:z.boolean().optional(),mkdir:z.boolean().optional()}),result:z.undefined()},FsEnsureAttachmentsDirSchema={request:z.object({}),result:z.any()},FsGetAttachmentSignedUrlSchema={request:z.object({path:z.string(),attachment:z.boolean().optional(),inferMimeType:z.boolean().optional()}),result:z.object({signedUrl:z.string()})},ClearScannedImageSchema={request:z.object({path:z.string()}),result:z.object({path:z.string()})},fsLs=usePostApi("/fs/ls",FsLsSchema.request,FsLsSchema.result),fsUpload=async(n,e)=>{const o="/fs/upload";try{let a;try{a=globalThis.getAxios()}catch(d){return console.error(`[NO_AXIOS] ${d}`),{success:!1,code:RESP_CODES.NO_AXIOS}}const s=new FormData;n.forEach(d=>{s.append("targetPath",d[0]),s.append("file",d[1])});const l=await a.post(o,s,{headers:{"Content-Type":"multipart/form-data"},params:e});if(!l)return console.error(`[EMPTY_RESPONSE] endpoint=${o}`),{success:!1,code:RESP_CODES.UNKNOWN_ERROR};const c=RespSchema(FsUploadSchema.result).safeParse(l.data);return c.success?{success:!0,code:RESP_CODES.SUCCESS}:(console.error(`[INVALID_RESPONSE] endpoint=${o}}, response=${JSON.stringify(l.data)}, validationErrors=${JSON.stringify(c.error.errors)}`),{success:!1,code:RESP_CODES.INVALID_RESPONSE})}catch(a){return console.error(`[UNKNOWN_ERROR] endpoint=${o}}, error=${a}`),{success:!1,code:RESP_CODES.UNKNOWN_ERROR}}},fsEnsureAttachmentsDir=usePostApi("/fs/ensure-attachments-dir",FsEnsureAttachmentsDirSchema.request,FsEnsureAttachmentsDirSchema.result),fsGetAttachmentSignedUrl=usePostApi("/fs/get-attachment-signed-url",FsGetAttachmentSignedUrlSchema.request,FsGetAttachmentSignedUrlSchema.result),fsClearScannedImage=usePostApi("/fs/clear-scanned-image",ClearScannedImageSchema.request,ClearScannedImageSchema.result),autoRetryGet=(n,e,o,a=!0)=>{let s=!1,l=0,c=0,d=null,u=null;const f=new Promise((b,k)=>{u=k;const x=()=>{if(s){k(new Error("Operation cancelled"));return}if(n(_=>{s||(b(_),v())}),l++,l>=o&&a){k(new Error("Max retry attempts reached"));return}l<o?(e.mode==="fixed"?c=e.value:c=Math.min(e.base*2**(l-1),e.max),d=setTimeout(x,c)):a||(e.mode==="fixed"?c=e.value:c=Math.min(e.base*2**(l-1),e.max),d=setTimeout(x,c))};x()}),v=()=>{s=!0,d&&clearTimeout(d),u&&u(new Error("Operation cancelled"))};return[f,v]},PathsContext=createContext(()=>{ServerInfoContext.useContext();const n=useRoute(),e=computed(()=>n.params.location),o=ref("attachments"),a=computed(()=>joinPathSegments([e.value,o.value]));return{dbBasePath:e,attachmentsFolderName:o,attachmentsBasePath:a}}),ImagesContext=createContext(()=>{const{serverUrl:n}=ServerInfoContext.useContext(),e=reactive({});ServerInfoContext.useContext(),PathsContext.useContext();const o=(s,l=!1)=>{var u;const c=(u=e[s])==null?void 0:u.status,d=e[s]&&"url"in e[s]?e[s].url:void 0;c!=="fetching"&&(c!==void 0&&!l||(async()=>{e[s]={status:"fetching",url:d};const[f,v]=autoRetryGet(b=>{fsGetAttachmentSignedUrl({path:s,inferMimeType:!0,attachment:!1}).then(k=>k.success&&b(k.data.signedUrl))},{mode:"backoff",base:500,max:5e3},5,!0);f.then(b=>{console.debug("\u56FE\u7247\u83B7\u53D6\u6210\u529F",s),e[s]={status:"synced",url:`http://${n.value}${b}`}}).catch(b=>{console.debug("\u56FE\u7247\u83B7\u53D6\u5931\u8D25",s,b.message),e[s]={status:"fetchError",url:d}})})())};function a(s,l){return computed(typeof s=="string"?()=>(o(s,l),e[s]):()=>{const c=s();return c?(o(c,l),e[c]):null})}return{images:e,useImage:a,uploadImage:(s,l)=>{const c=l??s.name,d=URL.createObjectURL(s);return e[c]={status:"uploading",url:d},queueMicrotask(async()=>{(await fsUpload([[c,s]])).success?(console.log("\u56FE\u7247\u4E0A\u4F20\u6210\u529F",c),o(c,!0)):e[c]={status:"uploadError",url:d}}),computed(()=>e[c])}}}),PasteDialogContext=createContext(()=>({open:ref(!1)})),RefSuggestionsContext=createContext(()=>{const{blocksManager:n}=BlocksContext.useContext(),{search:e}=IndexContext.useContext(),o=ref(null),a=computed({get:()=>o.value!==null,set:b=>!b&&(o.value=null)}),s=ref(""),l=ref(null),c=ref(0),d=ref([]),u=ref(!1),f=ref(!1),v=useDebounceFn(()=>{const b=[];s.value&&s.value.trim().length>0&&e(s.value).slice(0,100).map(k=>n.getBlockRef(k)).filter(k=>{const x=k.value;return x!=null&&x.content[0]===BLOCK_CONTENT_TYPES.TEXT}).forEach(k=>{b.push({type:"block",block:k})}),u.value&&s.value.trim().length>0&&b.push({type:"createNew"}),d.value=b,c.value=0},100);return{showPos:o,open:a,query:s,cb:l,focusItemIndex:c,suggestions:d,suppressMouseOver:f,updateSuggestions:v,withScrollSuppressed:(b,k=500)=>(f.value=!0,setTimeout(()=>f.value=!1,k),b()),openRefSuggestions:(b,k,x,_=!1)=>{l.value=k,s.value=x??"",d.value=[],u.value=_,v(),o.value=b}}}),mkEventBusPlugin=()=>{const n=_mitt();return new Plugin({view:e=>(Object.assign(e,{on:n.on}),Object.assign(e,{off:n.off}),Object.assign(e,{emit:n.emit}),{})})},mkHighlightMatchesPlugin=(n,e="highlight-keep")=>new Plugin({props:{decorations:o=>{const a=n.getHighlightTerms();if(!a||a.length==0)return null;let s;const l=[];return o.doc.content.descendants((c,d)=>{if(!c.isText)return!1;const u=c.textContent.toLowerCase();for(const f of a)for(s=-1;(s=u.indexOf(f,s+1))!=-1;){const v=Decoration$1.inline(d+s,d+s+f.length,{class:e});l.push(v)}}),DecorationSet.create(o.doc,l)}}}),mkHighlightRefsPlugin=n=>new Plugin({props:{decorations:e=>{const o=n.getHighlightRefs();if(!o||o.length==0)return null;const a=[];return e.doc.content.descendants((s,l)=>{if(s.type.name=="blockRef_v2"&&o.includes(s.attrs.toBlockId)){const c=Decoration$1.inline(l,l+1,{class:"highlight-keep"});a.push(c)}}),DecorationSet.create(e.doc,a)}}}),mkListenDocChangedPlugin=()=>{let n=null;return new Plugin({view:e=>(n=e,{}),state:{init:()=>{},apply:(e,o,a,s)=>{if(n!=null&&n.emit&&e.docChanged){const l=a.selection.toJSON(),c=s.selection.toJSON(),d=s.doc.toJSON(),u=a.doc.toJSON();n.emit("docChanged",{newDoc:d,oldDoc:u,view:n,oldSelection:l,newSelection:c})}}}})},_sfc_main$20=defineComponent({__name:"ProseMirror",props:mergeModels({disableSpellcheckWhenBlur:{type:Boolean,default:!0},nodeViews:{},schema:{},pluginsBuilder:{},onDocChanged:{},highlightTerms:{},highlightRefs:{},blockTree:{},itemId:{},readonly:{type:Boolean,default:!1}},{doc:{},docModifiers:{}}),emits:["update:doc"],setup(n,{expose:e}){const o=n,a=useModel(n,"doc"),s=ref(null),l=ref(!1);let c=null;const d=HistoryContext.useContext(),u=BlockTreeContext.useContext(),f=BlocksContext.useContext(),v=RefSuggestionsContext.useContext(),b=LastFocusContext.useContext(),k=PathsContext.useContext(),x=ImagesContext.useContext(),_=KeymapContext.useContext(),E=PasteDialogContext.useContext(),B={getSchema:()=>o.schema,getItemId:()=>o.itemId??null,getBlockTree:()=>o.blockTree??null,getReadonly:()=>o.readonly,getEditorView:()=>c,getHighlightTerms:()=>o.highlightTerms??[],getHighlightRefs:()=>o.highlightRefs??[],lastFocusContext:b,historyContext:d,blockTreeContext:u,blocksContext:f,refSuggestionsContext:v,imagesContext:x,pathsContext:k,keymapContext:_,pasteDialogContext:E};e({getEditorView:()=>c,isCorrupted:()=>l.value,getWrapperDom:()=>s.value});const M=()=>{var F;const V=((F=o.pluginsBuilder)==null?void 0:F.call(o,B))??[];return o.readonly?[mkHighlightMatchesPlugin(B),mkHighlightRefsPlugin(B),...V]:[mkEventBusPlugin(),mkListenDocChangedPlugin(),mkHighlightMatchesPlugin(B),mkHighlightRefsPlugin(B),...V]};return watch(a,()=>{if(!c||c!=null&&c.isDestroyed)return;const V=JSON.stringify(a.value),F=JSON.stringify(c.state.doc);if(V==F)return;let I;try{I=Node$1.fromJSON(o.schema,a.value)}catch{l.value=!0;return}const L=c.state.selection.toJSON();let U;try{U=Selection.fromJSON(I,L)}catch{}const Z=EditorState$1.create({doc:I,plugins:c.state.plugins,selection:U});c.updateState(Z)}),watch([()=>o.highlightTerms,()=>o.highlightRefs],()=>{if(c){const V=c.state.tr.setMeta("empty",{});c.dispatch(V)}}),onMounted(()=>{if(!s.value)return;let V;try{V=Node$1.fromJSON(o.schema,a.value)}catch{l.value=!0;return}const F=EditorState$1.create({doc:V,plugins:M()});if(c&&c.destroy(),c=new EditorView$1(s.value,{state:F,editable:()=>!o.readonly,nodeViews:o.nodeViews??{}}),c.on){const I=({newDoc:L})=>a.value=L;c.on("docChanged",o.onDocChanged??I)}o.disableSpellcheckWhenBlur&&(s.value.addEventListener("focusin",()=>{s.value&&(s.value.spellcheck=!0)}),s.value.addEventListener("focusout",()=>{s.value&&(s.value.spellcheck=!1)}))}),onUnmounted(()=>{setTimeout(()=>{c&&!c.isDestroyed&&c.destroy(),c=null},1e3)}),(V,F)=>(openBlock(),createElementBlock("div",{class:"prosemirror-wrapper",ref_key:"$wrapper",ref:s},null,512))}});class InputRule{constructor(e,o,a={}){this.match=e,this.match=e,this.handler=typeof o=="string"?stringHandler(o):o,this.undoable=a.undoable!==!1,this.inCode=a.inCode||!1}}function stringHandler(n){return function(e,o,a,s){let l=n;if(o[1]){let c=o[0].lastIndexOf(o[1]);l+=o[0].slice(c+o[1].length),a+=c;let d=a-s;d>0&&(l=o[0].slice(c-d,c)+l,a=s)}return e.tr.insertText(l,a,s)}}const MAX_MATCH=500;function inputRules({rules:n}){let e=new Plugin({state:{init(){return null},apply(o,a){return o.getMeta(this)||(o.selectionSet||o.docChanged?null:a)}},props:{handleTextInput(o,a,s,l){return run(o,a,s,l,n,e)},handleDOMEvents:{compositionend:o=>{setTimeout(()=>{let{$cursor:a}=o.state.selection;a&&run(o,a.pos,a.pos,"",n,e)})}}},isInputRules:!0});return e}function run(n,e,o,a,s,l){if(n.composing)return!1;let c=n.state,d=c.doc.resolve(e),u=d.parent.textBetween(Math.max(0,d.parentOffset-MAX_MATCH),d.parentOffset,null,"\uFFFC")+a;for(let f=0;f<s.length;f++){let v=s[f];if(d.parent.type.spec.code){if(!v.inCode)continue}else if(v.inCode==="only")continue;let b=v.match.exec(u),k=b&&v.handler(c,b,e-(b[0].length-a.length),o);if(k)return v.undoable&&k.setMeta(l,{transform:k,from:e,to:o,text:a}),n.dispatch(k),!0}return!1}new InputRule(/--$/,"\u2014"),new InputRule(/\.\.\.$/,"\u2026"),new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C"),new InputRule(/"$/,"\u201D"),new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),new InputRule(/'$/,"\u2019");const openRefSuggestions=n=>new InputRule(/([#@])$/,(e,o)=>{const a=n.getEditorView();if(!a)return null;const s=a.state.selection.from,l=a.coordsAtPos(s);if(!l)return null;const c={x:l.left,y:l.top},d=f=>{if(f){const v=o[1]=="#",b=n.getSchema().nodes.blockRef_v2.create({toBlockId:f,tag:v}),k=a.state.selection.anchor,x=a.state.tr.replaceRangeWith(k-o[1].length,k,b);a.dispatch(x)}setTimeout(()=>a.focus(),50)},{openRefSuggestions:u}=n.refSuggestionsContext??{};return u==null||u(c,d,void 0,!0),null}),turnToCodeBlock=n=>new InputRule(/^```([a-z]+) $/,(e,o)=>{const a=e.tr.setMeta("",""),s=n.getItemId(),l=n.getBlockTree();if(!s||!l)return a;const c=l.getDi(s);if(!c||!DI_FILTERS.isBlockDi(c))return a;const{blockEditor:d}=n.blocksContext??{};if(!d)return a;const u=useTaskQueue();return setTimeout(()=>{u.addTask(async()=>{d.changeBlockContent({blockId:c.block.id,content:[BLOCK_CONTENT_TYPES.CODE,"",o[1]]}),await l.nextUpdate(),l.focusDi(s)})}),a});class SourceLocation{constructor(e,o,a){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=o,this.end=a}static range(e,o){return o?!e||!e.loc||!o.loc||e.loc.lexer!==o.loc.lexer?null:new SourceLocation(e.loc.lexer,e.loc.start,o.loc.end):e&&e.loc}}class Token{constructor(e,o){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=o}range(e,o){return new Token(o,SourceLocation.range(this,e))}}class ParseError{constructor(e,o){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var a="KaTeX parse error: "+e,s,l,c=o&&o.loc;if(c&&c.start<=c.end){var d=c.lexer.input;s=c.start,l=c.end,s===d.length?a+=" at end of input: ":a+=" at position "+(s+1)+": ";var u=d.slice(s,l).replace(/[^]/g,"$&\u0332"),f;s>15?f="\u2026"+d.slice(s-15,s):f=d.slice(0,s);var v;l+15<d.length?v=d.slice(l,l+15)+"\u2026":v=d.slice(l),a+=f+u+v}var b=new Error(a);return b.name="ParseError",b.__proto__=ParseError.prototype,b.position=s,s!=null&&l!=null&&(b.length=l-s),b.rawMessage=e,b}}ParseError.prototype.__proto__=Error.prototype;var contains=function n(e,o){return e.indexOf(o)!==-1},deflt=function n(e,o){return e===void 0?o:e},uppercase=/([A-Z])/g,hyphenate=function n(e){return e.replace(uppercase,"-$1").toLowerCase()},ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;function escape(n){return String(n).replace(ESCAPE_REGEX,e=>ESCAPE_LOOKUP[e])}var getBaseElem=function n(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?n(e.body[0]):e:e.type==="font"?n(e.body):e},isCharacterBox=function n(e){var o=getBaseElem(e);return o.type==="mathord"||o.type==="textord"||o.type==="atom"},assert=function n(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},protocolFromUrl=function n(e){var o=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return o?o[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(o[1])?null:o[1].toLowerCase():"_relative"},utils={contains,deflt,escape,hyphenate,getBaseElem,isCharacterBox,protocolFromUrl},SETTINGS_SCHEMA={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:n=>"#"+n},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(n,e)=>(e.push(n),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:n=>Math.max(0,n),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:n=>Math.max(0,n),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:n=>Math.max(0,n),cli:"-e, --max-expand <n>",cliProcessor:n=>n==="Infinity"?1/0:parseInt(n)},globalGroup:{type:"boolean",cli:!1}};function getDefaultValue(n){if(n.default)return n.default;var e=n.type,o=Array.isArray(e)?e[0]:e;if(typeof o!="string")return o.enum[0];switch(o){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class Settings{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var o in SETTINGS_SCHEMA)if(SETTINGS_SCHEMA.hasOwnProperty(o)){var a=SETTINGS_SCHEMA[o];this[o]=e[o]!==void 0?a.processor?a.processor(e[o]):e[o]:getDefaultValue(a)}}reportNonstrict(e,o,a){var s=this.strict;if(typeof s=="function"&&(s=s(e,o,a)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new ParseError("LaTeX-incompatible input and strict mode is set to 'error': "+(o+" ["+e+"]"),a);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(o+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+o+" ["+e+"]"))}}useStrictBehavior(e,o,a){var s=this.strict;if(typeof s=="function")try{s=s(e,o,a)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(o+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+o+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var o=utils.protocolFromUrl(e.url);if(o==null)return!1;e.protocol=o}var a=typeof this.trust=="function"?this.trust(e):this.trust;return!!a}}class Style{constructor(e,o,a){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=o,this.cramped=a}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}}var D=0,Dc=1,T=2,Tc=3,S=4,Sc=5,SS=6,SSc=7,styles=[new Style(D,0,!1),new Style(Dc,0,!0),new Style(T,1,!1),new Style(Tc,1,!0),new Style(S,2,!1),new Style(Sc,2,!0),new Style(SS,3,!1),new Style(SSc,3,!0)],sup=[S,Sc,S,Sc,SS,SSc,SS,SSc],sub=[Sc,Sc,Sc,Sc,SSc,SSc,SSc,SSc],fracNum=[T,Tc,S,Sc,SS,SSc,SS,SSc],fracDen=[Tc,Tc,Sc,Sc,SSc,SSc,SSc,SSc],cramp=[Dc,Dc,Tc,Tc,Sc,Sc,SSc,SSc],text$1=[D,Dc,T,Tc,T,Tc,T,Tc],Style$1={DISPLAY:styles[D],TEXT:styles[T],SCRIPT:styles[S],SCRIPTSCRIPT:styles[SS]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function scriptFromCodepoint(n){for(var e=0;e<scriptData.length;e++)for(var o=scriptData[e],a=0;a<o.blocks.length;a++){var s=o.blocks[a];if(n>=s[0]&&n<=s[1])return o.name}return null}var allBlocks=[];scriptData.forEach(n=>n.blocks.forEach(e=>allBlocks.push(...e)));function supportedCodepoint(n){for(var e=0;e<allBlocks.length;e+=2)if(n>=allBlocks[e]&&n<=allBlocks[e+1])return!0;return!1}var hLinePad=80,sqrtMain=function n(e,o){return"M95,"+(622+e+o)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+o+"h400000v"+(40+e)+"h-400000z"},sqrtSize1=function n(e,o){return"M263,"+(601+e+o)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+o+"h400000v"+(40+e)+"h-400000z"},sqrtSize2=function n(e,o){return"M983 "+(10+e+o)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+o+"h400000v"+(40+e)+"h-400000z"},sqrtSize3=function n(e,o){return"M424,"+(2398+e+o)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+o+`
h400000v`+(40+e)+"h-400000z"},sqrtSize4=function n(e,o){return"M473,"+(2713+e+o)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+o+"h400000v"+(40+e)+"H1017.7z"},phasePath=function n(e){var o=e/2;return"M400000 "+e+" H0 L"+o+" 0 l65 45 L145 "+(e-80)+" H400000z"},sqrtTall=function n(e,o,a){var s=a-54-o-e;return"M702 "+(e+o)+"H400000"+(40+e)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+o+"H400000v"+(40+e)+"H742z"},sqrtPath=function n(e,o,a){o=1e3*o;var s="";switch(e){case"sqrtMain":s=sqrtMain(o,hLinePad);break;case"sqrtSize1":s=sqrtSize1(o,hLinePad);break;case"sqrtSize2":s=sqrtSize2(o,hLinePad);break;case"sqrtSize3":s=sqrtSize3(o,hLinePad);break;case"sqrtSize4":s=sqrtSize4(o,hLinePad);break;case"sqrtTall":s=sqrtTall(o,hLinePad,a)}return s},innerPath=function n(e,o){switch(e){case"\u239C":return"M291 0 H417 V"+o+" H291z M291 0 H417 V"+o+" H291z";case"\u2223":return"M145 0 H188 V"+o+" H145z M145 0 H188 V"+o+" H145z";case"\u2225":return"M145 0 H188 V"+o+" H145z M145 0 H188 V"+o+" H145z"+("M367 0 H410 V"+o+" H367z M367 0 H410 V"+o+" H367z");case"\u239F":return"M457 0 H583 V"+o+" H457z M457 0 H583 V"+o+" H457z";case"\u23A2":return"M319 0 H403 V"+o+" H319z M319 0 H403 V"+o+" H319z";case"\u23A5":return"M263 0 H347 V"+o+" H263z M263 0 H347 V"+o+" H263z";case"\u23AA":return"M384 0 H504 V"+o+" H384z M384 0 H504 V"+o+" H384z";case"\u23D0":return"M312 0 H355 V"+o+" H312z M312 0 H355 V"+o+" H312z";case"\u2016":return"M257 0 H300 V"+o+" H257z M257 0 H300 V"+o+" H257z"+("M478 0 H521 V"+o+" H478z M478 0 H521 V"+o+" H478z");default:return""}},path={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tallDelim=function n(e,o){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+o+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+o+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+o+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+o+" v1759 h84z";case"vert":return"M145 15 v585 v"+o+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-o+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+o+" v585 h43z";case"doublevert":return"M145 15 v585 v"+o+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-o+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+o+` v585 h43z
M367 15 v585 v`+o+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-o+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+o+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+o+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+o+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+o+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+o+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+o+` v602 h84z
M403 1759 V0 H319 V1759 v`+o+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+o+` v602 h84z
M347 1759 V0 h-84 V1759 v`+o+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(o+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(o+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(o+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(o+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};let DocumentFragment$1=class{constructor(n){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=n,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(n){return utils.contains(this.classes,n)}toNode(){for(var n=document.createDocumentFragment(),e=0;e<this.children.length;e++)n.appendChild(this.children[e].toNode());return n}toMarkup(){for(var n="",e=0;e<this.children.length;e++)n+=this.children[e].toMarkup();return n}toText(){var n=e=>e.toText();return this.children.map(n).join("")}};var fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sigmasAndXis={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},extraCharacterMap={\u00C5:"A",\u00D0:"D",\u00DE:"o",\u00E5:"a",\u00F0:"d",\u00FE:"o",\u0410:"A",\u0411:"B",\u0412:"B",\u0413:"F",\u0414:"A",\u0415:"E",\u0416:"K",\u0417:"3",\u0418:"N",\u0419:"N",\u041A:"K",\u041B:"N",\u041C:"M",\u041D:"H",\u041E:"O",\u041F:"N",\u0420:"P",\u0421:"C",\u0422:"T",\u0423:"y",\u0424:"O",\u0425:"X",\u0426:"U",\u0427:"h",\u0428:"W",\u0429:"W",\u042A:"B",\u042B:"X",\u042C:"B",\u042D:"3",\u042E:"X",\u042F:"R",\u0430:"a",\u0431:"b",\u0432:"a",\u0433:"r",\u0434:"y",\u0435:"e",\u0436:"m",\u0437:"e",\u0438:"n",\u0439:"n",\u043A:"n",\u043B:"n",\u043C:"m",\u043D:"n",\u043E:"o",\u043F:"n",\u0440:"p",\u0441:"c",\u0442:"o",\u0443:"y",\u0444:"b",\u0445:"x",\u0446:"n",\u0447:"n",\u0448:"w",\u0449:"w",\u044A:"a",\u044B:"m",\u044C:"a",\u044D:"e",\u044E:"m",\u044F:"r"};function setFontMetrics(n,e){fontMetricsData[n]=e}function getCharacterMetrics(n,e,o){if(!fontMetricsData[e])throw new Error("Font metrics not found for font: "+e+".");var a=n.charCodeAt(0),s=fontMetricsData[e][a];if(!s&&n[0]in extraCharacterMap&&(a=extraCharacterMap[n[0]].charCodeAt(0),s=fontMetricsData[e][a]),!s&&o==="text"&&supportedCodepoint(a)&&(s=fontMetricsData[e][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var fontMetricsBySizeIndex={};function getGlobalMetrics(n){var e;if(n>=5?e=0:n>=3?e=1:e=2,!fontMetricsBySizeIndex[e]){var o=fontMetricsBySizeIndex[e]={cssEmPerMu:sigmasAndXis.quad[e]/18};for(var a in sigmasAndXis)sigmasAndXis.hasOwnProperty(a)&&(o[a]=sigmasAndXis[a][e])}return fontMetricsBySizeIndex[e]}var sizeStyleMap=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],sizeMultipliers=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],sizeAtStyle=function n(e,o){return o.size<2?e:sizeStyleMap[e-1][o.size-1]};class Options{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Options.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=sizeMultipliers[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var o={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);return new Options(o)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:sizeAtStyle(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:sizeMultipliers[e-1]})}havingBaseStyle(e){e=e||this.style.text();var o=sizeAtStyle(Options.BASESIZE,e);return this.size===o&&this.textSize===Options.BASESIZE&&this.style===e?this:this.extend({style:e,size:o})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Options.BASESIZE?["sizing","reset-size"+this.size,"size"+Options.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=getGlobalMetrics(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Options.BASESIZE=6;var ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=function n(e){return typeof e!="string"&&(e=e.unit),e in ptPerUnit||e in relativeUnit||e==="ex"},calculateSize=function n(e,o){var a;if(e.unit in ptPerUnit)a=ptPerUnit[e.unit]/o.fontMetrics().ptPerEm/o.sizeMultiplier;else if(e.unit==="mu")a=o.fontMetrics().cssEmPerMu;else{var s;if(o.style.isTight()?s=o.havingStyle(o.style.text()):s=o,e.unit==="ex")a=s.fontMetrics().xHeight;else if(e.unit==="em")a=s.fontMetrics().quad;else throw new ParseError("Invalid unit: '"+e.unit+"'");s!==o&&(a*=s.sizeMultiplier/o.sizeMultiplier)}return Math.min(e.number*a,o.maxSize)},makeEm=function n(e){return+e.toFixed(4)+"em"},createClass=function n(e){return e.filter(o=>o).join(" ")},initNode=function n(e,o,a){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=a||{},o){o.style.isTight()&&this.classes.push("mtight");var s=o.getColor();s&&(this.style.color=s)}},toNode=function n(e){var o=document.createElement(e);o.className=createClass(this.classes);for(var a in this.style)this.style.hasOwnProperty(a)&&(o.style[a]=this.style[a]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&o.setAttribute(s,this.attributes[s]);for(var l=0;l<this.children.length;l++)o.appendChild(this.children[l].toNode());return o},toMarkup=function n(e){var o="<"+e;this.classes.length&&(o+=' class="'+utils.escape(createClass(this.classes))+'"');var a="";for(var s in this.style)this.style.hasOwnProperty(s)&&(a+=utils.hyphenate(s)+":"+this.style[s]+";");a&&(o+=' style="'+utils.escape(a)+'"');for(var l in this.attributes)this.attributes.hasOwnProperty(l)&&(o+=" "+l+'="'+utils.escape(this.attributes[l])+'"');o+=">";for(var c=0;c<this.children.length;c++)o+=this.children[c].toMarkup();return o+="</"+e+">",o};class Span{constructor(e,o,a,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,e,a,s),this.children=o||[]}setAttribute(e,o){this.attributes[e]=o}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}}class Anchor{constructor(e,o,a,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,o,s),this.children=a||[],this.setAttribute("href",e)}setAttribute(e,o){this.attributes[e]=o}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}}class Img{constructor(e,o,a){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=o,this.src=e,this.classes=["mord"],this.style=a}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var o in this.style)this.style.hasOwnProperty(o)&&(e.style[o]=this.style[o]);return e}toMarkup(){var e='<img src="'+utils.escape(this.src)+'"'+(' alt="'+utils.escape(this.alt)+'"'),o="";for(var a in this.style)this.style.hasOwnProperty(a)&&(o+=utils.hyphenate(a)+":"+this.style[a]+";");return o&&(e+=' style="'+utils.escape(o)+'"'),e+="'/>",e}}var iCombinations={\u00EE:"\u0131\u0302",\u00EF:"\u0131\u0308",\u00ED:"\u0131\u0301",\u00EC:"\u0131\u0300"};class SymbolNode{constructor(e,o,a,s,l,c,d,u){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=o||0,this.depth=a||0,this.italic=s||0,this.skew=l||0,this.width=c||0,this.classes=d||[],this.style=u||{},this.maxFontSize=0;var f=scriptFromCodepoint(this.text.charCodeAt(0));f&&this.classes.push(f+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),o=null;this.italic>0&&(o=document.createElement("span"),o.style.marginRight=makeEm(this.italic)),this.classes.length>0&&(o=o||document.createElement("span"),o.className=createClass(this.classes));for(var a in this.style)this.style.hasOwnProperty(a)&&(o=o||document.createElement("span"),o.style[a]=this.style[a]);return o?(o.appendChild(e),o):e}toMarkup(){var e=!1,o="<span";this.classes.length&&(e=!0,o+=' class="',o+=utils.escape(createClass(this.classes)),o+='"');var a="";this.italic>0&&(a+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(a+=utils.hyphenate(s)+":"+this.style[s]+";");a&&(e=!0,o+=' style="'+utils.escape(a)+'"');var l=utils.escape(this.text);return e?(o+=">",o+=l,o+="</span>",o):l}}class SvgNode{constructor(e,o){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=o||{}}toNode(){var e="http://www.w3.org/2000/svg",o=document.createElementNS(e,"svg");for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&o.setAttribute(a,this.attributes[a]);for(var s=0;s<this.children.length;s++)o.appendChild(this.children[s].toNode());return o}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var o in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,o)&&(e+=" "+o+'="'+utils.escape(this.attributes[o])+'"');e+=">";for(var a=0;a<this.children.length;a++)e+=this.children[a].toMarkup();return e+="</svg>",e}}class PathNode{constructor(e,o){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=o}toNode(){var e="http://www.w3.org/2000/svg",o=document.createElementNS(e,"path");return this.alternate?o.setAttribute("d",this.alternate):o.setAttribute("d",path[this.pathName]),o}toMarkup(){return this.alternate?'<path d="'+utils.escape(this.alternate)+'"/>':'<path d="'+utils.escape(path[this.pathName])+'"/>'}}class LineNode{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",o=document.createElementNS(e,"line");for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&o.setAttribute(a,this.attributes[a]);return o}toMarkup(){var e="<line";for(var o in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,o)&&(e+=" "+o+'="'+utils.escape(this.attributes[o])+'"');return e+="/>",e}}function assertSymbolDomNode(n){if(n instanceof SymbolNode)return n;throw new Error("Expected symbolNode but got "+String(n)+".")}function assertSpan(n){if(n instanceof Span)return n;throw new Error("Expected span<HtmlDomNode> but got "+String(n)+".")}var ATOMS={bin:1,close:1,inner:1,open:1,punct:1,rel:1},NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}};function defineSymbol(n,e,o,a,s,l){symbols[n][s]={font:e,group:o,replace:a},l&&a&&(symbols[n][a]=symbols[n][s])}var math="math",text="text",main="main",ams="ams",accent="accent-token",bin="bin",close="close",inner="inner",mathord="mathord",op="op-token",open="open",punct="punct",rel="rel",spacing="spacing",textord="textord";defineSymbol(math,main,rel,"\u2261","\\equiv",!0),defineSymbol(math,main,rel,"\u227A","\\prec",!0),defineSymbol(math,main,rel,"\u227B","\\succ",!0),defineSymbol(math,main,rel,"\u223C","\\sim",!0),defineSymbol(math,main,rel,"\u22A5","\\perp"),defineSymbol(math,main,rel,"\u2AAF","\\preceq",!0),defineSymbol(math,main,rel,"\u2AB0","\\succeq",!0),defineSymbol(math,main,rel,"\u2243","\\simeq",!0),defineSymbol(math,main,rel,"\u2223","\\mid",!0),defineSymbol(math,main,rel,"\u226A","\\ll",!0),defineSymbol(math,main,rel,"\u226B","\\gg",!0),defineSymbol(math,main,rel,"\u224D","\\asymp",!0),defineSymbol(math,main,rel,"\u2225","\\parallel"),defineSymbol(math,main,rel,"\u22C8","\\bowtie",!0),defineSymbol(math,main,rel,"\u2323","\\smile",!0),defineSymbol(math,main,rel,"\u2291","\\sqsubseteq",!0),defineSymbol(math,main,rel,"\u2292","\\sqsupseteq",!0),defineSymbol(math,main,rel,"\u2250","\\doteq",!0),defineSymbol(math,main,rel,"\u2322","\\frown",!0),defineSymbol(math,main,rel,"\u220B","\\ni",!0),defineSymbol(math,main,rel,"\u221D","\\propto",!0),defineSymbol(math,main,rel,"\u22A2","\\vdash",!0),defineSymbol(math,main,rel,"\u22A3","\\dashv",!0),defineSymbol(math,main,rel,"\u220B","\\owns"),defineSymbol(math,main,punct,".","\\ldotp"),defineSymbol(math,main,punct,"\u22C5","\\cdotp"),defineSymbol(math,main,textord,"#","\\#"),defineSymbol(text,main,textord,"#","\\#"),defineSymbol(math,main,textord,"&","\\&"),defineSymbol(text,main,textord,"&","\\&"),defineSymbol(math,main,textord,"\u2135","\\aleph",!0),defineSymbol(math,main,textord,"\u2200","\\forall",!0),defineSymbol(math,main,textord,"\u210F","\\hbar",!0),defineSymbol(math,main,textord,"\u2203","\\exists",!0),defineSymbol(math,main,textord,"\u2207","\\nabla",!0),defineSymbol(math,main,textord,"\u266D","\\flat",!0),defineSymbol(math,main,textord,"\u2113","\\ell",!0),defineSymbol(math,main,textord,"\u266E","\\natural",!0),defineSymbol(math,main,textord,"\u2663","\\clubsuit",!0),defineSymbol(math,main,textord,"\u2118","\\wp",!0),defineSymbol(math,main,textord,"\u266F","\\sharp",!0),defineSymbol(math,main,textord,"\u2662","\\diamondsuit",!0),defineSymbol(math,main,textord,"\u211C","\\Re",!0),defineSymbol(math,main,textord,"\u2661","\\heartsuit",!0),defineSymbol(math,main,textord,"\u2111","\\Im",!0),defineSymbol(math,main,textord,"\u2660","\\spadesuit",!0),defineSymbol(math,main,textord,"\xA7","\\S",!0),defineSymbol(text,main,textord,"\xA7","\\S"),defineSymbol(math,main,textord,"\xB6","\\P",!0),defineSymbol(text,main,textord,"\xB6","\\P"),defineSymbol(math,main,textord,"\u2020","\\dag"),defineSymbol(text,main,textord,"\u2020","\\dag"),defineSymbol(text,main,textord,"\u2020","\\textdagger"),defineSymbol(math,main,textord,"\u2021","\\ddag"),defineSymbol(text,main,textord,"\u2021","\\ddag"),defineSymbol(text,main,textord,"\u2021","\\textdaggerdbl"),defineSymbol(math,main,close,"\u23B1","\\rmoustache",!0),defineSymbol(math,main,open,"\u23B0","\\lmoustache",!0),defineSymbol(math,main,close,"\u27EF","\\rgroup",!0),defineSymbol(math,main,open,"\u27EE","\\lgroup",!0),defineSymbol(math,main,bin,"\u2213","\\mp",!0),defineSymbol(math,main,bin,"\u2296","\\ominus",!0),defineSymbol(math,main,bin,"\u228E","\\uplus",!0),defineSymbol(math,main,bin,"\u2293","\\sqcap",!0),defineSymbol(math,main,bin,"\u2217","\\ast"),defineSymbol(math,main,bin,"\u2294","\\sqcup",!0),defineSymbol(math,main,bin,"\u25EF","\\bigcirc",!0),defineSymbol(math,main,bin,"\u2219","\\bullet",!0),defineSymbol(math,main,bin,"\u2021","\\ddagger"),defineSymbol(math,main,bin,"\u2240","\\wr",!0),defineSymbol(math,main,bin,"\u2A3F","\\amalg"),defineSymbol(math,main,bin,"&","\\And"),defineSymbol(math,main,rel,"\u27F5","\\longleftarrow",!0),defineSymbol(math,main,rel,"\u21D0","\\Leftarrow",!0),defineSymbol(math,main,rel,"\u27F8","\\Longleftarrow",!0),defineSymbol(math,main,rel,"\u27F6","\\longrightarrow",!0),defineSymbol(math,main,rel,"\u21D2","\\Rightarrow",!0),defineSymbol(math,main,rel,"\u27F9","\\Longrightarrow",!0),defineSymbol(math,main,rel,"\u2194","\\leftrightarrow",!0),defineSymbol(math,main,rel,"\u27F7","\\longleftrightarrow",!0),defineSymbol(math,main,rel,"\u21D4","\\Leftrightarrow",!0),defineSymbol(math,main,rel,"\u27FA","\\Longleftrightarrow",!0),defineSymbol(math,main,rel,"\u21A6","\\mapsto",!0),defineSymbol(math,main,rel,"\u27FC","\\longmapsto",!0),defineSymbol(math,main,rel,"\u2197","\\nearrow",!0),defineSymbol(math,main,rel,"\u21A9","\\hookleftarrow",!0),defineSymbol(math,main,rel,"\u21AA","\\hookrightarrow",!0),defineSymbol(math,main,rel,"\u2198","\\searrow",!0),defineSymbol(math,main,rel,"\u21BC","\\leftharpoonup",!0),defineSymbol(math,main,rel,"\u21C0","\\rightharpoonup",!0),defineSymbol(math,main,rel,"\u2199","\\swarrow",!0),defineSymbol(math,main,rel,"\u21BD","\\leftharpoondown",!0),defineSymbol(math,main,rel,"\u21C1","\\rightharpoondown",!0),defineSymbol(math,main,rel,"\u2196","\\nwarrow",!0),defineSymbol(math,main,rel,"\u21CC","\\rightleftharpoons",!0),defineSymbol(math,ams,rel,"\u226E","\\nless",!0),defineSymbol(math,ams,rel,"\uE010","\\@nleqslant"),defineSymbol(math,ams,rel,"\uE011","\\@nleqq"),defineSymbol(math,ams,rel,"\u2A87","\\lneq",!0),defineSymbol(math,ams,rel,"\u2268","\\lneqq",!0),defineSymbol(math,ams,rel,"\uE00C","\\@lvertneqq"),defineSymbol(math,ams,rel,"\u22E6","\\lnsim",!0),defineSymbol(math,ams,rel,"\u2A89","\\lnapprox",!0),defineSymbol(math,ams,rel,"\u2280","\\nprec",!0),defineSymbol(math,ams,rel,"\u22E0","\\npreceq",!0),defineSymbol(math,ams,rel,"\u22E8","\\precnsim",!0),defineSymbol(math,ams,rel,"\u2AB9","\\precnapprox",!0),defineSymbol(math,ams,rel,"\u2241","\\nsim",!0),defineSymbol(math,ams,rel,"\uE006","\\@nshortmid"),defineSymbol(math,ams,rel,"\u2224","\\nmid",!0),defineSymbol(math,ams,rel,"\u22AC","\\nvdash",!0),defineSymbol(math,ams,rel,"\u22AD","\\nvDash",!0),defineSymbol(math,ams,rel,"\u22EA","\\ntriangleleft"),defineSymbol(math,ams,rel,"\u22EC","\\ntrianglelefteq",!0),defineSymbol(math,ams,rel,"\u228A","\\subsetneq",!0),defineSymbol(math,ams,rel,"\uE01A","\\@varsubsetneq"),defineSymbol(math,ams,rel,"\u2ACB","\\subsetneqq",!0),defineSymbol(math,ams,rel,"\uE017","\\@varsubsetneqq"),defineSymbol(math,ams,rel,"\u226F","\\ngtr",!0),defineSymbol(math,ams,rel,"\uE00F","\\@ngeqslant"),defineSymbol(math,ams,rel,"\uE00E","\\@ngeqq"),defineSymbol(math,ams,rel,"\u2A88","\\gneq",!0),defineSymbol(math,ams,rel,"\u2269","\\gneqq",!0),defineSymbol(math,ams,rel,"\uE00D","\\@gvertneqq"),defineSymbol(math,ams,rel,"\u22E7","\\gnsim",!0),defineSymbol(math,ams,rel,"\u2A8A","\\gnapprox",!0),defineSymbol(math,ams,rel,"\u2281","\\nsucc",!0),defineSymbol(math,ams,rel,"\u22E1","\\nsucceq",!0),defineSymbol(math,ams,rel,"\u22E9","\\succnsim",!0),defineSymbol(math,ams,rel,"\u2ABA","\\succnapprox",!0),defineSymbol(math,ams,rel,"\u2246","\\ncong",!0),defineSymbol(math,ams,rel,"\uE007","\\@nshortparallel"),defineSymbol(math,ams,rel,"\u2226","\\nparallel",!0),defineSymbol(math,ams,rel,"\u22AF","\\nVDash",!0),defineSymbol(math,ams,rel,"\u22EB","\\ntriangleright"),defineSymbol(math,ams,rel,"\u22ED","\\ntrianglerighteq",!0),defineSymbol(math,ams,rel,"\uE018","\\@nsupseteqq"),defineSymbol(math,ams,rel,"\u228B","\\supsetneq",!0),defineSymbol(math,ams,rel,"\uE01B","\\@varsupsetneq"),defineSymbol(math,ams,rel,"\u2ACC","\\supsetneqq",!0),defineSymbol(math,ams,rel,"\uE019","\\@varsupsetneqq"),defineSymbol(math,ams,rel,"\u22AE","\\nVdash",!0),defineSymbol(math,ams,rel,"\u2AB5","\\precneqq",!0),defineSymbol(math,ams,rel,"\u2AB6","\\succneqq",!0),defineSymbol(math,ams,rel,"\uE016","\\@nsubseteqq"),defineSymbol(math,ams,bin,"\u22B4","\\unlhd"),defineSymbol(math,ams,bin,"\u22B5","\\unrhd"),defineSymbol(math,ams,rel,"\u219A","\\nleftarrow",!0),defineSymbol(math,ams,rel,"\u219B","\\nrightarrow",!0),defineSymbol(math,ams,rel,"\u21CD","\\nLeftarrow",!0),defineSymbol(math,ams,rel,"\u21CF","\\nRightarrow",!0),defineSymbol(math,ams,rel,"\u21AE","\\nleftrightarrow",!0),defineSymbol(math,ams,rel,"\u21CE","\\nLeftrightarrow",!0),defineSymbol(math,ams,rel,"\u25B3","\\vartriangle"),defineSymbol(math,ams,textord,"\u210F","\\hslash"),defineSymbol(math,ams,textord,"\u25BD","\\triangledown"),defineSymbol(math,ams,textord,"\u25CA","\\lozenge"),defineSymbol(math,ams,textord,"\u24C8","\\circledS"),defineSymbol(math,ams,textord,"\xAE","\\circledR"),defineSymbol(text,ams,textord,"\xAE","\\circledR"),defineSymbol(math,ams,textord,"\u2221","\\measuredangle",!0),defineSymbol(math,ams,textord,"\u2204","\\nexists"),defineSymbol(math,ams,textord,"\u2127","\\mho"),defineSymbol(math,ams,textord,"\u2132","\\Finv",!0),defineSymbol(math,ams,textord,"\u2141","\\Game",!0),defineSymbol(math,ams,textord,"\u2035","\\backprime"),defineSymbol(math,ams,textord,"\u25B2","\\blacktriangle"),defineSymbol(math,ams,textord,"\u25BC","\\blacktriangledown"),defineSymbol(math,ams,textord,"\u25A0","\\blacksquare"),defineSymbol(math,ams,textord,"\u29EB","\\blacklozenge"),defineSymbol(math,ams,textord,"\u2605","\\bigstar"),defineSymbol(math,ams,textord,"\u2222","\\sphericalangle",!0),defineSymbol(math,ams,textord,"\u2201","\\complement",!0),defineSymbol(math,ams,textord,"\xF0","\\eth",!0),defineSymbol(text,main,textord,"\xF0","\xF0"),defineSymbol(math,ams,textord,"\u2571","\\diagup"),defineSymbol(math,ams,textord,"\u2572","\\diagdown"),defineSymbol(math,ams,textord,"\u25A1","\\square"),defineSymbol(math,ams,textord,"\u25A1","\\Box"),defineSymbol(math,ams,textord,"\u25CA","\\Diamond"),defineSymbol(math,ams,textord,"\xA5","\\yen",!0),defineSymbol(text,ams,textord,"\xA5","\\yen",!0),defineSymbol(math,ams,textord,"\u2713","\\checkmark",!0),defineSymbol(text,ams,textord,"\u2713","\\checkmark"),defineSymbol(math,ams,textord,"\u2136","\\beth",!0),defineSymbol(math,ams,textord,"\u2138","\\daleth",!0),defineSymbol(math,ams,textord,"\u2137","\\gimel",!0),defineSymbol(math,ams,textord,"\u03DD","\\digamma",!0),defineSymbol(math,ams,textord,"\u03F0","\\varkappa"),defineSymbol(math,ams,open,"\u250C","\\@ulcorner",!0),defineSymbol(math,ams,close,"\u2510","\\@urcorner",!0),defineSymbol(math,ams,open,"\u2514","\\@llcorner",!0),defineSymbol(math,ams,close,"\u2518","\\@lrcorner",!0),defineSymbol(math,ams,rel,"\u2266","\\leqq",!0),defineSymbol(math,ams,rel,"\u2A7D","\\leqslant",!0),defineSymbol(math,ams,rel,"\u2A95","\\eqslantless",!0),defineSymbol(math,ams,rel,"\u2272","\\lesssim",!0),defineSymbol(math,ams,rel,"\u2A85","\\lessapprox",!0),defineSymbol(math,ams,rel,"\u224A","\\approxeq",!0),defineSymbol(math,ams,bin,"\u22D6","\\lessdot"),defineSymbol(math,ams,rel,"\u22D8","\\lll",!0),defineSymbol(math,ams,rel,"\u2276","\\lessgtr",!0),defineSymbol(math,ams,rel,"\u22DA","\\lesseqgtr",!0),defineSymbol(math,ams,rel,"\u2A8B","\\lesseqqgtr",!0),defineSymbol(math,ams,rel,"\u2251","\\doteqdot"),defineSymbol(math,ams,rel,"\u2253","\\risingdotseq",!0),defineSymbol(math,ams,rel,"\u2252","\\fallingdotseq",!0),defineSymbol(math,ams,rel,"\u223D","\\backsim",!0),defineSymbol(math,ams,rel,"\u22CD","\\backsimeq",!0),defineSymbol(math,ams,rel,"\u2AC5","\\subseteqq",!0),defineSymbol(math,ams,rel,"\u22D0","\\Subset",!0),defineSymbol(math,ams,rel,"\u228F","\\sqsubset",!0),defineSymbol(math,ams,rel,"\u227C","\\preccurlyeq",!0),defineSymbol(math,ams,rel,"\u22DE","\\curlyeqprec",!0),defineSymbol(math,ams,rel,"\u227E","\\precsim",!0),defineSymbol(math,ams,rel,"\u2AB7","\\precapprox",!0),defineSymbol(math,ams,rel,"\u22B2","\\vartriangleleft"),defineSymbol(math,ams,rel,"\u22B4","\\trianglelefteq"),defineSymbol(math,ams,rel,"\u22A8","\\vDash",!0),defineSymbol(math,ams,rel,"\u22AA","\\Vvdash",!0),defineSymbol(math,ams,rel,"\u2323","\\smallsmile"),defineSymbol(math,ams,rel,"\u2322","\\smallfrown"),defineSymbol(math,ams,rel,"\u224F","\\bumpeq",!0),defineSymbol(math,ams,rel,"\u224E","\\Bumpeq",!0),defineSymbol(math,ams,rel,"\u2267","\\geqq",!0),defineSymbol(math,ams,rel,"\u2A7E","\\geqslant",!0),defineSymbol(math,ams,rel,"\u2A96","\\eqslantgtr",!0),defineSymbol(math,ams,rel,"\u2273","\\gtrsim",!0),defineSymbol(math,ams,rel,"\u2A86","\\gtrapprox",!0),defineSymbol(math,ams,bin,"\u22D7","\\gtrdot"),defineSymbol(math,ams,rel,"\u22D9","\\ggg",!0),defineSymbol(math,ams,rel,"\u2277","\\gtrless",!0),defineSymbol(math,ams,rel,"\u22DB","\\gtreqless",!0),defineSymbol(math,ams,rel,"\u2A8C","\\gtreqqless",!0),defineSymbol(math,ams,rel,"\u2256","\\eqcirc",!0),defineSymbol(math,ams,rel,"\u2257","\\circeq",!0),defineSymbol(math,ams,rel,"\u225C","\\triangleq",!0),defineSymbol(math,ams,rel,"\u223C","\\thicksim"),defineSymbol(math,ams,rel,"\u2248","\\thickapprox"),defineSymbol(math,ams,rel,"\u2AC6","\\supseteqq",!0),defineSymbol(math,ams,rel,"\u22D1","\\Supset",!0),defineSymbol(math,ams,rel,"\u2290","\\sqsupset",!0),defineSymbol(math,ams,rel,"\u227D","\\succcurlyeq",!0),defineSymbol(math,ams,rel,"\u22DF","\\curlyeqsucc",!0),defineSymbol(math,ams,rel,"\u227F","\\succsim",!0),defineSymbol(math,ams,rel,"\u2AB8","\\succapprox",!0),defineSymbol(math,ams,rel,"\u22B3","\\vartriangleright"),defineSymbol(math,ams,rel,"\u22B5","\\trianglerighteq"),defineSymbol(math,ams,rel,"\u22A9","\\Vdash",!0),defineSymbol(math,ams,rel,"\u2223","\\shortmid"),defineSymbol(math,ams,rel,"\u2225","\\shortparallel"),defineSymbol(math,ams,rel,"\u226C","\\between",!0),defineSymbol(math,ams,rel,"\u22D4","\\pitchfork",!0),defineSymbol(math,ams,rel,"\u221D","\\varpropto"),defineSymbol(math,ams,rel,"\u25C0","\\blacktriangleleft"),defineSymbol(math,ams,rel,"\u2234","\\therefore",!0),defineSymbol(math,ams,rel,"\u220D","\\backepsilon"),defineSymbol(math,ams,rel,"\u25B6","\\blacktriangleright"),defineSymbol(math,ams,rel,"\u2235","\\because",!0),defineSymbol(math,ams,rel,"\u22D8","\\llless"),defineSymbol(math,ams,rel,"\u22D9","\\gggtr"),defineSymbol(math,ams,bin,"\u22B2","\\lhd"),defineSymbol(math,ams,bin,"\u22B3","\\rhd"),defineSymbol(math,ams,rel,"\u2242","\\eqsim",!0),defineSymbol(math,main,rel,"\u22C8","\\Join"),defineSymbol(math,ams,rel,"\u2251","\\Doteq",!0),defineSymbol(math,ams,bin,"\u2214","\\dotplus",!0),defineSymbol(math,ams,bin,"\u2216","\\smallsetminus"),defineSymbol(math,ams,bin,"\u22D2","\\Cap",!0),defineSymbol(math,ams,bin,"\u22D3","\\Cup",!0),defineSymbol(math,ams,bin,"\u2A5E","\\doublebarwedge",!0),defineSymbol(math,ams,bin,"\u229F","\\boxminus",!0),defineSymbol(math,ams,bin,"\u229E","\\boxplus",!0),defineSymbol(math,ams,bin,"\u22C7","\\divideontimes",!0),defineSymbol(math,ams,bin,"\u22C9","\\ltimes",!0),defineSymbol(math,ams,bin,"\u22CA","\\rtimes",!0),defineSymbol(math,ams,bin,"\u22CB","\\leftthreetimes",!0),defineSymbol(math,ams,bin,"\u22CC","\\rightthreetimes",!0),defineSymbol(math,ams,bin,"\u22CF","\\curlywedge",!0),defineSymbol(math,ams,bin,"\u22CE","\\curlyvee",!0),defineSymbol(math,ams,bin,"\u229D","\\circleddash",!0),defineSymbol(math,ams,bin,"\u229B","\\circledast",!0),defineSymbol(math,ams,bin,"\u22C5","\\centerdot"),defineSymbol(math,ams,bin,"\u22BA","\\intercal",!0),defineSymbol(math,ams,bin,"\u22D2","\\doublecap"),defineSymbol(math,ams,bin,"\u22D3","\\doublecup"),defineSymbol(math,ams,bin,"\u22A0","\\boxtimes",!0),defineSymbol(math,ams,rel,"\u21E2","\\dashrightarrow",!0),defineSymbol(math,ams,rel,"\u21E0","\\dashleftarrow",!0),defineSymbol(math,ams,rel,"\u21C7","\\leftleftarrows",!0),defineSymbol(math,ams,rel,"\u21C6","\\leftrightarrows",!0),defineSymbol(math,ams,rel,"\u21DA","\\Lleftarrow",!0),defineSymbol(math,ams,rel,"\u219E","\\twoheadleftarrow",!0),defineSymbol(math,ams,rel,"\u21A2","\\leftarrowtail",!0),defineSymbol(math,ams,rel,"\u21AB","\\looparrowleft",!0),defineSymbol(math,ams,rel,"\u21CB","\\leftrightharpoons",!0),defineSymbol(math,ams,rel,"\u21B6","\\curvearrowleft",!0),defineSymbol(math,ams,rel,"\u21BA","\\circlearrowleft",!0),defineSymbol(math,ams,rel,"\u21B0","\\Lsh",!0),defineSymbol(math,ams,rel,"\u21C8","\\upuparrows",!0),defineSymbol(math,ams,rel,"\u21BF","\\upharpoonleft",!0),defineSymbol(math,ams,rel,"\u21C3","\\downharpoonleft",!0),defineSymbol(math,main,rel,"\u22B6","\\origof",!0),defineSymbol(math,main,rel,"\u22B7","\\imageof",!0),defineSymbol(math,ams,rel,"\u22B8","\\multimap",!0),defineSymbol(math,ams,rel,"\u21AD","\\leftrightsquigarrow",!0),defineSymbol(math,ams,rel,"\u21C9","\\rightrightarrows",!0),defineSymbol(math,ams,rel,"\u21C4","\\rightleftarrows",!0),defineSymbol(math,ams,rel,"\u21A0","\\twoheadrightarrow",!0),defineSymbol(math,ams,rel,"\u21A3","\\rightarrowtail",!0),defineSymbol(math,ams,rel,"\u21AC","\\looparrowright",!0),defineSymbol(math,ams,rel,"\u21B7","\\curvearrowright",!0),defineSymbol(math,ams,rel,"\u21BB","\\circlearrowright",!0),defineSymbol(math,ams,rel,"\u21B1","\\Rsh",!0),defineSymbol(math,ams,rel,"\u21CA","\\downdownarrows",!0),defineSymbol(math,ams,rel,"\u21BE","\\upharpoonright",!0),defineSymbol(math,ams,rel,"\u21C2","\\downharpoonright",!0),defineSymbol(math,ams,rel,"\u21DD","\\rightsquigarrow",!0),defineSymbol(math,ams,rel,"\u21DD","\\leadsto"),defineSymbol(math,ams,rel,"\u21DB","\\Rrightarrow",!0),defineSymbol(math,ams,rel,"\u21BE","\\restriction"),defineSymbol(math,main,textord,"\u2018","`"),defineSymbol(math,main,textord,"$","\\$"),defineSymbol(text,main,textord,"$","\\$"),defineSymbol(text,main,textord,"$","\\textdollar"),defineSymbol(math,main,textord,"%","\\%"),defineSymbol(text,main,textord,"%","\\%"),defineSymbol(math,main,textord,"_","\\_"),defineSymbol(text,main,textord,"_","\\_"),defineSymbol(text,main,textord,"_","\\textunderscore"),defineSymbol(math,main,textord,"\u2220","\\angle",!0),defineSymbol(math,main,textord,"\u221E","\\infty",!0),defineSymbol(math,main,textord,"\u2032","\\prime"),defineSymbol(math,main,textord,"\u25B3","\\triangle"),defineSymbol(math,main,textord,"\u0393","\\Gamma",!0),defineSymbol(math,main,textord,"\u0394","\\Delta",!0),defineSymbol(math,main,textord,"\u0398","\\Theta",!0),defineSymbol(math,main,textord,"\u039B","\\Lambda",!0),defineSymbol(math,main,textord,"\u039E","\\Xi",!0),defineSymbol(math,main,textord,"\u03A0","\\Pi",!0),defineSymbol(math,main,textord,"\u03A3","\\Sigma",!0),defineSymbol(math,main,textord,"\u03A5","\\Upsilon",!0),defineSymbol(math,main,textord,"\u03A6","\\Phi",!0),defineSymbol(math,main,textord,"\u03A8","\\Psi",!0),defineSymbol(math,main,textord,"\u03A9","\\Omega",!0),defineSymbol(math,main,textord,"A","\u0391"),defineSymbol(math,main,textord,"B","\u0392"),defineSymbol(math,main,textord,"E","\u0395"),defineSymbol(math,main,textord,"Z","\u0396"),defineSymbol(math,main,textord,"H","\u0397"),defineSymbol(math,main,textord,"I","\u0399"),defineSymbol(math,main,textord,"K","\u039A"),defineSymbol(math,main,textord,"M","\u039C"),defineSymbol(math,main,textord,"N","\u039D"),defineSymbol(math,main,textord,"O","\u039F"),defineSymbol(math,main,textord,"P","\u03A1"),defineSymbol(math,main,textord,"T","\u03A4"),defineSymbol(math,main,textord,"X","\u03A7"),defineSymbol(math,main,textord,"\xAC","\\neg",!0),defineSymbol(math,main,textord,"\xAC","\\lnot"),defineSymbol(math,main,textord,"\u22A4","\\top"),defineSymbol(math,main,textord,"\u22A5","\\bot"),defineSymbol(math,main,textord,"\u2205","\\emptyset"),defineSymbol(math,ams,textord,"\u2205","\\varnothing"),defineSymbol(math,main,mathord,"\u03B1","\\alpha",!0),defineSymbol(math,main,mathord,"\u03B2","\\beta",!0),defineSymbol(math,main,mathord,"\u03B3","\\gamma",!0),defineSymbol(math,main,mathord,"\u03B4","\\delta",!0),defineSymbol(math,main,mathord,"\u03F5","\\epsilon",!0),defineSymbol(math,main,mathord,"\u03B6","\\zeta",!0),defineSymbol(math,main,mathord,"\u03B7","\\eta",!0),defineSymbol(math,main,mathord,"\u03B8","\\theta",!0),defineSymbol(math,main,mathord,"\u03B9","\\iota",!0),defineSymbol(math,main,mathord,"\u03BA","\\kappa",!0),defineSymbol(math,main,mathord,"\u03BB","\\lambda",!0),defineSymbol(math,main,mathord,"\u03BC","\\mu",!0),defineSymbol(math,main,mathord,"\u03BD","\\nu",!0),defineSymbol(math,main,mathord,"\u03BE","\\xi",!0),defineSymbol(math,main,mathord,"\u03BF","\\omicron",!0),defineSymbol(math,main,mathord,"\u03C0","\\pi",!0),defineSymbol(math,main,mathord,"\u03C1","\\rho",!0),defineSymbol(math,main,mathord,"\u03C3","\\sigma",!0),defineSymbol(math,main,mathord,"\u03C4","\\tau",!0),defineSymbol(math,main,mathord,"\u03C5","\\upsilon",!0),defineSymbol(math,main,mathord,"\u03D5","\\phi",!0),defineSymbol(math,main,mathord,"\u03C7","\\chi",!0),defineSymbol(math,main,mathord,"\u03C8","\\psi",!0),defineSymbol(math,main,mathord,"\u03C9","\\omega",!0),defineSymbol(math,main,mathord,"\u03B5","\\varepsilon",!0),defineSymbol(math,main,mathord,"\u03D1","\\vartheta",!0),defineSymbol(math,main,mathord,"\u03D6","\\varpi",!0),defineSymbol(math,main,mathord,"\u03F1","\\varrho",!0),defineSymbol(math,main,mathord,"\u03C2","\\varsigma",!0),defineSymbol(math,main,mathord,"\u03C6","\\varphi",!0),defineSymbol(math,main,bin,"\u2217","*",!0),defineSymbol(math,main,bin,"+","+"),defineSymbol(math,main,bin,"\u2212","-",!0),defineSymbol(math,main,bin,"\u22C5","\\cdot",!0),defineSymbol(math,main,bin,"\u2218","\\circ",!0),defineSymbol(math,main,bin,"\xF7","\\div",!0),defineSymbol(math,main,bin,"\xB1","\\pm",!0),defineSymbol(math,main,bin,"\xD7","\\times",!0),defineSymbol(math,main,bin,"\u2229","\\cap",!0),defineSymbol(math,main,bin,"\u222A","\\cup",!0),defineSymbol(math,main,bin,"\u2216","\\setminus",!0),defineSymbol(math,main,bin,"\u2227","\\land"),defineSymbol(math,main,bin,"\u2228","\\lor"),defineSymbol(math,main,bin,"\u2227","\\wedge",!0),defineSymbol(math,main,bin,"\u2228","\\vee",!0),defineSymbol(math,main,textord,"\u221A","\\surd"),defineSymbol(math,main,open,"\u27E8","\\langle",!0),defineSymbol(math,main,open,"\u2223","\\lvert"),defineSymbol(math,main,open,"\u2225","\\lVert"),defineSymbol(math,main,close,"?","?"),defineSymbol(math,main,close,"!","!"),defineSymbol(math,main,close,"\u27E9","\\rangle",!0),defineSymbol(math,main,close,"\u2223","\\rvert"),defineSymbol(math,main,close,"\u2225","\\rVert"),defineSymbol(math,main,rel,"=","="),defineSymbol(math,main,rel,":",":"),defineSymbol(math,main,rel,"\u2248","\\approx",!0),defineSymbol(math,main,rel,"\u2245","\\cong",!0),defineSymbol(math,main,rel,"\u2265","\\ge"),defineSymbol(math,main,rel,"\u2265","\\geq",!0),defineSymbol(math,main,rel,"\u2190","\\gets"),defineSymbol(math,main,rel,">","\\gt",!0),defineSymbol(math,main,rel,"\u2208","\\in",!0),defineSymbol(math,main,rel,"\uE020","\\@not"),defineSymbol(math,main,rel,"\u2282","\\subset",!0),defineSymbol(math,main,rel,"\u2283","\\supset",!0),defineSymbol(math,main,rel,"\u2286","\\subseteq",!0),defineSymbol(math,main,rel,"\u2287","\\supseteq",!0),defineSymbol(math,ams,rel,"\u2288","\\nsubseteq",!0),defineSymbol(math,ams,rel,"\u2289","\\nsupseteq",!0),defineSymbol(math,main,rel,"\u22A8","\\models"),defineSymbol(math,main,rel,"\u2190","\\leftarrow",!0),defineSymbol(math,main,rel,"\u2264","\\le"),defineSymbol(math,main,rel,"\u2264","\\leq",!0),defineSymbol(math,main,rel,"<","\\lt",!0),defineSymbol(math,main,rel,"\u2192","\\rightarrow",!0),defineSymbol(math,main,rel,"\u2192","\\to"),defineSymbol(math,ams,rel,"\u2271","\\ngeq",!0),defineSymbol(math,ams,rel,"\u2270","\\nleq",!0),defineSymbol(math,main,spacing,"\xA0","\\ "),defineSymbol(math,main,spacing,"\xA0","\\space"),defineSymbol(math,main,spacing,"\xA0","\\nobreakspace"),defineSymbol(text,main,spacing,"\xA0","\\ "),defineSymbol(text,main,spacing,"\xA0"," "),defineSymbol(text,main,spacing,"\xA0","\\space"),defineSymbol(text,main,spacing,"\xA0","\\nobreakspace"),defineSymbol(math,main,spacing,null,"\\nobreak"),defineSymbol(math,main,spacing,null,"\\allowbreak"),defineSymbol(math,main,punct,",",","),defineSymbol(math,main,punct,";",";"),defineSymbol(math,ams,bin,"\u22BC","\\barwedge",!0),defineSymbol(math,ams,bin,"\u22BB","\\veebar",!0),defineSymbol(math,main,bin,"\u2299","\\odot",!0),defineSymbol(math,main,bin,"\u2295","\\oplus",!0),defineSymbol(math,main,bin,"\u2297","\\otimes",!0),defineSymbol(math,main,textord,"\u2202","\\partial",!0),defineSymbol(math,main,bin,"\u2298","\\oslash",!0),defineSymbol(math,ams,bin,"\u229A","\\circledcirc",!0),defineSymbol(math,ams,bin,"\u22A1","\\boxdot",!0),defineSymbol(math,main,bin,"\u25B3","\\bigtriangleup"),defineSymbol(math,main,bin,"\u25BD","\\bigtriangledown"),defineSymbol(math,main,bin,"\u2020","\\dagger"),defineSymbol(math,main,bin,"\u22C4","\\diamond"),defineSymbol(math,main,bin,"\u22C6","\\star"),defineSymbol(math,main,bin,"\u25C3","\\triangleleft"),defineSymbol(math,main,bin,"\u25B9","\\triangleright"),defineSymbol(math,main,open,"{","\\{"),defineSymbol(text,main,textord,"{","\\{"),defineSymbol(text,main,textord,"{","\\textbraceleft"),defineSymbol(math,main,close,"}","\\}"),defineSymbol(text,main,textord,"}","\\}"),defineSymbol(text,main,textord,"}","\\textbraceright"),defineSymbol(math,main,open,"{","\\lbrace"),defineSymbol(math,main,close,"}","\\rbrace"),defineSymbol(math,main,open,"[","\\lbrack",!0),defineSymbol(text,main,textord,"[","\\lbrack",!0),defineSymbol(math,main,close,"]","\\rbrack",!0),defineSymbol(text,main,textord,"]","\\rbrack",!0),defineSymbol(math,main,open,"(","\\lparen",!0),defineSymbol(math,main,close,")","\\rparen",!0),defineSymbol(text,main,textord,"<","\\textless",!0),defineSymbol(text,main,textord,">","\\textgreater",!0),defineSymbol(math,main,open,"\u230A","\\lfloor",!0),defineSymbol(math,main,close,"\u230B","\\rfloor",!0),defineSymbol(math,main,open,"\u2308","\\lceil",!0),defineSymbol(math,main,close,"\u2309","\\rceil",!0),defineSymbol(math,main,textord,"\\","\\backslash"),defineSymbol(math,main,textord,"\u2223","|"),defineSymbol(math,main,textord,"\u2223","\\vert"),defineSymbol(text,main,textord,"|","\\textbar",!0),defineSymbol(math,main,textord,"\u2225","\\|"),defineSymbol(math,main,textord,"\u2225","\\Vert"),defineSymbol(text,main,textord,"\u2225","\\textbardbl"),defineSymbol(text,main,textord,"~","\\textasciitilde"),defineSymbol(text,main,textord,"\\","\\textbackslash"),defineSymbol(text,main,textord,"^","\\textasciicircum"),defineSymbol(math,main,rel,"\u2191","\\uparrow",!0),defineSymbol(math,main,rel,"\u21D1","\\Uparrow",!0),defineSymbol(math,main,rel,"\u2193","\\downarrow",!0),defineSymbol(math,main,rel,"\u21D3","\\Downarrow",!0),defineSymbol(math,main,rel,"\u2195","\\updownarrow",!0),defineSymbol(math,main,rel,"\u21D5","\\Updownarrow",!0),defineSymbol(math,main,op,"\u2210","\\coprod"),defineSymbol(math,main,op,"\u22C1","\\bigvee"),defineSymbol(math,main,op,"\u22C0","\\bigwedge"),defineSymbol(math,main,op,"\u2A04","\\biguplus"),defineSymbol(math,main,op,"\u22C2","\\bigcap"),defineSymbol(math,main,op,"\u22C3","\\bigcup"),defineSymbol(math,main,op,"\u222B","\\int"),defineSymbol(math,main,op,"\u222B","\\intop"),defineSymbol(math,main,op,"\u222C","\\iint"),defineSymbol(math,main,op,"\u222D","\\iiint"),defineSymbol(math,main,op,"\u220F","\\prod"),defineSymbol(math,main,op,"\u2211","\\sum"),defineSymbol(math,main,op,"\u2A02","\\bigotimes"),defineSymbol(math,main,op,"\u2A01","\\bigoplus"),defineSymbol(math,main,op,"\u2A00","\\bigodot"),defineSymbol(math,main,op,"\u222E","\\oint"),defineSymbol(math,main,op,"\u222F","\\oiint"),defineSymbol(math,main,op,"\u2230","\\oiiint"),defineSymbol(math,main,op,"\u2A06","\\bigsqcup"),defineSymbol(math,main,op,"\u222B","\\smallint"),defineSymbol(text,main,inner,"\u2026","\\textellipsis"),defineSymbol(math,main,inner,"\u2026","\\mathellipsis"),defineSymbol(text,main,inner,"\u2026","\\ldots",!0),defineSymbol(math,main,inner,"\u2026","\\ldots",!0),defineSymbol(math,main,inner,"\u22EF","\\@cdots",!0),defineSymbol(math,main,inner,"\u22F1","\\ddots",!0),defineSymbol(math,main,textord,"\u22EE","\\varvdots"),defineSymbol(text,main,textord,"\u22EE","\\varvdots"),defineSymbol(math,main,accent,"\u02CA","\\acute"),defineSymbol(math,main,accent,"\u02CB","\\grave"),defineSymbol(math,main,accent,"\xA8","\\ddot"),defineSymbol(math,main,accent,"~","\\tilde"),defineSymbol(math,main,accent,"\u02C9","\\bar"),defineSymbol(math,main,accent,"\u02D8","\\breve"),defineSymbol(math,main,accent,"\u02C7","\\check"),defineSymbol(math,main,accent,"^","\\hat"),defineSymbol(math,main,accent,"\u20D7","\\vec"),defineSymbol(math,main,accent,"\u02D9","\\dot"),defineSymbol(math,main,accent,"\u02DA","\\mathring"),defineSymbol(math,main,mathord,"\uE131","\\@imath"),defineSymbol(math,main,mathord,"\uE237","\\@jmath"),defineSymbol(math,main,textord,"\u0131","\u0131"),defineSymbol(math,main,textord,"\u0237","\u0237"),defineSymbol(text,main,textord,"\u0131","\\i",!0),defineSymbol(text,main,textord,"\u0237","\\j",!0),defineSymbol(text,main,textord,"\xDF","\\ss",!0),defineSymbol(text,main,textord,"\xE6","\\ae",!0),defineSymbol(text,main,textord,"\u0153","\\oe",!0),defineSymbol(text,main,textord,"\xF8","\\o",!0),defineSymbol(text,main,textord,"\xC6","\\AE",!0),defineSymbol(text,main,textord,"\u0152","\\OE",!0),defineSymbol(text,main,textord,"\xD8","\\O",!0),defineSymbol(text,main,accent,"\u02CA","\\'"),defineSymbol(text,main,accent,"\u02CB","\\`"),defineSymbol(text,main,accent,"\u02C6","\\^"),defineSymbol(text,main,accent,"\u02DC","\\~"),defineSymbol(text,main,accent,"\u02C9","\\="),defineSymbol(text,main,accent,"\u02D8","\\u"),defineSymbol(text,main,accent,"\u02D9","\\."),defineSymbol(text,main,accent,"\xB8","\\c"),defineSymbol(text,main,accent,"\u02DA","\\r"),defineSymbol(text,main,accent,"\u02C7","\\v"),defineSymbol(text,main,accent,"\xA8",'\\"'),defineSymbol(text,main,accent,"\u02DD","\\H"),defineSymbol(text,main,accent,"\u25EF","\\textcircled");var ligatures={"--":!0,"---":!0,"``":!0,"''":!0};defineSymbol(text,main,textord,"\u2013","--",!0),defineSymbol(text,main,textord,"\u2013","\\textendash"),defineSymbol(text,main,textord,"\u2014","---",!0),defineSymbol(text,main,textord,"\u2014","\\textemdash"),defineSymbol(text,main,textord,"\u2018","`",!0),defineSymbol(text,main,textord,"\u2018","\\textquoteleft"),defineSymbol(text,main,textord,"\u2019","'",!0),defineSymbol(text,main,textord,"\u2019","\\textquoteright"),defineSymbol(text,main,textord,"\u201C","``",!0),defineSymbol(text,main,textord,"\u201C","\\textquotedblleft"),defineSymbol(text,main,textord,"\u201D","''",!0),defineSymbol(text,main,textord,"\u201D","\\textquotedblright"),defineSymbol(math,main,textord,"\xB0","\\degree",!0),defineSymbol(text,main,textord,"\xB0","\\degree"),defineSymbol(text,main,textord,"\xB0","\\textdegree",!0),defineSymbol(math,main,textord,"\xA3","\\pounds"),defineSymbol(math,main,textord,"\xA3","\\mathsterling",!0),defineSymbol(text,main,textord,"\xA3","\\pounds"),defineSymbol(text,main,textord,"\xA3","\\textsterling",!0),defineSymbol(math,ams,textord,"\u2720","\\maltese"),defineSymbol(text,ams,textord,"\u2720","\\maltese");for(var mathTextSymbols='0123456789/@."',i=0;i<mathTextSymbols.length;i++){var ch=mathTextSymbols.charAt(i);defineSymbol(math,main,textord,ch,ch)}for(var textSymbols='0123456789!@*()-=+";:?/.,',_i=0;_i<textSymbols.length;_i++){var _ch=textSymbols.charAt(_i);defineSymbol(text,main,textord,_ch,_ch)}for(var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",_i2=0;_i2<letters.length;_i2++){var _ch2=letters.charAt(_i2);defineSymbol(math,main,mathord,_ch2,_ch2),defineSymbol(text,main,textord,_ch2,_ch2)}defineSymbol(math,ams,textord,"C","\u2102"),defineSymbol(text,ams,textord,"C","\u2102"),defineSymbol(math,ams,textord,"H","\u210D"),defineSymbol(text,ams,textord,"H","\u210D"),defineSymbol(math,ams,textord,"N","\u2115"),defineSymbol(text,ams,textord,"N","\u2115"),defineSymbol(math,ams,textord,"P","\u2119"),defineSymbol(text,ams,textord,"P","\u2119"),defineSymbol(math,ams,textord,"Q","\u211A"),defineSymbol(text,ams,textord,"Q","\u211A"),defineSymbol(math,ams,textord,"R","\u211D"),defineSymbol(text,ams,textord,"R","\u211D"),defineSymbol(math,ams,textord,"Z","\u2124"),defineSymbol(text,ams,textord,"Z","\u2124"),defineSymbol(math,main,mathord,"h","\u210E"),defineSymbol(text,main,mathord,"h","\u210E");for(var wideChar="",_i3=0;_i3<letters.length;_i3++){var _ch3=letters.charAt(_i3);wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar))}wideChar="\u{1D55C}",defineSymbol(math,main,mathord,"k",wideChar),defineSymbol(text,main,textord,"k",wideChar);for(var _i4=0;_i4<10;_i4++){var _ch4=_i4.toString();wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar)}for(var extraLatin="\xD0\xDE\xFE",_i5=0;_i5<extraLatin.length;_i5++){var _ch5=extraLatin.charAt(_i5);defineSymbol(math,main,mathord,_ch5,_ch5),defineSymbol(text,main,textord,_ch5,_ch5)}var wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=function n(e,o){var a=e.charCodeAt(0),s=e.charCodeAt(1),l=(a-55296)*1024+(s-56320)+65536,c=o==="math"?0:1;if(119808<=l&&l<120484){var d=Math.floor((l-119808)/26);return[wideLatinLetterData[d][2],wideLatinLetterData[d][c]]}else if(120782<=l&&l<=120831){var u=Math.floor((l-120782)/10);return[wideNumeralData[u][2],wideNumeralData[u][c]]}else{if(l===120485||l===120486)return[wideLatinLetterData[0][2],wideLatinLetterData[0][c]];if(120486<l&&l<120782)return["",""];throw new ParseError("Unsupported character: "+e)}},lookupSymbol=function n(e,o,a){return symbols[a][e]&&symbols[a][e].replace&&(e=symbols[a][e].replace),{value:e,metrics:getCharacterMetrics(e,o,a)}},makeSymbol=function n(e,o,a,s,l){var c=lookupSymbol(e,o,a),d=c.metrics;e=c.value;var u;if(d){var f=d.italic;(a==="text"||s&&s.font==="mathit")&&(f=0),u=new SymbolNode(e,d.height,d.depth,f,d.skew,d.width,l)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+o+"' and mode '"+a+"'")),u=new SymbolNode(e,0,0,0,0,0,l);if(s){u.maxFontSize=s.sizeMultiplier,s.style.isTight()&&u.classes.push("mtight");var v=s.getColor();v&&(u.style.color=v)}return u},mathsym=function n(e,o,a,s){return s===void 0&&(s=[]),a.font==="boldsymbol"&&lookupSymbol(e,"Main-Bold",o).metrics?makeSymbol(e,"Main-Bold",o,a,s.concat(["mathbf"])):e==="\\"||symbols[o][e].font==="main"?makeSymbol(e,"Main-Regular",o,a,s):makeSymbol(e,"AMS-Regular",o,a,s.concat(["amsrm"]))},boldsymbol=function n(e,o,a,s,l){return l!=="textord"&&lookupSymbol(e,"Math-BoldItalic",o).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},makeOrd=function n(e,o,a){var s=e.mode,l=e.text,c=["mord"],d=s==="math"||s==="text"&&o.font,u=d?o.font:o.fontFamily,f="",v="";if(l.charCodeAt(0)===55349&&([f,v]=wideCharacterFont(l,s)),f.length>0)return makeSymbol(l,f,s,o,c.concat(v));if(u){var b,k;if(u==="boldsymbol"){var x=boldsymbol(l,s,o,c,a);b=x.fontName,k=[x.fontClass]}else d?(b=fontMap[u].fontName,k=[u]):(b=retrieveTextFontName(u,o.fontWeight,o.fontShape),k=[u,o.fontWeight,o.fontShape]);if(lookupSymbol(l,b,s).metrics)return makeSymbol(l,b,s,o,c.concat(k));if(ligatures.hasOwnProperty(l)&&b.slice(0,10)==="Typewriter"){for(var _=[],E=0;E<l.length;E++)_.push(makeSymbol(l[E],b,s,o,c.concat(k)));return makeFragment(_)}}if(a==="mathord")return makeSymbol(l,"Math-Italic",s,o,c.concat(["mathnormal"]));if(a==="textord"){var B=symbols[s][l]&&symbols[s][l].font;if(B==="ams"){var M=retrieveTextFontName("amsrm",o.fontWeight,o.fontShape);return makeSymbol(l,M,s,o,c.concat("amsrm",o.fontWeight,o.fontShape))}else if(B==="main"||!B){var V=retrieveTextFontName("textrm",o.fontWeight,o.fontShape);return makeSymbol(l,V,s,o,c.concat(o.fontWeight,o.fontShape))}else{var F=retrieveTextFontName(B,o.fontWeight,o.fontShape);return makeSymbol(l,F,s,o,c.concat(F,o.fontWeight,o.fontShape))}}else throw new Error("unexpected type: "+a+" in makeOrd")},canCombine=(n,e)=>{if(createClass(n.classes)!==createClass(e.classes)||n.skew!==e.skew||n.maxFontSize!==e.maxFontSize)return!1;if(n.classes.length===1){var o=n.classes[0];if(o==="mbin"||o==="mord")return!1}for(var a in n.style)if(n.style.hasOwnProperty(a)&&n.style[a]!==e.style[a])return!1;for(var s in e.style)if(e.style.hasOwnProperty(s)&&n.style[s]!==e.style[s])return!1;return!0},tryCombineChars=n=>{for(var e=0;e<n.length-1;e++){var o=n[e],a=n[e+1];o instanceof SymbolNode&&a instanceof SymbolNode&&canCombine(o,a)&&(o.text+=a.text,o.height=Math.max(o.height,a.height),o.depth=Math.max(o.depth,a.depth),o.italic=a.italic,n.splice(e+1,1),e--)}return n},sizeElementFromChildren=function n(e){for(var o=0,a=0,s=0,l=0;l<e.children.length;l++){var c=e.children[l];c.height>o&&(o=c.height),c.depth>a&&(a=c.depth),c.maxFontSize>s&&(s=c.maxFontSize)}e.height=o,e.depth=a,e.maxFontSize=s},makeSpan$2=function n(e,o,a,s){var l=new Span(e,o,a,s);return sizeElementFromChildren(l),l},makeSvgSpan=(n,e,o,a)=>new Span(n,e,o,a),makeLineSpan=function n(e,o,a){var s=makeSpan$2([e],[],o);return s.height=Math.max(a||o.fontMetrics().defaultRuleThickness,o.minRuleThickness),s.style.borderBottomWidth=makeEm(s.height),s.maxFontSize=1,s},makeAnchor=function n(e,o,a,s){var l=new Anchor(e,o,a,s);return sizeElementFromChildren(l),l},makeFragment=function n(e){var o=new DocumentFragment$1(e);return sizeElementFromChildren(o),o},wrapFragment=function n(e,o){return e instanceof DocumentFragment$1?makeSpan$2([],[e],o):e},getVListChildrenAndDepth=function n(e){if(e.positionType==="individualShift"){for(var o=e.children,a=[o[0]],s=-o[0].shift-o[0].elem.depth,l=s,c=1;c<o.length;c++){var d=-o[c].shift-l-o[c].elem.depth,u=d-(o[c-1].elem.height+o[c-1].elem.depth);l=l+d,a.push({type:"kern",size:u}),a.push(o[c])}return{children:a,depth:s}}var f;if(e.positionType==="top"){for(var v=e.positionData,b=0;b<e.children.length;b++){var k=e.children[b];v-=k.type==="kern"?k.size:k.elem.height+k.elem.depth}f=v}else if(e.positionType==="bottom")f=-e.positionData;else{var x=e.children[0];if(x.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")f=-x.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")f=-x.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:f}},makeVList=function n(e,o){for(var{children:a,depth:s}=getVListChildrenAndDepth(e),l=0,c=0;c<a.length;c++){var d=a[c];if(d.type==="elem"){var u=d.elem;l=Math.max(l,u.maxFontSize,u.height)}}l+=2;var f=makeSpan$2(["pstrut"],[]);f.style.height=makeEm(l);for(var v=[],b=s,k=s,x=s,_=0;_<a.length;_++){var E=a[_];if(E.type==="kern")x+=E.size;else{var B=E.elem,M=E.wrapperClasses||[],V=E.wrapperStyle||{},F=makeSpan$2(M,[f,B],void 0,V);F.style.top=makeEm(-l-x-B.depth),E.marginLeft&&(F.style.marginLeft=E.marginLeft),E.marginRight&&(F.style.marginRight=E.marginRight),v.push(F),x+=B.height+B.depth}b=Math.min(b,x),k=Math.max(k,x)}var I=makeSpan$2(["vlist"],v);I.style.height=makeEm(k);var L;if(b<0){var U=makeSpan$2([],[]),Z=makeSpan$2(["vlist"],[U]);Z.style.height=makeEm(-b);var K=makeSpan$2(["vlist-s"],[new SymbolNode("\u200B")]);L=[makeSpan$2(["vlist-r"],[I,K]),makeSpan$2(["vlist-r"],[Z])]}else L=[makeSpan$2(["vlist-r"],[I])];var j=makeSpan$2(["vlist-t"],L);return L.length===2&&j.classes.push("vlist-t2"),j.height=k,j.depth=-b,j},makeGlue=(n,e)=>{var o=makeSpan$2(["mspace"],[],e),a=calculateSize(n,e);return o.style.marginRight=makeEm(a),o},retrieveTextFontName=function n(e,o,a){var s="";switch(e){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=e}var l;return o==="textbf"&&a==="textit"?l="BoldItalic":o==="textbf"?l="Bold":o==="textit"?l="Italic":l="Regular",s+"-"+l},fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=function n(e,o){var[a,s,l]=svgData[e],c=new PathNode(a),d=new SvgNode([c],{width:makeEm(s),height:makeEm(l),style:"width:"+makeEm(s),viewBox:"0 0 "+1e3*s+" "+1e3*l,preserveAspectRatio:"xMinYMin"}),u=makeSvgSpan(["overlay"],[d],o);return u.height=l,u.style.height=makeEm(l),u.style.width=makeEm(s),u},buildCommon={fontMap,makeSymbol,mathsym,makeSpan:makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,makeVList,makeOrd,makeGlue,staticSvg,svgData,tryCombineChars},thinspace={number:3,unit:"mu"},mediumspace={number:4,unit:"mu"},thickspace={number:5,unit:"mu"},spacings={mord:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={};function defineFunction(n){for(var{type:e,names:o,props:a,handler:s,htmlBuilder:l,mathmlBuilder:c}=n,d={type:e,numArgs:a.numArgs,argTypes:a.argTypes,allowedInArgument:!!a.allowedInArgument,allowedInText:!!a.allowedInText,allowedInMath:a.allowedInMath===void 0?!0:a.allowedInMath,numOptionalArgs:a.numOptionalArgs||0,infix:!!a.infix,primitive:!!a.primitive,handler:s},u=0;u<o.length;++u)_functions[o[u]]=d;e&&(l&&(_htmlGroupBuilders[e]=l),c&&(_mathmlGroupBuilders[e]=c))}function defineFunctionBuilders(n){var{type:e,htmlBuilder:o,mathmlBuilder:a}=n;defineFunction({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:o,mathmlBuilder:a})}var normalizeArgument=function n(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},ordargument=function n(e){return e.type==="ordgroup"?e.body:[e]},makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=function n(e,o,a,s){s===void 0&&(s=[null,null]);for(var l=[],c=0;c<e.length;c++){var d=buildGroup$1(e[c],o);if(d instanceof DocumentFragment$1){var u=d.children;l.push(...u)}else l.push(d)}if(buildCommon.tryCombineChars(l),!a)return l;var f=o;if(e.length===1){var v=e[0];v.type==="sizing"?f=o.havingSize(v.size):v.type==="styling"&&(f=o.havingStyle(styleMap$1[v.style]))}var b=makeSpan$1([s[0]||"leftmost"],[],o),k=makeSpan$1([s[1]||"rightmost"],[],o),x=a==="root";return traverseNonSpaceNodes(l,(_,E)=>{var B=E.classes[0],M=_.classes[0];B==="mbin"&&utils.contains(binRightCanceller,M)?E.classes[0]="mord":M==="mbin"&&utils.contains(binLeftCanceller,B)&&(_.classes[0]="mord")},{node:b},k,x),traverseNonSpaceNodes(l,(_,E)=>{var B=getTypeOfDomTree(E),M=getTypeOfDomTree(_),V=B&&M?_.hasClass("mtight")?tightSpacings[B][M]:spacings[B][M]:null;if(V)return buildCommon.makeGlue(V,f)},{node:b},k,x),l},traverseNonSpaceNodes=function n(e,o,a,s,l){s&&e.push(s);for(var c=0;c<e.length;c++){var d=e[c],u=checkPartialGroup(d);if(u){n(u.children,o,a,null,l);continue}var f=!d.hasClass("mspace");if(f){var v=o(d,a.node);v&&(a.insertAfter?a.insertAfter(v):(e.unshift(v),c++))}f?a.node=d:l&&d.hasClass("newline")&&(a.node=makeSpan$1(["leftmost"])),a.insertAfter=(b=>k=>{e.splice(b+1,0,k),c++})(c)}s&&e.pop()},checkPartialGroup=function n(e){return e instanceof DocumentFragment$1||e instanceof Anchor||e instanceof Span&&e.hasClass("enclosing")?e:null},getOutermostNode=function n(e,o){var a=checkPartialGroup(e);if(a){var s=a.children;if(s.length){if(o==="right")return n(s[s.length-1],"right");if(o==="left")return n(s[0],"left")}}return e},getTypeOfDomTree=function n(e,o){return e?(o&&(e=getOutermostNode(e,o)),DomEnum[e.classes[0]]||null):null},makeNullDelimiter=function n(e,o){var a=["nulldelimiter"].concat(e.baseSizingClasses());return makeSpan$1(o.concat(a))},buildGroup$1=function n(e,o,a){if(!e)return makeSpan$1();if(_htmlGroupBuilders[e.type]){var s=_htmlGroupBuilders[e.type](e,o);if(a&&o.size!==a.size){s=makeSpan$1(o.sizingClasses(a),[s],o);var l=o.sizeMultiplier/a.sizeMultiplier;s.height*=l,s.depth*=l}return s}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildHTMLUnbreakable(n,e){var o=makeSpan$1(["base"],n,e),a=makeSpan$1(["strut"]);return a.style.height=makeEm(o.height+o.depth),o.depth&&(a.style.verticalAlign=makeEm(-o.depth)),o.children.unshift(a),o}function buildHTML(n,e){var o=null;n.length===1&&n[0].type==="tag"&&(o=n[0].tag,n=n[0].body);var a=buildExpression$1(n,e,"root"),s;a.length===2&&a[1].hasClass("tag")&&(s=a.pop());for(var l=[],c=[],d=0;d<a.length;d++)if(c.push(a[d]),a[d].hasClass("mbin")||a[d].hasClass("mrel")||a[d].hasClass("allowbreak")){for(var u=!1;d<a.length-1&&a[d+1].hasClass("mspace")&&!a[d+1].hasClass("newline");)d++,c.push(a[d]),a[d].hasClass("nobreak")&&(u=!0);u||(l.push(buildHTMLUnbreakable(c,e)),c=[])}else a[d].hasClass("newline")&&(c.pop(),c.length>0&&(l.push(buildHTMLUnbreakable(c,e)),c=[]),l.push(a[d]));c.length>0&&l.push(buildHTMLUnbreakable(c,e));var f;o?(f=buildHTMLUnbreakable(buildExpression$1(o,e,!0)),f.classes=["tag"],l.push(f)):s&&l.push(s);var v=makeSpan$1(["katex-html"],l);if(v.setAttribute("aria-hidden","true"),f){var b=f.children[0];b.style.height=makeEm(v.height+v.depth),v.depth&&(b.style.verticalAlign=makeEm(-v.depth))}return v}function newDocumentFragment(n){return new DocumentFragment$1(n)}class MathNode{constructor(e,o,a){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=o||[],this.classes=a||[]}setAttribute(e,o){this.attributes[e]=o}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var o in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,o)&&e.setAttribute(o,this.attributes[o]);this.classes.length>0&&(e.className=createClass(this.classes));for(var a=0;a<this.children.length;a++)if(this.children[a]instanceof TextNode&&this.children[a+1]instanceof TextNode){for(var s=this.children[a].toText()+this.children[++a].toText();this.children[a+1]instanceof TextNode;)s+=this.children[++a].toText();e.appendChild(new TextNode(s).toNode())}else e.appendChild(this.children[a].toNode());return e}toMarkup(){var e="<"+this.type;for(var o in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,o)&&(e+=" "+o+'="',e+=utils.escape(this.attributes[o]),e+='"');this.classes.length>0&&(e+=' class ="'+utils.escape(createClass(this.classes))+'"'),e+=">";for(var a=0;a<this.children.length;a++)e+=this.children[a].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class TextNode{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils.escape(this.toText())}toText(){return this.text}}class SpaceNode{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="\u200A":e>=.1666&&e<=.1667?this.character="\u2009":e>=.2222&&e<=.2223?this.character="\u2005":e>=.2777&&e<=.2778?this.character="\u2005\u200A":e>=-.05556&&e<=-.05555?this.character="\u200A\u2063":e>=-.1667&&e<=-.1666?this.character="\u2009\u2063":e>=-.2223&&e<=-.2222?this.character="\u205F\u2063":e>=-.2778&&e<=-.2777?this.character="\u2005\u2063":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",makeEm(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mathMLTree={MathNode,TextNode,SpaceNode,newDocumentFragment},makeText=function n(e,o,a){return symbols[o][e]&&symbols[o][e].replace&&e.charCodeAt(0)!==55349&&!(ligatures.hasOwnProperty(e)&&a&&(a.fontFamily&&a.fontFamily.slice(4,6)==="tt"||a.font&&a.font.slice(4,6)==="tt"))&&(e=symbols[o][e].replace),new mathMLTree.TextNode(e)},makeRow=function n(e){return e.length===1?e[0]:new mathMLTree.MathNode("mrow",e)},getVariant=function n(e,o){if(o.fontFamily==="texttt")return"monospace";if(o.fontFamily==="textsf")return o.fontShape==="textit"&&o.fontWeight==="textbf"?"sans-serif-bold-italic":o.fontShape==="textit"?"sans-serif-italic":o.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(o.fontShape==="textit"&&o.fontWeight==="textbf")return"bold-italic";if(o.fontShape==="textit")return"italic";if(o.fontWeight==="textbf")return"bold";var a=o.font;if(!a||a==="mathnormal")return null;var s=e.mode;if(a==="mathit")return"italic";if(a==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(a==="mathbf")return"bold";if(a==="mathbb")return"double-struck";if(a==="mathsfit")return"sans-serif-italic";if(a==="mathfrak")return"fraktur";if(a==="mathscr"||a==="mathcal")return"script";if(a==="mathsf")return"sans-serif";if(a==="mathtt")return"monospace";var l=e.text;if(utils.contains(["\\imath","\\jmath"],l))return null;symbols[s][l]&&symbols[s][l].replace&&(l=symbols[s][l].replace);var c=buildCommon.fontMap[a].fontName;return getCharacterMetrics(l,c,s)?buildCommon.fontMap[a].variant:null};function isNumberPunctuation(n){if(!n)return!1;if(n.type==="mi"&&n.children.length===1){var e=n.children[0];return e instanceof TextNode&&e.text==="."}else if(n.type==="mo"&&n.children.length===1&&n.getAttribute("separator")==="true"&&n.getAttribute("lspace")==="0em"&&n.getAttribute("rspace")==="0em"){var o=n.children[0];return o instanceof TextNode&&o.text===","}else return!1}var buildExpression=function n(e,o,a){if(e.length===1){var s=buildGroup(e[0],o);return a&&s instanceof MathNode&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var l=[],c,d=0;d<e.length;d++){var u=buildGroup(e[d],o);if(u instanceof MathNode&&c instanceof MathNode){if(u.type==="mtext"&&c.type==="mtext"&&u.getAttribute("mathvariant")===c.getAttribute("mathvariant")){c.children.push(...u.children);continue}else if(u.type==="mn"&&c.type==="mn"){c.children.push(...u.children);continue}else if(isNumberPunctuation(u)&&c.type==="mn"){c.children.push(...u.children);continue}else if(u.type==="mn"&&isNumberPunctuation(c))u.children=[...c.children,...u.children],l.pop();else if((u.type==="msup"||u.type==="msub")&&u.children.length>=1&&(c.type==="mn"||isNumberPunctuation(c))){var f=u.children[0];f instanceof MathNode&&f.type==="mn"&&(f.children=[...c.children,...f.children],l.pop())}else if(c.type==="mi"&&c.children.length===1){var v=c.children[0];if(v instanceof TextNode&&v.text==="\u0338"&&(u.type==="mo"||u.type==="mi"||u.type==="mn")){var b=u.children[0];b instanceof TextNode&&b.text.length>0&&(b.text=b.text.slice(0,1)+"\u0338"+b.text.slice(1),l.pop())}}}l.push(u),c=u}return l},buildExpressionRow=function n(e,o,a){return makeRow(buildExpression(e,o,a))},buildGroup=function n(e,o){if(!e)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[e.type]){var a=_mathmlGroupBuilders[e.type](e,o);return a}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildMathML(n,e,o,a,s){var l=buildExpression(n,o),c;l.length===1&&l[0]instanceof MathNode&&utils.contains(["mrow","mtable"],l[0].type)?c=l[0]:c=new mathMLTree.MathNode("mrow",l);var d=new mathMLTree.MathNode("annotation",[new mathMLTree.TextNode(e)]);d.setAttribute("encoding","application/x-tex");var u=new mathMLTree.MathNode("semantics",[c,d]),f=new mathMLTree.MathNode("math",[u]);f.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),a&&f.setAttribute("display","block");var v=s?"katex":"katex-mathml";return buildCommon.makeSpan([v],[f])}var optionsFromSettings=function n(e){return new Options({style:e.displayMode?Style$1.DISPLAY:Style$1.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},displayWrap=function n(e,o){if(o.displayMode){var a=["katex-display"];o.leqno&&a.push("leqno"),o.fleqn&&a.push("fleqn"),e=buildCommon.makeSpan(a,[e])}return e},buildTree=function n(e,o,a){var s=optionsFromSettings(a),l;if(a.output==="mathml")return buildMathML(e,o,s,a.displayMode,!0);if(a.output==="html"){var c=buildHTML(e,s);l=buildCommon.makeSpan(["katex"],[c])}else{var d=buildMathML(e,o,s,a.displayMode,!1),u=buildHTML(e,s);l=buildCommon.makeSpan(["katex"],[d,u])}return displayWrap(l,a)},buildHTMLTree=function n(e,o,a){var s=optionsFromSettings(a),l=buildHTML(e,s),c=buildCommon.makeSpan(["katex"],[l]);return displayWrap(c,a)},stretchyCodePoint={widehat:"^",widecheck:"\u02C7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23DF",overbrace:"\u23DE",overgroup:"\u23E0",undergroup:"\u23E1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21D2",xRightarrow:"\u21D2",overleftharpoon:"\u21BC",xleftharpoonup:"\u21BC",overrightharpoon:"\u21C0",xrightharpoonup:"\u21C0",xLeftarrow:"\u21D0",xLeftrightarrow:"\u21D4",xhookleftarrow:"\u21A9",xhookrightarrow:"\u21AA",xmapsto:"\u21A6",xrightharpoondown:"\u21C1",xleftharpoondown:"\u21BD",xrightleftharpoons:"\u21CC",xleftrightharpoons:"\u21CB",xtwoheadleftarrow:"\u219E",xtwoheadrightarrow:"\u21A0",xlongequal:"=",xtofrom:"\u21C4",xrightleftarrows:"\u21C4",xrightequilibrium:"\u21CC",xleftequilibrium:"\u21CB","\\cdrightarrow":"\u2192","\\cdleftarrow":"\u2190","\\cdlongequal":"="},mathMLnode=function n(e){var o=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[e.replace(/^\\/,"")])]);return o.setAttribute("stretchy","true"),o},katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=function n(e){return e.type==="ordgroup"?e.body.length:1},svgSpan=function n(e,o){function a(){var d=4e5,u=e.label.slice(1);if(utils.contains(["widehat","widecheck","widetilde","utilde"],u)){var f=e,v=groupLength(f.base),b,k,x;if(v>5)u==="widehat"||u==="widecheck"?(b=420,d=2364,x=.42,k=u+"4"):(b=312,d=2340,x=.34,k="tilde4");else{var _=[1,1,2,2,3,3][v];u==="widehat"||u==="widecheck"?(d=[0,1062,2364,2364,2364][_],b=[0,239,300,360,420][_],x=[0,.24,.3,.3,.36,.42][_],k=u+_):(d=[0,600,1033,2339,2340][_],b=[0,260,286,306,312][_],x=[0,.26,.286,.3,.306,.34][_],k="tilde"+_)}var E=new PathNode(k),B=new SvgNode([E],{width:"100%",height:makeEm(x),viewBox:"0 0 "+d+" "+b,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[B],o),minWidth:0,height:x}}else{var M=[],V=katexImagesData[u],[F,I,L]=V,U=L/1e3,Z=F.length,K,j;if(Z===1){var W=V[3];K=["hide-tail"],j=[W]}else if(Z===2)K=["halfarrow-left","halfarrow-right"],j=["xMinYMin","xMaxYMin"];else if(Z===3)K=["brace-left","brace-center","brace-right"],j=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+Z+" children.");for(var Y=0;Y<Z;Y++){var G=new PathNode(F[Y]),fe=new SvgNode([G],{width:"400em",height:makeEm(U),viewBox:"0 0 "+d+" "+L,preserveAspectRatio:j[Y]+" slice"}),le=buildCommon.makeSvgSpan([K[Y]],[fe],o);if(Z===1)return{span:le,minWidth:I,height:U};le.style.height=makeEm(U),M.push(le)}return{span:buildCommon.makeSpan(["stretchy"],M,o),minWidth:I,height:U}}}var{span:s,minWidth:l,height:c}=a();return s.height=c,s.style.height=makeEm(c),l>0&&(s.style.minWidth=makeEm(l)),s},encloseSpan=function n(e,o,a,s,l){var c,d=e.height+e.depth+a+s;if(/fbox|color|angl/.test(o)){if(c=buildCommon.makeSpan(["stretchy",o],[],l),o==="fbox"){var u=l.color&&l.getColor();u&&(c.style.borderColor=u)}}else{var f=[];/^[bx]cancel$/.test(o)&&f.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(o)&&f.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var v=new SvgNode(f,{width:"100%",height:makeEm(d)});c=buildCommon.makeSvgSpan([],[v],l)}return c.height=d,c.style.height=makeEm(d),c},stretchy={encloseSpan,mathMLnode,svgSpan};function assertNodeType(n,e){if(!n||n.type!==e)throw new Error("Expected node of type "+e+", but got "+(n?"node of type "+n.type:String(n)));return n}function assertSymbolNodeType(n){var e=checkSymbolNodeType(n);if(!e)throw new Error("Expected node of symbol group type, but got "+(n?"node of type "+n.type:String(n)));return e}function checkSymbolNodeType(n){return n&&(n.type==="atom"||NON_ATOMS.hasOwnProperty(n.type))?n:null}var htmlBuilder$a=(n,e)=>{var o,a,s;n&&n.type==="supsub"?(a=assertNodeType(n.base,"accent"),o=a.base,n.base=o,s=assertSpan(buildGroup$1(n,e)),n.base=a):(a=assertNodeType(n,"accent"),o=a.base);var l=buildGroup$1(o,e.havingCrampedStyle()),c=a.isShifty&&utils.isCharacterBox(o),d=0;if(c){var u=utils.getBaseElem(o),f=buildGroup$1(u,e.havingCrampedStyle());d=assertSymbolDomNode(f).skew}var v=a.label==="\\c",b=v?l.height+l.depth:Math.min(l.height,e.fontMetrics().xHeight),k;if(a.isStretchy)k=stretchy.svgSpan(a,e),k=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"elem",elem:k,wrapperClasses:["svg-align"],wrapperStyle:d>0?{width:"calc(100% - "+makeEm(2*d)+")",marginLeft:makeEm(2*d)}:void 0}]},e);else{var x,_;a.label==="\\vec"?(x=buildCommon.staticSvg("vec",e),_=buildCommon.svgData.vec[1]):(x=buildCommon.makeOrd({mode:a.mode,text:a.label},e,"textord"),x=assertSymbolDomNode(x),x.italic=0,_=x.width,v&&(b+=x.depth)),k=buildCommon.makeSpan(["accent-body"],[x]);var E=a.label==="\\textcircled";E&&(k.classes.push("accent-full"),b=l.height);var B=d;E||(B-=_/2),k.style.left=makeEm(B),a.label==="\\textcircled"&&(k.style.top=".2em"),k=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:-b},{type:"elem",elem:k}]},e)}var M=buildCommon.makeSpan(["mord","accent"],[k],e);return s?(s.children[0]=M,s.height=Math.max(M.height,s.height),s.classes[0]="mord",s):M},mathmlBuilder$9=(n,e)=>{var o=n.isStretchy?stretchy.mathMLnode(n.label):new mathMLTree.MathNode("mo",[makeText(n.label,n.mode)]),a=new mathMLTree.MathNode("mover",[buildGroup(n.base,e),o]);return a.setAttribute("accent","true"),a},NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(n=>"\\"+n).join("|"));defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(n,e)=>{var o=normalizeArgument(e[0]),a=!NON_STRETCHY_ACCENT_REGEX.test(n.funcName),s=!a||n.funcName==="\\widehat"||n.funcName==="\\widetilde"||n.funcName==="\\widecheck";return{type:"accent",mode:n.parser.mode,label:n.funcName,isStretchy:a,isShifty:s,base:o}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9}),defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(n,e)=>{var o=e[0],a=n.parser.mode;return a==="math"&&(n.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+n.funcName+" works only in text mode"),a="text"),{type:"accent",mode:a,label:n.funcName,isStretchy:!1,isShifty:!0,base:o}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9}),defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(n,e)=>{var{parser:o,funcName:a}=n,s=e[0];return{type:"accentUnder",mode:o.mode,label:a,base:s}},htmlBuilder:(n,e)=>{var o=buildGroup$1(n.base,e),a=stretchy.svgSpan(n,e),s=n.label==="\\utilde"?.12:0,l=buildCommon.makeVList({positionType:"top",positionData:o.height,children:[{type:"elem",elem:a,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:o}]},e);return buildCommon.makeSpan(["mord","accentunder"],[l],e)},mathmlBuilder:(n,e)=>{var o=stretchy.mathMLnode(n.label),a=new mathMLTree.MathNode("munder",[buildGroup(n.base,e),o]);return a.setAttribute("accentunder","true"),a}});var paddedNode=n=>{var e=new mathMLTree.MathNode("mpadded",n?[n]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(n,e,o){var{parser:a,funcName:s}=n;return{type:"xArrow",mode:a.mode,label:s,body:e[0],below:o[0]}},htmlBuilder(n,e){var o=e.style,a=e.havingStyle(o.sup()),s=buildCommon.wrapFragment(buildGroup$1(n.body,a,e),e),l=n.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(l+"-arrow-pad");var c;n.below&&(a=e.havingStyle(o.sub()),c=buildCommon.wrapFragment(buildGroup$1(n.below,a,e),e),c.classes.push(l+"-arrow-pad"));var d=stretchy.svgSpan(n,e),u=-e.fontMetrics().axisHeight+.5*d.height,f=-e.fontMetrics().axisHeight-.5*d.height-.111;(s.depth>.25||n.label==="\\xleftequilibrium")&&(f-=s.depth);var v;if(c){var b=-e.fontMetrics().axisHeight+c.height+.5*d.height+.111;v=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:f},{type:"elem",elem:d,shift:u},{type:"elem",elem:c,shift:b}]},e)}else v=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:f},{type:"elem",elem:d,shift:u}]},e);return v.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[v],e)},mathmlBuilder(n,e){var o=stretchy.mathMLnode(n.label);o.setAttribute("minsize",n.label.charAt(0)==="x"?"1.75em":"3.0em");var a;if(n.body){var s=paddedNode(buildGroup(n.body,e));if(n.below){var l=paddedNode(buildGroup(n.below,e));a=new mathMLTree.MathNode("munderover",[o,l,s])}else a=new mathMLTree.MathNode("mover",[o,s])}else if(n.below){var c=paddedNode(buildGroup(n.below,e));a=new mathMLTree.MathNode("munder",[o,c])}else a=paddedNode(),a=new mathMLTree.MathNode("mover",[o,a]);return a}});var makeSpan=buildCommon.makeSpan;function htmlBuilder$9(n,e){var o=buildExpression$1(n.body,e,!0);return makeSpan([n.mclass],o,e)}function mathmlBuilder$8(n,e){var o,a=buildExpression(n.body,e);return n.mclass==="minner"?o=new mathMLTree.MathNode("mpadded",a):n.mclass==="mord"?n.isCharacterBox?(o=a[0],o.type="mi"):o=new mathMLTree.MathNode("mi",a):(n.isCharacterBox?(o=a[0],o.type="mo"):o=new mathMLTree.MathNode("mo",a),n.mclass==="mbin"?(o.attributes.lspace="0.22em",o.attributes.rspace="0.22em"):n.mclass==="mpunct"?(o.attributes.lspace="0em",o.attributes.rspace="0.17em"):n.mclass==="mopen"||n.mclass==="mclose"?(o.attributes.lspace="0em",o.attributes.rspace="0em"):n.mclass==="minner"&&(o.attributes.lspace="0.0556em",o.attributes.width="+0.1111em")),o}defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(n,e){var{parser:o,funcName:a}=n,s=e[0];return{type:"mclass",mode:o.mode,mclass:"m"+a.slice(5),body:ordargument(s),isCharacterBox:utils.isCharacterBox(s)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});var binrelClass=n=>{var e=n.type==="ordgroup"&&n.body.length?n.body[0]:n;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(n,e){var{parser:o}=n;return{type:"mclass",mode:o.mode,mclass:binrelClass(e[0]),body:ordargument(e[1]),isCharacterBox:utils.isCharacterBox(e[1])}}}),defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(n,e){var{parser:o,funcName:a}=n,s=e[1],l=e[0],c;a!=="\\stackrel"?c=binrelClass(s):c="mrel";var d={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:a!=="\\stackrel",body:ordargument(s)},u={type:"supsub",mode:l.mode,base:d,sup:a==="\\underset"?null:l,sub:a==="\\underset"?l:null};return{type:"mclass",mode:o.mode,mclass:c,body:[u],isCharacterBox:utils.isCharacterBox(u)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8}),defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(n,e){var{parser:o}=n;return{type:"pmb",mode:o.mode,mclass:binrelClass(e[0]),body:ordargument(e[0])}},htmlBuilder(n,e){var o=buildExpression$1(n.body,e,!0),a=buildCommon.makeSpan([n.mclass],o,e);return a.style.textShadow="0.02em 0.01em 0.04px",a},mathmlBuilder(n,e){var o=buildExpression(n.body,e),a=new mathMLTree.MathNode("mstyle",o);return a.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),a}});var cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=()=>({type:"styling",body:[],mode:"math",style:"display"}),isStartOfArrow=n=>n.type==="textord"&&n.text==="@",isLabelEnd=(n,e)=>(n.type==="mathord"||n.type==="atom")&&n.text===e;function cdArrow(n,e,o){var a=cdArrowFunctionName[n];switch(a){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return o.callFunction(a,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var s=o.callFunction("\\\\cdleft",[e[0]],[]),l={type:"atom",text:a,mode:"math",family:"rel"},c=o.callFunction("\\Big",[l],[]),d=o.callFunction("\\\\cdright",[e[1]],[]),u={type:"ordgroup",mode:"math",body:[s,c,d]};return o.callFunction("\\\\cdparent",[u],[])}case"\\\\cdlongequal":return o.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var f={type:"textord",text:"\\Vert",mode:"math"};return o.callFunction("\\Big",[f],[])}default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(n){var e=[];for(n.gullet.beginGroup(),n.gullet.macros.set("\\cr","\\\\\\relax"),n.gullet.beginGroup();;){e.push(n.parseExpression(!1,"\\\\")),n.gullet.endGroup(),n.gullet.beginGroup();var o=n.fetch().text;if(o==="&"||o==="\\\\")n.consume();else if(o==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ParseError("Expected \\\\ or \\cr or \\end",n.nextToken)}for(var a=[],s=[a],l=0;l<e.length;l++){for(var c=e[l],d=newCell(),u=0;u<c.length;u++)if(!isStartOfArrow(c[u]))d.body.push(c[u]);else{a.push(d),u+=1;var f=assertSymbolNodeType(c[u]).text,v=new Array(2);if(v[0]={type:"ordgroup",mode:"math",body:[]},v[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(f)>-1))if("<>AV".indexOf(f)>-1)for(var b=0;b<2;b++){for(var k=!0,x=u+1;x<c.length;x++){if(isLabelEnd(c[x],f)){k=!1,u=x;break}if(isStartOfArrow(c[x]))throw new ParseError("Missing a "+f+" character to complete a CD arrow.",c[x]);v[b].body.push(c[x])}if(k)throw new ParseError("Missing a "+f+" character to complete a CD arrow.",c[u])}else throw new ParseError('Expected one of "<>AV=|." after @',c[u]);var _=cdArrow(f,v,n),E={type:"styling",body:[_],mode:"math",style:"display"};a.push(E),d=newCell()}l%2===0?a.push(d):a.shift(),a=[],s.push(a)}n.gullet.endGroup(),n.gullet.endGroup();var B=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:B,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(n,e){var{parser:o,funcName:a}=n;return{type:"cdlabel",mode:o.mode,side:a.slice(4),label:e[0]}},htmlBuilder(n,e){var o=e.havingStyle(e.style.sup()),a=buildCommon.wrapFragment(buildGroup$1(n.label,o,e),e);return a.classes.push("cd-label-"+n.side),a.style.bottom=makeEm(.8-a.depth),a.height=0,a.depth=0,a},mathmlBuilder(n,e){var o=new mathMLTree.MathNode("mrow",[buildGroup(n.label,e)]);return o=new mathMLTree.MathNode("mpadded",[o]),o.setAttribute("width","0"),n.side==="left"&&o.setAttribute("lspace","-1width"),o.setAttribute("voffset","0.7em"),o=new mathMLTree.MathNode("mstyle",[o]),o.setAttribute("displaystyle","false"),o.setAttribute("scriptlevel","1"),o}}),defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(n,e){var{parser:o}=n;return{type:"cdlabelparent",mode:o.mode,fragment:e[0]}},htmlBuilder(n,e){var o=buildCommon.wrapFragment(buildGroup$1(n.fragment,e),e);return o.classes.push("cd-vert-arrow"),o},mathmlBuilder(n,e){return new mathMLTree.MathNode("mrow",[buildGroup(n.fragment,e)])}}),defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(n,e){for(var{parser:o}=n,a=assertNodeType(e[0],"ordgroup"),s=a.body,l="",c=0;c<s.length;c++){var d=assertNodeType(s[c],"textord");l+=d.text}var u=parseInt(l),f;if(isNaN(u))throw new ParseError("\\@char has non-numeric argument "+l);if(u<0||u>=1114111)throw new ParseError("\\@char with invalid code point "+l);return u<=65535?f=String.fromCharCode(u):(u-=65536,f=String.fromCharCode((u>>10)+55296,(u&1023)+56320)),{type:"textord",mode:o.mode,text:f}}});var htmlBuilder$8=(n,e)=>{var o=buildExpression$1(n.body,e.withColor(n.color),!1);return buildCommon.makeFragment(o)},mathmlBuilder$7=(n,e)=>{var o=buildExpression(n.body,e.withColor(n.color)),a=new mathMLTree.MathNode("mstyle",o);return a.setAttribute("mathcolor",n.color),a};defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(n,e){var{parser:o}=n,a=assertNodeType(e[0],"color-token").color,s=e[1];return{type:"color",mode:o.mode,color:a,body:ordargument(s)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7}),defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(n,e){var{parser:o,breakOnTokenText:a}=n,s=assertNodeType(e[0],"color-token").color;o.gullet.macros.set("\\current@color",s);var l=o.parseExpression(!0,a);return{type:"color",mode:o.mode,color:s,body:l}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7}),defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(n,e,o){var{parser:a}=n,s=a.gullet.future().text==="["?a.parseSizeGroup(!0):null,l=!a.settings.displayMode||!a.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:a.mode,newLine:l,size:s&&assertNodeType(s,"size").value}},htmlBuilder(n,e){var o=buildCommon.makeSpan(["mspace"],[],e);return n.newLine&&(o.classes.push("newline"),n.size&&(o.style.marginTop=makeEm(calculateSize(n.size,e)))),o},mathmlBuilder(n,e){var o=new mathMLTree.MathNode("mspace");return n.newLine&&(o.setAttribute("linebreak","newline"),n.size&&o.setAttribute("height",makeEm(calculateSize(n.size,e)))),o}});var globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=n=>{var e=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ParseError("Expected a control sequence",n);return e},getRHS=n=>{var e=n.gullet.popToken();return e.text==="="&&(e=n.gullet.popToken(),e.text===" "&&(e=n.gullet.popToken())),e},letCommand=(n,e,o,a)=>{var s=n.gullet.macros.get(o.text);s==null&&(o.noexpand=!0,s={tokens:[o],numArgs:0,unexpandable:!n.gullet.isExpandable(o.text)}),n.gullet.macros.set(e,s,a)};defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(n){var{parser:e,funcName:o}=n;e.consumeSpaces();var a=e.fetch();if(globalMap[a.text])return(o==="\\global"||o==="\\\\globallong")&&(a.text=globalMap[a.text]),assertNodeType(e.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",a)}}),defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:o}=n,a=e.gullet.popToken(),s=a.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new ParseError("Expected a control sequence",a);for(var l=0,c,d=[[]];e.gullet.future().text!=="{";)if(a=e.gullet.popToken(),a.text==="#"){if(e.gullet.future().text==="{"){c=e.gullet.future(),d[l].push("{");break}if(a=e.gullet.popToken(),!/^[1-9]$/.test(a.text))throw new ParseError('Invalid argument number "'+a.text+'"');if(parseInt(a.text)!==l+1)throw new ParseError('Argument number "'+a.text+'" out of order');l++,d.push([])}else{if(a.text==="EOF")throw new ParseError("Expected a macro definition");d[l].push(a.text)}var{tokens:u}=e.gullet.consumeArg();return c&&u.unshift(c),(o==="\\edef"||o==="\\xdef")&&(u=e.gullet.expandTokens(u),u.reverse()),e.gullet.macros.set(s,{tokens:u,numArgs:l,delimiters:d},o===globalMap[o]),{type:"internal",mode:e.mode}}}),defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:o}=n,a=checkControlSequence(e.gullet.popToken());e.gullet.consumeSpaces();var s=getRHS(e);return letCommand(e,a,s,o==="\\\\globallet"),{type:"internal",mode:e.mode}}}),defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:o}=n,a=checkControlSequence(e.gullet.popToken()),s=e.gullet.popToken(),l=e.gullet.popToken();return letCommand(e,a,l,o==="\\\\globalfuture"),e.gullet.pushToken(l),e.gullet.pushToken(s),{type:"internal",mode:e.mode}}});var getMetrics=function n(e,o,a){var s=symbols.math[e]&&symbols.math[e].replace,l=getCharacterMetrics(s||e,o,a);if(!l)throw new Error("Unsupported symbol "+e+" and font size "+o+".");return l},styleWrap=function n(e,o,a,s){var l=a.havingBaseStyle(o),c=buildCommon.makeSpan(s.concat(l.sizingClasses(a)),[e],a),d=l.sizeMultiplier/a.sizeMultiplier;return c.height*=d,c.depth*=d,c.maxFontSize=l.sizeMultiplier,c},centerSpan=function n(e,o,a){var s=o.havingBaseStyle(a),l=(1-o.sizeMultiplier/s.sizeMultiplier)*o.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=makeEm(l),e.height-=l,e.depth+=l},makeSmallDelim=function n(e,o,a,s,l,c){var d=buildCommon.makeSymbol(e,"Main-Regular",l,s),u=styleWrap(d,o,s,c);return a&&centerSpan(u,s,o),u},mathrmSize=function n(e,o,a,s){return buildCommon.makeSymbol(e,"Size"+o+"-Regular",a,s)},makeLargeDelim=function n(e,o,a,s,l,c){var d=mathrmSize(e,o,l,s),u=styleWrap(buildCommon.makeSpan(["delimsizing","size"+o],[d],s),Style$1.TEXT,s,c);return a&&centerSpan(u,s,Style$1.TEXT),u},makeGlyphSpan=function n(e,o,a){var s;o==="Size1-Regular"?s="delim-size1":s="delim-size4";var l=buildCommon.makeSpan(["delimsizinginner",s],[buildCommon.makeSpan([],[buildCommon.makeSymbol(e,o,a)])]);return{type:"elem",elem:l}},makeInner=function n(e,o,a){var s=fontMetricsData["Size4-Regular"][e.charCodeAt(0)]?fontMetricsData["Size4-Regular"][e.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][e.charCodeAt(0)][4],l=new PathNode("inner",innerPath(e,Math.round(1e3*o))),c=new SvgNode([l],{width:makeEm(s),height:makeEm(o),style:"width:"+makeEm(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*o),preserveAspectRatio:"xMinYMin"}),d=buildCommon.makeSvgSpan([],[c],a);return d.height=o,d.style.height=makeEm(o),d.style.width=makeEm(s),{type:"elem",elem:d}},lapInEms=.008,lap={type:"kern",size:-1*lapInEms},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=function n(e,o,a,s,l,c){var d,u,f,v,b="",k=0;d=f=v=e,u=null;var x="Size1-Regular";e==="\\uparrow"?f=v="\u23D0":e==="\\Uparrow"?f=v="\u2016":e==="\\downarrow"?d=f="\u23D0":e==="\\Downarrow"?d=f="\u2016":e==="\\updownarrow"?(d="\\uparrow",f="\u23D0",v="\\downarrow"):e==="\\Updownarrow"?(d="\\Uparrow",f="\u2016",v="\\Downarrow"):utils.contains(verts,e)?(f="\u2223",b="vert",k=333):utils.contains(doubleVerts,e)?(f="\u2225",b="doublevert",k=556):e==="["||e==="\\lbrack"?(d="\u23A1",f="\u23A2",v="\u23A3",x="Size4-Regular",b="lbrack",k=667):e==="]"||e==="\\rbrack"?(d="\u23A4",f="\u23A5",v="\u23A6",x="Size4-Regular",b="rbrack",k=667):e==="\\lfloor"||e==="\u230A"?(f=d="\u23A2",v="\u23A3",x="Size4-Regular",b="lfloor",k=667):e==="\\lceil"||e==="\u2308"?(d="\u23A1",f=v="\u23A2",x="Size4-Regular",b="lceil",k=667):e==="\\rfloor"||e==="\u230B"?(f=d="\u23A5",v="\u23A6",x="Size4-Regular",b="rfloor",k=667):e==="\\rceil"||e==="\u2309"?(d="\u23A4",f=v="\u23A5",x="Size4-Regular",b="rceil",k=667):e==="("||e==="\\lparen"?(d="\u239B",f="\u239C",v="\u239D",x="Size4-Regular",b="lparen",k=875):e===")"||e==="\\rparen"?(d="\u239E",f="\u239F",v="\u23A0",x="Size4-Regular",b="rparen",k=875):e==="\\{"||e==="\\lbrace"?(d="\u23A7",u="\u23A8",v="\u23A9",f="\u23AA",x="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(d="\u23AB",u="\u23AC",v="\u23AD",f="\u23AA",x="Size4-Regular"):e==="\\lgroup"||e==="\u27EE"?(d="\u23A7",v="\u23A9",f="\u23AA",x="Size4-Regular"):e==="\\rgroup"||e==="\u27EF"?(d="\u23AB",v="\u23AD",f="\u23AA",x="Size4-Regular"):e==="\\lmoustache"||e==="\u23B0"?(d="\u23A7",v="\u23AD",f="\u23AA",x="Size4-Regular"):(e==="\\rmoustache"||e==="\u23B1")&&(d="\u23AB",v="\u23A9",f="\u23AA",x="Size4-Regular");var _=getMetrics(d,x,l),E=_.height+_.depth,B=getMetrics(f,x,l),M=B.height+B.depth,V=getMetrics(v,x,l),F=V.height+V.depth,I=0,L=1;if(u!==null){var U=getMetrics(u,x,l);I=U.height+U.depth,L=2}var Z=E+F+I,K=Math.max(0,Math.ceil((o-Z)/(L*M))),j=Z+K*L*M,W=s.fontMetrics().axisHeight;a&&(W*=s.sizeMultiplier);var Y=j/2-W,G=[];if(b.length>0){var fe=j-E-F,le=Math.round(j*1e3),pe=tallDelim(b,Math.round(fe*1e3)),ue=new PathNode(b,pe),Ne=(k/1e3).toFixed(3)+"em",Ve=(le/1e3).toFixed(3)+"em",Ze=new SvgNode([ue],{width:Ne,height:Ve,viewBox:"0 0 "+k+" "+le}),We=buildCommon.makeSvgSpan([],[Ze],s);We.height=le/1e3,We.style.width=Ne,We.style.height=Ve,G.push({type:"elem",elem:We})}else{if(G.push(makeGlyphSpan(v,x,l)),G.push(lap),u===null){var ze=j-E-F+2*lapInEms;G.push(makeInner(f,ze,s))}else{var qe=(j-E-F-I)/2+2*lapInEms;G.push(makeInner(f,qe,s)),G.push(lap),G.push(makeGlyphSpan(u,x,l)),G.push(lap),G.push(makeInner(f,qe,s))}G.push(lap),G.push(makeGlyphSpan(d,x,l))}var dt=s.havingBaseStyle(Style$1.TEXT),Xe=buildCommon.makeVList({positionType:"bottom",positionData:Y,children:G},dt);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[Xe],dt),Style$1.TEXT,s,c)},vbPad=80,emPad=.08,sqrtSvg=function n(e,o,a,s,l){var c=sqrtPath(e,s,a),d=new PathNode(e,c),u=new SvgNode([d],{width:"400em",height:makeEm(o),viewBox:"0 0 400000 "+a,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[u],l)},makeSqrtImage=function n(e,o){var a=o.havingBaseSizing(),s=traverseSequence("\\surd",e*a.sizeMultiplier,stackLargeDelimiterSequence,a),l=a.sizeMultiplier,c=Math.max(0,o.minRuleThickness-o.fontMetrics().sqrtRuleThickness),d,u=0,f=0,v=0,b;return s.type==="small"?(v=1e3+1e3*c+vbPad,e<1?l=1:e<1.4&&(l=.7),u=(1+c+emPad)/l,f=(1+c)/l,d=sqrtSvg("sqrtMain",u,v,c,o),d.style.minWidth="0.853em",b=.833/l):s.type==="large"?(v=(1e3+vbPad)*sizeToMaxHeight[s.size],f=(sizeToMaxHeight[s.size]+c)/l,u=(sizeToMaxHeight[s.size]+c+emPad)/l,d=sqrtSvg("sqrtSize"+s.size,u,v,c,o),d.style.minWidth="1.02em",b=1/l):(u=e+c+emPad,f=e+c,v=Math.floor(1e3*e+c)+vbPad,d=sqrtSvg("sqrtTall",u,v,c,o),d.style.minWidth="0.742em",b=1.056),d.height=f,d.style.height=makeEm(u),{span:d,advanceWidth:b,ruleWidth:(o.fontMetrics().sqrtRuleThickness+c)*l}},stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230A","\u230B","\\lceil","\\rceil","\u2308","\u2309","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27EE","\u27EF","\\lmoustache","\\rmoustache","\u23B0","\u23B1"],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=function n(e,o,a,s,l){if(e==="<"||e==="\\lt"||e==="\u27E8"?e="\\langle":(e===">"||e==="\\gt"||e==="\u27E9")&&(e="\\rangle"),utils.contains(stackLargeDelimiters,e)||utils.contains(stackNeverDelimiters,e))return makeLargeDelim(e,o,!1,a,s,l);if(utils.contains(stackAlwaysDelimiters,e))return makeStackedDelim(e,sizeToMaxHeight[o],!1,a,s,l);throw new ParseError("Illegal delimiter: '"+e+"'")},stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=function n(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},traverseSequence=function n(e,o,a,s){for(var l=Math.min(2,3-s.style.size),c=l;c<a.length&&a[c].type!=="stack";c++){var d=getMetrics(e,delimTypeToFont(a[c]),"math"),u=d.height+d.depth;if(a[c].type==="small"){var f=s.havingBaseStyle(a[c].style);u*=f.sizeMultiplier}if(u>o)return a[c]}return a[a.length-1]},makeCustomSizedDelim=function n(e,o,a,s,l,c){e==="<"||e==="\\lt"||e==="\u27E8"?e="\\langle":(e===">"||e==="\\gt"||e==="\u27E9")&&(e="\\rangle");var d;utils.contains(stackNeverDelimiters,e)?d=stackNeverDelimiterSequence:utils.contains(stackLargeDelimiters,e)?d=stackLargeDelimiterSequence:d=stackAlwaysDelimiterSequence;var u=traverseSequence(e,o,d,s);return u.type==="small"?makeSmallDelim(e,u.style,a,s,l,c):u.type==="large"?makeLargeDelim(e,u.size,a,s,l,c):makeStackedDelim(e,o,a,s,l,c)},makeLeftRightDelim=function n(e,o,a,s,l,c){var d=s.fontMetrics().axisHeight*s.sizeMultiplier,u=901,f=5/s.fontMetrics().ptPerEm,v=Math.max(o-d,a+d),b=Math.max(v/500*u,2*v-f);return makeCustomSizedDelim(e,b,!0,s,l,c)},delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230A","\u230B","\\lceil","\\rceil","\u2308","\u2309","<",">","\\langle","\u27E8","\\rangle","\u27E9","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27EE","\u27EF","\\lmoustache","\\rmoustache","\u23B0","\u23B1","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function checkDelimiter(n,e){var o=checkSymbolNodeType(n);if(o&&utils.contains(delimiters,o.text))return o;throw o?new ParseError("Invalid delimiter '"+o.text+"' after '"+e.funcName+"'",n):new ParseError("Invalid delimiter type '"+n.type+"'",n)}defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(n,e)=>{var o=checkDelimiter(e[0],n);return{type:"delimsizing",mode:n.parser.mode,size:delimiterSizes[n.funcName].size,mclass:delimiterSizes[n.funcName].mclass,delim:o.text}},htmlBuilder:(n,e)=>n.delim==="."?buildCommon.makeSpan([n.mclass]):delimiter.sizedDelim(n.delim,n.size,e,n.mode,[n.mclass]),mathmlBuilder:n=>{var e=[];n.delim!=="."&&e.push(makeText(n.delim,n.mode));var o=new mathMLTree.MathNode("mo",e);n.mclass==="mopen"||n.mclass==="mclose"?o.setAttribute("fence","true"):o.setAttribute("fence","false"),o.setAttribute("stretchy","true");var a=makeEm(delimiter.sizeToMaxHeight[n.size]);return o.setAttribute("minsize",a),o.setAttribute("maxsize",a),o}});function assertParsed(n){if(!n.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var o=n.parser.gullet.macros.get("\\current@color");if(o&&typeof o!="string")throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:n.parser.mode,delim:checkDelimiter(e[0],n).text,color:o}}}),defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var o=checkDelimiter(e[0],n),a=n.parser;++a.leftrightDepth;var s=a.parseExpression(!1);--a.leftrightDepth,a.expect("\\right",!1);var l=assertNodeType(a.parseFunction(),"leftright-right");return{type:"leftright",mode:a.mode,body:s,left:o.text,right:l.delim,rightColor:l.color}},htmlBuilder:(n,e)=>{assertParsed(n);for(var o=buildExpression$1(n.body,e,!0,["mopen","mclose"]),a=0,s=0,l=!1,c=0;c<o.length;c++)o[c].isMiddle?l=!0:(a=Math.max(o[c].height,a),s=Math.max(o[c].depth,s));a*=e.sizeMultiplier,s*=e.sizeMultiplier;var d;if(n.left==="."?d=makeNullDelimiter(e,["mopen"]):d=delimiter.leftRightDelim(n.left,a,s,e,n.mode,["mopen"]),o.unshift(d),l)for(var u=1;u<o.length;u++){var f=o[u],v=f.isMiddle;v&&(o[u]=delimiter.leftRightDelim(v.delim,a,s,v.options,n.mode,[]))}var b;if(n.right===".")b=makeNullDelimiter(e,["mclose"]);else{var k=n.rightColor?e.withColor(n.rightColor):e;b=delimiter.leftRightDelim(n.right,a,s,k,n.mode,["mclose"])}return o.push(b),buildCommon.makeSpan(["minner"],o,e)},mathmlBuilder:(n,e)=>{assertParsed(n);var o=buildExpression(n.body,e);if(n.left!=="."){var a=new mathMLTree.MathNode("mo",[makeText(n.left,n.mode)]);a.setAttribute("fence","true"),o.unshift(a)}if(n.right!=="."){var s=new mathMLTree.MathNode("mo",[makeText(n.right,n.mode)]);s.setAttribute("fence","true"),n.rightColor&&s.setAttribute("mathcolor",n.rightColor),o.push(s)}return makeRow(o)}}),defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var o=checkDelimiter(e[0],n);if(!n.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",o);return{type:"middle",mode:n.parser.mode,delim:o.text}},htmlBuilder:(n,e)=>{var o;if(n.delim===".")o=makeNullDelimiter(e,[]);else{o=delimiter.sizedDelim(n.delim,1,e,n.mode,[]);var a={delim:n.delim,options:e};o.isMiddle=a}return o},mathmlBuilder:(n,e)=>{var o=n.delim==="\\vert"||n.delim==="|"?makeText("|","text"):makeText(n.delim,n.mode),a=new mathMLTree.MathNode("mo",[o]);return a.setAttribute("fence","true"),a.setAttribute("lspace","0.05em"),a.setAttribute("rspace","0.05em"),a}});var htmlBuilder$7=(n,e)=>{var o=buildCommon.wrapFragment(buildGroup$1(n.body,e),e),a=n.label.slice(1),s=e.sizeMultiplier,l,c=0,d=utils.isCharacterBox(n.body);if(a==="sout")l=buildCommon.makeSpan(["stretchy","sout"]),l.height=e.fontMetrics().defaultRuleThickness/s,c=-.5*e.fontMetrics().xHeight;else if(a==="phase"){var u=calculateSize({number:.6,unit:"pt"},e),f=calculateSize({number:.35,unit:"ex"},e),v=e.havingBaseSizing();s=s/v.sizeMultiplier;var b=o.height+o.depth+u+f;o.style.paddingLeft=makeEm(b/2+u);var k=Math.floor(1e3*b*s),x=phasePath(k),_=new SvgNode([new PathNode("phase",x)],{width:"400em",height:makeEm(k/1e3),viewBox:"0 0 400000 "+k,preserveAspectRatio:"xMinYMin slice"});l=buildCommon.makeSvgSpan(["hide-tail"],[_],e),l.style.height=makeEm(b),c=o.depth+u+f}else{/cancel/.test(a)?d||o.classes.push("cancel-pad"):a==="angl"?o.classes.push("anglpad"):o.classes.push("boxpad");var E=0,B=0,M=0;/box/.test(a)?(M=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),E=e.fontMetrics().fboxsep+(a==="colorbox"?0:M),B=E):a==="angl"?(M=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),E=4*M,B=Math.max(0,.25-o.depth)):(E=d?.2:0,B=E),l=stretchy.encloseSpan(o,a,E,B,e),/fbox|boxed|fcolorbox/.test(a)?(l.style.borderStyle="solid",l.style.borderWidth=makeEm(M)):a==="angl"&&M!==.049&&(l.style.borderTopWidth=makeEm(M),l.style.borderRightWidth=makeEm(M)),c=o.depth+B,n.backgroundColor&&(l.style.backgroundColor=n.backgroundColor,n.borderColor&&(l.style.borderColor=n.borderColor))}var V;if(n.backgroundColor)V=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:c},{type:"elem",elem:o,shift:0}]},e);else{var F=/cancel|phase/.test(a)?["svg-align"]:[];V=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:0},{type:"elem",elem:l,shift:c,wrapperClasses:F}]},e)}return/cancel/.test(a)&&(V.height=o.height,V.depth=o.depth),/cancel/.test(a)&&!d?buildCommon.makeSpan(["mord","cancel-lap"],[V],e):buildCommon.makeSpan(["mord"],[V],e)},mathmlBuilder$6=(n,e)=>{var o=0,a=new mathMLTree.MathNode(n.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup(n.body,e)]);switch(n.label){case"\\cancel":a.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":a.setAttribute("notation","downdiagonalstrike");break;case"\\phase":a.setAttribute("notation","phasorangle");break;case"\\sout":a.setAttribute("notation","horizontalstrike");break;case"\\fbox":a.setAttribute("notation","box");break;case"\\angl":a.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(o=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,a.setAttribute("width","+"+2*o+"pt"),a.setAttribute("height","+"+2*o+"pt"),a.setAttribute("lspace",o+"pt"),a.setAttribute("voffset",o+"pt"),n.label==="\\fcolorbox"){var s=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);a.setAttribute("style","border: "+s+"em solid "+String(n.borderColor))}break;case"\\xcancel":a.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return n.backgroundColor&&a.setAttribute("mathbackground",n.backgroundColor),a};defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(n,e,o){var{parser:a,funcName:s}=n,l=assertNodeType(e[0],"color-token").color,c=e[1];return{type:"enclose",mode:a.mode,label:s,backgroundColor:l,body:c}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6}),defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(n,e,o){var{parser:a,funcName:s}=n,l=assertNodeType(e[0],"color-token").color,c=assertNodeType(e[1],"color-token").color,d=e[2];return{type:"enclose",mode:a.mode,label:s,backgroundColor:c,borderColor:l,body:d}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6}),defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(n,e){var{parser:o}=n;return{type:"enclose",mode:o.mode,label:"\\fbox",body:e[0]}}}),defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(n,e){var{parser:o,funcName:a}=n,s=e[0];return{type:"enclose",mode:o.mode,label:a,body:s}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6}),defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(n,e){var{parser:o}=n;return{type:"enclose",mode:o.mode,label:"\\angl",body:e[0]}}});var _environments={};function defineEnvironment(n){for(var{type:e,names:o,props:a,handler:s,htmlBuilder:l,mathmlBuilder:c}=n,d={type:e,numArgs:a.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},u=0;u<o.length;++u)_environments[o[u]]=d;l&&(_htmlGroupBuilders[e]=l),c&&(_mathmlGroupBuilders[e]=c)}var _macros={};function defineMacro(n,e){_macros[n]=e}function getHLines(n){var e=[];n.consumeSpaces();var o=n.fetch().text;for(o==="\\relax"&&(n.consume(),n.consumeSpaces(),o=n.fetch().text);o==="\\hline"||o==="\\hdashline";)n.consume(),e.push(o==="\\hdashline"),n.consumeSpaces(),o=n.fetch().text;return e}var validateAmsEnvironmentContext=n=>{var e=n.parser.settings;if(!e.displayMode)throw new ParseError("{"+n.envName+"} can be used only in display mode.")};function getAutoTag(n){if(n.indexOf("ed")===-1)return n.indexOf("*")===-1}function parseArray(n,e,o){var{hskipBeforeAndAfter:a,addJot:s,cols:l,arraystretch:c,colSeparationType:d,autoTag:u,singleRow:f,emptySingleRow:v,maxNumCols:b,leqno:k}=e;if(n.gullet.beginGroup(),f||n.gullet.macros.set("\\cr","\\\\\\relax"),!c){var x=n.gullet.expandMacroAsText("\\arraystretch");if(x==null)c=1;else if(c=parseFloat(x),!c||c<0)throw new ParseError("Invalid \\arraystretch: "+x)}n.gullet.beginGroup();var _=[],E=[_],B=[],M=[],V=u!=null?[]:void 0;function F(){u&&n.gullet.macros.set("\\@eqnsw","1",!0)}function I(){V&&(n.gullet.macros.get("\\df@tag")?(V.push(n.subparse([new Token("\\df@tag")])),n.gullet.macros.set("\\df@tag",void 0,!0)):V.push(!!u&&n.gullet.macros.get("\\@eqnsw")==="1"))}for(F(),M.push(getHLines(n));;){var L=n.parseExpression(!1,f?"\\end":"\\\\");n.gullet.endGroup(),n.gullet.beginGroup(),L={type:"ordgroup",mode:n.mode,body:L},o&&(L={type:"styling",mode:n.mode,style:o,body:[L]}),_.push(L);var U=n.fetch().text;if(U==="&"){if(b&&_.length===b){if(f||d)throw new ParseError("Too many tab characters: &",n.nextToken);n.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}n.consume()}else if(U==="\\end"){I(),_.length===1&&L.type==="styling"&&L.body[0].body.length===0&&(E.length>1||!v)&&E.pop(),M.length<E.length+1&&M.push([]);break}else if(U==="\\\\"){n.consume();var Z=void 0;n.gullet.future().text!==" "&&(Z=n.parseSizeGroup(!0)),B.push(Z?Z.value:null),I(),M.push(getHLines(n)),_=[],E.push(_),F()}else throw new ParseError("Expected & or \\\\ or \\cr or \\end",n.nextToken)}return n.gullet.endGroup(),n.gullet.endGroup(),{type:"array",mode:n.mode,addJot:s,arraystretch:c,body:E,cols:l,rowGaps:B,hskipBeforeAndAfter:a,hLinesBeforeRow:M,colSeparationType:d,tags:V,leqno:k}}function dCellStyle(n){return n.slice(0,1)==="d"?"display":"text"}var htmlBuilder$6=function n(e,o){var a,s,l=e.body.length,c=e.hLinesBeforeRow,d=0,u=new Array(l),f=[],v=Math.max(o.fontMetrics().arrayRuleWidth,o.minRuleThickness),b=1/o.fontMetrics().ptPerEm,k=5*b;if(e.colSeparationType&&e.colSeparationType==="small"){var x=o.havingStyle(Style$1.SCRIPT).sizeMultiplier;k=.2778*(x/o.sizeMultiplier)}var _=e.colSeparationType==="CD"?calculateSize({number:3,unit:"ex"},o):12*b,E=3*b,B=e.arraystretch*_,M=.7*B,V=.3*B,F=0;function I(te){for(var re=0;re<te.length;++re)re>0&&(F+=.25),f.push({pos:F,isDashed:te[re]})}for(I(c[0]),a=0;a<e.body.length;++a){var L=e.body[a],U=M,Z=V;d<L.length&&(d=L.length);var K=new Array(L.length);for(s=0;s<L.length;++s){var j=buildGroup$1(L[s],o);Z<j.depth&&(Z=j.depth),U<j.height&&(U=j.height),K[s]=j}var W=e.rowGaps[a],Y=0;W&&(Y=calculateSize(W,o),Y>0&&(Y+=V,Z<Y&&(Z=Y),Y=0)),e.addJot&&(Z+=E),K.height=U,K.depth=Z,F+=U,K.pos=F,F+=Z+Y,u[a]=K,I(c[a+1])}var G=F/2+o.fontMetrics().axisHeight,fe=e.cols||[],le=[],pe,ue,Ne=[];if(e.tags&&e.tags.some(te=>te))for(a=0;a<l;++a){var Ve=u[a],Ze=Ve.pos-G,We=e.tags[a],ze=void 0;We===!0?ze=buildCommon.makeSpan(["eqn-num"],[],o):We===!1?ze=buildCommon.makeSpan([],[],o):ze=buildCommon.makeSpan([],buildExpression$1(We,o,!0),o),ze.depth=Ve.depth,ze.height=Ve.height,Ne.push({type:"elem",elem:ze,shift:Ze})}for(s=0,ue=0;s<d||ue<fe.length;++s,++ue){for(var qe=fe[ue]||{},dt=!0;qe.type==="separator";){if(dt||(pe=buildCommon.makeSpan(["arraycolsep"],[]),pe.style.width=makeEm(o.fontMetrics().doubleRuleSep),le.push(pe)),qe.separator==="|"||qe.separator===":"){var Xe=qe.separator==="|"?"solid":"dashed",Ge=buildCommon.makeSpan(["vertical-separator"],[],o);Ge.style.height=makeEm(F),Ge.style.borderRightWidth=makeEm(v),Ge.style.borderRightStyle=Xe,Ge.style.margin="0 "+makeEm(-v/2);var ft=F-G;ft&&(Ge.style.verticalAlign=makeEm(-ft)),le.push(Ge)}else throw new ParseError("Invalid separator type: "+qe.separator);ue++,qe=fe[ue]||{},dt=!1}if(!(s>=d)){var Te=void 0;(s>0||e.hskipBeforeAndAfter)&&(Te=utils.deflt(qe.pregap,k),Te!==0&&(pe=buildCommon.makeSpan(["arraycolsep"],[]),pe.style.width=makeEm(Te),le.push(pe)));var Ce=[];for(a=0;a<l;++a){var we=u[a],ce=we[s];if(ce){var ee=we.pos-G;ce.depth=we.depth,ce.height=we.height,Ce.push({type:"elem",elem:ce,shift:ee})}}Ce=buildCommon.makeVList({positionType:"individualShift",children:Ce},o),Ce=buildCommon.makeSpan(["col-align-"+(qe.align||"c")],[Ce]),le.push(Ce),(s<d-1||e.hskipBeforeAndAfter)&&(Te=utils.deflt(qe.postgap,k),Te!==0&&(pe=buildCommon.makeSpan(["arraycolsep"],[]),pe.style.width=makeEm(Te),le.push(pe)))}}if(u=buildCommon.makeSpan(["mtable"],le),f.length>0){for(var oe=buildCommon.makeLineSpan("hline",o,v),se=buildCommon.makeLineSpan("hdashline",o,v),ge=[{type:"elem",elem:u,shift:0}];f.length>0;){var _e=f.pop(),ke=_e.pos-G;_e.isDashed?ge.push({type:"elem",elem:se,shift:ke}):ge.push({type:"elem",elem:oe,shift:ke})}u=buildCommon.makeVList({positionType:"individualShift",children:ge},o)}if(Ne.length===0)return buildCommon.makeSpan(["mord"],[u],o);var Ee=buildCommon.makeVList({positionType:"individualShift",children:Ne},o);return Ee=buildCommon.makeSpan(["tag"],[Ee],o),buildCommon.makeFragment([u,Ee])},alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=function n(e,o){for(var a=[],s=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),l=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),c=0;c<e.body.length;c++){for(var d=e.body[c],u=[],f=0;f<d.length;f++)u.push(new mathMLTree.MathNode("mtd",[buildGroup(d[f],o)]));e.tags&&e.tags[c]&&(u.unshift(s),u.push(s),e.leqno?u.unshift(l):u.push(l)),a.push(new mathMLTree.MathNode("mtr",u))}var v=new mathMLTree.MathNode("mtable",a),b=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);v.setAttribute("rowspacing",makeEm(b));var k="",x="";if(e.cols&&e.cols.length>0){var _=e.cols,E="",B=!1,M=0,V=_.length;_[0].type==="separator"&&(k+="top ",M=1),_[_.length-1].type==="separator"&&(k+="bottom ",V-=1);for(var F=M;F<V;F++)_[F].type==="align"?(x+=alignMap[_[F].align],B&&(E+="none "),B=!0):_[F].type==="separator"&&B&&(E+=_[F].separator==="|"?"solid ":"dashed ",B=!1);v.setAttribute("columnalign",x.trim()),/[sd]/.test(E)&&v.setAttribute("columnlines",E.trim())}if(e.colSeparationType==="align"){for(var I=e.cols||[],L="",U=1;U<I.length;U++)L+=U%2?"0em ":"1em ";v.setAttribute("columnspacing",L.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?v.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?v.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?v.setAttribute("columnspacing","0.5em"):v.setAttribute("columnspacing","1em");var Z="",K=e.hLinesBeforeRow;k+=K[0].length>0?"left ":"",k+=K[K.length-1].length>0?"right ":"";for(var j=1;j<K.length-1;j++)Z+=K[j].length===0?"none ":K[j][0]?"dashed ":"solid ";return/[sd]/.test(Z)&&v.setAttribute("rowlines",Z.trim()),k!==""&&(v=new mathMLTree.MathNode("menclose",[v]),v.setAttribute("notation",k.trim())),e.arraystretch&&e.arraystretch<1&&(v=new mathMLTree.MathNode("mstyle",[v]),v.setAttribute("scriptlevel","1")),v},alignedHandler=function n(e,o){e.envName.indexOf("ed")===-1&&validateAmsEnvironmentContext(e);var a=[],s=e.envName.indexOf("at")>-1?"alignat":"align",l=e.envName==="split",c=parseArray(e.parser,{cols:a,addJot:!0,autoTag:l?void 0:getAutoTag(e.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:l?2:void 0,leqno:e.parser.settings.leqno},"display"),d,u=0,f={type:"ordgroup",mode:e.mode,body:[]};if(o[0]&&o[0].type==="ordgroup"){for(var v="",b=0;b<o[0].body.length;b++){var k=assertNodeType(o[0].body[b],"textord");v+=k.text}d=Number(v),u=d*2}var x=!u;c.body.forEach(function(M){for(var V=1;V<M.length;V+=2){var F=assertNodeType(M[V],"styling"),I=assertNodeType(F.body[0],"ordgroup");I.body.unshift(f)}if(x)u<M.length&&(u=M.length);else{var L=M.length/2;if(d<L)throw new ParseError("Too many math in a row: "+("expected "+d+", but got "+L),M[0])}});for(var _=0;_<u;++_){var E="r",B=0;_%2===1?E="l":_>0&&x&&(B=1),a[_]={type:"align",align:E,pregap:B,postgap:0}}return c.colSeparationType=x?"align":"alignat",c};defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(n,e){var o=checkSymbolNodeType(e[0]),a=o?[e[0]]:assertNodeType(e[0],"ordgroup").body,s=a.map(function(c){var d=assertSymbolNodeType(c),u=d.text;if("lcr".indexOf(u)!==-1)return{type:"align",align:u};if(u==="|")return{type:"separator",separator:"|"};if(u===":")return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+u,c)}),l={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return parseArray(n.parser,l,dCellStyle(n.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(n){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[n.envName.replace("*","")],o="c",a={hskipBeforeAndAfter:!1,cols:[{type:"align",align:o}]};if(n.envName.charAt(n.envName.length-1)==="*"){var s=n.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),o=s.fetch().text,"lcr".indexOf(o)===-1)throw new ParseError("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),a.cols=[{type:"align",align:o}]}}var l=parseArray(n.parser,a,dCellStyle(n.envName)),c=Math.max(0,...l.body.map(d=>d.length));return l.cols=new Array(c).fill({type:"align",align:o}),e?{type:"leftright",mode:n.mode,body:[l],left:e[0],right:e[1],rightColor:void 0}:l},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(n){var e={arraystretch:.5},o=parseArray(n.parser,e,"script");return o.colSeparationType="small",o},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(n,e){var o=checkSymbolNodeType(e[0]),a=o?[e[0]]:assertNodeType(e[0],"ordgroup").body,s=a.map(function(c){var d=assertSymbolNodeType(c),u=d.text;if("lc".indexOf(u)!==-1)return{type:"align",align:u};throw new ParseError("Unknown column alignment: "+u,c)});if(s.length>1)throw new ParseError("{subarray} can contain only one column");var l={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(l=parseArray(n.parser,l,"script"),l.body.length>0&&l.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return l},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(n){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},o=parseArray(n.parser,e,dCellStyle(n.envName));return{type:"leftright",mode:n.mode,body:[o],left:n.envName.indexOf("r")>-1?".":"\\{",right:n.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(n){utils.contains(["gather","gather*"],n.envName)&&validateAmsEnvironmentContext(n);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(n.envName),emptySingleRow:!0,leqno:n.parser.settings.leqno};return parseArray(n.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(n){validateAmsEnvironmentContext(n);var e={autoTag:getAutoTag(n.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:n.parser.settings.leqno};return parseArray(n.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler(n){return validateAmsEnvironmentContext(n),parseCD(n.parser)},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineMacro("\\nonumber","\\gdef\\@eqnsw{0}"),defineMacro("\\notag","\\nonumber"),defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(n,e){throw new ParseError(n.funcName+" valid only within array environment")}});var environments=_environments;defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(n,e){var{parser:o,funcName:a}=n,s=e[0];if(s.type!=="ordgroup")throw new ParseError("Invalid environment name",s);for(var l="",c=0;c<s.body.length;++c)l+=assertNodeType(s.body[c],"textord").text;if(a==="\\begin"){if(!environments.hasOwnProperty(l))throw new ParseError("No such environment: "+l,s);var d=environments[l],{args:u,optArgs:f}=o.parseArguments("\\begin{"+l+"}",d),v={mode:o.mode,envName:l,parser:o},b=d.handler(v,u,f);o.expect("\\end",!1);var k=o.nextToken,x=assertNodeType(o.parseFunction(),"environment");if(x.name!==l)throw new ParseError("Mismatch: \\begin{"+l+"} matched by \\end{"+x.name+"}",k);return b}return{type:"environment",mode:o.mode,name:l,nameGroup:s}}});var htmlBuilder$5=(n,e)=>{var o=n.font,a=e.withFont(o);return buildGroup$1(n.body,a)},mathmlBuilder$4=(n,e)=>{var o=n.font,a=e.withFont(o);return buildGroup(n.body,a)},fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(n,e)=>{var{parser:o,funcName:a}=n,s=normalizeArgument(e[0]),l=a;return l in fontAliases&&(l=fontAliases[l]),{type:"font",mode:o.mode,font:l.slice(1),body:s}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4}),defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(n,e)=>{var{parser:o}=n,a=e[0],s=utils.isCharacterBox(a);return{type:"mclass",mode:o.mode,mclass:binrelClass(a),body:[{type:"font",mode:o.mode,font:"boldsymbol",body:a}],isCharacterBox:s}}}),defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(n,e)=>{var{parser:o,funcName:a,breakOnTokenText:s}=n,{mode:l}=o,c=o.parseExpression(!0,s),d="math"+a.slice(1);return{type:"font",mode:l,font:d,body:{type:"ordgroup",mode:o.mode,body:c}}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});var adjustStyle=(n,e)=>{var o=e;return n==="display"?o=o.id>=Style$1.SCRIPT.id?o.text():Style$1.DISPLAY:n==="text"&&o.size===Style$1.DISPLAY.size?o=Style$1.TEXT:n==="script"?o=Style$1.SCRIPT:n==="scriptscript"&&(o=Style$1.SCRIPTSCRIPT),o},htmlBuilder$4=(n,e)=>{var o=adjustStyle(n.size,e.style),a=o.fracNum(),s=o.fracDen(),l;l=e.havingStyle(a);var c=buildGroup$1(n.numer,l,e);if(n.continued){var d=8.5/e.fontMetrics().ptPerEm,u=3.5/e.fontMetrics().ptPerEm;c.height=c.height<d?d:c.height,c.depth=c.depth<u?u:c.depth}l=e.havingStyle(s);var f=buildGroup$1(n.denom,l,e),v,b,k;n.hasBarLine?(n.barSize?(b=calculateSize(n.barSize,e),v=buildCommon.makeLineSpan("frac-line",e,b)):v=buildCommon.makeLineSpan("frac-line",e),b=v.height,k=v.height):(v=null,b=0,k=e.fontMetrics().defaultRuleThickness);var x,_,E;o.size===Style$1.DISPLAY.size||n.size==="display"?(x=e.fontMetrics().num1,b>0?_=3*k:_=7*k,E=e.fontMetrics().denom1):(b>0?(x=e.fontMetrics().num2,_=k):(x=e.fontMetrics().num3,_=3*k),E=e.fontMetrics().denom2);var B;if(v){var M=e.fontMetrics().axisHeight;x-c.depth-(M+.5*b)<_&&(x+=_-(x-c.depth-(M+.5*b))),M-.5*b-(f.height-E)<_&&(E+=_-(M-.5*b-(f.height-E)));var V=-(M-.5*b);B=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:E},{type:"elem",elem:v,shift:V},{type:"elem",elem:c,shift:-x}]},e)}else{var F=x-c.depth-(f.height-E);F<_&&(x+=.5*(_-F),E+=.5*(_-F)),B=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:E},{type:"elem",elem:c,shift:-x}]},e)}l=e.havingStyle(o),B.height*=l.sizeMultiplier/e.sizeMultiplier,B.depth*=l.sizeMultiplier/e.sizeMultiplier;var I;o.size===Style$1.DISPLAY.size?I=e.fontMetrics().delim1:o.size===Style$1.SCRIPTSCRIPT.size?I=e.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:I=e.fontMetrics().delim2;var L,U;return n.leftDelim==null?L=makeNullDelimiter(e,["mopen"]):L=delimiter.customSizedDelim(n.leftDelim,I,!0,e.havingStyle(o),n.mode,["mopen"]),n.continued?U=buildCommon.makeSpan([]):n.rightDelim==null?U=makeNullDelimiter(e,["mclose"]):U=delimiter.customSizedDelim(n.rightDelim,I,!0,e.havingStyle(o),n.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(l.sizingClasses(e)),[L,buildCommon.makeSpan(["mfrac"],[B]),U],e)},mathmlBuilder$3=(n,e)=>{var o=new mathMLTree.MathNode("mfrac",[buildGroup(n.numer,e),buildGroup(n.denom,e)]);if(!n.hasBarLine)o.setAttribute("linethickness","0px");else if(n.barSize){var a=calculateSize(n.barSize,e);o.setAttribute("linethickness",makeEm(a))}var s=adjustStyle(n.size,e.style);if(s.size!==e.style.size){o=new mathMLTree.MathNode("mstyle",[o]);var l=s.size===Style$1.DISPLAY.size?"true":"false";o.setAttribute("displaystyle",l),o.setAttribute("scriptlevel","0")}if(n.leftDelim!=null||n.rightDelim!=null){var c=[];if(n.leftDelim!=null){var d=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(n.leftDelim.replace("\\",""))]);d.setAttribute("fence","true"),c.push(d)}if(c.push(o),n.rightDelim!=null){var u=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(n.rightDelim.replace("\\",""))]);u.setAttribute("fence","true"),c.push(u)}return makeRow(c)}return o};defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(n,e)=>{var{parser:o,funcName:a}=n,s=e[0],l=e[1],c,d=null,u=null,f="auto";switch(a){case"\\dfrac":case"\\frac":case"\\tfrac":c=!0;break;case"\\\\atopfrac":c=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":c=!1,d="(",u=")";break;case"\\\\bracefrac":c=!1,d="\\{",u="\\}";break;case"\\\\brackfrac":c=!1,d="[",u="]";break;default:throw new Error("Unrecognized genfrac command")}switch(a){case"\\dfrac":case"\\dbinom":f="display";break;case"\\tfrac":case"\\tbinom":f="text";break}return{type:"genfrac",mode:o.mode,continued:!1,numer:s,denom:l,hasBarLine:c,leftDelim:d,rightDelim:u,size:f,barSize:null}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3}),defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(n,e)=>{var{parser:o,funcName:a}=n,s=e[0],l=e[1];return{type:"genfrac",mode:o.mode,continued:!0,numer:s,denom:l,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(n){var{parser:e,funcName:o,token:a}=n,s;switch(o){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:s,token:a}}});var stylArray=["display","text","script","scriptscript"],delimFromValue=function n(e){var o=null;return e.length>0&&(o=e,o=o==="."?null:o),o};defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(n,e){var{parser:o}=n,a=e[4],s=e[5],l=normalizeArgument(e[0]),c=l.type==="atom"&&l.family==="open"?delimFromValue(l.text):null,d=normalizeArgument(e[1]),u=d.type==="atom"&&d.family==="close"?delimFromValue(d.text):null,f=assertNodeType(e[2],"size"),v,b=null;f.isBlank?v=!0:(b=f.value,v=b.number>0);var k="auto",x=e[3];if(x.type==="ordgroup"){if(x.body.length>0){var _=assertNodeType(x.body[0],"textord");k=stylArray[Number(_.text)]}}else x=assertNodeType(x,"textord"),k=stylArray[Number(x.text)];return{type:"genfrac",mode:o.mode,numer:a,denom:s,continued:!1,hasBarLine:v,barSize:b,leftDelim:c,rightDelim:u,size:k}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3}),defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(n,e){var{parser:o,funcName:a,token:s}=n;return{type:"infix",mode:o.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(e[0],"size").value,token:s}}}),defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(n,e)=>{var{parser:o,funcName:a}=n,s=e[0],l=assert(assertNodeType(e[1],"infix").size),c=e[2],d=l.number>0;return{type:"genfrac",mode:o.mode,numer:s,denom:c,continued:!1,hasBarLine:d,barSize:l,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});var htmlBuilder$3=(n,e)=>{var o=e.style,a,s;n.type==="supsub"?(a=n.sup?buildGroup$1(n.sup,e.havingStyle(o.sup()),e):buildGroup$1(n.sub,e.havingStyle(o.sub()),e),s=assertNodeType(n.base,"horizBrace")):s=assertNodeType(n,"horizBrace");var l=buildGroup$1(s.base,e.havingBaseStyle(Style$1.DISPLAY)),c=stretchy.svgSpan(s,e),d;if(s.isOver?(d=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.1},{type:"elem",elem:c}]},e),d.children[0].children[0].children[1].classes.push("svg-align")):(d=buildCommon.makeVList({positionType:"bottom",positionData:l.depth+.1+c.height,children:[{type:"elem",elem:c},{type:"kern",size:.1},{type:"elem",elem:l}]},e),d.children[0].children[0].children[0].classes.push("svg-align")),a){var u=buildCommon.makeSpan(["mord",s.isOver?"mover":"munder"],[d],e);s.isOver?d=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:u},{type:"kern",size:.2},{type:"elem",elem:a}]},e):d=buildCommon.makeVList({positionType:"bottom",positionData:u.depth+.2+a.height+a.depth,children:[{type:"elem",elem:a},{type:"kern",size:.2},{type:"elem",elem:u}]},e)}return buildCommon.makeSpan(["mord",s.isOver?"mover":"munder"],[d],e)},mathmlBuilder$2=(n,e)=>{var o=stretchy.mathMLnode(n.label);return new mathMLTree.MathNode(n.isOver?"mover":"munder",[buildGroup(n.base,e),o])};defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(n,e){var{parser:o,funcName:a}=n;return{type:"horizBrace",mode:o.mode,label:a,isOver:/^\\over/.test(a),base:e[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2}),defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(n,e)=>{var{parser:o}=n,a=e[1],s=assertNodeType(e[0],"url").url;return o.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:o.mode,href:s,body:ordargument(a)}:o.formatUnsupportedCmd("\\href")},htmlBuilder:(n,e)=>{var o=buildExpression$1(n.body,e,!1);return buildCommon.makeAnchor(n.href,[],o,e)},mathmlBuilder:(n,e)=>{var o=buildExpressionRow(n.body,e);return o instanceof MathNode||(o=new MathNode("mrow",[o])),o.setAttribute("href",n.href),o}}),defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(n,e)=>{var{parser:o}=n,a=assertNodeType(e[0],"url").url;if(!o.settings.isTrusted({command:"\\url",url:a}))return o.formatUnsupportedCmd("\\url");for(var s=[],l=0;l<a.length;l++){var c=a[l];c==="~"&&(c="\\textasciitilde"),s.push({type:"textord",mode:"text",text:c})}var d={type:"text",mode:o.mode,font:"\\texttt",body:s};return{type:"href",mode:o.mode,href:a,body:ordargument(d)}}}),defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(n,e){var{parser:o}=n;return{type:"hbox",mode:o.mode,body:ordargument(e[0])}},htmlBuilder(n,e){var o=buildExpression$1(n.body,e,!1);return buildCommon.makeFragment(o)},mathmlBuilder(n,e){return new mathMLTree.MathNode("mrow",buildExpression(n.body,e))}}),defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(n,e)=>{var{parser:o,funcName:a,token:s}=n,l=assertNodeType(e[0],"raw").string,c=e[1];o.settings.strict&&o.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var d,u={};switch(a){case"\\htmlClass":u.class=l,d={command:"\\htmlClass",class:l};break;case"\\htmlId":u.id=l,d={command:"\\htmlId",id:l};break;case"\\htmlStyle":u.style=l,d={command:"\\htmlStyle",style:l};break;case"\\htmlData":{for(var f=l.split(","),v=0;v<f.length;v++){var b=f[v].split("=");if(b.length!==2)throw new ParseError("Error parsing key-value for \\htmlData");u["data-"+b[0].trim()]=b[1].trim()}d={command:"\\htmlData",attributes:u};break}default:throw new Error("Unrecognized html command")}return o.settings.isTrusted(d)?{type:"html",mode:o.mode,attributes:u,body:ordargument(c)}:o.formatUnsupportedCmd(a)},htmlBuilder:(n,e)=>{var o=buildExpression$1(n.body,e,!1),a=["enclosing"];n.attributes.class&&a.push(...n.attributes.class.trim().split(/\s+/));var s=buildCommon.makeSpan(a,o,e);for(var l in n.attributes)l!=="class"&&n.attributes.hasOwnProperty(l)&&s.setAttribute(l,n.attributes[l]);return s},mathmlBuilder:(n,e)=>buildExpressionRow(n.body,e)}),defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(n,e)=>{var{parser:o}=n;return{type:"htmlmathml",mode:o.mode,html:ordargument(e[0]),mathml:ordargument(e[1])}},htmlBuilder:(n,e)=>{var o=buildExpression$1(n.html,e,!1);return buildCommon.makeFragment(o)},mathmlBuilder:(n,e)=>buildExpressionRow(n.mathml,e)});var sizeData=function n(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var o=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!o)throw new ParseError("Invalid size: '"+e+"' in \\includegraphics");var a={number:+(o[1]+o[2]),unit:o[3]};if(!validUnit(a))throw new ParseError("Invalid unit: '"+a.unit+"' in \\includegraphics.");return a};defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(n,e,o)=>{var{parser:a}=n,s={number:0,unit:"em"},l={number:.9,unit:"em"},c={number:0,unit:"em"},d="";if(o[0])for(var u=assertNodeType(o[0],"raw").string,f=u.split(","),v=0;v<f.length;v++){var b=f[v].split("=");if(b.length===2){var k=b[1].trim();switch(b[0].trim()){case"alt":d=k;break;case"width":s=sizeData(k);break;case"height":l=sizeData(k);break;case"totalheight":c=sizeData(k);break;default:throw new ParseError("Invalid key: '"+b[0]+"' in \\includegraphics.")}}}var x=assertNodeType(e[0],"url").url;return d===""&&(d=x,d=d.replace(/^.*[\\/]/,""),d=d.substring(0,d.lastIndexOf("."))),a.settings.isTrusted({command:"\\includegraphics",url:x})?{type:"includegraphics",mode:a.mode,alt:d,width:s,height:l,totalheight:c,src:x}:a.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(n,e)=>{var o=calculateSize(n.height,e),a=0;n.totalheight.number>0&&(a=calculateSize(n.totalheight,e)-o);var s=0;n.width.number>0&&(s=calculateSize(n.width,e));var l={height:makeEm(o+a)};s>0&&(l.width=makeEm(s)),a>0&&(l.verticalAlign=makeEm(-a));var c=new Img(n.src,n.alt,l);return c.height=o,c.depth=a,c},mathmlBuilder:(n,e)=>{var o=new mathMLTree.MathNode("mglyph",[]);o.setAttribute("alt",n.alt);var a=calculateSize(n.height,e),s=0;if(n.totalheight.number>0&&(s=calculateSize(n.totalheight,e)-a,o.setAttribute("valign",makeEm(-s))),o.setAttribute("height",makeEm(a+s)),n.width.number>0){var l=calculateSize(n.width,e);o.setAttribute("width",makeEm(l))}return o.setAttribute("src",n.src),o}}),defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(n,e){var{parser:o,funcName:a}=n,s=assertNodeType(e[0],"size");if(o.settings.strict){var l=a[1]==="m",c=s.value.unit==="mu";l?(c||o.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" supports only mu units, "+("not "+s.value.unit+" units")),o.mode!=="math"&&o.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" works only in math mode")):c&&o.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" doesn't support mu units")}return{type:"kern",mode:o.mode,dimension:s.value}},htmlBuilder(n,e){return buildCommon.makeGlue(n.dimension,e)},mathmlBuilder(n,e){var o=calculateSize(n.dimension,e);return new mathMLTree.SpaceNode(o)}}),defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:o,funcName:a}=n,s=e[0];return{type:"lap",mode:o.mode,alignment:a.slice(5),body:s}},htmlBuilder:(n,e)=>{var o;n.alignment==="clap"?(o=buildCommon.makeSpan([],[buildGroup$1(n.body,e)]),o=buildCommon.makeSpan(["inner"],[o],e)):o=buildCommon.makeSpan(["inner"],[buildGroup$1(n.body,e)]);var a=buildCommon.makeSpan(["fix"],[]),s=buildCommon.makeSpan([n.alignment],[o,a],e),l=buildCommon.makeSpan(["strut"]);return l.style.height=makeEm(s.height+s.depth),s.depth&&(l.style.verticalAlign=makeEm(-s.depth)),s.children.unshift(l),s=buildCommon.makeSpan(["thinbox"],[s],e),buildCommon.makeSpan(["mord","vbox"],[s],e)},mathmlBuilder:(n,e)=>{var o=new mathMLTree.MathNode("mpadded",[buildGroup(n.body,e)]);if(n.alignment!=="rlap"){var a=n.alignment==="llap"?"-1":"-0.5";o.setAttribute("lspace",a+"width")}return o.setAttribute("width","0px"),o}}),defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(n,e){var{funcName:o,parser:a}=n,s=a.mode;a.switchMode("math");var l=o==="\\("?"\\)":"$",c=a.parseExpression(!1,l);return a.expect(l),a.switchMode(s),{type:"styling",mode:a.mode,style:"text",body:c}}}),defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(n,e){throw new ParseError("Mismatched "+n.funcName)}});var chooseMathStyle=(n,e)=>{switch(e.style.size){case Style$1.DISPLAY.size:return n.display;case Style$1.TEXT.size:return n.text;case Style$1.SCRIPT.size:return n.script;case Style$1.SCRIPTSCRIPT.size:return n.scriptscript;default:return n.text}};defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(n,e)=>{var{parser:o}=n;return{type:"mathchoice",mode:o.mode,display:ordargument(e[0]),text:ordargument(e[1]),script:ordargument(e[2]),scriptscript:ordargument(e[3])}},htmlBuilder:(n,e)=>{var o=chooseMathStyle(n,e),a=buildExpression$1(o,e,!1);return buildCommon.makeFragment(a)},mathmlBuilder:(n,e)=>{var o=chooseMathStyle(n,e);return buildExpressionRow(o,e)}});var assembleSupSub=(n,e,o,a,s,l,c)=>{n=buildCommon.makeSpan([],[n]);var d=o&&utils.isCharacterBox(o),u,f;if(e){var v=buildGroup$1(e,a.havingStyle(s.sup()),a);f={elem:v,kern:Math.max(a.fontMetrics().bigOpSpacing1,a.fontMetrics().bigOpSpacing3-v.depth)}}if(o){var b=buildGroup$1(o,a.havingStyle(s.sub()),a);u={elem:b,kern:Math.max(a.fontMetrics().bigOpSpacing2,a.fontMetrics().bigOpSpacing4-b.height)}}var k;if(f&&u){var x=a.fontMetrics().bigOpSpacing5+u.elem.height+u.elem.depth+u.kern+n.depth+c;k=buildCommon.makeVList({positionType:"bottom",positionData:x,children:[{type:"kern",size:a.fontMetrics().bigOpSpacing5},{type:"elem",elem:u.elem,marginLeft:makeEm(-l)},{type:"kern",size:u.kern},{type:"elem",elem:n},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:makeEm(l)},{type:"kern",size:a.fontMetrics().bigOpSpacing5}]},a)}else if(u){var _=n.height-c;k=buildCommon.makeVList({positionType:"top",positionData:_,children:[{type:"kern",size:a.fontMetrics().bigOpSpacing5},{type:"elem",elem:u.elem,marginLeft:makeEm(-l)},{type:"kern",size:u.kern},{type:"elem",elem:n}]},a)}else if(f){var E=n.depth+c;k=buildCommon.makeVList({positionType:"bottom",positionData:E,children:[{type:"elem",elem:n},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:makeEm(l)},{type:"kern",size:a.fontMetrics().bigOpSpacing5}]},a)}else return n;var B=[k];if(u&&l!==0&&!d){var M=buildCommon.makeSpan(["mspace"],[],a);M.style.marginRight=makeEm(l),B.unshift(M)}return buildCommon.makeSpan(["mop","op-limits"],B,a)},noSuccessor=["\\smallint"],htmlBuilder$2=(n,e)=>{var o,a,s=!1,l;n.type==="supsub"?(o=n.sup,a=n.sub,l=assertNodeType(n.base,"op"),s=!0):l=assertNodeType(n,"op");var c=e.style,d=!1;c.size===Style$1.DISPLAY.size&&l.symbol&&!utils.contains(noSuccessor,l.name)&&(d=!0);var u;if(l.symbol){var f=d?"Size2-Regular":"Size1-Regular",v="";if((l.name==="\\oiint"||l.name==="\\oiiint")&&(v=l.name.slice(1),l.name=v==="oiint"?"\\iint":"\\iiint"),u=buildCommon.makeSymbol(l.name,f,"math",e,["mop","op-symbol",d?"large-op":"small-op"]),v.length>0){var b=u.italic,k=buildCommon.staticSvg(v+"Size"+(d?"2":"1"),e);u=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:0},{type:"elem",elem:k,shift:d?.08:0}]},e),l.name="\\"+v,u.classes.unshift("mop"),u.italic=b}}else if(l.body){var x=buildExpression$1(l.body,e,!0);x.length===1&&x[0]instanceof SymbolNode?(u=x[0],u.classes[0]="mop"):u=buildCommon.makeSpan(["mop"],x,e)}else{for(var _=[],E=1;E<l.name.length;E++)_.push(buildCommon.mathsym(l.name[E],l.mode,e));u=buildCommon.makeSpan(["mop"],_,e)}var B=0,M=0;return(u instanceof SymbolNode||l.name==="\\oiint"||l.name==="\\oiiint")&&!l.suppressBaseShift&&(B=(u.height-u.depth)/2-e.fontMetrics().axisHeight,M=u.italic),s?assembleSupSub(u,o,a,e,c,M,B):(B&&(u.style.position="relative",u.style.top=makeEm(B)),u)},mathmlBuilder$1=(n,e)=>{var o;if(n.symbol)o=new MathNode("mo",[makeText(n.name,n.mode)]),utils.contains(noSuccessor,n.name)&&o.setAttribute("largeop","false");else if(n.body)o=new MathNode("mo",buildExpression(n.body,e));else{o=new MathNode("mi",[new TextNode(n.name.slice(1))]);var a=new MathNode("mo",[makeText("\u2061","text")]);n.parentIsSupSub?o=new MathNode("mrow",[o,a]):o=newDocumentFragment([o,a])}return o},singleCharBigOps={"\u220F":"\\prod","\u2210":"\\coprod","\u2211":"\\sum","\u22C0":"\\bigwedge","\u22C1":"\\bigvee","\u22C2":"\\bigcap","\u22C3":"\\bigcup","\u2A00":"\\bigodot","\u2A01":"\\bigoplus","\u2A02":"\\bigotimes","\u2A04":"\\biguplus","\u2A06":"\\bigsqcup"};defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\u220F","\u2210","\u2211","\u22C0","\u22C1","\u22C2","\u22C3","\u2A00","\u2A01","\u2A02","\u2A04","\u2A06"],props:{numArgs:0},handler:(n,e)=>{var{parser:o,funcName:a}=n,s=a;return s.length===1&&(s=singleCharBigOps[s]),{type:"op",mode:o.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1}),defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var{parser:o}=n,a=e[0];return{type:"op",mode:o.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(a)}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var singleCharIntegrals={"\u222B":"\\int","\u222C":"\\iint","\u222D":"\\iiint","\u222E":"\\oint","\u222F":"\\oiint","\u2230":"\\oiiint"};defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(n){var{parser:e,funcName:o}=n;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:o}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1}),defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(n){var{parser:e,funcName:o}=n;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:o}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1}),defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\u222B","\u222C","\u222D","\u222E","\u222F","\u2230"],props:{numArgs:0},handler(n){var{parser:e,funcName:o}=n,a=o;return a.length===1&&(a=singleCharIntegrals[a]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var htmlBuilder$1=(n,e)=>{var o,a,s=!1,l;n.type==="supsub"?(o=n.sup,a=n.sub,l=assertNodeType(n.base,"operatorname"),s=!0):l=assertNodeType(n,"operatorname");var c;if(l.body.length>0){for(var d=l.body.map(b=>{var k=b.text;return typeof k=="string"?{type:"textord",mode:b.mode,text:k}:b}),u=buildExpression$1(d,e.withFont("mathrm"),!0),f=0;f<u.length;f++){var v=u[f];v instanceof SymbolNode&&(v.text=v.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}c=buildCommon.makeSpan(["mop"],u,e)}else c=buildCommon.makeSpan(["mop"],[],e);return s?assembleSupSub(c,o,a,e,e.style,0,0):c},mathmlBuilder=(n,e)=>{for(var o=buildExpression(n.body,e.withFont("mathrm")),a=!0,s=0;s<o.length;s++){var l=o[s];if(!(l instanceof mathMLTree.SpaceNode))if(l instanceof mathMLTree.MathNode)switch(l.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var c=l.children[0];l.children.length===1&&c instanceof mathMLTree.TextNode?c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):a=!1;break}default:a=!1}else a=!1}if(a){var d=o.map(v=>v.toText()).join("");o=[new mathMLTree.TextNode(d)]}var u=new mathMLTree.MathNode("mi",o);u.setAttribute("mathvariant","normal");var f=new mathMLTree.MathNode("mo",[makeText("\u2061","text")]);return n.parentIsSupSub?new mathMLTree.MathNode("mrow",[u,f]):mathMLTree.newDocumentFragment([u,f])};defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(n,e)=>{var{parser:o,funcName:a}=n,s=e[0];return{type:"operatorname",mode:o.mode,body:ordargument(s),alwaysHandleSupSub:a==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:htmlBuilder$1,mathmlBuilder}),defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),defineFunctionBuilders({type:"ordgroup",htmlBuilder(n,e){return n.semisimple?buildCommon.makeFragment(buildExpression$1(n.body,e,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(n.body,e,!0),e)},mathmlBuilder(n,e){return buildExpressionRow(n.body,e,!0)}}),defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(n,e){var{parser:o}=n,a=e[0];return{type:"overline",mode:o.mode,body:a}},htmlBuilder(n,e){var o=buildGroup$1(n.body,e.havingCrampedStyle()),a=buildCommon.makeLineSpan("overline-line",e),s=e.fontMetrics().defaultRuleThickness,l=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:3*s},{type:"elem",elem:a},{type:"kern",size:s}]},e);return buildCommon.makeSpan(["mord","overline"],[l],e)},mathmlBuilder(n,e){var o=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("\u203E")]);o.setAttribute("stretchy","true");var a=new mathMLTree.MathNode("mover",[buildGroup(n.body,e),o]);return a.setAttribute("accent","true"),a}}),defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:o}=n,a=e[0];return{type:"phantom",mode:o.mode,body:ordargument(a)}},htmlBuilder:(n,e)=>{var o=buildExpression$1(n.body,e.withPhantom(),!1);return buildCommon.makeFragment(o)},mathmlBuilder:(n,e)=>{var o=buildExpression(n.body,e);return new mathMLTree.MathNode("mphantom",o)}}),defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:o}=n,a=e[0];return{type:"hphantom",mode:o.mode,body:a}},htmlBuilder:(n,e)=>{var o=buildCommon.makeSpan([],[buildGroup$1(n.body,e.withPhantom())]);if(o.height=0,o.depth=0,o.children)for(var a=0;a<o.children.length;a++)o.children[a].height=0,o.children[a].depth=0;return o=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o}]},e),buildCommon.makeSpan(["mord"],[o],e)},mathmlBuilder:(n,e)=>{var o=buildExpression(ordargument(n.body),e),a=new mathMLTree.MathNode("mphantom",o),s=new mathMLTree.MathNode("mpadded",[a]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}}),defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:o}=n,a=e[0];return{type:"vphantom",mode:o.mode,body:a}},htmlBuilder:(n,e)=>{var o=buildCommon.makeSpan(["inner"],[buildGroup$1(n.body,e.withPhantom())]),a=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[o,a],e)},mathmlBuilder:(n,e)=>{var o=buildExpression(ordargument(n.body),e),a=new mathMLTree.MathNode("mphantom",o),s=new mathMLTree.MathNode("mpadded",[a]);return s.setAttribute("width","0px"),s}}),defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(n,e){var{parser:o}=n,a=assertNodeType(e[0],"size").value,s=e[1];return{type:"raisebox",mode:o.mode,dy:a,body:s}},htmlBuilder(n,e){var o=buildGroup$1(n.body,e),a=calculateSize(n.dy,e);return buildCommon.makeVList({positionType:"shift",positionData:-a,children:[{type:"elem",elem:o}]},e)},mathmlBuilder(n,e){var o=new mathMLTree.MathNode("mpadded",[buildGroup(n.body,e)]),a=n.dy.number+n.dy.unit;return o.setAttribute("voffset",a),o}}),defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(n){var{parser:e}=n;return{type:"internal",mode:e.mode}}}),defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(n,e,o){var{parser:a}=n,s=o[0],l=assertNodeType(e[0],"size"),c=assertNodeType(e[1],"size");return{type:"rule",mode:a.mode,shift:s&&assertNodeType(s,"size").value,width:l.value,height:c.value}},htmlBuilder(n,e){var o=buildCommon.makeSpan(["mord","rule"],[],e),a=calculateSize(n.width,e),s=calculateSize(n.height,e),l=n.shift?calculateSize(n.shift,e):0;return o.style.borderRightWidth=makeEm(a),o.style.borderTopWidth=makeEm(s),o.style.bottom=makeEm(l),o.width=a,o.height=s+l,o.depth=-l,o.maxFontSize=s*1.125*e.sizeMultiplier,o},mathmlBuilder(n,e){var o=calculateSize(n.width,e),a=calculateSize(n.height,e),s=n.shift?calculateSize(n.shift,e):0,l=e.color&&e.getColor()||"black",c=new mathMLTree.MathNode("mspace");c.setAttribute("mathbackground",l),c.setAttribute("width",makeEm(o)),c.setAttribute("height",makeEm(a));var d=new mathMLTree.MathNode("mpadded",[c]);return s>=0?d.setAttribute("height",makeEm(s)):(d.setAttribute("height",makeEm(s)),d.setAttribute("depth",makeEm(-s))),d.setAttribute("voffset",makeEm(s)),d}});function sizingGroup(n,e,o){for(var a=buildExpression$1(n,e,!1),s=e.sizeMultiplier/o.sizeMultiplier,l=0;l<a.length;l++){var c=a[l].classes.indexOf("sizing");c<0?Array.prototype.push.apply(a[l].classes,e.sizingClasses(o)):a[l].classes[c+1]==="reset-size"+e.size&&(a[l].classes[c+1]="reset-size"+o.size),a[l].height*=s,a[l].depth*=s}return buildCommon.makeFragment(a)}var sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder=(n,e)=>{var o=e.havingSize(n.size);return sizingGroup(n.body,o,e)};defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:(n,e)=>{var{breakOnTokenText:o,funcName:a,parser:s}=n,l=s.parseExpression(!1,o);return{type:"sizing",mode:s.mode,size:sizeFuncs.indexOf(a)+1,body:l}},htmlBuilder,mathmlBuilder:(n,e)=>{var o=e.havingSize(n.size),a=buildExpression(n.body,o),s=new mathMLTree.MathNode("mstyle",a);return s.setAttribute("mathsize",makeEm(o.sizeMultiplier)),s}}),defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(n,e,o)=>{var{parser:a}=n,s=!1,l=!1,c=o[0]&&assertNodeType(o[0],"ordgroup");if(c)for(var d="",u=0;u<c.body.length;++u){var f=c.body[u];if(d=f.text,d==="t")s=!0;else if(d==="b")l=!0;else{s=!1,l=!1;break}}else s=!0,l=!0;var v=e[0];return{type:"smash",mode:a.mode,body:v,smashHeight:s,smashDepth:l}},htmlBuilder:(n,e)=>{var o=buildCommon.makeSpan([],[buildGroup$1(n.body,e)]);if(!n.smashHeight&&!n.smashDepth)return o;if(n.smashHeight&&(o.height=0,o.children))for(var a=0;a<o.children.length;a++)o.children[a].height=0;if(n.smashDepth&&(o.depth=0,o.children))for(var s=0;s<o.children.length;s++)o.children[s].depth=0;var l=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o}]},e);return buildCommon.makeSpan(["mord"],[l],e)},mathmlBuilder:(n,e)=>{var o=new mathMLTree.MathNode("mpadded",[buildGroup(n.body,e)]);return n.smashHeight&&o.setAttribute("height","0px"),n.smashDepth&&o.setAttribute("depth","0px"),o}}),defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(n,e,o){var{parser:a}=n,s=o[0],l=e[0];return{type:"sqrt",mode:a.mode,body:l,index:s}},htmlBuilder(n,e){var o=buildGroup$1(n.body,e.havingCrampedStyle());o.height===0&&(o.height=e.fontMetrics().xHeight),o=buildCommon.wrapFragment(o,e);var a=e.fontMetrics(),s=a.defaultRuleThickness,l=s;e.style.id<Style$1.TEXT.id&&(l=e.fontMetrics().xHeight);var c=s+l/4,d=o.height+o.depth+c+s,{span:u,ruleWidth:f,advanceWidth:v}=delimiter.sqrtImage(d,e),b=u.height-f;b>o.height+o.depth+c&&(c=(c+b-o.height-o.depth)/2);var k=u.height-o.height-c-f;o.style.paddingLeft=makeEm(v);var x=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o,wrapperClasses:["svg-align"]},{type:"kern",size:-(o.height+k)},{type:"elem",elem:u},{type:"kern",size:f}]},e);if(n.index){var _=e.havingStyle(Style$1.SCRIPTSCRIPT),E=buildGroup$1(n.index,_,e),B=.6*(x.height-x.depth),M=buildCommon.makeVList({positionType:"shift",positionData:-B,children:[{type:"elem",elem:E}]},e),V=buildCommon.makeSpan(["root"],[M]);return buildCommon.makeSpan(["mord","sqrt"],[V,x],e)}else return buildCommon.makeSpan(["mord","sqrt"],[x],e)},mathmlBuilder(n,e){var{body:o,index:a}=n;return a?new mathMLTree.MathNode("mroot",[buildGroup(o,e),buildGroup(a,e)]):new mathMLTree.MathNode("msqrt",[buildGroup(o,e)])}});var styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT};defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n,e){var{breakOnTokenText:o,funcName:a,parser:s}=n,l=s.parseExpression(!0,o),c=a.slice(1,a.length-5);return{type:"styling",mode:s.mode,style:c,body:l}},htmlBuilder(n,e){var o=styleMap[n.style],a=e.havingStyle(o).withFont("");return sizingGroup(n.body,a,e)},mathmlBuilder(n,e){var o=styleMap[n.style],a=e.havingStyle(o),s=buildExpression(n.body,a),l=new mathMLTree.MathNode("mstyle",s),c={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},d=c[n.style];return l.setAttribute("scriptlevel",d[0]),l.setAttribute("displaystyle",d[1]),l}});var htmlBuilderDelegate=function n(e,o){var a=e.base;if(a)if(a.type==="op"){var s=a.limits&&(o.style.size===Style$1.DISPLAY.size||a.alwaysHandleSupSub);return s?htmlBuilder$2:null}else if(a.type==="operatorname"){var l=a.alwaysHandleSupSub&&(o.style.size===Style$1.DISPLAY.size||a.limits);return l?htmlBuilder$1:null}else{if(a.type==="accent")return utils.isCharacterBox(a.base)?htmlBuilder$a:null;if(a.type==="horizBrace"){var c=!e.sub;return c===a.isOver?htmlBuilder$3:null}else return null}else return null};defineFunctionBuilders({type:"supsub",htmlBuilder(n,e){var o=htmlBuilderDelegate(n,e);if(o)return o(n,e);var{base:a,sup:s,sub:l}=n,c=buildGroup$1(a,e),d,u,f=e.fontMetrics(),v=0,b=0,k=a&&utils.isCharacterBox(a);if(s){var x=e.havingStyle(e.style.sup());d=buildGroup$1(s,x,e),k||(v=c.height-x.fontMetrics().supDrop*x.sizeMultiplier/e.sizeMultiplier)}if(l){var _=e.havingStyle(e.style.sub());u=buildGroup$1(l,_,e),k||(b=c.depth+_.fontMetrics().subDrop*_.sizeMultiplier/e.sizeMultiplier)}var E;e.style===Style$1.DISPLAY?E=f.sup1:e.style.cramped?E=f.sup3:E=f.sup2;var B=e.sizeMultiplier,M=makeEm(.5/f.ptPerEm/B),V=null;if(u){var F=n.base&&n.base.type==="op"&&n.base.name&&(n.base.name==="\\oiint"||n.base.name==="\\oiiint");(c instanceof SymbolNode||F)&&(V=makeEm(-c.italic))}var I;if(d&&u){v=Math.max(v,E,d.depth+.25*f.xHeight),b=Math.max(b,f.sub2);var L=f.defaultRuleThickness,U=4*L;if(v-d.depth-(u.height-b)<U){b=U-(v-d.depth)+u.height;var Z=.8*f.xHeight-(v-d.depth);Z>0&&(v+=Z,b-=Z)}var K=[{type:"elem",elem:u,shift:b,marginRight:M,marginLeft:V},{type:"elem",elem:d,shift:-v,marginRight:M}];I=buildCommon.makeVList({positionType:"individualShift",children:K},e)}else if(u){b=Math.max(b,f.sub1,u.height-.8*f.xHeight);var j=[{type:"elem",elem:u,marginLeft:V,marginRight:M}];I=buildCommon.makeVList({positionType:"shift",positionData:b,children:j},e)}else if(d)v=Math.max(v,E,d.depth+.25*f.xHeight),I=buildCommon.makeVList({positionType:"shift",positionData:-v,children:[{type:"elem",elem:d,marginRight:M}]},e);else throw new Error("supsub must have either sup or sub.");var W=getTypeOfDomTree(c,"right")||"mord";return buildCommon.makeSpan([W],[c,buildCommon.makeSpan(["msupsub"],[I])],e)},mathmlBuilder(n,e){var o=!1,a,s;n.base&&n.base.type==="horizBrace"&&(s=!!n.sup,s===n.base.isOver&&(o=!0,a=n.base.isOver)),n.base&&(n.base.type==="op"||n.base.type==="operatorname")&&(n.base.parentIsSupSub=!0);var l=[buildGroup(n.base,e)];n.sub&&l.push(buildGroup(n.sub,e)),n.sup&&l.push(buildGroup(n.sup,e));var c;if(o)c=a?"mover":"munder";else if(n.sub)if(n.sup){var d=n.base;d&&d.type==="op"&&d.limits&&e.style===Style$1.DISPLAY||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(e.style===Style$1.DISPLAY||d.limits)?c="munderover":c="msubsup"}else{var u=n.base;u&&u.type==="op"&&u.limits&&(e.style===Style$1.DISPLAY||u.alwaysHandleSupSub)||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(u.limits||e.style===Style$1.DISPLAY)?c="munder":c="msub"}else{var f=n.base;f&&f.type==="op"&&f.limits&&(e.style===Style$1.DISPLAY||f.alwaysHandleSupSub)||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(f.limits||e.style===Style$1.DISPLAY)?c="mover":c="msup"}return new mathMLTree.MathNode(c,l)}}),defineFunctionBuilders({type:"atom",htmlBuilder(n,e){return buildCommon.mathsym(n.text,n.mode,e,["m"+n.family])},mathmlBuilder(n,e){var o=new mathMLTree.MathNode("mo",[makeText(n.text,n.mode)]);if(n.family==="bin"){var a=getVariant(n,e);a==="bold-italic"&&o.setAttribute("mathvariant",a)}else n.family==="punct"?o.setAttribute("separator","true"):(n.family==="open"||n.family==="close")&&o.setAttribute("stretchy","false");return o}});var defaultVariant={mi:"italic",mn:"normal",mtext:"normal"};defineFunctionBuilders({type:"mathord",htmlBuilder(n,e){return buildCommon.makeOrd(n,e,"mathord")},mathmlBuilder(n,e){var o=new mathMLTree.MathNode("mi",[makeText(n.text,n.mode,e)]),a=getVariant(n,e)||"italic";return a!==defaultVariant[o.type]&&o.setAttribute("mathvariant",a),o}}),defineFunctionBuilders({type:"textord",htmlBuilder(n,e){return buildCommon.makeOrd(n,e,"textord")},mathmlBuilder(n,e){var o=makeText(n.text,n.mode,e),a=getVariant(n,e)||"normal",s;return n.mode==="text"?s=new mathMLTree.MathNode("mtext",[o]):/[0-9]/.test(n.text)?s=new mathMLTree.MathNode("mn",[o]):n.text==="\\prime"?s=new mathMLTree.MathNode("mo",[o]):s=new mathMLTree.MathNode("mi",[o]),a!==defaultVariant[s.type]&&s.setAttribute("mathvariant",a),s}});var cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};defineFunctionBuilders({type:"spacing",htmlBuilder(n,e){if(regularSpace.hasOwnProperty(n.text)){var o=regularSpace[n.text].className||"";if(n.mode==="text"){var a=buildCommon.makeOrd(n,e,"textord");return a.classes.push(o),a}else return buildCommon.makeSpan(["mspace",o],[buildCommon.mathsym(n.text,n.mode,e)],e)}else{if(cssSpace.hasOwnProperty(n.text))return buildCommon.makeSpan(["mspace",cssSpace[n.text]],[],e);throw new ParseError('Unknown type of space "'+n.text+'"')}},mathmlBuilder(n,e){var o;if(regularSpace.hasOwnProperty(n.text))o=new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode("\xA0")]);else{if(cssSpace.hasOwnProperty(n.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+n.text+'"')}return o}});var pad=()=>{var n=new mathMLTree.MathNode("mtd",[]);return n.setAttribute("width","50%"),n};defineFunctionBuilders({type:"tag",mathmlBuilder(n,e){var o=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(n.body,e)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(n.tag,e)])])]);return o.setAttribute("width","100%"),o}});var textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=(n,e)=>{var o=n.font;if(o){if(textFontFamilies[o])return e.withTextFontFamily(textFontFamilies[o]);if(textFontWeights[o])return e.withTextFontWeight(textFontWeights[o]);if(o==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(textFontShapes[o])};defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(n,e){var{parser:o,funcName:a}=n,s=e[0];return{type:"text",mode:o.mode,body:ordargument(s),font:a}},htmlBuilder(n,e){var o=optionsWithFont(n,e),a=buildExpression$1(n.body,o,!0);return buildCommon.makeSpan(["mord","text"],a,o)},mathmlBuilder(n,e){var o=optionsWithFont(n,e);return buildExpressionRow(n.body,o)}}),defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(n,e){var{parser:o}=n;return{type:"underline",mode:o.mode,body:e[0]}},htmlBuilder(n,e){var o=buildGroup$1(n.body,e),a=buildCommon.makeLineSpan("underline-line",e),s=e.fontMetrics().defaultRuleThickness,l=buildCommon.makeVList({positionType:"top",positionData:o.height,children:[{type:"kern",size:s},{type:"elem",elem:a},{type:"kern",size:3*s},{type:"elem",elem:o}]},e);return buildCommon.makeSpan(["mord","underline"],[l],e)},mathmlBuilder(n,e){var o=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("\u203E")]);o.setAttribute("stretchy","true");var a=new mathMLTree.MathNode("munder",[buildGroup(n.body,e),o]);return a.setAttribute("accentunder","true"),a}}),defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(n,e){var{parser:o}=n;return{type:"vcenter",mode:o.mode,body:e[0]}},htmlBuilder(n,e){var o=buildGroup$1(n.body,e),a=e.fontMetrics().axisHeight,s=.5*(o.height-a-(o.depth+a));return buildCommon.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:o}]},e)},mathmlBuilder(n,e){return new mathMLTree.MathNode("mpadded",[buildGroup(n.body,e)],["vcenter"])}}),defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(n,e,o){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(n,e){for(var o=makeVerb(n),a=[],s=e.havingStyle(e.style.text()),l=0;l<o.length;l++){var c=o[l];c==="~"&&(c="\\textasciitilde"),a.push(buildCommon.makeSymbol(c,"Typewriter-Regular",n.mode,s,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(s.sizingClasses(e)),buildCommon.tryCombineChars(a),s)},mathmlBuilder(n,e){var o=new mathMLTree.TextNode(makeVerb(n)),a=new mathMLTree.MathNode("mtext",[o]);return a.setAttribute("mathvariant","monospace"),a}});var makeVerb=n=>n.body.replace(/ /g,n.star?"\u2423":"\xA0"),functions=_functions,spaceRegexString=`[ \r
	]`,controlWordRegexString="\\\\[a-zA-Z@]+",controlSymbolRegexString="\\\\[^\uD800-\uDFFF]",controlWordWhitespaceRegexString="("+controlWordRegexString+")"+spaceRegexString+"*",controlSpaceRegexString=`\\\\(
|[ \r	]+
?)[ \r	]*`,combiningDiacriticalMarkString="[\u0300-\u036F]",combiningDiacriticalMarksEndRegex=new RegExp(combiningDiacriticalMarkString+"+$"),tokenRegexString="("+spaceRegexString+"+)|"+(controlSpaceRegexString+"|")+"([!-\\[\\]-\u2027\u202A-\uD7FF\uF900-\uFFFF]"+(combiningDiacriticalMarkString+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(combiningDiacriticalMarkString+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+controlWordWhitespaceRegexString)+("|"+controlSymbolRegexString+")");class Lexer{constructor(e,o){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=o,this.tokenRegex=new RegExp(tokenRegexString,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,o){this.catcodes[e]=o}lex(){var e=this.input,o=this.tokenRegex.lastIndex;if(o===e.length)return new Token("EOF",new SourceLocation(this,o,o));var a=this.tokenRegex.exec(e);if(a===null||a.index!==o)throw new ParseError("Unexpected character: '"+e[o]+"'",new Token(e[o],new SourceLocation(this,o,o+1)));var s=a[6]||a[3]||(a[2]?"\\ ":" ");if(this.catcodes[s]===14){var l=e.indexOf(`
`,this.tokenRegex.lastIndex);return l===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=l+1,this.lex()}return new Token(s,new SourceLocation(this,o,this.tokenRegex.lastIndex))}}class Namespace{constructor(e,o){e===void 0&&(e={}),o===void 0&&(o={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=o,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ParseError("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var o in e)e.hasOwnProperty(o)&&(e[o]==null?delete this.current[o]:this.current[o]=e[o])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,o,a){if(a===void 0&&(a=!1),a){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=o)}else{var l=this.undefStack[this.undefStack.length-1];l&&!l.hasOwnProperty(e)&&(l[e]=this.current[e])}o==null?delete this.current[e]:this.current[e]=o}}var macros=_macros;defineMacro("\\noexpand",function(n){var e=n.popToken();return n.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}}),defineMacro("\\expandafter",function(n){var e=n.popToken();return n.expandOnce(!0),{tokens:[e],numArgs:0}}),defineMacro("\\@firstoftwo",function(n){var e=n.consumeArgs(2);return{tokens:e[0],numArgs:0}}),defineMacro("\\@secondoftwo",function(n){var e=n.consumeArgs(2);return{tokens:e[1],numArgs:0}}),defineMacro("\\@ifnextchar",function(n){var e=n.consumeArgs(3);n.consumeSpaces();var o=n.future();return e[0].length===1&&e[0][0].text===o.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}}),defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),defineMacro("\\TextOrMath",function(n){var e=n.consumeArgs(2);return n.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};defineMacro("\\char",function(n){var e=n.popToken(),o,a="";if(e.text==="'")o=8,e=n.popToken();else if(e.text==='"')o=16,e=n.popToken();else if(e.text==="`")if(e=n.popToken(),e.text[0]==="\\")a=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ParseError("\\char` missing argument");a=e.text.charCodeAt(0)}else o=10;if(o){if(a=digitToNumber[e.text],a==null||a>=o)throw new ParseError("Invalid base-"+o+" digit "+e.text);for(var s;(s=digitToNumber[n.future().text])!=null&&s<o;)a*=o,a+=s,n.popToken()}return"\\@char{"+a+"}"});var newcommand=(n,e,o)=>{var a=n.consumeArg().tokens;if(a.length!==1)throw new ParseError("\\newcommand's first argument must be a macro name");var s=a[0].text,l=n.isDefined(s);if(l&&!e)throw new ParseError("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!l&&!o)throw new ParseError("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var c=0;if(a=n.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",u=n.expandNextToken();u.text!=="]"&&u.text!=="EOF";)d+=u.text,u=n.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+d);c=parseInt(d),a=n.consumeArg().tokens}return n.macros.set(s,{tokens:a,numArgs:c}),""};defineMacro("\\newcommand",n=>newcommand(n,!1,!0)),defineMacro("\\renewcommand",n=>newcommand(n,!0,!1)),defineMacro("\\providecommand",n=>newcommand(n,!0,!0)),defineMacro("\\message",n=>{var e=n.consumeArgs(1)[0];return console.log(e.reverse().map(o=>o.text).join("")),""}),defineMacro("\\errmessage",n=>{var e=n.consumeArgs(1)[0];return console.error(e.reverse().map(o=>o.text).join("")),""}),defineMacro("\\show",n=>{var e=n.popToken(),o=e.text;return console.log(e,n.macros.get(o),functions[o],symbols.math[o],symbols.text[o]),""}),defineMacro("\\bgroup","{"),defineMacro("\\egroup","}"),defineMacro("~","\\nobreakspace"),defineMacro("\\lq","`"),defineMacro("\\rq","'"),defineMacro("\\aa","\\r a"),defineMacro("\\AA","\\r A"),defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`\xA9}"),defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xAE}"),defineMacro("\u212C","\\mathscr{B}"),defineMacro("\u2130","\\mathscr{E}"),defineMacro("\u2131","\\mathscr{F}"),defineMacro("\u210B","\\mathscr{H}"),defineMacro("\u2110","\\mathscr{I}"),defineMacro("\u2112","\\mathscr{L}"),defineMacro("\u2133","\\mathscr{M}"),defineMacro("\u211B","\\mathscr{R}"),defineMacro("\u212D","\\mathfrak{C}"),defineMacro("\u210C","\\mathfrak{H}"),defineMacro("\u2128","\\mathfrak{Z}"),defineMacro("\\Bbbk","\\Bbb{k}"),defineMacro("\xB7","\\cdotp"),defineMacro("\\llap","\\mathllap{\\textrm{#1}}"),defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}"),defineMacro("\\clap","\\mathclap{\\textrm{#1}}"),defineMacro("\\mathstrut","\\vphantom{(}"),defineMacro("\\underbar","\\underline{\\text{#1}}"),defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`\u2260}}"),defineMacro("\\ne","\\neq"),defineMacro("\u2260","\\neq"),defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`\u2209}}"),defineMacro("\u2209","\\notin"),defineMacro("\u2258","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`\u2258}}"),defineMacro("\u2259","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`\u2258}}"),defineMacro("\u225A","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`\u225A}}"),defineMacro("\u225B","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`\u225B}}"),defineMacro("\u225D","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`\u225D}}"),defineMacro("\u225E","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`\u225E}}"),defineMacro("\u225F","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`\u225F}}"),defineMacro("\u27C2","\\perp"),defineMacro("\u203C","\\mathclose{!\\mkern-0.8mu!}"),defineMacro("\u220C","\\notni"),defineMacro("\u231C","\\ulcorner"),defineMacro("\u231D","\\urcorner"),defineMacro("\u231E","\\llcorner"),defineMacro("\u231F","\\lrcorner"),defineMacro("\xA9","\\copyright"),defineMacro("\xAE","\\textregistered"),defineMacro("\uFE0F","\\textregistered"),defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),defineMacro("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),defineMacro("\u22EE","\\vdots"),defineMacro("\\varGamma","\\mathit{\\Gamma}"),defineMacro("\\varDelta","\\mathit{\\Delta}"),defineMacro("\\varTheta","\\mathit{\\Theta}"),defineMacro("\\varLambda","\\mathit{\\Lambda}"),defineMacro("\\varXi","\\mathit{\\Xi}"),defineMacro("\\varPi","\\mathit{\\Pi}"),defineMacro("\\varSigma","\\mathit{\\Sigma}"),defineMacro("\\varUpsilon","\\mathit{\\Upsilon}"),defineMacro("\\varPhi","\\mathit{\\Phi}"),defineMacro("\\varPsi","\\mathit{\\Psi}"),defineMacro("\\varOmega","\\mathit{\\Omega}"),defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}"),defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),defineMacro("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),defineMacro("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};defineMacro("\\dots",function(n){var e="\\dotso",o=n.expandAfterFuture().text;return o in dotsByToken?e=dotsByToken[o]:(o.slice(0,4)==="\\not"||o in symbols.math&&utils.contains(["bin","rel"],symbols.math[o].group))&&(e="\\dotsb"),e});var spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};defineMacro("\\dotso",function(n){var e=n.future().text;return e in spaceAfterDots?"\\ldots\\,":"\\ldots"}),defineMacro("\\dotsc",function(n){var e=n.future().text;return e in spaceAfterDots&&e!==","?"\\ldots\\,":"\\ldots"}),defineMacro("\\cdots",function(n){var e=n.future().text;return e in spaceAfterDots?"\\@cdots\\,":"\\@cdots"}),defineMacro("\\dotsb","\\cdots"),defineMacro("\\dotsm","\\cdots"),defineMacro("\\dotsi","\\!\\cdots"),defineMacro("\\dotsx","\\ldots\\,"),defineMacro("\\DOTSI","\\relax"),defineMacro("\\DOTSB","\\relax"),defineMacro("\\DOTSX","\\relax"),defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),defineMacro("\\,","\\tmspace+{3mu}{.1667em}"),defineMacro("\\thinspace","\\,"),defineMacro("\\>","\\mskip{4mu}"),defineMacro("\\:","\\tmspace+{4mu}{.2222em}"),defineMacro("\\medspace","\\:"),defineMacro("\\;","\\tmspace+{5mu}{.2777em}"),defineMacro("\\thickspace","\\;"),defineMacro("\\!","\\tmspace-{3mu}{.1667em}"),defineMacro("\\negthinspace","\\!"),defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}"),defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}"),defineMacro("\\enspace","\\kern.5em "),defineMacro("\\enskip","\\hskip.5em\\relax"),defineMacro("\\quad","\\hskip1em\\relax"),defineMacro("\\qquad","\\hskip2em\\relax"),defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren"),defineMacro("\\tag@paren","\\tag@literal{({#1})}"),defineMacro("\\tag@literal",n=>{if(n.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),defineMacro("\\newline","\\\\\\relax"),defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var latexRaiseA=makeEm(fontMetricsData["Main-Regular"][84][1]-.7*fontMetricsData["Main-Regular"][65][1]);defineMacro("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),defineMacro("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace"),defineMacro("\\@hspace","\\hskip #1\\relax"),defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),defineMacro("\\ordinarycolon",":"),defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),defineMacro("\u2237","\\dblcolon"),defineMacro("\u2239","\\eqcolon"),defineMacro("\u2254","\\coloneqq"),defineMacro("\u2255","\\eqqcolon"),defineMacro("\u2A74","\\Coloneqq"),defineMacro("\\ratio","\\vcentcolon"),defineMacro("\\coloncolon","\\dblcolon"),defineMacro("\\colonequals","\\coloneqq"),defineMacro("\\coloncolonequals","\\Coloneqq"),defineMacro("\\equalscolon","\\eqqcolon"),defineMacro("\\equalscoloncolon","\\Eqqcolon"),defineMacro("\\colonminus","\\coloneq"),defineMacro("\\coloncolonminus","\\Coloneq"),defineMacro("\\minuscolon","\\eqcolon"),defineMacro("\\minuscoloncolon","\\Eqcolon"),defineMacro("\\coloncolonapprox","\\Colonapprox"),defineMacro("\\coloncolonsim","\\Colonsim"),defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`\u220C}}"),defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{\u2269}"),defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{\u2268}"),defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{\u2271}"),defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{\u2271}"),defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{\u2270}"),defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{\u2270}"),defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{\u2224}"),defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{\u2226}"),defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{\u2288}"),defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{\u2289}"),defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{\u228A}"),defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{\u2ACB}"),defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{\u228B}"),defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{\u2ACC}"),defineMacro("\\imath","\\html@mathml{\\@imath}{\u0131}"),defineMacro("\\jmath","\\html@mathml{\\@jmath}{\u0237}"),defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`\u27E6}}"),defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`\u27E7}}"),defineMacro("\u27E6","\\llbracket"),defineMacro("\u27E7","\\rrbracket"),defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`\u2983}}"),defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`\u2984}}"),defineMacro("\u2983","\\lBrace"),defineMacro("\u2984","\\rBrace"),defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`\u29B5}}"),defineMacro("\u29B5","\\minuso"),defineMacro("\\darr","\\downarrow"),defineMacro("\\dArr","\\Downarrow"),defineMacro("\\Darr","\\Downarrow"),defineMacro("\\lang","\\langle"),defineMacro("\\rang","\\rangle"),defineMacro("\\uarr","\\uparrow"),defineMacro("\\uArr","\\Uparrow"),defineMacro("\\Uarr","\\Uparrow"),defineMacro("\\N","\\mathbb{N}"),defineMacro("\\R","\\mathbb{R}"),defineMacro("\\Z","\\mathbb{Z}"),defineMacro("\\alef","\\aleph"),defineMacro("\\alefsym","\\aleph"),defineMacro("\\Alpha","\\mathrm{A}"),defineMacro("\\Beta","\\mathrm{B}"),defineMacro("\\bull","\\bullet"),defineMacro("\\Chi","\\mathrm{X}"),defineMacro("\\clubs","\\clubsuit"),defineMacro("\\cnums","\\mathbb{C}"),defineMacro("\\Complex","\\mathbb{C}"),defineMacro("\\Dagger","\\ddagger"),defineMacro("\\diamonds","\\diamondsuit"),defineMacro("\\empty","\\emptyset"),defineMacro("\\Epsilon","\\mathrm{E}"),defineMacro("\\Eta","\\mathrm{H}"),defineMacro("\\exist","\\exists"),defineMacro("\\harr","\\leftrightarrow"),defineMacro("\\hArr","\\Leftrightarrow"),defineMacro("\\Harr","\\Leftrightarrow"),defineMacro("\\hearts","\\heartsuit"),defineMacro("\\image","\\Im"),defineMacro("\\infin","\\infty"),defineMacro("\\Iota","\\mathrm{I}"),defineMacro("\\isin","\\in"),defineMacro("\\Kappa","\\mathrm{K}"),defineMacro("\\larr","\\leftarrow"),defineMacro("\\lArr","\\Leftarrow"),defineMacro("\\Larr","\\Leftarrow"),defineMacro("\\lrarr","\\leftrightarrow"),defineMacro("\\lrArr","\\Leftrightarrow"),defineMacro("\\Lrarr","\\Leftrightarrow"),defineMacro("\\Mu","\\mathrm{M}"),defineMacro("\\natnums","\\mathbb{N}"),defineMacro("\\Nu","\\mathrm{N}"),defineMacro("\\Omicron","\\mathrm{O}"),defineMacro("\\plusmn","\\pm"),defineMacro("\\rarr","\\rightarrow"),defineMacro("\\rArr","\\Rightarrow"),defineMacro("\\Rarr","\\Rightarrow"),defineMacro("\\real","\\Re"),defineMacro("\\reals","\\mathbb{R}"),defineMacro("\\Reals","\\mathbb{R}"),defineMacro("\\Rho","\\mathrm{P}"),defineMacro("\\sdot","\\cdot"),defineMacro("\\sect","\\S"),defineMacro("\\spades","\\spadesuit"),defineMacro("\\sub","\\subset"),defineMacro("\\sube","\\subseteq"),defineMacro("\\supe","\\supseteq"),defineMacro("\\Tau","\\mathrm{T}"),defineMacro("\\thetasym","\\vartheta"),defineMacro("\\weierp","\\wp"),defineMacro("\\Zeta","\\mathrm{Z}"),defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),defineMacro("\\bra","\\mathinner{\\langle{#1}|}"),defineMacro("\\ket","\\mathinner{|{#1}\\rangle}"),defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}"),defineMacro("\\Bra","\\left\\langle#1\\right|"),defineMacro("\\Ket","\\left|#1\\right\\rangle");var braketHelper=n=>e=>{var o=e.consumeArg().tokens,a=e.consumeArg().tokens,s=e.consumeArg().tokens,l=e.consumeArg().tokens,c=e.macros.get("|"),d=e.macros.get("\\|");e.macros.beginGroup();var u=b=>k=>{n&&(k.macros.set("|",c),s.length&&k.macros.set("\\|",d));var x=b;if(!b&&s.length){var _=k.future();_.text==="|"&&(k.popToken(),x=!0)}return{tokens:x?s:a,numArgs:0}};e.macros.set("|",u(!1)),s.length&&e.macros.set("\\|",u(!0));var f=e.consumeArg().tokens,v=e.expandTokens([...l,...f,...o]);return e.macros.endGroup(),{tokens:v.reverse(),numArgs:0}};defineMacro("\\bra@ket",braketHelper(!1)),defineMacro("\\bra@set",braketHelper(!0)),defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),defineMacro("\\angln","{\\angl n}"),defineMacro("\\blue","\\textcolor{##6495ed}{#1}"),defineMacro("\\orange","\\textcolor{##ffa500}{#1}"),defineMacro("\\pink","\\textcolor{##ff00af}{#1}"),defineMacro("\\red","\\textcolor{##df0030}{#1}"),defineMacro("\\green","\\textcolor{##28ae7b}{#1}"),defineMacro("\\gray","\\textcolor{gray}{#1}"),defineMacro("\\purple","\\textcolor{##9d38bd}{#1}"),defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}"),defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}"),defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}"),defineMacro("\\blueD","\\textcolor{##11accd}{#1}"),defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}"),defineMacro("\\tealA","\\textcolor{##94fff5}{#1}"),defineMacro("\\tealB","\\textcolor{##26edd5}{#1}"),defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}"),defineMacro("\\tealD","\\textcolor{##01a995}{#1}"),defineMacro("\\tealE","\\textcolor{##208170}{#1}"),defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}"),defineMacro("\\greenB","\\textcolor{##8af281}{#1}"),defineMacro("\\greenC","\\textcolor{##74cf70}{#1}"),defineMacro("\\greenD","\\textcolor{##1fab54}{#1}"),defineMacro("\\greenE","\\textcolor{##0d923f}{#1}"),defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}"),defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}"),defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}"),defineMacro("\\goldD","\\textcolor{##e07d10}{#1}"),defineMacro("\\goldE","\\textcolor{##a75a05}{#1}"),defineMacro("\\redA","\\textcolor{##fca9a9}{#1}"),defineMacro("\\redB","\\textcolor{##ff8482}{#1}"),defineMacro("\\redC","\\textcolor{##f9685d}{#1}"),defineMacro("\\redD","\\textcolor{##e84d39}{#1}"),defineMacro("\\redE","\\textcolor{##bc2612}{#1}"),defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}"),defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}"),defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}"),defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}"),defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}"),defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}"),defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}"),defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}"),defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}"),defineMacro("\\purpleE","\\textcolor{##543b78}{#1}"),defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}"),defineMacro("\\mintB","\\textcolor{##edf2df}{#1}"),defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}"),defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}"),defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}"),defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}"),defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}"),defineMacro("\\grayE","\\textcolor{##babec2}{#1}"),defineMacro("\\grayF","\\textcolor{##888d93}{#1}"),defineMacro("\\grayG","\\textcolor{##626569}{#1}"),defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}"),defineMacro("\\grayI","\\textcolor{##21242c}{#1}"),defineMacro("\\kaBlue","\\textcolor{##314453}{#1}"),defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}");var implicitCommands={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class MacroExpander{constructor(e,o,a){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=o,this.expansionCount=0,this.feed(e),this.macros=new Namespace(macros,o.macros),this.mode=a,this.stack=[]}feed(e){this.lexer=new Lexer(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var o,a,s;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;o=this.popToken(),{tokens:s,end:a}=this.consumeArg(["]"])}else({tokens:s,start:o,end:a}=this.consumeArg());return this.pushToken(new Token("EOF",a.loc)),this.pushTokens(s),o.range(a,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var o=[],a=e&&e.length>0;a||this.consumeSpaces();var s=this.future(),l,c=0,d=0;do{if(l=this.popToken(),o.push(l),l.text==="{")++c;else if(l.text==="}"){if(--c,c===-1)throw new ParseError("Extra }",l)}else if(l.text==="EOF")throw new ParseError("Unexpected end of input in a macro argument, expected '"+(e&&a?e[d]:"}")+"'",l);if(e&&a)if((c===0||c===1&&e[d]==="{")&&l.text===e[d]){if(++d,d===e.length){o.splice(-d,d);break}}else d=0}while(c!==0||a);return s.text==="{"&&o[o.length-1].text==="}"&&(o.pop(),o.shift()),o.reverse(),{tokens:o,start:s,end:l}}consumeArgs(e,o){if(o){if(o.length!==e+1)throw new ParseError("The length of delimiters doesn't match the number of args!");for(var a=o[0],s=0;s<a.length;s++){var l=this.popToken();if(a[s]!==l.text)throw new ParseError("Use of the macro doesn't match its definition",l)}}for(var c=[],d=0;d<e;d++)c.push(this.consumeArg(o&&o[d+1]).tokens);return c}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ParseError("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var o=this.popToken(),a=o.text,s=o.noexpand?null:this._getExpansion(a);if(s==null||e&&s.unexpandable){if(e&&s==null&&a[0]==="\\"&&!this.isDefined(a))throw new ParseError("Undefined control sequence: "+a);return this.pushToken(o),!1}this.countExpansion(1);var l=s.tokens,c=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){l=l.slice();for(var d=l.length-1;d>=0;--d){var u=l[d];if(u.text==="#"){if(d===0)throw new ParseError("Incomplete placeholder at end of macro body",u);if(u=l[--d],u.text==="#")l.splice(d+1,1);else if(/^[1-9]$/.test(u.text))l.splice(d,2,...c[+u.text-1]);else throw new ParseError("Not a valid argument number",u)}}}return this.pushTokens(l),l.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Token(e)]):void 0}expandTokens(e){var o=[],a=this.stack.length;for(this.pushTokens(e);this.stack.length>a;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),o.push(s)}return this.countExpansion(o.length),o}expandMacroAsText(e){var o=this.expandMacro(e);return o&&o.map(a=>a.text).join("")}_getExpansion(e){var o=this.macros.get(e);if(o==null)return o;if(e.length===1){var a=this.lexer.catcodes[e];if(a!=null&&a!==13)return}var s=typeof o=="function"?o(this):o;if(typeof s=="string"){var l=0;if(s.indexOf("#")!==-1)for(var c=s.replace(/##/g,"");c.indexOf("#"+(l+1))!==-1;)++l;for(var d=new Lexer(s,this.settings),u=[],f=d.lex();f.text!=="EOF";)u.push(f),f=d.lex();u.reverse();var v={tokens:u,numArgs:l};return v}return s}isDefined(e){return this.macros.has(e)||functions.hasOwnProperty(e)||symbols.math.hasOwnProperty(e)||symbols.text.hasOwnProperty(e)||implicitCommands.hasOwnProperty(e)}isExpandable(e){var o=this.macros.get(e);return o!=null?typeof o=="string"||typeof o=="function"||!o.unexpandable:functions.hasOwnProperty(e)&&!functions[e].primitive}}var unicodeSubRegEx=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,uSubsAndSups=Object.freeze({"\u208A":"+","\u208B":"-","\u208C":"=","\u208D":"(","\u208E":")","\u2080":"0","\u2081":"1","\u2082":"2","\u2083":"3","\u2084":"4","\u2085":"5","\u2086":"6","\u2087":"7","\u2088":"8","\u2089":"9","\u2090":"a","\u2091":"e","\u2095":"h","\u1D62":"i","\u2C7C":"j","\u2096":"k","\u2097":"l","\u2098":"m","\u2099":"n","\u2092":"o","\u209A":"p","\u1D63":"r","\u209B":"s","\u209C":"t","\u1D64":"u","\u1D65":"v","\u2093":"x","\u1D66":"\u03B2","\u1D67":"\u03B3","\u1D68":"\u03C1","\u1D69":"\u03D5","\u1D6A":"\u03C7","\u207A":"+","\u207B":"-","\u207C":"=","\u207D":"(","\u207E":")","\u2070":"0","\xB9":"1","\xB2":"2","\xB3":"3","\u2074":"4","\u2075":"5","\u2076":"6","\u2077":"7","\u2078":"8","\u2079":"9","\u1D2C":"A","\u1D2E":"B","\u1D30":"D","\u1D31":"E","\u1D33":"G","\u1D34":"H","\u1D35":"I","\u1D36":"J","\u1D37":"K","\u1D38":"L","\u1D39":"M","\u1D3A":"N","\u1D3C":"O","\u1D3E":"P","\u1D3F":"R","\u1D40":"T","\u1D41":"U","\u2C7D":"V","\u1D42":"W","\u1D43":"a","\u1D47":"b","\u1D9C":"c","\u1D48":"d","\u1D49":"e","\u1DA0":"f","\u1D4D":"g",\u02B0:"h","\u2071":"i",\u02B2:"j","\u1D4F":"k",\u02E1:"l","\u1D50":"m",\u207F:"n","\u1D52":"o","\u1D56":"p",\u02B3:"r",\u02E2:"s","\u1D57":"t","\u1D58":"u","\u1D5B":"v",\u02B7:"w",\u02E3:"x",\u02B8:"y","\u1DBB":"z","\u1D5D":"\u03B2","\u1D5E":"\u03B3","\u1D5F":"\u03B4","\u1D60":"\u03D5","\u1D61":"\u03C7","\u1DBF":"\u03B8"}),unicodeAccents={"\u0301":{text:"\\'",math:"\\acute"},"\u0300":{text:"\\`",math:"\\grave"},"\u0308":{text:'\\"',math:"\\ddot"},"\u0303":{text:"\\~",math:"\\tilde"},"\u0304":{text:"\\=",math:"\\bar"},"\u0306":{text:"\\u",math:"\\breve"},"\u030C":{text:"\\v",math:"\\check"},"\u0302":{text:"\\^",math:"\\hat"},"\u0307":{text:"\\.",math:"\\dot"},"\u030A":{text:"\\r",math:"\\mathring"},"\u030B":{text:"\\H"},"\u0327":{text:"\\c"}},unicodeSymbols={\u00E1:"a\u0301",\u00E0:"a\u0300",\u00E4:"a\u0308",\u01DF:"a\u0308\u0304",\u00E3:"a\u0303",\u0101:"a\u0304",\u0103:"a\u0306",\u1EAF:"a\u0306\u0301",\u1EB1:"a\u0306\u0300",\u1EB5:"a\u0306\u0303",\u01CE:"a\u030C",\u00E2:"a\u0302",\u1EA5:"a\u0302\u0301",\u1EA7:"a\u0302\u0300",\u1EAB:"a\u0302\u0303",\u0227:"a\u0307",\u01E1:"a\u0307\u0304",\u00E5:"a\u030A",\u01FB:"a\u030A\u0301",\u1E03:"b\u0307",\u0107:"c\u0301",\u1E09:"c\u0327\u0301",\u010D:"c\u030C",\u0109:"c\u0302",\u010B:"c\u0307",\u00E7:"c\u0327",\u010F:"d\u030C",\u1E0B:"d\u0307",\u1E11:"d\u0327",\u00E9:"e\u0301",\u00E8:"e\u0300",\u00EB:"e\u0308",\u1EBD:"e\u0303",\u0113:"e\u0304",\u1E17:"e\u0304\u0301",\u1E15:"e\u0304\u0300",\u0115:"e\u0306",\u1E1D:"e\u0327\u0306",\u011B:"e\u030C",\u00EA:"e\u0302",\u1EBF:"e\u0302\u0301",\u1EC1:"e\u0302\u0300",\u1EC5:"e\u0302\u0303",\u0117:"e\u0307",\u0229:"e\u0327",\u1E1F:"f\u0307",\u01F5:"g\u0301",\u1E21:"g\u0304",\u011F:"g\u0306",\u01E7:"g\u030C",\u011D:"g\u0302",\u0121:"g\u0307",\u0123:"g\u0327",\u1E27:"h\u0308",\u021F:"h\u030C",\u0125:"h\u0302",\u1E23:"h\u0307",\u1E29:"h\u0327",\u00ED:"i\u0301",\u00EC:"i\u0300",\u00EF:"i\u0308",\u1E2F:"i\u0308\u0301",\u0129:"i\u0303",\u012B:"i\u0304",\u012D:"i\u0306",\u01D0:"i\u030C",\u00EE:"i\u0302",\u01F0:"j\u030C",\u0135:"j\u0302",\u1E31:"k\u0301",\u01E9:"k\u030C",\u0137:"k\u0327",\u013A:"l\u0301",\u013E:"l\u030C",\u013C:"l\u0327",\u1E3F:"m\u0301",\u1E41:"m\u0307",\u0144:"n\u0301",\u01F9:"n\u0300",\u00F1:"n\u0303",\u0148:"n\u030C",\u1E45:"n\u0307",\u0146:"n\u0327",\u00F3:"o\u0301",\u00F2:"o\u0300",\u00F6:"o\u0308",\u022B:"o\u0308\u0304",\u00F5:"o\u0303",\u1E4D:"o\u0303\u0301",\u1E4F:"o\u0303\u0308",\u022D:"o\u0303\u0304",\u014D:"o\u0304",\u1E53:"o\u0304\u0301",\u1E51:"o\u0304\u0300",\u014F:"o\u0306",\u01D2:"o\u030C",\u00F4:"o\u0302",\u1ED1:"o\u0302\u0301",\u1ED3:"o\u0302\u0300",\u1ED7:"o\u0302\u0303",\u022F:"o\u0307",\u0231:"o\u0307\u0304",\u0151:"o\u030B",\u1E55:"p\u0301",\u1E57:"p\u0307",\u0155:"r\u0301",\u0159:"r\u030C",\u1E59:"r\u0307",\u0157:"r\u0327",\u015B:"s\u0301",\u1E65:"s\u0301\u0307",\u0161:"s\u030C",\u1E67:"s\u030C\u0307",\u015D:"s\u0302",\u1E61:"s\u0307",\u015F:"s\u0327",\u1E97:"t\u0308",\u0165:"t\u030C",\u1E6B:"t\u0307",\u0163:"t\u0327",\u00FA:"u\u0301",\u00F9:"u\u0300",\u00FC:"u\u0308",\u01D8:"u\u0308\u0301",\u01DC:"u\u0308\u0300",\u01D6:"u\u0308\u0304",\u01DA:"u\u0308\u030C",\u0169:"u\u0303",\u1E79:"u\u0303\u0301",\u016B:"u\u0304",\u1E7B:"u\u0304\u0308",\u016D:"u\u0306",\u01D4:"u\u030C",\u00FB:"u\u0302",\u016F:"u\u030A",\u0171:"u\u030B",\u1E7D:"v\u0303",\u1E83:"w\u0301",\u1E81:"w\u0300",\u1E85:"w\u0308",\u0175:"w\u0302",\u1E87:"w\u0307",\u1E98:"w\u030A",\u1E8D:"x\u0308",\u1E8B:"x\u0307",\u00FD:"y\u0301",\u1EF3:"y\u0300",\u00FF:"y\u0308",\u1EF9:"y\u0303",\u0233:"y\u0304",\u0177:"y\u0302",\u1E8F:"y\u0307",\u1E99:"y\u030A",\u017A:"z\u0301",\u017E:"z\u030C",\u1E91:"z\u0302",\u017C:"z\u0307",\u00C1:"A\u0301",\u00C0:"A\u0300",\u00C4:"A\u0308",\u01DE:"A\u0308\u0304",\u00C3:"A\u0303",\u0100:"A\u0304",\u0102:"A\u0306",\u1EAE:"A\u0306\u0301",\u1EB0:"A\u0306\u0300",\u1EB4:"A\u0306\u0303",\u01CD:"A\u030C",\u00C2:"A\u0302",\u1EA4:"A\u0302\u0301",\u1EA6:"A\u0302\u0300",\u1EAA:"A\u0302\u0303",\u0226:"A\u0307",\u01E0:"A\u0307\u0304",\u00C5:"A\u030A",\u01FA:"A\u030A\u0301",\u1E02:"B\u0307",\u0106:"C\u0301",\u1E08:"C\u0327\u0301",\u010C:"C\u030C",\u0108:"C\u0302",\u010A:"C\u0307",\u00C7:"C\u0327",\u010E:"D\u030C",\u1E0A:"D\u0307",\u1E10:"D\u0327",\u00C9:"E\u0301",\u00C8:"E\u0300",\u00CB:"E\u0308",\u1EBC:"E\u0303",\u0112:"E\u0304",\u1E16:"E\u0304\u0301",\u1E14:"E\u0304\u0300",\u0114:"E\u0306",\u1E1C:"E\u0327\u0306",\u011A:"E\u030C",\u00CA:"E\u0302",\u1EBE:"E\u0302\u0301",\u1EC0:"E\u0302\u0300",\u1EC4:"E\u0302\u0303",\u0116:"E\u0307",\u0228:"E\u0327",\u1E1E:"F\u0307",\u01F4:"G\u0301",\u1E20:"G\u0304",\u011E:"G\u0306",\u01E6:"G\u030C",\u011C:"G\u0302",\u0120:"G\u0307",\u0122:"G\u0327",\u1E26:"H\u0308",\u021E:"H\u030C",\u0124:"H\u0302",\u1E22:"H\u0307",\u1E28:"H\u0327",\u00CD:"I\u0301",\u00CC:"I\u0300",\u00CF:"I\u0308",\u1E2E:"I\u0308\u0301",\u0128:"I\u0303",\u012A:"I\u0304",\u012C:"I\u0306",\u01CF:"I\u030C",\u00CE:"I\u0302",\u0130:"I\u0307",\u0134:"J\u0302",\u1E30:"K\u0301",\u01E8:"K\u030C",\u0136:"K\u0327",\u0139:"L\u0301",\u013D:"L\u030C",\u013B:"L\u0327",\u1E3E:"M\u0301",\u1E40:"M\u0307",\u0143:"N\u0301",\u01F8:"N\u0300",\u00D1:"N\u0303",\u0147:"N\u030C",\u1E44:"N\u0307",\u0145:"N\u0327",\u00D3:"O\u0301",\u00D2:"O\u0300",\u00D6:"O\u0308",\u022A:"O\u0308\u0304",\u00D5:"O\u0303",\u1E4C:"O\u0303\u0301",\u1E4E:"O\u0303\u0308",\u022C:"O\u0303\u0304",\u014C:"O\u0304",\u1E52:"O\u0304\u0301",\u1E50:"O\u0304\u0300",\u014E:"O\u0306",\u01D1:"O\u030C",\u00D4:"O\u0302",\u1ED0:"O\u0302\u0301",\u1ED2:"O\u0302\u0300",\u1ED6:"O\u0302\u0303",\u022E:"O\u0307",\u0230:"O\u0307\u0304",\u0150:"O\u030B",\u1E54:"P\u0301",\u1E56:"P\u0307",\u0154:"R\u0301",\u0158:"R\u030C",\u1E58:"R\u0307",\u0156:"R\u0327",\u015A:"S\u0301",\u1E64:"S\u0301\u0307",\u0160:"S\u030C",\u1E66:"S\u030C\u0307",\u015C:"S\u0302",\u1E60:"S\u0307",\u015E:"S\u0327",\u0164:"T\u030C",\u1E6A:"T\u0307",\u0162:"T\u0327",\u00DA:"U\u0301",\u00D9:"U\u0300",\u00DC:"U\u0308",\u01D7:"U\u0308\u0301",\u01DB:"U\u0308\u0300",\u01D5:"U\u0308\u0304",\u01D9:"U\u0308\u030C",\u0168:"U\u0303",\u1E78:"U\u0303\u0301",\u016A:"U\u0304",\u1E7A:"U\u0304\u0308",\u016C:"U\u0306",\u01D3:"U\u030C",\u00DB:"U\u0302",\u016E:"U\u030A",\u0170:"U\u030B",\u1E7C:"V\u0303",\u1E82:"W\u0301",\u1E80:"W\u0300",\u1E84:"W\u0308",\u0174:"W\u0302",\u1E86:"W\u0307",\u1E8C:"X\u0308",\u1E8A:"X\u0307",\u00DD:"Y\u0301",\u1EF2:"Y\u0300",\u0178:"Y\u0308",\u1EF8:"Y\u0303",\u0232:"Y\u0304",\u0176:"Y\u0302",\u1E8E:"Y\u0307",\u0179:"Z\u0301",\u017D:"Z\u030C",\u1E90:"Z\u0302",\u017B:"Z\u0307",\u03AC:"\u03B1\u0301",\u1F70:"\u03B1\u0300",\u1FB1:"\u03B1\u0304",\u1FB0:"\u03B1\u0306",\u03AD:"\u03B5\u0301",\u1F72:"\u03B5\u0300",\u03AE:"\u03B7\u0301",\u1F74:"\u03B7\u0300",\u03AF:"\u03B9\u0301",\u1F76:"\u03B9\u0300",\u03CA:"\u03B9\u0308",\u0390:"\u03B9\u0308\u0301",\u1FD2:"\u03B9\u0308\u0300",\u1FD1:"\u03B9\u0304",\u1FD0:"\u03B9\u0306",\u03CC:"\u03BF\u0301",\u1F78:"\u03BF\u0300",\u03CD:"\u03C5\u0301",\u1F7A:"\u03C5\u0300",\u03CB:"\u03C5\u0308",\u03B0:"\u03C5\u0308\u0301",\u1FE2:"\u03C5\u0308\u0300",\u1FE1:"\u03C5\u0304",\u1FE0:"\u03C5\u0306",\u03CE:"\u03C9\u0301",\u1F7C:"\u03C9\u0300",\u038E:"\u03A5\u0301",\u1FEA:"\u03A5\u0300",\u03AB:"\u03A5\u0308",\u1FE9:"\u03A5\u0304",\u1FE8:"\u03A5\u0306",\u038F:"\u03A9\u0301",\u1FFA:"\u03A9\u0300"};class Parser{constructor(e,o){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new MacroExpander(e,o,this.mode),this.settings=o,this.leftrightDepth=0}expect(e,o){if(o===void 0&&(o=!0),this.fetch().text!==e)throw new ParseError("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());o&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var o=this.nextToken;this.consume(),this.gullet.pushToken(new Token("}")),this.gullet.pushTokens(e);var a=this.parseExpression(!1);return this.expect("}"),this.nextToken=o,a}parseExpression(e,o){for(var a=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(Parser.endOfExpression.indexOf(s.text)!==-1||o&&s.text===o||e&&functions[s.text]&&functions[s.text].infix)break;var l=this.parseAtom(o);if(l){if(l.type==="internal")continue}else break;a.push(l)}return this.mode==="text"&&this.formLigatures(a),this.handleInfixNodes(a)}handleInfixNodes(e){for(var o=-1,a,s=0;s<e.length;s++)if(e[s].type==="infix"){if(o!==-1)throw new ParseError("only one infix operator per group",e[s].token);o=s,a=e[s].replaceWith}if(o!==-1&&a){var l,c,d=e.slice(0,o),u=e.slice(o+1);d.length===1&&d[0].type==="ordgroup"?l=d[0]:l={type:"ordgroup",mode:this.mode,body:d},u.length===1&&u[0].type==="ordgroup"?c=u[0]:c={type:"ordgroup",mode:this.mode,body:u};var f;return a==="\\\\abovefrac"?f=this.callFunction(a,[l,e[o],c],[]):f=this.callFunction(a,[l,c],[]),[f]}else return e}handleSupSubscript(e){var o=this.fetch(),a=o.text;this.consume(),this.consumeSpaces();var s=this.parseGroup(e);if(!s)throw new ParseError("Expected group after '"+a+"'",o);return s}formatUnsupportedCmd(e){for(var o=[],a=0;a<e.length;a++)o.push({type:"textord",mode:"text",text:e[a]});var s={type:"text",mode:this.mode,body:o},l={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return l}parseAtom(e){var o=this.parseGroup("atom",e);if(this.mode==="text")return o;for(var a,s;;){this.consumeSpaces();var l=this.fetch();if(l.text==="\\limits"||l.text==="\\nolimits"){if(o&&o.type==="op"){var c=l.text==="\\limits";o.limits=c,o.alwaysHandleSupSub=!0}else if(o&&o.type==="operatorname")o.alwaysHandleSupSub&&(o.limits=l.text==="\\limits");else throw new ParseError("Limit controls must follow a math operator",l);this.consume()}else if(l.text==="^"){if(a)throw new ParseError("Double superscript",l);a=this.handleSupSubscript("superscript")}else if(l.text==="_"){if(s)throw new ParseError("Double subscript",l);s=this.handleSupSubscript("subscript")}else if(l.text==="'"){if(a)throw new ParseError("Double superscript",l);var d={type:"textord",mode:this.mode,text:"\\prime"},u=[d];for(this.consume();this.fetch().text==="'";)u.push(d),this.consume();this.fetch().text==="^"&&u.push(this.handleSupSubscript("superscript")),a={type:"ordgroup",mode:this.mode,body:u}}else if(uSubsAndSups[l.text]){var f=unicodeSubRegEx.test(l.text),v=[];for(v.push(new Token(uSubsAndSups[l.text])),this.consume();;){var b=this.fetch().text;if(!uSubsAndSups[b]||unicodeSubRegEx.test(b)!==f)break;v.unshift(new Token(uSubsAndSups[b])),this.consume()}var k=this.subparse(v);f?s={type:"ordgroup",mode:"math",body:k}:a={type:"ordgroup",mode:"math",body:k}}else break}return a||s?{type:"supsub",mode:this.mode,base:o,sup:a,sub:s}:o}parseFunction(e,o){var a=this.fetch(),s=a.text,l=functions[s];if(!l)return null;if(this.consume(),o&&o!=="atom"&&!l.allowedInArgument)throw new ParseError("Got function '"+s+"' with no arguments"+(o?" as "+o:""),a);if(this.mode==="text"&&!l.allowedInText)throw new ParseError("Can't use function '"+s+"' in text mode",a);if(this.mode==="math"&&l.allowedInMath===!1)throw new ParseError("Can't use function '"+s+"' in math mode",a);var{args:c,optArgs:d}=this.parseArguments(s,l);return this.callFunction(s,c,d,a,e)}callFunction(e,o,a,s,l){var c={funcName:e,parser:this,token:s,breakOnTokenText:l},d=functions[e];if(d&&d.handler)return d.handler(c,o,a);throw new ParseError("No function handler for "+e)}parseArguments(e,o){var a=o.numArgs+o.numOptionalArgs;if(a===0)return{args:[],optArgs:[]};for(var s=[],l=[],c=0;c<a;c++){var d=o.argTypes&&o.argTypes[c],u=c<o.numOptionalArgs;(o.primitive&&d==null||o.type==="sqrt"&&c===1&&l[0]==null)&&(d="primitive");var f=this.parseGroupOfType("argument to '"+e+"'",d,u);if(u)l.push(f);else if(f!=null)s.push(f);else throw new ParseError("Null argument, please report this as a bug")}return{args:s,optArgs:l}}parseGroupOfType(e,o,a){switch(o){case"color":return this.parseColorGroup(a);case"size":return this.parseSizeGroup(a);case"url":return this.parseUrlGroup(a);case"math":case"text":return this.parseArgumentGroup(a,o);case"hbox":{var s=this.parseArgumentGroup(a,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var l=this.parseStringGroup("raw",a);return l!=null?{type:"raw",mode:"text",string:l.text}:null}case"primitive":{if(a)throw new ParseError("A primitive argument cannot be optional");var c=this.parseGroup(e);if(c==null)throw new ParseError("Expected group as "+e,this.fetch());return c}case"original":case null:case void 0:return this.parseArgumentGroup(a);default:throw new ParseError("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,o){var a=this.gullet.scanArgument(o);if(a==null)return null;for(var s="",l;(l=this.fetch()).text!=="EOF";)s+=l.text,this.consume();return this.consume(),a.text=s,a}parseRegexGroup(e,o){for(var a=this.fetch(),s=a,l="",c;(c=this.fetch()).text!=="EOF"&&e.test(l+c.text);)s=c,l+=s.text,this.consume();if(l==="")throw new ParseError("Invalid "+o+": '"+a.text+"'",a);return a.range(s,l)}parseColorGroup(e){var o=this.parseStringGroup("color",e);if(o==null)return null;var a=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(o.text);if(!a)throw new ParseError("Invalid color: '"+o.text+"'",o);var s=a[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(e){var o,a=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?o=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):o=this.parseStringGroup("size",e),!o)return null;!e&&o.text.length===0&&(o.text="0pt",a=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(o.text);if(!s)throw new ParseError("Invalid size: '"+o.text+"'",o);var l={number:+(s[1]+s[2]),unit:s[3]};if(!validUnit(l))throw new ParseError("Invalid unit: '"+l.unit+"'",o);return{type:"size",mode:this.mode,value:l,isBlank:a}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var o=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),o==null)return null;var a=o.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:a}}parseArgumentGroup(e,o){var a=this.gullet.scanArgument(e);if(a==null)return null;var s=this.mode;o&&this.switchMode(o),this.gullet.beginGroup();var l=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var c={type:"ordgroup",mode:this.mode,loc:a.loc,body:l};return o&&this.switchMode(s),c}parseGroup(e,o){var a=this.fetch(),s=a.text,l;if(s==="{"||s==="\\begingroup"){this.consume();var c=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var d=this.parseExpression(!1,c),u=this.fetch();this.expect(c),this.gullet.endGroup(),l={type:"ordgroup",mode:this.mode,loc:SourceLocation.range(a,u),body:d,semisimple:s==="\\begingroup"||void 0}}else if(l=this.parseFunction(o,e)||this.parseSymbol(),l==null&&s[0]==="\\"&&!implicitCommands.hasOwnProperty(s)){if(this.settings.throwOnError)throw new ParseError("Undefined control sequence: "+s,a);l=this.formatUnsupportedCmd(s),this.consume()}return l}formLigatures(e){for(var o=e.length-1,a=0;a<o;++a){var s=e[a],l=s.text;l==="-"&&e[a+1].text==="-"&&(a+1<o&&e[a+2].text==="-"?(e.splice(a,3,{type:"textord",mode:"text",loc:SourceLocation.range(s,e[a+2]),text:"---"}),o-=2):(e.splice(a,2,{type:"textord",mode:"text",loc:SourceLocation.range(s,e[a+1]),text:"--"}),o-=1)),(l==="'"||l==="`")&&e[a+1].text===l&&(e.splice(a,2,{type:"textord",mode:"text",loc:SourceLocation.range(s,e[a+1]),text:l+l}),o-=1)}}parseSymbol(){var e=this.fetch(),o=e.text;if(/^\\verb[^a-zA-Z]/.test(o)){this.consume();var a=o.slice(5),s=a.charAt(0)==="*";if(s&&(a=a.slice(1)),a.length<2||a.charAt(0)!==a.slice(-1))throw new ParseError(`\\verb assertion failed --
                    please report what input caused this bug`);return a=a.slice(1,-1),{type:"verb",mode:"text",body:a,star:s}}unicodeSymbols.hasOwnProperty(o[0])&&!symbols[this.mode][o[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+o[0]+'" used in math mode',e),o=unicodeSymbols[o[0]]+o.slice(1));var l=combiningDiacriticalMarksEndRegex.exec(o);l&&(o=o.substring(0,l.index),o==="i"?o="\u0131":o==="j"&&(o="\u0237"));var c;if(symbols[this.mode][o]){this.settings.strict&&this.mode==="math"&&extraLatin.indexOf(o)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+o[0]+'" used in math mode',e);var d=symbols[this.mode][o].group,u=SourceLocation.range(e),f;if(ATOMS.hasOwnProperty(d)){var v=d;f={type:"atom",mode:this.mode,family:v,loc:u,text:o}}else f={type:d,mode:this.mode,loc:u,text:o};c=f}else if(o.charCodeAt(0)>=128)this.settings.strict&&(supportedCodepoint(o.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+o[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+o[0]+'"'+(" ("+o.charCodeAt(0)+")"),e)),c={type:"textord",mode:"text",loc:SourceLocation.range(e),text:o};else return null;if(this.consume(),l)for(var b=0;b<l[0].length;b++){var k=l[0][b];if(!unicodeAccents[k])throw new ParseError("Unknown accent ' "+k+"'",e);var x=unicodeAccents[k][this.mode]||unicodeAccents[k].text;if(!x)throw new ParseError("Accent "+k+" unsupported in "+this.mode+" mode",e);c={type:"accent",mode:this.mode,loc:SourceLocation.range(e),label:x,isStretchy:!1,isShifty:!0,base:c}}return c}}Parser.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var parseTree=function n(e,o){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var a=new Parser(e,o);delete a.gullet.macros.current["\\df@tag"];var s=a.parse();if(delete a.gullet.macros.current["\\current@color"],delete a.gullet.macros.current["\\color"],a.gullet.macros.get("\\df@tag")){if(!o.displayMode)throw new ParseError("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:a.subparse([new Token("\\df@tag")])}]}return s},render=function n(e,o,a){o.textContent="";var s=renderToDomTree(e,a).toNode();o.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),render=function(){throw new ParseError("KaTeX doesn't work in quirks mode.")});var renderToString=function n(e,o){var a=renderToDomTree(e,o).toMarkup();return a},generateParseTree=function n(e,o){var a=new Settings(o);return parseTree(e,a)},renderError=function n(e,o,a){if(a.throwOnError||!(e instanceof ParseError))throw e;var s=buildCommon.makeSpan(["katex-error"],[new SymbolNode(o)]);return s.setAttribute("title",e.toString()),s.setAttribute("style","color:"+a.errorColor),s},renderToDomTree=function n(e,o){var a=new Settings(o);try{var s=parseTree(e,a);return buildTree(s,e,a)}catch(l){return renderError(l,e,a)}},renderToHTMLTree=function n(e,o){var a=new Settings(o);try{var s=parseTree(e,a);return buildHTMLTree(s,e,a)}catch(l){return renderError(l,e,a)}},version="0.16.19",__domTree={Span,Anchor,SymbolNode,SvgNode,PathNode,LineNode},katex={version,render,renderToString,ParseError,SETTINGS_SCHEMA,__parse:generateParseTree,__renderToDomTree:renderToDomTree,__renderToHTMLTree:renderToHTMLTree,__setFontMetrics:setFontMetrics,__defineSymbol:defineSymbol,__defineFunction:defineFunction,__defineMacro:defineMacro,__domTree};const Ht=class Ht{constructor(e,o,a,s){Dt(this,"dom");Dt(this,"pmView");Dt(this,"getPos");Dt(this,"katexContainer");Dt(this,"ctx");Dt(this,"onBlur",e=>{this.deselect()});Dt(this,"src","");this.pmView=o,this.getPos=a,this.dom=document.createElement("span"),this.ctx=s;const l=e.attrs.src;this.src=l,this.katexContainer=document.createElement("span"),this.katexContainer.classList.add(Ht.KATEX_CONTAINER_CLASS),this.renderEquation(),this.dom.append(this.katexContainer),this.katexContainer.addEventListener("click",()=>{this.showMathEditor()})}renderEquation(){this.src.trim().length>0?(katex.render(this.src,this.katexContainer,Ht.KATEX_RENDER_OPTION),this.katexContainer.classList.remove("empty")):(this.katexContainer.textContent="EMPTY EQUATION",this.katexContainer.classList.add("empty"))}showMathEditor(){const e=this.pmView.state.doc.nodeAt(this.getPos());if(!e)return;const o=e.attrs.src;this.ctx.openFloatingMathInput(this.katexContainer,o,a=>{this.src=a,this.renderEquation()},()=>this.skipLeft(),()=>this.skipRight(),()=>this.skipRight(),()=>this.deleteThisNode())}syncToProseMirror(){const e=this.getPos(),o=this.pmView.state.schema.nodes.mathInline.create({src:this.src}),a=this.pmView.state.tr.replaceRangeWith(e,e+1,o);return a.setSelection(NodeSelection.create(a.doc,e)),a}skipRight(){const e=this.getPos(),o=this.syncToProseMirror();let a;try{a=TextSelection.create(o.doc,e+1)}catch{a=AllSelection.atEnd(o.doc)}o.setSelection(a),this.pmView.dispatch(o),this.pmView.focus()}skipLeft(){const e=this.getPos(),o=this.syncToProseMirror();let a;try{a=TextSelection.create(o.doc,e-1)}catch{a=AllSelection.atStart(o.doc)}o.setSelection(a),this.pmView.dispatch(o),this.pmView.focus()}deleteThisNode(){const e=this.getPos(),o=NodeSelection.create(this.pmView.state.doc,e),a=this.pmView.state.tr.setSelection(o);a.deleteSelection(),this.pmView.dispatch(a),this.pmView.focus()}stopEvent(){return!0}ignoreMutation(){return!1}selectNode(){this.showMathEditor()}deselect(){}destroy(){this.katexContainer.innerHTML="",this.katexContainer.remove()}};Dt(Ht,"KATEX_RENDER_OPTION",{displayMode:!1,throwOnError:!1}),Dt(Ht,"KATEX_CONTAINER_CLASS","math-inline--katex");let MathInlineKatex=Ht;const mkKeymapPlugin=n=>{const e=n.keymapContext;if(!e)throw new Error("Cannot find keymap context");const o=computed(()=>generateKeydownHandler(e.prosemirrorKeymap.value,a=>[a.state,a.dispatch,a],(a,s)=>s));return new Plugin({props:{handleKeyDown:(a,s)=>{o.value(a,s)}}})},generateImageName=(n,e)=>`${n}__${nanoid()}.${e}`,mkPasteImagePlugin=n=>{const e=useTaskQueue(),o=n.imagesContext,a=n.lastFocusContext,s=n.pathsContext,l=n.blocksContext;return new Plugin({props:{handlePaste(c,d,u){var B;if(!o||!a||!s||!l)return!1;const f=a.lastFocusedBlockTree.value,v=a.lastFocusedDiId.value,b=v?f==null?void 0:f.getDi(v):null;if(!f||!v||!b||!DI_FILTERS.isBlockDi(b))return!1;const k=b.block.id;let x=null,_=null;const E=(B=d.clipboardData)==null?void 0:B.items;if(!(!E||E.length==0)){for(let M=0;M<E.length;M++){const V=E[M],F=V.type.match(/image\/([a-z]+)/);F&&(x=F[1],_=V.getAsFile())}if(x&&_){const M=generateImageName(_.name,x),V=[BLOCK_CONTENT_TYPES.IMAGE,M,"left",null,null,[]];let F=null;c.state.doc.content.size==0?(F=k,e.addTask(()=>{l.blockEditor.changeBlockContent({blockId:k,content:V})})):e.addTask(()=>{const I=l.blockEditor,{newNormalBlockId:L}=I.insertNormalBlock({pos:{baseBlockId:k,offset:1},content:V})??{};F=L??null}),F&&o.uploadImage(_,M)}}}}})},blockTags={ADDRESS:!0,ARTICLE:!0,ASIDE:!0,BLOCKQUOTE:!0,BODY:!0,CANVAS:!0,DD:!0,DIV:!0,DL:!0,FIELDSET:!0,FIGCAPTION:!0,FIGURE:!0,FOOTER:!0,FORM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HEADER:!0,HGROUP:!0,HR:!0,LI:!0,NOSCRIPT:!0,OL:!0,OUTPUT:!0,P:!0,PRE:!0,SECTION:!0,TABLE:!0,TFOOT:!0,UL:!0},ignoreTags={HEAD:!0,NOSCRIPT:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,TITLE:!0};function parseHtml(n,e){const o=new DOMParser().parseFromString(e,"text/html"),a=[],s={},l=DOMParser$1.fromSchema(n);function c(u,f,v){let b=l.parse(u);if(b.content.size===0)return;const k=[],x=linkify(b.content,k),_=Slice.maxOpen(x);b=b.replace(0,b.content.size,_);const E=nanoid();s[E]={id:E,content:[BLOCK_CONTENT_TYPES.TEXT,b.toJSON()],children:[],parentId:v},f.push(s[E])}function d(u,f,v){if(u instanceof HTMLOListElement||u instanceof HTMLUListElement){const b=f.length===0?f:f[f.length-1].children,k=f.length===0?v:f[f.length-1].id;for(const x of u.childNodes)d(x,b,k)}else if(u instanceof HTMLElement&&blockTags[u.tagName]){const b=[...u.childNodes.values()];for(let k=0;k<b.length;k++){let x=k;for(;x<b.length;x++){const _=b[x];if(_ instanceof HTMLElement&&blockTags[_.tagName])break}if(x>k){const _=document.createElement("div");_.append(...b.slice(k,x)),c(_,f,v),_.remove()}x<b.length&&d(b[x],f,v),k=x}}else{if(u instanceof HTMLElement&&ignoreTags[u.tagName])return;c(u,f,v)}}return d(o.body,a,void 0),[a,s]}const PingSchema={request:z.object({}),result:z.object({})},FetchWebpageTitleSchema={request:z.object({webpageUrl:z.string()}),result:z.object({title:z.string()})},ping=usePostApi("/ping",PingSchema.request,PingSchema.result),fetchWebpageTitle=usePostApi("/fetch-webpage-title",FetchWebpageTitleSchema.request,FetchWebpageTitleSchema.result),hrefToTitle=(n,e)=>{const o=[];e.state.doc.descendants((a,s)=>{const l=n.marks.link.isInSet(a.marks);l&&o.push(l.attrs.href)});for(const a of o)fetchWebpageTitle({webpageUrl:a}).then(s=>{if(!s.success)return;const l=s.data.title;if(!l||e.isDestroyed)return;let c=null;if(e.state.doc.descendants((v,b)=>{if(c)return!1;const k=n.marks.link.isInSet(v.marks);if(k&&k.attrs.href===a)return c={node:v,pos:b},!1}),!c)return;const d=n.marks.link.create({href:a}),u=n.text(l,[d]),f=e.state.tr.replaceWith(c.pos,c.pos+c.node.nodeSize,u);e.dispatch(f)})},TOO_LARGE_NODE_COUNT=1e3,TOO_LARGE_CHAR_COUNT=1e4,mkPasteTextPlugin=n=>{var s,l;const e=n.lastFocusContext,o=(s=n.blocksContext)==null?void 0:s.blocksManager,a=(l=n.blocksContext)==null?void 0:l.blockEditor;return new Plugin({props:{handlePaste(c,d){var B,M;if(!e||!o||!a)return!1;d.preventDefault(),d.stopImmediatePropagation();const u=useTaskQueue(),f=e.lastFocusedBlockTree.value,v=e.lastFocusedDiId.value,b=v?f==null?void 0:f.getDi(v):null;if(!f||!v||!b||!DI_FILTERS.isBlockDi(b))return!1;const k=c.state.doc.textContent.trim()==="",x=b.block.id,_=n.getSchema(),E=(B=d.clipboardData)==null?void 0:B.getData("text/html");if(E){const[V,F]=parseHtml(_,E);if(V.length===0)return!1;if(Object.keys(F).length>TOO_LARGE_NODE_COUNT)return n.pasteDialogContext&&(n.pasteDialogContext.open.value=!0),!0;if(Object.keys(F).length===1){const I=Object.values(F)[0];if(I.content[0]===BLOCK_CONTENT_TYPES.TEXT){const L=Node$1.fromJSON(_,I.content[1]),U=c.state.tr.replaceSelectionWith(L);return c.dispatch(U),hrefToTitle(_,c),!0}}return u.addTask(async()=>{const I=o.createBlockTransaction({type:"ui"});if(Object.values(F).forEach(L=>{L.parentId!=null&&I.addBlock({type:"normalBlock",id:L.id,parentId:L.parentId,childrenIds:L.children.map(U=>U.id),fold:!1,content:L.content,metadata:{}})}),a.insertNormalBlocks({pos:{baseBlockId:x,offset:1},blocks:V.map(L=>({id:L.id,content:L.content,childrenIds:L.children.map(U=>U.id)})),tr:I,commit:!1}),k&&I.deleteBlock(x),I.commit(),f){await f.nextUpdate();const L=V[V.length-1].id;if(L){const U=f.findDi(Z=>Z.type==="basic-block"&&Z.block.id===L);U&&(f.focusDi(U.itemId),f.moveCursorToTheEnd(U.itemId))}}}),hrefToTitle(_,c),!0}else{const V=(M=d.clipboardData)==null?void 0:M.getData("text/plain");if(!V)return!1;if(V.length>TOO_LARGE_CHAR_COUNT)return n.pasteDialogContext&&(n.pasteDialogContext.open.value=!0),!0;const F=V.split(/\r?\n/).filter(I=>I.trim());return F.length===0?!1:(u.addTask(async()=>{const I=o.createBlockTransaction({type:"ui"});if(F.length===1){const U=plainTextToPmNode(F[0],_),Z=c.state.tr.replaceSelectionWith(U);c.dispatch(Z),hrefToTitle(_,c);return}const{newNormalBlockIds:L}=a.insertNormalBlocks({pos:{baseBlockId:x,offset:1},blocks:F.map(U=>({content:plainTextToTextContent(U,_)})),tr:I,commit:!1})??{};if(k&&I.deleteBlock(x),I.commit(),f){await f.nextUpdate();const U=L==null?void 0:L[L.length-1];if(U){const Z=f.findDi(K=>K.type==="basic-block"&&K.block.id===U);Z&&(f.focusDi(Z.itemId),f.moveCursorToTheEnd(Z.itemId))}}hrefToTitle(_,c)}),!0)}}}})},turnToInlineCode=n=>new InputRule(/`([^`]+)`$/,(e,o)=>{const a=e.selection.anchor,s=n.getSchema(),l=s.marks.code.create({}),c=s.text(o[1],[l]),d=e.tr.replaceRangeWith(a-o[0].length+1,a,c);return d.removeStoredMark(l),d}),_sfc_main$1$=defineComponent({__name:"TextContent",props:{blockTree:{},itemId:{},block:{},readonly:{type:Boolean},highlightTerms:{},highlightRefs:{}},setup(n){const e=n,{blocksManager:o,blockEditor:a}=BlocksContext.useContext(),s=FloatingMathInputContext.useContext(),l=HistoryContext.useContext(),c=useTaskQueue(),d=shallowRef(null),u=ref(null),f={mathInline(x,_,E){return new MathInlineKatex(x,_,E,s)}},v=computed(()=>getPmSchema({pushHistoryItem:l?l.pushHistoryItem:void 0,getMainTree:e.blockTree?()=>e.blockTree:void 0,getBlockRef:o.getBlockRef})),b=({newDoc:x,oldSelection:_,newSelection:E})=>{const B=e.block.id,M=[BLOCK_CONTENT_TYPES.TEXT,x];d.value=x,c.addTask(({mergedTasks:V})=>{var L;const F=V[0],I=o.createBlockTransaction({type:"ui"});a.changeBlockContent({blockId:B,content:M,tr:I,commit:!1}),I.meta.envUndoStrategy="create",I.envInfo.onCreate={...I.envInfo.onCreate,selection:((L=F==null?void 0:F.meta)==null?void 0:L.oldSelection)??_},I.commit()},{type:"updateBlockContent"+B,delay:500,debounce:!0,meta:{oldSelection:_,newSelection:E}})},k=x=>e.readonly?[]:[inputRules({rules:[openRefSuggestions(x),turnToCodeBlock(x),turnToInlineCode(x)]}),mkKeymapPlugin(x),mkPasteImagePlugin(x),mkPasteTextPlugin(x)];return watch(()=>e.block.content,x=>{var E;if(x[0]!=BLOCK_CONTENT_TYPES.TEXT)return;const _=e.block.origin;_.type==="ui"&&((E=_.changeSources)!=null&&E.includes(e.block.id))&&d.value!==null||(d.value=x[1])},{immediate:!0}),onMounted(()=>{var x,_;if(e.itemId){const E=(x=u.value)==null?void 0:x.getEditorView();E&&((_=e.blockTree)==null||_.registerEditorView(e.itemId,E))}}),onUnmounted(()=>{var x,_;if(e.itemId){const E=(x=u.value)==null?void 0:x.getEditorView();E&&((_=e.blockTree)==null||_.unregisterEditorView(e.itemId,E),E.destroy())}}),(x,_)=>(openBlock(),createBlock(_sfc_main$20,{class:"text-content block-content",ref_key:"pmWrapper",ref:u,doc:d.value,"onUpdate:doc":_[0]||(_[0]=E=>d.value=E),"item-id":x.itemId,"block-tree":x.blockTree,schema:v.value,readonly:x.readonly,"plugins-builder":k,"disable-spellcheck-when-blur":!0,"on-doc-changed":b,"node-views":f,"highlight-terms":x.highlightTerms,"highlight-refs":x.highlightRefs},null,8,["doc","item-id","block-tree","schema","readonly","highlight-terms","highlight-refs"]))}}),_sfc_main$1_=defineComponent({__name:"Popover",props:{defaultOpen:{type:Boolean},open:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(n,{emit:e}){const o=xe(n,e);return(a,s)=>(openBlock(),createBlock(unref(ys),normalizeProps(guardReactiveProps(unref(o))),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),_sfc_main$1Z=defineComponent({inheritAttrs:!1,__name:"PopoverContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{default:4},align:{default:"center"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=computed(()=>{const{class:c,...d}=o;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(bs),{style:{backgroundColor:"red"}},{default:withCtx(()=>[createVNode(unref(ws),mergeProps({...unref(l),...c.$attrs},{class:unref(cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_sfc_main$1Y=defineComponent({__name:"PopoverTrigger",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(gs),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_sfc_main$1X=defineComponent({__name:"Toast",props:{class:{},variant:{},onOpenChange:{type:Function},defaultOpen:{type:Boolean},forceMount:{type:Boolean},type:{},open:{type:Boolean},duration:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(n,{emit:e}){const o=n,a=e,s=computed(()=>{const{class:c,...d}=o;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(Bg),mergeProps(unref(l),{class:unref(cn)(unref(toastVariants)({variant:c.variant}),o.class),"onUpdate:open":c.onOpenChange}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class","onUpdate:open"]))}}),_sfc_main$1W=defineComponent({__name:"ToastAction",props:{altText:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Tg),mergeProps(o.value,{class:unref(cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$1V=defineComponent({__name:"ToastClose",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(tv),mergeProps(o.value,{class:unref(cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e.class)}),{default:withCtx(()=>[createVNode(unref(X),{class:"h-4 w-4"})]),_:1},16,["class"]))}}),_sfc_main$1U=defineComponent({__name:"ToastDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Og),mergeProps({class:unref(cn)("text-sm opacity-90",e.class)},o.value),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6,actionTypes={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let count=0;function genId(){return count=(count+1)%Number.MAX_VALUE,count.toString()}const toastTimeouts=new Map;function addToRemoveQueue(n){if(toastTimeouts.has(n))return;const e=setTimeout(()=>{toastTimeouts.delete(n),dispatch({type:actionTypes.REMOVE_TOAST,toastId:n})},TOAST_REMOVE_DELAY);toastTimeouts.set(n,e)}const state=ref({toasts:[]});function dispatch(n){switch(n.type){case actionTypes.ADD_TOAST:state.value.toasts=[n.toast,...state.value.toasts].slice(0,TOAST_LIMIT);break;case actionTypes.UPDATE_TOAST:state.value.toasts=state.value.toasts.map(e=>e.id===n.toast.id?{...e,...n.toast}:e);break;case actionTypes.DISMISS_TOAST:{const{toastId:e}=n;e?addToRemoveQueue(e):state.value.toasts.forEach(o=>{addToRemoveQueue(o.id)}),state.value.toasts=state.value.toasts.map(o=>o.id===e||e===void 0?{...o,open:!1}:o);break}case actionTypes.REMOVE_TOAST:n.toastId===void 0?state.value.toasts=[]:state.value.toasts=state.value.toasts.filter(e=>e.id!==n.toastId);break}}const useToast=()=>({toasts:computed(()=>state.value.toasts),toast,dismiss:n=>dispatch({type:actionTypes.DISMISS_TOAST,toastId:n})});function toast(n){const e=genId(),o=s=>dispatch({type:actionTypes.UPDATE_TOAST,toast:{...s,id:e}}),a=()=>dispatch({type:actionTypes.DISMISS_TOAST,toastId:e});return dispatch({type:actionTypes.ADD_TOAST,toast:{...n,id:e,open:!0,onOpenChange:s=>{s||a()}}}),{id:e,dismiss:a,update:o}}const _hoisted_1$H={class:"grid gap-1"},_sfc_main$1T=defineComponent({__name:"Toaster",setup(n){const{toasts:e}=useToast();return(o,a)=>(openBlock(),createBlock(unref(_sfc_main$1S),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(e),s=>(openBlock(),createBlock(unref(_sfc_main$1X),mergeProps({key:s.id,ref_for:!0},s),{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$H,[s.title?(openBlock(),createBlock(unref(_sfc_main$1R),{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString$1(s.title),1)]),_:2},1024)):createCommentVNode("",!0),s.description?(openBlock(),createElementBlock(Fragment$1,{key:1},[isVNode$1(s.description)?(openBlock(),createBlock(unref(_sfc_main$1U),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(s.description)))]),_:2},1024)):(openBlock(),createBlock(unref(_sfc_main$1U),{key:1},{default:withCtx(()=>[createTextVNode(toDisplayString$1(s.description),1)]),_:2},1024))],64)):createCommentVNode("",!0),createVNode(unref(_sfc_main$1V))]),(openBlock(),createBlock(resolveDynamicComponent(s.action)))]),_:2},1040))),128)),createVNode(unref(_sfc_main$1Q))]),_:1}))}}),_sfc_main$1S=defineComponent({__name:"ToastProvider",props:{label:{},duration:{},swipeDirection:{},swipeThreshold:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref($g),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_sfc_main$1R=defineComponent({__name:"ToastTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Ag),mergeProps(o.value,{class:unref(cn)("text-sm font-semibold",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$1Q=defineComponent({__name:"ToastViewport",props:{hotkey:{},label:{type:[String,Function]},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Rg),mergeProps(o.value,{class:unref(cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e.class)}),null,16,["class"]))}}),toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[--radix-toast-swipe-end-x] data-[swipe=move]:translate-x-[--radix-toast-swipe-move-x] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),BlockMoverContext=createContext(()=>{const{blocksManager:n,blockEditor:e}=BlocksContext.useContext(),{lastFocusedBlockTree:o,lastFocusedDiId:a}=LastFocusContext.useContext(),{search:s}=IndexContext.useContext(),l=ref(null),c=computed({get:()=>l.value!==null,set:L=>!L&&(l.value=null)}),d=ref(""),u=ref(0),f=ref([]),v=ref(!1),{toast:b}=useToast(),{t:k}=useI18n(),x="block-mover-content";let _=!1;const E=useDebounceFn(()=>{if(!d.value||d.value.trim().length==0){f.value=[];return}const L=s(d.value);f.value=L.slice(0,100).map(U=>n.getBlockRef(U)).filter(U=>{const Z=U.value;return Z!=null&&Z.content[0]===BLOCK_CONTENT_TYPES.TEXT}),u.value=0},100),B=(L,U=500)=>(v.value=!0,setTimeout(()=>v.value=!1,U),L()),M=L=>{if(L==null)return;const U=o.value,Z=a.value,K=Z?U==null?void 0:U.getDi(Z):null;if(!U||!Z||!K||!DI_FILTERS.isBlockDi(K))return;const j=K.block.id,W=useTaskQueue(),Y={parentId:L,childIndex:"last-space"};W.addTask(async()=>{e!=null&&(_&&e.insertNormalBlock({pos:{baseBlockId:j,offset:0},content:blockRefToTextContent(j)}),e.moveBlock({blockId:j,pos:Y}),b({title:k("kbView.blockMover.moveSuccess",{count:1}),action:h(_sfc_main$1W,{altText:k("kbView.blockMover.focusMovedBlock"),onClick:G=>{G.stopPropagation(),U.focusBlock(j,{highlight:!0,expandIfFold:!0})}},{default:()=>k("kbView.blockMover.focusMovedBlock")})}),l.value=null)})},V=(L,U={})=>{d.value=U.initQuery??"",_=U.leaveRef??!1,U.leaveMirror,u.value=0,l.value=L},F=()=>{setTimeout(()=>{const L=document.body.querySelector(`.${x} .focus`);L instanceof HTMLElement&&L.scrollIntoView({block:"nearest"})})},I=generateKeydownHandlerSimple({Escape:{run:L=>L.isComposing||L.keyCode===229?!1:(l.value=null,M(null),!0),preventDefault:!0,stopPropagation:!0},Enter:{run:L=>{var Z,K;if(L.isComposing||L.keyCode===229)return!1;const U=(K=(Z=f.value[u.value])==null?void 0:Z.value)==null?void 0:K.id;return U!=null&&M(U),!0},preventDefault:!0,stopPropagation:!0},Backspace:{run:L=>L.isComposing||L.keyCode===229?!1:d.value.length==0?(M(null),!0):!1,preventDefault:!0,stopPropagation:!0},ArrowUp:{run:L=>L.isComposing||L.keyCode===229?!1:B(()=>(u.value>0?u.value--:u.value=f.value.length-1,F(),!0)),preventDefault:!0,stopPropagation:!0},ArrowDown:{run:L=>L.isComposing||L.keyCode===229?!1:B(()=>(u.value<f.value.length-1?u.value++:u.value=0,F(),!0)),preventDefault:!0,stopPropagation:!0},Home:{run:L=>L.isComposing||L.keyCode===229?!1:B(()=>(u.value=0,F(),!0)),preventDefault:!0,stopPropagation:!0},End:{run:L=>L.isComposing||L.keyCode===229?!1:B(()=>(u.value=f.value.length-1,F(),!0)),preventDefault:!0,stopPropagation:!0}});return{showPos:l,open:c,query:d,cb:M,focusItemIndex:u,suggestions:f,suppressMouseOver:v,updateSuggestions:E,withScrollSuppressed:B,openBlockMover:V,handleKeydown:I,contentClass:x}}),calcPopoverPos=(n,e,o,a,s={})=>{const l=s.offset??(v=>v),c=s.minMargin??20,d=window.innerWidth,u=window.innerHeight,f=l({leftDown:{x:o-n,y:a},leftUp:{x:o-n,y:a-e},rightDown:{x:o,y:a},rightUp:{x:o,y:a-e}});for(const v of["leftDown","leftUp"])f[v].x<c&&(f[v].x=c);for(const v of["rightDown","rightUp"])f[v].x+n>d-c&&(f[v].x=d-c-n);for(const v of["leftUp","rightUp"])f[v].y<c&&(f[v].y=c);for(const v of["leftDown","rightDown"])f[v].y+e>u-c&&(f[v].y=u-c-e);if(s.avoidColideWith){const v=s.avoidColideWith.getBoundingClientRect(),b=s.minCollisionDist??10;for(const k of["leftDown","leftUp","rightDown","rightUp"]){const x=f[k];x.x<v.right+b&&x.x+n>v.left-b&&x.y<v.bottom+b&&x.y+e>v.top-b&&(x.x<v.left?x.x=Math.max(v.left-b-n,c):x.x=Math.min(v.right+b,d-c-n),x.y<v.top?x.y=Math.max(v.top-b-e,c):x.y=Math.min(v.bottom+b,u-c-e))}}return f},clip=(n,e,o)=>(e>o&&([e,o]=[o,e]),n<e?e:n>o?o:n),_hoisted_1$G={class:"relative px-1"},_hoisted_2$n={class:"my-2 max-h-[240px] overflow-y-auto px-1"},_hoisted_3$h=["onMouseover"],_hoisted_4$e={key:0,class:"text-center"},_hoisted_5$7={class:"text-sm text-muted-foreground"},_sfc_main$1P=defineComponent({__name:"BlockMover",setup(n){const{showPos:e,open:o,query:a,focusItemIndex:s,suggestions:l,suppressMouseOver:c,updateSuggestions:d,contentClass:u,handleKeydown:f}=BlockMoverContext.useContext(),v=computed(()=>a.value.length==0?[]:hybridTokenize(a.value,!1,1,!1)??[]);return watch(e,async()=>{if(await nextTick(),!e.value||!(document.querySelector("[data-radix-popper-content-wrapper]")instanceof HTMLElement))return;const{x:b,y:k}=e.value,x=calcPopoverPos(300,300,b,k,{offset:_=>(_.leftDown.y+=30,_.rightDown.y+=30,_)});document.body.style.setProperty("--popover-x",`${x.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${x.rightDown.y}px`)}),(b,k)=>(openBlock(),createBlock(unref(_sfc_main$1_),{open:unref(o),"onUpdate:open":k[2]||(k[2]=x=>isRef(o)?o.value=x:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1Z),{class:normalizeClass(`${unref(u)} py-2 pb-0 px-1 max-h-[300px] max-w-[300px] overflow-hidden`),"trap-focus":"",tabindex:"-1",onKeydown:unref(f)},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$G,[createVNode(unref(Search),{class:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),createVNode(unref(_sfc_main$23),{onInput:k[0]||(k[0]=x=>!x.isComposing&&unref(d)()),onCompositionend:unref(d),modelValue:unref(a),"onUpdate:modelValue":k[1]||(k[1]=x=>isRef(a)?a.value=x:null),placeholder:b.$t("kbView.blockMover.inputPlaceholder"),class:"h-[32px] pl-8 rounded-sm focus-visible:outline-none focus-visible:ring-transparent"},null,8,["onCompositionend","modelValue","placeholder"])]),createBaseVNode("div",_hoisted_2$n,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(l),(x,_)=>(openBlock(),createElementBlock("div",{key:x.value.id,class:normalizeClass(["relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 text-sm outline-none [&.focus]:bg-accent [&.focus]:text-accent-foreground",{focus:unref(s)===_}]),onMouseover:E=>!unref(c)&&(s.value=_)},[x.value.content[0]===unref(BLOCK_CONTENT_TYPES).TEXT?(openBlock(),createBlock(_sfc_main$1$,{key:0,block:x.value,readonly:!0,class:"*:cursor-default","highlight-terms":v.value},null,8,["block","highlight-terms"])):createCommentVNode("",!0)],42,_hoisted_3$h))),128)),unref(l).length===0?(openBlock(),createElementBlock("div",_hoisted_4$e,[createBaseVNode("span",_hoisted_5$7,toDisplayString$1(b.$t("kbView.refSuggestions.noSuggestions")),1)])):createCommentVNode("",!0)])]),_:1},8,["class","onKeydown"])]),_:1},8,["open"]))}}),generateDisplayItems=n=>{const{rootBlockIds:e,rootBlockLevel:o,enlargeRootBlock:a,showBacklinks:s,showPotentialLinks:l,blocksManager:c,expandedBP:d,addSidePaneHeader:u,getBacklinksContext:f,getIndexContext:v}=n,b=[];if(e.length===1){const k=e[0],x=c.getBlock(k);if(!x)return b;if(u&&a)throw new Error("addSidePaneHeader and enlargeRootBlock cannot be true at the same time");a&&b.push({type:"root-block",itemId:`root-block-${k}`,block:x}),u&&b.push({type:"side-pane-header",itemId:`side-pane-header-${k}`,blockId:k}),c.forDescendantsWithMissingBlock({rootBlockId:k,rootBlockLevel:a?-1:o,nonFoldOnly:!0,includeSelf:!a,onEachBlock:(E,B)=>{b.push({type:"basic-block",itemId:`block-${E.id}`,block:E,level:B})},onMissingBlock:(E,B,M)=>{b.push({type:"missing-block",itemId:`missing-block-${E}-${M}`,blockId:E,parentId:B,level:M})}});let _=[void 0];s&&addBacklinkItems(k,b,c,_,d,f),l&&addPotentialLinksItems(k,b,c,_,d,f,v)}else if(e.length>1){if(a)throw new Error("enlargeRootBlock is not supported when rootBlockIds.length > 1");for(const k of e){if(!c.getBlock(k))continue;u&&b.push({type:"side-pane-header",itemId:`side-pane-header-${k}`,blockId:k}),c.forDescendantsWithMissingBlock({rootBlockId:k,rootBlockLevel:o,nonFoldOnly:!0,includeSelf:!0,onEachBlock:(_,E)=>{b.push({type:"basic-block",itemId:`block-${_.id}`,block:_,level:E})},onMissingBlock:(_,E,B)=>{b.push({type:"missing-block",itemId:`missing-block-${_}-${B}`,blockId:_,parentId:E,level:B})}});let x=[void 0];s&&addBacklinkItems(k,b,c,x,d,f),l&&addPotentialLinksItems(k,b,c,x,d,f,v)}}return b},addBacklinkItems=(n,e,o,a,s,l)=>{const{getBacklinksConsideringAliases:c}=l()??{};if(!c)return;const d=c(n);if(d.size<=0)return;const u=new Set(d),f=new Set;let v;do{v=u.size;for(const b of u)f.has(b)||o.getBlockPath(b).slice(1).some(k=>u.has(k.id)&&!f.has(k.id))&&f.add(b);for(const b of f)u.delete(b)}while(u.size!==v);e.push({type:"backlink-header",itemId:`backlink-header-${n}`,blockId:n,backlinks:[...d]});for(const b of u){const k=o.getBlock(b);k&&(e.push({type:"backlink-block",itemId:`backlink-block-${b}`,block:k,refBlockId:n}),o.forDescendants({rootBlockId:b,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!1,ignore:x=>s[x.id]?"keep-self-and-descendants":"ignore-descendants",onEachBlock:(x,_)=>{e.push({type:"backlink-descendant",itemId:`backlink-descendant-${b}-${x.id}`,block:x,level:_})}}))}a[0]=d},addPotentialLinksItems=(n,e,o,a,s,l,c)=>{const{getBacklinksConsideringAliases:d}=l()??{},{search:u}=c()??{};if(!u||!d)return;const f=a[0]??d(n),v=o.getBlock(n);if(v&&v.content[0]===BLOCK_CONTENT_TYPES.TEXT){const b=u(v.ctext).map(k=>o.getBlock(k)).filter(k=>k!=null).filter(k=>!f.has(k.id)&&k.id!==n).filter(k=>k.content[0]===BLOCK_CONTENT_TYPES.TEXT);if(b.length>0){e.push({type:"potential-links-header",itemId:`potential-links-header-${n}`,blockId:n,potentialLinks:b.map(k=>k.id)});for(const k of b){const x=o.getBlock(k.id);x&&(e.push({type:"potential-links-block",itemId:`potential-links-block-${k.id}`,block:x,refBlockId:n}),o.forDescendants({rootBlockId:k.id,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!1,ignore:_=>s[_.id]?"keep-self-and-descendants":"ignore-descendants",onEachBlock:(_,E)=>{e.push({type:"potential-links-descendant",itemId:`potential-links-descendant-${_.id}`,block:_,level:E})}}))}}}},inViewport=(n,e=60,o=0)=>{const a=n.getBoundingClientRect();return a.top<window.innerHeight-o&&a.bottom>e},getHoveredElementWithClass=(n,e)=>{let o=n,a;for(;o instanceof Node;){if(o instanceof HTMLElement&&o.classList.contains(e)){a=o;break}o=o.parentNode}return a instanceof Element?a:null},mitt=()=>{const n=_mitt();return Object.assign(n,{once:(e,o)=>{const a=s=>{n.off(e,a),o(s)};n.on(e,a)}})};function vue3h(n,e,o){const{attrs:a,on:s,...l}=e;let c={};return s&&Object.entries(s).forEach(d=>{const[u,f]=d;c[`on${u[0].toUpperCase()+u.slice(1)}`]=f}),h(n,{...a,...c,...l},o)}const _h=vue3h;function vue3hChild(n,e,o){const{attrs:a,on:s,...l}=e;let c={};return s&&Object.entries(s).forEach(d=>{const[u,f]=d;c[`on${u[0].toUpperCase()+u.slice(1)}`]=f}),h(n,{...a,...c,...l},{default:()=>o})}const _hChild=vue3hChild;function vue3getSlot(n,e){var o;return(o=n.$slots)==null?void 0:o[e]}const getSlot=vue3getSlot,useObserverItem=n=>{const e=ref(null);return onMounted(()=>{n.resizeObserver&&e.value&&n.resizeObserver.observe(e.value)}),onBeforeUnmount(()=>{n.resizeObserver&&e.value&&n.resizeObserver.unobserve(e.value)}),{itemRefEl:e}},ObserverItem=defineComponent({name:"ObserverItem",props:{resizeObserver:{type:ResizeObserver,require:!0},id:{type:[String,Number],require:!0}},setup(n){return useObserverItem(n)},render(){var n;const{id:e}=this;return _h("div",{ref:"itemRefEl",attrs:{"data-id":e}},[(n=getSlot(this,"default"))==null?void 0:n()])}}),defaultProps={itemGap:0,fixed:!1,buffer:0,bufferTop:0,bufferBottom:0,scrollDistance:0,horizontal:!1,fixSelection:!1,start:0,offset:0,listStyle:"",listClass:"",itemStyle:"",itemClass:"",headerClass:"",headerStyle:"",footerClass:"",footerStyle:"",stickyHeaderClass:"",stickyHeaderStyle:"",stickyFooterClass:"",stickyFooterStyle:""};function useVirtList(n,e){const o=new Proxy(n,{get(ee,oe){var se;return(se=Reflect.get(ee,oe))!=null?se:Reflect.get(defaultProps,oe)}}),a=ref(null),s=ref(null),l=ref(null),c=ref(null),d=ref(null),u=ref(null),f=new Map,v=ref(0);let b="backward",k=!1,x=!1,_=!1,E=null;const B=shallowReactive({clientSize:0,headerSize:0,footerSize:0,stickyHeaderSize:0,stickyFooterSize:0}),M=shallowReactive({views:0,offset:0,listTotalSize:0,virtualSize:0,inViewBegin:0,inViewEnd:0,renderBegin:0,renderEnd:0,bufferTop:0,bufferBottom:0});function V(){const ee=o.horizontal?"scrollLeft":"scrollTop";return a.value?a.value[ee]:0}function F(){return B.headerSize+B.footerSize+B.stickyHeaderSize+B.stickyFooterSize}function I(){return M.listTotalSize+B.headerSize+B.footerSize+B.stickyHeaderSize+B.stickyFooterSize}function L(ee){var oe;return o.fixed?o.minSize+o.itemGap:(oe=f.get(String(ee)))!=null?oe:o.minSize+o.itemGap}function U(ee,oe){f.set(String(ee),oe)}function Z(ee){f.delete(String(ee))}function K(ee){var oe,se;if(o.fixed)return{top:(o.minSize+o.itemGap)*ee,current:o.minSize+o.itemGap,bottom:(o.minSize+o.itemGap)*(ee+1)};const{itemKey:ge}=o;let _e=B.headerSize;for(let Ee=0;Ee<=ee-1;Ee+=1){const te=L((oe=o.list[Ee])==null?void 0:oe[ge]);_e+=te}const ke=L((se=o.list[ee])==null?void 0:se[ge]);return{top:_e,current:ke,bottom:_e+ke}}function j(ee){_=!0;const oe=o.horizontal?"scrollLeft":"scrollTop";a.value&&(a.value[oe]=ee)}async function W(ee){if(ee<0)return;if(ee>=o.list.length-1){fe();return}let{top:oe}=K(ee);j(oe);const se=()=>{const{top:ge}=K(ee);if(j(ge),oe!==ge){oe=ge,E=se;return}E=null};E=se}async function Y(ee){var oe;const{top:se,bottom:ge}=K(ee),_e=V(),ke=V()+B.clientSize,Ee=L((oe=o.list[ee])==null?void 0:oe[o.itemKey]);if(se<_e&&_e<ge&&Ee<B.clientSize){j(se);return}if(se+B.stickyHeaderSize<ke&&ke<ge+B.stickyHeaderSize&&Ee<B.clientSize){j(ge-B.clientSize+B.stickyHeaderSize);return}if(se+B.stickyHeaderSize>=ke){W(ee);return}if(ge<=_e){W(ee);return}}async function G(){let ee=0;function oe(){ee+=1,j(0),setTimeout(()=>{var se;if(ee>10)return;const ge=o.horizontal?"scrollLeft":"scrollTop";((se=a==null?void 0:a.value)==null?void 0:se[ge])!==0&&oe()},3)}oe()}async function fe(){let ee=0;function oe(){ee+=1,j(I()),setTimeout(()=>{ee>10||Math.abs(Math.round(M.offset+B.clientSize)-Math.round(I()))>2&&oe()},3)}oe()}function le(ee){var oe;ee<M.inViewBegin&&(k=!0),M.inViewBegin=ee,M.inViewEnd=Math.min(ee+M.views,o.list.length-1),(oe=e==null?void 0:e.rangeUpdate)==null||oe.call(e,M.inViewBegin,M.inViewEnd)}function pe(){var ee,oe;const{views:se,offset:ge,inViewBegin:_e}=M,{itemKey:ke}=o,Ee=ge-B.headerSize;let te=_e,re=ft();if(Ee<0){le(0);return}if(b==="forward"){if(Ee>=re)return;for(let de=te-1;de>=0;de-=1){const Oe=L((ee=o.list[de])==null?void 0:ee[ke]);if(re-=Oe,re<=Ee&&Ee<re+Oe){te=de;break}}}if(b==="backward"){if(Ee<=re)return;for(let de=te;de<=o.list.length-1;de+=1){const Oe=L((oe=o.list[de])==null?void 0:oe[ke]);if(re<=Ee&&Ee<re+Oe){te=de;break}re+=Oe}k=!1}te!==M.inViewBegin&&le(te)}function ue(ee){var oe,se,ge;(oe=e==null?void 0:e.scroll)==null||oe.call(e,ee);const _e=V();_e!==M.offset&&(b=_e<M.offset?"forward":"backward",M.offset=_e,pe(),b==="forward"&&M.offset-o.scrollDistance<=0&&((se=e==null?void 0:e.toTop)==null||se.call(e,o.list[0])),b==="backward"&&Math.round(M.offset+o.scrollDistance)>=Math.round(M.listTotalSize+F()-B.clientSize)&&((ge=e==null?void 0:e.toBottom)==null||ge.call(e,o.list[o.list.length-1])))}function Ne(){const ee=Math.ceil(B.clientSize/(o.minSize+o.itemGap))+1;M.views=ee}function Ve(){Ne(),le(M.inViewBegin)}function Ze(){var ee;if(o.fixed){M.listTotalSize=(o.minSize+o.itemGap)*o.list.length;return}const{itemKey:oe}=o;let se=0;for(let ge=0;ge<=o.list.length-1;ge+=1)se+=L((ee=o.list[ge])==null?void 0:ee[oe]);M.listTotalSize=se}function We(){M.offset=0,M.listTotalSize=0,M.virtualSize=0,M.inViewBegin=0,M.inViewEnd=0,M.renderBegin=0,M.renderEnd=0,f.clear(),dt()}function ze(ee){Ze();let oe=0;ee.forEach(se=>{oe+=L(se[o.itemKey])}),Ge(),j(M.offset-oe),pe()}function qe(ee){Ze();let oe=0;ee.forEach(se=>{oe+=L(se[o.itemKey])}),Ge(),j(M.offset+oe),x=!0,_=!1,pe()}function dt(){v.value+=1}let Xe;typeof ResizeObserver<"u"&&(Xe=new ResizeObserver(ee=>{var oe;let se=0;for(const ge of ee){const _e=ge.target.dataset.id;if(_e){const ke=L(_e);let Ee=0;if(ge.borderBoxSize){const te=Array.isArray(ge.borderBoxSize)?ge.borderBoxSize[0]:ge.borderBoxSize;Ee=o.horizontal?te.inlineSize:te.blockSize}else Ee=o.horizontal?ge.contentRect.width:ge.contentRect.height;_e==="client"?(B.clientSize=Ee,Ve()):_e==="header"?B.headerSize=Ee:_e==="footer"?B.footerSize=Ee:_e==="stickyHeader"?B.stickyHeaderSize=Ee:_e==="stickyFooter"?B.stickyFooterSize=Ee:ke!==Ee&&(U(_e,Ee),se+=Ee-ke,(oe=e==null?void 0:e.itemResize)==null||oe.call(e,_e,Ee))}}M.listTotalSize+=se,E&&E(),(k||x)&&se!==0&&!_&&(k=!1,x=!1,j(M.offset+se)),_=!1}));const Ge=()=>{var ee;let oe=0;const se=M.renderBegin;for(let ge=0;ge<se;ge++)oe+=L((ee=o.list[ge])==null?void 0:ee[o.itemKey]);M.virtualSize=oe};onBeforeMount(()=>{o.bufferTop?M.bufferTop=o.bufferTop:M.bufferTop=o.buffer,o.bufferBottom?M.bufferBottom=o.bufferBottom:M.bufferBottom=o.buffer}),onMounted(()=>{a.value&&(a.value.addEventListener("scroll",ue),Xe==null||Xe.observe(a.value)),d.value&&(Xe==null||Xe.observe(d.value)),u.value&&(Xe==null||Xe.observe(u.value)),l.value&&(Xe==null||Xe.observe(l.value)),c.value&&(Xe==null||Xe.observe(c.value)),o.start?W(o.start):o.offset&&j(o.offset)}),onBeforeUnmount(()=>{a.value&&(a.value.removeEventListener("scroll",ue),Xe==null||Xe.unobserve(a.value),B.clientSize=0),d.value&&(Xe==null||Xe.unobserve(d.value),B.stickyHeaderSize=0),u.value&&(Xe==null||Xe.unobserve(u.value),B.stickyFooterSize=0),l.value&&(Xe==null||Xe.unobserve(l.value),B.headerSize=0),c.value&&(Xe==null||Xe.unobserve(c.value),B.footerSize=0)});function ft(){return M.virtualSize+Te(M.renderBegin,M.inViewBegin)}function Te(ee,oe){var se;const ge=Math.min(ee,oe),_e=Math.max(ee,oe);let ke=0;for(let Ee=ge;Ee<_e;Ee+=1)ke+=L((se=o.list[Ee])==null?void 0:se[o.itemKey]);return ke}function Ce(){return M}const we=shallowRef([]);function ce(ee,oe){const se=M.renderBegin;M.renderBegin=ee,M.renderEnd=oe,ee>se?M.virtualSize+=Te(ee,se):M.virtualSize-=Te(ee,se),we.value=o.list.slice(M.renderBegin,M.renderEnd+1),Ge()}return watch(()=>[M.inViewBegin,M.inViewEnd,v.value],(ee,oe)=>{if(ee&&oe){const[se]=ee,ge=M.renderBegin;let _e=se,ke=M.inViewEnd;if(_e=Math.max(0,_e-M.bufferTop),ke=Math.min(ke+M.bufferBottom,o.list.length-1>0?o.list.length-1:0),o==null?void 0:o.renderControl){const{begin:Ee,end:te}=o.renderControl(se,M.inViewEnd);_e=Ee,ke=te}M.renderBegin=_e,M.renderEnd=ke,_e>ge?M.virtualSize+=Te(_e,ge):M.virtualSize-=Te(_e,ge),we.value=o.list.slice(M.renderBegin,M.renderEnd+1)}},{immediate:!0}),watch(()=>o.list.length,()=>{if(o.list.length<=0){We();return}Ze(),le(M.inViewBegin),Ge(),dt()},{immediate:!0}),{props:o,renderList:we,clientRefEl:a,listRefEl:s,headerRefEl:l,footerRefEl:c,stickyHeaderRefEl:d,stickyFooterRefEl:u,reactiveData:M,slotSize:B,sizesMap:f,resizeObserver:Xe,getReactiveData:Ce,getOffset:V,getSlotSize:F,reset:We,scrollToIndex:W,manualRender:ce,scrollIntoView:Y,scrollToTop:G,scrollToBottom:fe,scrollToOffset:j,getItemSize:L,deleteItemSize:Z,deletedList2Top:ze,addedList2Top:qe,getItemPosByIndex:K,forceUpdate:dt}}const VirtList=defineComponent({name:"VirtList",emits:{scroll:n=>n,toTop:n=>n,toBottom:n=>n,itemResize:(n,e)=>!0,rangeUpdate:(n,e)=>!0},props:{list:{type:Array,default:()=>[]},itemKey:{type:[String,Number],required:!0},minSize:{type:Number,default:20,required:!0},itemGap:{type:Number,default:0},renderControl:{type:Function,default:void 0},fixed:{type:Boolean,default:!1},buffer:{type:Number,default:0},bufferTop:{type:Number,default:0},bufferBottom:{type:Number,default:0},scrollDistance:{type:Number,default:0},horizontal:{type:Boolean,default:!1},start:{type:Number,default:0},offset:{type:Number,default:0},listStyle:{type:String,default:""},listClass:{type:String,default:""},itemStyle:{type:String,default:""},itemClass:{type:String,default:""},headerClass:{type:String,default:""},headerStyle:{type:String,default:""},footerClass:{type:String,default:""},footerStyle:{type:String,default:""},stickyHeaderClass:{type:String,default:""},stickyHeaderStyle:{type:String,default:""},stickyFooterClass:{type:String,default:""},stickyFooterStyle:{type:String,default:""}},setup(n,e){return useVirtList(n,{scroll:o=>{e.emit("scroll",o)},toTop:o=>{e.emit("toTop",o)},toBottom:o=>{e.emit("toBottom",o)},itemResize:(o,a)=>{e.emit("itemResize",o,a)},rangeUpdate:(o,a)=>{e.emit("rangeUpdate",o,a)}})},render(){const{renderList:n,reactiveData:e,resizeObserver:o}=this,{itemGap:a,itemKey:s,horizontal:l,listStyle:c,listClass:d,itemStyle:u,itemClass:f,headerClass:v,headerStyle:b,footerClass:k,footerStyle:x,stickyHeaderClass:_,stickyHeaderStyle:E,stickyFooterClass:B,stickyFooterStyle:M}=this.props,V=()=>{var Y;return getSlot(this,"stickyHeader")?_h("div",{key:"slot-sticky-header",class:_,style:`position: sticky; z-index: 10; ${l?"left: 0":"top: 0;"} ${E}`,ref:"stickyHeaderRefEl",attrs:{"data-id":"stickyHeader"}},[(Y=getSlot(this,"stickyHeader"))==null?void 0:Y()]):null},F=()=>{var Y;return getSlot(this,"stickyFooter")?_h("div",{key:"slot-sticky-footer",class:B,style:`position: sticky; z-index: 10; ${l?"right: 0":"bottom: 0;"} ${M}`,ref:"stickyFooterRefEl",attrs:{"data-id":"stickyFooter"}},[(Y=getSlot(this,"stickyFooter"))==null?void 0:Y()]):null},I=()=>{var Y;return getSlot(this,"header")?_h("div",{key:"slot-header",class:v,style:b,ref:"headerRefEl",attrs:{"data-id":"header"}},[(Y=getSlot(this,"header"))==null?void 0:Y()]):null},L=()=>{var Y;return getSlot(this,"footer")?_h("div",{key:"slot-footer",class:k,style:x,ref:"footerRefEl",attrs:{"data-id":"footer"}},[(Y=getSlot(this,"footer"))==null?void 0:Y()]):null},{listTotalSize:U,virtualSize:Z,renderBegin:K}=e,j=a>0?`padding: ${a/2}px 0; `:"",W=()=>{var Y,G;const fe=[];for(let ue=0;ue<n.length;ue+=1){const Ne=n[ue];fe.push(_hChild(ObserverItem,{key:Ne[s],class:f,style:`${j}${u}`,attrs:{id:Ne[s],resizeObserver:o}},(Y=getSlot(this,"default"))==null?void 0:Y({itemData:Ne,index:K+ue})))}if(fe.length===0&&getSlot(this,"empty")){const ue=this.slotSize.clientSize-this.getSlotSize();fe.push(_h("div",{key:`slot-empty-${ue}`,style:`height: ${ue}px`},[(G=getSlot(this,"empty"))==null?void 0:G()]))}const le=l?`will-change: width; min-width: ${U}px; display: flex; ${c}`:`will-change: height; min-height: ${U}px; ${c}`,pe=l?`width: ${Z}px; will-change: width;`:`height: ${Z}px; will-change: height;`;return _h("div",{ref:"listRefEl",class:d,style:le},[_h("div",{style:pe}),fe])};return _h("div",{ref:"clientRefEl",class:"virt-list__client",style:"width: 100%; height: 100%; overflow: auto;",attrs:{"data-id":"client"}},[V(),I(),W(),L(),F()])}}),ThemeContext=createContext(()=>{const n=useColorMode();return{theme:n,toggleTheme:()=>{n.value=n.value==="dark"?"light":"dark"}}}),scriptRel="modulepreload",assetsURL=function(n,e){return new URL(n,e).href},seen={},__vitePreload=function n(e,o,a){let s=Promise.resolve();if(o&&o.length>0){const c=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));s=Promise.allSettled(o.map(f=>{if(f=assetsURL(f,a),f in seen)return;seen[f]=!0;const v=f.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(a)for(let x=c.length-1;x>=0;x--){const _=c[x];if(_.href===f&&(!v||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${b}`))return;const k=document.createElement("link");if(k.rel=v?"stylesheet":scriptRel,v||(k.as="script"),k.crossOrigin="",k.href=f,u&&k.setAttribute("nonce",u),document.head.appendChild(k),v)return new Promise((x,_)=>{k.addEventListener("load",x),k.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return s.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};function legacy(n){return new LanguageSupport(StreamLanguage.define(n))}function sql(n){return __vitePreload(()=>import("./index-uJIr_5v3.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.sql({dialect:e[n]}))}const languages=[LanguageDescription.of({name:"C",extensions:["c","h","ino"],load(){return __vitePreload(()=>import("./index-nvq9_Dk1.js"),__vite__mapDeps([2,1]),import.meta.url).then(n=>n.cpp())}}),LanguageDescription.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load(){return __vitePreload(()=>import("./index-nvq9_Dk1.js"),__vite__mapDeps([2,1]),import.meta.url).then(n=>n.cpp())}}),LanguageDescription.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load(){return sql("Cassandra")}}),LanguageDescription.of({name:"CSS",extensions:["css"],load(){return __vitePreload(()=>import("./index-Br5aj7hc.js"),__vite__mapDeps([3,1]),import.meta.url).then(n=>n.css())}}),LanguageDescription.of({name:"Go",extensions:["go"],load(){return __vitePreload(()=>import("./index-DTo6iVGa.js"),__vite__mapDeps([4,1]),import.meta.url).then(n=>n.go())}}),LanguageDescription.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load(){return __vitePreload(()=>import("./index-4OnGhKdK.js"),__vite__mapDeps([5,1,3,6]),import.meta.url).then(n=>n.html())}}),LanguageDescription.of({name:"Java",extensions:["java"],load(){return __vitePreload(()=>import("./index-CIi8RaGi.js"),__vite__mapDeps([7,1]),import.meta.url).then(n=>n.java())}}),LanguageDescription.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load(){return __vitePreload(()=>import("./index-D6xCBMFj.js"),__vite__mapDeps([6,1]),import.meta.url).then(n=>n.javascript())}}),LanguageDescription.of({name:"JSON",alias:["json5"],extensions:["json","map"],load(){return __vitePreload(()=>import("./index-BIE01zea.js"),__vite__mapDeps([8,1]),import.meta.url).then(n=>n.json())}}),LanguageDescription.of({name:"JSX",extensions:["jsx"],load(){return __vitePreload(()=>import("./index-D6xCBMFj.js"),__vite__mapDeps([6,1]),import.meta.url).then(n=>n.javascript({jsx:!0}))}}),LanguageDescription.of({name:"LESS",extensions:["less"],load(){return __vitePreload(()=>import("./index-utqMyKe9.js"),__vite__mapDeps([9,3,1]),import.meta.url).then(n=>n.less())}}),LanguageDescription.of({name:"Liquid",extensions:["liquid"],load(){return __vitePreload(()=>import("./index-DyBezXRQ.js"),__vite__mapDeps([10,5,1,3,6]),import.meta.url).then(n=>n.liquid())}}),LanguageDescription.of({name:"MariaDB SQL",load(){return sql("MariaSQL")}}),LanguageDescription.of({name:"Markdown",extensions:["md","markdown","mkd"],load(){return __vitePreload(()=>import("./index-CfzqDTdY.js"),__vite__mapDeps([11,5,1,3,6]),import.meta.url).then(n=>n.markdown())}}),LanguageDescription.of({name:"MS SQL",load(){return sql("MSSQL")}}),LanguageDescription.of({name:"MySQL",load(){return sql("MySQL")}}),LanguageDescription.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load(){return __vitePreload(()=>import("./index-DBFefFUc.js"),__vite__mapDeps([12,1,5,3,6]),import.meta.url).then(n=>n.php())}}),LanguageDescription.of({name:"PLSQL",extensions:["pls"],load(){return sql("PLSQL")}}),LanguageDescription.of({name:"PostgreSQL",load(){return sql("PostgreSQL")}}),LanguageDescription.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load(){return __vitePreload(()=>import("./index-CjCz1t3Q.js"),__vite__mapDeps([13,1]),import.meta.url).then(n=>n.python())}}),LanguageDescription.of({name:"Rust",extensions:["rs"],load(){return __vitePreload(()=>import("./index-9y3Iy9a-.js"),__vite__mapDeps([14,1]),import.meta.url).then(n=>n.rust())}}),LanguageDescription.of({name:"Sass",extensions:["sass"],load(){return __vitePreload(()=>import("./index-Dx93jm5-.js"),__vite__mapDeps([15,1,3]),import.meta.url).then(n=>n.sass({indented:!0}))}}),LanguageDescription.of({name:"SCSS",extensions:["scss"],load(){return __vitePreload(()=>import("./index-Dx93jm5-.js"),__vite__mapDeps([15,1,3]),import.meta.url).then(n=>n.sass())}}),LanguageDescription.of({name:"SQL",extensions:["sql"],load(){return sql("StandardSQL")}}),LanguageDescription.of({name:"SQLite",load(){return sql("SQLite")}}),LanguageDescription.of({name:"TSX",extensions:["tsx"],load(){return __vitePreload(()=>import("./index-D6xCBMFj.js"),__vite__mapDeps([6,1]),import.meta.url).then(n=>n.javascript({jsx:!0,typescript:!0}))}}),LanguageDescription.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load(){return __vitePreload(()=>import("./index-D6xCBMFj.js"),__vite__mapDeps([6,1]),import.meta.url).then(n=>n.javascript({typescript:!0}))}}),LanguageDescription.of({name:"WebAssembly",extensions:["wat","wast"],load(){return __vitePreload(()=>import("./index-7zPOJy-R.js"),__vite__mapDeps([16,1]),import.meta.url).then(n=>n.wast())}}),LanguageDescription.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load(){return __vitePreload(()=>import("./index-BHmW_eZ6.js"),__vite__mapDeps([17,1]),import.meta.url).then(n=>n.xml())}}),LanguageDescription.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load(){return __vitePreload(()=>import("./index-DCUeL1oy.js"),__vite__mapDeps([18,1]),import.meta.url).then(n=>n.yaml())}}),LanguageDescription.of({name:"APL",extensions:["dyalog","apl"],load(){return __vitePreload(()=>import("./apl-B4CMkyY2.js"),[],import.meta.url).then(n=>legacy(n.apl))}}),LanguageDescription.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load(){return __vitePreload(()=>import("./asciiarmor-Df11BRmG.js"),[],import.meta.url).then(n=>legacy(n.asciiArmor))}}),LanguageDescription.of({name:"ASN.1",extensions:["asn","asn1"],load(){return __vitePreload(()=>import("./asn1-CGOzndHr.js"),[],import.meta.url).then(n=>legacy(n.asn1({})))}}),LanguageDescription.of({name:"Asterisk",filename:/^extensions\.conf$/i,load(){return __vitePreload(()=>import("./asterisk-B-8jnY81.js"),[],import.meta.url).then(n=>legacy(n.asterisk))}}),LanguageDescription.of({name:"Brainfuck",extensions:["b","bf"],load(){return __vitePreload(()=>import("./brainfuck-C4LP7Hcl.js"),[],import.meta.url).then(n=>legacy(n.brainfuck))}}),LanguageDescription.of({name:"Cobol",extensions:["cob","cpy"],load(){return __vitePreload(()=>import("./cobol-_hGpxIKP.js"),[],import.meta.url).then(n=>legacy(n.cobol))}}),LanguageDescription.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(n=>legacy(n.csharp))}}),LanguageDescription.of({name:"Clojure",extensions:["clj","cljc","cljx"],load(){return __vitePreload(()=>import("./clojure-BMjYHr_A.js"),[],import.meta.url).then(n=>legacy(n.clojure))}}),LanguageDescription.of({name:"ClojureScript",extensions:["cljs"],load(){return __vitePreload(()=>import("./clojure-BMjYHr_A.js"),[],import.meta.url).then(n=>legacy(n.clojure))}}),LanguageDescription.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load(){return __vitePreload(()=>import("./css-BnMrqG3P.js"),[],import.meta.url).then(n=>legacy(n.gss))}}),LanguageDescription.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load(){return __vitePreload(()=>import("./cmake-BQqOBYOt.js"),[],import.meta.url).then(n=>legacy(n.cmake))}}),LanguageDescription.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load(){return __vitePreload(()=>import("./coffeescript-S37ZYGWr.js"),[],import.meta.url).then(n=>legacy(n.coffeeScript))}}),LanguageDescription.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load(){return __vitePreload(()=>import("./commonlisp-DBKNyK5s.js"),[],import.meta.url).then(n=>legacy(n.commonLisp))}}),LanguageDescription.of({name:"Cypher",extensions:["cyp","cypher"],load(){return __vitePreload(()=>import("./cypher-C_CwsFkJ.js"),[],import.meta.url).then(n=>legacy(n.cypher))}}),LanguageDescription.of({name:"Cython",extensions:["pyx","pxd","pxi"],load(){return __vitePreload(()=>import("./python-BuPzkPfP.js"),[],import.meta.url).then(n=>legacy(n.cython))}}),LanguageDescription.of({name:"Crystal",extensions:["cr"],load(){return __vitePreload(()=>import("./crystal-SjHAIU92.js"),[],import.meta.url).then(n=>legacy(n.crystal))}}),LanguageDescription.of({name:"D",extensions:["d"],load(){return __vitePreload(()=>import("./d-pRatUO7H.js"),[],import.meta.url).then(n=>legacy(n.d))}}),LanguageDescription.of({name:"Dart",extensions:["dart"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(n=>legacy(n.dart))}}),LanguageDescription.of({name:"diff",extensions:["diff","patch"],load(){return __vitePreload(()=>import("./diff-DbItnlRl.js"),[],import.meta.url).then(n=>legacy(n.diff))}}),LanguageDescription.of({name:"Dockerfile",filename:/^Dockerfile$/,load(){return __vitePreload(()=>import("./dockerfile-BuNIbK2j.js"),__vite__mapDeps([19,20]),import.meta.url).then(n=>legacy(n.dockerFile))}}),LanguageDescription.of({name:"DTD",extensions:["dtd"],load(){return __vitePreload(()=>import("./dtd-DF_7sFjM.js"),[],import.meta.url).then(n=>legacy(n.dtd))}}),LanguageDescription.of({name:"Dylan",extensions:["dylan","dyl","intr"],load(){return __vitePreload(()=>import("./dylan-DwRh75JA.js"),[],import.meta.url).then(n=>legacy(n.dylan))}}),LanguageDescription.of({name:"EBNF",load(){return __vitePreload(()=>import("./ebnf-CDyGwa7X.js"),[],import.meta.url).then(n=>legacy(n.ebnf))}}),LanguageDescription.of({name:"ECL",extensions:["ecl"],load(){return __vitePreload(()=>import("./ecl-Cabwm37j.js"),[],import.meta.url).then(n=>legacy(n.ecl))}}),LanguageDescription.of({name:"edn",extensions:["edn"],load(){return __vitePreload(()=>import("./clojure-BMjYHr_A.js"),[],import.meta.url).then(n=>legacy(n.clojure))}}),LanguageDescription.of({name:"Eiffel",extensions:["e"],load(){return __vitePreload(()=>import("./eiffel-CnydiIhH.js"),[],import.meta.url).then(n=>legacy(n.eiffel))}}),LanguageDescription.of({name:"Elm",extensions:["elm"],load(){return __vitePreload(()=>import("./elm-vLlmbW-K.js"),[],import.meta.url).then(n=>legacy(n.elm))}}),LanguageDescription.of({name:"Erlang",extensions:["erl"],load(){return __vitePreload(()=>import("./erlang-BNw1qcRV.js"),[],import.meta.url).then(n=>legacy(n.erlang))}}),LanguageDescription.of({name:"Esper",load(){return __vitePreload(()=>import("./sql-C4g8LzGK.js"),[],import.meta.url).then(n=>legacy(n.esper))}}),LanguageDescription.of({name:"Factor",extensions:["factor"],load(){return __vitePreload(()=>import("./factor-D8pE9siL.js"),__vite__mapDeps([21,20]),import.meta.url).then(n=>legacy(n.factor))}}),LanguageDescription.of({name:"FCL",load(){return __vitePreload(()=>import("./fcl-Kvtd6kyn.js"),[],import.meta.url).then(n=>legacy(n.fcl))}}),LanguageDescription.of({name:"Forth",extensions:["forth","fth","4th"],load(){return __vitePreload(()=>import("./forth-Ffai-XNe.js"),[],import.meta.url).then(n=>legacy(n.forth))}}),LanguageDescription.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load(){return __vitePreload(()=>import("./fortran-DYz_wnZ1.js"),[],import.meta.url).then(n=>legacy(n.fortran))}}),LanguageDescription.of({name:"F#",alias:["fsharp"],extensions:["fs"],load(){return __vitePreload(()=>import("./mllike-C_8OmSiT.js"),[],import.meta.url).then(n=>legacy(n.fSharp))}}),LanguageDescription.of({name:"Gas",extensions:["s"],load(){return __vitePreload(()=>import("./gas-Bneqetm1.js"),[],import.meta.url).then(n=>legacy(n.gas))}}),LanguageDescription.of({name:"Gherkin",extensions:["feature"],load(){return __vitePreload(()=>import("./gherkin-heZmZLOM.js"),[],import.meta.url).then(n=>legacy(n.gherkin))}}),LanguageDescription.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load(){return __vitePreload(()=>import("./groovy-D9Dt4D0W.js"),[],import.meta.url).then(n=>legacy(n.groovy))}}),LanguageDescription.of({name:"Haskell",extensions:["hs"],load(){return __vitePreload(()=>import("./haskell-BWDZoCOh.js"),[],import.meta.url).then(n=>legacy(n.haskell))}}),LanguageDescription.of({name:"Haxe",extensions:["hx"],load(){return __vitePreload(()=>import("./haxe-pv4rovob.js"),[],import.meta.url).then(n=>legacy(n.haxe))}}),LanguageDescription.of({name:"HXML",extensions:["hxml"],load(){return __vitePreload(()=>import("./haxe-pv4rovob.js"),[],import.meta.url).then(n=>legacy(n.hxml))}}),LanguageDescription.of({name:"HTTP",load(){return __vitePreload(()=>import("./http-DBlCnlav.js"),[],import.meta.url).then(n=>legacy(n.http))}}),LanguageDescription.of({name:"IDL",extensions:["pro"],load(){return __vitePreload(()=>import("./idl-BEugSyMb.js"),[],import.meta.url).then(n=>legacy(n.idl))}}),LanguageDescription.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load(){return __vitePreload(()=>import("./javascript-iSgyE4tI.js"),[],import.meta.url).then(n=>legacy(n.jsonld))}}),LanguageDescription.of({name:"Jinja2",extensions:["j2","jinja","jinja2"],load(){return __vitePreload(()=>import("./jinja2-C4DGRd-O.js"),[],import.meta.url).then(n=>legacy(n.jinja2))}}),LanguageDescription.of({name:"Julia",extensions:["jl"],load(){return __vitePreload(()=>import("./julia-DuME0IfC.js"),[],import.meta.url).then(n=>legacy(n.julia))}}),LanguageDescription.of({name:"Kotlin",extensions:["kt","kts"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(n=>legacy(n.kotlin))}}),LanguageDescription.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load(){return __vitePreload(()=>import("./livescript-BwQOo05w.js"),[],import.meta.url).then(n=>legacy(n.liveScript))}}),LanguageDescription.of({name:"Lua",extensions:["lua"],load(){return __vitePreload(()=>import("./lua-BgMRiT3U.js"),[],import.meta.url).then(n=>legacy(n.lua))}}),LanguageDescription.of({name:"mIRC",extensions:["mrc"],load(){return __vitePreload(()=>import("./mirc-0pArz5Cm.js"),[],import.meta.url).then(n=>legacy(n.mirc))}}),LanguageDescription.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load(){return __vitePreload(()=>import("./mathematica-DTrFuWx2.js"),[],import.meta.url).then(n=>legacy(n.mathematica))}}),LanguageDescription.of({name:"Modelica",extensions:["mo"],load(){return __vitePreload(()=>import("./modelica-Dc1JOy9r.js"),[],import.meta.url).then(n=>legacy(n.modelica))}}),LanguageDescription.of({name:"MUMPS",extensions:["mps"],load(){return __vitePreload(()=>import("./mumps-BT43cFF4.js"),[],import.meta.url).then(n=>legacy(n.mumps))}}),LanguageDescription.of({name:"Mbox",extensions:["mbox"],load(){return __vitePreload(()=>import("./mbox-CNhZ1qSd.js"),[],import.meta.url).then(n=>legacy(n.mbox))}}),LanguageDescription.of({name:"Nginx",filename:/nginx.*\.conf$/i,load(){return __vitePreload(()=>import("./nginx-DdIZxoE0.js"),[],import.meta.url).then(n=>legacy(n.nginx))}}),LanguageDescription.of({name:"NSIS",extensions:["nsh","nsi"],load(){return __vitePreload(()=>import("./nsis-CEAdamBV.js"),__vite__mapDeps([22,20]),import.meta.url).then(n=>legacy(n.nsis))}}),LanguageDescription.of({name:"NTriples",extensions:["nt","nq"],load(){return __vitePreload(()=>import("./ntriples-BfvgReVJ.js"),[],import.meta.url).then(n=>legacy(n.ntriples))}}),LanguageDescription.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(n=>legacy(n.objectiveC))}}),LanguageDescription.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(n=>legacy(n.objectiveCpp))}}),LanguageDescription.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load(){return __vitePreload(()=>import("./mllike-C_8OmSiT.js"),[],import.meta.url).then(n=>legacy(n.oCaml))}}),LanguageDescription.of({name:"Octave",extensions:["m"],load(){return __vitePreload(()=>import("./octave-Ck1zUtKM.js"),[],import.meta.url).then(n=>legacy(n.octave))}}),LanguageDescription.of({name:"Oz",extensions:["oz"],load(){return __vitePreload(()=>import("./oz-BzwKVEFT.js"),[],import.meta.url).then(n=>legacy(n.oz))}}),LanguageDescription.of({name:"Pascal",extensions:["p","pas"],load(){return __vitePreload(()=>import("./pascal-B1wCu0_E.js"),[],import.meta.url).then(n=>legacy(n.pascal))}}),LanguageDescription.of({name:"Perl",extensions:["pl","pm"],load(){return __vitePreload(()=>import("./perl-CdXCOZ3F.js"),[],import.meta.url).then(n=>legacy(n.perl))}}),LanguageDescription.of({name:"Pig",extensions:["pig"],load(){return __vitePreload(()=>import("./pig-DHho59qG.js"),[],import.meta.url).then(n=>legacy(n.pig))}}),LanguageDescription.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load(){return __vitePreload(()=>import("./powershell-CFHJl5sT.js"),[],import.meta.url).then(n=>legacy(n.powerShell))}}),LanguageDescription.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load(){return __vitePreload(()=>import("./properties-C78fOPTZ.js"),[],import.meta.url).then(n=>legacy(n.properties))}}),LanguageDescription.of({name:"ProtoBuf",extensions:["proto"],load(){return __vitePreload(()=>import("./protobuf-ChK-085T.js"),[],import.meta.url).then(n=>legacy(n.protobuf))}}),LanguageDescription.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load(){return __vitePreload(()=>import("./pug-BmUsPMDj.js"),__vite__mapDeps([23,24]),import.meta.url).then(n=>legacy(n.pug))}}),LanguageDescription.of({name:"Puppet",extensions:["pp"],load(){return __vitePreload(()=>import("./puppet-DMA9R1ak.js"),[],import.meta.url).then(n=>legacy(n.puppet))}}),LanguageDescription.of({name:"Q",extensions:["q"],load(){return __vitePreload(()=>import("./q-ZnEupP5q.js"),[],import.meta.url).then(n=>legacy(n.q))}}),LanguageDescription.of({name:"R",alias:["rscript"],extensions:["r","R"],load(){return __vitePreload(()=>import("./r-DUYO_cvP.js"),[],import.meta.url).then(n=>legacy(n.r))}}),LanguageDescription.of({name:"RPM Changes",load(){return __vitePreload(()=>import("./rpm-CTu-6PCP.js"),[],import.meta.url).then(n=>legacy(n.rpmChanges))}}),LanguageDescription.of({name:"RPM Spec",extensions:["spec"],load(){return __vitePreload(()=>import("./rpm-CTu-6PCP.js"),[],import.meta.url).then(n=>legacy(n.rpmSpec))}}),LanguageDescription.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load(){return __vitePreload(()=>import("./ruby-B2Rjki9n.js"),[],import.meta.url).then(n=>legacy(n.ruby))}}),LanguageDescription.of({name:"SAS",extensions:["sas"],load(){return __vitePreload(()=>import("./sas-B4kiWyti.js"),[],import.meta.url).then(n=>legacy(n.sas))}}),LanguageDescription.of({name:"Scala",extensions:["scala"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(n=>legacy(n.scala))}}),LanguageDescription.of({name:"Scheme",extensions:["scm","ss"],load(){return __vitePreload(()=>import("./scheme-w3NHGvyK.js"),[],import.meta.url).then(n=>legacy(n.scheme))}}),LanguageDescription.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load(){return __vitePreload(()=>import("./shell-CjFT_Tl9.js"),[],import.meta.url).then(n=>legacy(n.shell))}}),LanguageDescription.of({name:"Sieve",extensions:["siv","sieve"],load(){return __vitePreload(()=>import("./sieve-C3Gn_uJK.js"),[],import.meta.url).then(n=>legacy(n.sieve))}}),LanguageDescription.of({name:"Smalltalk",extensions:["st"],load(){return __vitePreload(()=>import("./smalltalk-CnHTOXQT.js"),[],import.meta.url).then(n=>legacy(n.smalltalk))}}),LanguageDescription.of({name:"Solr",load(){return __vitePreload(()=>import("./solr-DehyRSwq.js"),[],import.meta.url).then(n=>legacy(n.solr))}}),LanguageDescription.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load(){return __vitePreload(()=>import("./mllike-C_8OmSiT.js"),[],import.meta.url).then(n=>legacy(n.sml))}}),LanguageDescription.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load(){return __vitePreload(()=>import("./sparql-DkYu6x3z.js"),[],import.meta.url).then(n=>legacy(n.sparql))}}),LanguageDescription.of({name:"Spreadsheet",alias:["excel","formula"],load(){return __vitePreload(()=>import("./spreadsheet-BCZA_wO0.js"),[],import.meta.url).then(n=>legacy(n.spreadsheet))}}),LanguageDescription.of({name:"Squirrel",extensions:["nut"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(n=>legacy(n.squirrel))}}),LanguageDescription.of({name:"Stylus",extensions:["styl"],load(){return __vitePreload(()=>import("./stylus-BdAi1jBa.js"),[],import.meta.url).then(n=>legacy(n.stylus))}}),LanguageDescription.of({name:"Swift",extensions:["swift"],load(){return __vitePreload(()=>import("./swift-BzpIVaGY.js"),[],import.meta.url).then(n=>legacy(n.swift))}}),LanguageDescription.of({name:"sTeX",load(){return __vitePreload(()=>import("./stex-C3f8Ysf7.js"),[],import.meta.url).then(n=>legacy(n.stex))}}),LanguageDescription.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load(){return __vitePreload(()=>import("./stex-C3f8Ysf7.js"),[],import.meta.url).then(n=>legacy(n.stex))}}),LanguageDescription.of({name:"SystemVerilog",extensions:["v","sv","svh"],load(){return __vitePreload(()=>import("./verilog-C6RDOZhf.js"),[],import.meta.url).then(n=>legacy(n.verilog))}}),LanguageDescription.of({name:"Tcl",extensions:["tcl"],load(){return __vitePreload(()=>import("./tcl-BOR0Rekm.js"),[],import.meta.url).then(n=>legacy(n.tcl))}}),LanguageDescription.of({name:"Textile",extensions:["textile"],load(){return __vitePreload(()=>import("./textile-CnDTJFAw.js"),[],import.meta.url).then(n=>legacy(n.textile))}}),LanguageDescription.of({name:"TiddlyWiki",load(){return __vitePreload(()=>import("./tiddlywiki-DO-Gjzrf.js"),[],import.meta.url).then(n=>legacy(n.tiddlyWiki))}}),LanguageDescription.of({name:"Tiki wiki",load(){return __vitePreload(()=>import("./tiki-DGYXhP31.js"),[],import.meta.url).then(n=>legacy(n.tiki))}}),LanguageDescription.of({name:"TOML",extensions:["toml"],load(){return __vitePreload(()=>import("./toml-BXUEaScT.js"),[],import.meta.url).then(n=>legacy(n.toml))}}),LanguageDescription.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load(){return __vitePreload(()=>import("./troff-wAsdV37c.js"),[],import.meta.url).then(n=>legacy(n.troff))}}),LanguageDescription.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load(){return __vitePreload(()=>import("./ttcn-BSZjDM4v.js"),[],import.meta.url).then(n=>legacy(n.ttcn))}}),LanguageDescription.of({name:"TTCN_CFG",extensions:["cfg"],load(){return __vitePreload(()=>import("./ttcn-cfg-BIkV9KBc.js"),[],import.meta.url).then(n=>legacy(n.ttcnCfg))}}),LanguageDescription.of({name:"Turtle",extensions:["ttl"],load(){return __vitePreload(()=>import("./turtle-B1tBg_DP.js"),[],import.meta.url).then(n=>legacy(n.turtle))}}),LanguageDescription.of({name:"Web IDL",extensions:["webidl"],load(){return __vitePreload(()=>import("./webidl-ZXfAyPTL.js"),[],import.meta.url).then(n=>legacy(n.webIDL))}}),LanguageDescription.of({name:"VB.NET",extensions:["vb"],load(){return __vitePreload(()=>import("./vb-CmGdzxic.js"),[],import.meta.url).then(n=>legacy(n.vb))}}),LanguageDescription.of({name:"VBScript",extensions:["vbs"],load(){return __vitePreload(()=>import("./vbscript-BuJXcnF6.js"),[],import.meta.url).then(n=>legacy(n.vbScript))}}),LanguageDescription.of({name:"Velocity",extensions:["vtl"],load(){return __vitePreload(()=>import("./velocity-Dq6fSHCB.js"),[],import.meta.url).then(n=>legacy(n.velocity))}}),LanguageDescription.of({name:"Verilog",extensions:["v"],load(){return __vitePreload(()=>import("./verilog-C6RDOZhf.js"),[],import.meta.url).then(n=>legacy(n.verilog))}}),LanguageDescription.of({name:"VHDL",extensions:["vhd","vhdl"],load(){return __vitePreload(()=>import("./vhdl-lSbBsy5d.js"),[],import.meta.url).then(n=>legacy(n.vhdl))}}),LanguageDescription.of({name:"XQuery",extensions:["xy","xquery"],load(){return __vitePreload(()=>import("./xquery-WRlm2TX8.js"),[],import.meta.url).then(n=>legacy(n.xQuery))}}),LanguageDescription.of({name:"Yacas",extensions:["ys"],load(){return __vitePreload(()=>import("./yacas-BJ4BC0dw.js"),[],import.meta.url).then(n=>legacy(n.yacas))}}),LanguageDescription.of({name:"Z80",extensions:["z80"],load(){return __vitePreload(()=>import("./z80-Hz9HOZM7.js"),[],import.meta.url).then(n=>legacy(n.z80))}}),LanguageDescription.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load(){return __vitePreload(()=>import("./mscgen-BA5vi2Kp.js"),[],import.meta.url).then(n=>legacy(n.mscgen))}}),LanguageDescription.of({name:"X\xF9",extensions:["xu"],load(){return __vitePreload(()=>import("./mscgen-BA5vi2Kp.js"),[],import.meta.url).then(n=>legacy(n.xu))}}),LanguageDescription.of({name:"MsGenny",extensions:["msgenny"],load(){return __vitePreload(()=>import("./mscgen-BA5vi2Kp.js"),[],import.meta.url).then(n=>legacy(n.msgenny))}}),LanguageDescription.of({name:"Vue",extensions:["vue"],load(){return __vitePreload(()=>import("./index-Bx-Ug3wg.js"),__vite__mapDeps([25,5,1,3,6]),import.meta.url).then(n=>n.vue())}}),LanguageDescription.of({name:"Angular Template",load(){return __vitePreload(()=>import("./index-FTVQ48Iu.js"),__vite__mapDeps([26,5,1,3,6]),import.meta.url).then(n=>n.angular())}})],mkContentChangePlugin=(n,e)=>EditorView.updateListener.of(o=>{if(!e()||!o.docChanged)return;const a=o.startState.doc.toString(),s=o.state.doc.toString();n(s,a)}),updateHighlightTermsEffect=StateEffect.define(),highlightMark=Decoration.mark({class:"highlight-keep"}),highlighted=StateField.define({create:()=>Decoration.none,update:(n,e)=>{for(const o of e.effects)if(o.is(updateHighlightTermsEffect)){n=n.update({filter:()=>!1}),n=n.update({add:o.value.ranges.map(({from:a,to:s})=>highlightMark.range(a,s))});break}return n=n.map(e.changes),n},provide:n=>EditorView.decorations.from(n)}),updateHighlightTerms=(n,e)=>{let o=[];for(const{from:s,to:l}of e.visibleRanges){let c;const d=e.state.doc.sliceString(s,l).toLowerCase();for(const u of n)for(c=-1;(c=d.indexOf(u,c+1))!=-1;)o.push({from:s+c,to:s+c+u.length})}o=o.sort((s,l)=>s.from-l.from);const a=[];return e.state.field(highlighted,!1)||a.push(StateEffect.appendConfig.of(highlighted)),a.push(updateHighlightTermsEffect.of({ranges:o})),e.dispatch({effects:a}),!0},base00="#40464a",base01="#DDDDDD",base02="#B9D2FF",base03="#b0b0b0",base05="#e0e0e0",base06="#808080",base07="#000000",base08="#A54543",base09="#fc6d24",base0A="#fda331",base0B="#8abeb7",base0C="#b5bd68",base0D="#6fb3d2",base0E="#cc99cc",base0F="#6987AF",invalid=base09,darkBackground="#292d30",highlightBackground=base02+"30",tooltipBackground=base01,selection=base00,cursor=base01,basicDarkTheme=EditorView.theme({"&":{color:base01,backgroundColor:"transparent"},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:base03},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:base02,outline:`1px solid ${base03}`,color:base07},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:base05,color:base07},".cm-activeLine":{backgroundColor:"transparent"},".cm-selectionMatch":{backgroundColor:highlightBackground},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${base03}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:base02,color:base07},".cm-gutters":{borderRight:"1px solid #ffffff10",color:base06,backgroundColor:darkBackground},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:base02},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:base03}}},{dark:!0}),basicDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:base0A},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:base0C},{tag:[tags.variableName],color:base0D},{tag:[tags.function(tags.variableName)],color:base0A},{tag:[tags.labelName],color:base09},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:base0A},{tag:[tags.definition(tags.name),tags.separator],color:base0E},{tag:[tags.brace],color:base0E},{tag:[tags.annotation],color:invalid},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:base0A},{tag:[tags.typeName,tags.className],color:base0D},{tag:[tags.operator,tags.operatorKeyword],color:base0E},{tag:[tags.tagName],color:base0A},{tag:[tags.squareBracket],color:base0E},{tag:[tags.angleBracket],color:base0E},{tag:[tags.attributeName],color:base0D},{tag:[tags.regexp],color:base0A},{tag:[tags.quote],color:base01},{tag:[tags.string],color:base0C},{tag:tags.link,color:base0F,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:base0B},{tag:[tags.meta],color:base08},{tag:[tags.comment],color:base06,fontStyle:"italic"},{tag:tags.monospace,color:base01},{tag:tags.strong,fontWeight:"bold",color:base0A},{tag:tags.emphasis,fontStyle:"italic",color:base0D},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:base01},{tag:tags.special(tags.heading1),fontWeight:"bold",color:base01},{tag:tags.heading1,fontWeight:"bold",color:base01},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:base01},{tag:[tags.heading5,tags.heading6],color:base01},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:base0B},{tag:[tags.processingInstruction,tags.inserted],color:base0B},{tag:[tags.contentSeparator],color:base0D},{tag:tags.invalid,color:base02,borderBottom:`1px dotted ${invalid}`}]),basicDark=[basicDarkTheme,syntaxHighlighting(basicDarkHighlightStyle)],config={name:"basicLight",dark:!1,background:"transparent",foreground:"#24292f",selection:"var(--selection-bg-color)",cursor:"#24292f",dropdownBackground:"#fff",dropdownBorder:"#e1e4e8",activeLine:"#c6c6c622",matchingBracket:"#34d05840",keyword:"#cf222e",storage:"#d73a49",variable:"#24292f",parameter:"#24292f",function:"#005cc5",string:"#0a3069",constant:"#0550ae",type:"#005cc5",class:"#cf222e",number:"#005cc5",comment:"#929ca6",heading:"#005cc5",invalid:"#cb2431",regexp:"#032f62"},basicLightTheme=EditorView.theme({"&":{color:config.foreground,backgroundColor:config.background},".cm-content":{caretColor:config.cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:config.cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:config.selection},".cm-panels":{backgroundColor:config.dropdownBackground,color:config.foreground},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:config.dropdownBackground,outline:`1px solid ${config.dropdownBorder}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:config.selection},".cm-activeLine":{backgroundColor:config.activeLine},".cm-selectionMatch":{backgroundColor:config.selection},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:config.matchingBracket,outline:"none"},".cm-gutters":{backgroundColor:config.background,color:config.foreground,border:"none"},".cm-activeLineGutter":{backgroundColor:config.background},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:config.foreground},".cm-tooltip":{border:`1px solid ${config.dropdownBorder}`,backgroundColor:config.dropdownBackground,color:config.foreground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:config.foreground,borderBottomColor:config.foreground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{background:config.selection,color:config.foreground}}},{dark:config.dark}),basicLightSyntaxTheme=HighlightStyle.define([{tag:tags.keyword,color:config.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config.variable},{tag:[tags.propertyName],color:config.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config.constant},{tag:[tags.definition(tags.name),tags.separator],color:config.variable},{tag:[tags.className],color:config.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config.number},{tag:[tags.typeName],color:config.type,fontStyle:config.type},{tag:[tags.operator,tags.operatorKeyword],color:config.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config.regexp},{tag:[tags.meta,tags.comment],color:config.comment,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:config.variable},{tag:tags.invalid,color:config.invalid},{tag:tags.strikethrough,textDecoration:"line-through"}]),basicLight=[basicLightTheme,syntaxHighlighting(basicLightSyntaxTheme)],_sfc_main$1O=defineComponent({__name:"CodeMirror",props:mergeModels({theme:{},readonly:{type:Boolean},lang:{},extensionsBuilder:{type:Function},highlightTerms:{},onSrcChanged:{type:Function},keymap:{}},{src:{},srcModifiers:{}}),emits:["update:src"],setup(n,{expose:e}){const o=n;e({getEditorView:()=>s,getWrapperDom:()=>l.value});const a=useModel(n,"src");let s=null;const l=ref(null),c=new Compartment,d=new Compartment,u=new Compartment,f=ThemeContext.useContext(),v={light:basicLight,dark:basicDark};watch(a,()=>{if(s){if(a.value!=s.state.doc.toString()){const E=s.state.selection.toJSON();s.dispatch({changes:{from:0,to:s.state.doc.length,insert:a.value},selection:EditorSelection.fromJSON(E)})}updateHighlightTerms(o.highlightTerms??[],s)}}),watch(()=>o.highlightTerms,()=>{s&&updateHighlightTerms(o.highlightTerms??[],s)});const b=async E=>{if(!s)return;if(E==""||E=="unknown"){s.dispatch({effects:c.reconfigure([])});return}const B=await LanguageDescription.matchLanguageName(languages,E,!0);if(!B)return;const M=await B.load();s.dispatch({effects:c.reconfigure([M])})};watch(()=>o.lang,b);const k=E=>{if(!s)return;const B=E??(f==null?void 0:f.theme.value)??"dark",M=v[B];M&&s.dispatch({effects:d.reconfigure([M])})};watch(()=>o.theme,k);const x=E=>{if(!s)return;const B=Object.values(E??{});s.dispatch({effects:u.reconfigure(keymap.of(B))})};watch(()=>o.keymap,x);const _=()=>{var B;const E=((B=o.extensionsBuilder)==null?void 0:B.call(o))??[];return o.readonly?[c.of([]),d.of([]),EditorState.readOnly.of(!0),...E]:[minimalSetup,c.of([]),d.of([]),u.of([]),EditorState.readOnly.of(!1),mkContentChangePlugin((M,V)=>{o.onSrcChanged?o.onSrcChanged(M,V):a.value=M},()=>!0),...E]};return onMounted(()=>{l.value&&(s=new EditorView({doc:a.value??"",extensions:_(),parent:l.value}),b(o.lang??""),k(o.theme),x(o.keymap??{}))}),onUnmounted(()=>{setTimeout(()=>{s&&s.destroy()},1e3)}),(E,B)=>(openBlock(),createElementBlock("div",{class:"code-mirror-wrapper !w-full",ref_key:"$wrapper",ref:l},null,512))}}),_sfc_main$1N=defineComponent({__name:"Select",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},dir:{},name:{},autocomplete:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(n,{emit:e}){const o=xe(n,e);return(a,s)=>(openBlock(),createBlock(unref(Ny),normalizeProps(guardReactiveProps(unref(o))),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),_sfc_main$1M=defineComponent({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{default:"popper"},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(n,{emit:e}){const o=n,a=e,s=computed(()=>{const{class:c,...d}=o;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(zy),null,{default:withCtx(()=>[createVNode(unref(Ky),mergeProps({...unref(l),...c.$attrs},{class:unref(cn)("relative z-50 max-h-96 min-w-32 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",c.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o.class)}),{default:withCtx(()=>[createVNode(unref(_sfc_main$1I)),createVNode(unref(Xy),{class:normalizeClass(unref(cn)("p-1",c.position==="popper"&&"h-[--radix-select-trigger-height] w-full min-w-[--radix-select-trigger-width]"))},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["class"]),createVNode(unref(_sfc_main$1J))]),_:3},16,["class"])]),_:3}))}}),_sfc_main$1L=defineComponent({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Gy),mergeProps({class:unref(cn)("p-1 w-full",e.class)},o.value),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_hoisted_1$F={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},_sfc_main$1K=defineComponent({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(jy),mergeProps(unref(a),{class:unref(cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.class)}),{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$F,[createVNode(unref(Uy),null,{default:withCtx(()=>[createVNode(unref(Check),{class:"h-4 w-4"})]),_:1})]),createVNode(unref(Yy),null,{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3})]),_:3},16,["class"]))}}),_sfc_main$1J=defineComponent({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Jy),mergeProps(unref(a),{class:unref(cn)("flex cursor-default items-center justify-center py-1",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createVNode(unref(ChevronDown),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),_sfc_main$1I=defineComponent({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Zy),mergeProps(unref(a),{class:unref(cn)("flex cursor-default items-center justify-center py-1",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createVNode(unref(ChevronUp),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),_sfc_main$1H=defineComponent({__name:"SelectTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Ly),mergeProps(unref(a),{class:unref(cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default"),createVNode(unref(eg),{"as-child":""},{default:withCtx(()=>[createVNode(unref(ChevronDown),{class:"w-4 h-4 opacity-50 shrink-0"})]),_:1})]),_:3},16,["class"]))}}),_sfc_main$1G=defineComponent({__name:"SelectValue",props:{placeholder:{},asChild:{type:Boolean},as:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(Qy),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_sfc_main$1F=defineComponent({__name:"Tooltip",props:{defaultOpen:{type:Boolean},open:{type:Boolean},delayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},emits:["update:open"],setup(n,{emit:e}){const o=xe(n,e);return(a,s)=>(openBlock(),createBlock(unref(zg),normalizeProps(guardReactiveProps(unref(o))),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),_sfc_main$1E=defineComponent({inheritAttrs:!1,__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside"],setup(n,{emit:e}){const o=n,a=e,s=computed(()=>{const{class:c,...d}=o;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(jg),null,{default:withCtx(()=>[createVNode(unref(Hg),mergeProps({...unref(l),...c.$attrs},{class:unref(cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_sfc_main$1D=defineComponent({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(Lg),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_sfc_main$1C=defineComponent({__name:"TooltipTrigger",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(Kg),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_hoisted_1$E={class:"relative w-full"},_hoisted_2$m=["data-state"],_sfc_main$1B=defineComponent({__name:"CodeContent",props:{blockTree:{},itemId:{},block:{},readonly:{type:Boolean}},setup(n){const e=n,{blockEditor:o}=BlocksContext.useContext(),a=useTaskQueue(),s=ref(null),l=ref(null),{codemirrorKeymap:c}=KeymapContext.useContext(),{lastFocusedDiId:d}=LastFocusContext.useContext(),u=languages.map(E=>E.name),f=computed(()=>{const E=e.block.content[2],B=LanguageDescription.matchLanguageName(languages,E,!0);return B?B.name:E}),v=computed(()=>d.value===e.itemId?"open":"closed"),b=()=>e.readonly?[]:[indentOnInput(),bracketMatching(),closeBrackets()],k=E=>{const B=e.block.id,M=[BLOCK_CONTENT_TYPES.CODE,E,e.block.content[2]];a.addTask(()=>{o.changeBlockContent({blockId:B,content:M})},{type:"updateBlockContent"+B,delay:500,debounce:!0})};watch(()=>e.block.content,E=>{E[0]===BLOCK_CONTENT_TYPES.CODE&&(s.value=E[1])},{immediate:!0});const x=E=>{a.addTask(()=>{o.changeBlockContent({blockId:e.block.id,content:[BLOCK_CONTENT_TYPES.CODE,s.value,E]})})},_=()=>{navigator.clipboard.writeText(s.value)};return onMounted(()=>{var E,B;if(e.itemId){const M=(E=l.value)==null?void 0:E.getEditorView();M&&((B=e.blockTree)==null||B.registerEditorView(e.itemId,M))}}),onUnmounted(()=>{var E,B;if(e.itemId){const M=(E=l.value)==null?void 0:E.getEditorView();M&&((B=e.blockTree)==null||B.unregisterEditorView(e.itemId,M),M.destroy())}}),(E,B)=>(openBlock(),createElementBlock("div",_hoisted_1$E,[createVNode(_sfc_main$1O,{class:"code-content block-content",ref_key:"cmWrapper",ref:l,src:s.value,"onUpdate:src":B[0]||(B[0]=M=>s.value=M),readonly:E.readonly,lang:E.block.content[2],"extensions-builder":b,"on-src-changed":k,keymap:unref(c)},null,8,["src","readonly","lang","keymap"]),createBaseVNode("div",{class:"toolbar absolute -top-9 right-0 flex items-center w-fit gap-x-1 rounded-md p-1 data-[state=closed]:hidden","data-state":v.value},[createVNode(unref(_sfc_main$1N),{value:f.value,"onUpdate:modelValue":x},{default:withCtx(()=>[createVNode(unref(_sfc_main$1H),{class:"h-8 min-w-32 focus-visible:outline-none focus-visible:ring-transparent"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(f.value??E.$t("kbView.codeblock.unknownLanguage")),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(u),M=>(openBlock(),createBlock(unref(_sfc_main$1K),{value:M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(M),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1},8,["value"]),createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"outline",size:"icon",class:"flex-shrink-0",onClick:_},{default:withCtx(()=>[createVNode(unref(Copy),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(E.$t("kbView.codeblock.copyCode")),1)]),_:1})]),_:1})],8,_hoisted_2$m)]))}}),_sfc_main$1A=defineComponent({__name:"DropdownMenu",props:{defaultOpen:{type:Boolean},open:{type:Boolean},dir:{},modal:{type:Boolean}},emits:["update:open"],setup(n,{emit:e}){const o=xe(n,e);return(a,s)=>(openBlock(),createBlock(unref(sh),normalizeProps(guardReactiveProps(unref(o))),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),_hoisted_1$D={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},_sfc_main$1z=defineComponent({__name:"DropdownMenuCheckboxItem",props:{checked:{type:[Boolean,String]},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},emits:["select","update:checked"],setup(n,{emit:e}){const o=n,a=e,s=computed(()=>{const{class:c,...d}=o;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(vh),mergeProps(unref(l),{class:unref(cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o.class)}),{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$D,[createVNode(unref(mh),null,{default:withCtx(()=>[createVNode(unref(Check),{class:"w-4 h-4"})]),_:1})]),renderSlot(c.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$1y=defineComponent({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=computed(()=>{const{class:c,...d}=o;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(ih),null,{default:withCtx(()=>[createVNode(unref(uh),mergeProps(unref(l),{class:unref(cn)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_sfc_main$1x=defineComponent({__name:"DropdownMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(fh),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_sfc_main$1w=defineComponent({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(ch$1),mergeProps(unref(a),{class:unref(cn)("dropdown-menu-item relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s.inset&&"pl-8",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$1v=defineComponent({__name:"DropdownMenuSub",props:{defaultOpen:{type:Boolean},open:{type:Boolean}},emits:["update:open"],setup(n,{emit:e}){const o=xe(n,e);return(a,s)=>(openBlock(),createBlock(unref(bh),normalizeProps(guardReactiveProps(unref(o))),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),_sfc_main$1u=defineComponent({__name:"DropdownMenuSubContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideOffset:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=computed(()=>{const{class:c,...d}=o;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(Ch),mergeProps(unref(l),{class:unref(cn)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$1t=defineComponent({__name:"DropdownMenuSubTrigger",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(wh),mergeProps(unref(a),{class:unref(cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e.class)}),{default:withCtx(()=>[renderSlot(s.$slots,"default"),createVNode(unref(ChevronRight),{class:"ml-auto h-4 w-4"})]),_:3},16,["class"]))}}),_sfc_main$1s=defineComponent({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=At(n);return(o,a)=>(openBlock(),createBlock(unref(rh),mergeProps({class:"outline-none"},unref(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_hoisted_1$C=["data-showDropdown","data-path"],_hoisted_2$l={key:0,class:"flex items-center text-muted-foreground"},_hoisted_3$g={class:"image-fit-container relative w-fit bg-background"},_hoisted_4$d=["src"],_sfc_main$1r=defineComponent({__name:"ImageContent",props:{blockTree:{},block:{},itemId:{}},setup(n){const e=n,{useImage:o}=ImagesContext.useContext(),a=ref(null),s=ref(null),l=useTaskQueue(),{blockEditor:c,blocksManager:d}=BlocksContext.useContext();let u=0;const f=generateKeydownHandlerSimple({Backspace:{run:I=>I.isComposing||I.keyCode===229?!1:(l.addTask(()=>{c.deleteBlock({blockId:e.block.id})}),!0),stopPropagation:!0,preventDefault:!0},Enter:{run:I=>{if(I.isComposing||I.keyCode===229)return!1;const L=e.itemId,U=e.blockTree;return!L||!U?!1:(l.addTask(async()=>{const Z={baseBlockId:e.block.id,offset:1},K=getPmSchema({getBlockRef:d.getBlockRef});c.insertNormalBlock({pos:Z,content:plainTextToTextContent("",K)});const j=U.getDiBelow(L);await U.nextUpdate(),j&&U.focusDi(j[0].itemId)}),!0)},stopPropagation:!0,preventDefault:!0},ArrowDown:{run:I=>{if(I.isComposing||I.keyCode===229)return!1;const L=e.blockTree;if(!L)return!1;const U=L.getDiBelow(e.itemId);return U&&L.focusDi(U[0].itemId),!0},stopPropagation:!0,preventDefault:!0},ArrowUp:{run:I=>{if(I.isComposing||I.keyCode===229)return!1;const L=e.blockTree;if(!L)return!1;const U=L.getDiAbove(e.itemId);return U&&L.focusDi(U[0].itemId),!0},stopPropagation:!0,preventDefault:!0},ArrowLeft:{run:I=>{if(I.isComposing||I.keyCode===229)return!1;const L=e.blockTree;if(!L)return!1;const U=L.getPredecessorDi(e.itemId);return U&&L.focusDi(U[0].itemId),!0},stopPropagation:!0,preventDefault:!0},ArrowRight:{run:I=>{if(I.isComposing||I.keyCode===229)return!1;const L=e.blockTree;if(!L)return!1;const U=L.getSuccessorDi(e.itemId);return U&&L.focusDi(U[0].itemId),!0},stopPropagation:!0,preventDefault:!0},"*":{run:()=>!0,stopPropagation:!0,preventDefault:!0},Tab:{run:I=>I.isComposing||I.keyCode===229?!1:(l.addTask(()=>{c.promoteBlock({blockId:e.block.id})}),!0),stopPropagation:!0,preventDefault:!0},"Shift-Tab":{run:I=>I.isComposing||I.keyCode===229?!1:(l.addTask(()=>{c.demoteBlock({blockId:e.block.id})}),!0),stopPropagation:!0,preventDefault:!0}}),v=I=>{const L=I.target;L.blur(),L.contentEditable="false",L.innerHTML="",setTimeout(()=>{L.contentEditable="true",L.focus()},0)},b=o(()=>e.block.content[1]),k=ref(!1),x=I=>{l.addTask(()=>{const L=e.block.id,U=[...e.block.content],Z=U[5]??[];Z.includes(I)?Z.splice(Z.indexOf(I),1):Z.push(I),U[5]=Z,c.changeBlockContent({blockId:L,content:U})})},_=I=>(e.block.content[5]??[]).includes(I),E=()=>{l.addTask(()=>{c.deleteBlock({blockId:e.block.id})})},B=I=>{const L=I.clientX-u+3,U=a.value;U&&(U.style.width=Math.min(U.naturalWidth,L)+"px")},M=()=>{var U;const I=a.value;if(!I)return;const L=I.clientWidth;l.addTask(()=>{const Z=e.block.id,K=[...e.block.content];K[4]=L,c.changeBlockContent({blockId:Z,content:K})}),(U=document.getElementById("cursor-style"))==null||U.remove(),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",M),document.removeEventListener("mouseleave",M)},V=I=>{var Z;const L=(Z=a.value)==null?void 0:Z.getBoundingClientRect();if(!L)return;u=L.left;const U=document.createElement("style");U.innerHTML="*{cursor: col-resize!important;}",U.id="cursor-style",document.head.appendChild(U),I.preventDefault(),I.stopPropagation(),document.addEventListener("mousemove",B),document.addEventListener("mouseup",M),document.addEventListener("mouseleave",M)},F=async()=>{const I=e.block.content;if(I[0]!==BLOCK_CONTENT_TYPES.IMAGE)return;const L=await fsClearScannedImage({path:I[1]});L.success&&l.addTask(()=>{const U=[...I];U[1]=L.data.path,c.changeBlockContent({blockId:e.block.id,content:U})})};return(I,L)=>{var U,Z,K,j,W,Y;return I.block.content[0]===unref(BLOCK_CONTENT_TYPES).IMAGE&&unref(b)?(openBlock(),createElementBlock("div",{key:0,class:"block-content image-content relative","data-showDropdown":k.value,"data-path":I.block.content[1]},[unref(b).status==="fetching"?(openBlock(),createElementBlock("div",_hoisted_2$l,[createVNode(unref(LoaderCircle),{class:"size-4 mr-2 animate-spin"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.imageContent.fetchingImage")),1)])):unref(b).status==="synced"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["image-container flex select-none my-2 shrink-0",{imageBlend:(U=e.block.content[5])==null?void 0:U.includes("blend"),imageBlendLuminosity:(Z=e.block.content[5])==null?void 0:Z.includes("blendLuminosity"),imageCircle:(K=e.block.content[5])==null?void 0:K.includes("circle"),imageInvert:(j=e.block.content[5])==null?void 0:j.includes("invert"),imageInvertW:(W=e.block.content[5])==null?void 0:W.includes("invertW"),imageOutline:(Y=e.block.content[5])==null?void 0:Y.includes("outline")}]),ref_key:"imageElContainerRef",ref:s},[createBaseVNode("div",_hoisted_3$g,[createBaseVNode("img",{ref_key:"imageElRef",ref:a,class:"rounded",style:normalizeStyle({width:I.block.content[4]?I.block.content[4]+"px":"unset"}),src:unref(b).url},null,12,_hoisted_4$d),createBaseVNode("div",{class:"absolute right-[2px] top-1/2 -translate-y-1/2 h-full max-h-[40px] rounded w-1 bg-muted cursor-col-resize",onMousedown:V},null,32),createVNode(unref(_sfc_main$1A),{open:k.value,"onUpdate:open":L[2]||(L[2]=G=>k.value=G),modal:!1},{default:withCtx(()=>[createVNode(unref(_sfc_main$1s),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"outline",size:"icon",class:"image-actions absolute top-2 right-2"},{default:withCtx(()=>[createVNode(unref(EllipsisVertical),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1y),{class:"w-52 mx-4"},{default:withCtx(()=>[createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(MessageSquareMore),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.imageContent.addCaption")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(Download),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.imageContent.download")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(Info),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.imageContent.metadata")),1)]),_:1}),createVNode(unref(_sfc_main$1w),{onClick:F},{default:withCtx(()=>[createVNode(unref(FileScan),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.imageContent.clearScannedImage")),1)]),_:1}),createVNode(unref(_sfc_main$1v),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1t),null,{default:withCtx(()=>[createVNode(unref(Blend),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.imageContent.filter")),1)]),_:1}),createVNode(unref(ih),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1u),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1w),{class:normalizeClass({active:_("invert")}),onClick:L[0]||(L[0]=G=>x("invert"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(I.$t("kbView.imageContent.invert")),1)]),_:1},8,["class"]),createVNode(unref(_sfc_main$1w),{class:normalizeClass({active:_("invertW")}),onClick:L[1]||(L[1]=G=>x("invertW"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(I.$t("kbView.imageContent.invertW")),1)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1w),{class:"!text-red-500",onClick:E},{default:withCtx(()=>[createVNode(unref(Trash2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.imageContent.deleteImage")),1)]),_:1})]),_:1})]),_:1},8,["open"])]),createBaseVNode("div",{class:"cursor-container flex-grow !outline-none min-w-1",contenteditable:"",onKeydown:L[3]||(L[3]=(...G)=>unref(f)&&unref(f)(...G)),onCompositionstart:v},null,32)],2)):createCommentVNode("",!0)],8,_hoisted_1$C)):createCommentVNode("",!0)}}}),_sfc_main$1q=defineComponent({__name:"ScrollBar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(My),mergeProps(o.value,{class:unref(cn)("flex touch-none select-none transition-colors",a.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",a.orientation==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-px",e.class)}),{default:withCtx(()=>[createVNode(unref(Vy),{class:"relative flex-1 rounded-full bg-border"})]),_:1},16,["class"]))}}),_sfc_main$1p=defineComponent({__name:"ScrollArea",props:{type:{},dir:{},scrollHideDelay:{},asChild:{type:Boolean},as:{},class:{},maxHeight:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Oy),mergeProps(o.value,{class:unref(cn)("relative overflow-hidden",e.class)}),{default:withCtx(()=>[createVNode(unref(ky),{class:"h-full w-full rounded-[inherit]",style:normalizeStyle({maxHeight:e.maxHeight})},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["style"]),createVNode(_sfc_main$1q),createVNode(unref(Fy))]),_:3},16,["class"]))}}),_sfc_main$1o=defineComponent({__name:"MathContent",props:{blockTree:{},block:{},readonly:{type:Boolean},itemId:{}},setup(n){const e=n,o=useTaskQueue(),{blockEditor:a}=BlocksContext.useContext(),s=FloatingMathInputContext.useContext(),l=ref(null);let c="";const d={displayMode:!0,throwOnError:!1},u=()=>{const _=l.value;_&&(c.trim().length>0?(katex.render(c,_,d),_.classList.remove("empty")):(_.textContent="EMPTY EQUATION",_.classList.add("empty")))},f=()=>{const _=e.block.content,E=l.value;!E||_[0]!==BLOCK_CONTENT_TYPES.MATH||s.openFloatingMathInput(E,_[1],B=>{c=B,x()},v,b,b,k)},v=()=>{const _=e.blockTree;if(!_)return;const E=_.getDiAbove(e.itemId);E&&_.focusDi(E[0].itemId,{scrollIntoView:!0})},b=()=>{const _=e.blockTree;if(!_)return;const E=_.getDiBelow(e.itemId);E&&_.focusDi(E[0].itemId,{scrollIntoView:!0})},k=()=>{o.addTask(()=>{a.deleteBlock({blockId:e.block.id})})},x=()=>{o.addTask(()=>{a.changeBlockContent({blockId:e.block.id,content:[BLOCK_CONTENT_TYPES.MATH,c]})})};return watch(()=>e.block.content,_=>{_[0]===BLOCK_CONTENT_TYPES.MATH&&(c=_[1],nextTick(()=>{u()}))},{immediate:!0}),(_,E)=>_.block.content[0]===unref(BLOCK_CONTENT_TYPES).MATH?(openBlock(),createElementBlock("div",{key:0,class:"math-content block-content overflow-x-auto [&.empty]:italic [&.empty]:text-muted-foreground [&.empty]:!w-fit",ref_key:"$contentEl",ref:l,onClick:f},null,512)):createCommentVNode("",!0)}}),_sfc_main$1n=defineComponent({__name:"BlockContent",props:{block:{},itemId:{},blockTree:{},readonly:{type:Boolean},highlightTerms:{},highlightRefs:{}},setup(n){return(e,o)=>e.block.content[0]===unref(BLOCK_CONTENT_TYPES).TEXT?(openBlock(),createBlock(_sfc_main$1$,{key:0,block:e.block,"block-tree":e.blockTree,readonly:e.readonly,"highlight-terms":e.highlightTerms,"highlight-refs":e.highlightRefs,"item-id":e.itemId},null,8,["block","block-tree","readonly","highlight-terms","highlight-refs","item-id"])):e.block.content[0]===unref(BLOCK_CONTENT_TYPES).MATH?(openBlock(),createBlock(_sfc_main$1o,{key:1,block:e.block,"block-tree":e.blockTree,readonly:e.readonly,"item-id":e.itemId},null,8,["block","block-tree","readonly","item-id"])):e.block.content[0]===unref(BLOCK_CONTENT_TYPES).CODE?(openBlock(),createBlock(_sfc_main$1B,{key:2,block:e.block,"block-tree":e.blockTree,readonly:e.readonly,"item-id":e.itemId},null,8,["block","block-tree","readonly","item-id"])):e.block.content[0]===unref(BLOCK_CONTENT_TYPES).IMAGE?(openBlock(),createBlock(_sfc_main$1r,{key:3,block:e.block,"block-tree":e.blockTree,"item-id":e.itemId},null,8,["block","block-tree","item-id"])):createCommentVNode("",!0)}}),FavoriteContext=createContext(()=>{const{blocksManager:n}=BlocksContext.useContext(),{kbPrefix:e}=ServerInfoContext.useContext(),o="favorite.blockIds",a=computed(()=>`${e.value}${o}`),s=useLocalStorage2(a,[]),l=computed({get:()=>s.value.map(c=>n.getBlock(c)).filter(c=>!!c),set:c=>{s.value=c.map(d=>d.id)}});return{favoriteBlockIds:s,favoriteBlocks:l}}),addIndentation$1=(n,e={})=>{const o=e.char||" ",a=e.count||2;let s=0;const l=[];return n.reverse().reduce((c,d)=>{l.length&&s&&l[s]&&l[s]===d.substring(1,l[s].length+1)&&(l.splice(s,1),s--);const u=[`${o.repeat(s?s*a:0)}${d}`,...c];return d.substring(0,2)==="</"&&(s++,l[s]=d.substring(2,d.length-1)),u},[]).join(`
`)};var addIndentation_1=addIndentation$1;const removeEmptyLines=n=>n.trim().replace(/(^(\s|\t)+|(( |\t)+)$)/gm,""),mergeAttributesWithElements$1=n=>{const e=removeEmptyLines(n).split(`
`),o=[];let a="";for(let s=0;s<e.length;s+=1){const l=e[s];if(l.endsWith("/>")){o.push(`${a}${l.slice(0,-2)} />`),a="";continue}if(l.endsWith(">")){o.push(`${a}${l.startsWith(">")||l.startsWith("<")?"":" "}${l}`),a="";continue}a+=a.length?` ${l}`:l}return o};var toLines={mergeAttributesWithElements:mergeAttributesWithElements$1,removeEmptyLines};const addIndentation=addIndentation_1,{mergeAttributesWithElements}=toLines,prettify=(n,e={})=>{const o=mergeAttributesWithElements(n);return addIndentation(o,e)};var src=prettify;const prettify$1=getDefaultExportFromCjs(src),ExporterContext=createContext(()=>{const{blocksManager:n}=BlocksContext.useContext(),e=ref(!1),o=ref(void 0);return{open:e,blockId:o,openExporter:a=>{e.value=!0,o.value=a},closeExporter:()=>{e.value=!1,o.value=void 0},exportSubtreeToPlainText:(a,s={})=>{s.nonFoldOnly??(s.nonFoldOnly=!1);let l="";return n.forDescendants({onEachBlock:(c,d)=>{l+="  ".repeat(d)+"- "+c.ctext+`
`},rootBlockId:a,rootBlockLevel:0,nonFoldOnly:s.nonFoldOnly,includeSelf:!0}),l},exportSubtreeToHtml:(a,s={})=>{s.nonFoldOnly??(s.nonFoldOnly=!1);const l=document.createElement("ul"),c=getPmSchema({getBlockRef:n.getBlockRef}),d=DOMSerializer.fromSchema(c),u=(v,b)=>{if(v.fold&&s.nonFoldOnly)return;const k=document.createElement("li");if(v.content[0]===BLOCK_CONTENT_TYPES.TEXT){const x=Node$1.fromJSON(c,v.content[1]),_=d.serializeFragment(x.content);k.appendChild(_)}if(v.childrenRefs.length>0){const x=document.createElement("ul");for(const _ of v.childrenRefs)if(_.value&&!_.value.deleted){const E=toRaw(_.value);u(E,x)}k.appendChild(x)}b.appendChild(k)},f=n.getBlock(a);return f?(u(f,l),prettify$1(l.outerHTML)):(console.error("Cannot find root block",a),"")},exportSubtreeToMarkdown:a=>"",exportSubtreeToPdf:a=>""}}),FieldValueInspectorContext=createContext(()=>{const n=ref(!1),e=ref(void 0);return{open:n,blockId:e,openFieldValuesInspector:o=>{n.value=!0,e.value=o}}}),BlockContextMenuContext=createContext(()=>{const n=ref(!1),e=ref(null),o=ref(null);return{open:n,clickedBlockId:o,showPos:e,openAt:(a,s)=>{n.value=!0,e.value=a,o.value=s}}}),_sfc_main$1m=defineComponent({__name:"BlockContextMenu",setup(n){const e=useTaskQueue(),{blockEditor:o,blocksManager:a}=BlocksContext.useContext(),{openBlockMover:s}=BlockMoverContext.useContext(),{favoriteBlockIds:l}=FavoriteContext.useContext(),{sidePaneBlockIds:c,addToSidePane:d}=SidebarContext.useContext(),{lastFocusedBlockTree:u}=LastFocusContext.useContext(),{openExporter:f}=ExporterContext.useContext(),{openFieldValuesInspector:v}=FieldValueInspectorContext.useContext(),{open:b,showPos:k,clickedBlockId:x}=BlockContextMenuContext.useContext();watch(k,async()=>{if(await nextTick(),!k.value)return;const K=document.querySelector("[data-radix-popper-content-wrapper]");if(!(K instanceof HTMLElement))return;const{x:j,y:W}=k.value,Y=K.getBoundingClientRect(),G=calcPopoverPos(Y.width,Y.height,j,W,{});document.body.style.setProperty("--popover-x",`${G.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${G.rightDown.y}px`)});const _=["red","green","blue","yellow","gray","orange","purple"],E=(K,j)=>(!K&&j&&e.addTask(async()=>{await o.deleteBlock({blockId:j})}),!!j),B=(K,j,W)=>{if(!K&&j&&W){const Y={x:W.clientX,y:W.clientY};setTimeout(()=>{s(Y)},200)}return!!j},M=(K,j,W)=>{if(!K&&j&&W){const Y={x:W.clientX,y:W.clientY};setTimeout(()=>{s(Y,{leaveRef:!0})},200)}return!!j},V=(K,j)=>{const W=!!j&&!c.value.includes(j);return!K&&W&&d(j),!!j&&W},F=(K,j)=>{const W=!!j&&!l.value.includes(j);return!K&&W&&l.value.push(j),!!j&&W},I=(K,j)=>(!K&&j&&e.addTask(async()=>{const W={baseBlockId:j,offset:1},Y=u.value;if(!Y)return;await o.insertMirrorBlock({pos:W,srcBlockId:j});const G=Y.getDiBelow(j);G&&Y.focusDi(G[0].itemId)}),!!j),L=(K,j,W)=>(!K&&j&&f(j),!!j),U=(K,j)=>(!K&&j&&v(j),!!j),Z=K=>(j,W,Y)=>(!j&&W&&Y&&e.addTask(async()=>{const G=a.getBlock(W);G&&o.setBlockMetadata({blockId:W,metadata:{...G.metadata,blockRefColor:K}})}),!!W);return(K,j)=>(openBlock(),createBlock(unref(_sfc_main$1A),{open:unref(b),"onUpdate:open":j[9]||(j[9]=W=>isRef(b)?b.value=W:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1y),{class:"block-contextmenu-content min-w-[200px] overflow-y-auto max-h-[var(--radix-dropdown-menu-content-available-height)]"},{default:withCtx(()=>[createVNode(unref(_sfc_main$1w),{class:"!text-red-500",disabled:!E(!0,unref(x),void 0),onClick:j[0]||(j[0]=W=>E(!1,unref(x),W))},{default:withCtx(()=>[createVNode(unref(Trash2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.deleteBlock")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1w),{disabled:!U(!0,unref(x),void 0),onClick:j[1]||(j[1]=W=>U(!1,unref(x),W))},{default:withCtx(()=>[createVNode(unref(Database),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.openFieldValuesInspector")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(Copy),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.copyBlockReference")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(FlipHorizontal),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.copyBlockMirror")),1)]),_:1}),createVNode(unref(_sfc_main$1w),{disabled:!I(!0,unref(x),void 0),onClick:j[2]||(j[2]=W=>I(!1,unref(x),W))},{default:withCtx(()=>[createVNode(unref(FlipHorizontal),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.insertMirrorBelow")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1w),{disabled:!F(!0,unref(x),void 0),onClick:j[3]||(j[3]=W=>F(!1,unref(x),W))},{default:withCtx(()=>[createVNode(unref(Bookmark),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.addToFavorite")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1w),{disabled:!V(!0,unref(x),void 0),onClick:j[4]||(j[4]=W=>V(!1,unref(x),W))},{default:withCtx(()=>[createVNode(unref(PanelLeft),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.addToSidepane")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1w),{disabled:!B(!0,unref(x),void 0),onClick:j[5]||(j[5]=W=>B(!1,unref(x),W))},{default:withCtx(()=>[createVNode(unref(ArrowRight),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.moveBlock")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1w),{disabled:!M(!0,unref(x),void 0),onClick:j[6]||(j[6]=W=>M(!1,unref(x),W))},{default:withCtx(()=>[createVNode(unref(ArrowRight),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.moveBlockLeaveRef")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1w),{disabled:!B(!0,unref(x),void 0),onClick:j[7]||(j[7]=W=>B(!1,unref(x),W))},{default:withCtx(()=>[createVNode(unref(ArrowRight),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.moveBlockLeaveMirror")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$1v),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1t),null,{default:withCtx(()=>[createVNode(unref(ArrowUpNarrowWide),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.sortDirectChildren")),1)]),_:1}),createVNode(unref(_sfc_main$1u),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(ArrowUpAZ),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.sortDictAsc")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(ArrowDownAZ),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.sortDictDesc")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowUp),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.ctimeAsc")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowDown),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.ctimeDesc")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowUp),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.mtimeAsc")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowDown),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.mtimeDesc")),1)]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1v),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1t),null,{default:withCtx(()=>[createVNode(unref(Paintbrush),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.setBlockRefColor")),1)]),_:1}),createVNode(unref(_sfc_main$1u),null,{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment$1,null,renderList(_,W=>createVNode(unref(_sfc_main$1w),{key:W,disabled:!Z(W)(!0,unref(x),void 0),onClick:Y=>Z(W)(!1,unref(x),Y)},{default:withCtx(()=>[createBaseVNode("div",{class:"size-4 mr-2 rounded-sm",style:normalizeStyle({backgroundColor:`var(--highlight-${W})`})},null,4),createTextVNode(" "+toDisplayString$1(K.$t(`kbView.command.${W}`)),1)]),_:2},1032,["disabled","onClick"])),64))]),_:1})]),_:1}),createVNode(unref(_sfc_main$1w),{disabled:!L(!0,unref(x),void 0),onClick:j[8]||(j[8]=W=>L(!1,unref(x),W))},{default:withCtx(()=>[createVNode(unref(Download),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.command.export")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["open"]))}}),fieldValueTypeSchema=z.discriminatedUnion("type",[z.object({type:z.literal("richtext")}),z.object({type:z.literal("blockRef")}),z.object({type:z.literal("array"),itemType:z.enum(["richtext","blockRef","block"])})]),fieldMetadataSchema=z.object({buildIndex:z.boolean().optional(),valueType:fieldValueTypeSchema}),FieldsManagerContext=createContext(()=>{const{blocksManager:n}=BlocksContext.useContext(),e=ref(null),o=getPmSchema({getBlockRef:n.getBlockRef}),a=()=>{if(!e.value){e.value=new Set;for(const k of n.loadedBlocks.values()){const x=k.value;x&&x.type==="normalBlock"&&"field"in x.metadata&&e.value.add(x.id)}}},s=k=>(a(),e.value.has(k)),l=(k,x)=>{if(!k)return null;let _=k.firstChild;if(!_||_.type.name!=="blockRef_v2")return null;const E=_.attrs.toBlockId;if(!s(E))return null;if(k=k.cut(_.nodeSize),_=k.firstChild,_&&_.isText){const B=_.text;if(!B||!B.startsWith(":")&&!B.startsWith("\uFF1A"))return null;k=k.cut(1)}return x&&(x.fieldName=E),k},c=(k,x)=>{if(!k)return null;let _=k.firstChild;if(_&&_.isText){const E=_.text;if(!E)return null;const B=E.search(/\S|$/);k=k.cut(B)}return k},d=(k,x)=>{if(!k)return null;let _=k.firstChild;if(!_||_.type.name!=="blockRef_v2")return null;const{toBlockId:E,tag:B}=_.attrs??{};return k=k.cut(_.nodeSize),x&&(x.toBlockId=E),x&&(x.tag=B),k},u=(k,x)=>{if(n.getBlock(k))throw new Error(`Field ${k} already exists`);const _=getPmSchema({getBlockRef:n.getBlockRef});n.addBlock({id:k,type:"normalBlock",content:plainTextToTextContent(k,_),fold:!0,parentId:"root",childrenIds:[],metadata:{field:x}},{type:"ui"}),a(),e.value.add(k)},f=(k,x)=>{const _=n.getBlock(k);if(!_||_.type!=="normalBlock")throw new Error(`Field ${k} not found`);n.updateBlock({..._,metadata:x},{type:"ui"})},v=k=>{var E;const x=n.getBlock(k);if(!x||x.content[0]!==BLOCK_CONTENT_TYPES.TEXT)return null;const _=fieldMetadataSchema.safeParse((E=x.metadata)==null?void 0:E.field);return _.success?_.data:null},b=k=>{if(!k||k.type!=="normalBlock"||k.content[0]!==BLOCK_CONTENT_TYPES.TEXT)return;let x=null;try{x=Node$1.fromJSON(o,k.content[1]).content}catch{}if(!x)return;const _={};if(x=l(x,_),!x||!_.fieldName||!s(_.fieldName))return;const E=v(_.fieldName);if(E){if(E.valueType.type==="richtext")return{fieldName:_.fieldName,metadata:E,value:x};if(E.valueType.type==="blockRef"){const B={};return x=l(x),x=c(x),x=d(x,B),x?{fieldName:B.fieldName,metadata:E,value:B.toBlockId}:void 0}else{let B=[];for(const M of k.childrenRefs){const V=M.value;if(!V||V.type!=="normalBlock"||V.content[0]!==BLOCK_CONTENT_TYPES.TEXT)continue;let F=null;try{F=Node$1.fromJSON(o,V.content[1]).content}catch{}if(!F)return;if(E.valueType.itemType==="richtext")B.push(F);else if(E.valueType.itemType==="blockRef"){const I={};if(F=c(F),F=d(F,I),!F)return;B.push(I.toBlockId)}else E.valueType.itemType==="block"&&B.push(V.id)}return{fieldName:_.fieldName,metadata:E,value:B}}}};return{addField:u,setFieldMetadata:f,getFieldMetadata:v,getFieldValues:k=>{const x=n.getSrcBlock(k);if(!x)return null;const _={};for(const E of x.childrenRefs){const B=E.value;if(!B)continue;const M=b(B);if(!M)continue;const{fieldName:V,metadata:F,value:I}=M;_[V]=I}return _}}}),BacklinksContext=createContext(()=>{const{registerSettingGroup:n,registerSettingItem:e}=SettingsContext.useContext(),{blocksManager:o}=BlocksContext.useContext(),{getBacklinks:a}=IndexContext.useContext(),{getFieldValues:s}=FieldsManagerContext.useContext(),{kbPrefix:l}=ServerInfoContext.useContext();n({key:"backlinks",label:{en:"Backlinks",zh:"\u5757\u5F15\u7528 & \u53CD\u5411\u94FE\u63A5"}});const c="backlinks.showCounter",d=computed(()=>`${l.value}${c}`),u=!0,f=useLocalStorage2(d,u);e({id:c,groupKey:"backlinks",label:{zh:"\u5757\u53F3\u4FA7\u663E\u793A\u53CD\u5411\u94FE\u63A5\u4E2A\u6570"},desc:{zh:"\u5982\u679C\u5F00\u542F\uFF0C\u5219\u5982\u679C\u4E00\u4E2A\u5757\u6709\u53CD\u5411\u94FE\u63A5\uFF0C\u5219\u4F1A\u5728\u5757\u53F3\u4FA7\u4EE5\u60AC\u6D6E\u80F6\u56CA\u7684\u5F62\u5F0F\u663E\u793A\u53CD\u5411\u94FE\u63A5\u4E2A\u6570\u3002\u70B9\u51FB\u5373\u53EF\u6253\u5F00\u4E00\u4E2A\u60AC\u6D6E\u7A97\u53E3\uFF0C\u7528\u4E8E\u6D4F\u89C8\u8FD9\u4E2A\u5757\u7684\u6240\u6709\u53CD\u5411\u94FE\u63A5\u3002"},defaultValue:u,value:useWritableComputedRef(f),componentType:{type:"switch"}});const v="backlinks.putNewBlockAt",b=computed(()=>`${l.value}${v}`),k="",x=useLocalStorage2(b,k);e({id:v,groupKey:"backlinks",label:{zh:"\u65B0\u5757\u63D2\u5165\u4F4D\u7F6E"},desc:{zh:"\u5728\u5F15\u7528\u8865\u5168\u83DC\u5355\u4E2D\uFF0C\u9009\u62E9\u521B\u5EFA\u65B0\u5757\u65F6\u65B0\u5757\u63D2\u5165\u7684\u4F4D\u7F6E\u3002\u5982\u679C\u4E0D\u6307\u5B9A\uFF0C\u9ED8\u8BA4\u4F1A\u63D2\u5165\u6839\u5757\u672B\u5C3E\u3002"},defaultValue:k,value:useWritableComputedRef(x),componentType:{type:"blockIdInput"}});const _=(E,B=!0)=>{var F;const M=B?[E]:[],V=s(E)??{};if("Alias"in V){const I=V.Alias,L=z.array(z.string()).safeParse(I);return L.success&&M.push(...L.data),M}{const I=o.getBlock(E);if(!I)return M;const L=(F=I.parentRef.value)==null?void 0:F.parentRef.value;if(!L)return M;const U=s(L.id)??{};if("Alias"in U){const Z=U.Alias,K=z.array(z.string()).safeParse(Z);return K.success&&M.push(...K.data),M}}return M};return{showBacklinksCounter:f,putNewBlockAt:x,getAllAliases:_,getBacklinksConsideringAliases:(E,B="both")=>{const M=_(E),V=new Set;for(const F of M){const I=a(F,B);for(const L of I??[])V.add(L)}return V}}}),_sfc_main$1l=defineComponent({__name:"Breadcrumb",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("nav",{"aria-label":"breadcrumb",class:normalizeClass(e.class)},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$1k=defineComponent({__name:"BreadcrumbItem",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("li",{class:normalizeClass(unref(cn)("inline-flex items-center gap-1.5",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$1j=defineComponent({__name:"BreadcrumbLink",props:{asChild:{type:Boolean},as:{default:"a"},class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(O),{as:o.as,"as-child":o.asChild,class:normalizeClass(unref(cn)("transition-colors hover:text-foreground",e.class))},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),_sfc_main$1i=defineComponent({__name:"BreadcrumbList",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("ol",{class:normalizeClass(unref(cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$1h=defineComponent({__name:"BreadcrumbSeparator",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("li",{role:"presentation","aria-hidden":"true",class:normalizeClass(unref(cn)("[&>svg]:w-3.5 [&>svg]:h-3.5",e.class))},[renderSlot(o.$slots,"default",{},()=>[createVNode(unref(ChevronRight))])],2))}}),_sfc_main$1g=defineComponent({__name:"BlockPath",props:{blockId:{},includeSelf:{type:Boolean}},emits:["click-path-segment"],setup(n,{emit:e}){const o=n,a=e,{blocksManager:s}=BlocksContext.useContext(),l=computed(()=>{const c=[...s.getBlockPath(o.blockId)];return c.reverse(),o.includeSelf||c.pop(),c});return(c,d)=>(openBlock(),createBlock(unref(_sfc_main$1l),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1i),{class:"!gap-x-1 !gap-y-0"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(l.value,(u,f)=>(openBlock(),createElementBlock(Fragment$1,{key:u.id},[createVNode(unref(_sfc_main$1k),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1j),{class:"no-underline cursor-pointer",onClick:v=>a("click-path-segment",u.id)},{default:withCtx(()=>[createVNode(_sfc_main$1n,{class:"!max-w-[unset] *:cursor-pointer",block:u,"block-tree":void 0,readonly:!0},null,8,["block"])]),_:2},1032,["onClick"])]),_:2},1024),f!==l.value.length-1?(openBlock(),createBlock(unref(_sfc_main$1h),{key:0},{default:withCtx(()=>d[0]||(d[0]=[createTextVNode(" / ")])),_:1})):createCommentVNode("",!0)],64))),128))]),_:1})]),_:1}))}}),_hoisted_1$B={key:0,class:"rounded-md bg-muted px-1 min-w-5 h-fit flex items-center justify-center text-sm text-muted-foreground select-none cursor-pointer"},_hoisted_2$k={class:"pointer-events-none select-none"},_sfc_main$1f=defineComponent({__name:"BacklinksCounter",props:{blockId:{}},setup(n){const e=n,{blocksManager:o}=BlocksContext.useContext(),{getBacklinksConsideringAliases:a,getAllAliases:s}=BacklinksContext.useContext(),l=computed(()=>a(e.blockId)),c=computed(()=>s(e.blockId)),d=computed(()=>[...l.value].map(u=>o.getBlock(u)).filter(u=>u!==null));return(u,f)=>(openBlock(),createBlock(unref(_sfc_main$1A),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1s),null,{default:withCtx(()=>[l.value.size>0?(openBlock(),createElementBlock("div",_hoisted_1$B,toDisplayString$1(l.value.size),1)):createCommentVNode("",!0)]),_:1}),createVNode(unref(_sfc_main$1y),{class:"w-[300px] max-h-[300px] overflow-y-auto"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(d.value,v=>(openBlock(),createBlock(unref(_sfc_main$1w),{key:v.id,class:"w-full block"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$k,[createVNode(_sfc_main$1n,{class:"flex-grow !max-w-[unset]",block:v,"block-tree":void 0,readonly:!0,"highlight-refs":c.value},null,8,["block","highlight-refs"]),createVNode(_sfc_main$1g,{class:"*:text-xs mt-1","block-id":v.id},null,8,["block-id"])])]),_:2},1024))),128)),createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",class:"w-full mt-2"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(u.$t("kbView.backlinks.openBacklinksPanel")),1)]),_:1})]),_:1})]),_:1}))}}),_hoisted_1$A=["data-item-type","data-block-id","data-item-id","data-block-level","data-block-ref-color"],_hoisted_2$j={class:"indent-lines"},_hoisted_3$f=["data-level"],_hoisted_4$c={class:"relative block-content-container"},_hoisted_5$6={class:"block-buttons"},_sfc_main$1e=defineComponent({__name:"BasicBlockItem",props:{blockTree:{default:void 0},block:{},level:{},hideFoldButton:{type:Boolean,default:!1},hideContextMenu:{type:Boolean,default:!1},hideBullet:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},highlightTerms:{default:()=>[]},highlightRefs:{default:()=>[]},itemType:{default:"basic-block"},itemId:{default:void 0},fold:{type:Boolean,default:void 0},handleClickFoldButton:{type:Function,default:void 0}},setup(n){const e=n,o=useTaskQueue(),{blockEditor:a}=BlocksContext.useContext(),{lastFocusedDiId:s,lastFocusedBlockTree:l}=LastFocusContext.useContext(),{mainRootBlockId:c}=MainTreeContext.useContext(),{selectedBlockIds:d,draggingDropPos:u,dragging:f}=BlockSelectDragContext.useContext(),{getMirrors:v}=IndexContext.useContext(),{openAt:b}=BlockContextMenuContext.useContext(),k=computed(()=>v(e.block.id)),x=computed(()=>k.value.size>0||e.block.type==="mirrorBlock"),_=computed(()=>e.fold??e.block.fold),E=computed(()=>e.block.childrenIds.length>0),B=computed(()=>d.value.allNonFolded.includes(e.block.id)),M=()=>{s.value=e.itemId??null,l.value=e.blockTree??null,f.value||(d.value={topLevelOnly:[],allNonFolded:[]})},V=()=>{if(e.handleClickFoldButton){e.handleClickFoldButton();return}else{const L=e.block.id;o.addTask(()=>a.toggleFold(L))}},F=L=>{L.button===0&&(c.value=e.block.id)},I=L=>{L.button===2&&(L.preventDefault(),b({x:L.clientX,y:L.clientY},e.block.id))};return(L,U)=>{var Z,K;return openBlock(),createElementBlock("div",{class:normalizeClass(["block-item",{hasChildren:E.value,fold:_.value,selected:B.value,[L.itemType]:!0}]),"data-item-type":L.itemType,"data-block-id":L.block.id,"data-item-id":L.itemId,"data-block-level":L.level,"data-block-ref-color":(Z=L.block.metadata)==null?void 0:Z.blockRefColor,onFocusin:M},[createBaseVNode("div",_hoisted_2$j,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(L.level,j=>(openBlock(),createElementBlock("div",{class:"indent-line",key:j,"data-level":j},null,8,_hoisted_3$f))),128))]),createBaseVNode("div",_hoisted_4$c,[createBaseVNode("div",_hoisted_5$6,[L.hideFoldButton?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:"fold-button",onClick:withModifiers(V,["stop"])},[createVNode(unref(Triangle))]))]),L.hideBullet?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:"bullet shrink-0",onClick:withModifiers(F,["stop"]),onContextmenu:I},[x.value?(openBlock(),createBlock(unref(Diamond),{key:0,class:"diamond"})):(openBlock(),createBlock(unref(Circle),{key:1,class:"circle"}))],32)),createVNode(_sfc_main$1n,{block:L.block,"item-id":L.itemId,"block-tree":L.blockTree,readonly:L.readonly,"highlight-terms":L.highlightTerms,"highlight-refs":L.highlightRefs},null,8,["block","item-id","block-tree","readonly","highlight-terms","highlight-refs"]),createVNode(_sfc_main$1f,{"block-id":L.block.id},null,8,["block-id"])]),((K=unref(u))==null?void 0:K.itemId)===L.itemId?(openBlock(),createElementBlock("div",{key:0,class:"absolute bottom-[-2px] left-0 h-[2px] rounded w-[40%] bg-blue-500",style:normalizeStyle({marginLeft:unref(u).relIndent+"px"})},null,4)):createCommentVNode("",!0)],42,_hoisted_1$A)}}}),_sfc_main$1d=defineComponent({__name:"BacklinksBlockItem",props:{blockTree:{default:void 0},refBlockId:{},itemId:{default:void 0},block:{},readonly:{type:Boolean,default:!1},highlightTerms:{default:()=>[]},highlightRefs:{default:()=>[]}},setup(n){const e=n,o=computed(()=>{const s=e.blockTree;return s?!s.expandedBP.value[e.block.id]:e.block.fold}),a=()=>{const s=e.blockTree;if(!s)return;const l=s.expandedBP.value;l[e.block.id]?delete l[e.block.id]:l[e.block.id]=!0};return(s,l)=>(openBlock(),createBlock(_sfc_main$1e,mergeProps(s.$props,{"item-type":"backlink-block",level:0,"highlight-refs":[...s.highlightRefs,s.refBlockId],fold:o.value,"item-id":s.itemId,"handle-click-fold-button":a}),null,16,["highlight-refs","fold","item-id"]))}}),_hoisted_1$z={class:"block-item flex items-center ml-6 mt-10 mb-2 text-muted-foreground","data-item-type":"backlink-header"},_sfc_main$1c=defineComponent({__name:"BacklinksHeaderItem",props:{blockId:{},backlinks:{}},setup(n){return(e,o)=>(openBlock(),createElementBlock("div",_hoisted_1$z,[createVNode(unref(Link),{class:"size-4 mr-2"}),createBaseVNode("div",null,toDisplayString$1(e.$t("kbView.backlinksPanel.nBacklinks",{count:e.backlinks.length})),1),createVNode(unref(_sfc_main$1A),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1s),{"as-child":""},{default:withCtx(()=>[createVNode(unref(Ellipsis),{class:"size-4 ml-2 cursor-pointer hover:text-primary transition-colors"})]),_:1}),createVNode(unref(_sfc_main$1y),{class:"min-w-[200px]"},{default:withCtx(()=>[createVNode(unref(_sfc_main$1x),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(ListTree),{class:"size-4 mr-2"}),o[0]||(o[0]=createTextVNode(" \u663E\u793A\u8DEF\u5F84 "))]),_:1}),createVNode(unref(_sfc_main$1v),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1t),null,{default:withCtx(()=>[createVNode(unref(PanelsTopLeft),{class:"size-4 mr-2"}),o[1]||(o[1]=createTextVNode(" \u5207\u6362\u89C6\u56FE "))]),_:1}),createVNode(unref(ih),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1u),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(List),{class:"size-4 mr-2"}),o[2]||(o[2]=createTextVNode(" \u5217\u8868\u89C6\u56FE "))]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(Table),{class:"size-4 mr-2"}),o[3]||(o[3]=createTextVNode(" \u8868\u683C\u89C6\u56FE "))]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(Kanban),{class:"size-4 mr-2"}),o[4]||(o[4]=createTextVNode(" \u770B\u677F\u89C6\u56FE "))]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1v),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1t),null,{default:withCtx(()=>[createVNode(unref(ArrowUpNarrowWide),{class:"size-4 mr-2"}),o[5]||(o[5]=createTextVNode(" \u6392\u5E8F\u89C4\u5219 "))]),_:1}),createVNode(unref(ih),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1u),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(ArrowUpAZ),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(e.$t("kbView.command.sortDictAsc")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(ArrowDownAZ),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(e.$t("kbView.command.sortDictDesc")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowUp),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(e.$t("kbView.command.ctimeAsc")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowDown),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(e.$t("kbView.command.ctimeDesc")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowUp),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(e.$t("kbView.command.mtimeAsc")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(CalendarArrowDown),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(e.$t("kbView.command.mtimeDesc")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}}),_sfc_main$1b=defineComponent({__name:"PotentialLinksBlockItem",props:{blockTree:{default:void 0},refBlockId:{},block:{},readonly:{type:Boolean,default:!1},itemId:{default:void 0},highlightTerms:{default:()=>[]},highlightRefs:{default:()=>[]}},setup(n){const e=n,o=computed(()=>{const s=e.blockTree;return s?!s.expandedBP.value[e.block.id]:e.block.fold}),a=()=>{const s=e.blockTree;if(!s)return;const l=s.expandedBP.value;l[e.block.id]?delete l[e.block.id]:l[e.block.id]=!0};return(s,l)=>(openBlock(),createBlock(_sfc_main$1e,mergeProps(s.$props,{"item-type":"potential-links-block",level:0,"highlight-refs":[...s.highlightRefs??[],s.refBlockId],fold:o.value,"item-id":s.itemId,"handle-click-fold-button":a}),null,16,["highlight-refs","fold","item-id"]))}}),_hoisted_1$y={class:"block-item flex items-center ml-6 mt-10 text-muted-foreground mb-2","data-item-type":"potential-links-header"},_sfc_main$1a=defineComponent({__name:"PotentialLinksHeaderItem",props:{blockId:{},potentialLinks:{}},setup(n){return(e,o)=>(openBlock(),createElementBlock("div",_hoisted_1$y,[createVNode(unref(Link),{class:"size-4 mr-2"}),createBaseVNode("div",null,toDisplayString$1(e.$t("kbView.backlinksPanel.nPotentialLinks",{count:e.potentialLinks.length})),1)]))}}),_sfc_main$19=defineComponent({__name:"BacklinksDescendantItem",props:{blockTree:{default:void 0},block:{},level:{},itemId:{default:void 0},readonly:{type:Boolean,default:!1},highlightTerms:{default:()=>[]},highlightRefs:{default:()=>[]}},setup(n){const e=n,o=computed(()=>{const s=e.blockTree;return s&&s.expandedBP.value[e.block.id]?!1:e.block.fold}),a=()=>{const s=e.blockTree;if(!s)return;const l=s.expandedBP.value;l[e.block.id]?delete l[e.block.id]:l[e.block.id]=!0};return(s,l)=>(openBlock(),createBlock(_sfc_main$1e,mergeProps(s.$props,{"item-type":"backlink-descendant",fold:o.value,"item-id":s.itemId,"handle-click-fold-button":a}),null,16,["fold","item-id"]))}}),_sfc_main$18=defineComponent({__name:"PotentialLinksDescendantItem",props:{blockTree:{default:void 0},block:{},level:{},readonly:{type:Boolean,default:!1},itemId:{default:void 0},highlightTerms:{default:()=>[]},highlightRefs:{default:()=>[]}},setup(n){const e=n,o=computed(()=>{const s=e.blockTree;return s&&s.expandedBP.value[e.block.id]?!1:e.block.fold}),a=()=>{const s=e.blockTree;if(!s)return;const l=s.expandedBP.value;l[e.block.id]?delete l[e.block.id]:l[e.block.id]=!0};return(s,l)=>(openBlock(),createBlock(_sfc_main$1e,mergeProps(s.$props,{"item-type":"potential-links-descendant",fold:o.value,"handle-click-fold-button":a,"item-id":s.itemId}),null,16,["fold","item-id"]))}}),_hoisted_1$x=["data-item-type","data-block-id","data-block-level"],_hoisted_2$i={class:"indent-lines"},_hoisted_3$e=["data-level"],_hoisted_4$b={class:"relative block-content-container"},_sfc_main$17=defineComponent({__name:"MissingBlockItem",props:{blockTree:{default:void 0},blockId:{},level:{},hideBullet:{type:Boolean,default:!1},itemType:{default:"missing-block"},itemId:{default:void 0}},setup(n){const{openAt:e}=BlockContextMenuContext.useContext(),o=n,{selectedBlockIds:a,draggingDropPos:s}=BlockSelectDragContext.useContext(),l=computed(()=>a.value.allNonFolded.includes(o.blockId)),c=d=>{d.button===2&&(d.preventDefault(),e({x:d.clientX,y:d.clientY},o.blockId))};return(d,u)=>{var f;return openBlock(),createElementBlock("div",{class:normalizeClass(["missing-block-item block-item",{selected:l.value,[d.itemType]:!0}]),"data-item-type":d.itemType,"data-block-id":d.blockId,"data-block-level":d.level},[createBaseVNode("div",_hoisted_2$i,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(d.level,v=>(openBlock(),createElementBlock("div",{class:"indent-line",key:v,"data-level":v},null,8,_hoisted_3$e))),128))]),createBaseVNode("div",_hoisted_4$b,[u[0]||(u[0]=createBaseVNode("div",{class:"block-buttons"},null,-1)),createBaseVNode("div",{class:"bullet shrink-0",onContextmenu:c},[createVNode(unref(Circle),{class:"circle"})],32),u[1]||(u[1]=createBaseVNode("div",{class:"text-red-500"},"Missing Block",-1))]),((f=unref(s))==null?void 0:f.itemId)===d.itemId?(openBlock(),createElementBlock("div",{key:0,class:"absolute bottom-[-2px] left-0 h-[2px] rounded w-[40%] bg-blue-500",style:normalizeStyle({marginLeft:unref(s).relIndent+"px"})},null,4)):createCommentVNode("",!0)],10,_hoisted_1$x)}}}),_sfc_main$16=defineComponent({__name:"RootBlockItem",props:{blockTree:{default:void 0},itemId:{default:void 0},block:{},readonly:{type:Boolean,default:!1},highlightTerms:{default:()=>[]},highlightRefs:{default:()=>[]}},setup(n){return(e,o)=>(openBlock(),createBlock(_sfc_main$1e,mergeProps(e.$props,{class:"root-block","item-type":"root-block",level:0,"highlight-refs":e.highlightRefs,fold:!1,"item-id":e.itemId,"hide-bullet":!0,"hide-fold-button":!0,"hide-context-menu":!0}),null,16,["highlight-refs","item-id"]))}}),_hoisted_1$w={class:"side-pane-item-header flex items-center justify-between ml-[20px] mt-6 mb-2"},_hoisted_2$h={class:"mr-2"},_sfc_main$15=defineComponent({__name:"SidePaneItemHeader",props:{blockTree:{},blockId:{},itemId:{}},setup(n){const{sidePaneBlockIds:e,focusNext:o,focusPrev:a}=SidebarContext.useContext(),s=n,l=()=>{e.value=e.value.filter(c=>c!==s.blockId)};return(c,d)=>(openBlock(),createElementBlock("div",_hoisted_1$w,[createVNode(_sfc_main$1g,{"block-id":c.blockId},null,8,["block-id"]),createBaseVNode("div",_hoisted_2$h,[createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",class:"p-[1px] h-[unset] mx-1 text-muted-foreground font-normal",onClick:d[0]||(d[0]=u=>unref(a)(c.blockId))},{default:withCtx(()=>[createVNode(unref(ChevronUp),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(c.$t("kbView.sidePane.prev")),1)]),_:1})]),_:1}),createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",class:"p-[1px] h-[unset] mx-1 text-muted-foreground font-normal",onClick:d[1]||(d[1]=u=>unref(o)(c.blockId))},{default:withCtx(()=>[createVNode(unref(ChevronDown),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(c.$t("kbView.sidePane.next")),1)]),_:1})]),_:1}),createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",class:"p-[1px] mx-1 h-[unset] text-muted-foreground font-normal",onClick:l},{default:withCtx(()=>[createVNode(unref(X),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(c.$t("kbView.sidePane.remove")),1)]),_:1})]),_:1})])]))}}),_hoisted_1$v=["block-tree-id"],_sfc_main$14=defineComponent({__name:"BlockTree",props:{id:{},virtual:{type:Boolean,default:!0},rootBlockIds:{},rootBlockLevel:{},addSidePaneHeader:{type:Boolean,default:!1},enlargeRootBlock:{type:Boolean,default:!1},showBacklinks:{type:Boolean,default:!0},showPotentialLinks:{type:Boolean,default:!0},paddingBottom:{default:200},paddingTop:{default:0}},setup(n,{expose:e}){const o=n,a=useEventBus(),s=BlockTreeContext.useContext(),l=BacklinksContext.useContext(),c=IndexContext.useContext(),{blocksManager:d,blockEditor:u}=BlocksContext.useContext(),f=BlockSelectDragContext.useContext(),v=ref(null),b=ref(null),k=shallowRef(),x=mitt(),_=a.eventRefs.afterBlocksTrCommit,E=new Map,B=ref({}),M=()=>{var we,ce;const Ce=o.id;console.time(`calc displayItems ${Ce}`),k.value=generateDisplayItems({rootBlockIds:o.rootBlockIds,rootBlockLevel:o.rootBlockLevel,enlargeRootBlock:o.enlargeRootBlock,blocksManager:d,showBacklinks:o.showBacklinks??!0,showPotentialLinks:o.showPotentialLinks??!0,expandedBP:B.value,getBacklinksContext:()=>l,getIndexContext:()=>c,addSidePaneHeader:o.addSidePaneHeader}),console.timeEnd(`calc displayItems ${Ce}`),(ce=(we=b.value)==null?void 0:we.forceUpdate)==null||ce.call(we),nextTick(()=>{x.emit("displayItemsUpdated",[k.value])})};watch(B,M,{deep:!0}),watch([()=>o.rootBlockIds,_],M,{immediate:!0});const V=Ce=>new Promise(we=>{x.once("displayItemsUpdated",()=>{Ce&&Ce(),we()})}),F=(Ce,we)=>{for(let ce=0;ce<k.value.length;ce++)if(k.value[ce].itemId===Ce){for(let ee=ce-1;ee>=0;ee--){const oe=k.value[ee];if(!we||we(oe))return[oe,ee]}return null}return null},I=(Ce,we)=>{for(let ce=0;ce<k.value.length;ce++)if(k.value[ce].itemId===Ce){for(let ee=ce+1;ee<k.value.length;ee++){const oe=k.value[ee];if(!we||we(oe))return[oe,ee]}return null}return null},L=(Ce,we)=>F(Ce,we),U=(Ce,we)=>I(Ce,we),Z=Ce=>{var we;return((we=v.value)==null?void 0:we.querySelector(`[data-id="${Ce}"]`))??null},K=Ce=>E.get(Ce)??null,j=(Ce,we)=>{E.set(Ce,we)},W=(Ce,we)=>{const ce=E.get(Ce);ce===we&&!ce.dom.isConnected&&E.delete(Ce)},Y=Ce=>{var ee,oe;const we=Z(Ce);if(we&&inViewport(we))return!0;const ce=k.value.findIndex(se=>se.itemId==Ce);if(ce!=null&&ce>=0){const se=(ee=b.value)==null?void 0:ee.getItemPosByIndex(ce);if(se){const{top:ge}=se;(oe=b.value)==null||oe.scrollToOffset(ge-60)}}return!0},G=async(Ce,we={})=>{var ke;let{scrollIntoView:ce,highlight:ee}=we;if(ce??(ce=!0),ee??(ee=!1),ce&&!Y(Ce))return;await timeout(50);const oe=K(Ce);oe&&oe.focus();const se=(ke=Z(Ce))==null?void 0:ke.querySelector(".block-item");if(!se)return;const ge=se.querySelector(".math-content");ge instanceof HTMLElement&&ge.click();const _e=se.querySelector(".cursor-container");_e instanceof HTMLElement&&_e.focus(),ee&&(se.classList.add("highlight-keep"),setTimeout(()=>{se.classList.add("highlight-fade")},1e3),setTimeout(()=>{se.classList.remove("highlight-keep"),se.classList.remove("highlight-fade")},3e3))},fe=async(Ce,we={})=>{let{scrollIntoView:ce,highlight:ee,expandIfFold:oe}=we;ce??(ce=!0),ee??(ee=!1),oe??(oe=!1),oe&&await u.locateBlock(Ce,Ve),await timeout(0);const se=le(ge=>ge.type==="basic-block"&&ge.block.id===Ce);se&&await G(se.itemId,{scrollIntoView:ce,highlight:ee})},le=Ce=>{var we;return((we=k.value)==null?void 0:we.find(ce=>Ce(ce)))??null},pe=Ce=>{const we=K(Ce);if(we instanceof EditorView$1){const ce=we.state.tr,ee=AllSelection.atEnd(we.state.doc);ce.setSelection(ee),we.dispatch(ce)}else if(we instanceof EditorView){const ce=we.state.doc.length;we.dispatch({selection:{anchor:ce}})}},ue=Ce=>{const we=K(Ce);if(we instanceof EditorView$1){const ce=we.state.tr,ee=AllSelection.atStart(we.state.doc);ce.setSelection(ee),we.dispatch(ce)}else we instanceof EditorView&&we.dispatch({selection:{anchor:0}})},Ne=Ce=>{var we;return((we=k.value)==null?void 0:we.find(ce=>ce.itemId===Ce))??null},Ve={getProps:()=>o,getId:()=>o.id,getDom:()=>v.value,getRootBlockIds:()=>o.rootBlockIds,getDisplayItems:()=>k.value,getDi:Ne,findDi:le,localEventBus:x,expandedBP:B,nextUpdate:V,getEditorViews:()=>E,getEditorView:K,registerEditorView:j,unregisterEditorView:W,getSuccessorDi:I,getPredecessorDi:F,getDiAbove:L,getDiBelow:U,focusDi:G,focusBlock:fe,getDomOfDi:Z,moveCursorToTheEnd:pe,moveCursorToBegin:ue};e(Ve);let Ze=null,We=null,ze=!1,qe=null;const dt=()=>{var Ce;if(!qe){const we=(Ce=v.value)==null?void 0:Ce.querySelector(".indent-line");if(we){const ce=parseFloat(window.getComputedStyle(we).marginRight);qe={width:we.clientWidth,rightMargin:ce}}}return qe},Xe=Ce=>{try{if(ze){const we=useTaskQueue(),ce=f.draggingDropPos.value;if(!ce)return;const{itemId:ee,absLevel:oe}=ce,se=Ne(ee);if(!se||!DI_FILTERS.isBlockDi(se))return;const ge=f.selectedBlockIds.value,_e=d.getBlockLevel(se.block.id);oe>_e?we.addTask(()=>{const ke=u.normalizePos({parentId:se.block.id,childIndex:"first"});ke&&u.moveBlocks({blockIds:ge.topLevelOnly,pos:ke})}):we.addTask(()=>{const ke=u.normalizePos({baseBlockId:se.block.id,offset:1});ke&&u.moveBlocks({blockIds:ge.topLevelOnly,pos:ke})})}}finally{Ze=null,We=null,ze=!1,f.dragging.value=!1,f.draggingDropPos.value=null,document.removeEventListener("pointermove",ft),document.removeEventListener("pointerup",Xe),document.removeEventListener("pointerleave",Xe)}},Ge=()=>{f.draggingDropPos.value=null},ft=useThrottleFn(Ce=>{var we,ce,ee,oe;if(!(Date.now().valueOf()-(We??0)<200))if(f.dragging.value=!0,Ce.preventDefault(),Ce.stopPropagation(),ze){if(f.selectedBlockIds.value.topLevelOnly.length===0){if(!Ze||!DI_FILTERS.isBlockDi(Ze))return;const de={topLevelOnly:[Ze.block.id],allNonFolded:[]};d.forDescendants({rootBlockId:Ze.block.id,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:Oe=>{de.allNonFolded.push(Oe.id)}}),f.selectedBlockIds.value=de}const se=getHoveredElementWithClass(Ce.target,"block-item"),ge=se==null?void 0:se.dataset.itemId,_e=parseInt(se==null?void 0:se.dataset.blockLevel);if(!ge||se.classList.contains("selected"))return Ge();const{width:ke,rightMargin:Ee}=dt(),te=Math.floor((Ce.x+Ee)/(ke+Ee)),re=se.getBoundingClientRect();if(Ce.y<re.y+re.height/2){const de=L(ge,DI_FILTERS.isBlockDi);if(!de||!DI_FILTERS.isBlockDi(de[0]))return Ge();const Oe=(we=Z(de[0].itemId))==null?void 0:we.querySelector(".block-item");if(!(Oe instanceof HTMLElement))return Ge();const me=parseInt(Oe.dataset.blockLevel),Be=Oe.classList.contains("fold"),ht=Oe.classList.contains("hasChildren"),pt=Be&&ht?me:me+1,xt=clip(te,pt,_e);f.draggingDropPos.value={itemId:de[0].itemId,relIndent:xt*(ke+Ee)+ke,absLevel:xt+o.rootBlockLevel}}else{let de;const Oe=U(ge,DI_FILTERS.isBlockDi),me=se.classList.contains("fold"),Be=se.classList.contains("hasChildren");if(Oe){if(!DI_FILTERS.isBlockDi(Oe[0]))return Ge();const ht=(ce=Z(Oe[0].itemId))==null?void 0:ce.querySelector(".block-item");if(!(ht instanceof HTMLElement))return Ge();const pt=parseInt(ht.dataset.blockLevel),xt=me&&Be?_e:_e+1,bt=pt;de=clip(te,xt,bt),console.log(`pointerLevel: ${te}, clipFrom: ${xt}, clipTo: ${bt}, clippedLevel: ${de}`)}else{const ht=me&&Be?_e:_e+1;de=clip(te,ht,1)}f.draggingDropPos.value={itemId:ge,relIndent:de*(ke+Ee)+ke,absLevel:de+o.rootBlockLevel}}}else{const se=(ee=getHoveredElementWithClass(Ce.target,"block-item"))==null?void 0:ee.dataset.itemId,ge=se?Ne(se):null;if(!se||!ge||!DI_FILTERS.isBlockDi(ge)||Ze==null||!DI_FILTERS.isBlockDi(Ze))return;if(Ze.itemId===se){f.selectedBlockIds.value={topLevelOnly:[],allNonFolded:[]},G(se,{scrollIntoView:!1});return}(oe=document.activeElement)==null||oe.blur(),f.selectedBlockIds.value={topLevelOnly:[],allNonFolded:[]};const _e=d.getBlockPath(Ze.block.id).map(re=>re.id),ke=d.getBlockPath(ge.block.id).map(re=>re.id);let Ee=-1,te=-1;for(let re=0;re<_e.length;re++){const de=ke.indexOf(_e[re]);if(de!=-1){Ee=re,te=de;break}}if(Ee!==-1&&te!==-1)if(Ee===0||te===0){const re=_e[Ee],de={topLevelOnly:[re],allNonFolded:[]};d.forDescendants({rootBlockId:re,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:Oe=>{de.allNonFolded.push(Oe.id)}}),f.selectedBlockIds.value=de}else{const re=_e[Ee],de=d.getBlock(re);if(!de)return;const Oe=_e[Ee-1],me=ke[te-1],Be=de.childrenIds.indexOf(Oe),ht=de.childrenIds.indexOf(me),pt=Math.min(Be,ht),xt=Math.max(Be,ht),bt={topLevelOnly:de.childrenIds.slice(pt,xt+1),allNonFolded:[]};for(let St=pt;St<=xt;St++){const Ct=de.childrenIds[St];d.forDescendants({rootBlockId:Ct,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:$t=>{bt.allNonFolded.push($t.id)}})}f.selectedBlockIds.value=bt}}},100),Te=Ce=>{if(Ce.pointerType==="mouse"&&Ce.button!==0)return;const we=getHoveredElementWithClass(Ce.target,"block-item");if(!we)return;const ce=we.dataset.itemId,ee=ce?Ne(ce):null;!ce||!ee||!DI_FILTERS.isBlockDi(ee)||(Ze=ee,We=Date.now().valueOf(),f.dragging.value=!1,getHoveredElementWithClass(Ce.target,"bullet")&&(ze=!0),document.addEventListener("pointermove",ft),document.addEventListener("pointerup",Xe),document.addEventListener("pointerleave",Xe))};return onMounted(()=>{const Ce=v.value;Ce&&Object.assign(Ce,{controller:Ve}),s.registerBlockTree(Ve)}),onUnmounted(()=>{s.unregisterBlockTree(o.id)}),(Ce,we)=>(openBlock(),createElementBlock("div",{class:"block-tree select-none",ref_key:"$blockTree",ref:v,"block-tree-id":Ce.id,style:normalizeStyle({"--padding-bottom":`${Ce.paddingBottom}px`,"--padding-top":`${Ce.paddingTop}px`}),onPointerdown:Te},[Ce.virtual?(openBlock(),createBlock(unref(VirtList),{key:0,itemKey:"itemId",class:"vlist",list:k.value,buffer:10,minSize:24,ref_key:"$vlist",ref:b,itemClass:"block-container"},{header:withCtx(()=>we[0]||(we[0]=[])),default:withCtx(({itemData:ce})=>[ce.type=="root-block"?(openBlock(),createBlock(_sfc_main$16,{key:ce.itemId,"item-id":ce.itemId,"block-tree":Ve,block:ce.block,"highlight-terms":ce.highlightTerms,"highlight-refs":ce.highlightRefs},null,8,["item-id","block","highlight-terms","highlight-refs"])):createCommentVNode("",!0),ce.type=="basic-block"?(openBlock(),createBlock(_sfc_main$1e,{key:ce.itemId,"item-id":ce.itemId,"block-tree":Ve,block:ce.block,level:ce.level,"highlight-terms":ce.highlightTerms,"highlight-refs":ce.highlightRefs},null,8,["item-id","block","level","highlight-terms","highlight-refs"])):createCommentVNode("",!0),ce.type=="backlink-header"?(openBlock(),createBlock(_sfc_main$1c,{key:ce.itemId,"block-tree":Ve,"block-id":ce.blockId,backlinks:ce.backlinks},null,8,["block-id","backlinks"])):createCommentVNode("",!0),ce.type=="backlink-block"?(openBlock(),createBlock(_sfc_main$1d,{key:ce.itemId,"item-id":ce.itemId,"block-tree":Ve,block:ce.block,"ref-block-id":ce.refBlockId,readonly:ce.readonly,"highlight-terms":ce.highlightTerms,"highlight-refs":ce.highlightRefs},null,8,["item-id","block","ref-block-id","readonly","highlight-terms","highlight-refs"])):createCommentVNode("",!0),ce.type=="backlink-descendant"?(openBlock(),createBlock(_sfc_main$19,{key:ce.itemId,"item-id":ce.itemId,"block-tree":Ve,block:ce.block,level:ce.level,readonly:ce.readonly,"highlight-terms":ce.highlightTerms,"highlight-refs":ce.highlightRefs},null,8,["item-id","block","level","readonly","highlight-terms","highlight-refs"])):createCommentVNode("",!0),ce.type=="potential-links-header"?(openBlock(),createBlock(_sfc_main$1a,{key:ce.itemId,"block-id":ce.blockId,"potential-links":ce.potentialLinks},null,8,["block-id","potential-links"])):createCommentVNode("",!0),ce.type=="potential-links-block"?(openBlock(),createBlock(_sfc_main$1b,{key:ce.itemId,"item-id":ce.itemId,"block-tree":Ve,block:ce.block,"ref-block-id":ce.refBlockId,readonly:ce.readonly,"highlight-terms":ce.highlightTerms,"highlight-refs":ce.highlightRefs},null,8,["item-id","block","ref-block-id","readonly","highlight-terms","highlight-refs"])):createCommentVNode("",!0),ce.type=="potential-links-descendant"?(openBlock(),createBlock(_sfc_main$18,{key:ce.itemId,"item-id":ce.itemId,"block-tree":Ve,block:ce.block,level:ce.level,readonly:ce.readonly,"highlight-terms":ce.highlightTerms,"highlight-refs":ce.highlightRefs},null,8,["item-id","block","level","readonly","highlight-terms","highlight-refs"])):createCommentVNode("",!0),ce.type=="missing-block"?(openBlock(),createBlock(_sfc_main$17,{key:ce.itemId,"item-id":ce.itemId,"block-id":ce.blockId,level:ce.level},null,8,["item-id","block-id","level"])):createCommentVNode("",!0),ce.type=="side-pane-header"?(openBlock(),createBlock(_sfc_main$15,{key:ce.itemId,"block-tree":Ve,"block-id":ce.blockId,"item-id":ce.itemId},null,8,["block-id","item-id"])):createCommentVNode("",!0)]),footer:withCtx(()=>we[1]||(we[1]=[])),_:1},8,["list"])):createCommentVNode("",!0)],44,_hoisted_1$v))}});function copyAsHtml(n){const e=new Blob([n],{type:"text/html"}),o=[new ClipboardItem({[e.type]:e})];navigator.clipboard.write(o)}function copyAsPlainText(n){navigator.clipboard.writeText(n)}const _sfc_main$13=defineComponent({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Oh),mergeProps(o.value,{class:unref(cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_hoisted_1$u={class:"flex flex-col gap-4 py-2"},_hoisted_2$g={class:"flex flex-col space-y-2"},_hoisted_3$d={key:0,class:"flex flex-col space-y-2"},_hoisted_4$a={class:"max-h-[30vh] max-w-full overflow-y-auto overflow-x-hidden text-wrap"},_hoisted_5$5={class:"text-wrap"},_sfc_main$12=defineComponent({__name:"Exporter",setup(n){const{open:e,blockId:o,closeExporter:a,exportSubtreeToHtml:s,exportSubtreeToMarkdown:l,exportSubtreeToPdf:c,exportSubtreeToPlainText:d}=ExporterContext.useContext(),u=ref("html"),f=computed(()=>{if(!o.value)return"";switch(u.value){case"html":return s(o.value);case"markdown":return l(o.value);case"plainText":return d(o.value);default:return""}});function v(){u.value==="html"?copyAsHtml(f.value):(u.value==="markdown"||u.value==="plainText")&&copyAsPlainText(f.value),a()}function b(){if(u.value!=="pdf"){const k=new Blob([f.value],{type:"text/plain"}),x=URL.createObjectURL(k),_=document.createElement("a");_.href=x;const E=u.value==="html"?"html":u.value==="markdown"?"md":"txt";_.download=`export_${dayjs().format("YYYY-MM-DD-HH-mm-ss")}.${E}`,_.click(),URL.revokeObjectURL(x)}a()}return(k,x)=>(openBlock(),createBlock(unref(_sfc_main$2a),{open:unref(e),"onUpdate:open":x[1]||(x[1]=_=>!_&&unref(a)())},{default:withCtx(()=>[createVNode(unref(_sfc_main$29),{class:"max-w-[80vw] w-[500px] flex flex-col gap-4"},{default:withCtx(()=>[createVNode(unref(_sfc_main$26),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$25),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(k.$t("kbView.exporter.title")),1)]),_:1}),createVNode(unref(_sfc_main$28),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(k.$t("kbView.exporter.description")),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$u,[createBaseVNode("div",_hoisted_2$g,[createVNode(unref(_sfc_main$13),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(k.$t("kbView.exporter.exportFormat")),1)]),_:1}),createVNode(unref(_sfc_main$1N),{modelValue:u.value,"onUpdate:modelValue":x[0]||(x[0]=_=>u.value=_)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1H),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1G))]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1L),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1K),{value:"html"},{default:withCtx(()=>x[2]||(x[2]=[createTextVNode("HTML")])),_:1}),createVNode(unref(_sfc_main$1K),{value:"markdown"},{default:withCtx(()=>x[3]||(x[3]=[createTextVNode("Markdown")])),_:1}),createVNode(unref(_sfc_main$1K),{value:"pdf"},{default:withCtx(()=>x[4]||(x[4]=[createTextVNode("PDF")])),_:1}),createVNode(unref(_sfc_main$1K),{value:"plainText"},{default:withCtx(()=>x[5]||(x[5]=[createTextVNode("Plain Text")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),u.value!=="pdf"?(openBlock(),createElementBlock("div",_hoisted_3$d,[createVNode(unref(_sfc_main$13),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(k.$t("kbView.exporter.preview")),1)]),_:1}),createBaseVNode("div",_hoisted_4$a,[createBaseVNode("pre",_hoisted_5$5,toDisplayString$1(f.value),1)])])):createCommentVNode("",!0)]),createVNode(unref(_sfc_main$27),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"outline",onClick:unref(a)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(k.$t("kbView.exporter.cancel")),1)]),_:1},8,["onClick"]),createVNode(unref(_sfc_main$2u),{variant:"outline",disabled:u.value==="pdf",onClick:v},{default:withCtx(()=>[createVNode(unref(Clipboard),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(k.$t("kbView.exporter.copyToClipboard")),1)]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$2u),{variant:"outline",onClick:b},{default:withCtx(()=>[createVNode(unref(File),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(k.$t("kbView.exporter.exportToFile")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}}),_sfc_main$11=defineComponent({__name:"FieldValueInspector",setup(n){const{open:e,blockId:o}=FieldValueInspectorContext.useContext(),{getFieldValues:a}=FieldsManagerContext.useContext(),s=computed(()=>o.value?a(o.value):{});return(l,c)=>(openBlock(),createBlock(unref(_sfc_main$2a),{open:unref(e),"onUpdate:open":c[0]||(c[0]=d=>isRef(e)?e.value=d:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$29),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$26),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$25),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("kbView.fieldValuesInspector.title")),1)]),_:1}),createVNode(unref(_sfc_main$28),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.$t("kbView.fieldValuesInspector.description")),1)]),_:1}),createBaseVNode("pre",null,toDisplayString$1(JSON.stringify(s.value,null,2)),1)]),_:1})]),_:1})]),_:1},8,["open"]))}}),BasicSettingsContext=createContext(()=>{const{registerSettingGroup:n,registerSettingItem:e}=SettingsContext.useContext(),{kbPrefix:o}=ServerInfoContext.useContext();n({key:"basic",label:{zh:"\u57FA\u672C\u8BBE\u7F6E"}});const a="basic.textFontFamily",s=computed(()=>`${o.value}${a}`),l="",c=useLocalStorage2(s,l);e({id:a,groupKey:"basic",label:{zh:"\u6B63\u6587\u5B57\u4F53"},desc:{zh:"\u6307\u5B9A\u7B14\u8BB0\u6B63\u6587\u7684\u5B57\u4F53\u3002"},defaultValue:l,value:useWritableComputedRef(c),componentType:{type:"fontSelector"}});const d="basic.uiFontFamily",u=computed(()=>`${o.value}${d}`),f="",v=useLocalStorage2(u,f);e({id:d,groupKey:"basic",label:{zh:"\u754C\u9762\u5B57\u4F53"},desc:{zh:"\u6307\u5B9A\u8F6F\u4EF6\u754C\u9762\u5B57\u4F53\u3002\u5728\u4E0D\u6307\u5B9A\u5176\u4ED6\u5B57\u4F53\u7684\u60C5\u51B5\u4E0B\uFF0C\u8BE5\u5B57\u4F53\u5C06\u6210\u4E3A\u8F6F\u4EF6\u7684\u57FA\u7840\u5B57\u4F53\u3002"},defaultValue:f,value:useWritableComputedRef(v),componentType:{type:"fontSelector"}});const b="basic.monospaceFontFamily",k=computed(()=>`${o.value}${b}`),x="",_=useLocalStorage2(k,x);e({id:b,groupKey:"basic",label:{zh:"\u4EE3\u7801\u5757\u5B57\u4F53"},desc:{zh:"\u6307\u5B9A\u884C\u5185\u4EE3\u7801\u3001\u4EE3\u7801\u5757\u7B49\u9700\u8981\u7B49\u5BBD\u5B57\u4F53\u7684\u573A\u666F\u4F7F\u7528\u7684\u5B57\u4F53\u3002"},defaultValue:x,value:useWritableComputedRef(_),componentType:{type:"fontSelector"}});const E="basic.enableFloatingEditor",B=computed(()=>`${o.value}${E}`),M=!1,V=useLocalStorage2(B,M);return e({id:E,groupKey:"basic",label:{zh:"\u542F\u7528\u6D6E\u52A8\u7F16\u8F91\u5668"},desc:{zh:"\u542F\u7528\u540E\uFF0C\u5728\u5757\u5F15\u7528\u5757\u4E0A\u6309 Ctrl / Command \u952E\u65F6\uFF0C\u4F1A\u5F39\u51FA\u6D6E\u52A8\u7F16\u8F91\u5668\u3002"},defaultValue:M,value:useWritableComputedRef(V),componentType:{type:"switch"}}),{textFontFamily:c,uiFontFamily:v,monospaceFontFamily:_,enableFloatingEditor:V}}),FloatingEditorContext=createContext(()=>{const n=ref(null),e=ref(!1),o=ref(null),{enableFloatingEditor:a}=BasicSettingsContext.useContext(),s=(d,u)=>{a.value&&(o.value=d,n.value=u)},l=()=>{o.value=null,n.value=null,e.value=!1},c=d=>{d.ctrlKey&&n.value&&(e.value=!0)};return onMounted(()=>{window.addEventListener("keydown",c)}),onUnmounted(()=>{window.removeEventListener("keydown",c)}),{showPos:n,open:e,openedBlockId:o,openFloatingEditor:s,closeFloatingEditor:l}}),_sfc_main$10=defineComponent({__name:"FloatingEditor",setup(n){const{showPos:e,open:o,openedBlockId:a}=FloatingEditorContext.useContext();return watch(o,async()=>{if(await nextTick(),!e.value||!(document.querySelector("[data-radix-popper-content-wrapper]")instanceof HTMLElement))return;const{x:s,y:l}=e.value,c=calcPopoverPos(300,300,s,l,{offset:d=>(d.leftUp.y-=30,d.rightUp.y-=30,d)});document.body.style.setProperty("--popover-x",`${c.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${c.rightDown.y}px`)}),(s,l)=>(openBlock(),createBlock(_sfc_main$1_,{open:unref(o),"onUpdate:open":l[0]||(l[0]=c=>isRef(o)?o.value=c:null)},{default:withCtx(()=>[createVNode(_sfc_main$1Y),createVNode(_sfc_main$1Z,{class:"floating-editor-content p-2 w-[400px] h-[400px] overflow-hidden"},{default:withCtx(()=>[unref(a)?(openBlock(),createBlock(_sfc_main$14,{key:0,class:"h-full",id:"floating-editor","root-block-ids":[unref(a)],"root-block-level":0,"padding-bottom":0},null,8,["root-block-ids"])):createCommentVNode("",!0)]),_:1})]),_:1},8,["open"]))}}),_sfc_main$$=defineComponent({__name:"PasteDialog",setup(n){const{open:e}=PasteDialogContext.useContext();return(o,a)=>(openBlock(),createBlock(unref(_sfc_main$2j),{open:unref(e)},{default:withCtx(()=>[createVNode(unref(_sfc_main$2h),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2e),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2d),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.pasteDialog.title")),1)]),_:1}),createVNode(unref(_sfc_main$2g),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.pasteDialog.description")),1)]),_:1})]),_:1}),createVNode(unref(_sfc_main$2f),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2i),{onClick:a[0]||(a[0]=s=>e.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.pasteDialog.cancelBtn")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}}),_hoisted_1$t={class:"relative px-1"},_hoisted_2$f={class:"my-2 max-h-[240px] overflow-y-auto px-1"},_hoisted_3$c=["onMouseover","onClick"],_hoisted_4$9=["onMouseover","onClick"],_hoisted_5$4={key:0,class:"text-center"},_hoisted_6$2={class:"text-sm text-muted-foreground"},_sfc_main$_=defineComponent({__name:"RefSuggestions",setup(n){const{showPos:e,open:o,query:a,cb:s,focusItemIndex:l,suggestions:c,suppressMouseOver:d,updateSuggestions:u,withScrollSuppressed:f}=RefSuggestionsContext.useContext(),{putNewBlockAt:v}=BacklinksContext.useContext(),{blocksManager:b,blockEditor:k}=BlocksContext.useContext(),{lastFocusedBlockTree:x,lastFocusedDiId:_}=LastFocusContext.useContext(),E=useTaskQueue(),B=computed(()=>{const K=v.value===""?"root":v.value;return b.getBlock(K)}),M=computed(()=>a.value.length==0?[]:hybridTokenize(a.value,!1,1,!1)??[]);watch(e,async()=>{if(await nextTick(),!e.value||!(document.querySelector("[data-radix-popper-content-wrapper]")instanceof HTMLElement))return;const{x:K,y:j}=e.value,W=calcPopoverPos(300,300,K,j,{offset:Y=>(Y.leftDown.y+=30,Y.rightDown.y+=30,Y)});document.body.style.setProperty("--popover-x",`${W.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${W.rightDown.y}px`)});const V=K=>{K.isComposing||u()},F=K=>{u()},I=()=>{setTimeout(()=>{const K=document.body.querySelector(".ref-suggestions-content .focus");K instanceof HTMLElement&&K.scrollIntoView({block:"nearest"})})},L=()=>{E.addTask(async()=>{const K=x.value,j=_.value;if(!K||!j)return;const W=K.getEditorView(j);if(!(W instanceof EditorView$1))return;const Y=W.state.schema,G=v.value===""?"root":v.value,{newNormalBlockId:fe}=k.insertNormalBlock({content:plainTextToTextContent(a.value,Y),pos:{parentId:G,childIndex:"last-space"}})??{};if(!fe)return;const le=Y.nodes.blockRef_v2.create({toBlockId:fe,tag:!1}),pe=W.state.selection.anchor,ue=W.state.tr.replaceRangeWith(pe-1,pe,le);W.dispatch(ue),o.value=!1,setTimeout(()=>W.focus(),50)})},U=K=>{var j;K.type==="block"?(j=s.value)==null||j.call(s,K.block.id,()=>o.value=!1):a.value.trim().length>0&&L()},Z=generateKeydownHandlerSimple({Escape:{run:K=>{var j;return K.isComposing||K.keyCode===229?!1:((j=s.value)==null||j.call(s,null,()=>o.value=!1),!0)}},Enter:{run:K=>{var W;if(K.isComposing||K.keyCode===229)return!1;const j=c.value[l.value];return j.type==="block"?(W=s.value)==null||W.call(s,j.block.id,()=>o.value=!1):L(),!0},preventDefault:!0,stopPropagation:!0},Backspace:{run:K=>{var j;return K.isComposing||K.keyCode===229?!1:a.value.length==0?(e.value=null,(j=s.value)==null||j.call(s,null,()=>o.value=!1),!0):!1},preventDefault:!0,stopPropagation:!0},ArrowUp:{run:K=>K.isComposing||K.keyCode===229?!1:f(()=>(l.value>0?l.value--:l.value=c.value.length-1,I(),!0)),preventDefault:!0,stopPropagation:!0},ArrowDown:{run:K=>K.isComposing||K.keyCode===229?!1:f(()=>(l.value<c.value.length-1?l.value++:l.value=0,I(),!0)),preventDefault:!0,stopPropagation:!0},Home:{run:K=>K.isComposing||K.keyCode===229?!1:f(()=>(l.value=0,I(),!0))},End:{run:K=>K.isComposing||K.keyCode===229?!1:f(()=>(l.value=c.value.length-1,I(),!0)),preventDefault:!0,stopPropagation:!0}});return(K,j)=>(openBlock(),createBlock(unref(_sfc_main$1_),{open:unref(o),"onUpdate:open":j[1]||(j[1]=W=>isRef(o)?o.value=W:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1Z),{class:"ref-suggestions-content z-[999] py-2 pb-0 px-1 max-h-[300px] max-w-[300px] overflow-hidden","trap-focus":"",tabindex:"-1",onKeydown:unref(Z)},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$t,[createVNode(unref(Search),{class:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),createVNode(unref(_sfc_main$23),{onInput:V,onCompositionend:F,modelValue:unref(a),"onUpdate:modelValue":j[0]||(j[0]=W=>isRef(a)?a.value=W:null),class:"h-[32px] pl-8 rounded-sm focus-visible:outline-none focus-visible:ring-transparent"},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_2$f,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(c),(W,Y)=>(openBlock(),createElementBlock(Fragment$1,{key:W.type},[W.type==="block"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 text-sm outline-none [&.focus]:bg-accent [&.focus]:text-accent-foreground",{focus:unref(l)===Y}]),onMouseover:G=>!unref(d)&&(l.value=Y),onClick:G=>U(W)},[createVNode(_sfc_main$1n,{block:W.block,readonly:"",class:"*:cursor-default","highlight-terms":M.value},null,8,["block","highlight-terms"])],42,_hoisted_3$c)):B.value&&W.type==="createNew"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["flex w-full text-sm items-center cursor-default select-none text-muted-foreground rounded-sm py-1.5 pl-2 [&.focus]:bg-accent [&.focus]:text-accent-foreground",{focus:unref(l)===Y}]),onMouseover:G=>!unref(d)&&(l.value=Y),onClick:G=>U(W)},[createVNode(unref(Plus),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(K.$t("kbView.refSuggestions.createNewUnder1"))+' "',1),createVNode(_sfc_main$1n,{block:B.value,class:"*:cursor-default",readonly:""},null,8,["block"]),createTextVNode('" '+toDisplayString$1(K.$t("kbView.refSuggestions.createNewUnder2")),1)],42,_hoisted_4$9)):createCommentVNode("",!0)],64))),128)),unref(c).length===0?(openBlock(),createElementBlock("div",_hoisted_5$4,[createBaseVNode("span",_hoisted_6$2,toDisplayString$1(K.$t("kbView.refSuggestions.noSuggestions")),1)])):createCommentVNode("",!0)])]),_:1},8,["onKeydown"])]),_:1},8,["open"]))}}),SettingsPanelContext=createContext(()=>{const n=SettingsContext.useContext(),e=ref(!1),o=Object.keys(n.settingGroups.value)[0],a=ref(o);return{open:e,activeGroupKey:a}}),getTrans=(n,e)=>n[e]||n.en_US||n.zh||Object.values(n)[0],_hoisted_1$s={class:"italic text-muted-foreground"},_sfc_main$Z=defineComponent({__name:"KeybindingInput",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=useModel(n,"modelValue"),o=a=>{const s=[];(a.metaKey||a.ctrlKey)&&s.push("Mod"),a.altKey&&s.push("Alt"),a.shiftKey&&s.push("Shift"),s.push(a.key),e.value=s.join("-")};return(a,s)=>(openBlock(),createBlock(unref(_sfc_main$2u),{variant:"outline",size:"sm",class:"font-normal focus:bg-muted",onKeydown:withModifiers(o,["prevent"]),onClick:s[0]||(s[0]=withModifiers(()=>{},["prevent"]))},{default:withCtx(()=>[e.value?(openBlock(),createElementBlock(Fragment$1,{key:0},[createTextVNode(toDisplayString$1(e.value)+" ",1),createVNode(unref(X),{class:"ml-2 size-4"})],64)):(openBlock(),createElementBlock(Fragment$1,{key:1},[createBaseVNode("span",_hoisted_1$s,toDisplayString$1(a.$t("kbView.keybindingInput.empty")),1),createVNode(unref(Plus),{class:"ml-2 size-4"})],64))]),_:1}))}}),_sfc_main$Y=defineComponent({__name:"ResetButton",props:{item:{}},setup(n){return(e,o)=>(openBlock(),createBlock(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",size:"icon",onClick:o[0]||(o[0]=a=>e.item.value.value=e.item.defaultValue)},{default:withCtx(()=>[createVNode(unref(RefreshCcw),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(e.$t("kbView.settingsPanel.reset")),1)]),_:1})]),_:1}))}}),_hoisted_1$r={class:"flex items-center gap-2"},_hoisted_2$e={key:0,class:"text-red-500 text-sm mt-2"},_sfc_main$X=defineComponent({__name:"TextInputComp",props:{item:{}},setup(n){const e=n,o=computed(()=>{const a=e.item.componentType.validator;if(a)return a(e.item.value.value)});return(a,s)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$r,[createVNode(unref(_sfc_main$23),{modelValue:a.item.value.value,"onUpdate:modelValue":s[0]||(s[0]=l=>a.item.value.value=l)},null,8,["modelValue"]),createVNode(_sfc_main$Y,{item:a.item},null,8,["item"])]),o.value?(openBlock(),createElementBlock("div",_hoisted_2$e,toDisplayString$1(o.value),1)):createCommentVNode("",!0)]))}}),_hoisted_1$q={class:"flex items-center gap-2"},_sfc_main$W=defineComponent({__name:"IntegerInputComp",props:{item:{}},setup(n){return(e,o)=>(openBlock(),createElementBlock("div",_hoisted_1$q,[createVNode(unref(_sfc_main$23),{modelValue:e.item.value.value,"onUpdate:modelValue":o[0]||(o[0]=a=>e.item.value.value=a),type:"number",min:e.item.componentType.min,max:e.item.componentType.max},null,8,["modelValue","min","max"]),createVNode(_sfc_main$Y,{item:e.item},null,8,["item"])]))}}),_hoisted_1$p={class:"relative"},_hoisted_2$d={key:0,class:"text-red-500 text-sm mt-2"},_hoisted_3$b={class:"absolute right-0 top-0 m-2"},_sfc_main$V=defineComponent({__name:"JsonComp",props:{item:{}},setup(n){const e=n,o=computed(()=>{const a=e.item.componentType.schema;if(a)return a.safeParse(e.item.value.value)});return(a,s)=>(openBlock(),createElementBlock("div",_hoisted_1$p,[createVNode(_sfc_main$1O,{class:"border rounded-md min-h-[100px] p-2 cursor-text",src:a.item.value.value,"onUpdate:src":s[0]||(s[0]=l=>a.item.value.value=l),lang:"json"},null,8,["src"]),o.value&&!o.value.success?(openBlock(),createElementBlock("div",_hoisted_2$d,toDisplayString$1(a.$t("kbView.settingsPanel.invalidJson")),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$b,[createVNode(_sfc_main$Y,{item:a.item},null,8,["item"])])]))}}),_hoisted_1$o={class:"flex items-center gap-2"},_sfc_main$U=defineComponent({__name:"KeybindingComp",props:{item:{}},setup(n){return(e,o)=>(openBlock(),createElementBlock("div",_hoisted_1$o,[createVNode(_sfc_main$Z,{class:"my-2",modelValue:e.item.value.value,"onUpdate:modelValue":o[0]||(o[0]=a=>e.item.value.value=a)},null,8,["modelValue"]),createVNode(_sfc_main$Y,{item:e.item},null,8,["item"])]))}}),_hoisted_1$n={class:"flex items-center gap-2"},_sfc_main$T=defineComponent({__name:"SelectComp",props:{item:{}},setup(n){const{locale:e}=useI18n();return(o,a)=>(openBlock(),createElementBlock("div",_hoisted_1$n,[createVNode(unref(_sfc_main$1N),{modelValue:o.item.value.value,"onUpdate:modelValue":a[0]||(a[0]=s=>o.item.value.value=s)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1H),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1G))]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(o.item.componentType.options,s=>(openBlock(),createBlock(unref(_sfc_main$1K),{key:s.value,value:s.value},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(getTrans)(s.label,unref(e))),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),createVNode(_sfc_main$Y,{item:o.item},null,8,["item"])]))}}),_sfc_main$S=defineComponent({__name:"Switch",props:{defaultChecked:{type:Boolean},checked:{type:Boolean},disabled:{type:Boolean},required:{type:Boolean},name:{},id:{},value:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:checked"],setup(n,{emit:e}){const o=n,a=e,s=computed(()=>{const{class:c,...d}=o;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(mg),mergeProps(unref(l),{class:unref(cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",o.class)}),{default:withCtx(()=>[createVNode(unref(hg),{class:normalizeClass(unref(cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5"))},{default:withCtx(()=>[renderSlot(c.$slots,"thumb")]),_:3},8,["class"])]),_:3},16,["class"]))}}),_hoisted_1$m={class:"flex items-center gap-x-2 pt-2"},_sfc_main$R=defineComponent({__name:"SwitchComp",props:{item:{}},setup(n){return(e,o)=>(openBlock(),createElementBlock("div",_hoisted_1$m,[createVNode(unref(_sfc_main$S),{checked:e.item.value.value,"onUpdate:checked":o[0]||(o[0]=a=>e.item.value.value=a)},null,8,["checked"]),createVNode(_sfc_main$Y,{item:e.item},null,8,["item"])]))}}),checkFontAvailability=n=>{const e=document.createElement("span");e.innerHTML=Array(100).join("wi"),e.style.cssText=["position: absolute","width: auto","font-size: 128px","left: -9999px"].join(" !important;");const o=d=>(e.style.fontFamily=d,e.clientWidth);document.body.appendChild(e);const a=o("monospace"),s=o("sans-serif"),l=o("serif"),c=n.map(d=>a!==o(d+" ,monospace")||s!==o(d+" ,sans-serif")||l!==o(d+" ,serif"));return document.body.removeChild(e),c},_hoisted_1$l={class:"flex items-center gap-2"},_hoisted_2$c={class:"flex items-center"},_hoisted_3$a={key:0,class:"text-muted-foreground ml-2"},_sfc_main$Q=defineComponent({__name:"FontSelector",props:{item:{},fontList:{}},setup(n){const e=["Arial","Helvetica","Times New Roman","Courier New","Verdana","Tahoma","Trebuchet MS","Georgia","Impact","Palatino Linotype","Century Gothic","Gill Sans","Lucida Sans Unicode","Lucida Console","Comic Sans MS","Arial Black","Garamond","Franklin Gothic Medium","Book Antiqua","Calibri","Cambria","Candara","Consolas","Constantia","Corbel","Segoe UI","Segoe Print","Segoe Script","Optima","Rockwell","Baskerville","Didot","Futura","Geneva","Courier","Brush Script MT","Hobo Std","Papyrus","MS Serif","MS Sans Serif","Roboto","Open Sans","Lato","Montserrat","Source Sans Pro","Poppins","Raleway","Merriweather","Nunito","Playfair Display","Ubuntu","Noto Sans","Oswald","PT Sans","PT Serif","Work Sans","Cabin","Quicksand","Josefin Sans","Droid Sans","Inconsolata","Lobster","Pacifico","Indie Flower","Amatic SC","Anton","Abril Fatface","Bitter","Dancing Script","Exo 2","Fjalla One","Karla","Mulish","Righteous","Satisfy","Shadows Into Light","Signika","Slabo 27px","Zilla Slab","Overpass","Microsoft YaHei","SimSun","SimHei","FangSong","NSimSun","STXihei","STKaiti","STSong","STZhongsong","STHupo","STXinwei","STLiti","FangSong_GB2312","YouYuan","FZHei-B01S","FZShuSong-Z01","Source Han Sans","Source Han Serif","Monospace","Cursive"],o=checkFontAvailability(e);return(a,s)=>(openBlock(),createElementBlock("div",_hoisted_1$l,[createVNode(unref(_sfc_main$1N),{modelValue:a.item.value.value,"onUpdate:modelValue":s[0]||(s[0]=l=>a.item.value.value=l)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1H),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1G),{class:"text-muted-foreground",placeholder:a.$t("kbView.fontSelector.notSpecified")},null,8,["placeholder"])]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1L),null,{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment$1,null,renderList(e,(l,c)=>createVNode(unref(_sfc_main$1K),{key:c,value:l,style:normalizeStyle({fontFamily:l})},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$c,[createBaseVNode("div",null,toDisplayString$1(l),1),unref(o)[c]?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_3$a,toDisplayString$1(a.$t("kbView.fontSelector.notAvailable")),1))])]),_:2},1032,["value","style"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"]),createVNode(_sfc_main$Y,{item:a.item},null,8,["item"])]))}}),_hoisted_1$k={class:"flex items-center gap-2"},_hoisted_2$b={key:2,class:"text-red-500"},_sfc_main$P=defineComponent({__name:"BlockIdInputComp",props:{item:{}},setup(n){const{blocksManager:e}=BlocksContext.useContext(),{openRefSuggestions:o}=RefSuggestionsContext.useContext(),a=n,s=computed(()=>a.item.value?e.getBlock(a.item.value.value):null),l=c=>{o({x:c.clientX,y:c.clientY},(d,u)=>{d&&(a.item.value.value=d),u()})};return(c,d)=>(openBlock(),createElementBlock("div",_hoisted_1$k,[c.item.value.value?c.item.value.value&&s.value?(openBlock(),createBlock(_sfc_main$1n,{key:1,block:s.value,readonly:""},null,8,["block"])):(openBlock(),createElementBlock("div",_hoisted_2$b,"MISSING BLOCK")):(openBlock(),createBlock(unref(_sfc_main$2u),{key:0,variant:"outline",size:"icon",onClick:l},{default:withCtx(()=>[createVNode(unref(Plus),{class:"size-4"})]),_:1})),c.item.value.value?(openBlock(),createBlock(_sfc_main$Y,{key:3,item:c.item},null,8,["item"])):createCommentVNode("",!0)]))}}),_hoisted_1$j={class:"left w-[200px] bg-sidebar-bg border-r p-2 pr-1 flex flex-col text-sidebar-fg"},_hoisted_2$a={class:"flex flex-col gap-1"},_hoisted_3$9={class:"right w-0 flex flex-col items-center flex-grow pr-1"},_hoisted_4$8={class:"flex flex-col gap-y-6 w-full overflow-y-auto overflow-x-hidden px-4 py-8"},_sfc_main$O=defineComponent({__name:"SettingsPanel",setup(n){const{locale:e}=useI18n(),{open:o,activeGroupKey:a}=SettingsPanelContext.useContext(),{settingGroups:s,getAllSettingItemsInGroup:l}=SettingsContext.useContext();return(c,d)=>(openBlock(),createBlock(unref(_sfc_main$2a),{open:unref(o),"onUpdate:open":d[0]||(d[0]=u=>isRef(o)?o.value=u:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$29),{class:"flex flex-row gap-0 max-w-[80vw] max-h-[80vh] w-[800px] h-[600px] p-0 !outline-none"},{default:withCtx(()=>[createVNode(unref(_sfc_main$26),{class:"hidden"},{default:withCtx(()=>[createVNode(unref(_sfc_main$25),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(c.$t("kbView.settingsPanel.title")),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$j,[d[1]||(d[1]=createBaseVNode("div",{class:"text-sm text-muted-foreground font-semibold px-4 py-2"},"Settings",-1)),createBaseVNode("div",_hoisted_2$a,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(s),u=>(openBlock(),createBlock(unref(_sfc_main$2u),{key:u.key,variant:"ghost","data-active":u.key===unref(a),class:"w-full h-7 justify-start font-normal text-sidebar-fg data-[active=true]:bg-accent",onClick:f=>a.value=u.key},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(getTrans)(u.label,unref(e))),1)]),_:2},1032,["data-active","onClick"]))),128))])]),createBaseVNode("div",_hoisted_3$9,[createBaseVNode("div",_hoisted_4$8,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(l)(unref(a)),u=>(openBlock(),createElementBlock("div",{class:"flex flex-col",key:u.id},[createVNode(unref(_sfc_main$13),{class:"mb-2"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(getTrans)(u.label,unref(e))),1)]),_:2},1024),u.desc?(openBlock(),createBlock(unref(_sfc_main$13),{key:0,class:"text-[.8em] text-muted-foreground mb-2 whitespace-pre-wrap"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(getTrans)(u.desc,unref(e))),1)]),_:2},1024)):createCommentVNode("",!0),u.componentType.type==="textInput"?(openBlock(),createBlock(_sfc_main$X,{key:1,item:u},null,8,["item"])):u.componentType.type==="integerInput"?(openBlock(),createBlock(_sfc_main$W,{key:2,item:u},null,8,["item"])):u.componentType.type==="json"?(openBlock(),createBlock(_sfc_main$V,{key:3,item:u},null,8,["item"])):u.componentType.type==="keybindingInput"?(openBlock(),createBlock(_sfc_main$U,{key:4,item:u},null,8,["item"])):u.componentType.type==="select"?(openBlock(),createBlock(_sfc_main$T,{key:5,item:u},null,8,["item"])):u.componentType.type==="switch"?(openBlock(),createBlock(_sfc_main$R,{key:6,item:u},null,8,["item"])):u.componentType.type==="fontSelector"?(openBlock(),createBlock(_sfc_main$Q,{key:7,item:u},null,8,["item"])):u.componentType.type==="blockIdInput"?(openBlock(),createBlock(_sfc_main$P,{key:8,item:u},null,8,["item"])):createCommentVNode("",!0)]))),128))])])]),_:1})]),_:1},8,["open"]))}}),createCreateNewTreeDialogContext=createContext(()=>{const n=ref(!1),e=ref("waiting");return{open:n,status:e,openCreateNewTreeDialog:()=>{n.value=!0,e.value="waiting"},closeCreateNewTreeDialog:()=>{n.value=!1,e.value="waiting"}}}),_sfc_main$N=defineComponent({__name:"FloatingMathInput",setup(n){const e=ref(null),o=computed({get:()=>e.value!==null,set:x=>!x&&(e.value=null)}),a=ref(""),s=ref(null),{registerFloatingMathInput:l}=FloatingMathInputContext.useContext();let c=null,d=null,u=null,f=null,v=null,b=null;const k=()=>[EditorView.lineWrapping,keymap.of([{key:"Escape",run:()=>(o.value=!1,v==null||v(),!0),stopPropagation:!0},{key:"ArrowLeft",run:()=>{var E;const x=(E=s.value)==null?void 0:E.getEditorView();if(!x)return!1;const _=x.state.selection;return _.ranges.length===1&&_.ranges[0].empty&&_.ranges[0].anchor===0?(o.value=!1,u==null||u(),!0):!1}},{key:"ArrowRight",run:()=>{var B;const x=(B=s.value)==null?void 0:B.getEditorView();if(!x)return!1;const _=x.state.selection,E=x.state.doc.length;return _.ranges.length===1&&_.ranges[0].empty&&_.ranges[0].head===E?(o.value=!1,f==null||f(),!0):!1}},{key:"Backspace",run:()=>{var _;const x=(_=s.value)==null?void 0:_.getEditorView();return x&&x.state.doc.length===0?(o.value=!1,b==null||b(),!0):!1}},{key:"Delete",run:()=>{var _;const x=(_=s.value)==null?void 0:_.getEditorView();return x&&x.state.doc.length===0?(o.value=!1,b==null||b(),!0):!1}}])];return watch(e,async()=>{var I;if(await nextTick(),!e.value)return;const x=document.querySelector("[data-radix-popper-content-wrapper]");if(!(x instanceof HTMLElement))return;const{x:_,y:E}=e.value,B=x.getBoundingClientRect(),M=(c==null?void 0:c.getBoundingClientRect())??{height:0},V=calcPopoverPos(B.width,B.height,_,E,{offset:L=>(L.leftUp.y-=M.height+10,L.rightUp.y-=M.height+10,L.leftDown.y+=10,L.rightDown.y+=10,L),avoidColideWith:c,minCollisionDist:10}),F=(I=s.value)==null?void 0:I.getEditorView();F&&(F.focus(),F.dispatch({selection:{anchor:0,head:F.state.doc.length}}),document.body.style.setProperty("--popover-x",`${V.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${V.rightDown.y}px`))}),onMounted(()=>{l((x,_,E,B,M,V,F)=>{c=x,a.value=_,d=E,u=B,f=M,v=V,b=F;const I=c.getBoundingClientRect();e.value={x:I.left+I.width/2,y:I.bottom}})}),(x,_)=>(openBlock(),createBlock(unref(_sfc_main$1_),{open:o.value,"onUpdate:open":_[2]||(_[2]=E=>o.value=E)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1Y)),createVNode(unref(_sfc_main$1Z),{class:"ref-suggestions-content p-2 pb-1",onPointerDownOutside:_[1]||(_[1]=()=>{var E;return(E=unref(v))==null?void 0:E()}),"trap-focus":"",tabindex:"-1"},{default:withCtx(()=>[createVNode(_sfc_main$1O,{src:a.value,"onUpdate:src":_[0]||(_[0]=E=>a.value=E),class:"flex-grow",ref_key:"codeMirror",ref:s,lang:"latex",extensionsBuilder:k,"on-src-changed":unref(d)??void 0},null,8,["src","on-src-changed"]),createVNode(_sfc_main$13,{class:"text-muted-foreground text-[.8em] font-normal text-right mr-2"},{default:withCtx(()=>_[3]||(_[3]=[createTextVNode('Press "Esc" to close')])),_:1})]),_:1})]),_:1},8,["open"]))}}),_sfc_main$M=defineComponent({__name:"Checkbox",props:{defaultChecked:{type:Boolean},checked:{type:[Boolean,String]},disabled:{type:Boolean},required:{type:Boolean},name:{},value:{},id:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:checked"],setup(n,{emit:e}){const o=n,a=e,s=computed(()=>{const{class:c,...d}=o;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(zv),mergeProps(unref(l),{class:unref(cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",o.class)}),{default:withCtx(()=>[createVNode(unref(Kv),{class:"flex h-full w-full items-center justify-center text-current"},{default:withCtx(()=>[renderSlot(c.$slots,"default",{},()=>[createVNode(unref(Check),{class:"h-4 w-4"})])]),_:3})]),_:3},16,["class"]))}}),_hoisted_1$i={class:"relative border-b"},_hoisted_2$9={class:"absolute left-3 top-1/2 -translate-y-1/2"},_hoisted_3$8={class:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-x-2"},_hoisted_4$7={class:"text-[.8em] text-muted-foreground mb-1"},_hoisted_5$3={class:"text-[.8em]"},_hoisted_6$1={key:0,class:"max-h-[60vh] overflow-y-auto pt-2 px-2 mr-1"},_hoisted_7$1=["onMouseover"],_hoisted_8$1={key:1,class:"text-center text-sm text-muted-foreground pt-4 pb-2"},_hoisted_9$1={key:1,class:"text-center text-sm text-muted-foreground pt-4 pb-2"},_hoisted_10$1={key:2,class:"text-center text-xs text-muted2-foreground py-2"},_hoisted_11$1={key:3,class:"text-center text-xs text-muted2-foreground py-2"},_sfc_main$L=defineComponent({__name:"FusionCommand",setup(n){const e=BlockTreeContext.useContext(),{inputText:o,mode:a,blockSearchResult:s,focusIndex:l,contentEl:c,suppressMouseOver:d,open:u,allowedBlockTypes:f,queryTerms:v,updateBlockSearchResult:b}=FusionCommandContext.useContext(),k=useDebounceFn(V=>{V.isComposing||a.value==="searchBlock"&&b()},500),x=()=>{o.value="",s.value=[]},_=()=>{setTimeout(()=>{var F;const V=(F=c.value)==null?void 0:F.querySelector(".fusion-command-content .focus");V instanceof HTMLElement&&V.scrollIntoView({block:"nearest"})})},E=(V,F=500)=>(d.value=!0,setTimeout(()=>d.value=!1,F),V()),B=()=>{if(l.value===-1)return!1;const V=s.value[l.value];if(!V)return!1;const F=e.getBlockTree("main");if(!F)return!1;u.value=!1,F.focusBlock(V.id,{highlight:!0,expandIfFold:!0})},M=generateKeydownHandlerSimple({ArrowUp:{run:V=>V.isComposing||V.keyCode===229?!1:E(()=>(l.value>0?l.value--:l.value=s.value.length-1,_(),!0)),stopPropagation:!0,preventDefault:!0},ArrowDown:{run:V=>V.isComposing||V.keyCode===229?!1:E(()=>(l.value<s.value.length-1?l.value++:l.value=0,_(),!0)),stopPropagation:!0,preventDefault:!0},Home:{run:V=>V.isComposing||V.keyCode===229?!1:E(()=>(l.value=0,_(),!0)),stopPropagation:!0,preventDefault:!0},End:{run:V=>V.isComposing||V.keyCode===229?!1:E(()=>(l.value=s.value.length-1,_(),!0)),stopPropagation:!0,preventDefault:!0},Enter:{run:V=>V.isComposing||V.keyCode===229?!1:(B(),!0),stopPropagation:!0,preventDefault:!0},"Mod-Enter":{run:V=>!(V.isComposing||V.keyCode===229),stopPropagation:!0,preventDefault:!0},Escape:{run:V=>V.isComposing||V.keyCode===229?!1:(u.value=!1,!0),stopPropagation:!0,preventDefault:!0}});return(V,F)=>(openBlock(),createBlock(unref(_sfc_main$2a),{class:"fusion-command",open:unref(u),"onUpdate:open":F[3]||(F[3]=I=>isRef(u)?u.value=I:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$29),{class:"fusion-command-content fixed left-1/2 top-1/2 z-50 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 bg-background border p-0 [&>button]:hidden overflow-hidden gap-y-0"},{default:withCtx(()=>[createVNode(unref(_sfc_main$26),{class:"hidden"},{default:withCtx(()=>[createVNode(unref(_sfc_main$25)),createVNode(unref(_sfc_main$28))]),_:1}),createBaseVNode("div",{ref_key:"contentEl",ref:c,onKeydown:F[2]||(F[2]=(...I)=>unref(M)&&unref(M)(...I))},[createBaseVNode("div",_hoisted_1$i,[createVNode(unref(_sfc_main$23),{class:"border-none relative focus-visible:ring-0 focus-visible:ring-offset-0 outline-none pl-10 pr-20",modelValue:unref(o),"onUpdate:modelValue":F[0]||(F[0]=I=>isRef(o)?o.value=I:null),placeholder:V.$t("kbView.fusionCommand.searchPlaceholder"),onInputCapture:unref(k),onCompositionend:unref(k)},null,8,["modelValue","placeholder","onInputCapture","onCompositionend"]),createBaseVNode("div",_hoisted_2$9,[unref(a)==="searchBlock"?(openBlock(),createBlock(unref(Search),{key:0,class:"size-4"})):(openBlock(),createBlock(unref(Command),{key:1,class:"size-4"}))]),createBaseVNode("div",_hoisted_3$8,[unref(a)==="searchBlock"?(openBlock(),createBlock(unref(_sfc_main$1_),{key:0},{default:withCtx(()=>[createVNode(unref(_sfc_main$1Y),null,{default:withCtx(()=>[createVNode(unref(SlidersHorizontal),{class:"size-4 text-muted-foreground hover:text-foreground transition cursor-pointer"})]),_:1}),createVNode(unref(_sfc_main$1Z),{class:"w-40 p-2"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$7,toDisplayString$1(V.$t("kbView.fusionCommand.allowedBlockTypes")),1),(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(f),(I,L)=>(openBlock(),createElementBlock("div",{key:L,class:"flex items-center gap-x-1"},[createVNode(_sfc_main$M,{checked:unref(f)[L],class:"size-3 mr-1","onUpdate:checked":U=>unref(f)[L]=U},null,8,["checked","onUpdate:checked"]),createBaseVNode("div",_hoisted_5$3,toDisplayString$1(unref(BLOCK_TYPE_ZH_NAMES)[L]),1)]))),128))]),_:1})]),_:1})):createCommentVNode("",!0),createVNode(unref(Delete),{class:"size-4 text-muted-foreground hover:text-foreground transition cursor-pointer",onClick:x})])]),unref(a)==="searchBlock"?(openBlock(),createElementBlock(Fragment$1,{key:0},[unref(s).length>0?(openBlock(),createElementBlock("div",_hoisted_6$1,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(s),(I,L)=>(openBlock(),createElementBlock("div",{tabindex:"0",class:normalizeClass([{focus:unref(l)===L},"cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors [&.focus]:bg-accent [&.focus]:text-accent-foreground [&_.text-content]:cursor-default *:pointer-events-none"]),onMouseover:U=>!unref(d)&&(l.value=L),onClick:F[1]||(F[1]=U=>B())},[(openBlock(),createBlock(_sfc_main$1n,{key:I.id,readonly:!0,block:I,"highlight-terms":unref(v)},null,8,["block","highlight-terms"]))],42,_hoisted_7$1))),256))])):(openBlock(),createElementBlock("div",_hoisted_8$1,toDisplayString$1(V.$t("kbView.fusionCommand.noResults")),1))],64)):(openBlock(),createElementBlock(Fragment$1,{key:1},[unref(s).length>0?(openBlock(),createBlock(_sfc_main$1p,{key:0,"max-height":"60vh"},{default:withCtx(()=>F[4]||(F[4]=[createBaseVNode("div",{class:"px-2 py-2"},null,-1)])),_:1})):(openBlock(),createElementBlock("div",_hoisted_9$1,toDisplayString$1(V.$t("kbView.fusionCommand.noCommandResults")),1))],64)),unref(a)==="searchBlock"?(openBlock(),createElementBlock("div",_hoisted_10$1,toDisplayString$1(V.$t("kbView.fusionCommand.searchHelp")),1)):(openBlock(),createElementBlock("div",_hoisted_11$1,toDisplayString$1(V.$t("kbView.fusionCommand.commandHelp")),1))],544)]),_:1})]),_:1},8,["open"]))}}),BlockContentSchema_v1=z.discriminatedUnion("type",[z.object({type:z.literal("text"),docContent:z.any()}),z.object({type:z.literal("image"),path:z.string(),uploadStatus:z.union([z.literal("notUploaded"),z.literal("uploading"),z.literal("uploaded")]),align:z.union([z.literal("left"),z.literal("center")]),caption:z.string().optional(),width:z.number().optional()}),z.object({type:z.literal("code"),code:z.string(),lang:z.string().optional()}),z.object({type:z.literal("mathDisplay"),src:z.string()})]),NormalBlockSchema_v1=z.object({id:z.string().uuid(),type:z.literal("normalBlock"),parent:z.union([z.string().uuid(),z.literal("null")]),childrenIds:z.array(z.string().uuid()),fold:z.boolean(),content:BlockContentSchema_v1,metadata:z.any()}),MirrorBlockSchema_v1=z.object({id:z.string().uuid(),type:z.literal("mirrorBlock"),parent:z.string().uuid(),childrenIds:z.array(z.string().uuid()),fold:z.boolean(),src:z.string().uuid()}),VirtualBlockSchema_v1=z.object({id:z.string().uuid(),type:z.literal("virtualBlock"),parent:z.string().uuid(),childrenIds:z.union([z.array(z.string().uuid()),z.literal("null")]),fold:z.boolean(),src:z.string().uuid()}),BlockSchema_v1=z.discriminatedUnion("type",[NormalBlockSchema_v1,MirrorBlockSchema_v1,VirtualBlockSchema_v1]),BackupSchema_v1=z.object({blocks:z.array(BlockSchema_v1)}),parseV1Backup=n=>{const e=BackupSchema_v1.safeParse(JSON.parse(n));if(!e.success)return console.warn("Invalid backup",e.error),null;const o=a=>({id:a.id,type:a.type,fold:a.fold,parentId:a.parent,childrenIds:a.childrenIds=="null"?[]:a.childrenIds,...a.type==="normalBlock"?{content:a.content.type==="text"?[BLOCK_CONTENT_TYPES.TEXT,a.content.docContent]:a.content.type==="code"?[BLOCK_CONTENT_TYPES.CODE,a.content.code,a.content.lang]:a.content.type=="image"?[BLOCK_CONTENT_TYPES.IMAGE,a.content.path,a.content.align,a.content.caption,a.content.width]:a.content.type=="mathDisplay"?[BLOCK_CONTENT_TYPES.MATH,a.content.src]:void 0,metadata:a.metadata}:{},...a.type==="mirrorBlock"?{src:a.src}:{},...a.type==="virtualBlock"?{src:a.src,childrenCreated:a.childrenIds!="null"}:{}});return e.data.blocks.map(o).filter(a=>!!a)},importBlocks=(n,e)=>{const o=[],a=new Set(n.map(d=>d.id)),s=[];for(const d of n)a.has(d.parentId)||(d.parentId="root",o.push(d)),s.push(d);console.log(o);const l=e.createBlockTransaction({type:"ui"});s.reverse();for(const d of s)l.addBlock(d);const c=e.getBlock("root");c&&(l.updateBlock({...c,childrenIds:[...c.childrenIds,o[0].id]}),l.commit())},_sfc_main$K=defineComponent({__name:"Importer",props:{open:{type:Boolean},openModifiers:{}},emits:["update:open"],setup(n){const e=ref(null),o=useModel(n,"open"),a=ref("idle"),{blocksManager:s}=BlocksContext.useContext(),l=d=>{const u=d.target;u.files&&(e.value=u.files[0])},c=async()=>{if(a.value==="idle"){if(!e.value)throw new Error("IMPOSSIBLE");a.value="importing";try{const d=await e.value.text(),u=parseV1Backup(d);await importBlocks(u,s),a.value="success"}catch(d){console.error(d),a.value="error"}}else a.value==="error"?a.value="idle":a.value==="success"&&(o.value=!1)};return(d,u)=>(openBlock(),createBlock(unref(_sfc_main$2a),{class:"importer",open:o.value,"onUpdate:open":u[1]||(u[1]=f=>o.value=f)},{default:withCtx(()=>[createVNode(unref(_sfc_main$29),{class:"max-w-[340px]"},{default:withCtx(()=>[createVNode(unref(_sfc_main$26),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$25),null,{default:withCtx(()=>u[2]||(u[2]=[createTextVNode("\u5BFC\u5165")])),_:1})]),_:1}),createVNode(unref(_sfc_main$23),{type:"file",accept:"application/json",multiple:!1,onChange:l}),createVNode(unref(_sfc_main$27),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",onClick:u[0]||(u[0]=f=>o.value=!1)},{default:withCtx(()=>u[3]||(u[3]=[createTextVNode("\u53D6\u6D88")])),_:1}),createVNode(unref(_sfc_main$2u),{type:"submit",size:"sm",disabled:!e.value,onClick:c},{default:withCtx(()=>[a.value==="idle"?(openBlock(),createElementBlock(Fragment$1,{key:0},[createTextVNode(" \u5BFC\u5165 ")],64)):a.value==="importing"?(openBlock(),createElementBlock(Fragment$1,{key:1},[createVNode(unref(LoaderCircle),{class:"size-4 mr-2 animate-spin"}),u[4]||(u[4]=createTextVNode(" \u6B63\u5728\u5BFC\u5165... "))],64)):a.value==="success"?(openBlock(),createElementBlock(Fragment$1,{key:2},[createVNode(unref(Check),{class:"size-4 mr-2"}),u[5]||(u[5]=createTextVNode(" \u5BFC\u5165\u6210\u529F "))],64)):(openBlock(),createElementBlock(Fragment$1,{key:3},[createVNode(unref(X),{class:"size-4 mr-2"}),u[6]||(u[6]=createTextVNode(" \u5BFC\u5165\u5931\u8D25 "))],64))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}}),AttachmentsManagerContext=createContext(()=>{const{dbBasePath:n,attachmentsBasePath:e,attachmentsFolderName:o}=PathsContext.useContext(),a=ref(!1),s=ref({}),l=ref("idle"),c=ref("idle"),d=ref([]),u=ref(null),f=ref("alphabet"),v=computed(()=>{let k=s.value;for(const x of d.value)if(x in k&&k[x].isDirectory)k=k[x].subDirents;else return{};return k}),b=computed(()=>Object.values(v.value).sort((k,x)=>k.isDirectory&&!x.isDirectory?-1:!k.isDirectory&&x.isDirectory?1:f.value==="alphabet"?k.name.localeCompare(x.name):0));return{open:a,files:s,refetchFiles:async(k,x)=>{l.value="fetching";const _=await fsLs({basePath:k??"",includeHidden:!0,recursive:!0,maxDepth:x??1e3});_.success?(s.value=_.data,l.value="success"):l.value="failed"},attachmentsFolderName:o,fetchFilesStatus:l,uploadStatus:c,currentPathSegments:d,dbBasePath:n,attachmentsBasePath:e,currentFiles:v,activeDirent:u,sortBy:f,orderedFiles:b}}),_sfc_main$J=defineComponent({__name:"CalendarCell",props:{date:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Wu),mergeProps({class:unref(cn)("relative h-9 w-9 p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:rounded-md [&:has([data-selected])]:bg-accent [&:has([data-selected][data-outside-view])]:bg-accent/50",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$I=defineComponent({__name:"CalendarCellTrigger",props:{day:{},month:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Zu),mergeProps({class:unref(cn)(unref(buttonVariants)({variant:"ghost"}),"h-9 w-9 p-0 font-normal","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selected]:bg-primary data-[selected]:text-primary-foreground data-[selected]:opacity-100 data-[selected]:hover:bg-primary data-[selected]:hover:text-primary-foreground data-[selected]:focus:bg-primary data-[selected]:focus:text-primary-foreground","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through","data-[outside-view]:text-muted-foreground data-[outside-view]:opacity-50 [&[data-outside-view][data-selected]]:bg-accent/50 [&[data-outside-view][data-selected]]:text-muted-foreground [&[data-outside-view][data-selected]]:opacity-30",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$H=defineComponent({__name:"CalendarGrid",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Hu),mergeProps({class:unref(cn)("w-full border-collapse space-y-1",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$G=defineComponent({__name:"CalendarGridBody",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(Yu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_sfc_main$F=defineComponent({__name:"CalendarGridHead",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(qu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_sfc_main$E=defineComponent({__name:"CalendarGridRow",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Xu),mergeProps({class:unref(cn)("flex",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$D=defineComponent({__name:"CalendarHeadCell",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(ju),mergeProps({class:unref(cn)("w-9 rounded-md text-[0.8rem] font-normal text-muted-foreground",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$C=defineComponent({__name:"CalendarHeader",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(zu),mergeProps({class:unref(cn)("relative flex w-full items-center justify-between pt-1",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$B=defineComponent({__name:"CalendarHeading",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Ku),mergeProps({class:unref(cn)("text-sm font-medium",e.class)},unref(a)),{default:withCtx(c=>[renderSlot(s.$slots,"default",{headingValue:c.headingValue},()=>[createTextVNode(toDisplayString$1(c.headingValue),1)])]),_:3},16,["class"]))}}),_sfc_main$A=defineComponent({__name:"CalendarNextButton",props:{step:{},nextPage:{type:Function},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Uu),mergeProps({class:unref(cn)(unref(buttonVariants)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createVNode(unref(ChevronRight),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),_sfc_main$z=defineComponent({__name:"CalendarPrevButton",props:{step:{},prevPage:{type:Function},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:s,...l}=e;return l}),a=At(o);return(s,l)=>(openBlock(),createBlock(unref(Gu),mergeProps({class:unref(cn)(unref(buttonVariants)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",e.class)},unref(a)),{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createVNode(unref(ChevronLeft),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),DAILY_NOTE_TAG="day",DailyNoteContext=createContext(()=>{const{registerSettingGroup:n,registerSettingItem:e}=SettingsContext.useContext(),{getBacklinks:o}=IndexContext.useContext(),{blocksManager:a,blockEditor:s,synced:l}=BlocksContext.useContext(),{toast:c}=useToast(),{t:d}=useI18n(),u=useTaskQueue(),{getBlockTree:f}=BlockTreeContext.useContext(),{kbPrefix:v}=ServerInfoContext.useContext();watch(l,(L,U)=>{if(!U&&L){const Z=getPmSchema({getBlockRef:a.getBlockRef});if(a.getBlock("day"))return;const K=a.createBlockTransaction({type:"ui"});K.addBlock({id:"day",type:"normalBlock",fold:!1,parentId:INTERNAL_BLOCK_PARENT_ID,childrenIds:[],content:plainTextToTextContent("Day",Z),metadata:{}}),K.commit()}},{immediate:!0}),n({key:"dailynote",label:{zh:"\u6BCF\u65E5\u7B14\u8BB0"}});const b="dailynote.defaultDateFormat",k=computed(()=>`${v.value}${b}`),x="YYYY-MM-DD",_=useLocalStorage2(k,x);e({id:b,groupKey:"dailynote",defaultValue:x,label:{zh:"\u9ED8\u8BA4\u65E5\u671F\u683C\u5F0F"},desc:{zh:"\u521B\u5EFA\u65B0\u7684\u6BCF\u65E5\u7B14\u8BB0\u65F6\uFF0C\u9ED8\u8BA4\u4F7F\u7528\u7684\u65E5\u671F\u683C\u5F0F"},value:useWritableComputedRef(_),componentType:{type:"textInput"}});const E="dailynote.parentBlockOfNewDailyNote",B=computed(()=>`${v.value}${E}`),M="",V=useLocalStorage2(B,M);e({id:E,groupKey:"dailynote",defaultValue:M,label:{zh:"\u6BCF\u65E5\u7B14\u8BB0\u7684\u5B58\u653E\u4F4D\u7F6E"},desc:{zh:"\u521B\u5EFA\u7684\u65B0\u6BCF\u65E5\u7B14\u8BB0\u5C06\u4F1A\u653E\u5230\u8FD9\u4E2A\u5757\u4E0B\uFF08\u4F5C\u4E3A\u5B50\u5757\uFF09"},value:useWritableComputedRef(V),componentType:{type:"blockIdInput"}});const F=()=>[...o(DAILY_NOTE_TAG,"tag")],I=()=>{const L=F(),U={};for(const Z of L){const K=a.getBlock(Z);if(!K)continue;const j=dayjs(K.ctext).format("YYYY-MM-DD");U[j]=Z}return U};return{defaultDateFormat:_,parentBlockOfNewDailyNote:V,getAllDailyNotes:F,getDateToDailyNote:I,createDailyNote:L=>{const U=f("main");if(!U)return;const Z=I(),K=dayjs(L).format("YYYY-MM-DD"),j=getPmSchema({getBlockRef:a.getBlockRef});if(!Z[K]){if(!V.value){c({title:d("kbView.dailynoteNavigator.dontKnowWhereToCreate.title"),description:d("kbView.dailynoteNavigator.dontKnowWhereToCreate.desc")});return}u.addTask(async()=>{const{newNormalBlockId:W}=s.insertNormalBlock({pos:{parentId:V.value,childIndex:"first"},content:contentNodesToPmNode([j.text(K+" "),j.nodes.blockRef_v2.create({toBlockId:"day",tag:!0})])})??{};W&&(await U.nextUpdate(),U.focusBlock(W,{highlight:!0,expandIfFold:!0}))})}}}}),_hoisted_1$h={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},_sfc_main$y=defineComponent({__name:"DailynoteNavigator",setup(n){const{getDateToDailyNote:e,createDailyNote:o}=DailyNoteContext.useContext(),{getBlockTree:a}=BlockTreeContext.useContext(),s=ref(!1),l=computed(()=>e()),c=u=>{const f=dayjs(u).format("YYYY-MM-DD");return l.value[f]!==void 0},d=u=>{const f=dayjs(u).format("YYYY-MM-DD"),v=l.value[f],b=a("main");b&&(v?b.focusBlock(v):o(u))};return(u,f)=>(openBlock(),createBlock(unref(_sfc_main$1_),{open:s.value,"onUpdate:open":f[0]||(f[0]=v=>s.value=v)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1Y),null,{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3}),createVNode(unref(_sfc_main$1Z),{class:"p-0"},{default:withCtx(()=>[createVNode(unref(Lu),{class:"p-3"},{default:withCtx(({grid:v,weekDays:b})=>[createVNode(unref(_sfc_main$C),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$z)),createVNode(unref(_sfc_main$B)),createVNode(unref(_sfc_main$A))]),_:1}),createBaseVNode("div",_hoisted_1$h,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(v,k=>(openBlock(),createBlock(unref(_sfc_main$H),{key:k.value.toString()},{default:withCtx(()=>[createVNode(unref(_sfc_main$F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$E),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(b,x=>(openBlock(),createBlock(unref(_sfc_main$D),{key:x},{default:withCtx(()=>[createTextVNode(toDisplayString$1(x),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),createVNode(unref(_sfc_main$G),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(k.rows,(x,_)=>(openBlock(),createBlock(unref(_sfc_main$E),{key:`weekDate-${_}`,class:"mt-2 w-full"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(x,E=>(openBlock(),createBlock(unref(_sfc_main$J),{key:E.toString(),date:E},{default:withCtx(()=>[createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$I),{day:E,month:k.value,"data-disabled":c(E)?void 0:!0,onClickCapture:withModifiers(B=>d(E.toDate()),["prevent","stop"])},null,8,["day","month","data-disabled","onClickCapture"])]),_:2},1024),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(c(E)?u.$t("kbView.dailynoteNavigator.gotoDailyNote"):u.$t("kbView.dailynoteNavigator.noDailyNote")),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1})]),_:3},8,["open"]))}}),_hoisted_1$g={key:1,class:"flex items-center"},_sfc_main$x=defineComponent({__name:"HeaderBarItem",props:{item:{},iconOnly:{type:Boolean},iconClass:{},labelClass:{}},setup(n){return(e,o)=>"itemComp"in e.item?(openBlock(),createBlock(resolveDynamicComponent(e.item.itemComp),{key:0})):(openBlock(),createElementBlock("div",_hoisted_1$g,[(openBlock(),createBlock(resolveDynamicComponent(e.item.icon),{class:normalizeClass(["size-5 stroke-[1.8]",e.iconClass+` ${e.iconOnly?"":"mr-3"}`])},null,8,["class"])),e.iconOnly?createCommentVNode("",!0):(openBlock(),createBlock(resolveDynamicComponent(e.item.label),{key:0,class:normalizeClass(e.labelClass)},null,8,["class"]))]))}}),_sfc_main$w=defineComponent({__name:"ContextMenu",props:{dir:{},modal:{type:Boolean}},emits:["update:open"],setup(n,{emit:e}){const o=xe(n,e);return(a,s)=>(openBlock(),createBlock(unref(om),normalizeProps(guardReactiveProps(unref(o))),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),_sfc_main$v=defineComponent({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},sticky:{},hideWhenDetached:{type:Boolean},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=e,s=computed(()=>{const{class:c,...d}=o;return d}),l=xe(s,a);return(c,d)=>(openBlock(),createBlock(unref(sm),null,{default:withCtx(()=>[createVNode(unref(rm$2),mergeProps(unref(l),{class:unref(cn)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o.class)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_sfc_main$u=defineComponent({__name:"ContextMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=At(n);return(o,a)=>(openBlock(),createBlock(unref(lm),normalizeProps(guardReactiveProps(unref(e))),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_sfc_main$t=defineComponent({__name:"LeftButtons",setup(n){const{currentIndex:e,historyItems:o,goPrev:a,goNext:s}=HistoryContext.useContext(),l=computed(()=>e.value<=0),c=computed(()=>e.value>=o.value.length);return(d,u)=>(openBlock(),createElementBlock(Fragment$1,null,[createVNode(unref(_sfc_main$w),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1D),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$u),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",size:"icon",disabled:l.value,onClick:unref(a)},{default:withCtx(()=>[createVNode(unref(ArrowLeft),{class:"size-5"})]),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(d.$t("kbView.history.goToPrev")),1)]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$v))]),_:1}),createVNode(unref(_sfc_main$w),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1D),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$u),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",size:"icon",disabled:c.value,onClick:unref(s)},{default:withCtx(()=>[createVNode(unref(ArrowRight),{class:"size-5"})]),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(d.$t("kbView.history.goToNext")),1)]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$v))]),_:1})],64))}}),_hoisted_1$f={class:"left-part"},_hoisted_2$8={class:"left-buttons"},_hoisted_3$7={class:"right-part flex flex-row items-center"},_hoisted_4$6={class:"right-buttons"},_sfc_main$s=defineComponent({__name:"HeaderBar",setup(n){const{sidePaneOpen:e,sidePaneDir:o,sidePaneWidth:a,enableSidePaneAnimation:s}=SidebarContext.useContext(),{open:l}=SettingsPanelContext.useContext(),{open:c}=AttachmentsManagerContext.useContext(),{theme:d,toggleTheme:u}=ThemeContext.useContext(),{focusModeEnabled:f}=FocusModeContext.useContext(),{timeMachineOpen:v}=TimeMachineContext.useContext(),{openFusionCommand:b}=FusionCommandContext.useContext(),{synced:k}=BlocksContext.useContext(),{mainRootBlockId:x}=MainTreeContext.useContext(),{logout:_}=ServerInfoContext.useContext(),E=ref(!1),{t:B}=useI18n(),{goPrev:M,goNext:V,canGoPrev:F,canGoNext:I}=HistoryContext.useContext(),{openKeybindings:L}=KeymapContext.useContext(),U=G=>{x.value=G},Z=computed(()=>e.value&&o.value==="right"?`${a.value}px`:"0px"),K=computed(()=>s.value?"padding 500ms var(--tf), opacity 500ms var(--tf)":"opacity 500ms var(--tf)"),j=G=>{var fe;(fe=G.target)==null||fe.blur()};computed(()=>!F.value),computed(()=>!I.value);const W=[{icon:()=>createVNode(_sfc_main$y,null,{default:()=>[createVNode(CalendarDays,{class:"size-5 stroke-[1.8]"},null)]}),label:()=>B("kbView.headerBar.dailynoteNavigator"),onClick:()=>{}},{icon:()=>createVNode(Search,{class:"size-5 stroke-[1.8]"},null),label:()=>createVNode(Fragment$1,null,[B("kbView.headerBar.search")]),onClick:()=>b("")},{icon:()=>createVNode("div",null,[d.value==="dark"?createVNode(Moon,{class:"size-5 stroke-[1.8]"},null):createVNode(Sun,{class:"size-5 stroke-[1.8]"},null)]),label:()=>d.value==="dark"?B("kbView.headerBar.switchLightTheme"):B("kbView.headerBar.switchDarkTheme"),onClick:u},{icon:()=>createVNode(Bell,{class:"size-5 stroke-[1.8]"},null),label:()=>B("kbView.headerBar.notifications"),onClick:()=>{}},{icon:PanelRight,label:()=>e.value?B("kbView.headerBar.closeSidepane"):B("kbView.headerBar.openSidepane"),onClick:()=>e.value=!e.value,active:e}],Y=[{icon:Download,label:()=>B("kbView.headerBar.export"),onClick:()=>{}},{icon:FolderInput,label:()=>B("kbView.headerBar.import"),onClick:()=>{console.log("open importer"),E.value=!0}},{icon:Focus,label:()=>f.value?B("kbView.headerBar.exitFocusMode"):B("kbView.headerBar.enterFocusMode"),onClick:()=>f.value=!f.value},{icon:FolderClosed,label:()=>B("kbView.headerBar.attachmentsManager"),onClick:()=>c.value=!0},{icon:History,label:()=>B("kbView.headerBar.timeMachine"),onClick:()=>v.value=!0},{icon:Settings$1,label:()=>B("kbView.headerBar.settings"),onClick:()=>l.value=!0},{icon:Keyboard,label:()=>B("kbView.headerBar.keybindings"),onClick:()=>L.value=!0},{icon:CircleHelp,label:()=>B("kbView.headerBar.help"),onClick:()=>{}},{icon:LogOut,label:()=>B("kbView.headerBar.exit"),onClick:_}];return(G,fe)=>(openBlock(),createElementBlock("div",{class:"header-bar fixed top-0 left-0 flex flex-row justify-between items-center w-[calc(100vw-16px)] px-[8px] py-[10px] z-10 bg-background",style:normalizeStyle({paddingRight:Z.value,transition:K.value})},[createBaseVNode("div",_hoisted_1$f,[createBaseVNode("div",_hoisted_2$8,[createVNode(_sfc_main$t)])]),createVNode(_sfc_main$1g,{"block-id":unref(x),onClickPathSegment:U},null,8,["block-id"]),createBaseVNode("div",_hoisted_3$7,[createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),null,{default:withCtx(()=>[createVNode(unref(Dot),{class:normalizeClass(["size-8",unref(k)?"stroke-green-500":"stroke-red-500"])},null,8,["class"])]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(B)(`kbView.syncStatus.${unref(k)?"synced":"disconnected"}`)),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_4$6,[(openBlock(),createElementBlock(Fragment$1,null,renderList(W,(le,pe)=>createVNode(unref(_sfc_main$1F),{key:pe},{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{asChild:""},{default:withCtx(()=>{var ue;return[createVNode(unref(_sfc_main$2u),{variant:"ghost",size:"icon",class:normalizeClass((ue=le.active)!=null&&ue.value?"bg-muted":"w-fit min-w-8"),onFocus:j,onClick:le.onClick},{default:withCtx(()=>[createVNode(_sfc_main$x,{item:le,iconOnly:""},null,8,["item"])]),_:2},1032,["class","onClick"])]}),_:2},1024),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.label)))]),_:2},1024)]),_:2},1024)),64))]),createVNode(unref(_sfc_main$1A),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1s),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",size:"icon",onFocus:j},{default:withCtx(()=>[createVNode(unref(EllipsisVertical),{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(B)("kbView.headerBar.moreOptions")),1)]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1y),{class:"mr-2"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment$1,null,renderList(Y,(le,pe)=>createVNode(unref(_sfc_main$1w),{key:pe,onClick:le.onClick},{default:withCtx(()=>[createVNode(_sfc_main$x,{item:le,iconClass:"!size-4"},null,8,["item"])]),_:2},1032,["onClick"])),64)),createVNode(unref(_sfc_main$1v),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1t),null,{default:withCtx(()=>[createVNode(unref(Globe),{class:"size-4 mr-3"}),createTextVNode(" "+toDisplayString$1(G.$t("languages.label")),1)]),_:1}),createVNode(unref(ih),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1u),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(G.$i18n.availableLocales,le=>(openBlock(),createBlock(unref(_sfc_main$1z),{key:le,checked:G.$i18n.locale===le,onClick:pe=>G.$i18n.locale=le},{default:withCtx(()=>[createTextVNode(toDisplayString$1(G.$t(`languages.${le}`)),1)]),_:2},1032,["checked","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),(openBlock(),createBlock(Teleport,{to:"body"},[createVNode(_sfc_main$K,{open:E.value,"onUpdate:open":fe[0]||(fe[0]=le=>E.value=le)},null,8,["open"])]))],4))}}),_hoisted_1$e={class:"right-pane z-20 overflow-hidden flex flex-col"},_hoisted_2$7={class:"z-20 flex items-center flex-shrink-0 justify-between py-[10px] px-[8px] mr-2"},_hoisted_3$6={key:0,class:"text-center flex-grow flex flex-col items-center justify-center"},_hoisted_4$5={class:"text-2xl font-semibold text-muted-foreground"},_hoisted_5$2={class:"text-sm mt-2 text-muted-foreground whitespace-pre-wrap leading-6"},_sfc_main$r=defineComponent({__name:"SidePane",setup(n){const{sidePaneDir:e,sidePaneOpen:o,sidePaneWidth:a,sidePaneHeight:s,enableSidePaneAnimation:l,sidePaneBlockIds:c,addToSidePane:d}=SidebarContext.useContext(),{openRefSuggestions:u}=RefSuggestionsContext.useContext(),f=x=>{e.value==="right"?a.value=window.innerWidth-x.x:s.value=window.innerHeight-x.y},v=()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",v),document.removeEventListener("mouseleave",v),l.value=!0},b=x=>{x.preventDefault(),x.stopPropagation(),l.value=!1,document.addEventListener("mousemove",f),document.addEventListener("mouseup",v),document.addEventListener("mouseleave",v)},k=x=>{u({x:x.clientX,y:x.clientY},(_,E)=>{_&&(d(_),E())})};return(x,_)=>(openBlock(),createElementBlock("div",_hoisted_1$e,[createBaseVNode("div",_hoisted_2$7,[createBaseVNode("div",null,[createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",size:"icon",onClick:_[0]||(_[0]=E=>o.value=!1)},{default:withCtx(()=>[createVNode(unref(ChevronsRight),{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(x.$t("kbView.sidePane.collapse")),1)]),_:1})]),_:1}),unref(e)==="bottom"?(openBlock(),createBlock(unref(_sfc_main$1F),{key:0},{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",size:"icon",onClick:_[1]||(_[1]=E=>e.value="right")},{default:withCtx(()=>[createVNode(unref(PanelRight),{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(x.$t("kbView.sidePane.moveToRight")),1)]),_:1})]),_:1})):createCommentVNode("",!0),unref(e)==="right"?(openBlock(),createBlock(unref(_sfc_main$1F),{key:1},{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",size:"icon",onClick:_[2]||(_[2]=E=>e.value="bottom")},{default:withCtx(()=>[createVNode(unref(PanelBottom),{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(x.$t("kbView.sidePane.moveToBottom")),1)]),_:1})]),_:1})):createCommentVNode("",!0)]),createBaseVNode("div",null,[createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",size:"icon",onClick:k},{default:withCtx(()=>[createVNode(unref(Plus),{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(x.$t("kbView.sidePane.searchAndAdd")),1)]),_:1})]),_:1}),createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",size:"icon"},{default:withCtx(()=>[createVNode(unref(ArrowDownWideNarrow),{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(x.$t("kbView.sidePane.setSort")),1)]),_:1})]),_:1}),createVNode(unref(_sfc_main$1F),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1C),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost",size:"icon"},{default:withCtx(()=>[createVNode(unref(Filter),{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1E),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(x.$t("kbView.sidePane.setFilter")),1)]),_:1})]),_:1})])]),unref(c).length===0?(openBlock(),createElementBlock("div",_hoisted_3$6,[createBaseVNode("p",_hoisted_4$5,toDisplayString$1(x.$t("kbView.sidePane.empty")),1),createBaseVNode("p",_hoisted_5$2,toDisplayString$1(x.$t("kbView.sidePane.emptyTip")),1)])):(openBlock(),createBlock(_sfc_main$14,{key:1,id:"side-pane",class:"h-full -mt-4","root-block-ids":unref(c),"root-block-level":0,"add-side-pane-header":!0,"enlarge-root-block":!1,"show-backlinks":!1,"show-potential-links":!1,"padding-top":0},null,8,["root-block-ids"])),unref(e)==="bottom"?(openBlock(),createElementBlock("div",{key:2,class:"absolute top-0 z-30 left-0 w-full h-1 cursor-row-resize",onMousedown:b},null,32)):createCommentVNode("",!0),unref(e)==="right"?(openBlock(),createElementBlock("div",{key:3,class:"absolute top-0 z-30 left-0 w-1 h-full cursor-col-resize",onMousedown:b},null,32)):createCommentVNode("",!0)]))}}),_sfc_main$q=defineComponent({__name:"Collapsible",props:{defaultOpen:{type:Boolean},open:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:open"],setup(n,{emit:e}){const o=xe(n,e);return(a,s)=>(openBlock(),createBlock(unref(ji),normalizeProps(guardReactiveProps(unref(o))),{default:withCtx(({open:l})=>[renderSlot(a.$slots,"default",{open:l})]),_:3},16))}}),_sfc_main$p=defineComponent({__name:"CollapsibleContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(qi),mergeProps(e,{class:"overflow-hidden transition-all data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down"}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_sfc_main$o=defineComponent({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createBlock(unref(Ui),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16))}}),_hoisted_1$d=["data-active"],_hoisted_2$6={class:"whitespace-nowrap overflow-hidden text-ellipsis"},_sfc_main$n=defineComponent({__name:"FileTreeItem",props:{dirent:{},path:{}},setup(n){const e=ref(!1),{activeDirent:o}=AttachmentsManagerContext.useContext(),a=(s,l)=>{o.value={path:l,isDirectory:s.isDirectory,isPreview:!1}};return(s,l)=>{const c=resolveComponent("FileTreeItem",!0);return openBlock(),createBlock(unref(_sfc_main$q),{open:e.value,"onUpdate:open":l[1]||(l[1]=d=>e.value=d)},{default:withCtx(()=>[createVNode(unref(_sfc_main$o),{"as-child":""},{default:withCtx(()=>{var d;return[createBaseVNode("div",{"data-active":s.path===((d=unref(o))==null?void 0:d.path),onClick:l[0]||(l[0]=u=>a(s.dirent,s.path)),class:"flex items-center px-2 py-1 my-0.5 cursor-default select-none hover:bg-muted rounded-sm text-sm data-[active=true]:bg-muted"},[s.dirent.isDirectory?(openBlock(),createBlock(unref(ChevronDown),{key:0,class:normalizeClass(["size-4 mr-2 flex-shrink-0 transition-transform duration-50",{"-rotate-90":!e.value}])},null,8,["class"])):(openBlock(),createBlock(unref(File),{key:1,class:"size-4 mr-2 flex-shrink-0"})),createBaseVNode("span",_hoisted_2$6,toDisplayString$1(s.dirent.name),1)],8,_hoisted_1$d)]}),_:1}),s.dirent.isDirectory?(openBlock(),createBlock(unref(_sfc_main$p),{key:0,class:"ml-6"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(s.dirent.subDirents,d=>(openBlock(),createBlock(c,{key:d.name,dirent:d,path:unref(joinPathSegments)([s.path,d.name])},null,8,["dirent","path"]))),128))]),_:1})):createCommentVNode("",!0)]),_:1},8,["open"])}}}),_hoisted_1$c={class:"flex-1 overflow-auto pr-1 mb-2"},_hoisted_2$5={key:0,class:"text-center text-sm text-muted-foreground py-8"},_hoisted_3$5={class:"mr-1 flex gap-x-1"},_sfc_main$m=defineComponent({__name:"FileTree",setup(n){const{attachmentsFolderName:e,attachmentsBasePath:o,currentPathSegments:a,orderedFiles:s,refetchFiles:l}=AttachmentsManagerContext.useContext(),c=ref("idle");async function d(){c.value="loading",await Promise.all([l(),timeout(1e3)]),c.value="updated",await timeout(1e3),c.value="idle"}return(u,f)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["w-[250px] bg-sidebar-bg border-r p-2 pr-1 flex flex-col justify-between text-sidebar-fg",{"opacity-50":c.value==="loading"}])},[createVNode(unref(_sfc_main$1l),{class:"bg-sidebar-accent w-fit px-2 py-1.5 mr-1 mb-2 rounded overflow-hidden"},{default:withCtx(()=>[createVNode(unref(_sfc_main$1i),{class:"flex-nowrap w-fit gap-1 sm:gap-1 overflow-hidden"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList([unref(e),...unref(a)],(v,b)=>(openBlock(),createElementBlock(Fragment$1,{key:v},[createVNode(unref(_sfc_main$1k),{class:"cursor-pointer select-none hover:text-sidebar-fg transition-colors duration-50"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(v),1)]),_:2},1024),b!==unref(a).length?(openBlock(),createBlock(unref(_sfc_main$1h),{key:0,class:"size-3"})):createCommentVNode("",!0)],64))),128))]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$c,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(s),v=>(openBlock(),createBlock(_sfc_main$n,{key:v.name,dirent:v,path:unref(joinPathSegments)([unref(o),...unref(a),v.name])},null,8,["dirent","path"]))),128)),Object.keys(unref(s)).length===0?(openBlock(),createElementBlock("div",_hoisted_2$5,toDisplayString$1(u.$t("kbView.attachmentsManager.noFiles")),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_3$5,[createVNode(unref(_sfc_main$2u),{variant:"outline",class:"size-9 flex-shrink-0 p-0",disabled:c.value==="loading",onClick:d},{default:withCtx(()=>[createVNode(unref(RefreshCw),{class:normalizeClass(["size-4",{"animate-spin":c.value==="loading"}])},null,8,["class"])]),_:1},8,["disabled"]),createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",class:"w-full"},{default:withCtx(()=>[createVNode(unref(Upload),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(u.$t("kbView.attachmentsManager.upload")),1)]),_:1})])],2))}}),_export_sfc=(n,e)=>{const o=n.__vccOpts||n;for(const[a,s]of e)o[a]=s;return o},_sfc_main$l={},_hoisted_1$b={t:"1730332855813",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2264",width:"200",height:"200"};function _sfc_render$5(n,e){return openBlock(),createElementBlock("svg",_hoisted_1$b,e[0]||(e[0]=[createBaseVNode("path",{d:"M912 217.142857q16 16 27.428571 43.428571t11.428571 50.285714l0 658.285714q0 22.857143-16 38.857143t-38.857143 16l-768 0q-22.857143 0-38.857143-16t-16-38.857143l0-914.285714q0-22.857143 16-38.857143t38.857143-16l512 0q22.857143 0 50.285714 11.428571t43.428571 27.428571zm-253.714286-139.428571l0 214.857143 214.857143 0q-5.714286-16.571429-12.571429-23.428571l-178.857143-178.857143q-6.857143-6.857143-23.428571-12.571429zm219.428571 873.142857l0-585.142857-237.714286 0q-22.857143 0-38.857143-16t-16-38.857143l0-237.714286-438.857143 0 0 877.714286 731.428571 0zm-450.285714-465.142857q11.428571 4.571429 11.428571 17.142857l0 310.857143q0 12.571429-11.428571 17.142857-4.571429 1.142857-6.857143 1.142857-6.857143 0-13.142857-5.142857l-94.857143-95.428571-74.857143 0q-8 0-13.142857-5.142857t-5.142857-13.142857l0-109.714286q0-8 5.142857-13.142857t13.142857-5.142857l74.857143 0 94.857143-95.428571q9.142857-8.571429 20-4zm238.285714 393.714286q17.714286 0 28.571429-13.714286 73.714286-90.857143 73.714286-207.428571t-73.714286-207.428571q-9.142857-12-24.571429-13.714286t-26.857143 8q-12 9.714286-13.428571 24.857143t8.285714 27.142857q57.142857 70.285714 57.142857 161.142857t-57.142857 161.142857q-9.714286 12-8.285714 27.142857t13.428571 24.285714q10.285714 8.571429 22.857143 8.571429zm-120.571429-84.571429q15.428571 0 26.857143-11.428571 49.714286-53.142857 49.714286-125.142857t-49.714286-125.142857q-10.285714-10.857143-25.714286-11.428571t-26.285714 9.714286-11.428571 25.428571 10.285714 26.571429q29.714286 32.571429 29.714286 74.857143t-29.714286 74.857143q-10.857143 11.428571-10.285714 26.571429t11.428571 25.428571q11.428571 9.714286 25.142857 9.714286z",fill:"currentColor","p-id":"2265"},null,-1)]))}const Audio=_export_sfc(_sfc_main$l,[["render",_sfc_render$5]]),_sfc_main$k={},_hoisted_1$a={t:"1730332795021",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1970",width:"200",height:"200"};function _sfc_render$4(n,e){return openBlock(),createElementBlock("svg",_hoisted_1$a,e[0]||(e[0]=[createBaseVNode("path",{d:"M917.8112 229.0688c-22.20032-30.28992-53.16608-65.69984-87.18336-99.69664s-69.40672-64.96256-99.69664-87.18336c-51.56864-37.82656-76.5952-42.1888-90.9312-42.1888l-496.00512 0c-44.11392 0-79.99488 35.88096-79.99488 79.99488l0 864.01024c0 44.11392 35.88096 79.99488 79.99488 79.99488l736.01024 0c44.11392 0 79.99488-35.88096 79.99488-79.99488l0-624.00512c0-14.336-4.36224-39.34208-42.1888-90.9312l0 0 0 0zM785.36704 174.63296c30.69952 30.69952 54.80448 58.38848 72.58112 81.36704l-153.94816 0 0-153.94816c22.97856 17.77664 50.688 41.8816 81.36704 72.58112l0 0 0 0zM896 944.00512c0 8.66304-7.33184 15.99488-15.99488 15.99488l-736.01024 0c-8.66304 0-15.99488-7.33184-15.99488-15.99488l0-864.01024c0-8.66304 7.33184-15.99488 15.99488-15.99488 0 0 495.96416 0 496.00512 0l0 224.01024c0 17.67424 14.31552 32.01024 32.01024 32.01024l224.01024 0 0 624.00512zM256 64l128 0 0 64-128 0 0-64zM384 128l128 0 0 64-128 0 0-64zM256 192l128 0 0 64-128 0 0-64zM384 256l128 0 0 64-128 0 0-64zM256 320l128 0 0 64-128 0 0-64zM384 384l128 0 0 64-128 0 0-64zM256 448l128 0 0 64-128 0 0-64zM384 512l128 0 0 64-128 0 0-64zM256 847.99488c0 26.39872 21.6064 48.00512 48.00512 48.00512l160.01024 0c26.39872 0 48.00512-21.6064 48.00512-48.00512l0-160.01024c0-26.39872-21.6064-48.00512-48.00512-48.00512l-79.99488 0 0-64-128 0 0 271.99488zM448 768l0 64-128 0 0-64 128 0z",fill:"currentColor","p-id":"1971"},null,-1)]))}const Compressed=_export_sfc(_sfc_main$k,[["render",_sfc_render$4]]),_sfc_main$j={},_hoisted_1$9={t:"1730332732861",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1676",width:"200",height:"200"};function _sfc_render$3(n,e){return openBlock(),createElementBlock("svg",_hoisted_1$9,e[0]||(e[0]=[createBaseVNode("path",{d:"M832 896l-640 0 0-128 192-320 263.00416 320 184.99584-128 0 256zM832 480.01024c0 53.02272-42.98752 96.01024-96.01024 96.01024s-96.01024-42.98752-96.01024-96.01024 42.98752-96.01024 96.01024-96.01024c53.02272 0 96.01024 42.98752 96.01024 96.01024zM917.8112 229.0688c-22.2208-30.28992-53.16608-65.69984-87.18336-99.69664s-69.40672-64.96256-99.69664-87.18336c-51.56864-37.82656-76.5952-42.1888-90.9312-42.1888l-496.00512 0c-44.11392 0-79.99488 35.88096-79.99488 79.99488l0 864.01024c0 44.11392 35.88096 79.99488 79.99488 79.99488l736.01024 0c44.11392 0 79.99488-35.88096 79.99488-79.99488l0-624.00512c0-14.336-4.36224-39.34208-42.1888-90.9312zM785.36704 174.63296c30.69952 30.69952 54.80448 58.38848 72.58112 81.36704l-153.94816 0 0-153.94816c22.97856 17.77664 50.688 41.8816 81.36704 72.58112zM896 944.00512c0 8.66304-7.33184 15.99488-15.99488 15.99488l-736.01024 0c-8.66304 0-15.99488-7.33184-15.99488-15.99488l0-864.01024c0-8.66304 7.33184-15.99488 15.99488-15.99488 0 0 495.96416 0 496.00512 0l0 224.01024c0 17.67424 14.336 32.01024 32.01024 32.01024l224.01024 0 0 624.00512z",fill:"currentColor","p-id":"1677"},null,-1)]))}const Image=_export_sfc(_sfc_main$j,[["render",_sfc_render$3]]),_sfc_main$i={},_hoisted_1$8={t:"1730332828563",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2117",width:"200",height:"200"};function _sfc_render$2(n,e){return openBlock(),createElementBlock("svg",_hoisted_1$8,e[0]||(e[0]=[createBaseVNode("path",{d:"M842.01472 589.47584c-13.63968-13.45536-43.90912-20.56192-89.96864-21.17632-31.17056-0.34816-68.7104 2.39616-108.17536 7.92576-17.67424-10.19904-35.90144-21.2992-50.19648-34.65216-38.46144-35.92192-70.57408-85.77024-90.58304-140.5952 1.31072-5.12 2.41664-9.6256 3.44064-14.21312 0 0 21.66784-123.06432 15.93344-164.6592-0.79872-5.71392-1.26976-7.35232-2.80576-11.79648l-1.88416-4.83328c-5.89824-13.59872-17.44896-27.99616-35.57376-27.21792l-10.91584-0.34816c-20.19328 0-36.6592 10.32192-40.98048 25.76384-13.14816 48.4352 0.4096 120.89344 24.9856 214.7328l-6.28736 15.27808c-17.59232 42.88512-39.6288 86.05696-59.0848 124.14976l-2.51904 4.95616c-20.45952 40.0384-39.03488 74.0352-55.84896 102.83008l-17.36704 9.19552c-1.26976 0.67584-31.04768 16.42496-38.03136 20.64384-59.24864 35.38944-98.52928 75.55072-105.04192 107.4176-2.06848 10.17856-0.53248 23.18336 10.01472 29.20448l16.81408 8.45824c7.29088 3.64544 14.97088 5.50912 22.85568 5.50912 42.20928 0 91.19744-52.57216 158.69952-170.37312 77.9264-25.37472 166.64576-46.44864 244.40832-58.08128 59.24864 33.36192 132.13696 56.54528 178.13504 56.54528 8.17152 0 15.21664-0.77824 20.93056-2.29376 8.82688-2.33472 16.26112-7.3728 20.7872-14.19264 8.92928-13.43488 10.73152-31.92832 8.31488-50.87232-0.7168-5.632-5.20192-12.57472-10.07616-17.32608zM211.64032 814.03904c7.70048-21.03296 38.15424-62.64832 83.21024-99.55328 2.82624-2.29376 9.80992-8.82688 16.19968-14.90944-47.104 75.12064-78.6432 105.0624-99.40992 114.46272zM478.43328 199.68c13.55776 0 21.27872 34.2016 21.93408 66.2528s-6.8608 54.55872-16.15872 71.20896c-7.70048-24.65792-11.42784-63.50848-11.42784-88.90368 0 0-0.57344-48.55808 5.65248-48.55808l0 0zM398.848 637.50144c9.44128-16.91648 19.29216-34.75456 29.32736-53.67808 24.49408-46.32576 39.95648-82.55488 51.48672-112.35328 22.91712 41.6768 51.44576 77.12768 84.992 105.51296 4.17792 3.54304 8.62208 7.10656 13.27104 10.6496-68.21888 13.49632-127.16032 29.9008-179.07712 49.8688l0 0zM828.90752 633.6512c-4.15744 2.60096-16.05632 4.096-23.71584 4.096-24.69888 0-55.27552-11.28448-98.11968-29.67552 16.46592-1.20832 31.55968-1.8432 45.09696-1.8432 24.7808 0 32.11264-0.1024 56.34048 6.06208s24.53504 18.7392 20.3776 21.34016l0 0zM917.8112 229.0688c-22.20032-30.28992-53.16608-65.69984-87.18336-99.69664s-69.40672-64.96256-99.69664-87.18336c-51.56864-37.82656-76.5952-42.1888-90.9312-42.1888l-496.00512 0c-44.11392 0-79.99488 35.88096-79.99488 79.99488l0 864.01024c0 44.11392 35.88096 79.99488 79.99488 79.99488l736.01024 0c44.11392 0 79.99488-35.88096 79.99488-79.99488l0-624.00512c0-14.336-4.36224-39.34208-42.1888-90.9312l0 0zM785.36704 174.63296c30.69952 30.69952 54.80448 58.38848 72.58112 81.36704l-153.94816 0 0-153.94816c22.97856 17.77664 50.688 41.8816 81.36704 72.58112l0 0zM896 944.00512c0 8.66304-7.33184 15.99488-15.99488 15.99488l-736.01024 0c-8.66304 0-15.99488-7.33184-15.99488-15.99488l0-864.01024c0-8.66304 7.33184-15.99488 15.99488-15.99488 0 0 495.96416 0 496.00512 0l0 224.01024c0 17.67424 14.31552 32.01024 32.01024 32.01024l224.01024 0 0 624.00512z",fill:"currentColor","p-id":"2118"},null,-1)]))}const Pdf=_export_sfc(_sfc_main$i,[["render",_sfc_render$2]]),_sfc_main$h={},_hoisted_1$7={t:"1730332771789",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1823",width:"200",height:"200"};function _sfc_render$1(n,e){return openBlock(),createElementBlock("svg",_hoisted_1$7,e[0]||(e[0]=[createBaseVNode("path",{d:"M639.77472 475.89376l44.21632 0-51.01568 226.18112-66.31424-318.01344-106.55744 0-77.1072 318.01344-57.81504-318.01344-111.39072 0 113.09056 511.87712 108.83072 0 76.288-302.71488 68.25984 302.71488 100.33152 0 129.61792-511.87712-170.45504 0 0 91.83232zM917.8112 229.0688c-22.20032-30.28992-53.16608-65.69984-87.18336-99.69664s-69.40672-64.96256-99.69664-87.18336c-51.56864-37.82656-76.5952-42.1888-90.9312-42.1888l-496.00512 0c-44.11392 0-79.99488 35.88096-79.99488 79.99488l0 864.01024c0 44.11392 35.88096 79.99488 79.99488 79.99488l736.01024 0c44.11392 0 79.99488-35.88096 79.99488-79.99488l0-624.00512c0-14.336-4.36224-39.34208-42.1888-90.9312l0 0zM785.36704 174.63296c30.69952 30.69952 54.80448 58.38848 72.58112 81.36704l-153.94816 0 0-153.94816c22.97856 17.77664 50.688 41.8816 81.36704 72.58112l0 0zM896 944.00512c0 8.66304-7.33184 15.99488-15.99488 15.99488l-736.01024 0c-8.66304 0-15.99488-7.33184-15.99488-15.99488l0-864.01024c0-8.66304 7.33184-15.99488 15.99488-15.99488 0 0 495.96416 0 496.00512 0l0 224.01024c0 17.67424 14.31552 32.01024 32.01024 32.01024l224.01024 0 0 624.00512z",fill:"currentColor","p-id":"1824"},null,-1)]))}const Word=_export_sfc(_sfc_main$h,[["render",_sfc_render$1]]),_hoisted_1$6={key:0,class:"flex items-center"},_hoisted_2$4={key:1,class:"flex flex-col items-center gap-y-4"},_hoisted_3$4=["src"],_hoisted_4$4={class:"flex items-center gap-x-2"},_hoisted_5$1={key:2},_sfc_main$g=defineComponent({__name:"ImagePreviewPane",props:{image:{}},emits:["close","insertImage","download","reference","delete"],setup(n,{emit:e}){return(o,a)=>o.image.status==="fetching"?(openBlock(),createElementBlock("div",_hoisted_1$6,[createVNode(unref(LoaderCircle),{class:"size-4 mr-2 animate-spin"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.fetchingImage")),1)])):o.image.status==="synced"?(openBlock(),createElementBlock("div",_hoisted_2$4,[createBaseVNode("img",{src:o.image.url,class:"max-w-full max-h-full"},null,8,_hoisted_3$4),createBaseVNode("div",_hoisted_4$4,[createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",onClick:a[0]||(a[0]=s=>o.$emit("close"))},{default:withCtx(()=>[createVNode(unref(X),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.closePreview")),1)]),_:1}),createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",onClick:a[1]||(a[1]=s=>o.$emit("insertImage"))},{default:withCtx(()=>[createVNode(unref(Image$1),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.insertImage")),1)]),_:1}),createVNode(unref(_sfc_main$1A),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1s),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",class:"size-9 p-0"},{default:withCtx(()=>[createVNode(unref(Ellipsis),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1y),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1w),{onClick:a[2]||(a[2]=s=>o.$emit("download"))},{default:withCtx(()=>[createVNode(unref(Download),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.download")),1)]),_:1}),createVNode(unref(_sfc_main$1w),{onClick:a[3]||(a[3]=s=>o.$emit("reference"))},{default:withCtx(()=>[createVNode(unref(Link2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.reference")),1)]),_:1}),createVNode(unref(_sfc_main$1w),{class:"!text-red-500",onClick:a[4]||(a[4]=s=>o.$emit("delete"))},{default:withCtx(()=>[createVNode(unref(Trash2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.delete")),1)]),_:1})]),_:1})]),_:1})])])):o.image.status==="fetchError"?(openBlock(),createElementBlock("div",_hoisted_5$1,toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.fetchImageError")),1)):createCommentVNode("",!0)}}),imageExtnames=["png","jpg","jpeg","gif","bmp","webp"],audioExtnames=["mp3","wav","m4a"],videoExtnames=["mp4","webm","ogg"];function isImage(n){return imageExtnames.includes(n)}function isAudio(n){return audioExtnames.includes(n)}function isVideo(n){return videoExtnames.includes(n)}const _hoisted_1$5={class:"flex items-center justify-center flex-grow"},_hoisted_2$3={key:0,class:"flex flex-col items-center text-muted-foreground gap-y-6"},_hoisted_3$3={class:"text-sm break-all px-8"},_hoisted_4$3={class:"flex items-center justify-center flex-wrap gap-2"},_sfc_main$f=defineComponent({__name:"PreviewPane",setup(n){const{blockEditor:e}=BlocksContext.useContext(),o=useTaskQueue(),{serverUrl:a}=ServerInfoContext.useContext(),{useImage:s}=ImagesContext.useContext(),{attachmentsBasePath:l,activeDirent:c,open:d}=AttachmentsManagerContext.useContext(),{lastFocusedBlockTree:u,lastFocusedDiId:f}=LastFocusContext.useContext(),{blocksManager:v}=BlocksContext.useContext(),b=computed(()=>{const I=l.value;if(!c.value)return null;const L=c.value.path,U=getSeperator(),Z=c.value.isDirectory?void 0:c.value.path.split(".").pop(),K=c.value.isDirectory?void 0:L.split(U).pop();return{isDirectory:c.value.isDirectory,isPreview:c.value.isPreview,absolutePath:L,relativePath:L.slice(I.length+1),extname:Z,fileNameAndExtname:K,isImage:Z&&isImage(Z),isAudio:Z&&isAudio(Z),isVideo:Z&&isVideo(Z)}}),k=s(()=>{var I;return(I=b.value)!=null&&I.isImage?b.value.relativePath:null}),x=computed(()=>{if(!c.value)return null;if(c.value.isDirectory)return Folder;const I=c.value.path.split(".").pop();return I==="mp3"||I==="wav"||I==="m4a"?Audio:I==="zip"||I==="rar"||I==="7z"?Compressed:I==="png"||I==="jpg"||I==="jpeg"||I==="gif"||I==="bmp"||I==="webp"?Image:I==="pdf"?Pdf:I==="doc"||I==="docx"?Word:File}),_=computed(()=>!b.value||!b.value.extname?!1:b.value.isAudio||b.value.isVideo||b.value.isImage||["pdf","doc","docx"].includes(b.value.extname)),E=()=>{c.value&&(c.value.isPreview=!c.value.isPreview)},B=I=>{const L=u.value,U=f.value;if(!L||!U)return;const Z=L.getDi(U),K=L.getEditorView(U);if(!Z||!DI_FILTERS.isBlockDi(Z)||!(K instanceof EditorView$1||K instanceof EditorView))return;const j=Z.block.id;if(!j)return;const W=[BLOCK_CONTENT_TYPES.IMAGE,I,"left",null,null,[]],Y=K instanceof EditorView$1&&K.state.doc.content.size===0,G=K instanceof EditorView&&K.state.doc.length===0;Y||G?o.addTask(()=>{e.changeBlockContent({blockId:j,content:W}),d.value=!1}):o.addTask(()=>{const fe={baseBlockId:j,offset:1};e.insertNormalBlock({pos:fe,content:W})})},M=async I=>{const L=await fsGetAttachmentSignedUrl({path:I});if(!L.success)return;const U=L.data.signedUrl,Z=document.createElement("a");Z.href=`http://${a.value}${U}`,Z.download=I,Z.click()},V=async I=>{},F=I=>{const L=u.value,U=f.value;if(!L||!U)return;const Z=L.getEditorView(U);if(!I||!(Z instanceof EditorView$1))return;const K={getBlockRef:v.getBlockRef},j=getPmSchema(K).nodes.pathRef.create({path:I}),W=Z.state.tr.replaceSelectionWith(j);Z.dispatch(W)};return(I,L)=>(openBlock(),createElementBlock("div",_hoisted_1$5,[unref(c)?(openBlock(),createElementBlock("div",_hoisted_2$3,[b.value&&b.value.isPreview?(openBlock(),createElementBlock(Fragment$1,{key:0},[b.value.isImage&&unref(k)?(openBlock(),createBlock(_sfc_main$g,{key:0,image:unref(k),onClose:E,onInsertImage:L[0]||(L[0]=U=>B(b.value.relativePath)),onDownload:L[1]||(L[1]=U=>M(b.value.absolutePath)),onReference:L[2]||(L[2]=U=>F(b.value.relativePath)),onDelete:L[3]||(L[3]=U=>V(b.value.absolutePath))},null,8,["image"])):createCommentVNode("",!0)],64)):b.value?(openBlock(),createElementBlock(Fragment$1,{key:1},[(openBlock(),createBlock(resolveDynamicComponent(x.value),{class:"size-20"})),createBaseVNode("div",_hoisted_3$3,toDisplayString$1(b.value.fileNameAndExtname),1),createBaseVNode("div",_hoisted_4$3,[b.value.isImage?(openBlock(),createElementBlock(Fragment$1,{key:0},[createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",onClick:E},{default:withCtx(()=>[createVNode(unref(Eye),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.openPreview")),1)]),_:1}),createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",onClick:L[4]||(L[4]=U=>B(b.value.relativePath))},{default:withCtx(()=>[createVNode(unref(Image$1),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.insertImage")),1)]),_:1}),createVNode(unref(_sfc_main$1A),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1s),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",class:"size-9 p-0"},{default:withCtx(()=>[createVNode(unref(Ellipsis),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1y),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(Info),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.info")),1)]),_:1}),createVNode(unref(_sfc_main$1w),{onClick:L[5]||(L[5]=U=>M(unref(c).path))},{default:withCtx(()=>[createVNode(unref(Download),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.download")),1)]),_:1}),createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(Link2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.reference")),1)]),_:1}),createVNode(unref(_sfc_main$1w),{class:"!text-red-500",onClick:L[6]||(L[6]=U=>V(unref(c).path))},{default:withCtx(()=>[createVNode(unref(Trash2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.delete")),1)]),_:1})]),_:1})]),_:1})],64)):_.value?(openBlock(),createElementBlock(Fragment$1,{key:1},[createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",onClick:E},{default:withCtx(()=>[createVNode(unref(Eye),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.openPreview")),1)]),_:1}),createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",onClick:L[7]||(L[7]=U=>M(unref(c).path))},{default:withCtx(()=>[createVNode(unref(Download),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.download")),1)]),_:1}),createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",onClick:L[8]||(L[8]=U=>F(b.value.relativePath))},{default:withCtx(()=>[createVNode(unref(Link2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.pathReference")),1)]),_:1}),createVNode(unref(_sfc_main$1A),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1s),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"outline",size:"sm",class:"size-9 p-0"},{default:withCtx(()=>[createVNode(unref(Ellipsis),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1y),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1w),null,{default:withCtx(()=>[createVNode(unref(Info),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.info")),1)]),_:1}),createVNode(unref(_sfc_main$1w),{onClick:L[9]||(L[9]=U=>M(unref(c).path))},{default:withCtx(()=>[createVNode(unref(Link2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.reference")),1)]),_:1}),createVNode(unref(_sfc_main$1w),{class:"!text-red-500",onClick:L[10]||(L[10]=U=>V(unref(c).path))},{default:withCtx(()=>[createVNode(unref(Trash2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.delete")),1)]),_:1})]),_:1})]),_:1})],64)):(openBlock(),createBlock(unref(_sfc_main$2u),{key:2,variant:"outline",size:"sm",onClick:L[11]||(L[11]=U=>F(b.value.relativePath))},{default:withCtx(()=>[createVNode(unref(Link2),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(I.$t("kbView.attachmentsManager.previewPane.pathReference")),1)]),_:1}))])],64)):createCommentVNode("",!0)])):createCommentVNode("",!0)]))}}),_sfc_main$e=defineComponent({__name:"AttachmentsManager",setup(n){const{open:e,files:o,refetchFiles:a,fetchFilesStatus:s,uploadStatus:l,currentPathSegments:c,dbBasePath:d}=AttachmentsManagerContext.useContext();return ref([]),onMounted(async()=>{await fsEnsureAttachmentsDir({}),await a()}),(u,f)=>(openBlock(),createBlock(unref(_sfc_main$2a),{open:unref(e),"onUpdate:open":f[0]||(f[0]=v=>isRef(e)?e.value=v:null)},{default:withCtx(()=>[createVNode(unref(_sfc_main$29),{class:"flex flex-row max-w-[80vw] max-h-[80vh] w-[800px] h-[600px] p-0 !outline-none"},{default:withCtx(()=>[createVNode(unref(_sfc_main$26),{class:"hidden"},{default:withCtx(()=>[createVNode(unref(_sfc_main$25),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(u.$t("kbView.attachmentsManager.title")),1)]),_:1})]),_:1}),createVNode(_sfc_main$m),createVNode(_sfc_main$f)]),_:1})]),_:1},8,["open"]))}});(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode('[vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32,.72,0,1)}[vaul-drawer][vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[vaul-drawer][vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[vaul-drawer][vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[vaul-drawer][vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}.vaul-dragging .vaul-scrollable [vault-drawer-direction=top],.vaul-dragging .vaul-scrollable [vault-drawer-direction=bottom]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=left],.vaul-dragging .vaul-scrollable [vault-drawer-direction=right]{overflow-x:hidden!important}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=top],[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height, 0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=left],[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height, 0),0,0)}[vaul-overlay]{opacity:0;transition:opacity .5s cubic-bezier(.32,.72,0,1)}[vaul-overlay][vaul-drawer-visible=true]{opacity:1}[vaul-drawer]:after{content:"";position:absolute;background:inherit;background-color:inherit}[vaul-drawer][vaul-drawer-direction=top]:after{top:initial;bottom:100%;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=bottom]:after{top:100%;bottom:initial;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=left]:after{left:initial;right:100%;top:0;bottom:0;width:200%}[vaul-drawer][vaul-drawer-direction=right]:after{left:100%;right:initial;top:0;bottom:0;width:200%}[vaul-overlay][vaul-snap-points=true]:not([vaul-snap-points-overlay=true]):not([data-state=closed]){opacity:0}[vaul-overlay][vaul-snap-points-overlay=true]:not([vaul-drawer-visible=false]){opacity:1}@keyframes fake-animation{}@media (hover: hover) and (pointer: fine){[vaul-drawer]{-webkit-user-select:none;user-select:none}}')),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Fe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const et=n=>typeof n<"u";function tt(n){return JSON.parse(JSON.stringify(n))}function ye(n,e,o,a={}){var s,l,c;const{clone:d=!1,passive:u=!1,eventName:f,deep:v=!1,defaultValue:b,shouldEmit:k}=a,x=getCurrentInstance(),_=o||(x==null?void 0:x.emit)||((s=x==null?void 0:x.$emit)==null?void 0:s.bind(x))||((c=(l=x==null?void 0:x.proxy)==null?void 0:l.$emit)==null?void 0:c.bind(x==null?void 0:x.proxy));let E=f;e||(e="modelValue"),E=E||`update:${e.toString()}`;const B=F=>d?typeof d=="function"?d(F):tt(F):F,M=()=>et(n[e])?B(n[e]):b,V=F=>{k?k(F)&&_(E,F):_(E,F)};if(u){const F=M(),I=ref(F);let L=!1;return watch(()=>n[e],U=>{L||(L=!0,I.value=B(U),nextTick(()=>L=!1))}),watch(I,U=>{!L&&(U!==n[e]||v)&&V(U)},{deep:v}),I}else return computed({get(){return M()},set(F){V(F)}})}const[ve,nt]=Q$1("DrawerRoot"),Pe=new WeakMap;function $(n,e,o=!1){if(!n||!(n instanceof HTMLElement)||!e)return;const a={};Object.entries(e).forEach(([s,l])=>{if(s.startsWith("--")){n.style.setProperty(s,l);return}a[s]=n.style[s],n.style[s]=l}),!o&&Pe.set(n,a)}function ne(n,e){if(!n||!(n instanceof HTMLElement))return;const o=Pe.get(n);o&&(e?n.style[e]=o[e]:Object.entries(o).forEach(([a,s])=>{n.style[a]=s}))}function ae(n,e){const o=window.getComputedStyle(n),a=o.transform||o.webkitTransform||o.mozTransform;let s=a.match(/^matrix3d\((.+)\)$/);return s?Number.parseFloat(s[1].split(", ")[N(e)?13:12]):(s=a.match(/^matrix\((.+)\)$/),s?Number.parseFloat(s[1].split(", ")[N(e)?5:4]):null)}function at(n){return 8*(Math.log(n+1)-2)}function N(n){switch(n){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return n}}const g={DURATION:.5,EASE:[.32,.72,0,1]},Re=.4;function lt({activeSnapPoint:n,snapPoints:e,drawerRef:o,overlayRef:a,fadeFromIndex:s,onSnapPointChange:l,direction:c}){const d=computed(()=>(e.value&&n.value===e.value[e.value.length-1])??null),u=computed(()=>e.value&&e.value.length>0&&((s==null?void 0:s.value)||(s==null?void 0:s.value)===0)&&!Number.isNaN(s==null?void 0:s.value)&&e.value[(s==null?void 0:s.value)??-1]===n.value||!e.value),f=computed(()=>{var B;return((B=e.value)==null?void 0:B.findIndex(M=>M===n.value))??null}),v=computed(()=>{var B;return((B=e.value)==null?void 0:B.map(M=>{const V=typeof window<"u",F=typeof M=="string";let I=0;if(F&&(I=Number.parseInt(M,10)),N(c.value)){const U=F?I:V?M*window.innerHeight:0;return V?c.value==="bottom"?window.innerHeight-U:-window.innerHeight+U:U}const L=F?I:V?M*window.innerWidth:0;return V?c.value==="right"?window.innerWidth-L:-window.innerWidth+L:L}))??[]}),b=computed(()=>{var B;return f.value!==null?(B=v.value)==null?void 0:B[f.value]:null}),k=B=>{var M,V,F,I;const L=((M=v.value)==null?void 0:M.findIndex(U=>U===B))??null;nextTick(()=>{var U;l(L,v.value),$((U=o.value)==null?void 0:U.$el,{transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,transform:N(c.value)?`translate3d(0, ${B}px, 0)`:`translate3d(${B}px, 0, 0)`})}),v.value&&L!==v.value.length-1&&L!==(s==null?void 0:s.value)?$((V=a.value)==null?void 0:V.$el,{transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,opacity:"0"}):$((F=a.value)==null?void 0:F.$el,{transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,opacity:"1"}),n.value=L!==null?((I=e.value)==null?void 0:I[L])??null:null};watch([n,v,e],()=>{var B;if(n.value){const M=((B=e.value)==null?void 0:B.findIndex(V=>V===n.value))??-1;v.value&&M!==-1&&typeof v.value[M]=="number"&&k(v.value[M])}},{immediate:!0});function x({draggedDistance:B,closeDrawer:M,velocity:V,dismissible:F}){var I,L,U;if(s===void 0)return;const Z=c.value==="bottom"||c.value==="right"?(b.value??0)-B:(b.value??0)+B,K=f.value===(s.value??0)-1,j=f.value===0,W=B>0;if(K&&$((I=a.value)==null?void 0:I.$el,{transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`}),V>2&&!W){F?M():k(v.value[0]);return}if(V>2&&W&&v&&e.value){k(v.value[e.value.length-1]);return}const Y=(L=v.value)==null?void 0:L.reduce((fe,le)=>typeof fe!="number"||typeof le!="number"?fe:Math.abs(le-Z)<Math.abs(fe-Z)?le:fe),G=N(c.value)?window.innerHeight:window.innerWidth;if(V>Re&&Math.abs(B)<G*.4){const fe=W?1:-1;if(fe>0&&d){k(v.value[(((U=e.value)==null?void 0:U.length)??0)-1]);return}if(j&&fe<0&&F&&M(),f.value===null)return;k(v.value[f.value+fe]);return}k(Y)}function _({draggedDistance:B}){var M;if(b.value===null)return;const V=c.value==="bottom"||c.value==="right"?(b.value??0)-B:(b.value??0)+B;(c.value==="bottom"||c.value==="right")&&V<v.value[v.value.length-1]||(c.value==="top"||c.value==="left")&&V>v.value[v.value.length-1]||$((M=o.value)==null?void 0:M.$el,{transform:N(c.value)?`translate3d(0, ${V}px, 0)`:`translate3d(${V}px, 0, 0)`})}function E(B,M){if(!e||typeof f.value!="number"||!v.value||s===void 0)return null;const V=f.value===(s.value??0)-1;if(f.value>=(s.value??0)&&M)return 0;if(V&&!M)return 1;if(!u.value&&!V)return null;const F=V?f.value+1:f.value-1,I=V?v.value[F]-v.value[F-1]:v.value[F+1]-v.value[F],L=B/Math.abs(I);return V?1-L:L}return{isLastSnapPoint:d,shouldFade:u,getPercentageDragged:E,activeSnapPointIndex:f,onRelease:x,onDrag:_,snapPointsOffset:v}}let Q=null;function ot(n){const{isOpen:e,modal:o,nested:a,hasBeenOpened:s}=n,l=ref(typeof window<"u"?window.location.href:""),c=ref(0);function d(){if(Q===null&&e.value){Q={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height};const{scrollX:f,innerHeight:v}=window;document.body.style.position="fixed",document.body.style.top=`-${c.value}px`,document.body.style.left=`-${f}px`,document.body.style.right="0px",document.body.style.height="auto",setTimeout(()=>{requestAnimationFrame(()=>{const b=v-window.innerHeight;b&&c.value>=v&&(document.body.style.top=`-${c.value+b}px`)})},300)}}function u(){if(Q!==null){const f=-Number.parseInt(document.body.style.top,10),v=-Number.parseInt(document.body.style.left,10);Object.assign(document.body.style,Q),requestAnimationFrame(()=>{if(l.value!==window.location.href){l.value=window.location.href;return}window.scrollTo(v,f)}),Q=null}}return onMounted(()=>{function f(){c.value=window.scrollY}f(),window.addEventListener("scroll",f),onUnmounted(()=>{window.removeEventListener("scroll",f)})}),watch([e,s,l],()=>{a.value||!s.value||(e.value?(!window.matchMedia("(display-mode: standalone)").matches&&d(),o.value||setTimeout(()=>{u()},500)):u())}),{restorePositionSetting:u}}const it=.25,rt=100,De=8,q=16,ut=26,Se="vaul-dragging";function st(n,e){return n&&n.value?n:e}function ct(n){const{emitDrag:e,emitRelease:o,emitClose:a,emitOpenChange:s,open:l,dismissible:c,nested:d,fixed:u,modal:f,shouldScaleBackground:v,scrollLockTimeout:b,closeThreshold:k,activeSnapPoint:x,fadeFromIndex:_,direction:E}=n,B=ref(l.value??!1),M=ref(!1),V=ref(!1),F=ref(!1),I=ref(!1),L=ref(null),U=ref(null),Z=ref(null),K=ref(null),j=ref(null),W=ref(!0),Y=ref(null),G=ref(0),fe=ref(!1);ref(0);const le=ref(null);ref(0);const pe=computed(()=>{var ke;return((ke=le.value)==null?void 0:ke.$el.getBoundingClientRect().height)||0}),ue=st(n.snapPoints,ref(void 0)),{activeSnapPointIndex:Ne,onRelease:Ve,snapPointsOffset:Ze,onDrag:We,shouldFade:ze,getPercentageDragged:qe}=lt({snapPoints:ue,activeSnapPoint:x,drawerRef:le,fadeFromIndex:_,overlayRef:L,onSnapPointChange:dt,direction:E});function dt(ke,Ee){ue.value&&ke===Ee.length-1&&(U.value=new Date)}const{restorePositionSetting:Xe}=ot({isOpen:B,modal:f,nested:d,hasBeenOpened:M});function Ge(){return(window.innerWidth-ut)/window.innerWidth}function ft(ke,Ee){var te;if(!ke)return!1;let re=ke;const de=(te=window.getSelection())==null?void 0:te.toString(),Oe=le.value?ae(le.value.$el,E.value):null,me=new Date;if(re.hasAttribute("data-vaul-no-drag")||re.closest("[data-vaul-no-drag]"))return!1;if(E.value==="right"||E.value==="left")return!0;if(U.value&&me.getTime()-U.value.getTime()<500)return!1;if(Oe!==null&&(E.value==="bottom"?Oe>0:Oe<0))return!0;if(de&&de.length>0)return!1;if(j.value&&me.getTime()-j.value.getTime()<b.value&&Oe===0||Ee)return j.value=me,!1;for(;re;){if(re.scrollHeight>re.clientHeight){if(re.scrollTop!==0)return j.value=new Date,!1;if(re.getAttribute("role")==="dialog")return!0}re=re.parentNode}return!0}function Te(ke){!c.value&&!ue.value||le.value&&!le.value.$el.contains(ke.target)||(F.value=!0,Z.value=new Date,ke.target.setPointerCapture(ke.pointerId),G.value=N(E.value)?ke.clientY:ke.clientX)}function Ce(ke){var Ee,te,re,de,Oe,me;if(le.value&&F.value){const Be=E.value==="bottom"||E.value==="right"?1:-1,ht=(G.value-(N(E.value)?ke.clientY:ke.clientX))*Be,pt=ht>0,xt=ue.value&&!c.value&&!pt;if(xt&&Ne.value===0)return;const bt=Math.abs(ht),St=document.querySelector("[vaul-drawer-wrapper]");let Ct=bt/pe.value;const $t=qe(bt,pt);if($t!==null&&(Ct=$t),xt&&Ct>=1||!W.value&&!ft(ke.target,pt))return;if((Ee=le==null?void 0:le.value)==null||Ee.$el.classList.add(Se),W.value=!0,$((te=le.value)==null?void 0:te.$el,{transition:"none"}),$((re=L.value)==null?void 0:re.$el,{transition:"none"}),ue.value&&We({draggedDistance:ht}),pt&&!ue.value){const Pt=at(ht),Gt=Math.min(Pt*-1,0)*Be;$((de=le.value)==null?void 0:de.$el,{transform:N(E.value)?`translate3d(0, ${Gt}px, 0)`:`translate3d(${Gt}px, 0, 0)`});return}const Ut=1-Ct;if((ze.value||_.value&&Ne.value===_.value-1)&&(e(Ct),$((Oe=L.value)==null?void 0:Oe.$el,{opacity:`${Ut}`,transition:"none"},!0)),St&&L.value&&v.value){const Pt=Math.min(Ge()+Ct*(1-Ge()),1),Gt=8-Ct*8,Et=Math.max(0,14-Ct*14);$(St,{borderRadius:`${Gt}px`,transform:N(E.value)?`scale(${Pt}) translate3d(0, ${Et}px, 0)`:`scale(${Pt}) translate3d(${Et}px, 0, 0)`,transition:"none"},!0)}if(!ue.value){const Pt=bt*Be;$((me=le.value)==null?void 0:me.$el,{transform:N(E.value)?`translate3d(0, ${Pt}px, 0)`:`translate3d(${Pt}px, 0, 0)`})}}}function we(){var ke;if(!le.value)return;const Ee=document.querySelector("[vaul-drawer-wrapper]"),te=ae(le.value.$el,E.value);$(le.value.$el,{transform:"translate3d(0, 0, 0)",transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`}),$((ke=L.value)==null?void 0:ke.$el,{transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,opacity:"1"}),v.value&&te&&te>0&&B.value&&$(Ee,{borderRadius:`${De}px`,overflow:"hidden",...N(E.value)?{transform:`scale(${Ge()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ge()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${g.DURATION}s`,transitionTimingFunction:`cubic-bezier(${g.EASE.join(",")})`},!0)}function ce(){var ke;le.value&&($(le.value.$el,{transform:N(E.value)?`translate3d(0, ${E.value==="bottom"?"100%":"-100%"}, 0)`:`translate3d(${E.value==="right"?"100%":"-100%"}, 0, 0)`,transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`}),$((ke=L.value)==null?void 0:ke.$el,{opacity:"0",transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`}),oe(!1),window.setTimeout(()=>{V.value=!1,B.value=!1},300),window.setTimeout(()=>{ue.value&&(x.value=ue.value[0])},g.DURATION*1e3))}watchEffect(()=>{if(!B.value&&v.value&&Fe){const ke=setTimeout(()=>{ne(document.body)},200);return()=>clearTimeout(ke)}}),onUnmounted(()=>{oe(!1),Xe()});function ee(ke){if(!F.value||!le.value)return;le.value.$el.classList.remove(Se),W.value=!1,F.value=!1,K.value=new Date;const Ee=ae(le.value.$el,E.value);if(!ft(ke.target,!1)||!Ee||Number.isNaN(Ee)||Z.value===null)return;const te=K.value.getTime()-Z.value.getTime(),re=G.value-(N(E.value)?ke.clientY:ke.clientX),de=Math.abs(re)/te;if(de>.05&&(I.value=!0,window.setTimeout(()=>{I.value=!1},200)),ue.value){const me=E.value==="bottom"||E.value==="right"?1:-1;Ve({draggedDistance:re*me,closeDrawer:ce,velocity:de,dismissible:c.value}),o(!0);return}if(E.value==="bottom"||E.value==="right"?re>0:re<0){we(),o(!0);return}if(de>Re){ce(),o(!1);return}const Oe=Math.min(le.value.$el.getBoundingClientRect().height??0,window.innerHeight);if(Ee>=Oe*k.value){ce(),o(!1);return}o(!0),we()}watch(B,ke=>{ke&&(U.value=new Date,oe(!0)),s(ke)},{immediate:!0}),watch(l,ke=>{ke?(B.value=ke,M.value=!0):ce()},{immediate:!0});function oe(ke){const Ee=document.querySelector("[vaul-drawer-wrapper]");!Ee||!v.value||(ke?($(document.body,{background:document.body.style.backgroundColor||document.body.style.background}),$(document.body,{background:"black"},!0),$(Ee,{borderRadius:`${De}px`,overflow:"hidden",...N(E.value)?{transform:`scale(${Ge()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ge()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${g.DURATION}s`,transitionTimingFunction:`cubic-bezier(${g.EASE.join(",")})`})):(ne(Ee,"overflow"),ne(Ee,"transform"),ne(Ee,"borderRadius"),$(Ee,{transitionProperty:"transform, border-radius",transitionDuration:`${g.DURATION}s`,transitionTimingFunction:`cubic-bezier(${g.EASE.join(",")})`})))}function se(ke){var Ee,te;const re=ke?(window.innerWidth-q)/window.innerWidth:1,de=ke?-16:0;Y.value&&window.clearTimeout(Y.value),$((Ee=le.value)==null?void 0:Ee.$el,{transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,transform:`scale(${re}) translate3d(0, ${de}px, 0)`}),!ke&&(te=le.value)!=null&&te.$el&&(Y.value=window.setTimeout(()=>{var Oe,me;const Be=ae((Oe=le.value)==null?void 0:Oe.$el,E.value);$((me=le.value)==null?void 0:me.$el,{transition:"none",transform:N(E.value)?`translate3d(0, ${Be}px, 0)`:`translate3d(${Be}px, 0, 0)`})},500))}function ge(ke){var Ee;if(ke<0)return;const te=N(E.value)?window.innerHeight:window.innerWidth,re=(te-q)/te,de=re+ke*(1-re),Oe=-16+ke*q;$((Ee=le.value)==null?void 0:Ee.$el,{transform:N(E.value)?`scale(${de}) translate3d(0, ${Oe}px, 0)`:`scale(${de}) translate3d(${Oe}px, 0, 0)`,transition:"none"})}function _e(ke){var Ee;const te=N(E.value)?window.innerHeight:window.innerWidth,re=ke?(te-q)/te:1,de=ke?-16:0;ke&&$((Ee=le.value)==null?void 0:Ee.$el,{transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,transform:N(E.value)?`scale(${re}) translate3d(0, ${de}px, 0)`:`scale(${re}) translate3d(${de}px, 0, 0)`})}return{open:l,isOpen:B,modal:f,keyboardIsOpen:fe,hasBeenOpened:M,isVisible:V,drawerRef:le,drawerHeightRef:pe,overlayRef:L,isDragging:F,dragStartTime:Z,isAllowedToDrag:W,snapPoints:ue,activeSnapPoint:x,pointerStart:G,dismissible:c,snapPointsOffset:Ze,direction:E,shouldFade:ze,fadeFromIndex:_,shouldScaleBackground:v,onPress:Te,onDrag:Ce,onRelease:ee,closeDrawer:ce,onNestedDrag:ge,onNestedRelease:_e,onNestedOpenChange:se,emitClose:a,emitDrag:e,emitRelease:o,emitOpenChange:s,nested:d}}const vt=defineComponent({__name:"DrawerRoot",props:{activeSnapPoint:{default:void 0},closeThreshold:{default:it},shouldScaleBackground:{type:Boolean,default:void 0},scrollLockTimeout:{default:rt},fixed:{type:Boolean,default:void 0},dismissible:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:void 0},nested:{type:Boolean,default:!1},direction:{default:"bottom"},snapPoints:{default:void 0},fadeFromIndex:{default:void 0}},emits:["drag","release","close","update:open","update:activeSnapPoint"],setup(n,{expose:e,emit:o}){const a=n,s=o;useSlots();const l=computed(()=>a.fadeFromIndex??(a.snapPoints&&a.snapPoints.length-1)),c=ye(a,"open",s,{defaultValue:a.defaultOpen,passive:a.open===void 0}),d=ye(a,"activeSnapPoint",s,{passive:a.activeSnapPoint===void 0}),u={emitDrag:_=>s("drag",_),emitRelease:_=>s("release",_),emitClose:()=>s("close"),emitOpenChange:_=>{s("update:open",_)}},{closeDrawer:f,hasBeenOpened:v,modal:b,isOpen:k}=nt(ct({...u,...toRefs(a),activeSnapPoint:d,fadeFromIndex:l,open:c}));function x(_){if(c.value!==void 0){u.emitOpenChange(_);return}_?(v.value=!0,k.value=_):f()}return e({open:k}),(_,E)=>(openBlock(),createBlock(unref(eu),{open:unref(k),modal:unref(b),"onUpdate:open":x},{default:withCtx(()=>[renderSlot(_.$slots,"default",{open:unref(k)})]),_:3},8,["open","modal"]))}}),mt=defineComponent({__name:"DrawerOverlay",setup(n){const{overlayRef:e,snapPoints:o,isVisible:a,isOpen:s,shouldFade:l}=ve(),c=computed(()=>{var d;return o&&(((d=o.value)==null?void 0:d.length)??0)>0});return(d,u)=>(openBlock(),createBlock(unref(Eu),{ref_key:"overlayRef",ref:e,"vaul-drawer-visible":unref(a)?"true":"false","vaul-overlay":"","vaul-snap-points":unref(s)&&c.value?"true":"false","vaul-snap-points-overlay":unref(s)&&unref(l)?"true":"false"},null,8,["vaul-drawer-visible","vaul-snap-points","vaul-snap-points-overlay"]))}}),gt=defineComponent({__name:"DrawerContent",setup(n){const{open:e,isOpen:o,isVisible:a,snapPointsOffset:s,drawerRef:l,onPress:c,onDrag:d,onRelease:u,modal:f,emitOpenChange:v,dismissible:b,keyboardIsOpen:k,closeDrawer:x,direction:_}=ve(),E=computed(()=>s.value&&s.value.length>0?`${s.value[0]}px`:"0");function B(M){if(!f.value||M.defaultPrevented){M.preventDefault();return}k.value&&(k.value=!1),M.preventDefault(),b.value&&v(!1),!(!b.value||e.value!==void 0)&&x()}return watch(o,M=>{M&&setTimeout(()=>{a.value=!0},1)},{immediate:!0}),(M,V)=>(openBlock(),createBlock(unref(xu),{ref_key:"drawerRef",ref:l,"vaul-drawer":"","vaul-drawer-direction":unref(_),"vaul-drawer-visible":unref(a)?"true":"false",style:normalizeStyle({"--snap-point-height":E.value}),onPointerdown:unref(c),onPointermove:unref(d),onPointerup:unref(u),onPointerDownOutside:B,onEscapeKeyDown:V[0]||(V[0]=F=>{unref(b)||F.preventDefault()})},{default:withCtx(()=>[renderSlot(M.$slots,"default")]),_:3},8,["vaul-drawer-direction","vaul-drawer-visible","style","onPointerdown","onPointermove","onPointerup"]))}}),_sfc_main$d=defineComponent({__name:"Drawer",props:{activeSnapPoint:{},closeThreshold:{},shouldScaleBackground:{type:Boolean,default:!0},scrollLockTimeout:{},fixed:{type:Boolean},dismissible:{type:Boolean},modal:{type:Boolean},open:{type:Boolean},defaultOpen:{type:Boolean},nested:{type:Boolean},direction:{},snapPoints:{},fadeFromIndex:{}},emits:["drag","release","close","update:open","update:activeSnapPoint"],setup(n,{emit:e}){const o=xe(n,e);return(a,s)=>(openBlock(),createBlock(unref(vt),normalizeProps(guardReactiveProps(unref(o))),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),_sfc_main$c=defineComponent({__name:"DrawerOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(mt),mergeProps(o.value,{class:unref(cn)("fixed inset-0 z-50 bg-black/80",e.class)}),null,16,["class"]))}}),_sfc_main$b=defineComponent({__name:"DrawerContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const o=n,a=xe(o,e);return(s,l)=>(openBlock(),createBlock(unref(Dv),null,{default:withCtx(()=>[createVNode(_sfc_main$c),createVNode(unref(gt),mergeProps(unref(a),{class:unref(cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",o.class)}),{default:withCtx(()=>[l[0]||(l[0]=createBaseVNode("div",{class:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"},null,-1)),renderSlot(s.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_sfc_main$a=defineComponent({__name:"DrawerDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Du),mergeProps(o.value,{class:unref(cn)("text-sm text-muted-foreground",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_sfc_main$9=defineComponent({__name:"DrawerFooter",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("mt-auto flex flex-col gap-2 p-4",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$8=defineComponent({__name:"DrawerHeader",props:{class:{}},setup(n){const e=n;return(o,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(cn)("grid gap-1.5 p-4 text-center sm:text-left",e.class))},[renderSlot(o.$slots,"default")],2))}}),_sfc_main$7=defineComponent({__name:"DrawerTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,o=computed(()=>{const{class:a,...s}=e;return s});return(a,s)=>(openBlock(),createBlock(unref(Pu),mergeProps(o.value,{class:unref(cn)("text-lg font-semibold leading-none tracking-tight",e.class)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["class"]))}}),_hoisted_1$4={class:"p-4 space-y-4 max-h-[calc(90vh-150px)] overflow-y-auto"},_hoisted_2$2={class:"font-medium text-muted-foreground text-sm"},_hoisted_3$2={class:"space-y-1"},_hoisted_4$2={class:"px-2 py-1 bg-muted rounded"},_sfc_main$6=defineComponent({__name:"KeyBindings",setup(n){const{openKeybindings:e}=KeymapContext.useContext(),{t:o}=useI18n(),a={[o("kbView.keybindings.groups.commands")]:[{key:"Alt/Option + \u2191",description:o("kbView.keybindings.commands.swapUp")},{key:"Alt/Option + \u2193",description:o("kbView.keybindings.commands.swapDown")},{key:"Command/Ctrl + \u2193",description:o("kbView.keybindings.commands.expand")},{key:"Command/Ctrl + \u2191",description:o("kbView.keybindings.commands.collapse")},{key:"Tab",description:o("kbView.keybindings.commands.indent")},{key:"Shift + Tab",description:o("kbView.keybindings.commands.outdent")},{key:"@",description:o("kbView.keybindings.commands.insertBlockRef")},{key:"#",description:o("kbView.keybindings.commands.insertTag")},{key:"Alt/Option + m",description:o("kbView.keybindings.commands.insertInlineMath")},{key:"Alt/Option + Shift + m",description:o("kbView.keybindings.commands.insertBlockMath")},{key:"Command/Ctrl + b",description:o("kbView.keybindings.commands.bold")},{key:"Command/Ctrl + i",description:o("kbView.keybindings.commands.italic")},{key:"Command/Ctrl + `",description:o("kbView.keybindings.commands.code")},{key:"Command/Ctrl + =",description:o("kbView.keybindings.commands.highlight")},{key:"```<language><space>",description:o("kbView.keybindings.commands.toCodeblock")},{key:"Command/Ctrl + z",description:o("kbView.keybindings.commands.undo")},{key:"Command/Ctrl + Shift + z",description:o("kbView.keybindings.commands.redo")},{key:"Shift + Enter",description:o("kbView.keybindings.commands.softBreak")},{key:"Command/Ctrl + p",description:o("kbView.keybindings.commands.openFusionCommand")},{key:"Command/Ctrl + k",description:o("kbView.keybindings.commands.addToSidePane")}]};return(s,l)=>(openBlock(),createBlock(unref(_sfc_main$d),{open:unref(e),"onUpdate:open":l[0]||(l[0]=c=>isRef(e)?e.value=c:null)},{default:withCtx(()=>[createVNode(unref(tu),null,{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3}),createVNode(unref(_sfc_main$b),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$8),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$7),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(s.$t("kbView.keybindings.title")),1)]),_:1}),createVNode(unref(_sfc_main$a),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(s.$t("kbView.keybindings.description")),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$4,[(openBlock(),createElementBlock(Fragment$1,null,renderList(a,(c,d)=>createBaseVNode("div",{key:d,class:"space-y-2"},[createBaseVNode("h3",_hoisted_2$2,toDisplayString$1(d),1),createBaseVNode("div",_hoisted_3$2,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(c,(u,f)=>(openBlock(),createElementBlock("div",{key:f,class:"flex justify-between items-center text-sm"},[createBaseVNode("span",null,toDisplayString$1(u.description),1),createBaseVNode("kbd",_hoisted_4$2,toDisplayString$1(u.key),1)]))),128))])])),64))]),createVNode(unref(_sfc_main$9),null,{default:withCtx(()=>[createVNode(unref(Gl),{asChild:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"ghost"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(s.$t("kbView.keybindings.close")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["open"]))}}),_sfc_main$5=defineComponent({__name:"KbViewContent",setup(n){const{sidePaneOpen:e,sidePaneDir:o,sidePaneWidth:a,sidePaneHeight:s,enableSidePaneAnimation:l}=SidebarContext.useContext(),{synced:c,blocksManager:d}=BlocksContext.useContext(),{mainRootBlockId:u}=MainTreeContext.useContext(),f=d.getBlockRef("root");createCreateNewTreeDialogContext.useContext(),watch(c,(_,E)=>{!E&&_&&(d.getRootBlockRef().value==null?d.createNewTree():d.createBlockTransaction({type:"ui"}).commit())});const v=(_,E)=>{if(!(_ instanceof HTMLElement))return;const B=_.animate([{opacity:1,transform:"translateX(0)"},{opacity:0,transform:"translateX(100%)"}],{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});B.onfinish=()=>{E()}},b=(_,E)=>{if(!(_ instanceof HTMLElement))return;const B=_.animate([{opacity:0,transform:"translateX(100%)"},{opacity:1,transform:"translateX(0)"}],{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});B.onfinish=()=>{E()}},k=(_,E)=>{if(!(_ instanceof HTMLElement))return;const B=_.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(100%)"}],{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});B.onfinish=()=>{E()}},x=(_,E)=>{if(!(_ instanceof HTMLElement))return;const B=_.animate([{opacity:0,transform:"translateY(100%)"},{opacity:1,transform:"translateY(0)"}],{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});B.onfinish=()=>{E()}};return(_,E)=>(openBlock(),createElementBlock(Fragment$1,null,[createVNode(_sfc_main$s),unref(c)&&unref(f)?(openBlock(),createBlock(_sfc_main$14,{key:0,class:"h-[100vh] mr-1",id:"main",style:normalizeStyle({paddingRight:unref(e)&&unref(o)==="right"?`${unref(a)}px`:"0px",paddingBottom:unref(e)&&unref(o)==="bottom"?`${unref(s)}px`:"0px",transition:unref(l)?"padding 500ms var(--tf)":"none"}),"root-block-ids":[unref(u)],"root-block-level":0,"padding-top":60,"enlarge-root-block":!0},null,8,["style","root-block-ids"])):(openBlock(),createElementBlock("div",{key:1,class:"h-[100vh] mr-1 flex justify-center items-center text-muted-foreground",style:normalizeStyle({paddingRight:unref(e)&&unref(o)==="right"?`${unref(a)}px`:"0px",paddingBottom:unref(e)&&unref(o)==="bottom"?`${unref(s)}px`:"0px",transition:unref(l)?"padding 500ms var(--tf)":"none"})},[createVNode(unref(LoaderCircle),{class:"animate-spin mr-2"}),createTextVNode(" "+toDisplayString$1(_.$t("kbView.loadingKb")),1)],4)),createVNode(Transition,{onLeave:v,onEnter:b},{default:withCtx(()=>[unref(e)&&unref(o)==="right"?(openBlock(),createBlock(_sfc_main$r,{key:0,class:"absolute right-0 top-0 h-full border-l",style:normalizeStyle({width:`${unref(a)}px`})},null,8,["style"])):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{onLeave:k,onEnter:x},{default:withCtx(()=>[unref(e)&&unref(o)==="bottom"?(openBlock(),createBlock(_sfc_main$r,{key:0,class:"absolute bottom-0 left-0 w-[100vw] border-t",style:normalizeStyle({height:`${unref(s)}px`})},null,8,["style"])):createCommentVNode("",!0)]),_:1}),createVNode(_sfc_main$N),createVNode(_sfc_main$L),createVNode(_sfc_main$_),createVNode(_sfc_main$e),createVNode(_sfc_main$O),createVNode(_sfc_main$1P),createVNode(_sfc_main$$),createVNode(_sfc_main$10),createVNode(_sfc_main$12),createVNode(_sfc_main$11),createVNode(_sfc_main$6),createVNode(_sfc_main$1m)],64))}}),ImageEditorContext=createContext(()=>{const n=ref(!0),e=ref("https://letsenhance.io/static/8f5e523ee6b2479e26ecc91b9c25261e/1015f/MainAfter.jpg"),o=ref(!1);return{open:n,imageUrl:e,deleteOriginal:o}}),MenubarContext=createContext(()=>({menuPaneOpen:ref(!1)})),_sfc_main$4=defineComponent({__name:"KbView",setup(n){return(e,o)=>(openBlock(),createBlock(unref(kbViewRegistry).Provider,null,{default:withCtx(()=>[createVNode(unref(MainTreeContext).Provider,null,{default:withCtx(()=>[createVNode(unref(MenubarContext).Provider,null,{default:withCtx(()=>[createVNode(unref(ImageEditorContext).Provider,null,{default:withCtx(()=>[createVNode(unref(SettingsContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BasicSettingsContext).Provider,null,{default:withCtx(()=>[createVNode(unref(PathsContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BlockTreeContext).Provider,null,{default:withCtx(()=>[createVNode(unref(PasteDialogContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FocusModeContext).Provider,null,{default:withCtx(()=>[createVNode(unref(TimeMachineContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FloatingMathInputContext).Provider,null,{default:withCtx(()=>[createVNode(unref(LastFocusContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BlocksContext).Provider,null,{default:withCtx(()=>[createVNode(unref(ExporterContext).Provider,null,{default:withCtx(()=>[createVNode(unref(createCreateNewTreeDialogContext).Provider,null,{default:withCtx(()=>[createVNode(unref(IndexContext).Provider,null,{default:withCtx(()=>[createVNode(unref(AttachmentsManagerContext).Provider,null,{default:withCtx(()=>[createVNode(unref(ImagesContext).Provider,null,{default:withCtx(()=>[createVNode(unref(SidebarContext).Provider,null,{default:withCtx(()=>[createVNode(unref(RefSuggestionsContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BlockMoverContext).Provider,null,{default:withCtx(()=>[createVNode(unref(HistoryContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BlockSelectDragContext).Provider,null,{default:withCtx(()=>[createVNode(unref(SettingsPanelContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FavoriteContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FieldsManagerContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BacklinksContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FloatingEditorContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FieldValueInspectorContext).Provider,null,{default:withCtx(()=>[createVNode(unref(DailyNoteContext).Provider,null,{default:withCtx(()=>[createVNode(unref(FusionCommandContext).Provider,null,{default:withCtx(()=>[createVNode(unref(KeymapContext).Provider,null,{default:withCtx(()=>[createVNode(unref(BlockContextMenuContext).Provider,null,{default:withCtx(()=>[createVNode(_sfc_main$5)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),AdminLoginSchema={request:z.object({serverUrl:z.string(),password:z.string()}),result:z.object({token:z.string()})},KbEditorLoginSchema={request:z.object({serverUrl:z.string(),location:z.string(),password:z.string()}),result:z.object({token:z.string()})},adminLogin=usePostApi("/login/admin",AdminLoginSchema.request,AdminLoginSchema.result),kbEditorLogin=usePostApi("/login/kb-editor",KbEditorLoginSchema.request,KbEditorLoginSchema.result),normalizeServerUrl=n=>!n.startsWith("http://")&&!n.startsWith("https://")?`https://${n}`:n,_hoisted_1$3={class:"grid items-center w-full gap-4"},_hoisted_2$1={class:"flex flex-col space-y-3"},_hoisted_3$1={class:"flex flex-col space-y-2"},_hoisted_4$1={key:0,class:"text-red-500 flex items-center text-sm mt-2"},_sfc_main$3=defineComponent({__name:"AdminLoginView",setup(n){const{serverUrl:e,buildAdminTokenKey:o}=ServerInfoContext.useContext(),a=ref(""),s=ref(""),{t:l}=useI18n(),c=ref("idle"),d=computed(()=>["idle","loggingIn","loginSuccess"].includes(c.value)?null:l(`login.adminLogin.errMsg.${c.value}`));watch(a,f=>{e.value=normalizeServerUrl(f)});const u=async()=>{c.value="loggingIn";const f=e.value,v=z.string().url().safeParse(f);if(!v.success){console.log("URL \u683C\u5F0F\u4E0D\u6B63\u786E, err=",v.error),c.value="invalidServerUrl";return}const[b]=await Promise.all([adminLogin({serverUrl:f,password:s.value}),timeout(2e3)]);if(b.success){c.value="loginSuccess";const k=o(e.value);localStorage.setItem(k,b.data.token),console.log("tokenKey",k,b.data.token,localStorage.getItem(k)),setTimeout(()=>{const x=encodeURIComponent(f);router.push(`/admin-dashboard/${x}`)},2e3)}else b.code===RESP_CODES.PASSWORD_INCORRECT?c.value="invalidPassword":b.code===RESP_CODES.EXCEED_MAX_ATTEMPTS?c.value="maxAttempts":c.value="cannotConnectToServer"};return(f,v)=>{const b=resolveComponent("router-link");return openBlock(),createBlock(unref(_sfc_main$2t),{class:"w-[400px]"},{default:withCtx(()=>[createVNode(unref(_sfc_main$2p),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2o),{class:"flex items-center justify-between"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(f.$t("login.adminLogin.title"))+" ",1),createVNode(unref(_sfc_main$1A),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1s),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"outline",size:"icon"},{default:withCtx(()=>[createVNode(unref(Globe),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1y),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(f.$i18n.availableLocales,k=>(openBlock(),createBlock(unref(_sfc_main$1w),{key:k,onClick:x=>f.$i18n.locale=k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(f.$t(`languages.${k}`)),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$2r))]),_:1}),createVNode(unref(_sfc_main$2s),null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$1,[createVNode(unref(_sfc_main$13),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(f.$t("login.adminLogin.serverUrlLabel")),1)]),_:1}),createVNode(unref(_sfc_main$23),{modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=k=>a.value=k),placeholder:f.$t("login.adminLogin.serverUrlPlaceholder")},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_3$1,[createVNode(unref(_sfc_main$13),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(f.$t("login.adminLogin.passwordLabel")),1)]),_:1}),createVNode(unref(_sfc_main$23),{modelValue:s.value,"onUpdate:modelValue":v[1]||(v[1]=k=>s.value=k),type:"password"},null,8,["modelValue"])])]),d.value?(openBlock(),createElementBlock("div",_hoisted_4$1,[createVNode(unref(X),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(d.value),1)])):createCommentVNode("",!0)]),_:1}),createVNode(unref(_sfc_main$2q),{class:"flex justify-center gap-8"},{default:withCtx(()=>[createVNode(b,{to:"/login/kb-editor",class:"text-sm text-muted-foreground hover:text-foreground transition-colors duration-300"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(f.$t("login.adminLogin.kbEditorLoginBtn")),1)]),_:1}),createVNode(unref(_sfc_main$2u),{class:"min-w-[100px]",onClick:u,disabled:c.value==="loggingIn"},{default:withCtx(()=>[c.value==="loggingIn"?(openBlock(),createBlock(unref(LoaderCircle),{key:0,class:"size-4 mr-2 animate-spin"})):c.value==="loginSuccess"?(openBlock(),createBlock(unref(Check),{key:1,class:"size-4 mr-2"})):c.value!=="idle"?(openBlock(),createBlock(unref(X),{key:2,class:"size-4 mr-2"})):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(f.$t(`login.adminLogin.loginBtn.${c.value}`)??f.$t("login.adminLogin.loginBtn.loginFailed")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),_hoisted_1$2={class:"grid items-center w-full gap-4"},_hoisted_2={class:"flex flex-col space-y-3"},_hoisted_3={class:"relative"},_hoisted_4={class:"absolute right-3 top-3"},_hoisted_5={key:0,class:"flex items-center text-red-500 text-sm"},_hoisted_6=["innerHTML"],_hoisted_7={class:"flex flex-col space-y-2"},_hoisted_8={class:"flex items-center gap-2"},_hoisted_9={class:"text-xs text-gray-500"},_hoisted_10={class:"flex flex-col space-y-2"},_hoisted_11={key:0,class:"text-red-500 text-sm flex items-center"},_sfc_main$2=defineComponent({__name:"KbEditorLoginView",setup(n){const{serverUrl:e,buildKbEditorTokenKey:o}=ServerInfoContext.useContext(),a=ref(""),s=ref(""),l=ref(void 0),{kbs:c,refreshKbList:d}=KbInfoContext.useContext(),u=ref("invalidURL"),f=ref("idle"),{toast:v}=useToast();watch(a,_=>{e.value=normalizeServerUrl(_)});const b=useDebounceFn(async()=>{const _=e.value;if(!z.string().url().safeParse(e.value).success){console.log("URL \u683C\u5F0F\u4E0D\u6B63\u786E"),u.value="invalidURL";return}u.value="connecting";const E=await ping({});_===e.value&&(E.success?(u.value="connSuccess",k()):u.value="connFailed")}),k=(_=!1)=>{const E=e.value;d(E,()=>{if(E===e.value&&(Object.keys(c.value).length>0?l.value=Object.keys(c.value)[0]:u.value="noKbServer",_)){const B=Object.keys(c.value).length;v({title:"\u5237\u65B0\u77E5\u8BC6\u5E93\u5217\u8868\u6210\u529F",description:`\u670D\u52A1\u5668 ${e.value} \u4E0A\u6709 ${B} \u4E2A\u77E5\u8BC6\u5E93`})}},()=>{u.value="connFailed"})},x=async()=>{if(!l.value)return;f.value="loggingIn";const _=await kbEditorLogin({location:l.value,password:s.value,serverUrl:e.value});if(_.success){f.value="loginSuccess";const E=o(e.value,l.value);localStorage.setItem(E,_.data.token),console.log("tokenKey",E,_.data.token,localStorage.getItem(E)),setTimeout(()=>{const B=encodeURIComponent(e.value),M=encodeURIComponent(l.value);router.push(`/kb/${B}/${M}`)},1e3)}else f.value=_.code===RESP_CODES.PASSWORD_INCORRECT?"loginFailed_InvalidPassword":"loginFailed_Unknown"};return(_,E)=>{const B=resolveComponent("router-link");return openBlock(),createBlock(unref(_sfc_main$2t),{class:"w-[400px] z-10"},{default:withCtx(()=>[createVNode(unref(_sfc_main$2p),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$2o),{class:"flex items-center justify-between"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(_.$t("login.kbEditorLogin.title"))+" ",1),createVNode(unref(_sfc_main$1A),null,{default:withCtx(()=>[createVNode(unref(_sfc_main$1s),{"as-child":""},{default:withCtx(()=>[createVNode(unref(_sfc_main$2u),{variant:"outline",size:"icon"},{default:withCtx(()=>[createVNode(unref(Globe),{class:"size-4"})]),_:1})]),_:1}),createVNode(unref(_sfc_main$1y),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(_.$i18n.availableLocales,M=>(openBlock(),createBlock(unref(_sfc_main$1z),{key:M,checked:_.$i18n.locale===M,onClick:V=>_.$i18n.locale=M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(_.$t(`languages.${M}`)),1)]),_:2},1032,["checked","onClick"]))),128))]),_:1})]),_:1})]),_:1}),createVNode(unref(_sfc_main$2r))]),_:1}),createVNode(unref(_sfc_main$2s),null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2,[createVNode(unref(_sfc_main$13),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(_.$t("login.kbEditorLogin.serverUrlLabel")),1)]),_:1}),createBaseVNode("div",_hoisted_3,[createVNode(unref(_sfc_main$23),{modelValue:a.value,"onUpdate:modelValue":E[0]||(E[0]=M=>a.value=M),placeholder:_.$t("login.kbEditorLogin.serverUrlPlaceholder"),onInput:unref(b)},null,8,["modelValue","placeholder","onInput"]),createBaseVNode("div",_hoisted_4,[["connSuccess","noKbServer"].includes(u.value)?(openBlock(),createBlock(unref(CircleCheck),{key:0,class:"size-4 text-green-600"})):u.value==="connecting"?(openBlock(),createBlock(unref(LoaderCircle),{key:1,class:"size-4 animate-spin text-gray-500"})):createCommentVNode("",!0)])]),unref(e).length>0&&!["connSuccess","connecting","noKbServer"].includes(u.value)?(openBlock(),createElementBlock("div",_hoisted_5,[createVNode(unref(X),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(_.$t(`login.kbEditorLogin.serverStatus.${u.value}`)),1)])):createCommentVNode("",!0),u.value==="noKbServer"?(openBlock(),createElementBlock("span",{key:1,class:"text-blue-500 text-sm",innerHTML:_.$t("login.kbEditorLogin.noKbServerMsg")},null,8,_hoisted_6)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_7,[createVNode(unref(_sfc_main$13),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(_.$t("login.kbEditorLogin.kbLocationLabel")),1)]),_:1}),createBaseVNode("div",_hoisted_8,[createVNode(unref(_sfc_main$1N),{disabled:u.value!=="connSuccess","model-value":l.value,"onUpdate:modelValue":E[1]||(E[1]=M=>l.value=M)},{default:withCtx(()=>[createVNode(unref(_sfc_main$1H),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(l.value?unref(c)[l.value].name:"-"),1)]),_:1}),createVNode(unref(_sfc_main$1M),null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(Object.values(unref(c)),M=>(openBlock(),createBlock(unref(_sfc_main$1K),{key:M.location,value:M.location},{default:withCtx(()=>[createBaseVNode("div",null,[createTextVNode(toDisplayString$1(M.name)+" ",1),createBaseVNode("div",_hoisted_9,toDisplayString$1(M.location),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["disabled","model-value"]),createVNode(unref(_sfc_main$2u),{variant:"outline",disabled:u.value!=="connSuccess",onClick:E[2]||(E[2]=M=>k(!0)),class:"size-10 p-2",tooltip:_.$t("login.kbEditorLogin.refreshKbListTooltip")},{default:withCtx(()=>[createVNode(unref(RefreshCcw),{class:"size-4"})]),_:1},8,["disabled","tooltip"])])]),createBaseVNode("div",_hoisted_10,[createVNode(unref(_sfc_main$13),null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(_.$t("login.kbEditorLogin.passwordLabel")),1)]),_:1}),createVNode(unref(_sfc_main$23),{modelValue:s.value,"onUpdate:modelValue":E[3]||(E[3]=M=>s.value=M),type:"password",disabled:u.value!=="connSuccess"||!l.value,onInput:E[4]||(E[4]=M=>f.value="idle")},null,8,["modelValue","disabled"]),f.value==="loginFailed_InvalidPassword"||f.value==="loginFailed_Unknown"?(openBlock(),createElementBlock("div",_hoisted_11,[createVNode(unref(X),{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(_.$t(`login.kbEditorLogin.loginStatus.${f.value}`)),1)])):createCommentVNode("",!0)])])]),_:1}),createVNode(unref(_sfc_main$2q),{class:"flex justify-center gap-8"},{default:withCtx(()=>[createVNode(B,{to:"/login/admin",class:"text-sm text-muted-foreground hover:text-foreground transition-colors duration-300"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(_.$t("login.kbEditorLogin.adminLoginBtn")),1)]),_:1}),createVNode(unref(_sfc_main$2u),{class:"min-w-[100px]",onClick:x,disabled:u.value!=="connSuccess"||!l.value},{default:withCtx(()=>[f.value==="loggingIn"?(openBlock(),createBlock(unref(LoaderCircle),{key:0,class:"size-4 mr-2 animate-spin"})):f.value==="loginSuccess"?(openBlock(),createBlock(unref(Check),{key:1,class:"size-4 mr-2"})):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(_.$t(`login.kbEditorLogin.loginBtn.${f.value}`)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),_sfc_main$1={},_hoisted_1$1={class:"absolute w-full h-full flex items-center justify-center"};function _sfc_render(n,e){const o=resolveComponent("router-view");return openBlock(),createElementBlock("div",_hoisted_1$1,[createVNode(o)])}const LoginView=_export_sfc(_sfc_main$1,[["render",_sfc_render]]),router=createRouter({history:createWebHashHistory(),routes:[{path:"/",redirect:"/login/kb-editor"},{path:"/login",component:LoginView,children:[{path:"kb-editor",component:_sfc_main$2},{path:"admin",component:_sfc_main$3}]},{path:"/admin-dashboard/:serverUrl",component:_sfc_main$21,beforeEnter:(n,e,o)=>{const{extractTokenPayload:a,buildAdminTokenKey:s,logout:l}=globalThis.getServerInfoContext(),c=n.params.serverUrl,d=s(c),u=localStorage.getItem(d),f=u?a(u):null;!f||f.role!=="admin"||f.serverUrl!==c?(l(),o({path:"/login/admin"})):o()}},{path:"/kb/:serverUrl/:location/:rootBlockId?/:focusedBlockId?",component:_sfc_main$4,beforeEnter:(n,e,o)=>{const{extractTokenPayload:a,buildKbEditorTokenKey:s,logout:l}=globalThis.getServerInfoContext(),c=n.params.serverUrl,d=n.params.location,u=s(c,d),f=localStorage.getItem(u),v=f?a(f):null;!v||v.role!=="kb-editor"||v.serverUrl!==c||v.location!==d?(l(),o({path:"/login/kb-editor"})):o()}}]}),_hoisted_1={class:"h-[100vh] w-[100vw]"},_sfc_main=defineComponent({__name:"App",setup(n){return(e,o)=>{const a=resolveComponent("router-view");return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(unref(_sfc_main$1D),null,{default:withCtx(()=>[createVNode(unref(ThemeContext).Provider,null,{default:withCtx(()=>[createVNode(unref(ServerInfoContext).Provider,null,{default:withCtx(()=>[createVNode(unref(KbInfoContext).Provider,null,{default:withCtx(()=>[createVNode(a),createVNode(unref(_sfc_main$1T))]),_:1})]),_:1})]),_:1})]),_:1})])}}}),startApp=async()=>{const n=createI18n({legacy:!1,locale:localStorage.getItem("locale")??"en_US",fallbackLocale:"en_US",messages});watch(n.global.locale,o=>{localStorage.setItem("locale",o)});const e=createApp(_sfc_main);e.use(n),e.use(router),e.use(eventbusPlugin),e.use(taskQueuePlugin),e.mount("#app")};document.addEventListener("DOMContentLoaded",startApp)})();export{languageDataProp as A,foldService as B,CompletionContext as C,LanguageDescription as D,EditorView as E,ParseContext as F,bracketMatchingHandle as G,DefaultBufferLength as H,IterMode as I,sublanguageProp as J,LRLanguage as L,NodeWeakMap as N,Parser$1 as P,Tag as T,__tla,LanguageSupport as a,ifNotIn as b,continuedIndent as c,completeFromList as d,syntaxTree as e,foldNodeProp as f,flatIndent as g,delimitedIndent as h,indentNodeProp as i,foldInside as j,snippetCompletion as k,EditorSelection as l,NodeType as m,NodeProp as n,NodeSet as o,parseMixed as p,Tree as q,countColumn as r,styleTags as s,tags as t,Prec as u,keymap as v,EditorState as w,Language as x,indentUnit as y,defineLanguageFacet as z};
